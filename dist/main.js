(()=>{var jm=Object.create;var Xa=Object.defineProperty;var Wm=Object.getOwnPropertyDescriptor;var Vm=Object.getOwnPropertyNames;var Gm=Object.getPrototypeOf,Km=Object.prototype.hasOwnProperty;var In=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Ym=(e,t)=>{for(var r in t)Xa(e,r,{get:t[r],enumerable:!0})},Jm=(e,t,r,d)=>{if(t&&typeof t=="object"||typeof t=="function")for(let u of Vm(t))!Km.call(e,u)&&u!==r&&Xa(e,u,{get:()=>t[u],enumerable:!(d=Wm(t,u))||d.enumerable});return e};var On=(e,t,r)=>(r=e!=null?jm(Gm(e)):{},Jm(t||!e||!e.__esModule?Xa(r,"default",{value:e,enumerable:!0}):r,e));var Kc=In((Ds,da)=>{(function(e){"use strict";var t=e.setTimeout,r=e.clearTimeout,d=e.XMLHttpRequest,u=e.XDomainRequest,g=e.ActiveXObject,a=e.EventSource,p=e.document,o=e.Promise,i=e.fetch,n=e.Response,l=e.TextDecoder,s=e.TextEncoder,c=e.AbortController;if(typeof window<"u"&&typeof p<"u"&&!("readyState"in p)&&p.body==null&&(p.readyState="loading",window.addEventListener("load",function(H){p.readyState="complete"},!1)),d==null&&g!=null&&(d=function(){return new g("Microsoft.XMLHTTP")}),Object.create==null&&(Object.create=function(H){function J(){}return J.prototype=H,new J}),Date.now||(Date.now=function(){return new Date().getTime()}),c==null){var m=i;i=function(H,J){var at=J.signal;return m(H,{headers:J.headers,credentials:J.credentials,cache:J.cache}).then(function(tt){var ct=tt.body.getReader();return at._reader=ct,at._aborted&&at._reader.cancel(),{status:tt.status,statusText:tt.statusText,headers:tt.headers,body:{getReader:function(){return ct}}}})},c=function(){this.signal={_reader:null,_aborted:!1},this.abort=function(){this.signal._reader!=null&&this.signal._reader.cancel(),this.signal._aborted=!0}}}function h(){this.bitsNeeded=0,this.codePoint=0}h.prototype.decode=function(H){function J(bt,U,G){if(G===1)return bt>=128>>U&&bt<<U<=2047;if(G===2)return bt>=2048>>U&&bt<<U<=55295||bt>=57344>>U&&bt<<U<=65535;if(G===3)return bt>=65536>>U&&bt<<U<=1114111;throw new Error}function at(bt,U){if(bt===6*1)return U>>6>15?3:U>31?2:1;if(bt===6*2)return U>15?3:2;if(bt===6*3)return 3;throw new Error}for(var tt=65533,ct="",K=this.bitsNeeded,V=this.codePoint,st=0;st<H.length;st+=1){var it=H[st];K!==0&&(it<128||it>191||!J(V<<6|it&63,K-6,at(K,V)))&&(K=0,V=tt,ct+=String.fromCharCode(V)),K===0?(it>=0&&it<=127?(K=0,V=it):it>=192&&it<=223?(K=6*1,V=it&31):it>=224&&it<=239?(K=6*2,V=it&15):it>=240&&it<=247?(K=6*3,V=it&7):(K=0,V=tt),K!==0&&!J(V,K,at(K,V))&&(K=0,V=tt)):(K-=6,V=V<<6|it&63),K===0&&(V<=65535?ct+=String.fromCharCode(V):(ct+=String.fromCharCode(55296+(V-65535-1>>10)),ct+=String.fromCharCode(56320+(V-65535-1&1023))))}return this.bitsNeeded=K,this.codePoint=V,ct};var v=function(){try{return new l().decode(new s().encode("test"),{stream:!0})==="test"}catch(H){console.debug("TextDecoder does not support streaming option. Using polyfill instead: "+H)}return!1};(l==null||s==null||!v())&&(l=h);var k=function(){};function x(H){this.withCredentials=!1,this.readyState=0,this.status=0,this.statusText="",this.responseText="",this.onprogress=k,this.onload=k,this.onerror=k,this.onreadystatechange=k,this._contentType="",this._xhr=H,this._sendTimeout=0,this._abort=k}x.prototype.open=function(H,J){this._abort(!0);var at=this,tt=this._xhr,ct=1,K=0;this._abort=function(G){at._sendTimeout!==0&&(r(at._sendTimeout),at._sendTimeout=0),(ct===1||ct===2||ct===3)&&(ct=4,tt.onload=k,tt.onerror=k,tt.onabort=k,tt.onprogress=k,tt.onreadystatechange=k,tt.abort(),K!==0&&(r(K),K=0),G||(at.readyState=4,at.onabort(null),at.onreadystatechange())),ct=0};var V=function(){if(ct===1){var G=0,rt="",ft=void 0;if("contentType"in tt)G=200,rt="OK",ft=tt.contentType;else try{G=tt.status,rt=tt.statusText,ft=tt.getResponseHeader("Content-Type")}catch{G=0,rt="",ft=void 0}G!==0&&(ct=2,at.readyState=2,at.status=G,at.statusText=rt,at._contentType=ft,at.onreadystatechange())}},st=function(){if(V(),ct===2||ct===3){ct=3;var G="";try{G=tt.responseText}catch{}at.readyState=3,at.responseText=G,at.onprogress()}},it=function(G,rt){if((rt==null||rt.preventDefault==null)&&(rt={preventDefault:k}),st(),ct===1||ct===2||ct===3){if(ct=4,K!==0&&(r(K),K=0),at.readyState=4,G==="load")at.onload(rt);else if(G==="error")at.onerror(rt);else if(G==="abort")at.onabort(rt);else throw new TypeError;at.onreadystatechange()}},bt=function(G){tt!=null&&(tt.readyState===4?(!("onload"in tt)||!("onerror"in tt)||!("onabort"in tt))&&it(tt.responseText===""?"error":"load",G):tt.readyState===3?"onprogress"in tt||st():tt.readyState===2&&V())},U=function(){K=t(function(){U()},500),tt.readyState===3&&st()};"onload"in tt&&(tt.onload=function(G){it("load",G)}),"onerror"in tt&&(tt.onerror=function(G){it("error",G)}),"onabort"in tt&&(tt.onabort=function(G){it("abort",G)}),"onprogress"in tt&&(tt.onprogress=st),"onreadystatechange"in tt&&(tt.onreadystatechange=function(G){bt(G)}),("contentType"in tt||!("ontimeout"in d.prototype))&&(J+=(J.indexOf("?")===-1?"?":"&")+"padding=true"),tt.open(H,J,!0),"readyState"in tt&&(K=t(function(){U()},0))},x.prototype.abort=function(){this._abort(!1)},x.prototype.getResponseHeader=function(H){return this._contentType},x.prototype.setRequestHeader=function(H,J){var at=this._xhr;"setRequestHeader"in at&&at.setRequestHeader(H,J)},x.prototype.getAllResponseHeaders=function(){return this._xhr.getAllResponseHeaders!=null&&this._xhr.getAllResponseHeaders()||""},x.prototype.send=function(){if((!("ontimeout"in d.prototype)||!("sendAsBinary"in d.prototype)&&!("mozAnon"in d.prototype))&&p!=null&&p.readyState!=null&&p.readyState!=="complete"){var H=this;H._sendTimeout=t(function(){H._sendTimeout=0,H.send()},4);return}var J=this._xhr;"withCredentials"in J&&(J.withCredentials=this.withCredentials);try{J.send(void 0)}catch(at){throw at}};function A(H){return H.replace(/[A-Z]/g,function(J){return String.fromCharCode(J.charCodeAt(0)+32)})}function S(H){for(var J=Object.create(null),at=H.split(`\r
`),tt=0;tt<at.length;tt+=1){var ct=at[tt],K=ct.split(": "),V=K.shift(),st=K.join(": ");J[A(V)]=st}this._map=J}S.prototype.get=function(H){return this._map[A(H)]},d!=null&&d.HEADERS_RECEIVED==null&&(d.HEADERS_RECEIVED=2);function f(){}f.prototype.open=function(H,J,at,tt,ct,K,V){H.open("GET",ct);var st=0;H.onprogress=function(){var bt=H.responseText,U=bt.slice(st);st+=U.length,at(U)},H.onerror=function(bt){bt.preventDefault(),tt(new Error("NetworkError"))},H.onload=function(){tt(null)},H.onabort=function(){tt(null)},H.onreadystatechange=function(){if(H.readyState===d.HEADERS_RECEIVED){var bt=H.status,U=H.statusText,G=H.getResponseHeader("Content-Type"),rt=H.getAllResponseHeaders();J(bt,U,G,new S(rt))}},H.withCredentials=K;for(var it in V)Object.prototype.hasOwnProperty.call(V,it)&&H.setRequestHeader(it,V[it]);return H.send(),H};function L(H){this._headers=H}L.prototype.get=function(H){return this._headers.get(H)};function $(){}$.prototype.open=function(H,J,at,tt,ct,K,V){var st=null,it=new c,bt=it.signal,U=new l;return i(ct,{headers:V,credentials:K?"include":"same-origin",signal:bt,cache:"no-store"}).then(function(G){return st=G.body.getReader(),J(G.status,G.statusText,G.headers.get("Content-Type"),new L(G.headers)),new o(function(rt,ft){var kt=function(){st.read().then(function(Rt){if(Rt.done)rt(void 0);else{var Mt=U.decode(Rt.value,{stream:!0});at(Mt),kt()}}).catch(function(Rt){ft(Rt)})};kt()})}).catch(function(G){if(G.name!=="AbortError")return G}).then(function(G){tt(G)}),{abort:function(){st?.cancel(),it.abort()}}};function T(){this._listeners=Object.create(null)}function C(H){t(function(){throw H},0)}T.prototype.dispatchEvent=function(H){H.target=this;var J=this._listeners[H.type];if(J!=null)for(var at=J.length,tt=0;tt<at;tt+=1){var ct=J[tt];try{typeof ct.handleEvent=="function"?ct.handleEvent(H):ct.call(this,H)}catch(K){C(K)}}},T.prototype.addEventListener=function(H,J){H=String(H);var at=this._listeners,tt=at[H];tt==null&&(tt=[],at[H]=tt);for(var ct=!1,K=0;K<tt.length;K+=1)tt[K]===J&&(ct=!0);ct||tt.push(J)},T.prototype.removeEventListener=function(H,J){H=String(H);var at=this._listeners,tt=at[H];if(tt!=null){for(var ct=[],K=0;K<tt.length;K+=1)tt[K]!==J&&ct.push(tt[K]);ct.length===0?delete at[H]:at[H]=ct}};function w(H){this.type=H,this.target=void 0}function y(H,J){w.call(this,H),this.data=J.data,this.lastEventId=J.lastEventId}y.prototype=Object.create(w.prototype);function b(H,J){w.call(this,H),this.status=J.status,this.statusText=J.statusText,this.headers=J.headers}b.prototype=Object.create(w.prototype);function _(H,J){w.call(this,H),this.error=J.error}_.prototype=Object.create(w.prototype);var E=-1,R=0,M=1,I=2,P=-1,O=0,N=1,D=2,F=3,z=/^text\/event\-stream(;.*)?$/i,W=1e3,j=18e6,Z=function(H,J){var at=H==null?J:parseInt(H,10);return at!==at&&(at=J),Y(at)},Y=function(H){return Math.min(Math.max(H,W),j)},q=function(H,J,at){try{typeof J=="function"&&J.call(H,at)}catch(tt){C(tt)}};function nt(H,J){T.call(this),J=J||{},this.onopen=void 0,this.onmessage=void 0,this.onerror=void 0,this.url=void 0,this.readyState=void 0,this.withCredentials=void 0,this.headers=void 0,this._close=void 0,Et(this,H,J)}function ot(){return d!=null&&"withCredentials"in d.prototype||u==null?new d:new u}var wt=i!=null&&n!=null&&"body"in n.prototype;function Et(H,J,at){J=String(J);var tt=!!at.withCredentials,ct=at.lastEventIdQueryParameterName||"lastEventId",K=Y(1e3),V=Z(at.heartbeatTimeout,45e3),st="",it=K,bt=!1,U=0,G=at.headers||{},rt=at.Transport,ft=wt&&rt==null?void 0:new x(rt!=null?new rt:ot()),kt=rt!=null&&typeof rt!="string"?new rt:ft==null?new $:new f,Rt=void 0,Mt=0,Ot=E,Pt="",Lt="",Yt="",er="",ge=O,zi=0,rr=0,Ae=function(he,ae,Zt,Le){if(Ot===R)if(he===200&&Zt!=null&&z.test(Zt)){Ot=M,bt=Date.now(),it=K,H.readyState=M;var ve=new b("open",{status:he,statusText:ae,headers:Le});H.dispatchEvent(ve),q(H,H.onopen,ve)}else{var se="";he!==200?(ae&&(ae=ae.replace(/\s+/g," ")),se="EventSource's response has a status "+he+" "+ae+" that is not 200. Aborting the connection."):se="EventSource's response has a Content-Type specifying an unsupported type: "+(Zt==null?"-":Zt.replace(/\s+/g," "))+". Aborting the connection.",Bi();var ve=new b("error",{status:he,statusText:ae,headers:Le});H.dispatchEvent(ve),q(H,H.onerror,ve),console.error(se)}},_o=function(he){if(Ot===M){for(var ae=-1,Zt=0;Zt<he.length;Zt+=1){var Le=he.charCodeAt(Zt);(Le===10||Le===13)&&(ae=Zt)}var ve=(ae!==-1?er:"")+he.slice(0,ae+1);er=(ae===-1?er:"")+he.slice(ae+1),he!==""&&(bt=Date.now(),U+=he.length);for(var se=0;se<ve.length;se+=1){var Le=ve.charCodeAt(se);if(ge===P&&Le===10)ge=O;else if(ge===P&&(ge=O),Le===13||Le===10){if(ge!==O){ge===N&&(rr=se+1);var hr=ve.slice(zi,rr-1),br=ve.slice(rr+(rr<se&&ve.charCodeAt(rr)===32?1:0),se);hr==="data"?(Pt+=`
`,Pt+=br):hr==="id"?Lt=br:hr==="event"?Yt=br:hr==="retry"?(K=Z(br,K),it=K):hr==="heartbeatTimeout"&&(V=Z(br,V),Mt!==0&&(r(Mt),Mt=t(function(){Eo()},V)))}if(ge===O){if(Pt!==""){st=Lt,Yt===""&&(Yt="message");var no=new y(Yt,{data:Pt.slice(1),lastEventId:Lt});if(H.dispatchEvent(no),Yt==="open"?q(H,H.onopen,no):Yt==="message"?q(H,H.onmessage,no):Yt==="error"&&q(H,H.onerror,no),Ot===I)return}Pt="",Yt=""}ge=Le===13?P:O}else ge===O&&(zi=se,ge=N),ge===N?Le===58&&(rr=se+1,ge=D):ge===D&&(ge=F)}}},ti=function(he){if(Ot===M||Ot===R){Ot=E,Mt!==0&&(r(Mt),Mt=0),Mt=t(function(){Eo()},it),it=Y(Math.min(K*16,it*2)),H.readyState=R;var ae=new _("error",{error:he});H.dispatchEvent(ae),q(H,H.onerror,ae),he!=null&&console.error(he)}},Bi=function(){Ot=I,Rt!=null&&(Rt.abort(),Rt=void 0),Mt!==0&&(r(Mt),Mt=0),H.readyState=I},Eo=function(){if(Mt=0,Ot!==E){if(!bt&&Rt!=null)ti(new Error("No activity within "+V+" milliseconds. "+(Ot===R?"No response received.":U+" chars received.")+" Reconnecting.")),Rt!=null&&(Rt.abort(),Rt=void 0);else{var he=Math.max((bt||Date.now())+V-Date.now(),1);bt=!1,Mt=t(function(){Eo()},he)}return}bt=!1,U=0,Mt=t(function(){Eo()},V),Ot=R,Pt="",Yt="",Lt=st,er="",zi=0,rr=0,ge=O;var ae=J;if(J.slice(0,5)!=="data:"&&J.slice(0,5)!=="blob:"&&st!==""){var Zt=J.indexOf("?");ae=Zt===-1?J:J.slice(0,Zt+1)+J.slice(Zt+1).replace(/(?:^|&)([^=&]*)(?:=[^&]*)?/g,function(br,no){return no===ct?"":br}),ae+=(J.indexOf("?")===-1?"?":"&")+ct+"="+encodeURIComponent(st)}var Le=H.withCredentials,ve={};ve.Accept="text/event-stream";var se=H.headers;if(se!=null)for(var hr in se)Object.prototype.hasOwnProperty.call(se,hr)&&(ve[hr]=se[hr]);try{Rt=kt.open(ft,Ae,_o,ti,ae,Le,ve)}catch(br){throw Bi(),br}};H.url=J,H.readyState=R,H.withCredentials=tt,H.headers=G,H._close=Bi,Eo()}nt.prototype=Object.create(T.prototype),nt.prototype.CONNECTING=R,nt.prototype.OPEN=M,nt.prototype.CLOSED=I,nt.prototype.close=function(){this._close()},nt.CONNECTING=R,nt.OPEN=M,nt.CLOSED=I,nt.prototype.withCredentials=void 0;var vt=a;d!=null&&(a==null||!("withCredentials"in a.prototype))&&(vt=nt),function(H){if(typeof da=="object"&&typeof da.exports=="object"){var J=H(Ds);J!==void 0&&(da.exports=J)}else typeof define=="function"&&define.amd?define(["exports"],H):H(e)}(function(H){H.EventSourcePolyfill=nt,H.NativeEventSource=a,H.EventSource=vt})})(typeof globalThis>"u"?typeof window<"u"?window:typeof self<"u"?self:Ds:globalThis)});var up=In((Ys,Js)=>{var Ks,ga;Ks=Ys,ga=function(){"use strict";function e(E,R){var M=Object.keys(E);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(E);R&&(I=I.filter(function(P){return Object.getOwnPropertyDescriptor(E,P).enumerable})),M.push.apply(M,I)}return M}function t(E){for(var R=1;R<arguments.length;R++){var M=arguments[R]!=null?arguments[R]:{};R%2?e(Object(M),!0).forEach(function(I){d(E,I,M[I])}):Object.getOwnPropertyDescriptors?Object.defineProperties(E,Object.getOwnPropertyDescriptors(M)):e(Object(M)).forEach(function(I){Object.defineProperty(E,I,Object.getOwnPropertyDescriptor(M,I))})}return E}function r(E){return r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(R){return typeof R}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},r(E)}function d(E,R,M){return R in E?Object.defineProperty(E,R,{value:M,enumerable:!0,configurable:!0,writable:!0}):E[R]=M,E}function u(E){return function(R){if(Array.isArray(R))return a(R)}(E)||function(R){if(typeof Symbol<"u"&&R[Symbol.iterator]!=null||R["@@iterator"]!=null)return Array.from(R)}(E)||g(E)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function g(E,R){if(E){if(typeof E=="string")return a(E,R);var M=Object.prototype.toString.call(E).slice(8,-1);return M==="Object"&&E.constructor&&(M=E.constructor.name),M==="Map"||M==="Set"?Array.from(E):M==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(M)?a(E,R):void 0}}function a(E,R){(R==null||R>E.length)&&(R=E.length);for(var M=0,I=new Array(R);M<R;M++)I[M]=E[M];return I}var p=function(E){return typeof E=="string"?document.querySelector(E):E()},o=function(E,R){var M=typeof E=="string"?document.createElement(E):E;for(var I in R){var P=R[I];if(I==="inside")P.append(M);else if(I==="dest")p(P[0]).insertAdjacentElement(P[1],M);else if(I==="around"){var O=P;O.parentNode.insertBefore(M,O),M.append(O),O.getAttribute("autofocus")!=null&&O.focus()}else I in M?M[I]=P:M.setAttribute(I,P)}return M},i=function(E,R){return E=String(E).toLowerCase(),R?E.normalize("NFD").replace(/[\u0300-\u036f]/g,"").normalize("NFC"):E},n=function(E,R){return o("mark",t({innerHTML:E},typeof R=="string"&&{class:R})).outerHTML},l=function(E,R){R.input.dispatchEvent(new CustomEvent(E,{bubbles:!0,detail:R.feedback,cancelable:!0}))},s=function(E,R,M){var I=M||{},P=I.mode,O=I.diacritics,N=I.highlight,D=i(R,O);if(R=String(R),E=i(E,O),P==="loose"){var F=(E=E.replace(/ /g,"")).length,z=0,W=Array.from(R).map(function(Z,Y){return z<F&&D[Y]===E[z]&&(Z=N?n(Z,N):Z,z++),Z}).join("");if(z===F)return W}else{var j=D.indexOf(E);if(~j)return E=R.substring(j,j+E.length),j=N?R.replace(E,n(E,N)):R}},c=function(E,R){return new Promise(function(M,I){var P;return(P=E.data).cache&&P.store?M():new Promise(function(O,N){return typeof P.src=="function"?P.src(R).then(O,N):O(P.src)}).then(function(O){try{return E.feedback=P.store=O,l("response",E),M()}catch(N){return I(N)}},I)})},m=function(E,R){var M=R.data,I=R.searchEngine,P=[];M.store.forEach(function(N,D){var F=function(j){var Z=j?N[j]:N,Y=typeof I=="function"?I(E,Z):s(E,Z,{mode:I,diacritics:R.diacritics,highlight:R.resultItem.highlight});if(Y){var q={match:Y,value:N};j&&(q.key=j),P.push(q)}};if(M.keys){var z,W=function(j,Z){var Y=typeof Symbol<"u"&&j[Symbol.iterator]||j["@@iterator"];if(!Y){if(Array.isArray(j)||(Y=g(j))||Z&&j&&typeof j.length=="number"){Y&&(j=Y);var q=0,nt=function(){};return{s:nt,n:function(){return q>=j.length?{done:!0}:{done:!1,value:j[q++]}},e:function(vt){throw vt},f:nt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ot,wt=!0,Et=!1;return{s:function(){Y=Y.call(j)},n:function(){var vt=Y.next();return wt=vt.done,vt},e:function(vt){Et=!0,ot=vt},f:function(){try{wt||Y.return==null||Y.return()}finally{if(Et)throw ot}}}}(M.keys);try{for(W.s();!(z=W.n()).done;)F(z.value)}catch(j){W.e(j)}finally{W.f()}}else F()}),M.filter&&(P=M.filter(P));var O=P.slice(0,R.resultsList.maxResults);R.feedback={query:E,matches:P,results:O},l("results",R)},h="aria-expanded",v="aria-activedescendant",k="aria-selected",x=function(E,R){E.feedback.selection=t({index:R},E.feedback.results[R])},A=function(E){E.isOpen||((E.wrapper||E.input).setAttribute(h,!0),E.list.removeAttribute("hidden"),E.isOpen=!0,l("open",E))},S=function(E){E.isOpen&&((E.wrapper||E.input).setAttribute(h,!1),E.input.setAttribute(v,""),E.list.setAttribute("hidden",""),E.isOpen=!1,l("close",E))},f=function(E,R){var M=R.resultItem,I=R.list.getElementsByTagName(M.tag),P=!!M.selected&&M.selected.split(" ");if(R.isOpen&&I.length){var O,N,D=R.cursor;E>=I.length&&(E=0),E<0&&(E=I.length-1),R.cursor=E,D>-1&&(I[D].removeAttribute(k),P&&(N=I[D].classList).remove.apply(N,u(P))),I[E].setAttribute(k,!0),P&&(O=I[E].classList).add.apply(O,u(P)),R.input.setAttribute(v,I[R.cursor].id),R.list.scrollTop=I[E].offsetTop-R.list.clientHeight+I[E].clientHeight+5,R.feedback.cursor=R.cursor,x(R,E),l("navigate",R)}},L=function(E){f(E.cursor+1,E)},$=function(E){f(E.cursor-1,E)},T=function(E,R,M){(M=M>=0?M:E.cursor)<0||(E.feedback.event=R,x(E,M),l("selection",E),S(E))};function C(E,R){var M=this;return new Promise(function(I,P){var O,N;return O=R||((N=E.input)instanceof HTMLInputElement||N instanceof HTMLTextAreaElement?N.value:N.innerHTML),function(F,z,W){return z?z(F):F.length>=W}(O=E.query?E.query(O):O,E.trigger,E.threshold)?c(E,O).then(function(F){try{return E.feedback instanceof Error?I():(m(O,E),E.resultsList&&function(z){var W=z.resultsList,j=z.list,Z=z.resultItem,Y=z.feedback,q=Y.matches,nt=Y.results;if(z.cursor=-1,j.innerHTML="",q.length||W.noResults){var ot=new DocumentFragment;nt.forEach(function(wt,Et){var vt=o(Z.tag,t({id:"".concat(Z.id,"_").concat(Et),role:"option",innerHTML:wt.match,inside:ot},Z.class&&{class:Z.class}));Z.element&&Z.element(vt,wt)}),j.append(ot),W.element&&W.element(j,Y),A(z)}else S(z)}(E),D.call(M))}catch(z){return P(z)}},P):(S(E),D.call(M));function D(){return I()}})}var w=function(E,R){for(var M in E)for(var I in E[M])R(M,I)},y=function(E){var R,M,I,P=E.events,O=(R=function(){return C(E)},M=E.debounce,function(){clearTimeout(I),I=setTimeout(function(){return R()},M)}),N=E.events=t({input:t({},P&&P.input)},E.resultsList&&{list:P?t({},P.list):{}}),D={input:{input:function(){O()},keydown:function(F){(function(z,W){switch(z.keyCode){case 40:case 38:z.preventDefault(),z.keyCode===40?L(W):$(W);break;case 13:W.submit||z.preventDefault(),W.cursor>=0&&T(W,z);break;case 9:W.resultsList.tabSelect&&W.cursor>=0&&T(W,z);break;case 27:W.input.value="",S(W)}})(F,E)},blur:function(){S(E)}},list:{mousedown:function(F){F.preventDefault()},click:function(F){(function(z,W){var j=W.resultItem.tag.toUpperCase(),Z=Array.from(W.list.querySelectorAll(j)),Y=z.target.closest(j);Y&&Y.nodeName===j&&T(W,z,Z.indexOf(Y))})(F,E)}}};w(D,function(F,z){(E.resultsList||z==="input")&&(N[F][z]||(N[F][z]=D[F][z]))}),w(N,function(F,z){E[F].addEventListener(z,N[F][z])})};function b(E){var R=this;return new Promise(function(M,I){var P,O,N;if(P=E.placeHolder,N={role:"combobox","aria-owns":(O=E.resultsList).id,"aria-haspopup":!0,"aria-expanded":!1},o(E.input,t(t({"aria-controls":O.id,"aria-autocomplete":"both"},P&&{placeholder:P}),!E.wrapper&&t({},N))),E.wrapper&&(E.wrapper=o("div",t({around:E.input,class:E.name+"_wrapper"},N))),O&&(E.list=o(O.tag,t({dest:[O.destination,O.position],id:O.id,role:"listbox",hidden:"hidden"},O.class&&{class:O.class}))),y(E),E.data.cache)return c(E).then(function(F){try{return D.call(R)}catch(z){return I(z)}},I);function D(){return l("init",E),M()}return D.call(R)})}function _(E){var R=E.prototype;R.init=function(){b(this)},R.start=function(M){C(this,M)},R.unInit=function(){if(this.wrapper){var M=this.wrapper.parentNode;M.insertBefore(this.input,this.wrapper),M.removeChild(this.wrapper)}var I;w((I=this).events,function(P,O){I[P].removeEventListener(O,I.events[P][O])})},R.open=function(){A(this)},R.close=function(){S(this)},R.goTo=function(M){f(M,this)},R.next=function(){L(this)},R.previous=function(){$(this)},R.select=function(M){T(this,null,M)},R.search=function(M,I,P){return s(M,I,P)}}return function E(R){this.options=R,this.id=E.instances=(E.instances||0)+1,this.name="autoComplete",this.wrapper=1,this.threshold=1,this.debounce=0,this.resultsList={position:"afterend",tag:"ul",maxResults:5},this.resultItem={tag:"li"},function(M){var I=M.name,P=M.options,O=M.resultsList,N=M.resultItem;for(var D in P)if(r(P[D])==="object")for(var F in M[D]||(M[D]={}),P[D])M[D][F]=P[D][F];else M[D]=P[D];M.selector=M.selector||"#"+I,O.destination=O.destination||M.selector,O.id=O.id||I+"_list_"+M.id,N.id=N.id||I+"_result",M.input=p(M.selector)}(this),_.call(this,E),b(this)}},typeof Ys=="object"&&typeof Js<"u"?Js.exports=ga():typeof define=="function"&&define.amd?define(ga):(Ks=typeof globalThis<"u"?globalThis:Ks||self).autoComplete=ga()});var gp=In((mp,ha)=>{(function(){var e="ace",t=function(){return this}();if(!t&&typeof window<"u"&&(t=window),!e&&typeof requirejs<"u")return;var r=function(o,i,n){if(typeof o!="string"){r.original?r.original.apply(this,arguments):(console.error("dropping module because define wasn't a string."),console.trace());return}arguments.length==2&&(n=i),r.modules[o]||(r.payloads[o]=n,r.modules[o]=null)};r.modules={},r.payloads={};var d=function(o,i,n){if(typeof i=="string"){var l=a(o,i);if(l!=null)return n&&n(),l}else if(Object.prototype.toString.call(i)==="[object Array]"){for(var s=[],c=0,m=i.length;c<m;++c){var h=a(o,i[c]);if(h==null&&u.original)return;s.push(h)}return n&&n.apply(null,s)||!0}},u=function(o,i){var n=d("",o,i);return n==null&&u.original?u.original.apply(this,arguments):n},g=function(o,i){if(i.indexOf("!")!==-1){var n=i.split("!");return g(o,n[0])+"!"+g(o,n[1])}if(i.charAt(0)=="."){var l=o.split("/").slice(0,-1).join("/");for(i=l+"/"+i;i.indexOf(".")!==-1&&s!=i;){var s=i;i=i.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}}return i},a=function(o,i){i=g(o,i);var n=r.modules[i];if(!n){if(n=r.payloads[i],typeof n=="function"){var l={},s={id:i,uri:"",exports:l,packaged:!0},c=function(h,v){return d(i,h,v)},m=n(c,l,s);l=m||s.exports,r.modules[i]=l,delete r.payloads[i]}n=r.modules[i]=l||n}return n};function p(o){var i=t;o&&(t[o]||(t[o]={}),i=t[o]),(!i.define||!i.define.packaged)&&(r.original=i.define,i.define=r,i.define.packaged=!0),(!i.require||!i.require.packaged)&&(u.original=i.require,i.require=u,i.require.packaged=!0)}p(e)})();ace.define("ace/lib/es6-shim",["require","exports","module"],function(e,t,r){function d(u,g,a){Object.defineProperty(u,g,{value:a,enumerable:!1,writable:!0,configurable:!0})}String.prototype.startsWith||d(String.prototype,"startsWith",function(u,g){return g=g||0,this.lastIndexOf(u,g)===g}),String.prototype.endsWith||d(String.prototype,"endsWith",function(u,g){var a=this;(g===void 0||g>a.length)&&(g=a.length),g-=u.length;var p=a.indexOf(u,g);return p!==-1&&p===g}),String.prototype.repeat||d(String.prototype,"repeat",function(u){for(var g="",a=this;u>0;)u&1&&(g+=a),(u>>=1)&&(a+=a);return g}),String.prototype.includes||d(String.prototype,"includes",function(u,g){return this.indexOf(u,g)!=-1}),Object.assign||(Object.assign=function(u){if(u==null)throw new TypeError("Cannot convert undefined or null to object");for(var g=Object(u),a=1;a<arguments.length;a++){var p=arguments[a];p!=null&&Object.keys(p).forEach(function(o){g[o]=p[o]})}return g}),Object.values||(Object.values=function(u){return Object.keys(u).map(function(g){return u[g]})}),Array.prototype.find||d(Array.prototype,"find",function(u){for(var g=this.length,a=arguments[1],p=0;p<g;p++){var o=this[p];if(u.call(a,o,p,this))return o}}),Array.prototype.findIndex||d(Array.prototype,"findIndex",function(u){for(var g=this.length,a=arguments[1],p=0;p<g;p++){var o=this[p];if(u.call(a,o,p,this))return p}}),Array.prototype.includes||d(Array.prototype,"includes",function(u,g){return this.indexOf(u,g)!=-1}),Array.prototype.fill||d(Array.prototype,"fill",function(u){for(var g=this,a=g.length>>>0,p=arguments[1],o=p>>0,i=o<0?Math.max(a+o,0):Math.min(o,a),n=arguments[2],l=n===void 0?a:n>>0,s=l<0?Math.max(a+l,0):Math.min(l,a);i<s;)g[i]=u,i++;return g}),Array.of||d(Array,"of",function(){return Array.prototype.slice.call(arguments)})});ace.define("ace/lib/fixoldbrowsers",["require","exports","module","ace/lib/es6-shim"],function(e,t,r){"use strict";e("./es6-shim")});ace.define("ace/lib/deep_copy",["require","exports","module"],function(e,t,r){t.deepCopy=function d(u){if(typeof u!="object"||!u)return u;var g;if(Array.isArray(u)){g=[];for(var a=0;a<u.length;a++)g[a]=d(u[a]);return g}if(Object.prototype.toString.call(u)!=="[object Object]")return u;g={};for(var a in u)g[a]=d(u[a]);return g}});ace.define("ace/lib/lang",["require","exports","module","ace/lib/deep_copy"],function(e,t,r){"use strict";t.last=function(g){return g[g.length-1]},t.stringReverse=function(g){return g.split("").reverse().join("")},t.stringRepeat=function(g,a){for(var p="";a>0;)a&1&&(p+=g),(a>>=1)&&(g+=g);return p};var d=/^\s\s*/,u=/\s\s*$/;t.stringTrimLeft=function(g){return g.replace(d,"")},t.stringTrimRight=function(g){return g.replace(u,"")},t.copyObject=function(g){var a={};for(var p in g)a[p]=g[p];return a},t.copyArray=function(g){for(var a=[],p=0,o=g.length;p<o;p++)g[p]&&typeof g[p]=="object"?a[p]=this.copyObject(g[p]):a[p]=g[p];return a},t.deepCopy=e("./deep_copy").deepCopy,t.arrayToMap=function(g){for(var a={},p=0;p<g.length;p++)a[g[p]]=1;return a},t.createMap=function(g){var a=Object.create(null);for(var p in g)a[p]=g[p];return a},t.arrayRemove=function(g,a){for(var p=0;p<=g.length;p++)a===g[p]&&g.splice(p,1)},t.escapeRegExp=function(g){return g.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},t.escapeHTML=function(g){return(""+g).replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")},t.getMatchOffsets=function(g,a){var p=[];return g.replace(a,function(o){p.push({offset:arguments[arguments.length-2],length:o.length})}),p},t.deferredCall=function(g){var a=null,p=function(){a=null,g()},o=function(i){return o.cancel(),a=setTimeout(p,i||0),o};return o.schedule=o,o.call=function(){return this.cancel(),g(),o},o.cancel=function(){return clearTimeout(a),a=null,o},o.isPending=function(){return a},o},t.delayedCall=function(g,a){var p=null,o=function(){p=null,g()},i=function(n){p==null&&(p=setTimeout(o,n||a))};return i.delay=function(n){p&&clearTimeout(p),p=setTimeout(o,n||a)},i.schedule=i,i.call=function(){this.cancel(),g()},i.cancel=function(){p&&clearTimeout(p),p=null},i.isPending=function(){return p},i},t.supportsLookbehind=function(){try{new RegExp("(?<=.)")}catch{return!1}return!0},t.skipEmptyMatch=function(g,a,p){return p&&g.codePointAt(a)>65535?2:1}});ace.define("ace/lib/useragent",["require","exports","module"],function(e,t,r){"use strict";t.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"},t.getOS=function(){return t.isMac?t.OS.MAC:t.isLinux?t.OS.LINUX:t.OS.WINDOWS};var d=typeof navigator=="object"?navigator:{},u=(/mac|win|linux/i.exec(d.platform)||["other"])[0].toLowerCase(),g=d.userAgent||"",a=d.appName||"";t.isWin=u=="win",t.isMac=u=="mac",t.isLinux=u=="linux",t.isIE=a=="Microsoft Internet Explorer"||a.indexOf("MSAppHost")>=0?parseFloat((g.match(/(?:MSIE |Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]):parseFloat((g.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]),t.isOldIE=t.isIE&&t.isIE<9,t.isGecko=t.isMozilla=g.match(/ Gecko\/\d+/),t.isOpera=typeof opera=="object"&&Object.prototype.toString.call(window.opera)=="[object Opera]",t.isWebKit=parseFloat(g.split("WebKit/")[1])||void 0,t.isChrome=parseFloat(g.split(" Chrome/")[1])||void 0,t.isSafari=parseFloat(g.split(" Safari/")[1])&&!t.isChrome||void 0,t.isEdge=parseFloat(g.split(" Edge/")[1])||void 0,t.isAIR=g.indexOf("AdobeAIR")>=0,t.isAndroid=g.indexOf("Android")>=0,t.isChromeOS=g.indexOf(" CrOS ")>=0,t.isIOS=/iPad|iPhone|iPod/.test(g)&&!window.MSStream,t.isIOS&&(t.isMac=!0),t.isMobile=t.isIOS||t.isAndroid});ace.define("ace/lib/dom",["require","exports","module","ace/lib/useragent"],function(e,t,r){"use strict";var d=e("./useragent"),u="http://www.w3.org/1999/xhtml";t.buildDom=function n(l,s,c){if(typeof l=="string"&&l){var m=document.createTextNode(l);return s&&s.appendChild(m),m}if(!Array.isArray(l))return l&&l.appendChild&&s&&s.appendChild(l),l;if(typeof l[0]!="string"||!l[0]){for(var h=[],v=0;v<l.length;v++){var k=n(l[v],s,c);k&&h.push(k)}return h}var x=document.createElement(l[0]),A=l[1],S=1;A&&typeof A=="object"&&!Array.isArray(A)&&(S=2);for(var v=S;v<l.length;v++)n(l[v],x,c);return S==2&&Object.keys(A).forEach(function(f){var L=A[f];f==="class"?x.className=Array.isArray(L)?L.join(" "):L:typeof L=="function"||f=="value"||f[0]=="$"?x[f]=L:f==="ref"?c&&(c[L]=x):f==="style"?typeof L=="string"&&(x.style.cssText=L):L!=null&&x.setAttribute(f,L)}),s&&s.appendChild(x),x},t.getDocumentHead=function(n){return n||(n=document),n.head||n.getElementsByTagName("head")[0]||n.documentElement},t.createElement=function(n,l){return document.createElementNS?document.createElementNS(l||u,n):document.createElement(n)},t.removeChildren=function(n){n.innerHTML=""},t.createTextNode=function(n,l){var s=l?l.ownerDocument:document;return s.createTextNode(n)},t.createFragment=function(n){var l=n?n.ownerDocument:document;return l.createDocumentFragment()},t.hasCssClass=function(n,l){var s=(n.className+"").split(/\s+/g);return s.indexOf(l)!==-1},t.addCssClass=function(n,l){t.hasCssClass(n,l)||(n.className+=" "+l)},t.removeCssClass=function(n,l){for(var s=n.className.split(/\s+/g);;){var c=s.indexOf(l);if(c==-1)break;s.splice(c,1)}n.className=s.join(" ")},t.toggleCssClass=function(n,l){for(var s=n.className.split(/\s+/g),c=!0;;){var m=s.indexOf(l);if(m==-1)break;c=!1,s.splice(m,1)}return c&&s.push(l),n.className=s.join(" "),c},t.setCssClass=function(n,l,s){s?t.addCssClass(n,l):t.removeCssClass(n,l)},t.hasCssString=function(n,l){var s=0,c;if(l=l||document,c=l.querySelectorAll("style")){for(;s<c.length;)if(c[s++].id===n)return!0}},t.removeElementById=function(n,l){l=l||document,l.getElementById(n)&&l.getElementById(n).remove()};var g,a=[];t.useStrictCSP=function(n){g=n,n==!1?p():a||(a=[])};function p(){var n=a;a=null,n&&n.forEach(function(l){o(l[0],l[1])})}function o(n,l,s){if(!(typeof document>"u")){if(a){if(s)p();else if(s===!1)return a.push([n,l])}if(!g){var c=s;!s||!s.getRootNode?c=document:(c=s.getRootNode(),(!c||c==s)&&(c=document));var m=c.ownerDocument||c;if(l&&t.hasCssString(l,c))return null;l&&(n+=`
/*# sourceURL=ace/css/`+l+" */");var h=t.createElement("style");h.appendChild(m.createTextNode(n)),l&&(h.id=l),c==m&&(c=t.getDocumentHead(m)),c.insertBefore(h,c.firstChild)}}}if(t.importCssString=o,t.importCssStylsheet=function(n,l){t.buildDom(["link",{rel:"stylesheet",href:n}],t.getDocumentHead(l))},t.scrollbarWidth=function(n){var l=t.createElement("ace_inner");l.style.width="100%",l.style.minWidth="0px",l.style.height="200px",l.style.display="block";var s=t.createElement("ace_outer"),c=s.style;c.position="absolute",c.left="-10000px",c.overflow="hidden",c.width="200px",c.minWidth="0px",c.height="150px",c.display="block",s.appendChild(l);var m=n&&n.documentElement||document&&document.documentElement;if(!m)return 0;m.appendChild(s);var h=l.offsetWidth;c.overflow="scroll";var v=l.offsetWidth;return h===v&&(v=s.clientWidth),m.removeChild(s),h-v},t.computedStyle=function(n,l){return window.getComputedStyle(n,"")||{}},t.setStyle=function(n,l,s){n[l]!==s&&(n[l]=s)},t.HAS_CSS_ANIMATION=!1,t.HAS_CSS_TRANSFORMS=!1,t.HI_DPI=d.isWin?typeof window<"u"&&window.devicePixelRatio>=1.5:!0,d.isChromeOS&&(t.HI_DPI=!1),typeof document<"u"){var i=document.createElement("div");t.HI_DPI&&i.style.transform!==void 0&&(t.HAS_CSS_TRANSFORMS=!0),!d.isEdge&&typeof i.style.animationName<"u"&&(t.HAS_CSS_ANIMATION=!0),i=null}t.HAS_CSS_TRANSFORMS?t.translate=function(n,l,s){n.style.transform="translate("+Math.round(l)+"px, "+Math.round(s)+"px)"}:t.translate=function(n,l,s){n.style.top=Math.round(s)+"px",n.style.left=Math.round(l)+"px"}});ace.define("ace/lib/net",["require","exports","module","ace/lib/dom"],function(e,t,r){"use strict";var d=e("./dom");t.get=function(u,g){var a=new XMLHttpRequest;a.open("GET",u,!0),a.onreadystatechange=function(){a.readyState===4&&g(a.responseText)},a.send(null)},t.loadScript=function(u,g){var a=d.getDocumentHead(),p=document.createElement("script");p.src=u,a.appendChild(p),p.onload=p.onreadystatechange=function(o,i){(i||!p.readyState||p.readyState=="loaded"||p.readyState=="complete")&&(p=p.onload=p.onreadystatechange=null,i||g())}},t.qualifyURL=function(u){var g=document.createElement("a");return g.href=u,g.href}});ace.define("ace/lib/oop",["require","exports","module"],function(e,t,r){"use strict";t.inherits=function(d,u){d.super_=u,d.prototype=Object.create(u.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}})},t.mixin=function(d,u){for(var g in u)d[g]=u[g];return d},t.implement=function(d,u){t.mixin(d,u)}});ace.define("ace/lib/event_emitter",["require","exports","module"],function(e,t,r){"use strict";var d={},u=function(){this.propagationStopped=!0},g=function(){this.defaultPrevented=!0};d._emit=d._dispatchEvent=function(a,p){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var o=this._eventRegistry[a]||[],i=this._defaultHandlers[a];if(!(!o.length&&!i)){(typeof p!="object"||!p)&&(p={}),p.type||(p.type=a),p.stopPropagation||(p.stopPropagation=u),p.preventDefault||(p.preventDefault=g),o=o.slice();for(var n=0;n<o.length&&(o[n](p,this),!p.propagationStopped);n++);if(i&&!p.defaultPrevented)return i(p,this)}},d._signal=function(a,p){var o=(this._eventRegistry||{})[a];if(o){o=o.slice();for(var i=0;i<o.length;i++)o[i](p,this)}},d.once=function(a,p){var o=this;if(this.on(a,function i(){o.off(a,i),p.apply(null,arguments)}),!p)return new Promise(function(i){p=i})},d.setDefaultHandler=function(a,p){var o=this._defaultHandlers;if(o||(o=this._defaultHandlers={_disabled_:{}}),o[a]){var i=o[a],n=o._disabled_[a];n||(o._disabled_[a]=n=[]),n.push(i);var l=n.indexOf(p);l!=-1&&n.splice(l,1)}o[a]=p},d.removeDefaultHandler=function(a,p){var o=this._defaultHandlers;if(o){var i=o._disabled_[a];if(o[a]==p)i&&this.setDefaultHandler(a,i.pop());else if(i){var n=i.indexOf(p);n!=-1&&i.splice(n,1)}}},d.on=d.addEventListener=function(a,p,o){this._eventRegistry=this._eventRegistry||{};var i=this._eventRegistry[a];return i||(i=this._eventRegistry[a]=[]),i.indexOf(p)==-1&&i[o?"unshift":"push"](p),p},d.off=d.removeListener=d.removeEventListener=function(a,p){this._eventRegistry=this._eventRegistry||{};var o=this._eventRegistry[a];if(o){var i=o.indexOf(p);i!==-1&&o.splice(i,1)}},d.removeAllListeners=function(a){a||(this._eventRegistry=this._defaultHandlers=void 0),this._eventRegistry&&(this._eventRegistry[a]=void 0),this._defaultHandlers&&(this._defaultHandlers[a]=void 0)},t.EventEmitter=d});ace.define("ace/lib/report_error",["require","exports","module"],function(e,t,r){t.reportError=function(u,g){var a=new Error(u);a.data=g,typeof console=="object"&&console.error&&console.error(a),setTimeout(function(){throw a})}});ace.define("ace/lib/default_english_messages",["require","exports","module"],function(e,t,r){var d={"autocomplete.popup.aria-roledescription":"Autocomplete suggestions","autocomplete.popup.aria-label":"Autocomplete suggestions","autocomplete.popup.item.aria-roledescription":"item","autocomplete.loading":"Loading...","editor.scroller.aria-roledescription":"editor","editor.scroller.aria-label":"Editor content, press Enter to start editing, press Escape to exit","editor.gutter.aria-roledescription":"editor","editor.gutter.aria-label":"Editor gutter, press Enter to interact with controls using arrow keys, press Escape to exit","error-marker.good-state":"Looks good!","prompt.recently-used":"Recently used","prompt.other-commands":"Other commands","prompt.no-matching-commands":"No matching commands","search-box.find.placeholder":"Search for","search-box.find-all.text":"All","search-box.replace.placeholder":"Replace with","search-box.replace-next.text":"Replace","search-box.replace-all.text":"All","search-box.toggle-replace.title":"Toggle Replace mode","search-box.toggle-regexp.title":"RegExp Search","search-box.toggle-case.title":"CaseSensitive Search","search-box.toggle-whole-word.title":"Whole Word Search","search-box.toggle-in-selection.title":"Search In Selection","search-box.search-counter":"$0 of $1","text-input.aria-roledescription":"editor","text-input.aria-label":"Cursor at row $0","gutter.code-folding.range.aria-label":"Toggle code folding, rows $0 through $1","gutter.code-folding.closed.aria-label":"Toggle code folding, rows $0 through $1","gutter.code-folding.open.aria-label":"Toggle code folding, row $0","gutter.code-folding.closed.title":"Unfold code","gutter.code-folding.open.title":"Fold code","gutter.annotation.aria-label.error":"Error, read annotations row $0","gutter.annotation.aria-label.warning":"Warning, read annotations row $0","gutter.annotation.aria-label.info":"Info, read annotations row $0","inline-fold.closed.title":"Unfold code","gutter-tooltip.aria-label.error.singular":"error","gutter-tooltip.aria-label.error.plural":"errors","gutter-tooltip.aria-label.warning.singular":"warning","gutter-tooltip.aria-label.warning.plural":"warnings","gutter-tooltip.aria-label.info.singular":"information message","gutter-tooltip.aria-label.info.plural":"information messages"};t.defaultEnglishMessages=d});ace.define("ace/lib/app_config",["require","exports","module","ace/lib/oop","ace/lib/event_emitter","ace/lib/report_error","ace/lib/default_english_messages"],function(e,t,r){"no use strict";var d=e("./oop"),u=e("./event_emitter").EventEmitter,g=e("./report_error").reportError,a=e("./default_english_messages").defaultEnglishMessages,p={setOptions:function(s){Object.keys(s).forEach(function(c){this.setOption(c,s[c])},this)},getOptions:function(s){var c={};if(s)Array.isArray(s)||(c=s,s=Object.keys(c));else{var m=this.$options;s=Object.keys(m).filter(function(h){return!m[h].hidden})}return s.forEach(function(h){c[h]=this.getOption(h)},this),c},setOption:function(s,c){if(this["$"+s]!==c){var m=this.$options[s];if(!m)return o('misspelled option "'+s+'"');if(m.forwardTo)return this[m.forwardTo]&&this[m.forwardTo].setOption(s,c);m.handlesSet||(this["$"+s]=c),m&&m.set&&m.set.call(this,c)}},getOption:function(s){var c=this.$options[s];return c?c.forwardTo?this[c.forwardTo]&&this[c.forwardTo].getOption(s):c&&c.get?c.get.call(this):this["$"+s]:o('misspelled option "'+s+'"')}};function o(s){typeof console<"u"&&console.warn&&console.warn.apply(console,arguments)}var i,n,l=function(){function s(){this.$defaultOptions={},i=a,n="dollarSigns"}return s.prototype.defineOptions=function(c,m,h){return c.$options||(this.$defaultOptions[m]=c.$options={}),Object.keys(h).forEach(function(v){var k=h[v];typeof k=="string"&&(k={forwardTo:k}),k.name||(k.name=v),c.$options[k.name]=k,"initialValue"in k&&(c["$"+k.name]=k.initialValue)}),d.implement(c,p),this},s.prototype.resetOptions=function(c){Object.keys(c.$options).forEach(function(m){var h=c.$options[m];"value"in h&&c.setOption(m,h.value)})},s.prototype.setDefaultValue=function(c,m,h){if(!c){for(c in this.$defaultOptions)if(this.$defaultOptions[c][m])break;if(!this.$defaultOptions[c][m])return!1}var v=this.$defaultOptions[c]||(this.$defaultOptions[c]={});v[m]&&(v.forwardTo?this.setDefaultValue(v.forwardTo,m,h):v[m].value=h)},s.prototype.setDefaultValues=function(c,m){Object.keys(m).forEach(function(h){this.setDefaultValue(c,h,m[h])},this)},s.prototype.setMessages=function(c,m){i=c,m&&m.placeholders&&(n=m.placeholders)},s.prototype.nls=function(c,m,h){i[c]||(o("No message found for the key '"+c+"' in the provided messages, trying to find a translation for the default string '"+m+"'."),i[m]||o("No message found for the default string '"+m+"' in the provided messages. Falling back to the default English message."));var v=i[c]||i[m]||m;return h&&(n==="dollarSigns"&&(v=v.replace(/\$(\$|[\d]+)/g,function(k,x){return x=="$"?"$":h[x]})),n==="curlyBrackets"&&(v=v.replace(/\{([^\}]+)\}/g,function(k,x){return h[x]}))),v},s}();l.prototype.warn=o,l.prototype.reportError=g,d.implement(l.prototype,u),t.AppConfig=l});ace.define("ace/theme/textmate-css",["require","exports","module"],function(e,t,r){r.exports=`.ace-tm .ace_gutter {
  background: #f0f0f0;
  color: #333;
}

.ace-tm .ace_print-margin {
  width: 1px;
  background: #e8e8e8;
}

.ace-tm .ace_fold {
    background-color: #6B72E6;
}

.ace-tm {
  background-color: #FFFFFF;
  color: black;
}

.ace-tm .ace_cursor {
  color: black;
}
        
.ace-tm .ace_invisible {
  color: rgb(191, 191, 191);
}

.ace-tm .ace_storage,
.ace-tm .ace_keyword {
  color: blue;
}

.ace-tm .ace_constant {
  color: rgb(197, 6, 11);
}

.ace-tm .ace_constant.ace_buildin {
  color: rgb(88, 72, 246);
}

.ace-tm .ace_constant.ace_language {
  color: rgb(88, 92, 246);
}

.ace-tm .ace_constant.ace_library {
  color: rgb(6, 150, 14);
}

.ace-tm .ace_invalid {
  background-color: rgba(255, 0, 0, 0.1);
  color: red;
}

.ace-tm .ace_support.ace_function {
  color: rgb(60, 76, 114);
}

.ace-tm .ace_support.ace_constant {
  color: rgb(6, 150, 14);
}

.ace-tm .ace_support.ace_type,
.ace-tm .ace_support.ace_class {
  color: rgb(109, 121, 222);
}

.ace-tm .ace_keyword.ace_operator {
  color: rgb(104, 118, 135);
}

.ace-tm .ace_string {
  color: rgb(3, 106, 7);
}

.ace-tm .ace_comment {
  color: rgb(76, 136, 107);
}

.ace-tm .ace_comment.ace_doc {
  color: rgb(0, 102, 255);
}

.ace-tm .ace_comment.ace_doc.ace_tag {
  color: rgb(128, 159, 191);
}

.ace-tm .ace_constant.ace_numeric {
  color: rgb(0, 0, 205);
}

.ace-tm .ace_variable {
  color: rgb(49, 132, 149);
}

.ace-tm .ace_xml-pe {
  color: rgb(104, 104, 91);
}

.ace-tm .ace_entity.ace_name.ace_function {
  color: #0000A2;
}


.ace-tm .ace_heading {
  color: rgb(12, 7, 255);
}

.ace-tm .ace_list {
  color:rgb(185, 6, 144);
}

.ace-tm .ace_meta.ace_tag {
  color:rgb(0, 22, 142);
}

.ace-tm .ace_string.ace_regex {
  color: rgb(255, 0, 0)
}

.ace-tm .ace_marker-layer .ace_selection {
  background: rgb(181, 213, 255);
}
.ace-tm.ace_multiselect .ace_selection.ace_start {
  box-shadow: 0 0 3px 0px white;
}
.ace-tm .ace_marker-layer .ace_step {
  background: rgb(252, 255, 0);
}

.ace-tm .ace_marker-layer .ace_stack {
  background: rgb(164, 229, 101);
}

.ace-tm .ace_marker-layer .ace_bracket {
  margin: -1px 0 0 -1px;
  border: 1px solid rgb(192, 192, 192);
}

.ace-tm .ace_marker-layer .ace_active-line {
  background: rgba(0, 0, 0, 0.07);
}

.ace-tm .ace_gutter-active-line {
    background-color : #dcdcdc;
}

.ace-tm .ace_marker-layer .ace_selected-word {
  background: rgb(250, 250, 255);
  border: 1px solid rgb(200, 200, 250);
}

.ace-tm .ace_indent-guide {
  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;
}

.ace-tm .ace_indent-guide-active {
  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAZSURBVHjaYvj///9/hivKyv8BAAAA//8DACLqBhbvk+/eAAAAAElFTkSuQmCC") right repeat-y;
}
`});ace.define("ace/theme/textmate",["require","exports","module","ace/theme/textmate-css","ace/lib/dom"],function(e,t,r){"use strict";t.isDark=!1,t.cssClass="ace-tm",t.cssText=e("./textmate-css"),t.$id="ace/theme/textmate";var d=e("../lib/dom");d.importCssString(t.cssText,t.cssClass,!1)});ace.define("ace/config",["require","exports","module","ace/lib/lang","ace/lib/net","ace/lib/dom","ace/lib/app_config","ace/theme/textmate"],function(e,t,r){"no use strict";var d=e("./lib/lang"),u=e("./lib/net"),g=e("./lib/dom"),a=e("./lib/app_config").AppConfig;r.exports=t=new a;var p={packaged:!1,workerPath:null,modePath:null,themePath:null,basePath:"",suffix:".js",$moduleUrls:{},loadWorkerFromBlob:!0,sharedPopups:!1,useStrictCSP:null};t.get=function(l){if(!p.hasOwnProperty(l))throw new Error("Unknown config key: "+l);return p[l]},t.set=function(l,s){if(p.hasOwnProperty(l))p[l]=s;else if(this.setDefaultValue("",l,s)==!1)throw new Error("Unknown config key: "+l);l=="useStrictCSP"&&g.useStrictCSP(s)},t.all=function(){return d.copyObject(p)},t.$modes={},t.moduleUrl=function(l,s){if(p.$moduleUrls[l])return p.$moduleUrls[l];var c=l.split("/");s=s||c[c.length-2]||"";var m=s=="snippets"?"/":"-",h=c[c.length-1];if(s=="worker"&&m=="-"){var v=new RegExp("^"+s+"[\\-_]|[\\-_]"+s+"$","g");h=h.replace(v,"")}(!h||h==s)&&c.length>1&&(h=c[c.length-2]);var k=p[s+"Path"];return k==null?k=p.basePath:m=="/"&&(s=m=""),k&&k.slice(-1)!="/"&&(k+="/"),k+s+m+h+this.get("suffix")},t.setModuleUrl=function(l,s){return p.$moduleUrls[l]=s};var o=function(l,s){if(l==="ace/theme/textmate"||l==="./theme/textmate")return s(null,e("./theme/textmate"));if(i)return i(l,s);console.error("loader is not configured")},i;t.setLoader=function(l){i=l},t.dynamicModules=Object.create(null),t.$loading={},t.$loaded={},t.loadModule=function(l,s){var c;if(Array.isArray(l))var m=l[0],h=l[1];else if(typeof l=="string")var h=l;var v=function(k){if(k&&!t.$loading[h])return s&&s(k);if(t.$loading[h]||(t.$loading[h]=[]),t.$loading[h].push(s),!(t.$loading[h].length>1)){var x=function(){o(h,function(A,S){S&&(t.$loaded[h]=S),t._emit("load.module",{name:h,module:S});var f=t.$loading[h];t.$loading[h]=null,f.forEach(function(L){L&&L(S)})})};if(!t.get("packaged"))return x();u.loadScript(t.moduleUrl(h,m),x),n()}};if(t.dynamicModules[h])t.dynamicModules[h]().then(function(k){k.default?v(k.default):v(k)});else{try{c=this.$require(h)}catch{}v(c||t.$loaded[h])}},t.$require=function(l){if(typeof r.require=="function"){var s="require";return r[s](l)}},t.setModuleLoader=function(l,s){t.dynamicModules[l]=s};var n=function(){!p.basePath&&!p.workerPath&&!p.modePath&&!p.themePath&&!Object.keys(p.$moduleUrls).length&&(console.error("Unable to infer path to ace from script src,","use ace.config.set('basePath', 'path') to enable dynamic loading of modes and themes","or with webpack use ace/webpack-resolver"),n=function(){})};t.version="1.35.4"});ace.define("ace/loader_build",["require","exports","module","ace/lib/fixoldbrowsers","ace/config"],function(e,t,r){"use strict";e("./lib/fixoldbrowsers");var d=e("./config");d.setLoader(function(p,o){e([p],function(i){o(null,i)})});var u=function(){return this||typeof window<"u"&&window}();r.exports=function(p){d.init=g,d.$require=e,p.require=e,typeof define=="function"&&(p.define=define)},g(!0);function g(p){if(!(!u||!u.document)){d.set("packaged",p||e.packaged||r.packaged||u.define&&define.packaged);var o={},i="",n=document.currentScript||document._currentScript,l=n&&n.ownerDocument||document;n&&n.src&&(i=n.src.split(/[?#]/)[0].split("/").slice(0,-1).join("/")||"");for(var s=l.getElementsByTagName("script"),c=0;c<s.length;c++){var m=s[c],h=m.src||m.getAttribute("src");if(h){for(var v=m.attributes,k=0,x=v.length;k<x;k++){var A=v[k];A.name.indexOf("data-ace-")===0&&(o[a(A.name.replace(/^data-ace-/,""))]=A.value)}var S=h.match(/^(.*)\/ace([\-.]\w+)?\.js(\?|$)/);S&&(i=S[1])}}i&&(o.base=o.base||i,o.packaged=!0),o.basePath=o.base,o.workerPath=o.workerPath||o.base,o.modePath=o.modePath||o.base,o.themePath=o.themePath||o.base,delete o.base;for(var f in o)typeof o[f]<"u"&&d.set(f,o[f])}}function a(p){return p.replace(/-(.)/g,function(o,i){return i.toUpperCase()})}});ace.define("ace/range",["require","exports","module"],function(e,t,r){"use strict";var d=function(){function u(g,a,p,o){this.start={row:g,column:a},this.end={row:p,column:o}}return u.prototype.isEqual=function(g){return this.start.row===g.start.row&&this.end.row===g.end.row&&this.start.column===g.start.column&&this.end.column===g.end.column},u.prototype.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},u.prototype.contains=function(g,a){return this.compare(g,a)==0},u.prototype.compareRange=function(g){var a,p=g.end,o=g.start;return a=this.compare(p.row,p.column),a==1?(a=this.compare(o.row,o.column),a==1?2:a==0?1:0):a==-1?-2:(a=this.compare(o.row,o.column),a==-1?-1:a==1?42:0)},u.prototype.comparePoint=function(g){return this.compare(g.row,g.column)},u.prototype.containsRange=function(g){return this.comparePoint(g.start)==0&&this.comparePoint(g.end)==0},u.prototype.intersects=function(g){var a=this.compareRange(g);return a==-1||a==0||a==1},u.prototype.isEnd=function(g,a){return this.end.row==g&&this.end.column==a},u.prototype.isStart=function(g,a){return this.start.row==g&&this.start.column==a},u.prototype.setStart=function(g,a){typeof g=="object"?(this.start.column=g.column,this.start.row=g.row):(this.start.row=g,this.start.column=a)},u.prototype.setEnd=function(g,a){typeof g=="object"?(this.end.column=g.column,this.end.row=g.row):(this.end.row=g,this.end.column=a)},u.prototype.inside=function(g,a){return this.compare(g,a)==0?!(this.isEnd(g,a)||this.isStart(g,a)):!1},u.prototype.insideStart=function(g,a){return this.compare(g,a)==0?!this.isEnd(g,a):!1},u.prototype.insideEnd=function(g,a){return this.compare(g,a)==0?!this.isStart(g,a):!1},u.prototype.compare=function(g,a){return!this.isMultiLine()&&g===this.start.row?a<this.start.column?-1:a>this.end.column?1:0:g<this.start.row?-1:g>this.end.row?1:this.start.row===g?a>=this.start.column?0:-1:this.end.row===g?a<=this.end.column?0:1:0},u.prototype.compareStart=function(g,a){return this.start.row==g&&this.start.column==a?-1:this.compare(g,a)},u.prototype.compareEnd=function(g,a){return this.end.row==g&&this.end.column==a?1:this.compare(g,a)},u.prototype.compareInside=function(g,a){return this.end.row==g&&this.end.column==a?1:this.start.row==g&&this.start.column==a?-1:this.compare(g,a)},u.prototype.clipRows=function(g,a){if(this.end.row>a)var p={row:a+1,column:0};else if(this.end.row<g)var p={row:g,column:0};if(this.start.row>a)var o={row:a+1,column:0};else if(this.start.row<g)var o={row:g,column:0};return u.fromPoints(o||this.start,p||this.end)},u.prototype.extend=function(g,a){var p=this.compare(g,a);if(p==0)return this;if(p==-1)var o={row:g,column:a};else var i={row:g,column:a};return u.fromPoints(o||this.start,i||this.end)},u.prototype.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},u.prototype.isMultiLine=function(){return this.start.row!==this.end.row},u.prototype.clone=function(){return u.fromPoints(this.start,this.end)},u.prototype.collapseRows=function(){return this.end.column==0?new u(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new u(this.start.row,0,this.end.row,0)},u.prototype.toScreenRange=function(g){var a=g.documentToScreenPosition(this.start),p=g.documentToScreenPosition(this.end);return new u(a.row,a.column,p.row,p.column)},u.prototype.moveBy=function(g,a){this.start.row+=g,this.start.column+=a,this.end.row+=g,this.end.column+=a},u}();d.fromPoints=function(u,g){return new d(u.row,u.column,g.row,g.column)},d.comparePoints=function(u,g){return u.row-g.row||u.column-g.column},t.Range=d});ace.define("ace/lib/keys",["require","exports","module","ace/lib/oop"],function(e,t,r){"use strict";for(var d=e("./oop"),u={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta",91:"MetaLeft",92:"MetaRight",93:"ContextMenu"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,super:8,meta:8,command:8,cmd:8,control:1},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete","-13":"NumpadEnter",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",59:";",61:"=",107:"+",109:"-",110:".",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",111:"/",106:"*"}},g={Command:224,Backspace:8,Tab:9,Return:13,Enter:13,Pause:19,Escape:27,PageUp:33,PageDown:34,End:35,Home:36,Insert:45,Delete:46,ArrowLeft:37,ArrowUp:38,ArrowRight:39,ArrowDown:40,Backquote:192,Minus:189,Equal:187,BracketLeft:219,Backslash:220,BracketRight:221,Semicolon:186,Quote:222,Comma:188,Period:190,Slash:191,Space:32,NumpadAdd:107,NumpadDecimal:110,NumpadSubtract:109,NumpadDivide:111,NumpadMultiply:106},a=0;a<10;a++)g["Digit"+a]=48+a,g["Numpad"+a]=96+a,u.PRINTABLE_KEYS[48+a]=""+a,u.FUNCTION_KEYS[96+a]="Numpad"+a;for(var a=65;a<91;a++){var p=String.fromCharCode(a+32);g["Key"+p.toUpperCase()]=a,u.PRINTABLE_KEYS[a]=p}for(var a=1;a<13;a++)g["F"+a]=111+a,u.FUNCTION_KEYS[111+a]="F"+a;var o={Shift:16,Control:17,Alt:18,Meta:224};for(var i in o)g[i]=g[i+"Left"]=g[i+"Right"]=o[i];t.$codeToKeyCode=g,u.PRINTABLE_KEYS[173]="-";for(var n in u.FUNCTION_KEYS){var l=u.FUNCTION_KEYS[n].toLowerCase();u[l]=parseInt(n,10)}for(var n in u.PRINTABLE_KEYS){var l=u.PRINTABLE_KEYS[n].toLowerCase();u[l]=parseInt(n,10)}d.mixin(u,u.MODIFIER_KEYS),d.mixin(u,u.PRINTABLE_KEYS),d.mixin(u,u.FUNCTION_KEYS),u.enter=u.return,u.escape=u.esc,u.del=u.delete,function(){for(var s=["cmd","ctrl","alt","shift"],c=Math.pow(2,s.length);c--;)u.KEY_MODS[c]=s.filter(function(m){return c&u.KEY_MODS[m]}).join("-")+"-"}(),u.KEY_MODS[0]="",u.KEY_MODS[-1]="input-",d.mixin(t,u),t.default=t,t.keyCodeToString=function(s){var c=u[s];return typeof c!="string"&&(c=String.fromCharCode(s)),c.toLowerCase()}});ace.define("ace/lib/event",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(e,t,r){"use strict";var d=e("./keys"),u=e("./useragent"),g=null,a=0,p;function o(){p=!1;try{document.createComment("").addEventListener("test",function(){},{get passive(){return p={passive:!1},!0}})}catch{}}function i(){return p==null&&o(),p}function n(k,x,A){this.elem=k,this.type=x,this.callback=A}n.prototype.destroy=function(){s(this.elem,this.type,this.callback),this.elem=this.type=this.callback=void 0};var l=t.addListener=function(k,x,A,S){k.addEventListener(x,A,i()),S&&S.$toDestroy.push(new n(k,x,A))},s=t.removeListener=function(k,x,A){k.removeEventListener(x,A,i())};t.stopEvent=function(k){return t.stopPropagation(k),t.preventDefault(k),!1},t.stopPropagation=function(k){k.stopPropagation&&k.stopPropagation()},t.preventDefault=function(k){k.preventDefault&&k.preventDefault()},t.getButton=function(k){return k.type=="dblclick"?0:k.type=="contextmenu"||u.isMac&&k.ctrlKey&&!k.altKey&&!k.shiftKey?2:k.button},t.capture=function(k,x,A){var S=k&&k.ownerDocument||document;function f(L){x&&x(L),A&&A(L),s(S,"mousemove",x),s(S,"mouseup",f),s(S,"dragstart",f)}return l(S,"mousemove",x),l(S,"mouseup",f),l(S,"dragstart",f),f},t.addMouseWheelListener=function(k,x,A){l(k,"wheel",function(S){var f=.15,L=S.deltaX||0,$=S.deltaY||0;switch(S.deltaMode){case S.DOM_DELTA_PIXEL:S.wheelX=L*f,S.wheelY=$*f;break;case S.DOM_DELTA_LINE:var T=15;S.wheelX=L*T,S.wheelY=$*T;break;case S.DOM_DELTA_PAGE:var C=150;S.wheelX=L*C,S.wheelY=$*C;break}x(S)},A)},t.addMultiMouseDownListener=function(k,x,A,S,f){var L=0,$,T,C,w={2:"dblclick",3:"tripleclick",4:"quadclick"};function y(b){if(t.getButton(b)!==0?L=0:b.detail>1?(L++,L>4&&(L=1)):L=1,u.isIE){var _=Math.abs(b.clientX-$)>5||Math.abs(b.clientY-T)>5;(!C||_)&&(L=1),C&&clearTimeout(C),C=setTimeout(function(){C=null},x[L-1]||600),L==1&&($=b.clientX,T=b.clientY)}if(b._clicks=L,A[S]("mousedown",b),L>4)L=0;else if(L>1)return A[S](w[L],b)}Array.isArray(k)||(k=[k]),k.forEach(function(b){l(b,"mousedown",y,f)})};function c(k){return 0|(k.ctrlKey?1:0)|(k.altKey?2:0)|(k.shiftKey?4:0)|(k.metaKey?8:0)}t.getModifierString=function(k){return d.KEY_MODS[c(k)]};function m(k,x,A){var S=c(x);if(!A&&x.code&&(A=d.$codeToKeyCode[x.code]||A),!u.isMac&&g){if(x.getModifierState&&(x.getModifierState("OS")||x.getModifierState("Win"))&&(S|=8),g.altGr)if((3&S)!=3)g.altGr=0;else return;if(A===18||A===17){var f=x.location;if(A===17&&f===1)g[A]==1&&(a=x.timeStamp);else if(A===18&&S===3&&f===2){var L=x.timeStamp-a;L<50&&(g.altGr=!0)}}}if(A in d.MODIFIER_KEYS&&(A=-1),!(!S&&A===13&&x.location===3&&(k(x,S,-A),x.defaultPrevented))){if(u.isChromeOS&&S&8){if(k(x,S,A),x.defaultPrevented)return;S&=-9}return!S&&!(A in d.FUNCTION_KEYS)&&!(A in d.PRINTABLE_KEYS)?!1:k(x,S,A)}}t.addCommandKeyListener=function(k,x,A){var S=null;l(k,"keydown",function(f){g[f.keyCode]=(g[f.keyCode]||0)+1;var L=m(x,f,f.keyCode);return S=f.defaultPrevented,L},A),l(k,"keypress",function(f){S&&(f.ctrlKey||f.altKey||f.shiftKey||f.metaKey)&&(t.stopEvent(f),S=null)},A),l(k,"keyup",function(f){g[f.keyCode]=null},A),g||(h(),l(window,"focus",h))};function h(){g=Object.create(null)}if(typeof window=="object"&&window.postMessage&&!u.isOldIE){var v=1;t.nextTick=function(k,x){x=x||window;var A="zero-timeout-message-"+v++,S=function(f){f.data==A&&(t.stopPropagation(f),s(x,"message",S),k())};l(x,"message",S),x.postMessage(A,"*")}}t.$idleBlocked=!1,t.onIdle=function(k,x){return setTimeout(function A(){t.$idleBlocked?setTimeout(A,100):k()},x)},t.$idleBlockId=null,t.blockIdle=function(k){t.$idleBlockId&&clearTimeout(t.$idleBlockId),t.$idleBlocked=!0,t.$idleBlockId=setTimeout(function(){t.$idleBlocked=!1},k||100)},t.nextFrame=typeof window=="object"&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame),t.nextFrame?t.nextFrame=t.nextFrame.bind(window):t.nextFrame=function(k){setTimeout(k,17)}});ace.define("ace/clipboard",["require","exports","module"],function(e,t,r){"use strict";var d;r.exports={lineMode:!1,pasteCancelled:function(){return d&&d>Date.now()-50?!0:d=!1},cancel:function(){d=Date.now()}}});ace.define("ace/keyboard/textinput",["require","exports","module","ace/lib/event","ace/config","ace/lib/useragent","ace/lib/dom","ace/lib/lang","ace/clipboard","ace/lib/keys"],function(e,t,r){"use strict";var d=e("../lib/event"),u=e("../config").nls,g=e("../lib/useragent"),a=e("../lib/dom"),p=e("../lib/lang"),o=e("../clipboard"),i=g.isChrome<18,n=g.isIE,l=g.isChrome>63,s=400,c=e("../lib/keys"),m=c.KEY_MODS,h=g.isIOS,v=h?/\s/:/\n/,k=g.isMobile,x;x=function(A,S){var f=a.createElement("textarea");f.className="ace_text-input",f.setAttribute("wrap","off"),f.setAttribute("autocorrect","off"),f.setAttribute("autocapitalize","off"),f.setAttribute("spellcheck","false"),f.style.opacity="0",A.insertBefore(f,A.firstChild);var L=!1,$=!1,T=!1,C=!1,w="";k||(f.style.fontSize="1px");var y=!1,b=!1,_="",E=0,R=0,M=0,I=Number.MAX_SAFE_INTEGER,P=Number.MIN_SAFE_INTEGER,O=0;try{var N=document.activeElement===f}catch{}this.setNumberOfExtraLines=function(U){if(I=Number.MAX_SAFE_INTEGER,P=Number.MIN_SAFE_INTEGER,U<0){O=0;return}O=U},this.setAriaOptions=function(U){if(U.activeDescendant?(f.setAttribute("aria-haspopup","true"),f.setAttribute("aria-autocomplete",U.inline?"both":"list"),f.setAttribute("aria-activedescendant",U.activeDescendant)):(f.setAttribute("aria-haspopup","false"),f.setAttribute("aria-autocomplete","both"),f.removeAttribute("aria-activedescendant")),U.role&&f.setAttribute("role",U.role),U.setLabel){f.setAttribute("aria-roledescription",u("text-input.aria-roledescription","editor"));var G="";if(S.$textInputAriaLabel&&(G+="".concat(S.$textInputAriaLabel,", ")),S.session){var rt=S.session.selection.cursor.row;G+=u("text-input.aria-label","Cursor at row $0",[rt+1])}f.setAttribute("aria-label",G)}},this.setAriaOptions({role:"textbox"}),d.addListener(f,"blur",function(U){b||(S.onBlur(U),N=!1)},S),d.addListener(f,"focus",function(U){if(!b){if(N=!0,g.isEdge)try{if(!document.hasFocus())return}catch{}S.onFocus(U),g.isEdge?setTimeout(F):F()}},S),this.$focusScroll=!1,this.focus=function(){if(this.setAriaOptions({setLabel:S.renderer.enableKeyboardAccessibility}),w||l||this.$focusScroll=="browser")return f.focus({preventScroll:!0});var U=f.style.top;f.style.position="fixed",f.style.top="0px";try{var G=f.getBoundingClientRect().top!=0}catch{return}var rt=[];if(G)for(var ft=f.parentElement;ft&&ft.nodeType==1;)rt.push(ft),ft.setAttribute("ace_nocontext","true"),!ft.parentElement&&ft.getRootNode?ft=ft.getRootNode().host:ft=ft.parentElement;f.focus({preventScroll:!0}),G&&rt.forEach(function(kt){kt.removeAttribute("ace_nocontext")}),setTimeout(function(){f.style.position="",f.style.top=="0px"&&(f.style.top=U)},0)},this.blur=function(){f.blur()},this.isFocused=function(){return N},S.on("beforeEndOperation",function(){var U=S.curOp,G=U&&U.command&&U.command.name;if(G!="insertstring"){var rt=G&&(U.docChanged||U.selectionChanged);T&&rt&&(_=f.value="",at()),F()}});var D=function(U,G){for(var rt=G,ft=1;ft<=U-I&&ft<2*O+1;ft++)rt+=S.session.getLine(U-ft).length+1;return rt},F=h?function(U){if(!(!N||L&&!U||C)){U||(U="");var G=`
 ab`+U+`cde fg
`;G!=f.value&&(f.value=_=G);var rt=4,ft=4+(U.length||(S.selection.isEmpty()?0:1));(E!=rt||R!=ft)&&f.setSelectionRange(rt,ft),E=rt,R=ft}}:function(){if(!(T||C)&&!(!N&&!Z)){T=!0;var U=0,G=0,rt="";if(S.session){var ft=S.selection,kt=ft.getRange(),Rt=ft.cursor.row;Rt===P+1?(I=P+1,P=I+2*O):Rt===I-1?(P=I-1,I=P-2*O):(Rt<I-1||Rt>P+1)&&(I=Rt>O?Rt-O:0,P=Rt>O?Rt+O:2*O);for(var Mt=[],Ot=I;Ot<=P;Ot++)Mt.push(S.session.getLine(Ot));if(rt=Mt.join(`
`),U=D(kt.start.row,kt.start.column),G=D(kt.end.row,kt.end.column),kt.start.row<I){var Pt=S.session.getLine(I-1);U=kt.start.row<I-1?0:U,G+=Pt.length+1,rt=Pt+`
`+rt}else if(kt.end.row>P){var Lt=S.session.getLine(P+1);G=kt.end.row>P+1?Lt.length:kt.end.column,G+=rt.length+1,rt=rt+`
`+Lt}else k&&Rt>0&&(rt=`
`+rt,G+=1,U+=1);rt.length>s&&(U<s&&G<s?rt=rt.slice(0,s):(rt=`
`,U==G?U=G=0:(U=0,G=1)));var Yt=rt+`

`;Yt!=_&&(f.value=_=Yt,E=R=Yt.length)}if(Z&&(E=f.selectionStart,R=f.selectionEnd),R!=G||E!=U||f.selectionEnd!=R)try{f.setSelectionRange(U,G),E=U,R=G}catch{}T=!1}};this.resetSelection=F,N&&S.onFocus();var z=function(U){return U.selectionStart===0&&U.selectionEnd>=_.length&&U.value===_&&_&&U.selectionEnd!==R},W=function(U){T||(L?L=!1:z(f)?(S.selectAll(),F()):k&&f.selectionStart!=E&&F())},j=null;this.setInputHandler=function(U){j=U},this.getInputHandler=function(){return j};var Z=!1,Y=function(U,G){if(Z&&(Z=!1),$)return F(),U&&S.onPaste(U),$=!1,"";for(var rt=f.selectionStart,ft=f.selectionEnd,kt=E,Rt=_.length-R,Mt=U,Ot=U.length-rt,Pt=U.length-ft,Lt=0;kt>0&&_[Lt]==U[Lt];)Lt++,kt--;for(Mt=Mt.slice(Lt),Lt=1;Rt>0&&_.length-Lt>E-1&&_[_.length-Lt]==U[U.length-Lt];)Lt++,Rt--;Ot-=Lt-1,Pt-=Lt-1;var Yt=Mt.length-Lt+1;if(Yt<0&&(kt=-Yt,Yt=0),Mt=Mt.slice(0,Yt),!G&&!Mt&&!Ot&&!kt&&!Rt&&!Pt)return"";C=!0;var er=!1;return g.isAndroid&&Mt==". "&&(Mt="  ",er=!0),Mt&&!kt&&!Rt&&!Ot&&!Pt||y?S.onTextInput(Mt):S.onTextInput(Mt,{extendLeft:kt,extendRight:Rt,restoreStart:Ot,restoreEnd:Pt}),C=!1,_=U,E=rt,R=ft,M=Pt,er?`
`:Mt},q=function(U){if(T)return J();if(U&&U.inputType){if(U.inputType=="historyUndo")return S.execCommand("undo");if(U.inputType=="historyRedo")return S.execCommand("redo")}var G=f.value,rt=Y(G,!0);(G.length>s+100||v.test(rt)||k&&E<1&&E==R)&&F()},nt=function(U,G,rt){var ft=U.clipboardData||window.clipboardData;if(!(!ft||i)){var kt=n||rt?"Text":"text/plain";try{return G?ft.setData(kt,G)!==!1:ft.getData(kt)}catch(Rt){if(!rt)return nt(Rt,G,!0)}}},ot=function(U,G){var rt=S.getCopyText();if(!rt)return d.preventDefault(U);nt(U,rt)?(h&&(F(rt),L=rt,setTimeout(function(){L=!1},10)),G?S.onCut():S.onCopy(),d.preventDefault(U)):(L=!0,f.value=rt,f.select(),setTimeout(function(){L=!1,F(),G?S.onCut():S.onCopy()}))},wt=function(U){ot(U,!0)},Et=function(U){ot(U,!1)},vt=function(U){var G=nt(U);o.pasteCancelled()||(typeof G=="string"?(G&&S.onPaste(G,U),g.isIE&&setTimeout(F),d.preventDefault(U)):(f.value="",$=!0))};d.addCommandKeyListener(f,function(U,G,rt){if(!T)return S.onCommandKey(U,G,rt)},S),d.addListener(f,"select",W,S),d.addListener(f,"input",q,S),d.addListener(f,"cut",wt,S),d.addListener(f,"copy",Et,S),d.addListener(f,"paste",vt,S),(!("oncut"in f)||!("oncopy"in f)||!("onpaste"in f))&&d.addListener(A,"keydown",function(U){if(!(g.isMac&&!U.metaKey||!U.ctrlKey))switch(U.keyCode){case 67:Et(U);break;case 86:vt(U);break;case 88:wt(U);break}},S);var H=function(U){if(!(T||!S.onCompositionStart||S.$readOnly)&&(T={},!y)){U.data&&(T.useTextareaForIME=!1),setTimeout(J,0),S._signal("compositionStart"),S.on("mousedown",tt);var G=S.getSelectionRange();G.end.row=G.start.row,G.end.column=G.start.column,T.markerRange=G,T.selectionStart=E,S.onCompositionStart(T),T.useTextareaForIME?(_=f.value="",E=0,R=0):(f.msGetInputContext&&(T.context=f.msGetInputContext()),f.getInputContext&&(T.context=f.getInputContext()))}},J=function(){if(!(!T||!S.onCompositionUpdate||S.$readOnly)){if(y)return tt();if(T.useTextareaForIME)S.onCompositionUpdate(f.value);else{var U=f.value;Y(U),T.markerRange&&(T.context&&(T.markerRange.start.column=T.selectionStart=T.context.compositionStartOffset),T.markerRange.end.column=T.markerRange.start.column+R-T.selectionStart+M)}}},at=function(U){!S.onCompositionEnd||S.$readOnly||(T=!1,S.onCompositionEnd(),S.off("mousedown",tt),U&&q())};function tt(){b=!0,f.blur(),f.focus(),b=!1}var ct=p.delayedCall(J,50).schedule.bind(null,null);function K(U){U.keyCode==27&&f.value.length<f.selectionStart&&(T||(_=f.value),E=R=-1,F()),ct()}d.addListener(f,"compositionstart",H,S),d.addListener(f,"compositionupdate",J,S),d.addListener(f,"keyup",K,S),d.addListener(f,"keydown",ct,S),d.addListener(f,"compositionend",at,S),this.getElement=function(){return f},this.setCommandMode=function(U){y=U,f.readOnly=!1},this.setReadOnly=function(U){y||(f.readOnly=U)},this.setCopyWithEmptySelection=function(U){},this.onContextMenu=function(U){Z=!0,F(),S._emit("nativecontextmenu",{target:S,domEvent:U}),this.moveToMouse(U,!0)},this.moveToMouse=function(U,G){w||(w=f.style.cssText),f.style.cssText=(G?"z-index:100000;":"")+(g.isIE?"opacity:0.1;":"")+"text-indent: -"+(E+R)*S.renderer.characterWidth*.5+"px;";var rt=S.container.getBoundingClientRect(),ft=a.computedStyle(S.container),kt=rt.top+(parseInt(ft.borderTopWidth)||0),Rt=rt.left+(parseInt(rt.borderLeftWidth)||0),Mt=rt.bottom-kt-f.clientHeight-2,Ot=function(Pt){a.translate(f,Pt.clientX-Rt-2,Math.min(Pt.clientY-kt-2,Mt))};Ot(U),U.type=="mousedown"&&(S.renderer.$isMousePressed=!0,clearTimeout(V),g.isWin&&d.capture(S.container,Ot,st))},this.onContextMenuClose=st;var V;function st(){clearTimeout(V),V=setTimeout(function(){w&&(f.style.cssText=w,w=""),S.renderer.$isMousePressed=!1,S.renderer.$keepTextAreaAtCursor&&S.renderer.$moveTextAreaToCursor()},0)}var it=function(U){S.textInput.onContextMenu(U),st()};d.addListener(f,"mouseup",it,S),d.addListener(f,"mousedown",function(U){U.preventDefault(),st()},S),d.addListener(S.renderer.scroller,"contextmenu",it,S),d.addListener(f,"contextmenu",it,S),h&&bt(A,S,f);function bt(U,G,rt){var ft=null,kt=!1;rt.addEventListener("keydown",function(Mt){ft&&clearTimeout(ft),kt=!0},!0),rt.addEventListener("keyup",function(Mt){ft=setTimeout(function(){kt=!1},100)},!0);var Rt=function(Mt){if(document.activeElement===rt&&!(kt||T||G.$mouseHandler.isMousePressed)&&!L){var Ot=rt.selectionStart,Pt=rt.selectionEnd,Lt=null,Yt=0;if(Ot==0?Lt=c.up:Ot==1?Lt=c.home:Pt>R&&_[Pt]==`
`?Lt=c.end:Ot<E&&_[Ot-1]==" "?(Lt=c.left,Yt=m.option):Ot<E||Ot==E&&R!=E&&Ot==Pt?Lt=c.left:Pt>R&&_.slice(0,Pt).split(`
`).length>2?Lt=c.down:Pt>R&&_[Pt-1]==" "?(Lt=c.right,Yt=m.option):(Pt>R||Pt==R&&R!=E&&Ot==Pt)&&(Lt=c.right),Ot!==Pt&&(Yt|=m.shift),Lt){var er=G.onCommandKey({},Yt,Lt);if(!er&&G.commands){Lt=c.keyCodeToString(Lt);var ge=G.commands.findKeyCommand(Yt,Lt);ge&&G.execCommand(ge)}E=Ot,R=Pt,F("")}}};document.addEventListener("selectionchange",Rt),G.on("destroy",function(){document.removeEventListener("selectionchange",Rt)})}this.destroy=function(){f.parentElement&&f.parentElement.removeChild(f)}},t.TextInput=x,t.$setUserAgentForTests=function(A,S){k=A,h=S}});ace.define("ace/mouse/default_handlers",["require","exports","module","ace/lib/useragent"],function(e,t,r){"use strict";var d=e("../lib/useragent"),u=0,g=550,a=function(){function i(n){n.$clickSelection=null;var l=n.editor;l.setDefaultHandler("mousedown",this.onMouseDown.bind(n)),l.setDefaultHandler("dblclick",this.onDoubleClick.bind(n)),l.setDefaultHandler("tripleclick",this.onTripleClick.bind(n)),l.setDefaultHandler("quadclick",this.onQuadClick.bind(n)),l.setDefaultHandler("mousewheel",this.onMouseWheel.bind(n));var s=["select","startSelect","selectEnd","selectAllEnd","selectByWordsEnd","selectByLinesEnd","dragWait","dragWaitEnd","focusWait"];s.forEach(function(c){n[c]=this[c]},this),n.selectByLines=this.extendSelectionBy.bind(n,"getLineRange"),n.selectByWords=this.extendSelectionBy.bind(n,"getWordRange")}return i.prototype.onMouseDown=function(n){var l=n.inSelection(),s=n.getDocumentPosition();this.mousedownEvent=n;var c=this.editor,m=n.getButton();if(m!==0){var h=c.getSelectionRange(),v=h.isEmpty();(v||m==1)&&c.selection.moveToPosition(s),m==2&&(c.textInput.onContextMenu(n.domEvent),d.isMozilla||n.preventDefault());return}if(this.mousedownEvent.time=Date.now(),l&&!c.isFocused()&&(c.focus(),this.$focusTimeout&&!this.$clickSelection&&!c.inMultiSelectMode)){this.setState("focusWait"),this.captureMouse(n);return}return this.captureMouse(n),this.startSelect(s,n.domEvent._clicks>1),n.preventDefault()},i.prototype.startSelect=function(n,l){n=n||this.editor.renderer.screenToTextCoordinates(this.x,this.y);var s=this.editor;this.mousedownEvent&&(this.mousedownEvent.getShiftKey()?s.selection.selectToPosition(n):l||s.selection.moveToPosition(n),l||this.select(),s.setStyle("ace_selecting"),this.setState("select"))},i.prototype.select=function(){var n,l=this.editor,s=l.renderer.screenToTextCoordinates(this.x,this.y);if(this.$clickSelection){var c=this.$clickSelection.comparePoint(s);if(c==-1)n=this.$clickSelection.end;else if(c==1)n=this.$clickSelection.start;else{var m=o(this.$clickSelection,s);s=m.cursor,n=m.anchor}l.selection.setSelectionAnchor(n.row,n.column)}l.selection.selectToPosition(s),l.renderer.scrollCursorIntoView()},i.prototype.extendSelectionBy=function(n){var l,s=this.editor,c=s.renderer.screenToTextCoordinates(this.x,this.y),m=s.selection[n](c.row,c.column);if(this.$clickSelection){var h=this.$clickSelection.comparePoint(m.start),v=this.$clickSelection.comparePoint(m.end);if(h==-1&&v<=0)l=this.$clickSelection.end,(m.end.row!=c.row||m.end.column!=c.column)&&(c=m.start);else if(v==1&&h>=0)l=this.$clickSelection.start,(m.start.row!=c.row||m.start.column!=c.column)&&(c=m.end);else if(h==-1&&v==1)c=m.end,l=m.start;else{var k=o(this.$clickSelection,c);c=k.cursor,l=k.anchor}s.selection.setSelectionAnchor(l.row,l.column)}s.selection.selectToPosition(c),s.renderer.scrollCursorIntoView()},i.prototype.selectByLinesEnd=function(){this.$clickSelection=null,this.editor.unsetStyle("ace_selecting")},i.prototype.focusWait=function(){var n=p(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y),l=Date.now();(n>u||l-this.mousedownEvent.time>this.$focusTimeout)&&this.startSelect(this.mousedownEvent.getDocumentPosition())},i.prototype.onDoubleClick=function(n){var l=n.getDocumentPosition(),s=this.editor,c=s.session,m=c.getBracketRange(l);m?(m.isEmpty()&&(m.start.column--,m.end.column++),this.setState("select")):(m=s.selection.getWordRange(l.row,l.column),this.setState("selectByWords")),this.$clickSelection=m,this.select()},i.prototype.onTripleClick=function(n){var l=n.getDocumentPosition(),s=this.editor;this.setState("selectByLines");var c=s.getSelectionRange();c.isMultiLine()&&c.contains(l.row,l.column)?(this.$clickSelection=s.selection.getLineRange(c.start.row),this.$clickSelection.end=s.selection.getLineRange(c.end.row).end):this.$clickSelection=s.selection.getLineRange(l.row),this.select()},i.prototype.onQuadClick=function(n){var l=this.editor;l.selectAll(),this.$clickSelection=l.getSelectionRange(),this.setState("selectAll")},i.prototype.onMouseWheel=function(n){if(!n.getAccelKey()){n.getShiftKey()&&n.wheelY&&!n.wheelX&&(n.wheelX=n.wheelY,n.wheelY=0);var l=this.editor;this.$lastScroll||(this.$lastScroll={t:0,vx:0,vy:0,allowed:0});var s=this.$lastScroll,c=n.domEvent.timeStamp,m=c-s.t,h=m?n.wheelX/m:s.vx,v=m?n.wheelY/m:s.vy;m<g&&(h=(h+s.vx)/2,v=(v+s.vy)/2);var k=Math.abs(h/v),x=!1;if(k>=1&&l.renderer.isScrollableBy(n.wheelX*n.speed,0)&&(x=!0),k<=1&&l.renderer.isScrollableBy(0,n.wheelY*n.speed)&&(x=!0),x)s.allowed=c;else if(c-s.allowed<g){var A=Math.abs(h)<=1.5*Math.abs(s.vx)&&Math.abs(v)<=1.5*Math.abs(s.vy);A?(x=!0,s.allowed=c):s.allowed=0}if(s.t=c,s.vx=h,s.vy=v,x)return l.renderer.scrollBy(n.wheelX*n.speed,n.wheelY*n.speed),n.stop()}},i}();a.prototype.selectEnd=a.prototype.selectByLinesEnd,a.prototype.selectAllEnd=a.prototype.selectByLinesEnd,a.prototype.selectByWordsEnd=a.prototype.selectByLinesEnd,t.DefaultHandlers=a;function p(i,n,l,s){return Math.sqrt(Math.pow(l-i,2)+Math.pow(s-n,2))}function o(i,n){if(i.start.row==i.end.row)var l=2*n.column-i.start.column-i.end.column;else if(i.start.row==i.end.row-1&&!i.start.column&&!i.end.column)var l=n.column-4;else var l=2*n.row-i.start.row-i.end.row;return l<0?{cursor:i.start,anchor:i.end}:{cursor:i.end,anchor:i.start}}});ace.define("ace/lib/scroll",["require","exports","module"],function(e,t,r){t.preventParentScroll=function(u){u.stopPropagation();var g=u.currentTarget,a=g.scrollHeight>g.clientHeight;a||u.preventDefault()}});ace.define("ace/tooltip",["require","exports","module","ace/lib/dom","ace/lib/event","ace/range","ace/lib/scroll"],function(e,t,r){"use strict";var d=this&&this.__extends||function(){var m=function(h,v){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,x){k.__proto__=x}||function(k,x){for(var A in x)Object.prototype.hasOwnProperty.call(x,A)&&(k[A]=x[A])},m(h,v)};return function(h,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");m(h,v);function k(){this.constructor=h}h.prototype=v===null?Object.create(v):(k.prototype=v.prototype,new k)}}(),u=this&&this.__values||function(m){var h=typeof Symbol=="function"&&Symbol.iterator,v=h&&m[h],k=0;if(v)return v.call(m);if(m&&typeof m.length=="number")return{next:function(){return m&&k>=m.length&&(m=void 0),{value:m&&m[k++],done:!m}}};throw new TypeError(h?"Object is not iterable.":"Symbol.iterator is not defined.")},g=e("./lib/dom"),a=e("./lib/event"),p=e("./range").Range,o=e("./lib/scroll").preventParentScroll,i="ace_tooltip",n=function(){function m(h){this.isOpen=!1,this.$element=null,this.$parentNode=h}return m.prototype.$init=function(){return this.$element=g.createElement("div"),this.$element.className=i,this.$element.style.display="none",this.$parentNode.appendChild(this.$element),this.$element},m.prototype.getElement=function(){return this.$element||this.$init()},m.prototype.setText=function(h){this.getElement().textContent=h},m.prototype.setHtml=function(h){this.getElement().innerHTML=h},m.prototype.setPosition=function(h,v){this.getElement().style.left=h+"px",this.getElement().style.top=v+"px"},m.prototype.setClassName=function(h){g.addCssClass(this.getElement(),h)},m.prototype.setTheme=function(h){this.$element.className=i+" "+(h.isDark?"ace_dark ":"")+(h.cssClass||"")},m.prototype.show=function(h,v,k){h!=null&&this.setText(h),v!=null&&k!=null&&this.setPosition(v,k),this.isOpen||(this.getElement().style.display="block",this.isOpen=!0)},m.prototype.hide=function(h){this.isOpen&&(this.getElement().style.display="none",this.getElement().className=i,this.isOpen=!1)},m.prototype.getHeight=function(){return this.getElement().offsetHeight},m.prototype.getWidth=function(){return this.getElement().offsetWidth},m.prototype.destroy=function(){this.isOpen=!1,this.$element&&this.$element.parentNode&&this.$element.parentNode.removeChild(this.$element)},m}(),l=function(){function m(){this.popups=[]}return m.prototype.addPopup=function(h){this.popups.push(h),this.updatePopups()},m.prototype.removePopup=function(h){var v=this.popups.indexOf(h);v!==-1&&(this.popups.splice(v,1),this.updatePopups())},m.prototype.updatePopups=function(){var h,v,k,x;this.popups.sort(function(y,b){return b.priority-y.priority});var A=[];try{for(var S=u(this.popups),f=S.next();!f.done;f=S.next()){var L=f.value,$=!0;try{for(var T=(k=void 0,u(A)),C=T.next();!C.done;C=T.next()){var w=C.value;if(this.doPopupsOverlap(w,L)){$=!1;break}}}catch(y){k={error:y}}finally{try{C&&!C.done&&(x=T.return)&&x.call(T)}finally{if(k)throw k.error}}$?A.push(L):L.hide()}}catch(y){h={error:y}}finally{try{f&&!f.done&&(v=S.return)&&v.call(S)}finally{if(h)throw h.error}}},m.prototype.doPopupsOverlap=function(h,v){var k=h.getElement().getBoundingClientRect(),x=v.getElement().getBoundingClientRect();return k.left<x.right&&k.right>x.left&&k.top<x.bottom&&k.bottom>x.top},m}(),s=new l;t.popupManager=s,t.Tooltip=n;var c=function(m){d(h,m);function h(v){v===void 0&&(v=document.body);var k=m.call(this,v)||this;k.timeout=void 0,k.lastT=0,k.idleTime=350,k.lastEvent=void 0,k.onMouseOut=k.onMouseOut.bind(k),k.onMouseMove=k.onMouseMove.bind(k),k.waitForHover=k.waitForHover.bind(k),k.hide=k.hide.bind(k);var x=k.getElement();return x.style.whiteSpace="pre-wrap",x.style.pointerEvents="auto",x.addEventListener("mouseout",k.onMouseOut),x.tabIndex=-1,x.addEventListener("blur",function(){x.contains(document.activeElement)||this.hide()}.bind(k)),x.addEventListener("wheel",o),k}return h.prototype.addToEditor=function(v){v.on("mousemove",this.onMouseMove),v.on("mousedown",this.hide),v.renderer.getMouseEventTarget().addEventListener("mouseout",this.onMouseOut,!0)},h.prototype.removeFromEditor=function(v){v.off("mousemove",this.onMouseMove),v.off("mousedown",this.hide),v.renderer.getMouseEventTarget().removeEventListener("mouseout",this.onMouseOut,!0),this.timeout&&(clearTimeout(this.timeout),this.timeout=null)},h.prototype.onMouseMove=function(v,k){this.lastEvent=v,this.lastT=Date.now();var x=k.$mouseHandler.isMousePressed;if(this.isOpen){var A=this.lastEvent&&this.lastEvent.getDocumentPosition();(!this.range||!this.range.contains(A.row,A.column)||x||this.isOutsideOfText(this.lastEvent))&&this.hide()}this.timeout||x||(this.lastEvent=v,this.timeout=setTimeout(this.waitForHover,this.idleTime))},h.prototype.waitForHover=function(){this.timeout&&clearTimeout(this.timeout);var v=Date.now()-this.lastT;if(this.idleTime-v>10){this.timeout=setTimeout(this.waitForHover,this.idleTime-v);return}this.timeout=null,this.lastEvent&&!this.isOutsideOfText(this.lastEvent)&&this.$gatherData(this.lastEvent,this.lastEvent.editor)},h.prototype.isOutsideOfText=function(v){var k=v.editor,x=v.getDocumentPosition(),A=k.session.getLine(x.row);if(x.column==A.length){var S=k.renderer.pixelToScreenCoordinates(v.clientX,v.clientY),f=k.session.documentToScreenPosition(x.row,x.column);if(f.column!=S.column||f.row!=S.row)return!0}return!1},h.prototype.setDataProvider=function(v){this.$gatherData=v},h.prototype.showForRange=function(v,k,x,A){var S=10;if(!(A&&A!=this.lastEvent)&&!(this.isOpen&&document.activeElement==this.getElement())){var f=v.renderer;this.isOpen||(s.addPopup(this),this.$registerCloseEvents(),this.setTheme(f.theme)),this.isOpen=!0,this.addMarker(k,v.session),this.range=p.fromPoints(k.start,k.end);var L=f.textToScreenCoordinates(k.start.row,k.start.column),$=f.scroller.getBoundingClientRect();L.pageX<$.left&&(L.pageX=$.left);var T=this.getElement();T.innerHTML="",T.appendChild(x),T.style.maxHeight="",T.style.display="block";var C=T.clientHeight,w=T.clientWidth,y=window.innerHeight-L.pageY-f.lineHeight,b=!0;L.pageY-C<0&&L.pageY<y&&(b=!1),T.style.maxHeight=(b?L.pageY:y)-S+"px",T.style.top=b?"":L.pageY+f.lineHeight+"px",T.style.bottom=b?window.innerHeight-L.pageY+"px":"",T.style.left=Math.min(L.pageX,window.innerWidth-w-S)+"px"}},h.prototype.addMarker=function(v,k){this.marker&&this.$markerSession.removeMarker(this.marker),this.$markerSession=k,this.marker=k&&k.addMarker(v,"ace_highlight-marker","text")},h.prototype.hide=function(v){!v&&document.activeElement==this.getElement()||v&&v.target&&(v.type!="keydown"||v.ctrlKey||v.metaKey)&&this.$element.contains(v.target)||(this.lastEvent=null,this.timeout&&clearTimeout(this.timeout),this.timeout=null,this.addMarker(null),this.isOpen&&(this.$removeCloseEvents(),this.getElement().style.display="none",this.isOpen=!1,s.removePopup(this)))},h.prototype.$registerCloseEvents=function(){window.addEventListener("keydown",this.hide,!0),window.addEventListener("wheel",this.hide,!0),window.addEventListener("mousedown",this.hide,!0)},h.prototype.$removeCloseEvents=function(){window.removeEventListener("keydown",this.hide,!0),window.removeEventListener("wheel",this.hide,!0),window.removeEventListener("mousedown",this.hide,!0)},h.prototype.onMouseOut=function(v){this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.lastEvent=null,this.isOpen&&(!v.relatedTarget||this.getElement().contains(v.relatedTarget)||v&&v.currentTarget.contains(v.relatedTarget)||v.relatedTarget.classList.contains("ace_content")||this.hide())},h}(n);t.HoverTooltip=c});ace.define("ace/mouse/default_gutter_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/tooltip","ace/config","ace/lib/lang"],function(e,t,r){"use strict";var d=this&&this.__extends||function(){var s=function(c,m){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,v){h.__proto__=v}||function(h,v){for(var k in v)Object.prototype.hasOwnProperty.call(v,k)&&(h[k]=v[k])},s(c,m)};return function(c,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");s(c,m);function h(){this.constructor=c}c.prototype=m===null?Object.create(m):(h.prototype=m.prototype,new h)}}(),u=this&&this.__values||function(s){var c=typeof Symbol=="function"&&Symbol.iterator,m=c&&s[c],h=0;if(m)return m.call(s);if(s&&typeof s.length=="number")return{next:function(){return s&&h>=s.length&&(s=void 0),{value:s&&s[h++],done:!s}}};throw new TypeError(c?"Object is not iterable.":"Symbol.iterator is not defined.")},g=e("../lib/dom"),a=e("../lib/event"),p=e("../tooltip").Tooltip,o=e("../config").nls,i=e("../lib/lang");function n(s){var c=s.editor,m=c.renderer.$gutterLayer,h=new l(c);s.editor.setDefaultHandler("guttermousedown",function(f){if(!(!c.isFocused()||f.getButton()!=0)){var L=m.getRegion(f);if(L!="foldWidgets"){var $=f.getDocumentPosition().row,T=c.session.selection;if(f.getShiftKey())T.selectTo($,0);else{if(f.domEvent.detail==2)return c.selectAll(),f.preventDefault();s.$clickSelection=c.selection.getLineRange($)}return s.setState("selectByLines"),s.captureMouse(f),f.preventDefault()}}});var v,k;function x(){var f=k.getDocumentPosition().row,L=c.session.getLength();if(f==L){var $=c.renderer.pixelToScreenCoordinates(0,k.y).row,T=k.$pos;if($>c.session.documentToScreenRow(T.row,T.column))return A()}if(h.showTooltip(f),!!h.isOpen)if(c.on("mousewheel",A),s.$tooltipFollowsMouse)S(k);else{var C=k.getGutterRow(),w=m.$lines.get(C);if(w){var y=w.element.querySelector(".ace_gutter_annotation"),b=y.getBoundingClientRect(),_=h.getElement().style;_.left=b.right+"px",_.top=b.bottom+"px"}else S(k)}}function A(){v&&(v=clearTimeout(v)),h.isOpen&&(h.hideTooltip(),c.off("mousewheel",A))}function S(f){h.setPosition(f.x,f.y)}s.editor.setDefaultHandler("guttermousemove",function(f){var L=f.domEvent.target||f.domEvent.srcElement;if(g.hasCssClass(L,"ace_fold-widget"))return A();h.isOpen&&s.$tooltipFollowsMouse&&S(f),k=f,!v&&(v=setTimeout(function(){v=null,k&&!s.isMousePressed?x():A()},50))}),a.addListener(c.renderer.$gutter,"mouseout",function(f){k=null,!(!h.isOpen||v)&&(v=setTimeout(function(){v=null,A()},50))},c),c.on("changeSession",A),c.on("input",A)}t.GutterHandler=n;var l=function(s){d(c,s);function c(m){var h=s.call(this,m.container)||this;return h.editor=m,h}return c.prototype.setPosition=function(m,h){var v=window.innerWidth||document.documentElement.clientWidth,k=window.innerHeight||document.documentElement.clientHeight,x=this.getWidth(),A=this.getHeight();m+=15,h+=15,m+x>v&&(m-=m+x-v),h+A>k&&(h-=20+A),p.prototype.setPosition.call(this,m,h)},Object.defineProperty(c,"annotationLabels",{get:function(){return{error:{singular:o("gutter-tooltip.aria-label.error.singular","error"),plural:o("gutter-tooltip.aria-label.error.plural","errors")},warning:{singular:o("gutter-tooltip.aria-label.warning.singular","warning"),plural:o("gutter-tooltip.aria-label.warning.plural","warnings")},info:{singular:o("gutter-tooltip.aria-label.info.singular","information message"),plural:o("gutter-tooltip.aria-label.info.plural","information messages")}}},enumerable:!1,configurable:!0}),c.prototype.showTooltip=function(m){var h,v=this.editor.renderer.$gutterLayer,k=v.$annotations[m],x;k?x={displayText:Array.from(k.displayText),type:Array.from(k.type)}:x={displayText:[],type:[]};var A=v.session.getFoldLine(m);if(A&&v.$showFoldedAnnotations){for(var S={error:[],warning:[],info:[]},f,L=m+1;L<=A.end.row;L++)if(v.$annotations[L])for(var $=0;$<v.$annotations[L].text.length;$++){var T=v.$annotations[L].type[$];if(S[T].push(v.$annotations[L].text[$]),T==="error"){f="error_fold";continue}if(T==="warning"){f="warning_fold";continue}}if(f==="error_fold"||f==="warning_fold"){var C="".concat(c.annotationsToSummaryString(S)," in folded code.");x.displayText.push(C),x.type.push(f)}}if(x.displayText.length===0)return this.hide();for(var w={error:[],warning:[],info:[]},y=v.$useSvgGutterIcons?"ace_icon_svg":"ace_icon",L=0;L<x.displayText.length;L++){var b=g.createElement("span"),_=g.createElement("span");(h=_.classList).add.apply(h,["ace_".concat(x.type[L]),y]),_.setAttribute("aria-label","".concat(c.annotationLabels[x.type[L].replace("_fold","")].singular)),_.setAttribute("role","img"),_.appendChild(g.createTextNode(" ")),b.appendChild(_),b.appendChild(g.createTextNode(x.displayText[L])),b.appendChild(g.createElement("br")),w[x.type[L].replace("_fold","")].push(b)}var E=this.getElement();g.removeChildren(E),w.error.forEach(function(R){return E.appendChild(R)}),w.warning.forEach(function(R){return E.appendChild(R)}),w.info.forEach(function(R){return E.appendChild(R)}),E.setAttribute("aria-live","polite"),this.isOpen||(this.setTheme(this.editor.renderer.theme),this.setClassName("ace_gutter-tooltip")),this.show(),this.editor._signal("showGutterTooltip",this)},c.prototype.hideTooltip=function(){this.$element.removeAttribute("aria-live"),this.hide(),this.editor._signal("hideGutterTooltip",this)},c.annotationsToSummaryString=function(m){var h,v,k=[],x=["error","warning","info"];try{for(var A=u(x),S=A.next();!S.done;S=A.next()){var f=S.value;if(m[f].length){var L=m[f].length===1?c.annotationLabels[f].singular:c.annotationLabels[f].plural;k.push("".concat(m[f].length," ").concat(L))}}}catch($){h={error:$}}finally{try{S&&!S.done&&(v=A.return)&&v.call(A)}finally{if(h)throw h.error}}return k.join(", ")},c}(p);t.GutterTooltip=l});ace.define("ace/mouse/mouse_event",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(e,t,r){"use strict";var d=e("../lib/event"),u=e("../lib/useragent"),g=function(){function a(p,o){this.speed,this.wheelX,this.wheelY,this.domEvent=p,this.editor=o,this.x=this.clientX=p.clientX,this.y=this.clientY=p.clientY,this.$pos=null,this.$inSelection=null,this.propagationStopped=!1,this.defaultPrevented=!1}return a.prototype.stopPropagation=function(){d.stopPropagation(this.domEvent),this.propagationStopped=!0},a.prototype.preventDefault=function(){d.preventDefault(this.domEvent),this.defaultPrevented=!0},a.prototype.stop=function(){this.stopPropagation(),this.preventDefault()},a.prototype.getDocumentPosition=function(){return this.$pos?this.$pos:(this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY),this.$pos)},a.prototype.getGutterRow=function(){var p=this.getDocumentPosition().row,o=this.editor.session.documentToScreenRow(p,0),i=this.editor.session.documentToScreenRow(this.editor.renderer.$gutterLayer.$lines.get(0).row,0);return o-i},a.prototype.inSelection=function(){if(this.$inSelection!==null)return this.$inSelection;var p=this.editor,o=p.getSelectionRange();if(o.isEmpty())this.$inSelection=!1;else{var i=this.getDocumentPosition();this.$inSelection=o.contains(i.row,i.column)}return this.$inSelection},a.prototype.getButton=function(){return d.getButton(this.domEvent)},a.prototype.getShiftKey=function(){return this.domEvent.shiftKey},a.prototype.getAccelKey=function(){return u.isMac?this.domEvent.metaKey:this.domEvent.ctrlKey},a}();t.MouseEvent=g});ace.define("ace/mouse/dragdrop_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],function(e,t,r){"use strict";var d=e("../lib/dom"),u=e("../lib/event"),g=e("../lib/useragent"),a=200,p=200,o=5;function i(l){var s=l.editor,c=d.createElement("div");c.style.cssText="top:-100px;position:absolute;z-index:2147483647;opacity:0.5",c.textContent="\xA0";var m=["dragWait","dragWaitEnd","startDrag","dragReadyEnd","onMouseDrag"];m.forEach(function(D){l[D]=this[D]},this),s.on("mousedown",this.onMouseDown.bind(l));var h=s.container,v,k,x,A,S,f,L=0,$,T,C,w,y;this.onDragStart=function(D){if(this.cancelDrag||!h.draggable){var F=this;return setTimeout(function(){F.startSelect(),F.captureMouse(D)},0),D.preventDefault()}S=s.getSelectionRange();var z=D.dataTransfer;z.effectAllowed=s.getReadOnly()?"copy":"copyMove",s.container.appendChild(c),z.setDragImage&&z.setDragImage(c,0,0),setTimeout(function(){s.container.removeChild(c)}),z.clearData(),z.setData("Text",s.session.getTextRange()),T=!0,this.setState("drag")},this.onDragEnd=function(D){if(h.draggable=!1,T=!1,this.setState(null),!s.getReadOnly()){var F=D.dataTransfer.dropEffect;!$&&F=="move"&&s.session.remove(s.getSelectionRange()),s.$resetCursorStyle()}this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle("")},this.onDragEnter=function(D){if(!(s.getReadOnly()||!O(D.dataTransfer)))return k=D.clientX,x=D.clientY,v||R(),L++,D.dataTransfer.dropEffect=$=N(D),u.preventDefault(D)},this.onDragOver=function(D){if(!(s.getReadOnly()||!O(D.dataTransfer)))return k=D.clientX,x=D.clientY,v||(R(),L++),I!==null&&(I=null),D.dataTransfer.dropEffect=$=N(D),u.preventDefault(D)},this.onDragLeave=function(D){if(L--,L<=0&&v)return M(),$=null,u.preventDefault(D)},this.onDrop=function(D){if(f){var F=D.dataTransfer;if(T)switch($){case"move":S.contains(f.row,f.column)?S={start:f,end:f}:S=s.moveText(S,f);break;case"copy":S=s.moveText(S,f,!0);break}else{var z=F.getData("Text");S={start:f,end:s.session.insert(f,z)},s.focus(),$=null}return M(),u.preventDefault(D)}},u.addListener(h,"dragstart",this.onDragStart.bind(l),s),u.addListener(h,"dragend",this.onDragEnd.bind(l),s),u.addListener(h,"dragenter",this.onDragEnter.bind(l),s),u.addListener(h,"dragover",this.onDragOver.bind(l),s),u.addListener(h,"dragleave",this.onDragLeave.bind(l),s),u.addListener(h,"drop",this.onDrop.bind(l),s);function b(D,F){var z=Date.now(),W=!F||D.row!=F.row,j=!F||D.column!=F.column;if(!w||W||j)s.moveCursorToPosition(D),w=z,y={x:k,y:x};else{var Z=n(y.x,y.y,k,x);Z>o?w=null:z-w>=p&&(s.renderer.scrollCursorIntoView(),w=null)}}function _(D,F){var z=Date.now(),W=s.renderer.layerConfig.lineHeight,j=s.renderer.layerConfig.characterWidth,Z=s.renderer.scroller.getBoundingClientRect(),Y={x:{left:k-Z.left,right:Z.right-k},y:{top:x-Z.top,bottom:Z.bottom-x}},q=Math.min(Y.x.left,Y.x.right),nt=Math.min(Y.y.top,Y.y.bottom),ot={row:D.row,column:D.column};q/j<=2&&(ot.column+=Y.x.left<Y.x.right?-3:2),nt/W<=1&&(ot.row+=Y.y.top<Y.y.bottom?-1:1);var wt=D.row!=ot.row,Et=D.column!=ot.column,vt=!F||D.row!=F.row;wt||Et&&!vt?C?z-C>=a&&s.renderer.scrollCursorIntoView(ot):C=z:C=null}function E(){var D=f;f=s.renderer.screenToTextCoordinates(k,x),b(f,D),_(f,D)}function R(){S=s.selection.toOrientedRange(),v=s.session.addMarker(S,"ace_selection",s.getSelectionStyle()),s.clearSelection(),s.isFocused()&&s.renderer.$cursorLayer.setBlinking(!1),clearInterval(A),E(),A=setInterval(E,20),L=0,u.addListener(document,"mousemove",P)}function M(){clearInterval(A),s.session.removeMarker(v),v=null,s.selection.fromOrientedRange(S),s.isFocused()&&!T&&s.$resetCursorStyle(),S=null,f=null,L=0,C=null,w=null,u.removeListener(document,"mousemove",P)}var I=null;function P(){I==null&&(I=setTimeout(function(){I!=null&&v&&M()},20))}function O(D){var F=D.types;return!F||Array.prototype.some.call(F,function(z){return z=="text/plain"||z=="Text"})}function N(D){var F=["copy","copymove","all","uninitialized"],z=["move","copymove","linkmove","all","uninitialized"],W=g.isMac?D.altKey:D.ctrlKey,j="uninitialized";try{j=D.dataTransfer.effectAllowed.toLowerCase()}catch{}var Z="none";return W&&F.indexOf(j)>=0?Z="copy":z.indexOf(j)>=0?Z="move":F.indexOf(j)>=0&&(Z="copy"),Z}}(function(){this.dragWait=function(){var l=Date.now()-this.mousedownEvent.time;l>this.editor.getDragDelay()&&this.startDrag()},this.dragWaitEnd=function(){var l=this.editor.container;l.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()),this.selectEnd()},this.dragReadyEnd=function(l){this.editor.$resetCursorStyle(),this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle(""),this.dragWaitEnd()},this.startDrag=function(){this.cancelDrag=!1;var l=this.editor,s=l.container;s.draggable=!0,l.renderer.$cursorLayer.setBlinking(!1),l.setStyle("ace_dragging");var c=g.isWin?"default":"move";l.renderer.setCursorStyle(c),this.setState("dragReady")},this.onMouseDrag=function(l){var s=this.editor.container;if(g.isIE&&this.state=="dragReady"){var c=n(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);c>3&&s.dragDrop()}if(this.state==="dragWait"){var c=n(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);c>0&&(s.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()))}},this.onMouseDown=function(l){if(this.$dragEnabled){this.mousedownEvent=l;var s=this.editor,c=l.inSelection(),m=l.getButton(),h=l.domEvent.detail||1;if(h===1&&m===0&&c){if(l.editor.inMultiSelectMode&&(l.getAccelKey()||l.getShiftKey()))return;this.mousedownEvent.time=Date.now();var v=l.domEvent.target||l.domEvent.srcElement;if("unselectable"in v&&(v.unselectable="on"),s.getDragDelay()){if(g.isWebKit){this.cancelDrag=!0;var k=s.container;k.draggable=!0}this.setState("dragWait")}else this.startDrag();this.captureMouse(l,this.onMouseDrag.bind(this)),l.defaultPrevented=!0}}}}).call(i.prototype);function n(l,s,c,m){return Math.sqrt(Math.pow(c-l,2)+Math.pow(m-s,2))}t.DragdropHandler=i});ace.define("ace/mouse/touch_handler",["require","exports","module","ace/mouse/mouse_event","ace/lib/event","ace/lib/dom"],function(e,t,r){"use strict";var d=e("./mouse_event").MouseEvent,u=e("../lib/event"),g=e("../lib/dom");t.addTouchListeners=function(a,p){var o="scroll",i,n,l,s,c,m,h=0,v,k=0,x=0,A=0,S,f;function L(){var b=window.navigator&&window.navigator.clipboard,_=!1,E=function(){var I=p.getCopyText(),P=p.session.getUndoManager().hasUndo();f.replaceChild(g.buildDom(_?["span",!I&&R("selectall")&&["span",{class:"ace_mobile-button",action:"selectall"},"Select All"],I&&R("copy")&&["span",{class:"ace_mobile-button",action:"copy"},"Copy"],I&&R("cut")&&["span",{class:"ace_mobile-button",action:"cut"},"Cut"],b&&R("paste")&&["span",{class:"ace_mobile-button",action:"paste"},"Paste"],P&&R("undo")&&["span",{class:"ace_mobile-button",action:"undo"},"Undo"],R("find")&&["span",{class:"ace_mobile-button",action:"find"},"Find"],R("openCommandPalette")&&["span",{class:"ace_mobile-button",action:"openCommandPalette"},"Palette"]]:["span"]),f.firstChild)},R=function(I){return p.commands.canExecute(I,p)},M=function(I){var P=I.target.getAttribute("action");if(P=="more"||!_)return _=!_,E();P=="paste"?b.readText().then(function(O){p.execCommand(P,O)}):P&&((P=="cut"||P=="copy")&&(b?b.writeText(p.getCopyText()):document.execCommand("copy")),p.execCommand(P)),f.firstChild.style.display="none",_=!1,P!="openCommandPalette"&&p.focus()};f=g.buildDom(["div",{class:"ace_mobile-menu",ontouchstart:function(I){o="menu",I.stopPropagation(),I.preventDefault(),p.textInput.focus()},ontouchend:function(I){I.stopPropagation(),I.preventDefault(),M(I)},onclick:M},["span"],["span",{class:"ace_mobile-button",action:"more"},"..."]],p.container)}function $(){if(!p.getOption("enableMobileMenu")){f&&T();return}f||L();var b=p.selection.cursor,_=p.renderer.textToScreenCoordinates(b.row,b.column),E=p.renderer.textToScreenCoordinates(0,0).pageX,R=p.renderer.scrollLeft,M=p.container.getBoundingClientRect();f.style.top=_.pageY-M.top-3+"px",_.pageX-M.left<M.width-70?(f.style.left="",f.style.right="10px"):(f.style.right="",f.style.left=E+R-M.left+"px"),f.style.display="",f.firstChild.style.display="none",p.on("input",T)}function T(b){f&&(f.style.display="none"),p.off("input",T)}function C(){c=null,clearTimeout(c);var b=p.selection.getRange(),_=b.contains(v.row,v.column);(b.isEmpty()||!_)&&(p.selection.moveToPosition(v),p.selection.selectWord()),o="wait",$()}function w(){c=null,clearTimeout(c),p.selection.moveToPosition(v);var b=k>=2?p.selection.getLineRange(v.row):p.session.getBracketRange(v);b&&!b.isEmpty()?p.selection.setRange(b):p.selection.selectWord(),o="wait"}u.addListener(a,"contextmenu",function(b){if(S){var _=p.textInput.getElement();_.focus()}},p),u.addListener(a,"touchstart",function(b){var _=b.touches;if(c||_.length>1){clearTimeout(c),c=null,l=-1,o="zoom";return}S=p.$mouseHandler.isMousePressed=!0;var E=p.renderer.layerConfig.lineHeight,R=p.renderer.layerConfig.lineHeight,M=b.timeStamp;s=M;var I=_[0],P=I.clientX,O=I.clientY;Math.abs(i-P)+Math.abs(n-O)>E&&(l=-1),i=b.clientX=P,n=b.clientY=O,x=A=0;var N=new d(b,p);if(v=N.getDocumentPosition(),M-l<500&&_.length==1&&!h)k++,b.preventDefault(),b.button=0,w();else{k=0;var D=p.selection.cursor,F=p.selection.isEmpty()?D:p.selection.anchor,z=p.renderer.$cursorLayer.getPixelPosition(D,!0),W=p.renderer.$cursorLayer.getPixelPosition(F,!0),j=p.renderer.scroller.getBoundingClientRect(),Z=p.renderer.layerConfig.offset,Y=p.renderer.scrollLeft,q=function(wt,Et){return wt=wt/R,Et=Et/E-.75,wt*wt+Et*Et};if(b.clientX<j.left){o="zoom";return}var nt=q(b.clientX-j.left-z.left+Y,b.clientY-j.top-z.top+Z),ot=q(b.clientX-j.left-W.left+Y,b.clientY-j.top-W.top+Z);nt<3.5&&ot<3.5&&(o=nt>ot?"cursor":"anchor"),ot<3.5?o="anchor":nt<3.5?o="cursor":o="scroll",c=setTimeout(C,450)}l=M},p),u.addListener(a,"touchend",function(b){S=p.$mouseHandler.isMousePressed=!1,m&&clearInterval(m),o=="zoom"?(o="",h=0):c?(p.selection.moveToPosition(v),h=0,$()):o=="scroll"?(y(),T()):$(),clearTimeout(c),c=null},p),u.addListener(a,"touchmove",function(b){c&&(clearTimeout(c),c=null);var _=b.touches;if(!(_.length>1||o=="zoom")){var E=_[0],R=i-E.clientX,M=n-E.clientY;if(o=="wait")if(R*R+M*M>4)o="cursor";else return b.preventDefault();i=E.clientX,n=E.clientY,b.clientX=E.clientX,b.clientY=E.clientY;var I=b.timeStamp,P=I-s;if(s=I,o=="scroll"){var O=new d(b,p);O.speed=1,O.wheelX=R,O.wheelY=M,10*Math.abs(R)<Math.abs(M)&&(R=0),10*Math.abs(M)<Math.abs(R)&&(M=0),P!=0&&(x=R/P,A=M/P),p._emit("mousewheel",O),O.propagationStopped||(x=A=0)}else{var N=new d(b,p),D=N.getDocumentPosition();o=="cursor"?p.selection.moveCursorToPosition(D):o=="anchor"&&p.selection.setSelectionAnchor(D.row,D.column),p.renderer.scrollCursorIntoView(D),b.preventDefault()}}},p);function y(){h+=60,m=setInterval(function(){h--<=0&&(clearInterval(m),m=null),Math.abs(x)<.01&&(x=0),Math.abs(A)<.01&&(A=0),h<20&&(x=.9*x),h<20&&(A=.9*A);var b=p.session.getScrollTop();p.renderer.scrollBy(10*x,10*A),b==p.session.getScrollTop()&&(h=0)},10)}}});ace.define("ace/mouse/mouse_handler",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/mouse/default_handlers","ace/mouse/default_gutter_handler","ace/mouse/mouse_event","ace/mouse/dragdrop_handler","ace/mouse/touch_handler","ace/config"],function(e,t,r){"use strict";var d=e("../lib/event"),u=e("../lib/useragent"),g=e("./default_handlers").DefaultHandlers,a=e("./default_gutter_handler").GutterHandler,p=e("./mouse_event").MouseEvent,o=e("./dragdrop_handler").DragdropHandler,i=e("./touch_handler").addTouchListeners,n=e("../config"),l=function(){function s(c){this.$dragDelay,this.$dragEnabled,this.$mouseMoved,this.mouseEvent,this.$focusTimeout;var m=this;this.editor=c,new g(this),new a(this),new o(this);var h=function(x){var A=!document.hasFocus||!document.hasFocus()||!c.isFocused()&&document.activeElement==(c.textInput&&c.textInput.getElement());A&&window.focus(),c.focus(),setTimeout(function(){c.isFocused()||c.focus()})},v=c.renderer.getMouseEventTarget();d.addListener(v,"click",this.onMouseEvent.bind(this,"click"),c),d.addListener(v,"mousemove",this.onMouseMove.bind(this,"mousemove"),c),d.addMultiMouseDownListener([v,c.renderer.scrollBarV&&c.renderer.scrollBarV.inner,c.renderer.scrollBarH&&c.renderer.scrollBarH.inner,c.textInput&&c.textInput.getElement()].filter(Boolean),[400,300,250],this,"onMouseEvent",c),d.addMouseWheelListener(c.container,this.onMouseWheel.bind(this,"mousewheel"),c),i(c.container,c);var k=c.renderer.$gutter;d.addListener(k,"mousedown",this.onMouseEvent.bind(this,"guttermousedown"),c),d.addListener(k,"click",this.onMouseEvent.bind(this,"gutterclick"),c),d.addListener(k,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick"),c),d.addListener(k,"mousemove",this.onMouseEvent.bind(this,"guttermousemove"),c),d.addListener(v,"mousedown",h,c),d.addListener(k,"mousedown",h,c),u.isIE&&c.renderer.scrollBarV&&(d.addListener(c.renderer.scrollBarV.element,"mousedown",h,c),d.addListener(c.renderer.scrollBarH.element,"mousedown",h,c)),c.on("mousemove",function(x){if(!(m.state||m.$dragDelay||!m.$dragEnabled)){var A=c.renderer.screenToTextCoordinates(x.x,x.y),S=c.session.selection.getRange(),f=c.renderer;!S.isEmpty()&&S.insideStart(A.row,A.column)?f.setCursorStyle("default"):f.setCursorStyle("")}},c)}return s.prototype.onMouseEvent=function(c,m){this.editor.session&&this.editor._emit(c,new p(m,this.editor))},s.prototype.onMouseMove=function(c,m){var h=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;!h||!h.length||this.editor._emit(c,new p(m,this.editor))},s.prototype.onMouseWheel=function(c,m){var h=new p(m,this.editor);h.speed=this.$scrollSpeed*2,h.wheelX=m.wheelX,h.wheelY=m.wheelY,this.editor._emit(c,h)},s.prototype.setState=function(c){this.state=c},s.prototype.captureMouse=function(c,m){this.x=c.x,this.y=c.y,this.isMousePressed=!0;var h=this.editor,v=this.editor.renderer;v.$isMousePressed=!0;var k=this,x=function($){if($){if(u.isWebKit&&!$.which&&k.releaseMouse)return k.releaseMouse();k.x=$.clientX,k.y=$.clientY,m&&m($),k.mouseEvent=new p($,k.editor),k.$mouseMoved=!0}},A=function($){h.off("beforeEndOperation",f),clearInterval(L),h.session&&S(),k[k.state+"End"]&&k[k.state+"End"]($),k.state="",k.isMousePressed=v.$isMousePressed=!1,v.$keepTextAreaAtCursor&&v.$moveTextAreaToCursor(),k.$onCaptureMouseMove=k.releaseMouse=null,$&&k.onMouseEvent("mouseup",$),h.endOperation()},S=function(){k[k.state]&&k[k.state](),k.$mouseMoved=!1};if(u.isOldIE&&c.domEvent.type=="dblclick")return setTimeout(function(){A(c)});var f=function($){k.releaseMouse&&h.curOp.command.name&&h.curOp.selectionChanged&&(k[k.state+"End"]&&k[k.state+"End"](),k.state="",k.releaseMouse())};h.on("beforeEndOperation",f),h.startOperation({command:{name:"mouse"}}),k.$onCaptureMouseMove=x,k.releaseMouse=d.capture(this.editor.container,x,A);var L=setInterval(S,20)},s.prototype.cancelContextMenu=function(){var c=function(m){m&&m.domEvent&&m.domEvent.type!="contextmenu"||(this.editor.off("nativecontextmenu",c),m&&m.domEvent&&d.stopEvent(m.domEvent))}.bind(this);setTimeout(c,10),this.editor.on("nativecontextmenu",c)},s.prototype.destroy=function(){this.releaseMouse&&this.releaseMouse()},s}();l.prototype.releaseMouse=null,n.defineOptions(l.prototype,"mouseHandler",{scrollSpeed:{initialValue:2},dragDelay:{initialValue:u.isMac?150:0},dragEnabled:{initialValue:!0},focusTimeout:{initialValue:0},tooltipFollowsMouse:{initialValue:!0}}),t.MouseHandler=l});ace.define("ace/mouse/fold_handler",["require","exports","module","ace/lib/dom"],function(e,t,r){"use strict";var d=e("../lib/dom"),u=function(){function g(a){a.on("click",function(p){var o=p.getDocumentPosition(),i=a.session,n=i.getFoldAt(o.row,o.column,1);n&&(p.getAccelKey()?i.removeFold(n):i.expandFold(n),p.stop());var l=p.domEvent&&p.domEvent.target;l&&d.hasCssClass(l,"ace_inline_button")&&d.hasCssClass(l,"ace_toggle_wrap")&&(i.setOption("wrap",!i.getUseWrapMode()),a.renderer.scrollCursorIntoView())}),a.on("gutterclick",function(p){var o=a.renderer.$gutterLayer.getRegion(p);if(o=="foldWidgets"){var i=p.getDocumentPosition().row,n=a.session;n.foldWidgets&&n.foldWidgets[i]&&a.session.onFoldWidgetClick(i,p),a.isFocused()||a.focus(),p.stop()}}),a.on("gutterdblclick",function(p){var o=a.renderer.$gutterLayer.getRegion(p);if(o=="foldWidgets"){var i=p.getDocumentPosition().row,n=a.session,l=n.getParentFoldRangeData(i,!0),s=l.range||l.firstRange;if(s){i=s.start.row;var c=n.getFoldAt(i,n.getLine(i).length,1);c?n.removeFold(c):(n.addFold("...",s),a.renderer.scrollCursorIntoView({row:s.start.row,column:0}))}p.stop()}})}return g}();t.FoldHandler=u});ace.define("ace/keyboard/keybinding",["require","exports","module","ace/lib/keys","ace/lib/event"],function(e,t,r){"use strict";var d=e("../lib/keys"),u=e("../lib/event"),g=function(){function a(p){this.$editor=p,this.$data={editor:p},this.$handlers=[],this.setDefaultHandler(p.commands)}return a.prototype.setDefaultHandler=function(p){this.removeKeyboardHandler(this.$defaultHandler),this.$defaultHandler=p,this.addKeyboardHandler(p,0)},a.prototype.setKeyboardHandler=function(p){var o=this.$handlers;if(o[o.length-1]!=p){for(;o[o.length-1]&&o[o.length-1]!=this.$defaultHandler;)this.removeKeyboardHandler(o[o.length-1]);this.addKeyboardHandler(p,1)}},a.prototype.addKeyboardHandler=function(p,o){if(p){typeof p=="function"&&!p.handleKeyboard&&(p.handleKeyboard=p);var i=this.$handlers.indexOf(p);i!=-1&&this.$handlers.splice(i,1),o==null?this.$handlers.push(p):this.$handlers.splice(o,0,p),i==-1&&p.attach&&p.attach(this.$editor)}},a.prototype.removeKeyboardHandler=function(p){var o=this.$handlers.indexOf(p);return o==-1?!1:(this.$handlers.splice(o,1),p.detach&&p.detach(this.$editor),!0)},a.prototype.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]},a.prototype.getStatusText=function(){var p=this.$data,o=p.editor;return this.$handlers.map(function(i){return i.getStatusText&&i.getStatusText(o,p)||""}).filter(Boolean).join(" ")},a.prototype.$callKeyboardHandlers=function(p,o,i,n){for(var l,s=!1,c=this.$editor.commands,m=this.$handlers.length;m--&&(l=this.$handlers[m].handleKeyboard(this.$data,p,o,i,n),!(!(!l||!l.command)&&(l.command=="null"?s=!0:s=c.exec(l.command,this.$editor,l.args,n),s&&n&&p!=-1&&l.passEvent!=!0&&l.command.passEvent!=!0&&u.stopEvent(n),s))););return!s&&p==-1&&(l={command:"insertstring"},s=c.exec("insertstring",this.$editor,o)),s&&this.$editor._signal&&this.$editor._signal("keyboardActivity",l),s},a.prototype.onCommandKey=function(p,o,i){var n=d.keyCodeToString(i);return this.$callKeyboardHandlers(o,n,i,p)},a.prototype.onTextInput=function(p){return this.$callKeyboardHandlers(-1,p)},a}();t.KeyBinding=g});ace.define("ace/lib/bidiutil",["require","exports","module"],function(e,t,r){"use strict";var d=["\u0621","\u0641"],u=["\u063A","\u064A"],g=0,a=0,p=!1,o=!1,i=!1,n=!1,l=!1,s=!1,c=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],h=0,v=1,k=0,x=1,A=2,S=3,f=4,L=5,$=6,T=7,C=8,w=9,y=10,b=11,_=12,E=13,R=14,M=15,I=16,P=17,O=18,N=[O,O,O,O,O,O,O,O,O,$,L,$,C,L,O,O,O,O,O,O,O,O,O,O,O,O,O,O,L,L,L,$,C,f,f,b,b,b,f,f,f,f,f,y,w,y,w,w,A,A,A,A,A,A,A,A,A,A,w,f,f,f,f,f,f,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,f,f,f,f,f,f,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,f,f,f,f,O,O,O,O,O,O,L,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,w,f,b,b,b,b,f,f,f,f,k,f,f,O,f,f,b,b,A,A,f,k,f,f,f,A,k,f,f,f,f,f],D=[C,C,C,C,C,C,C,C,C,C,C,O,O,O,k,x,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,C,L,E,R,M,I,P,w,b,b,b,b,b,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,w,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,C];function F(Y,q,nt,ot){var wt=g?m:c,Et=null,vt=null,H=null,J=0,at=null,tt=null,ct=-1,K=null,V=null,st=[];if(!ot)for(K=0,ot=[];K<nt;K++)ot[K]=j(Y[K]);for(a=g,p=!1,o=!1,i=!1,n=!1,V=0;V<nt;V++){if(Et=J,st[V]=vt=W(Y,ot,st,V),J=wt[Et][vt],at=J&240,J&=15,q[V]=H=wt[J][5],at>0)if(at==16){for(K=ct;K<V;K++)q[K]=1;ct=-1}else ct=-1;if(tt=wt[J][6],tt)ct==-1&&(ct=V);else if(ct>-1){for(K=ct;K<V;K++)q[K]=H;ct=-1}ot[V]==L&&(q[V]=0),a|=H}if(n){for(K=0;K<nt;K++)if(ot[K]==$){q[K]=g;for(var it=K-1;it>=0&&ot[it]==C;it--)q[it]=g}}}function z(Y,q,nt){if(!(a<Y)){if(Y==1&&g==v&&!i){nt.reverse();return}for(var ot=nt.length,wt=0,Et,vt,H,J;wt<ot;){if(q[wt]>=Y){for(Et=wt+1;Et<ot&&q[Et]>=Y;)Et++;for(vt=wt,H=Et-1;vt<H;vt++,H--)J=nt[vt],nt[vt]=nt[H],nt[H]=J;wt=Et}wt++}}}function W(Y,q,nt,ot){var wt=q[ot],Et,vt,H,J;switch(wt){case k:case x:p=!1;case f:case S:return wt;case A:return p?S:A;case T:return p=!0,o=!0,x;case C:return f;case w:return ot<1||ot+1>=q.length||(Et=nt[ot-1])!=A&&Et!=S||(vt=q[ot+1])!=A&&vt!=S?f:(p&&(vt=S),vt==Et?vt:f);case y:return Et=ot>0?nt[ot-1]:L,Et==A&&ot+1<q.length&&q[ot+1]==A?A:f;case b:if(ot>0&&nt[ot-1]==A)return A;if(p)return f;for(J=ot+1,H=q.length;J<H&&q[J]==b;)J++;return J<H&&q[J]==A?A:f;case _:for(H=q.length,J=ot+1;J<H&&q[J]==_;)J++;if(J<H){var at=Y[ot],tt=at>=1425&&at<=2303||at==64286;if(Et=q[J],tt&&(Et==x||Et==T))return x}return ot<1||(Et=q[ot-1])==L?f:nt[ot-1];case L:return p=!1,i=!0,g;case $:return n=!0,f;case E:case R:case I:case P:case M:p=!1;case O:return f}}function j(Y){var q=Y.charCodeAt(0),nt=q>>8;return nt==0?q>191?k:N[q]:nt==5?/[\u0591-\u05f4]/.test(Y)?x:k:nt==6?/[\u0610-\u061a\u064b-\u065f\u06d6-\u06e4\u06e7-\u06ed]/.test(Y)?_:/[\u0660-\u0669\u066b-\u066c]/.test(Y)?S:q==1642?b:/[\u06f0-\u06f9]/.test(Y)?A:T:nt==32&&q<=8287?D[q&255]:nt==254&&q>=65136?T:f}function Z(Y){return Y>="\u064B"&&Y<="\u0655"}t.L=k,t.R=x,t.EN=A,t.ON_R=3,t.AN=4,t.R_H=5,t.B=6,t.RLE=7,t.DOT="\xB7",t.doBidiReorder=function(Y,q,nt){if(Y.length<2)return{};var ot=Y.split(""),wt=new Array(ot.length),Et=new Array(ot.length),vt=[];g=nt?v:h,F(ot,vt,ot.length,q);for(var H=0;H<wt.length;wt[H]=H,H++);z(2,vt,wt),z(1,vt,wt);for(var H=0;H<wt.length-1;H++)q[H]===S?vt[H]=t.AN:vt[H]===x&&(q[H]>T&&q[H]<E||q[H]===f||q[H]===O)?vt[H]=t.ON_R:H>0&&ot[H-1]==="\u0644"&&/\u0622|\u0623|\u0625|\u0627/.test(ot[H])&&(vt[H-1]=vt[H]=t.R_H,H++);ot[ot.length-1]===t.DOT&&(vt[ot.length-1]=t.B),ot[0]==="\u202B"&&(vt[0]=t.RLE);for(var H=0;H<wt.length;H++)Et[H]=vt[wt[H]];return{logicalFromVisual:wt,bidiLevels:Et}},t.hasBidiCharacters=function(Y,q){for(var nt=!1,ot=0;ot<Y.length;ot++)q[ot]=j(Y.charAt(ot)),!nt&&(q[ot]==x||q[ot]==T||q[ot]==S)&&(nt=!0);return nt},t.getVisualFromLogicalIdx=function(Y,q){for(var nt=0;nt<q.logicalFromVisual.length;nt++)if(q.logicalFromVisual[nt]==Y)return nt;return 0}});ace.define("ace/bidihandler",["require","exports","module","ace/lib/bidiutil","ace/lib/lang"],function(e,t,r){"use strict";var d=e("./lib/bidiutil"),u=e("./lib/lang"),g=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\u202B]/,a=function(){function p(o){this.session=o,this.bidiMap={},this.currentRow=null,this.bidiUtil=d,this.charWidths=[],this.EOL="\xAC",this.showInvisibles=!0,this.isRtlDir=!1,this.$isRtl=!1,this.line="",this.wrapIndent=0,this.EOF="\xB6",this.RLE="\u202B",this.contentWidth=0,this.fontMetrics=null,this.rtlLineOffset=0,this.wrapOffset=0,this.isMoveLeftOperation=!1,this.seenBidi=g.test(o.getValue())}return p.prototype.isBidiRow=function(o,i,n){return this.seenBidi?(o!==this.currentRow&&(this.currentRow=o,this.updateRowLine(i,n),this.updateBidiMap()),this.bidiMap.bidiLevels):!1},p.prototype.onChange=function(o){this.seenBidi?this.currentRow=null:o.action=="insert"&&g.test(o.lines.join(`
`))&&(this.seenBidi=!0,this.currentRow=null)},p.prototype.getDocumentRow=function(){var o=0,i=this.session.$screenRowCache;if(i.length){var n=this.session.$getRowCacheIndex(i,this.currentRow);n>=0&&(o=this.session.$docRowCache[n])}return o},p.prototype.getSplitIndex=function(){var o=0,i=this.session.$screenRowCache;if(i.length)for(var n,l=this.session.$getRowCacheIndex(i,this.currentRow);this.currentRow-o>0&&(n=this.session.$getRowCacheIndex(i,this.currentRow-o-1),n===l);)l=n,o++;else o=this.currentRow;return o},p.prototype.updateRowLine=function(o,i){o===void 0&&(o=this.getDocumentRow());var n=o===this.session.getLength()-1,l=n?this.EOF:this.EOL;if(this.wrapIndent=0,this.line=this.session.getLine(o),this.isRtlDir=this.$isRtl||this.line.charAt(0)===this.RLE,this.session.$useWrapMode){var s=this.session.$wrapData[o];s&&(i===void 0&&(i=this.getSplitIndex()),i>0&&s.length?(this.wrapIndent=s.indent,this.wrapOffset=this.wrapIndent*this.charWidths[d.L],this.line=i<s.length?this.line.substring(s[i-1],s[i]):this.line.substring(s[s.length-1])):this.line=this.line.substring(0,s[i]),i==s.length&&(this.line+=this.showInvisibles?l:d.DOT))}else this.line+=this.showInvisibles?l:d.DOT;var c=this.session,m=0,h;this.line=this.line.replace(/\t|[\u1100-\u2029, \u202F-\uFFE6]/g,function(v,k){return v==="	"||c.isFullWidth(v.charCodeAt(0))?(h=v==="	"?c.getScreenTabSize(k+m):2,m+=h-1,u.stringRepeat(d.DOT,h)):v}),this.isRtlDir&&(this.fontMetrics.$main.textContent=this.line.charAt(this.line.length-1)==d.DOT?this.line.substr(0,this.line.length-1):this.line,this.rtlLineOffset=this.contentWidth-this.fontMetrics.$main.getBoundingClientRect().width)},p.prototype.updateBidiMap=function(){var o=[];d.hasBidiCharacters(this.line,o)||this.isRtlDir?this.bidiMap=d.doBidiReorder(this.line,o,this.isRtlDir):this.bidiMap={}},p.prototype.markAsDirty=function(){this.currentRow=null},p.prototype.updateCharacterWidths=function(o){if(this.characterWidth!==o.$characterSize.width){this.fontMetrics=o;var i=this.characterWidth=o.$characterSize.width,n=o.$measureCharWidth("\u05D4");this.charWidths[d.L]=this.charWidths[d.EN]=this.charWidths[d.ON_R]=i,this.charWidths[d.R]=this.charWidths[d.AN]=n,this.charWidths[d.R_H]=n*.45,this.charWidths[d.B]=this.charWidths[d.RLE]=0,this.currentRow=null}},p.prototype.setShowInvisibles=function(o){this.showInvisibles=o,this.currentRow=null},p.prototype.setEolChar=function(o){this.EOL=o},p.prototype.setContentWidth=function(o){this.contentWidth=o},p.prototype.isRtlLine=function(o){return this.$isRtl?!0:o!=null?this.session.getLine(o).charAt(0)==this.RLE:this.isRtlDir},p.prototype.setRtlDirection=function(o,i){for(var n=o.getCursorPosition(),l=o.selection.getSelectionAnchor().row;l<=n.row;l++)!i&&o.session.getLine(l).charAt(0)===o.session.$bidiHandler.RLE?o.session.doc.removeInLine(l,0,1):i&&o.session.getLine(l).charAt(0)!==o.session.$bidiHandler.RLE&&o.session.doc.insert({column:0,row:l},o.session.$bidiHandler.RLE)},p.prototype.getPosLeft=function(o){o-=this.wrapIndent;var i=this.line.charAt(0)===this.RLE?1:0,n=o>i?this.session.getOverwrite()?o:o-1:i,l=d.getVisualFromLogicalIdx(n,this.bidiMap),s=this.bidiMap.bidiLevels,c=0;!this.session.getOverwrite()&&o<=i&&s[l]%2!==0&&l++;for(var m=0;m<l;m++)c+=this.charWidths[s[m]];return!this.session.getOverwrite()&&o>i&&s[l]%2===0&&(c+=this.charWidths[s[l]]),this.wrapIndent&&(c+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset),this.isRtlDir&&(c+=this.rtlLineOffset),c},p.prototype.getSelections=function(o,i){var n=this.bidiMap,l=n.bidiLevels,s,c=[],m=0,h=Math.min(o,i)-this.wrapIndent,v=Math.max(o,i)-this.wrapIndent,k=!1,x=!1,A=0;this.wrapIndent&&(m+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);for(var S,f=0;f<l.length;f++)S=n.logicalFromVisual[f],s=l[f],k=S>=h&&S<v,k&&!x?A=m:!k&&x&&c.push({left:A,width:m-A}),m+=this.charWidths[s],x=k;if(k&&f===l.length&&c.push({left:A,width:m-A}),this.isRtlDir)for(var L=0;L<c.length;L++)c[L].left+=this.rtlLineOffset;return c},p.prototype.offsetToCol=function(n){this.isRtlDir&&(n-=this.rtlLineOffset);var i=0,n=Math.max(n,0),l=0,s=0,c=this.bidiMap.bidiLevels,m=this.charWidths[c[s]];for(this.wrapIndent&&(n-=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);n>l+m/2;){if(l+=m,s===c.length-1){m=0;break}m=this.charWidths[c[++s]]}return s>0&&c[s-1]%2!==0&&c[s]%2===0?(n<l&&s--,i=this.bidiMap.logicalFromVisual[s]):s>0&&c[s-1]%2===0&&c[s]%2!==0?i=1+(n>l?this.bidiMap.logicalFromVisual[s]:this.bidiMap.logicalFromVisual[s-1]):this.isRtlDir&&s===c.length-1&&m===0&&c[s-1]%2===0||!this.isRtlDir&&s===0&&c[s]%2!==0?i=1+this.bidiMap.logicalFromVisual[s]:(s>0&&c[s-1]%2!==0&&m!==0&&s--,i=this.bidiMap.logicalFromVisual[s]),i===0&&this.isRtlDir&&i++,i+this.wrapIndent},p}();t.BidiHandler=a});ace.define("ace/selection",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/range"],function(e,t,r){"use strict";var d=e("./lib/oop"),u=e("./lib/lang"),g=e("./lib/event_emitter").EventEmitter,a=e("./range").Range,p=function(){function o(i){this.session=i,this.doc=i.getDocument(),this.clearSelection(),this.cursor=this.lead=this.doc.createAnchor(0,0),this.anchor=this.doc.createAnchor(0,0),this.$silent=!1;var n=this;this.cursor.on("change",function(l){n.$cursorChanged=!0,n.$silent||n._emit("changeCursor"),!n.$isEmpty&&!n.$silent&&n._emit("changeSelection"),!n.$keepDesiredColumnOnChange&&l.old.column!=l.value.column&&(n.$desiredColumn=null)}),this.anchor.on("change",function(){n.$anchorChanged=!0,!n.$isEmpty&&!n.$silent&&n._emit("changeSelection")})}return o.prototype.isEmpty=function(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column},o.prototype.isMultiLine=function(){return!this.$isEmpty&&this.anchor.row!=this.cursor.row},o.prototype.getCursor=function(){return this.lead.getPosition()},o.prototype.setAnchor=function(i,n){this.$isEmpty=!1,this.anchor.setPosition(i,n)},o.prototype.getAnchor=function(){return this.$isEmpty?this.getSelectionLead():this.anchor.getPosition()},o.prototype.getSelectionLead=function(){return this.lead.getPosition()},o.prototype.isBackwards=function(){var i=this.anchor,n=this.lead;return i.row>n.row||i.row==n.row&&i.column>n.column},o.prototype.getRange=function(){var i=this.anchor,n=this.lead;return this.$isEmpty?a.fromPoints(n,n):this.isBackwards()?a.fromPoints(n,i):a.fromPoints(i,n)},o.prototype.clearSelection=function(){this.$isEmpty||(this.$isEmpty=!0,this._emit("changeSelection"))},o.prototype.selectAll=function(){this.$setSelection(0,0,Number.MAX_VALUE,Number.MAX_VALUE)},o.prototype.setRange=function(i,n){var l=n?i.end:i.start,s=n?i.start:i.end;this.$setSelection(l.row,l.column,s.row,s.column)},o.prototype.$setSelection=function(i,n,l,s){if(!this.$silent){var c=this.$isEmpty,m=this.inMultiSelectMode;this.$silent=!0,this.$cursorChanged=this.$anchorChanged=!1,this.anchor.setPosition(i,n),this.cursor.setPosition(l,s),this.$isEmpty=!a.comparePoints(this.anchor,this.cursor),this.$silent=!1,this.$cursorChanged&&this._emit("changeCursor"),(this.$cursorChanged||this.$anchorChanged||c!=this.$isEmpty||m)&&this._emit("changeSelection")}},o.prototype.$moveSelection=function(i){var n=this.lead;this.$isEmpty&&this.setSelectionAnchor(n.row,n.column),i.call(this)},o.prototype.selectTo=function(i,n){this.$moveSelection(function(){this.moveCursorTo(i,n)})},o.prototype.selectToPosition=function(i){this.$moveSelection(function(){this.moveCursorToPosition(i)})},o.prototype.moveTo=function(i,n){this.clearSelection(),this.moveCursorTo(i,n)},o.prototype.moveToPosition=function(i){this.clearSelection(),this.moveCursorToPosition(i)},o.prototype.selectUp=function(){this.$moveSelection(this.moveCursorUp)},o.prototype.selectDown=function(){this.$moveSelection(this.moveCursorDown)},o.prototype.selectRight=function(){this.$moveSelection(this.moveCursorRight)},o.prototype.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)},o.prototype.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)},o.prototype.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)},o.prototype.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)},o.prototype.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)},o.prototype.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)},o.prototype.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)},o.prototype.getWordRange=function(i,n){if(typeof n>"u"){var l=i||this.lead;i=l.row,n=l.column}return this.session.getWordRange(i,n)},o.prototype.selectWord=function(){this.setSelectionRange(this.getWordRange())},o.prototype.selectAWord=function(){var i=this.getCursor(),n=this.session.getAWordRange(i.row,i.column);this.setSelectionRange(n)},o.prototype.getLineRange=function(i,n){var l=typeof i=="number"?i:this.lead.row,s,c=this.session.getFoldLine(l);return c?(l=c.start.row,s=c.end.row):s=l,n===!0?new a(l,0,s,this.session.getLine(s).length):new a(l,0,s+1,0)},o.prototype.selectLine=function(){this.setSelectionRange(this.getLineRange())},o.prototype.moveCursorUp=function(){this.moveCursorBy(-1,0)},o.prototype.moveCursorDown=function(){this.moveCursorBy(1,0)},o.prototype.wouldMoveIntoSoftTab=function(i,n,l){var s=i.column,c=i.column+n;return l<0&&(s=i.column-n,c=i.column),this.session.isTabStop(i)&&this.doc.getLine(i.row).slice(s,c).split(" ").length-1==n},o.prototype.moveCursorLeft=function(){var i=this.lead.getPosition(),n;if(n=this.session.getFoldAt(i.row,i.column,-1))this.moveCursorTo(n.start.row,n.start.column);else if(i.column===0)i.row>0&&this.moveCursorTo(i.row-1,this.doc.getLine(i.row-1).length);else{var l=this.session.getTabSize();this.wouldMoveIntoSoftTab(i,l,-1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,-l):this.moveCursorBy(0,-1)}},o.prototype.moveCursorRight=function(){var i=this.lead.getPosition(),n;if(n=this.session.getFoldAt(i.row,i.column,1))this.moveCursorTo(n.end.row,n.end.column);else if(this.lead.column==this.doc.getLine(this.lead.row).length)this.lead.row<this.doc.getLength()-1&&this.moveCursorTo(this.lead.row+1,0);else{var l=this.session.getTabSize(),i=this.lead;this.wouldMoveIntoSoftTab(i,l,1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,l):this.moveCursorBy(0,1)}},o.prototype.moveCursorLineStart=function(){var i=this.lead.row,n=this.lead.column,l=this.session.documentToScreenRow(i,n),s=this.session.screenToDocumentPosition(l,0),c=this.session.getDisplayLine(i,null,s.row,s.column),m=c.match(/^\s*/);m[0].length!=n&&!this.session.$useEmacsStyleLineStart&&(s.column+=m[0].length),this.moveCursorToPosition(s)},o.prototype.moveCursorLineEnd=function(){var i=this.lead,n=this.session.getDocumentLastRowColumnPosition(i.row,i.column);if(this.lead.column==n.column){var l=this.session.getLine(n.row);if(n.column==l.length){var s=l.search(/\s+$/);s>0&&(n.column=s)}}this.moveCursorTo(n.row,n.column)},o.prototype.moveCursorFileEnd=function(){var i=this.doc.getLength()-1,n=this.doc.getLine(i).length;this.moveCursorTo(i,n)},o.prototype.moveCursorFileStart=function(){this.moveCursorTo(0,0)},o.prototype.moveCursorLongWordRight=function(){var i=this.lead.row,n=this.lead.column,l=this.doc.getLine(i),s=l.substring(n);this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;var c=this.session.getFoldAt(i,n,1);if(c){this.moveCursorTo(c.end.row,c.end.column);return}if(this.session.nonTokenRe.exec(s)&&(n+=this.session.nonTokenRe.lastIndex,this.session.nonTokenRe.lastIndex=0,s=l.substring(n)),n>=l.length){this.moveCursorTo(i,l.length),this.moveCursorRight(),i<this.doc.getLength()-1&&this.moveCursorWordRight();return}this.session.tokenRe.exec(s)&&(n+=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(i,n)},o.prototype.moveCursorLongWordLeft=function(){var i=this.lead.row,n=this.lead.column,l;if(l=this.session.getFoldAt(i,n,-1)){this.moveCursorTo(l.start.row,l.start.column);return}var s=this.session.getFoldStringAt(i,n,-1);s==null&&(s=this.doc.getLine(i).substring(0,n));var c=u.stringReverse(s);if(this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0,this.session.nonTokenRe.exec(c)&&(n-=this.session.nonTokenRe.lastIndex,c=c.slice(this.session.nonTokenRe.lastIndex),this.session.nonTokenRe.lastIndex=0),n<=0){this.moveCursorTo(i,0),this.moveCursorLeft(),i>0&&this.moveCursorWordLeft();return}this.session.tokenRe.exec(c)&&(n-=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(i,n)},o.prototype.$shortWordEndIndex=function(i){var n=0,l,s=/\s/,c=this.session.tokenRe;if(c.lastIndex=0,this.session.tokenRe.exec(i))n=this.session.tokenRe.lastIndex;else{for(;(l=i[n])&&s.test(l);)n++;if(n<1){for(c.lastIndex=0;(l=i[n])&&!c.test(l);)if(c.lastIndex=0,n++,s.test(l))if(n>2){n--;break}else{for(;(l=i[n])&&s.test(l);)n++;if(n>2)break}}}return c.lastIndex=0,n},o.prototype.moveCursorShortWordRight=function(){var i=this.lead.row,n=this.lead.column,l=this.doc.getLine(i),s=l.substring(n),c=this.session.getFoldAt(i,n,1);if(c)return this.moveCursorTo(c.end.row,c.end.column);if(n==l.length){var m=this.doc.getLength();do i++,s=this.doc.getLine(i);while(i<m&&/^\s*$/.test(s));/^\s+/.test(s)||(s=""),n=0}var h=this.$shortWordEndIndex(s);this.moveCursorTo(i,n+h)},o.prototype.moveCursorShortWordLeft=function(){var i=this.lead.row,n=this.lead.column,l;if(l=this.session.getFoldAt(i,n,-1))return this.moveCursorTo(l.start.row,l.start.column);var s=this.session.getLine(i).substring(0,n);if(n===0){do i--,s=this.doc.getLine(i);while(i>0&&/^\s*$/.test(s));n=s.length,/\s+$/.test(s)||(s="")}var c=u.stringReverse(s),m=this.$shortWordEndIndex(c);return this.moveCursorTo(i,n-m)},o.prototype.moveCursorWordRight=function(){this.session.$selectLongWords?this.moveCursorLongWordRight():this.moveCursorShortWordRight()},o.prototype.moveCursorWordLeft=function(){this.session.$selectLongWords?this.moveCursorLongWordLeft():this.moveCursorShortWordLeft()},o.prototype.moveCursorBy=function(i,n){var l=this.session.documentToScreenPosition(this.lead.row,this.lead.column),s;if(n===0&&(i!==0&&(this.session.$bidiHandler.isBidiRow(l.row,this.lead.row)?(s=this.session.$bidiHandler.getPosLeft(l.column),l.column=Math.round(s/this.session.$bidiHandler.charWidths[0])):s=l.column*this.session.$bidiHandler.charWidths[0]),this.$desiredColumn?l.column=this.$desiredColumn:this.$desiredColumn=l.column),i!=0&&this.session.lineWidgets&&this.session.lineWidgets[this.lead.row]){var c=this.session.lineWidgets[this.lead.row];i<0?i-=c.rowsAbove||0:i>0&&(i+=c.rowCount-(c.rowsAbove||0))}var m=this.session.screenToDocumentPosition(l.row+i,l.column,s);i!==0&&n===0&&m.row===this.lead.row&&(m.column,this.lead.column),this.moveCursorTo(m.row,m.column+n,n===0)},o.prototype.moveCursorToPosition=function(i){this.moveCursorTo(i.row,i.column)},o.prototype.moveCursorTo=function(i,n,l){var s=this.session.getFoldAt(i,n,1);s&&(i=s.start.row,n=s.start.column),this.$keepDesiredColumnOnChange=!0;var c=this.session.getLine(i);/[\uDC00-\uDFFF]/.test(c.charAt(n))&&c.charAt(n-1)&&(this.lead.row==i&&this.lead.column==n+1?n=n-1:n=n+1),this.lead.setPosition(i,n),this.$keepDesiredColumnOnChange=!1,l||(this.$desiredColumn=null)},o.prototype.moveCursorToScreen=function(i,n,l){var s=this.session.screenToDocumentPosition(i,n);this.moveCursorTo(s.row,s.column,l)},o.prototype.detach=function(){this.lead.detach(),this.anchor.detach()},o.prototype.fromOrientedRange=function(i){this.setSelectionRange(i,i.cursor==i.start),this.$desiredColumn=i.desiredColumn||this.$desiredColumn},o.prototype.toOrientedRange=function(i){var n=this.getRange();return i?(i.start.column=n.start.column,i.start.row=n.start.row,i.end.column=n.end.column,i.end.row=n.end.row):i=n,i.cursor=this.isBackwards()?i.start:i.end,i.desiredColumn=this.$desiredColumn,i},o.prototype.getRangeOfMovements=function(i){var n=this.getCursor();try{i(this);var l=this.getCursor();return a.fromPoints(n,l)}catch{return a.fromPoints(n,n)}finally{this.moveCursorToPosition(n)}},o.prototype.toJSON=function(){if(this.rangeCount)var i=this.ranges.map(function(n){var l=n.clone();return l.isBackwards=n.cursor==n.start,l});else{var i=this.getRange();i.isBackwards=this.isBackwards()}return i},o.prototype.fromJSON=function(i){if(i.start==null)if(this.rangeList&&i.length>1){this.toSingleRange(i[0]);for(var n=i.length;n--;){var l=a.fromPoints(i[n].start,i[n].end);i[n].isBackwards&&(l.cursor=l.start),this.addRange(l,!0)}return}else i=i[0];this.rangeList&&this.toSingleRange(i),this.setSelectionRange(i,i.isBackwards)},o.prototype.isEqual=function(i){if((i.length||this.rangeCount)&&i.length!=this.rangeCount)return!1;if(!i.length||!this.ranges)return this.getRange().isEqual(i);for(var n=this.ranges.length;n--;)if(!this.ranges[n].isEqual(i[n]))return!1;return!0},o}();p.prototype.setSelectionAnchor=p.prototype.setAnchor,p.prototype.getSelectionAnchor=p.prototype.getAnchor,p.prototype.setSelectionRange=p.prototype.setRange,d.implement(p.prototype,g),t.Selection=p});ace.define("ace/tokenizer",["require","exports","module","ace/lib/report_error"],function(e,t,r){"use strict";var d=e("./lib/report_error").reportError,u=2e3,g=function(){function a(p){this.splitRegex,this.states=p,this.regExps={},this.matchMappings={};for(var o in this.states){for(var i=this.states[o],n=[],l=0,s=this.matchMappings[o]={defaultToken:"text"},c="g",m=[],h=0;h<i.length;h++){var v=i[h];if(v.defaultToken&&(s.defaultToken=v.defaultToken),v.caseInsensitive&&c.indexOf("i")===-1&&(c+="i"),v.unicode&&c.indexOf("u")===-1&&(c+="u"),v.regex!=null){v.regex instanceof RegExp&&(v.regex=v.regex.toString().slice(1,-1));var k=v.regex,x=new RegExp("(?:("+k+")|(.))").exec("a").length-2;Array.isArray(v.token)?v.token.length==1||x==1?v.token=v.token[0]:x-1!=v.token.length?(this.reportError("number of classes and regexp groups doesn't match",{rule:v,groupCount:x-1}),v.token=v.token[0]):(v.tokenArray=v.token,v.token=null,v.onMatch=this.$arrayTokens):typeof v.token=="function"&&!v.onMatch&&(x>1?v.onMatch=this.$applyToken:v.onMatch=v.token),x>1&&(/\\\d/.test(v.regex)?k=v.regex.replace(/\\([0-9]+)/g,function(A,S){return"\\"+(parseInt(S,10)+l+1)}):(x=1,k=this.removeCapturingGroups(v.regex)),!v.splitRegex&&typeof v.token!="string"&&m.push(v)),s[l]=h,l+=x,n.push(k),v.onMatch||(v.onMatch=null)}}n.length||(s[0]=0,n.push("$")),m.forEach(function(A){A.splitRegex=this.createSplitterRegexp(A.regex,c)},this),this.regExps[o]=new RegExp("("+n.join(")|(")+")|($)",c)}}return a.prototype.$setMaxTokenCount=function(p){u=p|0},a.prototype.$applyToken=function(p){var o=this.splitRegex.exec(p).slice(1),i=this.token.apply(this,o);if(typeof i=="string")return[{type:i,value:p}];for(var n=[],l=0,s=i.length;l<s;l++)o[l]&&(n[n.length]={type:i[l],value:o[l]});return n},a.prototype.$arrayTokens=function(p){if(!p)return[];var o=this.splitRegex.exec(p);if(!o)return"text";for(var i=[],n=this.tokenArray,l=0,s=n.length;l<s;l++)o[l+1]&&(i[i.length]={type:n[l],value:o[l+1]});return i},a.prototype.removeCapturingGroups=function(p){var o=p.replace(/\\.|\[(?:\\.|[^\\\]])*|\(\?[:=!<]|(\()/g,function(i,n){return n?"(?:":i});return o},a.prototype.createSplitterRegexp=function(p,o){if(p.indexOf("(?=")!=-1){var i=0,n=!1,l={};p.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g,function(s,c,m,h,v,k){return n?n=v!="]":v?n=!0:h?(i==l.stack&&(l.end=k+1,l.stack=-1),i--):m&&(i++,m.length!=1&&(l.stack=i,l.start=k)),s}),l.end!=null&&/^\)*$/.test(p.substr(l.end))&&(p=p.substring(0,l.start)+p.substr(l.end))}return p.charAt(0)!="^"&&(p="^"+p),p.charAt(p.length-1)!="$"&&(p+="$"),new RegExp(p,(o||"").replace("g",""))},a.prototype.getLineTokens=function(p,o){if(o&&typeof o!="string"){var i=o.slice(0);o=i[0],o==="#tmp"&&(i.shift(),o=i.shift())}else var i=[];var n=o||"start",l=this.states[n];l||(n="start",l=this.states[n]);var s=this.matchMappings[n],c=this.regExps[n];c.lastIndex=0;for(var m,h=[],v=0,k=0,x={type:null,value:""};m=c.exec(p);){var A=s.defaultToken,S=null,f=m[0],L=c.lastIndex;if(L-f.length>v){var $=p.substring(v,L-f.length);x.type==A?x.value+=$:(x.type&&h.push(x),x={type:A,value:$})}for(var T=0;T<m.length-2;T++)if(m[T+1]!==void 0){S=l[s[T]],S.onMatch?A=S.onMatch(f,n,i,p):A=S.token,S.next&&(typeof S.next=="string"?n=S.next:n=S.next(n,i),l=this.states[n],l||(this.reportError("state doesn't exist",n),n="start",l=this.states[n]),s=this.matchMappings[n],v=L,c=this.regExps[n],c.lastIndex=L),S.consumeLineEnd&&(v=L);break}if(f){if(typeof A=="string")(!S||S.merge!==!1)&&x.type===A?x.value+=f:(x.type&&h.push(x),x={type:A,value:f});else if(A){x.type&&h.push(x),x={type:null,value:""};for(var T=0;T<A.length;T++)h.push(A[T])}}if(v==p.length)break;if(v=L,k++>u){for(k>2*p.length&&this.reportError("infinite loop with in ace tokenizer",{startState:o,line:p});v<p.length;)x.type&&h.push(x),x={value:p.substring(v,v+=500),type:"overflow"};n="start",i=[];break}}return x.type&&h.push(x),i.length>1&&i[0]!==n&&i.unshift("#tmp",n),{tokens:h,state:i.length?i:n}},a}();g.prototype.reportError=d,t.Tokenizer=g});ace.define("ace/mode/text_highlight_rules",["require","exports","module","ace/lib/deep_copy"],function(e,t,r){"use strict";var d=e("../lib/deep_copy").deepCopy,u;u=function(){this.$rules={start:[{token:"empty_line",regex:"^$"},{defaultToken:"text"}]}},function(){this.addRules=function(p,o){if(!o){for(var i in p)this.$rules[i]=p[i];return}for(var i in p){for(var n=p[i],l=0;l<n.length;l++){var s=n[l];(s.next||s.onMatch)&&(typeof s.next=="string"&&s.next.indexOf(o)!==0&&(s.next=o+s.next),s.nextState&&s.nextState.indexOf(o)!==0&&(s.nextState=o+s.nextState))}this.$rules[o+i]=n}},this.getRules=function(){return this.$rules},this.embedRules=function(p,o,i,n,l){var s=typeof p=="function"?new p().getRules():p;if(n)for(var c=0;c<n.length;c++)n[c]=o+n[c];else{n=[];for(var m in s)n.push(o+m)}if(this.addRules(s,o),i)for(var h=Array.prototype[l?"push":"unshift"],c=0;c<n.length;c++)h.apply(this.$rules[n[c]],d(i));this.$embeds||(this.$embeds=[]),this.$embeds.push(o)},this.getEmbeds=function(){return this.$embeds};var g=function(p,o){return(p!="start"||o.length)&&o.unshift(this.nextState,p),this.nextState},a=function(p,o){return o.shift(),o.shift()||"start"};this.normalizeRules=function(){var p=0,o=this.$rules;function i(n){var l=o[n];l.processed=!0;for(var s=0;s<l.length;s++){var c=l[s],m=null;Array.isArray(c)&&(m=c,c={}),!c.regex&&c.start&&(c.regex=c.start,c.next||(c.next=[]),c.next.push({defaultToken:c.token},{token:c.token+".end",regex:c.end||c.start,next:"pop"}),c.token=c.token+".start",c.push=!0);var h=c.next||c.push;if(h&&Array.isArray(h)){var v=c.stateName;v||(v=c.token,typeof v!="string"&&(v=v[0]||""),o[v]&&(v+=p++)),o[v]=h,c.next=v,i(v)}else h=="pop"&&(c.next=a);if(c.push&&(c.nextState=c.next||c.push,c.next=g,delete c.push),c.rules)for(var k in c.rules)o[k]?o[k].push&&o[k].push.apply(o[k],c.rules[k]):o[k]=c.rules[k];var x=typeof c=="string"?c:c.include;if(x&&(x==="$self"&&(x="start"),Array.isArray(x)?m=x.map(function(S){return o[S]}):m=o[x]),m){var A=[s,1].concat(m);c.noEscape&&(A=A.filter(function(S){return!S.next})),l.splice.apply(l,A),s--}c.keywordMap&&(c.token=this.createKeywordMapper(c.keywordMap,c.defaultToken||"text",c.caseInsensitive),delete c.defaultToken)}}Object.keys(o).forEach(i,this)},this.createKeywordMapper=function(p,o,i,n){var l=Object.create(null);return this.$keywordList=[],Object.keys(p).forEach(function(s){for(var c=p[s],m=c.split(n||"|"),h=m.length;h--;){var v=m[h];this.$keywordList.push(v),i&&(v=v.toLowerCase()),l[v]=s}},this),p=null,i?function(s){return l[s.toLowerCase()]||o}:function(s){return l[s]||o}},this.getKeywords=function(){return this.$keywords}}.call(u.prototype),t.TextHighlightRules=u});ace.define("ace/mode/behaviour",["require","exports","module"],function(e,t,r){"use strict";var d;d=function(){this.$behaviours={}},function(){this.add=function(u,g,a){switch(void 0){case this.$behaviours:this.$behaviours={};case this.$behaviours[u]:this.$behaviours[u]={}}this.$behaviours[u][g]=a},this.addBehaviours=function(u){for(var g in u)for(var a in u[g])this.add(g,a,u[g][a])},this.remove=function(u){this.$behaviours&&this.$behaviours[u]&&delete this.$behaviours[u]},this.inherit=function(u,g){if(typeof u=="function")var a=new u().getBehaviours(g);else var a=u.getBehaviours(g);this.addBehaviours(a)},this.getBehaviours=function(u){if(u){for(var g={},a=0;a<u.length;a++)this.$behaviours[u[a]]&&(g[u[a]]=this.$behaviours[u[a]]);return g}else return this.$behaviours}}.call(d.prototype),t.Behaviour=d});ace.define("ace/token_iterator",["require","exports","module","ace/range"],function(e,t,r){"use strict";var d=e("./range").Range,u=function(){function g(a,p,o){this.$session=a,this.$row=p,this.$rowTokens=a.getTokens(p);var i=a.getTokenAt(p,o);this.$tokenIndex=i?i.index:-1}return g.prototype.stepBackward=function(){for(this.$tokenIndex-=1;this.$tokenIndex<0;){if(this.$row-=1,this.$row<0)return this.$row=0,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]},g.prototype.stepForward=function(){this.$tokenIndex+=1;for(var a;this.$tokenIndex>=this.$rowTokens.length;){if(this.$row+=1,a||(a=this.$session.getLength()),this.$row>=a)return this.$row=a-1,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]},g.prototype.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]},g.prototype.getCurrentTokenRow=function(){return this.$row},g.prototype.getCurrentTokenColumn=function(){var a=this.$rowTokens,p=this.$tokenIndex,o=a[p].start;if(o!==void 0)return o;for(o=0;p>0;)p-=1,o+=a[p].value.length;return o},g.prototype.getCurrentTokenPosition=function(){return{row:this.$row,column:this.getCurrentTokenColumn()}},g.prototype.getCurrentTokenRange=function(){var a=this.$rowTokens[this.$tokenIndex],p=this.getCurrentTokenColumn();return new d(this.$row,p,this.$row,p+a.value.length)},g}();t.TokenIterator=u});ace.define("ace/mode/behaviour/cstyle",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator","ace/lib/lang"],function(e,t,r){"use strict";var d=e("../../lib/oop"),u=e("../behaviour").Behaviour,g=e("../../token_iterator").TokenIterator,a=e("../../lib/lang"),p=["text","paren.rparen","rparen","paren","punctuation.operator"],o=["text","paren.rparen","rparen","paren","punctuation.operator","comment"],i,n={},l={'"':'"',"'":"'"},s=function(h){var v=-1;if(h.multiSelect&&(v=h.selection.index,n.rangeCount!=h.multiSelect.rangeCount&&(n={rangeCount:h.multiSelect.rangeCount})),n[v])return i=n[v];i=n[v]={autoInsertedBrackets:0,autoInsertedRow:-1,autoInsertedLineEnd:"",maybeInsertedBrackets:0,maybeInsertedRow:-1,maybeInsertedLineStart:"",maybeInsertedLineEnd:""}},c=function(h,v,k,x){var A=h.end.row-h.start.row;return{text:k+v+x,selection:[0,h.start.column+1,A,h.end.column+(A?0:1)]}},m;m=function(h){h=h||{},this.add("braces","insertion",function(v,k,x,A,S){var f=x.getCursorPosition(),L=A.doc.getLine(f.row);if(S=="{"){s(x);var $=x.getSelectionRange(),T=A.doc.getTextRange($),C=A.getTokenAt(f.row,f.column);if(T!==""&&T!=="{"&&x.getWrapBehavioursEnabled())return c($,T,"{","}");if(C&&/(?:string)\.quasi|\.xml/.test(C.type)){var w=[/tag\-(?:open|name)/,/attribute\-name/];return w.some(function(I){return I.test(C.type)})||/(string)\.quasi/.test(C.type)&&C.value[f.column-C.start-1]!=="$"?void 0:(m.recordAutoInsert(x,A,"}"),{text:"{}",selection:[1,1]})}else if(m.isSaneInsertion(x,A))return/[\]\}\)]/.test(L[f.column])||x.inMultiSelectMode||h.braces?(m.recordAutoInsert(x,A,"}"),{text:"{}",selection:[1,1]}):(m.recordMaybeInsert(x,A,"{"),{text:"{",selection:[1,1]})}else if(S=="}"){s(x);var y=L.substring(f.column,f.column+1);if(y=="}"){var b=A.$findOpeningBracket("}",{column:f.column+1,row:f.row});if(b!==null&&m.isAutoInsertedClosing(f,L,S))return m.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}else if(S==`
`||S==`\r
`){s(x);var _="";m.isMaybeInsertedClosing(f,L)&&(_=a.stringRepeat("}",i.maybeInsertedBrackets),m.clearMaybeInsertedClosing());var y=L.substring(f.column,f.column+1);if(y==="}"){var E=A.findMatchingBracket({row:f.row,column:f.column+1},"}");if(!E)return null;var R=this.$getIndent(A.getLine(E.row))}else if(_)var R=this.$getIndent(L);else{m.clearMaybeInsertedClosing();return}var M=R+A.getTabString();return{text:`
`+M+`
`+R+_,selection:[1,M.length,1,M.length]}}else m.clearMaybeInsertedClosing()}),this.add("braces","deletion",function(v,k,x,A,S){var f=A.doc.getTextRange(S);if(!S.isMultiLine()&&f=="{"){s(x);var L=A.doc.getLine(S.start.row),$=L.substring(S.end.column,S.end.column+1);if($=="}")return S.end.column++,S;i.maybeInsertedBrackets--}}),this.add("parens","insertion",function(v,k,x,A,S){if(S=="("){s(x);var f=x.getSelectionRange(),L=A.doc.getTextRange(f);if(L!==""&&x.getWrapBehavioursEnabled())return c(f,L,"(",")");if(m.isSaneInsertion(x,A))return m.recordAutoInsert(x,A,")"),{text:"()",selection:[1,1]}}else if(S==")"){s(x);var $=x.getCursorPosition(),T=A.doc.getLine($.row),C=T.substring($.column,$.column+1);if(C==")"){var w=A.$findOpeningBracket(")",{column:$.column+1,row:$.row});if(w!==null&&m.isAutoInsertedClosing($,T,S))return m.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("parens","deletion",function(v,k,x,A,S){var f=A.doc.getTextRange(S);if(!S.isMultiLine()&&f=="("){s(x);var L=A.doc.getLine(S.start.row),$=L.substring(S.start.column+1,S.start.column+2);if($==")")return S.end.column++,S}}),this.add("brackets","insertion",function(v,k,x,A,S){if(S=="["){s(x);var f=x.getSelectionRange(),L=A.doc.getTextRange(f);if(L!==""&&x.getWrapBehavioursEnabled())return c(f,L,"[","]");if(m.isSaneInsertion(x,A))return m.recordAutoInsert(x,A,"]"),{text:"[]",selection:[1,1]}}else if(S=="]"){s(x);var $=x.getCursorPosition(),T=A.doc.getLine($.row),C=T.substring($.column,$.column+1);if(C=="]"){var w=A.$findOpeningBracket("]",{column:$.column+1,row:$.row});if(w!==null&&m.isAutoInsertedClosing($,T,S))return m.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("brackets","deletion",function(v,k,x,A,S){var f=A.doc.getTextRange(S);if(!S.isMultiLine()&&f=="["){s(x);var L=A.doc.getLine(S.start.row),$=L.substring(S.start.column+1,S.start.column+2);if($=="]")return S.end.column++,S}}),this.add("string_dquotes","insertion",function(v,k,x,A,S){var f=A.$mode.$quotes||l;if(S.length==1&&f[S]){if(this.lineCommentStart&&this.lineCommentStart.indexOf(S)!=-1)return;s(x);var L=S,$=x.getSelectionRange(),T=A.doc.getTextRange($);if(T!==""&&(T.length!=1||!f[T])&&x.getWrapBehavioursEnabled())return c($,T,L,L);if(!T){var C=x.getCursorPosition(),w=A.doc.getLine(C.row),y=w.substring(C.column-1,C.column),b=w.substring(C.column,C.column+1),_=A.getTokenAt(C.row,C.column),E=A.getTokenAt(C.row,C.column+1);if(y=="\\"&&_&&/escape/.test(_.type))return null;var R=_&&/string|escape/.test(_.type),M=!E||/string|escape/.test(E.type),I;if(b==L)I=R!==M,I&&/string\.end/.test(E.type)&&(I=!1);else{if(R&&!M||R&&M)return null;var P=A.$mode.tokenRe;P.lastIndex=0;var O=P.test(y);P.lastIndex=0;var N=P.test(b),D=A.$mode.$pairQuotesAfter,F=D&&D[L]&&D[L].test(y);if(!F&&O||N||b&&!/[\s;,.})\]\\]/.test(b))return null;var z=w[C.column-2];if(y==L&&(z==L||P.test(z)))return null;I=!0}return{text:I?L+L:"",selection:[1,1]}}}}),this.add("string_dquotes","deletion",function(v,k,x,A,S){var f=A.$mode.$quotes||l,L=A.doc.getTextRange(S);if(!S.isMultiLine()&&f.hasOwnProperty(L)){s(x);var $=A.doc.getLine(S.start.row),T=$.substring(S.start.column+1,S.start.column+2);if(T==L)return S.end.column++,S}}),h.closeDocComment!==!1&&this.add("doc comment end","insertion",function(v,k,x,A,S){if(v==="doc-start"&&(S===`
`||S===`\r
`)&&x.selection.isEmpty()){var f=x.getCursorPosition();if(f.column===0)return;for(var L=A.doc.getLine(f.row),$=A.doc.getLine(f.row+1),T=A.getTokens(f.row),C=0,w=0;w<T.length;w++){C+=T[w].value.length;var y=T[w];if(C>=f.column){if(C===f.column){if(!/\.doc/.test(y.type))return;if(/\*\//.test(y.value)){var b=T[w+1];if(!b||!/\.doc/.test(b.type))return}}var _=f.column-(C-y.value.length),E=y.value.indexOf("*/"),R=y.value.indexOf("/**",E>-1?E+2:0);if(R!==-1&&_>R&&_<R+3||E!==-1&&R!==-1&&_>=E&&_<=R||!/\.doc/.test(y.type))return;break}}var M=this.$getIndent(L);if(/\s*\*/.test($))return/^\s*\*/.test(L)?{text:S+M+"* ",selection:[1,2+M.length,1,2+M.length]}:{text:S+M+" * ",selection:[1,3+M.length,1,3+M.length]};if(/\/\*\*/.test(L.substring(0,f.column)))return{text:S+M+" * "+S+" "+M+"*/",selection:[1,4+M.length,1,4+M.length]}}})},m.isSaneInsertion=function(h,v){var k=h.getCursorPosition(),x=new g(v,k.row,k.column);if(!this.$matchTokenType(x.getCurrentToken()||"text",p)){if(/[)}\]]/.test(h.session.getLine(k.row)[k.column]))return!0;var A=new g(v,k.row,k.column+1);if(!this.$matchTokenType(A.getCurrentToken()||"text",p))return!1}return x.stepForward(),x.getCurrentTokenRow()!==k.row||this.$matchTokenType(x.getCurrentToken()||"text",o)},m.$matchTokenType=function(h,v){return v.indexOf(h.type||h)>-1},m.recordAutoInsert=function(h,v,k){var x=h.getCursorPosition(),A=v.doc.getLine(x.row);this.isAutoInsertedClosing(x,A,i.autoInsertedLineEnd[0])||(i.autoInsertedBrackets=0),i.autoInsertedRow=x.row,i.autoInsertedLineEnd=k+A.substr(x.column),i.autoInsertedBrackets++},m.recordMaybeInsert=function(h,v,k){var x=h.getCursorPosition(),A=v.doc.getLine(x.row);this.isMaybeInsertedClosing(x,A)||(i.maybeInsertedBrackets=0),i.maybeInsertedRow=x.row,i.maybeInsertedLineStart=A.substr(0,x.column)+k,i.maybeInsertedLineEnd=A.substr(x.column),i.maybeInsertedBrackets++},m.isAutoInsertedClosing=function(h,v,k){return i.autoInsertedBrackets>0&&h.row===i.autoInsertedRow&&k===i.autoInsertedLineEnd[0]&&v.substr(h.column)===i.autoInsertedLineEnd},m.isMaybeInsertedClosing=function(h,v){return i.maybeInsertedBrackets>0&&h.row===i.maybeInsertedRow&&v.substr(h.column)===i.maybeInsertedLineEnd&&v.substr(0,h.column)==i.maybeInsertedLineStart},m.popAutoInsertedClosing=function(){i.autoInsertedLineEnd=i.autoInsertedLineEnd.substr(1),i.autoInsertedBrackets--},m.clearMaybeInsertedClosing=function(){i&&(i.maybeInsertedBrackets=0,i.maybeInsertedRow=-1)},d.inherits(m,u),t.CstyleBehaviour=m});ace.define("ace/unicode",["require","exports","module"],function(e,t,r){"use strict";for(var d=[48,9,8,25,5,0,2,25,48,0,11,0,5,0,6,22,2,30,2,457,5,11,15,4,8,0,2,0,18,116,2,1,3,3,9,0,2,2,2,0,2,19,2,82,2,138,2,4,3,155,12,37,3,0,8,38,10,44,2,0,2,1,2,1,2,0,9,26,6,2,30,10,7,61,2,9,5,101,2,7,3,9,2,18,3,0,17,58,3,100,15,53,5,0,6,45,211,57,3,18,2,5,3,11,3,9,2,1,7,6,2,2,2,7,3,1,3,21,2,6,2,0,4,3,3,8,3,1,3,3,9,0,5,1,2,4,3,11,16,2,2,5,5,1,3,21,2,6,2,1,2,1,2,1,3,0,2,4,5,1,3,2,4,0,8,3,2,0,8,15,12,2,2,8,2,2,2,21,2,6,2,1,2,4,3,9,2,2,2,2,3,0,16,3,3,9,18,2,2,7,3,1,3,21,2,6,2,1,2,4,3,8,3,1,3,2,9,1,5,1,2,4,3,9,2,0,17,1,2,5,4,2,2,3,4,1,2,0,2,1,4,1,4,2,4,11,5,4,4,2,2,3,3,0,7,0,15,9,18,2,2,7,2,2,2,22,2,9,2,4,4,7,2,2,2,3,8,1,2,1,7,3,3,9,19,1,2,7,2,2,2,22,2,9,2,4,3,8,2,2,2,3,8,1,8,0,2,3,3,9,19,1,2,7,2,2,2,22,2,15,4,7,2,2,2,3,10,0,9,3,3,9,11,5,3,1,2,17,4,23,2,8,2,0,3,6,4,0,5,5,2,0,2,7,19,1,14,57,6,14,2,9,40,1,2,0,3,1,2,0,3,0,7,3,2,6,2,2,2,0,2,0,3,1,2,12,2,2,3,4,2,0,2,5,3,9,3,1,35,0,24,1,7,9,12,0,2,0,2,0,5,9,2,35,5,19,2,5,5,7,2,35,10,0,58,73,7,77,3,37,11,42,2,0,4,328,2,3,3,6,2,0,2,3,3,40,2,3,3,32,2,3,3,6,2,0,2,3,3,14,2,56,2,3,3,66,5,0,33,15,17,84,13,619,3,16,2,25,6,74,22,12,2,6,12,20,12,19,13,12,2,2,2,1,13,51,3,29,4,0,5,1,3,9,34,2,3,9,7,87,9,42,6,69,11,28,4,11,5,11,11,39,3,4,12,43,5,25,7,10,38,27,5,62,2,28,3,10,7,9,14,0,89,75,5,9,18,8,13,42,4,11,71,55,9,9,4,48,83,2,2,30,14,230,23,280,3,5,3,37,3,5,3,7,2,0,2,0,2,0,2,30,3,52,2,6,2,0,4,2,2,6,4,3,3,5,5,12,6,2,2,6,67,1,20,0,29,0,14,0,17,4,60,12,5,0,4,11,18,0,5,0,3,9,2,0,4,4,7,0,2,0,2,0,2,3,2,10,3,3,6,4,5,0,53,1,2684,46,2,46,2,132,7,6,15,37,11,53,10,0,17,22,10,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,31,48,0,470,1,36,5,2,4,6,1,5,85,3,1,3,2,2,89,2,3,6,40,4,93,18,23,57,15,513,6581,75,20939,53,1164,68,45,3,268,4,27,21,31,3,13,13,1,2,24,9,69,11,1,38,8,3,102,3,1,111,44,25,51,13,68,12,9,7,23,4,0,5,45,3,35,13,28,4,64,15,10,39,54,10,13,3,9,7,22,4,1,5,66,25,2,227,42,2,1,3,9,7,11171,13,22,5,48,8453,301,3,61,3,105,39,6,13,4,6,11,2,12,2,4,2,0,2,1,2,1,2,107,34,362,19,63,3,53,41,11,5,15,17,6,13,1,25,2,33,4,2,134,20,9,8,25,5,0,2,25,12,88,4,5,3,5,3,5,3,2],u=0,g=[],a=0;a<d.length;a+=2)g.push(u+=d[a]),d[a+1]&&g.push(45,u+=d[a+1]);t.wordChars=String.fromCharCode.apply(null,g)});ace.define("ace/mode/text",["require","exports","module","ace/config","ace/tokenizer","ace/mode/text_highlight_rules","ace/mode/behaviour/cstyle","ace/unicode","ace/lib/lang","ace/token_iterator","ace/range"],function(e,t,r){"use strict";var d=e("../config"),u=e("../tokenizer").Tokenizer,g=e("./text_highlight_rules").TextHighlightRules,a=e("./behaviour/cstyle").CstyleBehaviour,p=e("../unicode"),o=e("../lib/lang"),i=e("../token_iterator").TokenIterator,n=e("../range").Range,l;l=function(){this.HighlightRules=g},function(){this.$defaultBehaviour=new a,this.tokenRe=new RegExp("^["+p.wordChars+"\\$_]+","g"),this.nonTokenRe=new RegExp("^(?:[^"+p.wordChars+"\\$_]|\\s])+","g"),this.getTokenizer=function(){return this.$tokenizer||(this.$highlightRules=this.$highlightRules||new this.HighlightRules(this.$highlightRuleConfig),this.$tokenizer=new u(this.$highlightRules.getRules())),this.$tokenizer},this.lineCommentStart="",this.blockComment="",this.toggleCommentLines=function(s,c,m,h){var v=c.doc,k=!0,x=!0,A=1/0,S=c.getTabSize(),f=!1;if(this.lineCommentStart){if(Array.isArray(this.lineCommentStart))var T=this.lineCommentStart.map(o.escapeRegExp).join("|"),L=this.lineCommentStart[0];else var T=o.escapeRegExp(this.lineCommentStart),L=this.lineCommentStart;T=new RegExp("^(\\s*)(?:"+T+") ?"),f=c.getUseSoftTabs();var y=function(N,D){var F=N.match(T);if(F){var z=F[1].length,W=F[0].length;!E(N,z,W)&&F[0][W-1]==" "&&W--,v.removeInLine(D,z,W)}},_=L+" ",w=function(N,D){(!k||/\S/.test(N))&&(E(N,A,A)?v.insertInLine({row:D,column:A},_):v.insertInLine({row:D,column:A},L))},b=function(N,D){return T.test(N)},E=function(N,D,F){for(var z=0;D--&&N.charAt(D)==" ";)z++;if(z%S!=0)return!1;for(var z=0;N.charAt(F++)==" ";)z++;return S>2?z%S!=S-1:z%S==0}}else{if(!this.blockComment)return!1;var L=this.blockComment.start,$=this.blockComment.end,T=new RegExp("^(\\s*)(?:"+o.escapeRegExp(L)+")"),C=new RegExp("(?:"+o.escapeRegExp($)+")\\s*$"),w=function(I,P){b(I,P)||(!k||/\S/.test(I))&&(v.insertInLine({row:P,column:I.length},$),v.insertInLine({row:P,column:A},L))},y=function(I,P){var O;(O=I.match(C))&&v.removeInLine(P,I.length-O[0].length,I.length),(O=I.match(T))&&v.removeInLine(P,O[1].length,O[0].length)},b=function(I,P){if(T.test(I))return!0;for(var O=c.getTokens(P),N=0;N<O.length;N++)if(O[N].type==="comment")return!0}}function R(I){for(var P=m;P<=h;P++)I(v.getLine(P),P)}var M=1/0;R(function(I,P){var O=I.search(/\S/);O!==-1?(O<A&&(A=O),x&&!b(I,P)&&(x=!1)):M>I.length&&(M=I.length)}),A==1/0&&(A=M,k=!1,x=!1),f&&A%S!=0&&(A=Math.floor(A/S)*S),R(x?y:w)},this.toggleBlockComment=function(s,c,m,h){var v=this.blockComment;if(v){!v.start&&v[0]&&(v=v[0]);var k=new i(c,h.row,h.column),x=k.getCurrentToken(),A=c.selection,S=c.selection.toOrientedRange(),f,L;if(x&&/comment/.test(x.type)){for(var $,T;x&&/comment/.test(x.type);){var C=x.value.indexOf(v.start);if(C!=-1){var w=k.getCurrentTokenRow(),y=k.getCurrentTokenColumn()+C;$=new n(w,y,w,y+v.start.length);break}x=k.stepBackward()}for(var k=new i(c,h.row,h.column),x=k.getCurrentToken();x&&/comment/.test(x.type);){var C=x.value.indexOf(v.end);if(C!=-1){var w=k.getCurrentTokenRow(),y=k.getCurrentTokenColumn()+C;T=new n(w,y,w,y+v.end.length);break}x=k.stepForward()}T&&c.remove(T),$&&(c.remove($),f=$.start.row,L=-v.start.length)}else L=v.start.length,f=m.start.row,c.insert(m.end,v.end),c.insert(m.start,v.start);S.start.row==f&&(S.start.column+=L),S.end.row==f&&(S.end.column+=L),c.selection.fromOrientedRange(S)}},this.getNextLineIndent=function(s,c,m){return this.$getIndent(c)},this.checkOutdent=function(s,c,m){return!1},this.autoOutdent=function(s,c,m){},this.$getIndent=function(s){return s.match(/^\s*/)[0]},this.createWorker=function(s){return null},this.createModeDelegates=function(s){this.$embeds=[],this.$modes={};for(var c in s)if(s[c]){var m=s[c],h=m.prototype.$id,v=d.$modes[h];v||(d.$modes[h]=v=new m),d.$modes[c]||(d.$modes[c]=v),this.$embeds.push(c),this.$modes[c]=v}for(var k=["toggleBlockComment","toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction","getCompletions"],x=function(S){(function(f){var L=k[S],$=f[L];f[k[S]]=function(){return this.$delegator(L,arguments,$)}})(A)},A=this,c=0;c<k.length;c++)x(c)},this.$delegator=function(s,c,m){var h=c[0]||"start";if(typeof h!="string"){if(Array.isArray(h[2])){var v=h[2][h[2].length-1],k=this.$modes[v];if(k)return k[s].apply(k,[h[1]].concat([].slice.call(c,1)))}h=h[0]||"start"}for(var x=0;x<this.$embeds.length;x++)if(this.$modes[this.$embeds[x]]){var A=h.split(this.$embeds[x]);if(!A[0]&&A[1]){c[0]=A[1];var k=this.$modes[this.$embeds[x]];return k[s].apply(k,c)}}var S=m.apply(this,c);return m?S:void 0},this.transformAction=function(s,c,m,h,v){if(this.$behaviour){var k=this.$behaviour.getBehaviours();for(var x in k)if(k[x][c]){var A=k[x][c].apply(this,arguments);if(A)return A}}},this.getKeywords=function(s){if(!this.completionKeywords){var c=this.$tokenizer.rules,m=[];for(var h in c)for(var v=c[h],k=0,x=v.length;k<x;k++)if(typeof v[k].token=="string")/keyword|support|storage/.test(v[k].token)&&m.push(v[k].regex);else if(typeof v[k].token=="object"){for(var A=0,S=v[k].token.length;A<S;A++)if(/keyword|support|storage/.test(v[k].token[A])){var h=v[k].regex.match(/\(.+?\)/g)[A];m.push(h.substr(1,h.length-2))}}this.completionKeywords=m}return s?m.concat(this.$keywordList||[]):this.$keywordList},this.$createKeywordList=function(){return this.$highlightRules||this.getTokenizer(),this.$keywordList=this.$highlightRules.$keywordList||[]},this.getCompletions=function(s,c,m,h){var v=this.$keywordList||this.$createKeywordList();return v.map(function(k){return{name:k,value:k,score:0,meta:"keyword"}})},this.$id="ace/mode/text"}.call(l.prototype),t.Mode=l});ace.define("ace/apply_delta",["require","exports","module"],function(e,t,r){"use strict";function d(a,p){throw console.log("Invalid Delta:",a),"Invalid Delta: "+p}function u(a,p){return p.row>=0&&p.row<a.length&&p.column>=0&&p.column<=a[p.row].length}function g(a,p){p.action!="insert"&&p.action!="remove"&&d(p,"delta.action must be 'insert' or 'remove'"),p.lines instanceof Array||d(p,"delta.lines must be an Array"),(!p.start||!p.end)&&d(p,"delta.start/end must be an present");var o=p.start;u(a,p.start)||d(p,"delta.start must be contained in document");var i=p.end;p.action=="remove"&&!u(a,i)&&d(p,"delta.end must contained in document for 'remove' actions");var n=i.row-o.row,l=i.column-(n==0?o.column:0);(n!=p.lines.length-1||p.lines[n].length!=l)&&d(p,"delta.range must match delta lines")}t.applyDelta=function(a,p,o){var i=p.start.row,n=p.start.column,l=a[i]||"";switch(p.action){case"insert":var s=p.lines;if(s.length===1)a[i]=l.substring(0,n)+p.lines[0]+l.substring(n);else{var c=[i,1].concat(p.lines);a.splice.apply(a,c),a[i]=l.substring(0,n)+a[i],a[i+p.lines.length-1]+=l.substring(n)}break;case"remove":var m=p.end.column,h=p.end.row;i===h?a[i]=l.substring(0,n)+l.substring(m):a.splice(i,h-i+1,l.substring(0,n)+a[h].substring(m));break}}});ace.define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t,r){"use strict";var d=e("./lib/oop"),u=e("./lib/event_emitter").EventEmitter,g=function(){function o(i,n,l){this.$onChange=this.onChange.bind(this),this.attach(i),typeof n!="number"?this.setPosition(n.row,n.column):this.setPosition(n,l)}return o.prototype.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},o.prototype.getDocument=function(){return this.document},o.prototype.onChange=function(i){if(!(i.start.row==i.end.row&&i.start.row!=this.row)&&!(i.start.row>this.row)){var n=p(i,{row:this.row,column:this.column},this.$insertRight);this.setPosition(n.row,n.column,!0)}},o.prototype.setPosition=function(i,n,l){var s;if(l?s={row:i,column:n}:s=this.$clipPositionToDocument(i,n),!(this.row==s.row&&this.column==s.column)){var c={row:this.row,column:this.column};this.row=s.row,this.column=s.column,this._signal("change",{old:c,value:s})}},o.prototype.detach=function(){this.document.off("change",this.$onChange)},o.prototype.attach=function(i){this.document=i||this.document,this.document.on("change",this.$onChange)},o.prototype.$clipPositionToDocument=function(i,n){var l={};return i>=this.document.getLength()?(l.row=Math.max(0,this.document.getLength()-1),l.column=this.document.getLine(l.row).length):i<0?(l.row=0,l.column=0):(l.row=i,l.column=Math.min(this.document.getLine(l.row).length,Math.max(0,n))),n<0&&(l.column=0),l},o}();g.prototype.$insertRight=!1,d.implement(g.prototype,u);function a(o,i,n){var l=n?o.column<=i.column:o.column<i.column;return o.row<i.row||o.row==i.row&&l}function p(o,i,n){var l=o.action=="insert",s=(l?1:-1)*(o.end.row-o.start.row),c=(l?1:-1)*(o.end.column-o.start.column),m=o.start,h=l?m:o.end;return a(i,m,n)?{row:i.row,column:i.column}:a(h,i,!n)?{row:i.row+s,column:i.column+(i.row==h.row?c:0)}:{row:m.row,column:m.column}}t.Anchor=g});ace.define("ace/document",["require","exports","module","ace/lib/oop","ace/apply_delta","ace/lib/event_emitter","ace/range","ace/anchor"],function(e,t,r){"use strict";var d=e("./lib/oop"),u=e("./apply_delta").applyDelta,g=e("./lib/event_emitter").EventEmitter,a=e("./range").Range,p=e("./anchor").Anchor,o=function(){function i(n){this.$lines=[""],n.length===0?this.$lines=[""]:Array.isArray(n)?this.insertMergedLines({row:0,column:0},n):this.insert({row:0,column:0},n)}return i.prototype.setValue=function(n){var l=this.getLength()-1;this.remove(new a(0,0,l,this.getLine(l).length)),this.insert({row:0,column:0},n||"")},i.prototype.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},i.prototype.createAnchor=function(n,l){return new p(this,n,l)},i.prototype.$detectNewLine=function(n){var l=n.match(/^.*?(\r\n|\r|\n)/m);this.$autoNewLine=l?l[1]:`
`,this._signal("changeNewLineMode")},i.prototype.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return`\r
`;case"unix":return`
`;default:return this.$autoNewLine||`
`}},i.prototype.setNewLineMode=function(n){this.$newLineMode!==n&&(this.$newLineMode=n,this._signal("changeNewLineMode"))},i.prototype.getNewLineMode=function(){return this.$newLineMode},i.prototype.isNewLine=function(n){return n==`\r
`||n=="\r"||n==`
`},i.prototype.getLine=function(n){return this.$lines[n]||""},i.prototype.getLines=function(n,l){return this.$lines.slice(n,l+1)},i.prototype.getAllLines=function(){return this.getLines(0,this.getLength())},i.prototype.getLength=function(){return this.$lines.length},i.prototype.getTextRange=function(n){return this.getLinesForRange(n).join(this.getNewLineCharacter())},i.prototype.getLinesForRange=function(n){var l;if(n.start.row===n.end.row)l=[this.getLine(n.start.row).substring(n.start.column,n.end.column)];else{l=this.getLines(n.start.row,n.end.row),l[0]=(l[0]||"").substring(n.start.column);var s=l.length-1;n.end.row-n.start.row==s&&(l[s]=l[s].substring(0,n.end.column))}return l},i.prototype.insertLines=function(n,l){return console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead."),this.insertFullLines(n,l)},i.prototype.removeLines=function(n,l){return console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead."),this.removeFullLines(n,l)},i.prototype.insertNewLine=function(n){return console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead."),this.insertMergedLines(n,["",""])},i.prototype.insert=function(n,l){return this.getLength()<=1&&this.$detectNewLine(l),this.insertMergedLines(n,this.$split(l))},i.prototype.insertInLine=function(n,l){var s=this.clippedPos(n.row,n.column),c=this.pos(n.row,n.column+l.length);return this.applyDelta({start:s,end:c,action:"insert",lines:[l]},!0),this.clonePos(c)},i.prototype.clippedPos=function(n,l){var s=this.getLength();n===void 0?n=s:n<0?n=0:n>=s&&(n=s-1,l=void 0);var c=this.getLine(n);return l==null&&(l=c.length),l=Math.min(Math.max(l,0),c.length),{row:n,column:l}},i.prototype.clonePos=function(n){return{row:n.row,column:n.column}},i.prototype.pos=function(n,l){return{row:n,column:l}},i.prototype.$clipPosition=function(n){var l=this.getLength();return n.row>=l?(n.row=Math.max(0,l-1),n.column=this.getLine(l-1).length):(n.row=Math.max(0,n.row),n.column=Math.min(Math.max(n.column,0),this.getLine(n.row).length)),n},i.prototype.insertFullLines=function(n,l){n=Math.min(Math.max(n,0),this.getLength());var s=0;n<this.getLength()?(l=l.concat([""]),s=0):(l=[""].concat(l),n--,s=this.$lines[n].length),this.insertMergedLines({row:n,column:s},l)},i.prototype.insertMergedLines=function(n,l){var s=this.clippedPos(n.row,n.column),c={row:s.row+l.length-1,column:(l.length==1?s.column:0)+l[l.length-1].length};return this.applyDelta({start:s,end:c,action:"insert",lines:l}),this.clonePos(c)},i.prototype.remove=function(n){var l=this.clippedPos(n.start.row,n.start.column),s=this.clippedPos(n.end.row,n.end.column);return this.applyDelta({start:l,end:s,action:"remove",lines:this.getLinesForRange({start:l,end:s})}),this.clonePos(l)},i.prototype.removeInLine=function(n,l,s){var c=this.clippedPos(n,l),m=this.clippedPos(n,s);return this.applyDelta({start:c,end:m,action:"remove",lines:this.getLinesForRange({start:c,end:m})},!0),this.clonePos(c)},i.prototype.removeFullLines=function(n,l){n=Math.min(Math.max(0,n),this.getLength()-1),l=Math.min(Math.max(0,l),this.getLength()-1);var s=l==this.getLength()-1&&n>0,c=l<this.getLength()-1,m=s?n-1:n,h=s?this.getLine(m).length:0,v=c?l+1:l,k=c?0:this.getLine(v).length,x=new a(m,h,v,k),A=this.$lines.slice(n,l+1);return this.applyDelta({start:x.start,end:x.end,action:"remove",lines:this.getLinesForRange(x)}),A},i.prototype.removeNewLine=function(n){n<this.getLength()-1&&n>=0&&this.applyDelta({start:this.pos(n,this.getLine(n).length),end:this.pos(n+1,0),action:"remove",lines:["",""]})},i.prototype.replace=function(n,l){if(n instanceof a||(n=a.fromPoints(n.start,n.end)),l.length===0&&n.isEmpty())return n.start;if(l==this.getTextRange(n))return n.end;this.remove(n);var s;return l?s=this.insert(n.start,l):s=n.start,s},i.prototype.applyDeltas=function(n){for(var l=0;l<n.length;l++)this.applyDelta(n[l])},i.prototype.revertDeltas=function(n){for(var l=n.length-1;l>=0;l--)this.revertDelta(n[l])},i.prototype.applyDelta=function(n,l){var s=n.action=="insert";(s?n.lines.length<=1&&!n.lines[0]:!a.comparePoints(n.start,n.end))||(s&&n.lines.length>2e4?this.$splitAndapplyLargeDelta(n,2e4):(u(this.$lines,n,l),this._signal("change",n)))},i.prototype.$safeApplyDelta=function(n){var l=this.$lines.length;(n.action=="remove"&&n.start.row<l&&n.end.row<l||n.action=="insert"&&n.start.row<=l)&&this.applyDelta(n)},i.prototype.$splitAndapplyLargeDelta=function(n,l){for(var s=n.lines,c=s.length-l+1,m=n.start.row,h=n.start.column,v=0,k=0;v<c;v=k){k+=l-1;var x=s.slice(v,k);x.push(""),this.applyDelta({start:this.pos(m+v,h),end:this.pos(m+k,h=0),action:n.action,lines:x},!0)}n.lines=s.slice(v),n.start.row=m+v,n.start.column=h,this.applyDelta(n,!0)},i.prototype.revertDelta=function(n){this.$safeApplyDelta({start:this.clonePos(n.start),end:this.clonePos(n.end),action:n.action=="insert"?"remove":"insert",lines:n.lines.slice()})},i.prototype.indexToPosition=function(n,l){for(var s=this.$lines||this.getAllLines(),c=this.getNewLineCharacter().length,m=l||0,h=s.length;m<h;m++)if(n-=s[m].length+c,n<0)return{row:m,column:n+s[m].length+c};return{row:h-1,column:n+s[h-1].length+c}},i.prototype.positionToIndex=function(n,l){for(var s=this.$lines||this.getAllLines(),c=this.getNewLineCharacter().length,m=0,h=Math.min(n.row,s.length),v=l||0;v<h;++v)m+=s[v].length+c;return m+n.column},i.prototype.$split=function(n){return n.split(/\r\n|\r|\n/)},i}();o.prototype.$autoNewLine="",o.prototype.$newLineMode="auto",d.implement(o.prototype,g),t.Document=o});ace.define("ace/background_tokenizer",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t,r){"use strict";var d=e("./lib/oop"),u=e("./lib/event_emitter").EventEmitter,g=function(){function a(p,o){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.tokenizer=p;var i=this;this.$worker=function(){if(i.running){for(var n=new Date,l=i.currentLine,s=-1,c=i.doc,m=l;i.lines[l];)l++;var h=c.getLength(),v=0;for(i.running=!1;l<h;){i.$tokenizeRow(l),s=l;do l++;while(i.lines[l]);if(v++,v%5===0&&new Date-n>20){i.running=setTimeout(i.$worker,20);break}}i.currentLine=l,s==-1&&(s=l),m<=s&&i.fireUpdateEvent(m,s)}}}return a.prototype.setTokenizer=function(p){this.tokenizer=p,this.lines=[],this.states=[],this.start(0)},a.prototype.setDocument=function(p){this.doc=p,this.lines=[],this.states=[],this.stop()},a.prototype.fireUpdateEvent=function(p,o){var i={first:p,last:o};this._signal("update",{data:i})},a.prototype.start=function(p){this.currentLine=Math.min(p||0,this.currentLine,this.doc.getLength()),this.lines.splice(this.currentLine,this.lines.length),this.states.splice(this.currentLine,this.states.length),this.stop(),this.running=setTimeout(this.$worker,700)},a.prototype.scheduleStart=function(){this.running||(this.running=setTimeout(this.$worker,700))},a.prototype.$updateOnChange=function(p){var o=p.start.row,i=p.end.row-o;if(i===0)this.lines[o]=null;else if(p.action=="remove")this.lines.splice(o,i+1,null),this.states.splice(o,i+1,null);else{var n=Array(i+1);n.unshift(o,1),this.lines.splice.apply(this.lines,n),this.states.splice.apply(this.states,n)}this.currentLine=Math.min(o,this.currentLine,this.doc.getLength()),this.stop()},a.prototype.stop=function(){this.running&&clearTimeout(this.running),this.running=!1},a.prototype.getTokens=function(p){return this.lines[p]||this.$tokenizeRow(p)},a.prototype.getState=function(p){return this.currentLine==p&&this.$tokenizeRow(p),this.states[p]||"start"},a.prototype.$tokenizeRow=function(p){var o=this.doc.getLine(p),i=this.states[p-1],n=this.tokenizer.getLineTokens(o,i,p);return this.states[p]+""!=n.state+""?(this.states[p]=n.state,this.lines[p+1]=null,this.currentLine>p+1&&(this.currentLine=p+1)):this.currentLine==p&&(this.currentLine=p+1),this.lines[p]=n.tokens},a.prototype.cleanup=function(){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.removeAllListeners()},a}();d.implement(g.prototype,u),t.BackgroundTokenizer=g});ace.define("ace/search_highlight",["require","exports","module","ace/lib/lang","ace/range"],function(e,t,r){"use strict";var d=e("./lib/lang"),u=e("./range").Range,g=function(){function a(p,o,i){i===void 0&&(i="text"),this.setRegexp(p),this.clazz=o,this.type=i}return a.prototype.setRegexp=function(p){this.regExp+""!=p+""&&(this.regExp=p,this.cache=[])},a.prototype.update=function(p,o,i,n){if(this.regExp)for(var l=n.firstRow,s=n.lastRow,c={},m=l;m<=s;m++){var h=this.cache[m];h==null&&(h=d.getMatchOffsets(i.getLine(m),this.regExp),h.length>this.MAX_RANGES&&(h=h.slice(0,this.MAX_RANGES)),h=h.map(function(A){return new u(m,A.offset,m,A.offset+A.length)}),this.cache[m]=h.length?h:"");for(var v=h.length;v--;){var k=h[v].toScreenRange(i),x=k.toString();c[x]||(c[x]=!0,o.drawSingleLineMarker(p,k,this.clazz,n))}}},a}();g.prototype.MAX_RANGES=500,t.SearchHighlight=g});ace.define("ace/undomanager",["require","exports","module","ace/range"],function(e,t,r){"use strict";var d=function(){function f(){this.$keepRedoStack,this.$maxRev=0,this.$fromUndo=!1,this.$undoDepth=1/0,this.reset()}return f.prototype.addSession=function(L){this.$session=L},f.prototype.add=function(L,$,T){if(!this.$fromUndo&&L!=this.$lastDelta){if(this.$keepRedoStack||(this.$redoStack.length=0),$===!1||!this.lastDeltas){this.lastDeltas=[];var C=this.$undoStack.length;C>this.$undoDepth-1&&this.$undoStack.splice(0,C-this.$undoDepth+1),this.$undoStack.push(this.lastDeltas),L.id=this.$rev=++this.$maxRev}(L.action=="remove"||L.action=="insert")&&(this.$lastDelta=L),this.lastDeltas.push(L)}},f.prototype.addSelection=function(L,$){this.selections.push({value:L,rev:$||this.$rev})},f.prototype.startNewGroup=function(){return this.lastDeltas=null,this.$rev},f.prototype.markIgnored=function(L,$){$==null&&($=this.$rev+1);for(var T=this.$undoStack,C=T.length;C--;){var w=T[C][0];if(w.id<=L)break;w.id<$&&(w.ignore=!0)}this.lastDeltas=null},f.prototype.getSelection=function(L,$){for(var T=this.selections,C=T.length;C--;){var w=T[C];if(w.rev<L)return $&&(w=T[C+1]),w}},f.prototype.getRevision=function(){return this.$rev},f.prototype.getDeltas=function(L,$){$==null&&($=this.$rev+1);for(var T=this.$undoStack,C=null,w=0,y=T.length;y--;){var b=T[y][0];if(b.id<$&&!C&&(C=y+1),b.id<=L){w=y+1;break}}return T.slice(w,C)},f.prototype.getChangedRanges=function(L,$){$==null&&($=this.$rev+1)},f.prototype.getChangedLines=function(L,$){$==null&&($=this.$rev+1)},f.prototype.undo=function(L,$){this.lastDeltas=null;var T=this.$undoStack;if(u(T,T.length)){L||(L=this.$session),this.$redoStackBaseRev!==this.$rev&&this.$redoStack.length&&(this.$redoStack=[]),this.$fromUndo=!0;var C=T.pop(),w=null;return C&&(w=L.undoChanges(C,$),this.$redoStack.push(C),this.$syncRev()),this.$fromUndo=!1,w}},f.prototype.redo=function(L,$){if(this.lastDeltas=null,L||(L=this.$session),this.$fromUndo=!0,this.$redoStackBaseRev!=this.$rev){var T=this.getDeltas(this.$redoStackBaseRev,this.$rev+1);S(this.$redoStack,T),this.$redoStackBaseRev=this.$rev,this.$redoStack.forEach(function(y){y[0].id=++this.$maxRev},this)}var C=this.$redoStack.pop(),w=null;return C&&(w=L.redoChanges(C,$),this.$undoStack.push(C),this.$syncRev()),this.$fromUndo=!1,w},f.prototype.$syncRev=function(){var L=this.$undoStack,$=L[L.length-1],T=$&&$[0].id||0;this.$redoStackBaseRev=T,this.$rev=T},f.prototype.reset=function(){this.lastDeltas=null,this.$lastDelta=null,this.$undoStack=[],this.$redoStack=[],this.$rev=0,this.mark=0,this.$redoStackBaseRev=this.$rev,this.selections=[]},f.prototype.canUndo=function(){return this.$undoStack.length>0},f.prototype.canRedo=function(){return this.$redoStack.length>0},f.prototype.bookmark=function(L){L==null&&(L=this.$rev),this.mark=L},f.prototype.isAtBookmark=function(){return this.$rev===this.mark},f.prototype.toJSON=function(){return{$redoStack:this.$redoStack,$undoStack:this.$undoStack}},f.prototype.fromJSON=function(L){this.reset(),this.$undoStack=L.$undoStack,this.$redoStack=L.$redoStack},f.prototype.$prettyPrint=function(L){return L?l(L):l(this.$undoStack)+`
---
`+l(this.$redoStack)},f}();d.prototype.hasUndo=d.prototype.canUndo,d.prototype.hasRedo=d.prototype.canRedo,d.prototype.isClean=d.prototype.isAtBookmark,d.prototype.markClean=d.prototype.bookmark;function u(f,L){for(var $=L;$--;){var T=f[$];if(T&&!T[0].ignore){for(;$<L-1;){var C=m(f[$],f[$+1]);f[$]=C[0],f[$+1]=C[1],$++}return!0}}}var g=e("./range").Range,a=g.comparePoints,p=g.comparePoints;function o(f){var L=f.action=="insert",$=f.start,T=f.end,C=(T.row-$.row)*(L?1:-1),w=(T.column-$.column)*(L?1:-1);L&&(T=$);for(var y in this.marks){var b=this.marks[y],_=p(b,$);if(!(_<0)){if(_===0&&L)if(b.bias==1)_=1;else{b.bias==-1;continue}var E=L?_:p(b,T);if(E>0){b.row+=C,b.column+=b.row==T.row?w:0;continue}!L&&E<=0&&(b.row=$.row,b.column=$.column,E===0&&(b.bias=1))}}}function i(f){return{row:f.row,column:f.column}}function n(f){return{start:i(f.start),end:i(f.end),action:f.action,lines:f.lines.slice()}}function l(f){if(f=f||this,Array.isArray(f))return f.map(l).join(`
`);var L="";return f.action?(L=f.action=="insert"?"+":"-",L+="["+f.lines+"]"):f.value&&(Array.isArray(f.value)?L=f.value.map(s).join(`
`):L=s(f.value)),f.start&&(L+=s(f)),(f.id||f.rev)&&(L+="	("+(f.id||f.rev)+")"),L}function s(f){return f.start.row+":"+f.start.column+"=>"+f.end.row+":"+f.end.column}function c(f,L){var $=f.action=="insert",T=L.action=="insert";if($&&T)if(a(L.start,f.end)>=0)v(L,f,-1);else if(a(L.start,f.start)<=0)v(f,L,1);else return null;else if($&&!T)if(a(L.start,f.end)>=0)v(L,f,-1);else if(a(L.end,f.start)<=0)v(f,L,-1);else return null;else if(!$&&T)if(a(L.start,f.start)>=0)v(L,f,1);else if(a(L.start,f.start)<=0)v(f,L,1);else return null;else if(!$&&!T)if(a(L.start,f.start)>=0)v(L,f,1);else if(a(L.end,f.start)<=0)v(f,L,-1);else return null;return[L,f]}function m(f,L){for(var $=f.length;$--;)for(var T=0;T<L.length;T++)if(!c(f[$],L[T])){for(;$<f.length;){for(;T--;)c(L[T],f[$]);T=L.length,$++}return[f,L]}return f.selectionBefore=L.selectionBefore=f.selectionAfter=L.selectionAfter=null,[L,f]}function h(f,L){var $=f.action=="insert",T=L.action=="insert";if($&&T)a(f.start,L.start)<0?v(L,f,1):v(f,L,1);else if($&&!T)a(f.start,L.end)>=0?v(f,L,-1):(a(f.start,L.start)<=0||v(f,g.fromPoints(L.start,f.start),-1),v(L,f,1));else if(!$&&T)a(L.start,f.end)>=0?v(L,f,-1):(a(L.start,f.start)<=0||v(L,g.fromPoints(f.start,L.start),-1),v(f,L,1));else if(!$&&!T)if(a(L.start,f.end)>=0)v(L,f,-1);else if(a(L.end,f.start)<=0)v(f,L,-1);else{var C,w;return a(f.start,L.start)<0&&(C=f,f=x(f,L.start)),a(f.end,L.end)>0&&(w=x(f,L.end)),k(L.end,f.start,f.end,-1),w&&!C&&(f.lines=w.lines,f.start=w.start,f.end=w.end,w=f),[L,C,w].filter(Boolean)}return[L,f]}function v(f,L,$){k(f.start,L.start,L.end,$),k(f.end,L.start,L.end,$)}function k(f,L,$,T){f.row==(T==1?L:$).row&&(f.column+=T*($.column-L.column)),f.row+=T*($.row-L.row)}function x(f,L){var $=f.lines,T=f.end;f.end=i(L);var C=f.end.row-f.start.row,w=$.splice(C,$.length),y=C?L.column:L.column-f.start.column;$.push(w[0].substring(0,y)),w[0]=w[0].substr(y);var b={start:i(L),end:T,lines:w,action:f.action};return b}function A(f,L){L=n(L);for(var $=f.length;$--;){for(var T=f[$],C=0;C<T.length;C++){var w=T[C],y=h(w,L);L=y[0],y.length!=2&&(y[2]?(T.splice(C+1,1,y[1],y[2]),C++):y[1]||(T.splice(C,1),C--))}T.length||f.splice($,1)}return f}function S(f,L){for(var $=0;$<L.length;$++)for(var T=L[$],C=0;C<T.length;C++)A(f,T[C])}t.UndoManager=d});ace.define("ace/edit_session/fold_line",["require","exports","module","ace/range"],function(e,t,r){"use strict";var d=e("../range").Range,u=function(){function g(a,p){this.foldData=a,Array.isArray(p)?this.folds=p:p=this.folds=[p];var o=p[p.length-1];this.range=new d(p[0].start.row,p[0].start.column,o.end.row,o.end.column),this.start=this.range.start,this.end=this.range.end,this.folds.forEach(function(i){i.setFoldLine(this)},this)}return g.prototype.shiftRow=function(a){this.start.row+=a,this.end.row+=a,this.folds.forEach(function(p){p.start.row+=a,p.end.row+=a})},g.prototype.addFold=function(a){if(a.sameRow){if(a.start.row<this.startRow||a.endRow>this.endRow)throw new Error("Can't add a fold to this FoldLine as it has no connection");this.folds.push(a),this.folds.sort(function(p,o){return-p.range.compareEnd(o.start.row,o.start.column)}),this.range.compareEnd(a.start.row,a.start.column)>0?(this.end.row=a.end.row,this.end.column=a.end.column):this.range.compareStart(a.end.row,a.end.column)<0&&(this.start.row=a.start.row,this.start.column=a.start.column)}else if(a.start.row==this.end.row)this.folds.push(a),this.end.row=a.end.row,this.end.column=a.end.column;else if(a.end.row==this.start.row)this.folds.unshift(a),this.start.row=a.start.row,this.start.column=a.start.column;else throw new Error("Trying to add fold to FoldRow that doesn't have a matching row");a.foldLine=this},g.prototype.containsRow=function(a){return a>=this.start.row&&a<=this.end.row},g.prototype.walk=function(a,p,o){var i=0,n=this.folds,l,s,c,m=!0;p==null&&(p=this.end.row,o=this.end.column);for(var h=0;h<n.length;h++){if(l=n[h],s=l.range.compareStart(p,o),s==-1){a(null,p,o,i,m);return}if(c=a(null,l.start.row,l.start.column,i,m),c=!c&&a(l.placeholder,l.start.row,l.start.column,i),c||s===0)return;m=!l.sameRow,i=l.end.column}a(null,p,o,i,m)},g.prototype.getNextFoldTo=function(a,p){for(var o,i,n=0;n<this.folds.length;n++){if(o=this.folds[n],i=o.range.compareEnd(a,p),i==-1)return{fold:o,kind:"after"};if(i===0)return{fold:o,kind:"inside"}}return null},g.prototype.addRemoveChars=function(a,p,o){var i=this.getNextFoldTo(a,p),n,l;if(i){if(n=i.fold,i.kind=="inside"&&n.start.column!=p&&n.start.row!=a)window.console&&window.console.log(a,p,n);else if(n.start.row==a){l=this.folds;var s=l.indexOf(n);for(s===0&&(this.start.column+=o),s;s<l.length;s++){if(n=l[s],n.start.column+=o,!n.sameRow)return;n.end.column+=o}this.end.column+=o}}},g.prototype.split=function(a,p){var o=this.getNextFoldTo(a,p);if(!o||o.kind=="inside")return null;var i=o.fold,n=this.folds,l=this.foldData,s=n.indexOf(i),c=n[s-1];this.end.row=c.end.row,this.end.column=c.end.column,n=n.splice(s,n.length-s);var m=new g(l,n);return l.splice(l.indexOf(this)+1,0,m),m},g.prototype.merge=function(a){for(var p=a.folds,o=0;o<p.length;o++)this.addFold(p[o]);var i=this.foldData;i.splice(i.indexOf(a),1)},g.prototype.toString=function(){var a=[this.range.toString()+": ["];return this.folds.forEach(function(p){a.push("  "+p.toString())}),a.push("]"),a.join(`
`)},g.prototype.idxToPosition=function(a){for(var p=0,o=0;o<this.folds.length;o++){var i=this.folds[o];if(a-=i.start.column-p,a<0)return{row:i.start.row,column:i.start.column+a};if(a-=i.placeholder.length,a<0)return i.start;p=i.end.column}return{row:this.end.row,column:this.end.column+a}},g}();t.FoldLine=u});ace.define("ace/range_list",["require","exports","module","ace/range"],function(e,t,r){"use strict";var d=e("./range").Range,u=d.comparePoints,g=function(){function a(){this.ranges=[],this.$bias=1}return a.prototype.pointIndex=function(p,o,i){for(var n=this.ranges,l=i||0;l<n.length;l++){var s=n[l],c=u(p,s.end);if(!(c>0)){var m=u(p,s.start);return c===0?o&&m!==0?-l-2:l:m>0||m===0&&!o?l:-l-1}}return-l-1},a.prototype.add=function(p){var o=!p.isEmpty(),i=this.pointIndex(p.start,o);i<0&&(i=-i-1);var n=this.pointIndex(p.end,o,i);return n<0?n=-n-1:n++,this.ranges.splice(i,n-i,p)},a.prototype.addList=function(p){for(var o=[],i=p.length;i--;)o.push.apply(o,this.add(p[i]));return o},a.prototype.substractPoint=function(p){var o=this.pointIndex(p);if(o>=0)return this.ranges.splice(o,1)},a.prototype.merge=function(){var p=[],o=this.ranges;o=o.sort(function(c,m){return u(c.start,m.start)});for(var i=o[0],n,l=1;l<o.length;l++){n=i,i=o[l];var s=u(n.end,i.start);s<0||s==0&&!n.isEmpty()&&!i.isEmpty()||(u(n.end,i.end)<0&&(n.end.row=i.end.row,n.end.column=i.end.column),o.splice(l,1),p.push(i),i=n,l--)}return this.ranges=o,p},a.prototype.contains=function(p,o){return this.pointIndex({row:p,column:o})>=0},a.prototype.containsPoint=function(p){return this.pointIndex(p)>=0},a.prototype.rangeAtPoint=function(p){var o=this.pointIndex(p);if(o>=0)return this.ranges[o]},a.prototype.clipRows=function(p,o){var i=this.ranges;if(i[0].start.row>o||i[i.length-1].start.row<p)return[];var n=this.pointIndex({row:p,column:0});n<0&&(n=-n-1);var l=this.pointIndex({row:o,column:0},n);l<0&&(l=-l-1);for(var s=[],c=n;c<l;c++)s.push(i[c]);return s},a.prototype.removeAll=function(){return this.ranges.splice(0,this.ranges.length)},a.prototype.attach=function(p){this.session&&this.detach(),this.session=p,this.onChange=this.$onChange.bind(this),this.session.on("change",this.onChange)},a.prototype.detach=function(){this.session&&(this.session.removeListener("change",this.onChange),this.session=null)},a.prototype.$onChange=function(p){for(var o=p.start,i=p.end,n=o.row,l=i.row,s=this.ranges,c=0,m=s.length;c<m;c++){var h=s[c];if(h.end.row>=n)break}if(p.action=="insert")for(var v=l-n,k=-o.column+i.column;c<m;c++){var h=s[c];if(h.start.row>n)break;if(h.start.row==n&&h.start.column>=o.column&&(h.start.column==o.column&&this.$bias<=0||(h.start.column+=k,h.start.row+=v)),h.end.row==n&&h.end.column>=o.column){if(h.end.column==o.column&&this.$bias<0)continue;h.end.column==o.column&&k>0&&c<m-1&&h.end.column>h.start.column&&h.end.column==s[c+1].start.column&&(h.end.column-=k),h.end.column+=k,h.end.row+=v}}else for(var v=n-l,k=o.column-i.column;c<m;c++){var h=s[c];if(h.start.row>l)break;h.end.row<l&&(n<h.end.row||n==h.end.row&&o.column<h.end.column)?(h.end.row=n,h.end.column=o.column):h.end.row==l?h.end.column<=i.column?(v||h.end.column>o.column)&&(h.end.column=o.column,h.end.row=o.row):(h.end.column+=k,h.end.row+=v):h.end.row>l&&(h.end.row+=v),h.start.row<l&&(n<h.start.row||n==h.start.row&&o.column<h.start.column)?(h.start.row=n,h.start.column=o.column):h.start.row==l?h.start.column<=i.column?(v||h.start.column>o.column)&&(h.start.column=o.column,h.start.row=o.row):(h.start.column+=k,h.start.row+=v):h.start.row>l&&(h.start.row+=v)}if(v!=0&&c<m)for(;c<m;c++){var h=s[c];h.start.row+=v,h.end.row+=v}},a}();g.prototype.comparePoints=u,t.RangeList=g});ace.define("ace/edit_session/fold",["require","exports","module","ace/range_list"],function(e,t,r){"use strict";var d=this&&this.__extends||function(){var n=function(l,s){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,m){c.__proto__=m}||function(c,m){for(var h in m)Object.prototype.hasOwnProperty.call(m,h)&&(c[h]=m[h])},n(l,s)};return function(l,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");n(l,s);function c(){this.constructor=l}l.prototype=s===null?Object.create(s):(c.prototype=s.prototype,new c)}}(),u=e("../range_list").RangeList,g=function(n){d(l,n);function l(s,c){var m=n.call(this)||this;return m.foldLine=null,m.placeholder=c,m.range=s,m.start=s.start,m.end=s.end,m.sameRow=s.start.row==s.end.row,m.subFolds=m.ranges=[],m}return l.prototype.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()},l.prototype.setFoldLine=function(s){this.foldLine=s,this.subFolds.forEach(function(c){c.setFoldLine(s)})},l.prototype.clone=function(){var s=this.range.clone(),c=new l(s,this.placeholder);return this.subFolds.forEach(function(m){c.subFolds.push(m.clone())}),c.collapseChildren=this.collapseChildren,c},l.prototype.addSubFold=function(s){if(!this.range.isEqual(s)){p(s,this.start);for(var k=s.start.row,x=s.start.column,c=0,m=-1;c<this.subFolds.length&&(m=this.subFolds[c].range.compare(k,x),m==1);c++);var h=this.subFolds[c],v=0;if(m==0){if(h.range.containsRange(s))return h.addSubFold(s);v=1}for(var k=s.range.end.row,x=s.range.end.column,A=c,m=-1;A<this.subFolds.length&&(m=this.subFolds[A].range.compare(k,x),m==1);A++);m==0&&A++;for(var S=this.subFolds.splice(c,A-c,s),f=m==0?S.length-1:S.length,L=v;L<f;L++)s.addSubFold(S[L]);return s.setFoldLine(this.foldLine),s}},l.prototype.restoreRange=function(s){return i(s,this.start)},l}(u);function a(n,l){n.row-=l.row,n.row==0&&(n.column-=l.column)}function p(n,l){a(n.start,l),a(n.end,l)}function o(n,l){n.row==0&&(n.column+=l.column),n.row+=l.row}function i(n,l){o(n.start,l),o(n.end,l)}t.Fold=g});ace.define("ace/edit_session/folding",["require","exports","module","ace/range","ace/edit_session/fold_line","ace/edit_session/fold","ace/token_iterator","ace/mouse/mouse_event"],function(e,t,r){"use strict";var d=e("../range").Range,u=e("./fold_line").FoldLine,g=e("./fold").Fold,a=e("../token_iterator").TokenIterator,p=e("../mouse/mouse_event").MouseEvent;function o(){this.getFoldAt=function(i,n,l){var s=this.getFoldLine(i);if(!s)return null;for(var c=s.folds,m=0;m<c.length;m++){var h=c[m].range;if(h.contains(i,n)){if(l==1&&h.isEnd(i,n)&&!h.isEmpty())continue;if(l==-1&&h.isStart(i,n)&&!h.isEmpty())continue;return c[m]}}},this.getFoldsInRange=function(i){var n=i.start,l=i.end,s=this.$foldData,c=[];n.column+=1,l.column-=1;for(var m=0;m<s.length;m++){var h=s[m].range.compareRange(i);if(h!=2){if(h==-2)break;for(var v=s[m].folds,k=0;k<v.length;k++){var x=v[k];if(h=x.range.compareRange(i),h==-2)break;if(h==2)continue;if(h==42)break;c.push(x)}}}return n.column-=1,l.column+=1,c},this.getFoldsInRangeList=function(i){if(Array.isArray(i)){var n=[];i.forEach(function(l){n=n.concat(this.getFoldsInRange(l))},this)}else var n=this.getFoldsInRange(i);return n},this.getAllFolds=function(){for(var i=[],n=this.$foldData,l=0;l<n.length;l++)for(var s=0;s<n[l].folds.length;s++)i.push(n[l].folds[s]);return i},this.getFoldStringAt=function(i,n,l,s){if(s=s||this.getFoldLine(i),!s)return null;for(var c={end:{column:0}},m,h,v=0;v<s.folds.length;v++){h=s.folds[v];var k=h.range.compareEnd(i,n);if(k==-1){m=this.getLine(h.start.row).substring(c.end.column,h.start.column);break}else if(k===0)return null;c=h}return m||(m=this.getLine(h.start.row).substring(c.end.column)),l==-1?m.substring(0,n-c.end.column):l==1?m.substring(n-c.end.column):m},this.getFoldLine=function(i,n){var l=this.$foldData,s=0;for(n&&(s=l.indexOf(n)),s==-1&&(s=0),s;s<l.length;s++){var c=l[s];if(c.start.row<=i&&c.end.row>=i)return c;if(c.end.row>i)return null}return null},this.getNextFoldLine=function(i,n){var l=this.$foldData,s=0;for(n&&(s=l.indexOf(n)),s==-1&&(s=0),s;s<l.length;s++){var c=l[s];if(c.end.row>=i)return c}return null},this.getFoldedRowCount=function(i,n){for(var l=this.$foldData,s=n-i+1,c=0;c<l.length;c++){var m=l[c],h=m.end.row,v=m.start.row;if(h>=n){v<n&&(v>=i?s-=n-v:s=0);break}else h>=i&&(v>=i?s-=h-v:s-=h-i+1)}return s},this.$addFoldLine=function(i){return this.$foldData.push(i),this.$foldData.sort(function(n,l){return n.start.row-l.start.row}),i},this.addFold=function(i,n){var l=this.$foldData,s=!1,c;i instanceof g?c=i:(c=new g(n,i),c.collapseChildren=n.collapseChildren),this.$clipRangeToDocument(c.range);var m=c.start.row,h=c.start.column,v=c.end.row,k=c.end.column,x=this.getFoldAt(m,h,1),A=this.getFoldAt(v,k,-1);if(x&&A==x)return x.addSubFold(c);x&&!x.range.isStart(m,h)&&this.removeFold(x),A&&!A.range.isEnd(v,k)&&this.removeFold(A);var S=this.getFoldsInRange(c.range);S.length>0&&(this.removeFolds(S),c.collapseChildren||S.forEach(function(T){c.addSubFold(T)}));for(var f=0;f<l.length;f++){var L=l[f];if(v==L.start.row){L.addFold(c),s=!0;break}else if(m==L.end.row){if(L.addFold(c),s=!0,!c.sameRow){var $=l[f+1];if($&&$.start.row==v){L.merge($);break}}break}else if(v<=L.start.row)break}return s||(L=this.$addFoldLine(new u(this.$foldData,c))),this.$useWrapMode?this.$updateWrapData(L.start.row,L.start.row):this.$updateRowLengthCache(L.start.row,L.start.row),this.$modified=!0,this._signal("changeFold",{data:c,action:"add"}),c},this.addFolds=function(i){i.forEach(function(n){this.addFold(n)},this)},this.removeFold=function(i){var n=i.foldLine,l=n.start.row,s=n.end.row,c=this.$foldData,m=n.folds;if(m.length==1)c.splice(c.indexOf(n),1);else if(n.range.isEnd(i.end.row,i.end.column))m.pop(),n.end.row=m[m.length-1].end.row,n.end.column=m[m.length-1].end.column;else if(n.range.isStart(i.start.row,i.start.column))m.shift(),n.start.row=m[0].start.row,n.start.column=m[0].start.column;else if(i.sameRow)m.splice(m.indexOf(i),1);else{var h=n.split(i.start.row,i.start.column);m=h.folds,m.shift(),h.start.row=m[0].start.row,h.start.column=m[0].start.column}this.$updating||(this.$useWrapMode?this.$updateWrapData(l,s):this.$updateRowLengthCache(l,s)),this.$modified=!0,this._signal("changeFold",{data:i,action:"remove"})},this.removeFolds=function(i){for(var n=[],l=0;l<i.length;l++)n.push(i[l]);n.forEach(function(s){this.removeFold(s)},this),this.$modified=!0},this.expandFold=function(i){this.removeFold(i),i.subFolds.forEach(function(n){i.restoreRange(n),this.addFold(n)},this),i.collapseChildren>0&&this.foldAll(i.start.row+1,i.end.row,i.collapseChildren-1),i.subFolds=[]},this.expandFolds=function(i){i.forEach(function(n){this.expandFold(n)},this)},this.unfold=function(i,n){var l,s;if(i==null)l=new d(0,0,this.getLength(),0),n==null&&(n=!0);else if(typeof i=="number")l=new d(i,0,i,this.getLine(i).length);else if("row"in i)l=d.fromPoints(i,i);else{if(Array.isArray(i))return s=[],i.forEach(function(m){s=s.concat(this.unfold(m))},this),s;l=i}s=this.getFoldsInRangeList(l);for(var c=s;s.length==1&&d.comparePoints(s[0].start,l.start)<0&&d.comparePoints(s[0].end,l.end)>0;)this.expandFolds(s),s=this.getFoldsInRangeList(l);if(n!=!1?this.removeFolds(s):this.expandFolds(s),c.length)return c},this.isRowFolded=function(i,n){return!!this.getFoldLine(i,n)},this.getRowFoldEnd=function(i,n){var l=this.getFoldLine(i,n);return l?l.end.row:i},this.getRowFoldStart=function(i,n){var l=this.getFoldLine(i,n);return l?l.start.row:i},this.getFoldDisplayLine=function(i,n,l,s,c){s==null&&(s=i.start.row),c==null&&(c=0),n==null&&(n=i.end.row),l==null&&(l=this.getLine(n).length);var m=this.doc,h="";return i.walk(function(v,k,x,A){if(!(k<s)){if(k==s){if(x<c)return;A=Math.max(c,A)}v!=null?h+=v:h+=m.getLine(k).substring(A,x)}},n,l),h},this.getDisplayLine=function(i,n,l,s){var c=this.getFoldLine(i);if(c)return this.getFoldDisplayLine(c,i,n,l,s);var m;return m=this.doc.getLine(i),m.substring(s||0,n||m.length)},this.$cloneFoldData=function(){var i=[];return i=this.$foldData.map(function(n){var l=n.folds.map(function(s){return s.clone()});return new u(i,l)}),i},this.toggleFold=function(i){var n=this.selection,l=n.getRange(),s,c;if(l.isEmpty()){var m=l.start;if(s=this.getFoldAt(m.row,m.column),s){this.expandFold(s);return}else(c=this.findMatchingBracket(m))?l.comparePoint(c)==1?l.end=c:(l.start=c,l.start.column++,l.end.column--):(c=this.findMatchingBracket({row:m.row,column:m.column+1}))?(l.comparePoint(c)==1?l.end=c:l.start=c,l.start.column++):l=this.getCommentFoldRange(m.row,m.column)||l}else{var h=this.getFoldsInRange(l);if(i&&h.length){this.expandFolds(h);return}else h.length==1&&(s=h[0])}if(s||(s=this.getFoldAt(l.start.row,l.start.column)),s&&s.range.toString()==l.toString()){this.expandFold(s);return}var v="...";if(!l.isMultiLine()){if(v=this.getTextRange(l),v.length<4)return;v=v.trim().substring(0,2)+".."}this.addFold(v,l)},this.getCommentFoldRange=function(i,n,l){var s=new a(this,i,n),c=s.getCurrentToken(),m=c&&c.type;if(c&&/^comment|string/.test(m)){m=m.match(/comment|string/)[0],m=="comment"&&(m+="|doc-start|\\.doc");var h=new RegExp(m),v=new d;if(l!=1){do c=s.stepBackward();while(c&&h.test(c.type));c=s.stepForward()}v.start.row=s.getCurrentTokenRow(),v.start.column=s.getCurrentTokenColumn()+c.value.length,s=new a(this,i,n);var k=this.getState(s.$row);if(l!=-1){var x=-1;do if(c=s.stepForward(),x==-1){var A=this.getState(s.$row);k.toString()!==A.toString()&&(x=s.$row)}else if(s.$row>x)break;while(c&&h.test(c.type));c=s.stepBackward()}else c=s.getCurrentToken();return v.end.row=s.getCurrentTokenRow(),v.end.column=s.getCurrentTokenColumn(),v}},this.foldAll=function(i,n,l,s){l==null&&(l=1e5);var c=this.foldWidgets;if(c){n=n||this.getLength(),i=i||0;for(var m=i;m<n;m++)if(c[m]==null&&(c[m]=this.getFoldWidget(m)),c[m]=="start"&&!(s&&!s(m))){var h=this.getFoldWidgetRange(m);h&&h.isMultiLine()&&h.end.row<=n&&h.start.row>=i&&(m=h.end.row,h.collapseChildren=l,this.addFold("...",h))}}},this.foldToLevel=function(i){for(this.foldAll();i-- >0;)this.unfold(null,!1)},this.foldAllComments=function(){var i=this;this.foldAll(null,null,null,function(n){for(var l=i.getTokens(n),s=0;s<l.length;s++){var c=l[s];if(!(c.type=="text"&&/^\s+$/.test(c.value)))return!!/comment/.test(c.type)}})},this.$foldStyles={manual:1,markbegin:1,markbeginend:1},this.$foldStyle="markbegin",this.setFoldStyle=function(i){if(!this.$foldStyles[i])throw new Error("invalid fold style: "+i+"["+Object.keys(this.$foldStyles).join(", ")+"]");if(this.$foldStyle!=i){this.$foldStyle=i,i=="manual"&&this.unfold();var n=this.$foldMode;this.$setFolding(null),this.$setFolding(n)}},this.$setFolding=function(i){if(this.$foldMode!=i){if(this.$foldMode=i,this.off("change",this.$updateFoldWidgets),this.off("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets),this._signal("changeAnnotation"),!i||this.$foldStyle=="manual"){this.foldWidgets=null;return}this.foldWidgets=[],this.getFoldWidget=i.getFoldWidget.bind(i,this,this.$foldStyle),this.getFoldWidgetRange=i.getFoldWidgetRange.bind(i,this,this.$foldStyle),this.$updateFoldWidgets=this.updateFoldWidgets.bind(this),this.$tokenizerUpdateFoldWidgets=this.tokenizerUpdateFoldWidgets.bind(this),this.on("change",this.$updateFoldWidgets),this.on("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets)}},this.getParentFoldRangeData=function(i,n){var l=this.foldWidgets;if(!l||n&&l[i])return{};for(var s=i-1,c;s>=0;){var m=l[s];if(m==null&&(m=l[s]=this.getFoldWidget(s)),m=="start"){var h=this.getFoldWidgetRange(s);if(c||(c=h),h&&h.end.row>=i)break}s--}return{range:s!==-1&&h,firstRange:c}},this.onFoldWidgetClick=function(i,n){n instanceof p&&(n=n.domEvent);var l={children:n.shiftKey,all:n.ctrlKey||n.metaKey,siblings:n.altKey},s=this.$toggleFoldWidget(i,l);if(!s){var c=n.target||n.srcElement;c&&/ace_fold-widget/.test(c.className)&&(c.className+=" ace_invalid")}},this.$toggleFoldWidget=function(i,n){if(this.getFoldWidget){var l=this.getFoldWidget(i),s=this.getLine(i),c=l==="end"?-1:1,m=this.getFoldAt(i,c===-1?0:s.length,c);if(m)return n.children||n.all?this.removeFold(m):this.expandFold(m),m;var h=this.getFoldWidgetRange(i,!0);if(h&&!h.isMultiLine()&&(m=this.getFoldAt(h.start.row,h.start.column,1),m&&h.isEqual(m.range)))return this.removeFold(m),m;if(n.siblings){var v=this.getParentFoldRangeData(i);if(v.range)var k=v.range.start.row+1,x=v.range.end.row;this.foldAll(k,x,n.all?1e4:0)}else n.children?(x=h?h.end.row:this.getLength(),this.foldAll(i+1,x,n.all?1e4:0)):h&&(n.all&&(h.collapseChildren=1e4),this.addFold("...",h));return h}},this.toggleFoldWidget=function(i){var n=this.selection.getCursor().row;n=this.getRowFoldStart(n);var l=this.$toggleFoldWidget(n,{});if(!l){var s=this.getParentFoldRangeData(n,!0);if(l=s.range||s.firstRange,l){n=l.start.row;var c=this.getFoldAt(n,this.getLine(n).length,1);c?this.removeFold(c):this.addFold("...",l)}}},this.updateFoldWidgets=function(i){var n=i.start.row,l=i.end.row-n;if(l===0)this.foldWidgets[n]=null;else if(i.action=="remove")this.foldWidgets.splice(n,l+1,null);else{var s=Array(l+1);s.unshift(n,1),this.foldWidgets.splice.apply(this.foldWidgets,s)}},this.tokenizerUpdateFoldWidgets=function(i){var n=i.data;n.first!=n.last&&this.foldWidgets.length>n.first&&this.foldWidgets.splice(n.first,this.foldWidgets.length)}}t.Folding=o});ace.define("ace/edit_session/bracket_match",["require","exports","module","ace/token_iterator","ace/range"],function(e,t,r){"use strict";var d=e("../token_iterator").TokenIterator,u=e("../range").Range;function g(){this.findMatchingBracket=function(a,p){if(a.column==0)return null;var o=p||this.getLine(a.row).charAt(a.column-1);if(o=="")return null;var i=o.match(/([\(\[\{])|([\)\]\}])/);return i?i[1]?this.$findClosingBracket(i[1],a):this.$findOpeningBracket(i[2],a):null},this.getBracketRange=function(a){var p=this.getLine(a.row),o=!0,i,n=p.charAt(a.column-1),l=n&&n.match(/([\(\[\{])|([\)\]\}])/);if(l||(n=p.charAt(a.column),a={row:a.row,column:a.column+1},l=n&&n.match(/([\(\[\{])|([\)\]\}])/),o=!1),!l)return null;if(l[1]){var s=this.$findClosingBracket(l[1],a);if(!s)return null;i=u.fromPoints(a,s),o||(i.end.column++,i.start.column--),i.cursor=i.end}else{var s=this.$findOpeningBracket(l[2],a);if(!s)return null;i=u.fromPoints(s,a),o||(i.start.column++,i.end.column--),i.cursor=i.start}return i},this.getMatchingBracketRanges=function(a,p){var o=this.getLine(a.row),i=/([\(\[\{])|([\)\]\}])/,n=!p&&o.charAt(a.column-1),l=n&&n.match(i);if(l||(n=(p===void 0||p)&&o.charAt(a.column),a={row:a.row,column:a.column+1},l=n&&n.match(i)),!l)return null;var s=new u(a.row,a.column-1,a.row,a.column),c=l[1]?this.$findClosingBracket(l[1],a):this.$findOpeningBracket(l[2],a);if(!c)return[s];var m=new u(c.row,c.column,c.row,c.column+1);return[s,m]},this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{","<":">",">":"<"},this.$findOpeningBracket=function(a,p,o){var i=this.$brackets[a],n=1,l=new d(this,p.row,p.column),s=l.getCurrentToken();if(s||(s=l.stepForward()),!!s){o||(o=new RegExp("(\\.?"+s.type.replace(".","\\.").replace("rparen",".paren").replace(/\b(?:end)\b/,"(?:start|begin|end)").replace(/-close\b/,"-(close|open)")+")+"));for(var c=p.column-l.getCurrentTokenColumn()-2,m=s.value;;){for(;c>=0;){var h=m.charAt(c);if(h==i){if(n-=1,n==0)return{row:l.getCurrentTokenRow(),column:c+l.getCurrentTokenColumn()}}else h==a&&(n+=1);c-=1}do s=l.stepBackward();while(s&&!o.test(s.type));if(s==null)break;m=s.value,c=m.length-1}return null}},this.$findClosingBracket=function(a,p,o){var i=this.$brackets[a],n=1,l=new d(this,p.row,p.column),s=l.getCurrentToken();if(s||(s=l.stepForward()),!!s){o||(o=new RegExp("(\\.?"+s.type.replace(".","\\.").replace("lparen",".paren").replace(/\b(?:start|begin)\b/,"(?:start|begin|end)").replace(/-open\b/,"-(close|open)")+")+"));for(var c=p.column-l.getCurrentTokenColumn();;){for(var m=s.value,h=m.length;c<h;){var v=m.charAt(c);if(v==i){if(n-=1,n==0)return{row:l.getCurrentTokenRow(),column:c+l.getCurrentTokenColumn()}}else v==a&&(n+=1);c+=1}do s=l.stepForward();while(s&&!o.test(s.type));if(s==null)break;c=0}return null}},this.getMatchingTags=function(a){var p=new d(this,a.row,a.column),o=this.$findTagName(p);if(o){var i=p.stepBackward();return i.value==="<"?this.$findClosingTag(p,o):this.$findOpeningTag(p,o)}},this.$findTagName=function(a){var p=a.getCurrentToken(),o=!1,i=!1;if(p&&p.type.indexOf("tag-name")===-1)do i?p=a.stepBackward():p=a.stepForward(),p&&(p.value==="/>"?i=!0:p.type.indexOf("tag-name")!==-1&&(o=!0));while(p&&!o);return p},this.$findClosingTag=function(a,p){var o,i=p.value,n=p.value,l=0,s=new u(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+1);p=a.stepForward();var c=new u(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+p.value.length),m=!1;do{if(o=p,o.type.indexOf("tag-close")!==-1&&!m){var h=new u(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+1);m=!0}if(p=a.stepForward(),p){if(p.value===">"&&!m){var h=new u(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+1);m=!0}if(p.type.indexOf("tag-name")!==-1){if(i=p.value,n===i){if(o.value==="<")l++;else if(o.value==="</"&&(l--,l<0)){a.stepBackward();var v=new u(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+2);p=a.stepForward();var k=new u(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+p.value.length);if(p.type.indexOf("tag-close")===-1&&(p=a.stepForward()),p&&p.value===">")var x=new u(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+1);else return}}}else if(n===i&&p.value==="/>"&&(l--,l<0))var v=new u(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+2),k=v,x=k,h=new u(c.end.row,c.end.column,c.end.row,c.end.column+1)}}while(p&&l>=0);if(s&&h&&v&&x&&c&&k)return{openTag:new u(s.start.row,s.start.column,h.end.row,h.end.column),closeTag:new u(v.start.row,v.start.column,x.end.row,x.end.column),openTagName:c,closeTagName:k}},this.$findOpeningTag=function(a,p){var o=a.getCurrentToken(),i=p.value,n=0,l=a.getCurrentTokenRow(),s=a.getCurrentTokenColumn(),c=s+2,m=new u(l,s,l,c);a.stepForward();var h=new u(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+p.value.length);if(p.type.indexOf("tag-close")===-1&&(p=a.stepForward()),!(!p||p.value!==">")){var v=new u(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+1);a.stepBackward(),a.stepBackward();do if(p=o,l=a.getCurrentTokenRow(),s=a.getCurrentTokenColumn(),c=s+p.value.length,o=a.stepBackward(),p){if(p.type.indexOf("tag-name")!==-1){if(i===p.value)if(o.value==="<"){if(n++,n>0){var k=new u(l,s,l,c),x=new u(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+1);do p=a.stepForward();while(p&&p.value!==">");var A=new u(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+1)}}else o.value==="</"&&n--}else if(p.value==="/>"){for(var S=0,f=o;f;){if(f.type.indexOf("tag-name")!==-1&&f.value===i){n--;break}else if(f.value==="<")break;f=a.stepBackward(),S++}for(var L=0;L<S;L++)a.stepForward()}}while(o&&n<=0);if(x&&A&&m&&v&&k&&h)return{openTag:new u(x.start.row,x.start.column,A.end.row,A.end.column),closeTag:new u(m.start.row,m.start.column,v.end.row,v.end.column),openTagName:k,closeTagName:h}}}}t.BracketMatch=g});ace.define("ace/edit_session",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/bidihandler","ace/config","ace/lib/event_emitter","ace/selection","ace/mode/text","ace/range","ace/document","ace/background_tokenizer","ace/search_highlight","ace/undomanager","ace/edit_session/folding","ace/edit_session/bracket_match"],function(e,t,r){"use strict";var d=e("./lib/oop"),u=e("./lib/lang"),g=e("./bidihandler").BidiHandler,a=e("./config"),p=e("./lib/event_emitter").EventEmitter,o=e("./selection").Selection,i=e("./mode/text").Mode,n=e("./range").Range,l=e("./document").Document,s=e("./background_tokenizer").BackgroundTokenizer,c=e("./search_highlight").SearchHighlight,m=e("./undomanager").UndoManager,h=function(){function C(w,y){this.doc,this.$breakpoints=[],this.$decorations=[],this.$frontMarkers={},this.$backMarkers={},this.$markerId=1,this.$undoSelect=!0,this.$foldData=[],this.id="session"+ ++C.$uid,this.$foldData.toString=function(){return this.join(`
`)},this.bgTokenizer=new s(new i().getTokenizer(),this);var b=this;this.bgTokenizer.on("update",function(_){b._signal("tokenizerUpdate",_)}),this.on("changeFold",this.onChangeFold.bind(this)),this.$onChange=this.onChange.bind(this),(typeof w!="object"||!w.getLine)&&(w=new l(w)),this.setDocument(w),this.selection=new o(this),this.$bidiHandler=new g(this),a.resetOptions(this),this.setMode(y),a._signal("session",this),this.destroyed=!1}return C.prototype.setDocument=function(w){this.doc&&this.doc.off("change",this.$onChange),this.doc=w,w.on("change",this.$onChange,!0),this.bgTokenizer.setDocument(this.getDocument()),this.resetCaches()},C.prototype.getDocument=function(){return this.doc},C.prototype.$resetRowCache=function(w){if(!w){this.$docRowCache=[],this.$screenRowCache=[];return}var y=this.$docRowCache.length,b=this.$getRowCacheIndex(this.$docRowCache,w)+1;y>b&&(this.$docRowCache.splice(b,y),this.$screenRowCache.splice(b,y))},C.prototype.$getRowCacheIndex=function(w,y){for(var b=0,_=w.length-1;b<=_;){var E=b+_>>1,R=w[E];if(y>R)b=E+1;else if(y<R)_=E-1;else return E}return b-1},C.prototype.resetCaches=function(){this.$modified=!0,this.$wrapData=[],this.$rowLengthCache=[],this.$resetRowCache(0),this.destroyed||this.bgTokenizer.start(0)},C.prototype.onChangeFold=function(w){var y=w.data;this.$resetRowCache(y.start.row)},C.prototype.onChange=function(w){this.$modified=!0,this.$bidiHandler.onChange(w),this.$resetRowCache(w.start.row);var y=this.$updateInternalDataOnChange(w);!this.$fromUndo&&this.$undoManager&&(y&&y.length&&(this.$undoManager.add({action:"removeFolds",folds:y},this.mergeUndoDeltas),this.mergeUndoDeltas=!0),this.$undoManager.add(w,this.mergeUndoDeltas),this.mergeUndoDeltas=!0,this.$informUndoManager.schedule()),this.bgTokenizer.$updateOnChange(w),this._signal("change",w)},C.prototype.setValue=function(w){this.doc.setValue(w),this.selection.moveTo(0,0),this.$resetRowCache(0),this.setUndoManager(this.$undoManager),this.getUndoManager().reset()},C.fromJSON=function(w){typeof w=="string"&&(w=JSON.parse(w));var y=new m;y.$undoStack=w.history.undo,y.$redoStack=w.history.redo,y.mark=w.history.mark,y.$rev=w.history.rev;var b=new C(w.value);return w.folds.forEach(function(_){b.addFold("...",n.fromPoints(_.start,_.end))}),b.setAnnotations(w.annotations),b.setBreakpoints(w.breakpoints),b.setMode(w.mode),b.setScrollLeft(w.scrollLeft),b.setScrollTop(w.scrollTop),b.setUndoManager(y),b.selection.fromJSON(w.selection),b},C.prototype.toJSON=function(){return{annotations:this.$annotations,breakpoints:this.$breakpoints,folds:this.getAllFolds().map(function(w){return w.range}),history:this.getUndoManager(),mode:this.$mode.$id,scrollLeft:this.$scrollLeft,scrollTop:this.$scrollTop,selection:this.selection.toJSON(),value:this.doc.getValue()}},C.prototype.toString=function(){return this.doc.getValue()},C.prototype.getSelection=function(){return this.selection},C.prototype.getState=function(w){return this.bgTokenizer.getState(w)},C.prototype.getTokens=function(w){return this.bgTokenizer.getTokens(w)},C.prototype.getTokenAt=function(w,y){var b=this.bgTokenizer.getTokens(w),_,E=0;if(y==null){var R=b.length-1;E=this.getLine(w).length}else for(var R=0;R<b.length&&(E+=b[R].value.length,!(E>=y));R++);return _=b[R],_?(_.index=R,_.start=E-_.value.length,_):null},C.prototype.setUndoManager=function(w){if(this.$undoManager=w,this.$informUndoManager&&this.$informUndoManager.cancel(),w){var y=this;w.addSession(this),this.$syncInformUndoManager=function(){y.$informUndoManager.cancel(),y.mergeUndoDeltas=!1},this.$informUndoManager=u.delayedCall(this.$syncInformUndoManager)}else this.$syncInformUndoManager=function(){}},C.prototype.markUndoGroup=function(){this.$syncInformUndoManager&&this.$syncInformUndoManager()},C.prototype.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager},C.prototype.getTabString=function(){return this.getUseSoftTabs()?u.stringRepeat(" ",this.getTabSize()):"	"},C.prototype.setUseSoftTabs=function(w){this.setOption("useSoftTabs",w)},C.prototype.getUseSoftTabs=function(){return this.$useSoftTabs&&!this.$mode.$indentWithTabs},C.prototype.setTabSize=function(w){this.setOption("tabSize",w)},C.prototype.getTabSize=function(){return this.$tabSize},C.prototype.isTabStop=function(w){return this.$useSoftTabs&&w.column%this.$tabSize===0},C.prototype.setNavigateWithinSoftTabs=function(w){this.setOption("navigateWithinSoftTabs",w)},C.prototype.getNavigateWithinSoftTabs=function(){return this.$navigateWithinSoftTabs},C.prototype.setOverwrite=function(w){this.setOption("overwrite",w)},C.prototype.getOverwrite=function(){return this.$overwrite},C.prototype.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)},C.prototype.addGutterDecoration=function(w,y){this.$decorations[w]||(this.$decorations[w]=""),this.$decorations[w]+=" "+y,this._signal("changeBreakpoint",{})},C.prototype.removeGutterDecoration=function(w,y){this.$decorations[w]=(this.$decorations[w]||"").replace(" "+y,""),this._signal("changeBreakpoint",{})},C.prototype.getBreakpoints=function(){return this.$breakpoints},C.prototype.setBreakpoints=function(w){this.$breakpoints=[];for(var y=0;y<w.length;y++)this.$breakpoints[w[y]]="ace_breakpoint";this._signal("changeBreakpoint",{})},C.prototype.clearBreakpoints=function(){this.$breakpoints=[],this._signal("changeBreakpoint",{})},C.prototype.setBreakpoint=function(w,y){y===void 0&&(y="ace_breakpoint"),y?this.$breakpoints[w]=y:delete this.$breakpoints[w],this._signal("changeBreakpoint",{})},C.prototype.clearBreakpoint=function(w){delete this.$breakpoints[w],this._signal("changeBreakpoint",{})},C.prototype.addMarker=function(w,y,b,_){var E=this.$markerId++,R={range:w,type:b||"line",renderer:typeof b=="function"?b:null,clazz:y,inFront:!!_,id:E};return _?(this.$frontMarkers[E]=R,this._signal("changeFrontMarker")):(this.$backMarkers[E]=R,this._signal("changeBackMarker")),E},C.prototype.addDynamicMarker=function(w,y){if(w.update){var b=this.$markerId++;return w.id=b,w.inFront=!!y,y?(this.$frontMarkers[b]=w,this._signal("changeFrontMarker")):(this.$backMarkers[b]=w,this._signal("changeBackMarker")),w}},C.prototype.removeMarker=function(w){var y=this.$frontMarkers[w]||this.$backMarkers[w];if(y){var b=y.inFront?this.$frontMarkers:this.$backMarkers;delete b[w],this._signal(y.inFront?"changeFrontMarker":"changeBackMarker")}},C.prototype.getMarkers=function(w){return w?this.$frontMarkers:this.$backMarkers},C.prototype.highlight=function(w){if(!this.$searchHighlight){var y=new c(null,"ace_selected-word","text");this.$searchHighlight=this.addDynamicMarker(y)}this.$searchHighlight.setRegexp(w)},C.prototype.highlightLines=function(w,y,b,_){typeof y!="number"&&(b=y,y=w),b||(b="ace_step");var E=new n(w,0,y,1/0);return E.id=this.addMarker(E,b,"fullLine",_),E},C.prototype.setAnnotations=function(w){this.$annotations=w,this._signal("changeAnnotation",{})},C.prototype.getAnnotations=function(){return this.$annotations||[]},C.prototype.clearAnnotations=function(){this.setAnnotations([])},C.prototype.$detectNewLine=function(w){var y=w.match(/^.*?(\r?\n)/m);y?this.$autoNewLine=y[1]:this.$autoNewLine=`
`},C.prototype.getWordRange=function(w,y){var b=this.getLine(w),_=!1;if(y>0&&(_=!!b.charAt(y-1).match(this.tokenRe)),_||(_=!!b.charAt(y).match(this.tokenRe)),_)var E=this.tokenRe;else if(/^\s+$/.test(b.slice(y-1,y+1)))var E=/\s/;else var E=this.nonTokenRe;var R=y;if(R>0){do R--;while(R>=0&&b.charAt(R).match(E));R++}for(var M=y;M<b.length&&b.charAt(M).match(E);)M++;return new n(w,R,w,M)},C.prototype.getAWordRange=function(w,y){for(var b=this.getWordRange(w,y),_=this.getLine(b.end.row);_.charAt(b.end.column).match(/[ \t]/);)b.end.column+=1;return b},C.prototype.setNewLineMode=function(w){this.doc.setNewLineMode(w)},C.prototype.getNewLineMode=function(){return this.doc.getNewLineMode()},C.prototype.setUseWorker=function(w){this.setOption("useWorker",w)},C.prototype.getUseWorker=function(){return this.$useWorker},C.prototype.onReloadTokenizer=function(w){var y=w.data;this.bgTokenizer.start(y.first),this._signal("tokenizerUpdate",w)},C.prototype.setMode=function(w,y){if(w&&typeof w=="object"){if(w.getTokenizer)return this.$onChangeMode(w);var b=w,_=b.path}else _=w||"ace/mode/text";if(this.$modes["ace/mode/text"]||(this.$modes["ace/mode/text"]=new i),this.$modes[_]&&!b){this.$onChangeMode(this.$modes[_]),y&&y();return}this.$modeId=_,a.loadModule(["mode",_],function(E){if(this.$modeId!==_)return y&&y();this.$modes[_]&&!b?this.$onChangeMode(this.$modes[_]):E&&E.Mode&&(E=new E.Mode(b),b||(this.$modes[_]=E,E.$id=_),this.$onChangeMode(E)),y&&y()}.bind(this)),this.$mode||this.$onChangeMode(this.$modes["ace/mode/text"],!0)},C.prototype.$onChangeMode=function(w,y){if(y||(this.$modeId=w.$id),this.$mode!==w){var b=this.$mode;this.$mode=w,this.$stopWorker(),this.$useWorker&&this.$startWorker();var _=w.getTokenizer();if(_.on!==void 0){var E=this.onReloadTokenizer.bind(this);_.on("update",E)}this.bgTokenizer.setTokenizer(_),this.bgTokenizer.setDocument(this.getDocument()),this.tokenRe=w.tokenRe,this.nonTokenRe=w.nonTokenRe,y||(w.attachToSession&&w.attachToSession(this),this.$options.wrapMethod.set.call(this,this.$wrapMethod),this.$setFolding(w.foldingRules),this.bgTokenizer.start(0),this._emit("changeMode",{oldMode:b,mode:w}))}},C.prototype.$stopWorker=function(){this.$worker&&(this.$worker.terminate(),this.$worker=null)},C.prototype.$startWorker=function(){try{this.$worker=this.$mode.createWorker(this)}catch(w){a.warn("Could not load worker",w),this.$worker=null}},C.prototype.getMode=function(){return this.$mode},C.prototype.setScrollTop=function(w){this.$scrollTop===w||isNaN(w)||(this.$scrollTop=w,this._signal("changeScrollTop",w))},C.prototype.getScrollTop=function(){return this.$scrollTop},C.prototype.setScrollLeft=function(w){this.$scrollLeft===w||isNaN(w)||(this.$scrollLeft=w,this._signal("changeScrollLeft",w))},C.prototype.getScrollLeft=function(){return this.$scrollLeft},C.prototype.getScreenWidth=function(){return this.$computeWidth(),this.lineWidgets?Math.max(this.getLineWidgetMaxWidth(),this.screenWidth):this.screenWidth},C.prototype.getLineWidgetMaxWidth=function(){if(this.lineWidgetsWidth!=null)return this.lineWidgetsWidth;var w=0;return this.lineWidgets.forEach(function(y){y&&y.screenWidth>w&&(w=y.screenWidth)}),this.lineWidgetWidth=w},C.prototype.$computeWidth=function(w){if(this.$modified||w){if(this.$modified=!1,this.$useWrapMode)return this.screenWidth=this.$wrapLimit;for(var y=this.doc.getAllLines(),b=this.$rowLengthCache,_=0,E=0,R=this.$foldData[E],M=R?R.start.row:1/0,I=y.length,P=0;P<I;P++){if(P>M){if(P=R.end.row+1,P>=I)break;R=this.$foldData[E++],M=R?R.start.row:1/0}b[P]==null&&(b[P]=this.$getStringScreenWidth(y[P])[0]),b[P]>_&&(_=b[P])}this.screenWidth=_}},C.prototype.getLine=function(w){return this.doc.getLine(w)},C.prototype.getLines=function(w,y){return this.doc.getLines(w,y)},C.prototype.getLength=function(){return this.doc.getLength()},C.prototype.getTextRange=function(w){return this.doc.getTextRange(w||this.selection.getRange())},C.prototype.insert=function(w,y){return this.doc.insert(w,y)},C.prototype.remove=function(w){return this.doc.remove(w)},C.prototype.removeFullLines=function(w,y){return this.doc.removeFullLines(w,y)},C.prototype.undoChanges=function(w,y){if(w.length){this.$fromUndo=!0;for(var b=w.length-1;b!=-1;b--){var _=w[b];_.action=="insert"||_.action=="remove"?this.doc.revertDelta(_):_.folds&&this.addFolds(_.folds)}!y&&this.$undoSelect&&(w.selectionBefore?this.selection.fromJSON(w.selectionBefore):this.selection.setRange(this.$getUndoSelection(w,!0))),this.$fromUndo=!1}},C.prototype.redoChanges=function(w,y){if(w.length){this.$fromUndo=!0;for(var b=0;b<w.length;b++){var _=w[b];(_.action=="insert"||_.action=="remove")&&this.doc.$safeApplyDelta(_)}!y&&this.$undoSelect&&(w.selectionAfter?this.selection.fromJSON(w.selectionAfter):this.selection.setRange(this.$getUndoSelection(w,!1))),this.$fromUndo=!1}},C.prototype.setUndoSelect=function(w){this.$undoSelect=w},C.prototype.$getUndoSelection=function(w,y){function b(I){return y?I.action!=="insert":I.action==="insert"}for(var _,E,R=0;R<w.length;R++){var M=w[R];if(M.start){if(!_){b(M)?_=n.fromPoints(M.start,M.end):_=n.fromPoints(M.start,M.start);continue}b(M)?(E=M.start,_.compare(E.row,E.column)==-1&&_.setStart(E),E=M.end,_.compare(E.row,E.column)==1&&_.setEnd(E)):(E=M.start,_.compare(E.row,E.column)==-1&&(_=n.fromPoints(M.start,M.start)))}}return _},C.prototype.replace=function(w,y){return this.doc.replace(w,y)},C.prototype.moveText=function(w,y,b){var _=this.getTextRange(w),E=this.getFoldsInRange(w),R=n.fromPoints(y,y);if(!b){this.remove(w);var M=w.start.row-w.end.row,I=M?-w.end.column:w.start.column-w.end.column;I&&(R.start.row==w.end.row&&R.start.column>w.end.column&&(R.start.column+=I),R.end.row==w.end.row&&R.end.column>w.end.column&&(R.end.column+=I)),M&&R.start.row>=w.end.row&&(R.start.row+=M,R.end.row+=M)}if(R.end=this.insert(R.start,_),E.length){var P=w.start,O=R.start,M=O.row-P.row,I=O.column-P.column;this.addFolds(E.map(function(F){return F=F.clone(),F.start.row==P.row&&(F.start.column+=I),F.end.row==P.row&&(F.end.column+=I),F.start.row+=M,F.end.row+=M,F}))}return R},C.prototype.indentRows=function(w,y,b){b=b.replace(/\t/g,this.getTabString());for(var _=w;_<=y;_++)this.doc.insertInLine({row:_,column:0},b)},C.prototype.outdentRows=function(w){for(var y=w.collapseRows(),b=new n(0,0,0,0),_=this.getTabSize(),E=y.start.row;E<=y.end.row;++E){var R=this.getLine(E);b.start.row=E,b.end.row=E;for(var M=0;M<_&&R.charAt(M)==" ";++M);M<_&&R.charAt(M)=="	"?(b.start.column=M,b.end.column=M+1):(b.start.column=0,b.end.column=M),this.remove(b)}},C.prototype.$moveLines=function(w,y,b){if(w=this.getRowFoldStart(w),y=this.getRowFoldEnd(y),b<0){var _=this.getRowFoldStart(w+b);if(_<0)return 0;var E=_-w}else if(b>0){var _=this.getRowFoldEnd(y+b);if(_>this.doc.getLength()-1)return 0;var E=_-y}else{w=this.$clipRowToDocument(w),y=this.$clipRowToDocument(y);var E=y-w+1}var R=new n(w,0,y,Number.MAX_VALUE),M=this.getFoldsInRange(R).map(function(P){return P=P.clone(),P.start.row+=E,P.end.row+=E,P}),I=b==0?this.doc.getLines(w,y):this.doc.removeFullLines(w,y);return this.doc.insertFullLines(w+E,I),M.length&&this.addFolds(M),E},C.prototype.moveLinesUp=function(w,y){return this.$moveLines(w,y,-1)},C.prototype.moveLinesDown=function(w,y){return this.$moveLines(w,y,1)},C.prototype.duplicateLines=function(w,y){return this.$moveLines(w,y,0)},C.prototype.$clipRowToDocument=function(w){return Math.max(0,Math.min(w,this.doc.getLength()-1))},C.prototype.$clipColumnToRow=function(w,y){return y<0?0:Math.min(this.doc.getLine(w).length,y)},C.prototype.$clipPositionToDocument=function(w,y){if(y=Math.max(0,y),w<0)w=0,y=0;else{var b=this.doc.getLength();w>=b?(w=b-1,y=this.doc.getLine(b-1).length):y=Math.min(this.doc.getLine(w).length,y)}return{row:w,column:y}},C.prototype.$clipRangeToDocument=function(w){w.start.row<0?(w.start.row=0,w.start.column=0):w.start.column=this.$clipColumnToRow(w.start.row,w.start.column);var y=this.doc.getLength()-1;return w.end.row>y?(w.end.row=y,w.end.column=this.doc.getLine(y).length):w.end.column=this.$clipColumnToRow(w.end.row,w.end.column),w},C.prototype.setUseWrapMode=function(w){if(w!=this.$useWrapMode){if(this.$useWrapMode=w,this.$modified=!0,this.$resetRowCache(0),w){var y=this.getLength();this.$wrapData=Array(y),this.$updateWrapData(0,y-1)}this._signal("changeWrapMode")}},C.prototype.getUseWrapMode=function(){return this.$useWrapMode},C.prototype.setWrapLimitRange=function(w,y){(this.$wrapLimitRange.min!==w||this.$wrapLimitRange.max!==y)&&(this.$wrapLimitRange={min:w,max:y},this.$modified=!0,this.$bidiHandler.markAsDirty(),this.$useWrapMode&&this._signal("changeWrapMode"))},C.prototype.adjustWrapLimit=function(w,y){var b=this.$wrapLimitRange;b.max<0&&(b={min:y,max:y});var _=this.$constrainWrapLimit(w,b.min,b.max);return _!=this.$wrapLimit&&_>1?(this.$wrapLimit=_,this.$modified=!0,this.$useWrapMode&&(this.$updateWrapData(0,this.getLength()-1),this.$resetRowCache(0),this._signal("changeWrapLimit")),!0):!1},C.prototype.$constrainWrapLimit=function(w,y,b){return y&&(w=Math.max(y,w)),b&&(w=Math.min(b,w)),w},C.prototype.getWrapLimit=function(){return this.$wrapLimit},C.prototype.setWrapLimit=function(w){this.setWrapLimitRange(w,w)},C.prototype.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}},C.prototype.$updateInternalDataOnChange=function(w){var y=this.$useWrapMode,b=w.action,_=w.start,E=w.end,R=_.row,M=E.row,I=M-R,P=null;if(this.$updating=!0,I!=0)if(b==="remove"){this[y?"$wrapData":"$rowLengthCache"].splice(R,I);var O=this.$foldData;P=this.getFoldsInRange(w),this.removeFolds(P);var N=this.getFoldLine(E.row),D=0;if(N){N.addRemoveChars(E.row,E.column,_.column-E.column),N.shiftRow(-I);var F=this.getFoldLine(R);F&&F!==N&&(F.merge(N),N=F),D=O.indexOf(N)+1}for(D;D<O.length;D++){var N=O[D];N.start.row>=E.row&&N.shiftRow(-I)}M=R}else{var z=Array(I);z.unshift(R,0);var W=y?this.$wrapData:this.$rowLengthCache;W.splice.apply(W,z);var O=this.$foldData,N=this.getFoldLine(R),D=0;if(N){var j=N.range.compareInside(_.row,_.column);j==0?(N=N.split(_.row,_.column),N&&(N.shiftRow(I),N.addRemoveChars(M,0,E.column-_.column))):j==-1&&(N.addRemoveChars(R,0,E.column-_.column),N.shiftRow(I)),D=O.indexOf(N)+1}for(D;D<O.length;D++){var N=O[D];N.start.row>=R&&N.shiftRow(I)}}else{I=Math.abs(w.start.column-w.end.column),b==="remove"&&(P=this.getFoldsInRange(w),this.removeFolds(P),I=-I);var N=this.getFoldLine(R);N&&N.addRemoveChars(R,_.column,I)}return y&&this.$wrapData.length!=this.doc.getLength()&&console.error("doc.getLength() and $wrapData.length have to be the same!"),this.$updating=!1,y?this.$updateWrapData(R,M):this.$updateRowLengthCache(R,M),P},C.prototype.$updateRowLengthCache=function(w,y){this.$rowLengthCache[w]=null,this.$rowLengthCache[y]=null},C.prototype.$updateWrapData=function(w,y){var b=this.doc.getAllLines(),_=this.getTabSize(),E=this.$wrapData,R=this.$wrapLimit,M,I,P=w;for(y=Math.min(y,b.length-1);P<=y;)I=this.getFoldLine(P,I),I?(M=[],I.walk(function(O,N,D,F){var z;if(O!=null){z=this.$getDisplayTokens(O,M.length),z[0]=x;for(var W=1;W<z.length;W++)z[W]=A}else z=this.$getDisplayTokens(b[N].substring(F,D),M.length);M=M.concat(z)}.bind(this),I.end.row,b[I.end.row].length+1),E[I.start.row]=this.$computeWrapSplits(M,R,_),P=I.end.row+1):(M=this.$getDisplayTokens(b[P]),E[P]=this.$computeWrapSplits(M,R,_),P++)},C.prototype.$computeWrapSplits=function(w,y,b){if(w.length==0)return[];var _=[],E=w.length,R=0,M=0,I=this.$wrapAsCode,P=this.$indentedSoftWrap,O=y<=Math.max(2*b,8)||P===!1?0:Math.floor(y/2);function N(){var j=0;if(O===0)return j;if(P)for(var Z=0;Z<w.length;Z++){var Y=w[Z];if(Y==f)j+=1;else if(Y==L)j+=b;else{if(Y==$)continue;break}}return I&&P!==!1&&(j+=b),Math.min(j,O)}function D(j){for(var Z=j-R,Y=R;Y<j;Y++){var q=w[Y];(q===12||q===2)&&(Z-=1)}_.length||(F=N(),_.indent=F),M+=Z,_.push(M),R=j}for(var F=0;E-R>y-F;){var z=R+y-F;if(w[z-1]>=f&&w[z]>=f){D(z);continue}if(w[z]==x||w[z]==A){for(z;z!=R-1&&w[z]!=x;z--);if(z>R){D(z);continue}for(z=R+y,z;z<w.length&&w[z]==A;z++);if(z==w.length)break;D(z);continue}for(var W=Math.max(z-(y-(y>>2)),R-1);z>W&&w[z]<x;)z--;if(I){for(;z>W&&w[z]<x;)z--;for(;z>W&&w[z]==S;)z--}else for(;z>W&&w[z]<f;)z--;if(z>W){D(++z);continue}z=R+y,w[z]==k&&z--,D(z-F)}return _},C.prototype.$getDisplayTokens=function(w,y){var b=[],_;y=y||0;for(var E=0;E<w.length;E++){var R=w.charCodeAt(E);if(R==9){_=this.getScreenTabSize(b.length+y),b.push(L);for(var M=1;M<_;M++)b.push($)}else R==32?b.push(f):R>39&&R<48||R>57&&R<64?b.push(S):R>=4352&&T(R)?b.push(v,k):b.push(v)}return b},C.prototype.$getStringScreenWidth=function(w,y,b){if(y==0)return[0,0];y==null&&(y=1/0),b=b||0;var _,E;for(E=0;E<w.length&&(_=w.charCodeAt(E),_==9?b+=this.getScreenTabSize(b):_>=4352&&T(_)?b+=2:b+=1,!(b>y));E++);return[b,E]},C.prototype.getRowLength=function(w){var y=1;return this.lineWidgets&&(y+=this.lineWidgets[w]&&this.lineWidgets[w].rowCount||0),!this.$useWrapMode||!this.$wrapData[w]?y:this.$wrapData[w].length+y},C.prototype.getRowLineCount=function(w){return!this.$useWrapMode||!this.$wrapData[w]?1:this.$wrapData[w].length+1},C.prototype.getRowWrapIndent=function(w){if(this.$useWrapMode){var y=this.screenToDocumentPosition(w,Number.MAX_VALUE),b=this.$wrapData[y.row];return b.length&&b[0]<y.column?b.indent:0}else return 0},C.prototype.getScreenLastRowColumn=function(w){var y=this.screenToDocumentPosition(w,Number.MAX_VALUE);return this.documentToScreenColumn(y.row,y.column)},C.prototype.getDocumentLastRowColumn=function(w,y){var b=this.documentToScreenRow(w,y);return this.getScreenLastRowColumn(b)},C.prototype.getDocumentLastRowColumnPosition=function(w,y){var b=this.documentToScreenRow(w,y);return this.screenToDocumentPosition(b,Number.MAX_VALUE/10)},C.prototype.getRowSplitData=function(w){if(this.$useWrapMode)return this.$wrapData[w]},C.prototype.getScreenTabSize=function(w){return this.$tabSize-(w%this.$tabSize|0)},C.prototype.screenToDocumentRow=function(w,y){return this.screenToDocumentPosition(w,y).row},C.prototype.screenToDocumentColumn=function(w,y){return this.screenToDocumentPosition(w,y).column},C.prototype.screenToDocumentPosition=function(w,y,b){if(w<0)return{row:0,column:0};var _,E=0,R=0,M,I=0,P=0,O=this.$screenRowCache,N=this.$getRowCacheIndex(O,w),D=O.length;if(D&&N>=0)var I=O[N],E=this.$docRowCache[N],F=w>O[D-1];else var F=!D;for(var z=this.getLength()-1,W=this.getNextFoldLine(E),j=W?W.start.row:1/0;I<=w&&(P=this.getRowLength(E),!(I+P>w||E>=z));)I+=P,E++,E>j&&(E=W.end.row+1,W=this.getNextFoldLine(E,W),j=W?W.start.row:1/0),F&&(this.$docRowCache.push(E),this.$screenRowCache.push(I));if(W&&W.start.row<=E)_=this.getFoldDisplayLine(W),E=W.start.row;else{if(I+P<=w||E>z)return{row:z,column:this.getLine(z).length};_=this.getLine(E),W=null}var Z=0,Y=Math.floor(w-I);if(this.$useWrapMode){var q=this.$wrapData[E];q&&(M=q[Y],Y>0&&q.length&&(Z=q.indent,R=q[Y-1]||q[q.length-1],_=_.substring(R)))}return b!==void 0&&this.$bidiHandler.isBidiRow(I+Y,E,Y)&&(y=this.$bidiHandler.offsetToCol(b)),R+=this.$getStringScreenWidth(_,y-Z)[1],this.$useWrapMode&&R>=M&&(R=M-1),W?W.idxToPosition(R):{row:E,column:R}},C.prototype.documentToScreenPosition=function(w,y){if(typeof y>"u")var b=this.$clipPositionToDocument(w.row,w.column);else b=this.$clipPositionToDocument(w,y);w=b.row,y=b.column;var _=0,E=null,R=null;R=this.getFoldAt(w,y,1),R&&(w=R.start.row,y=R.start.column);var M,I=0,P=this.$docRowCache,O=this.$getRowCacheIndex(P,w),N=P.length;if(N&&O>=0)var I=P[O],_=this.$screenRowCache[O],D=w>P[N-1];else var D=!N;for(var F=this.getNextFoldLine(I),z=F?F.start.row:1/0;I<w;){if(I>=z){if(M=F.end.row+1,M>w)break;F=this.getNextFoldLine(M,F),z=F?F.start.row:1/0}else M=I+1;_+=this.getRowLength(I),I=M,D&&(this.$docRowCache.push(I),this.$screenRowCache.push(_))}var W="";F&&I>=z?(W=this.getFoldDisplayLine(F,w,y),E=F.start.row):(W=this.getLine(w).substring(0,y),E=w);var j=0;if(this.$useWrapMode){var Z=this.$wrapData[E];if(Z){for(var Y=0;W.length>=Z[Y];)_++,Y++;W=W.substring(Z[Y-1]||0,W.length),j=Y>0?Z.indent:0}}return this.lineWidgets&&this.lineWidgets[I]&&this.lineWidgets[I].rowsAbove&&(_+=this.lineWidgets[I].rowsAbove),{row:_,column:j+this.$getStringScreenWidth(W)[0]}},C.prototype.documentToScreenColumn=function(w,y){return this.documentToScreenPosition(w,y).column},C.prototype.documentToScreenRow=function(w,y){return this.documentToScreenPosition(w,y).row},C.prototype.getScreenLength=function(){var w=0,y=null;if(this.$useWrapMode)for(var E=this.$wrapData.length,R=0,_=0,y=this.$foldData[_++],M=y?y.start.row:1/0;R<E;){var I=this.$wrapData[R];w+=I?I.length+1:1,R++,R>M&&(R=y.end.row+1,y=this.$foldData[_++],M=y?y.start.row:1/0)}else{w=this.getLength();for(var b=this.$foldData,_=0;_<b.length;_++)y=b[_],w-=y.end.row-y.start.row}return this.lineWidgets&&(w+=this.$getWidgetScreenLength()),w},C.prototype.$setFontMetrics=function(w){this.$enableVarChar&&(this.$getStringScreenWidth=function(y,b,_){if(b===0)return[0,0];b||(b=1/0),_=_||0;var E,R;for(R=0;R<y.length&&(E=y.charAt(R),E==="	"?_+=this.getScreenTabSize(_):_+=w.getCharacterWidth(E),!(_>b));R++);return[_,R]})},C.prototype.getPrecedingCharacter=function(){var w=this.selection.getCursor();if(w.column===0)return w.row===0?"":this.doc.getNewLineCharacter();var y=this.getLine(w.row);return y[w.column-1]},C.prototype.destroy=function(){this.destroyed||(this.bgTokenizer.setDocument(null),this.bgTokenizer.cleanup(),this.destroyed=!0),this.$stopWorker(),this.removeAllListeners(),this.doc&&this.doc.off("change",this.$onChange),this.selection.detach()},C}();h.$uid=0,h.prototype.$modes=a.$modes,h.prototype.getValue=h.prototype.toString,h.prototype.$defaultUndoManager={undo:function(){},redo:function(){},hasUndo:function(){},hasRedo:function(){},reset:function(){},add:function(){},addSelection:function(){},startNewGroup:function(){},addSession:function(){}},h.prototype.$overwrite=!1,h.prototype.$mode=null,h.prototype.$modeId=null,h.prototype.$scrollTop=0,h.prototype.$scrollLeft=0,h.prototype.$wrapLimit=80,h.prototype.$useWrapMode=!1,h.prototype.$wrapLimitRange={min:null,max:null},h.prototype.lineWidgets=null,h.prototype.isFullWidth=T,d.implement(h.prototype,p);var v=1,k=2,x=3,A=4,S=9,f=10,L=11,$=12;function T(C){return C<4352?!1:C>=4352&&C<=4447||C>=4515&&C<=4519||C>=4602&&C<=4607||C>=9001&&C<=9002||C>=11904&&C<=11929||C>=11931&&C<=12019||C>=12032&&C<=12245||C>=12272&&C<=12283||C>=12288&&C<=12350||C>=12353&&C<=12438||C>=12441&&C<=12543||C>=12549&&C<=12589||C>=12593&&C<=12686||C>=12688&&C<=12730||C>=12736&&C<=12771||C>=12784&&C<=12830||C>=12832&&C<=12871||C>=12880&&C<=13054||C>=13056&&C<=19903||C>=19968&&C<=42124||C>=42128&&C<=42182||C>=43360&&C<=43388||C>=44032&&C<=55203||C>=55216&&C<=55238||C>=55243&&C<=55291||C>=63744&&C<=64255||C>=65040&&C<=65049||C>=65072&&C<=65106||C>=65108&&C<=65126||C>=65128&&C<=65131||C>=65281&&C<=65376||C>=65504&&C<=65510}e("./edit_session/folding").Folding.call(h.prototype),e("./edit_session/bracket_match").BracketMatch.call(h.prototype),a.defineOptions(h.prototype,"session",{wrap:{set:function(C){if(!C||C=="off"?C=!1:C=="free"?C=!0:C=="printMargin"?C=-1:typeof C=="string"&&(C=parseInt(C,10)||!1),this.$wrap!=C)if(this.$wrap=C,!C)this.setUseWrapMode(!1);else{var w=typeof C=="number"?C:null;this.setWrapLimitRange(w,w),this.setUseWrapMode(!0)}},get:function(){return this.getUseWrapMode()?this.$wrap==-1?"printMargin":this.getWrapLimitRange().min?this.$wrap:"free":"off"},handlesSet:!0},wrapMethod:{set:function(C){C=C=="auto"?this.$mode.type!="text":C!="text",C!=this.$wrapAsCode&&(this.$wrapAsCode=C,this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0)))},initialValue:"auto"},indentedSoftWrap:{set:function(){this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0))},initialValue:!0},firstLineNumber:{set:function(){this._signal("changeBreakpoint")},initialValue:1},useWorker:{set:function(C){this.$useWorker=C,this.$stopWorker(),C&&this.$startWorker()},initialValue:!0},useSoftTabs:{initialValue:!0},tabSize:{set:function(C){C=parseInt(C),C>0&&this.$tabSize!==C&&(this.$modified=!0,this.$rowLengthCache=[],this.$tabSize=C,this._signal("changeTabSize"))},initialValue:4,handlesSet:!0},navigateWithinSoftTabs:{initialValue:!1},foldStyle:{set:function(C){this.setFoldStyle(C)},handlesSet:!0},overwrite:{set:function(C){this._signal("changeOverwrite")},initialValue:!1},newLineMode:{set:function(C){this.doc.setNewLineMode(C)},get:function(){return this.doc.getNewLineMode()},handlesSet:!0},mode:{set:function(C){this.setMode(C)},get:function(){return this.$modeId},handlesSet:!0}}),t.EditSession=h});ace.define("ace/search",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(e,t,r){"use strict";var d=e("./lib/lang"),u=e("./lib/oop"),g=e("./range").Range,a=function(){function o(){this.$options={}}return o.prototype.set=function(i){return u.mixin(this.$options,i),this},o.prototype.getOptions=function(){return d.copyObject(this.$options)},o.prototype.setOptions=function(i){this.$options=i},o.prototype.find=function(i){var n=this.$options,l=this.$matchIterator(i,n);if(!l)return!1;var s=null;return l.forEach(function(c,m,h,v){return s=new g(c,m,h,v),m==v&&n.start&&n.start.start&&n.skipCurrent!=!1&&s.isEqual(n.start)?(s=null,!1):!0}),s},o.prototype.findAll=function(i){var n=this.$options;if(!n.needle)return[];this.$assembleRegExp(n);var l=n.range,s=l?i.getLines(l.start.row,l.end.row):i.doc.getAllLines(),c=[],m=n.re;if(n.$isMultiLine){var h=m.length,v=s.length-h,k;t:for(var x=m.offset||0;x<=v;x++){for(var A=0;A<h;A++)if(s[x+A].search(m[A])==-1)continue t;var S=s[x],f=s[x+h-1],L=S.length-S.match(m[0])[0].length,$=f.match(m[h-1])[0].length;k&&k.end.row===x&&k.end.column>L||(c.push(k=new g(x,L,x+h-1,$)),h>2&&(x=x+h-2))}}else for(var T=0;T<s.length;T++)for(var C=d.getMatchOffsets(s[T],m),A=0;A<C.length;A++){var w=C[A];c.push(new g(T,w.offset,T,w.offset+w.length))}if(l){for(var y=l.start.column,b=l.end.column,T=0,A=c.length-1;T<A&&c[T].start.column<y&&c[T].start.row==0;)T++;for(var _=l.end.row-l.start.row;T<A&&c[A].end.column>b&&c[A].end.row==_;)A--;for(c=c.slice(T,A+1),T=0,A=c.length;T<A;T++)c[T].start.row+=l.start.row,c[T].end.row+=l.start.row}return c},o.prototype.replace=function(i,n){var l=this.$options,s=this.$assembleRegExp(l);if(l.$isMultiLine)return n;if(s){var c=s.exec(i);if(!c||c[0].length!=i.length)return null;if(l.regExp||(n=n.replace(/\$/g,"$$$$")),n=i.replace(s,n),l.preserveCase){n=n.split("");for(var m=Math.min(i.length,i.length);m--;){var h=i[m];h&&h.toLowerCase()!=h?n[m]=n[m].toUpperCase():n[m]=n[m].toLowerCase()}n=n.join("")}return n}},o.prototype.$assembleRegExp=function(i,n){if(i.needle instanceof RegExp)return i.re=i.needle;var l=i.needle;if(!i.needle)return i.re=!1;i.regExp||(l=d.escapeRegExp(l));var s=i.caseSensitive?"gm":"gmi";try{new RegExp(l,"u"),i.$supportsUnicodeFlag=!0,s+="u"}catch{i.$supportsUnicodeFlag=!1}if(i.wholeWord&&(l=p(l,i)),i.$isMultiLine=!n&&/[\n\r]/.test(l),i.$isMultiLine)return i.re=this.$assembleMultilineRegExp(l,s);try{var c=new RegExp(l,s)}catch{c=!1}return i.re=c},o.prototype.$assembleMultilineRegExp=function(i,n){for(var l=i.replace(/\r\n|\r|\n/g,`$
^`).split(`
`),s=[],c=0;c<l.length;c++)try{s.push(new RegExp(l[c],n))}catch{return!1}return s},o.prototype.$matchIterator=function(i,n){var l=this.$assembleRegExp(n);if(!l)return!1;var s=n.backwards==!0,c=n.skipCurrent!=!1,m=l.unicode,h=n.range,v=n.start;v||(v=h?h[s?"end":"start"]:i.selection.getRange()),v.start&&(v=v[c!=s?"end":"start"]);var k=h?h.start.row:0,x=h?h.end.row:i.getLength()-1;if(s)var A=function(L){var $=v.row;if(!f($,v.column,L)){for($--;$>=k;$--)if(f($,Number.MAX_VALUE,L))return;if(n.wrap!=!1){for($=x,k=v.row;$>=k;$--)if(f($,Number.MAX_VALUE,L))return}}};else var A=function($){var T=v.row;if(!f(T,v.column,$)){for(T=T+1;T<=x;T++)if(f(T,0,$))return;if(n.wrap!=!1){for(T=k,x=v.row;T<=x;T++)if(f(T,0,$))return}}};if(n.$isMultiLine)var S=l.length,f=function(L,$,T){var C=s?L-S+1:L;if(!(C<0||C+S>i.getLength())){var w=i.getLine(C),y=w.search(l[0]);if(!(!s&&y<$||y===-1)){for(var b=1;b<S;b++)if(w=i.getLine(C+b),w.search(l[b])==-1)return;var _=w.match(l[S-1])[0].length;if(!(s&&_>$)&&T(C,y,C+S-1,_))return!0}}};else if(s)var f=function($,T,C){var w=i.getLine($),y=[],b,_=0;for(l.lastIndex=0;b=l.exec(w);){var E=b[0].length;if(_=b.index,!E){if(_>=w.length)break;l.lastIndex=_+=d.skipEmptyMatch(w,_,m)}if(b.index+E>T)break;y.push(b.index,E)}for(var R=y.length-1;R>=0;R-=2){var M=y[R-1],E=y[R];if(C($,M,$,M+E))return!0}};else var f=function($,T,C){var w=i.getLine($),y,b;for(l.lastIndex=T;b=l.exec(w);){var _=b[0].length;if(y=b.index,C($,y,$,y+_))return!0;if(!_&&(l.lastIndex=y+=d.skipEmptyMatch(w,y,m),y>=w.length))return!1}};return{forEach:A}},o}();function p(o,i){var n=d.supportsLookbehind();function l(h,v){v===void 0&&(v=!0);var k=n&&i.$supportsUnicodeFlag?new RegExp("[\\p{L}\\p{N}_]","u"):new RegExp("\\w");return k.test(h)||i.regExp?n&&i.$supportsUnicodeFlag?v?"(?<=^|[^\\p{L}\\p{N}_])":"(?=[^\\p{L}\\p{N}_]|$)":"\\b":""}var s=Array.from(o),c=s[0],m=s[s.length-1];return l(c)+o+l(m,!1)}t.Search=a});ace.define("ace/keyboard/hash_handler",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(e,t,r){"use strict";var d=this&&this.__extends||function(){var n=function(l,s){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,m){c.__proto__=m}||function(c,m){for(var h in m)Object.prototype.hasOwnProperty.call(m,h)&&(c[h]=m[h])},n(l,s)};return function(l,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");n(l,s);function c(){this.constructor=l}l.prototype=s===null?Object.create(s):(c.prototype=s.prototype,new c)}}(),u=e("../lib/keys"),g=e("../lib/useragent"),a=u.KEY_MODS,p=function(){function n(l,s){this.$init(l,s,!1)}return n.prototype.$init=function(l,s,c){this.platform=s||(g.isMac?"mac":"win"),this.commands={},this.commandKeyBinding={},this.addCommands(l),this.$singleCommand=c},n.prototype.addCommand=function(l){this.commands[l.name]&&this.removeCommand(l),this.commands[l.name]=l,l.bindKey&&this._buildKeyHash(l)},n.prototype.removeCommand=function(l,s){var c=l&&(typeof l=="string"?l:l.name);l=this.commands[c],s||delete this.commands[c];var m=this.commandKeyBinding;for(var h in m){var v=m[h];if(v==l)delete m[h];else if(Array.isArray(v)){var k=v.indexOf(l);k!=-1&&(v.splice(k,1),v.length==1&&(m[h]=v[0]))}}},n.prototype.bindKey=function(l,s,c){if(typeof l=="object"&&l&&(c==null&&(c=l.position),l=l[this.platform]),!!l){if(typeof s=="function")return this.addCommand({exec:s,bindKey:l,name:s.name||l});l.split("|").forEach(function(m){var h="";if(m.indexOf(" ")!=-1){var v=m.split(/\s+/);m=v.pop(),v.forEach(function(A){var S=this.parseKeys(A),f=a[S.hashId]+S.key;h+=(h?" ":"")+f,this._addCommandToBinding(h,"chainKeys")},this),h+=" "}var k=this.parseKeys(m),x=a[k.hashId]+k.key;this._addCommandToBinding(h+x,s,c)},this)}},n.prototype._addCommandToBinding=function(l,s,c){var m=this.commandKeyBinding,h;if(!s)delete m[l];else if(!m[l]||this.$singleCommand)m[l]=s;else{Array.isArray(m[l])?(h=m[l].indexOf(s))!=-1&&m[l].splice(h,1):m[l]=[m[l]],typeof c!="number"&&(c=o(s));var v=m[l];for(h=0;h<v.length;h++){var k=v[h],x=o(k);if(x>c)break}v.splice(h,0,s)}},n.prototype.addCommands=function(l){l&&Object.keys(l).forEach(function(s){var c=l[s];if(c){if(typeof c=="string")return this.bindKey(c,s);typeof c=="function"&&(c={exec:c}),typeof c=="object"&&(c.name||(c.name=s),this.addCommand(c))}},this)},n.prototype.removeCommands=function(l){Object.keys(l).forEach(function(s){this.removeCommand(l[s])},this)},n.prototype.bindKeys=function(l){Object.keys(l).forEach(function(s){this.bindKey(s,l[s])},this)},n.prototype._buildKeyHash=function(l){this.bindKey(l.bindKey,l)},n.prototype.parseKeys=function(l){var s=l.toLowerCase().split(/[\-\+]([\-\+])?/).filter(function(x){return x}),c=s.pop(),m=u[c];if(u.FUNCTION_KEYS[m])c=u.FUNCTION_KEYS[m].toLowerCase();else if(s.length){if(s.length==1&&s[0]=="shift")return{key:c.toUpperCase(),hashId:-1}}else return{key:c,hashId:-1};for(var h=0,v=s.length;v--;){var k=u.KEY_MODS[s[v]];if(k==null)return typeof console<"u"&&console.error("invalid modifier "+s[v]+" in "+l),!1;h|=k}return{key:c,hashId:h}},n.prototype.findKeyCommand=function(l,s){var c=a[l]+s;return this.commandKeyBinding[c]},n.prototype.handleKeyboard=function(l,s,c,m){if(!(m<0)){var h=a[s]+c,v=this.commandKeyBinding[h];return l.$keyChain&&(l.$keyChain+=" "+h,v=this.commandKeyBinding[l.$keyChain]||v),v&&(v=="chainKeys"||v[v.length-1]=="chainKeys")?(l.$keyChain=l.$keyChain||h,{command:"null"}):(l.$keyChain&&((!s||s==4)&&c.length==1?l.$keyChain=l.$keyChain.slice(0,-h.length-1):(s==-1||m>0)&&(l.$keyChain="")),{command:v})}},n.prototype.getStatusText=function(l,s){return s.$keyChain||""},n}();function o(n){return typeof n=="object"&&n.bindKey&&n.bindKey.position||(n.isDefault?-100:0)}var i=function(n){d(l,n);function l(s,c){var m=n.call(this,s,c)||this;return m.$singleCommand=!0,m}return l}(p);i.call=function(n,l,s){p.prototype.$init.call(n,l,s,!0)},p.call=function(n,l,s){p.prototype.$init.call(n,l,s,!1)},t.HashHandler=i,t.MultiHashHandler=p});ace.define("ace/commands/command_manager",["require","exports","module","ace/lib/oop","ace/keyboard/hash_handler","ace/lib/event_emitter"],function(e,t,r){"use strict";var d=this&&this.__extends||function(){var o=function(i,n){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,s){l.__proto__=s}||function(l,s){for(var c in s)Object.prototype.hasOwnProperty.call(s,c)&&(l[c]=s[c])},o(i,n)};return function(i,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");o(i,n);function l(){this.constructor=i}i.prototype=n===null?Object.create(n):(l.prototype=n.prototype,new l)}}(),u=e("../lib/oop"),g=e("../keyboard/hash_handler").MultiHashHandler,a=e("../lib/event_emitter").EventEmitter,p=function(o){d(i,o);function i(n,l){var s=o.call(this,l,n)||this;return s.byName=s.commands,s.setDefaultHandler("exec",function(c){return c.args?c.command.exec(c.editor,c.args,c.event,!1):c.command.exec(c.editor,{},c.event,!0)}),s}return i.prototype.exec=function(n,l,s){if(Array.isArray(n)){for(var c=n.length;c--;)if(this.exec(n[c],l,s))return!0;return!1}if(typeof n=="string"&&(n=this.commands[n]),!this.canExecute(n,l))return!1;var m={editor:l,command:n,args:s};return m.returnValue=this._emit("exec",m),this._signal("afterExec",m),m.returnValue!==!1},i.prototype.canExecute=function(n,l){return typeof n=="string"&&(n=this.commands[n]),!(!n||l&&l.$readOnly&&!n.readOnly||this.$checkCommandState!=!1&&n.isAvailable&&!n.isAvailable(l))},i.prototype.toggleRecording=function(n){if(!this.$inReplay)return n&&n._emit("changeStatus"),this.recording?(this.macro.pop(),this.off("exec",this.$addCommandToMacro),this.macro.length||(this.macro=this.oldMacro),this.recording=!1):(this.$addCommandToMacro||(this.$addCommandToMacro=function(l){this.macro.push([l.command,l.args])}.bind(this)),this.oldMacro=this.macro,this.macro=[],this.on("exec",this.$addCommandToMacro),this.recording=!0)},i.prototype.replay=function(n){if(!(this.$inReplay||!this.macro)){if(this.recording)return this.toggleRecording(n);try{this.$inReplay=!0,this.macro.forEach(function(l){typeof l=="string"?this.exec(l,n):this.exec(l[0],n,l[1])},this)}finally{this.$inReplay=!1}}},i.prototype.trimMacro=function(n){return n.map(function(l){return typeof l[0]!="string"&&(l[0]=l[0].name),l[1]||(l=l[0]),l})},i}(g);u.implement(p.prototype,a),t.CommandManager=p});ace.define("ace/commands/default_commands",["require","exports","module","ace/lib/lang","ace/config","ace/range"],function(e,t,r){"use strict";var d=e("../lib/lang"),u=e("../config"),g=e("../range").Range;function a(o,i){return{win:o,mac:i}}t.commands=[{name:"showSettingsMenu",description:"Show settings menu",bindKey:a("Ctrl-,","Command-,"),exec:function(o){u.loadModule("ace/ext/settings_menu",function(i){i.init(o),o.showSettingsMenu()})},readOnly:!0},{name:"goToNextError",description:"Go to next error",bindKey:a("Alt-E","F4"),exec:function(o){u.loadModule("ace/ext/error_marker",function(i){i.showErrorMarker(o,1)})},scrollIntoView:"animate",readOnly:!0},{name:"goToPreviousError",description:"Go to previous error",bindKey:a("Alt-Shift-E","Shift-F4"),exec:function(o){u.loadModule("ace/ext/error_marker",function(i){i.showErrorMarker(o,-1)})},scrollIntoView:"animate",readOnly:!0},{name:"selectall",description:"Select all",bindKey:a("Ctrl-A","Command-A"),exec:function(o){o.selectAll()},readOnly:!0},{name:"centerselection",description:"Center selection",bindKey:a(null,"Ctrl-L"),exec:function(o){o.centerSelection()},readOnly:!0},{name:"gotoline",description:"Go to line...",bindKey:a("Ctrl-L","Command-L"),exec:function(o,i){typeof i=="number"&&!isNaN(i)&&o.gotoLine(i),o.prompt({$type:"gotoLine"})},readOnly:!0},{name:"fold",bindKey:a("Alt-L|Ctrl-F1","Command-Alt-L|Command-F1"),exec:function(o){o.session.toggleFold(!1)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"unfold",bindKey:a("Alt-Shift-L|Ctrl-Shift-F1","Command-Alt-Shift-L|Command-Shift-F1"),exec:function(o){o.session.toggleFold(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleFoldWidget",description:"Toggle fold widget",bindKey:a("F2","F2"),exec:function(o){o.session.toggleFoldWidget()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleParentFoldWidget",description:"Toggle parent fold widget",bindKey:a("Alt-F2","Alt-F2"),exec:function(o){o.session.toggleFoldWidget(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"foldall",description:"Fold all",bindKey:a(null,"Ctrl-Command-Option-0"),exec:function(o){o.session.foldAll()},scrollIntoView:"center",readOnly:!0},{name:"foldAllComments",description:"Fold all comments",bindKey:a(null,"Ctrl-Command-Option-0"),exec:function(o){o.session.foldAllComments()},scrollIntoView:"center",readOnly:!0},{name:"foldOther",description:"Fold other",bindKey:a("Alt-0","Command-Option-0"),exec:function(o){o.session.foldAll(),o.session.unfold(o.selection.getAllRanges())},scrollIntoView:"center",readOnly:!0},{name:"unfoldall",description:"Unfold all",bindKey:a("Alt-Shift-0","Command-Option-Shift-0"),exec:function(o){o.session.unfold()},scrollIntoView:"center",readOnly:!0},{name:"findnext",description:"Find next",bindKey:a("Ctrl-K","Command-G"),exec:function(o){o.findNext()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"findprevious",description:"Find previous",bindKey:a("Ctrl-Shift-K","Command-Shift-G"),exec:function(o){o.findPrevious()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"selectOrFindNext",description:"Select or find next",bindKey:a("Alt-K","Ctrl-G"),exec:function(o){o.selection.isEmpty()?o.selection.selectWord():o.findNext()},readOnly:!0},{name:"selectOrFindPrevious",description:"Select or find previous",bindKey:a("Alt-Shift-K","Ctrl-Shift-G"),exec:function(o){o.selection.isEmpty()?o.selection.selectWord():o.findPrevious()},readOnly:!0},{name:"find",description:"Find",bindKey:a("Ctrl-F","Command-F"),exec:function(o){u.loadModule("ace/ext/searchbox",function(i){i.Search(o)})},readOnly:!0},{name:"overwrite",description:"Overwrite",bindKey:"Insert",exec:function(o){o.toggleOverwrite()},readOnly:!0},{name:"selecttostart",description:"Select to start",bindKey:a("Ctrl-Shift-Home","Command-Shift-Home|Command-Shift-Up"),exec:function(o){o.getSelection().selectFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotostart",description:"Go to start",bindKey:a("Ctrl-Home","Command-Home|Command-Up"),exec:function(o){o.navigateFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectup",description:"Select up",bindKey:a("Shift-Up","Shift-Up|Ctrl-Shift-P"),exec:function(o){o.getSelection().selectUp()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golineup",description:"Go line up",bindKey:a("Up","Up|Ctrl-P"),exec:function(o,i){o.navigateUp(i.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttoend",description:"Select to end",bindKey:a("Ctrl-Shift-End","Command-Shift-End|Command-Shift-Down"),exec:function(o){o.getSelection().selectFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotoend",description:"Go to end",bindKey:a("Ctrl-End","Command-End|Command-Down"),exec:function(o){o.navigateFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectdown",description:"Select down",bindKey:a("Shift-Down","Shift-Down|Ctrl-Shift-N"),exec:function(o){o.getSelection().selectDown()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golinedown",description:"Go line down",bindKey:a("Down","Down|Ctrl-N"),exec:function(o,i){o.navigateDown(i.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordleft",description:"Select word left",bindKey:a("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(o){o.getSelection().selectWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordleft",description:"Go to word left",bindKey:a("Ctrl-Left","Option-Left"),exec:function(o){o.navigateWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolinestart",description:"Select to line start",bindKey:a("Alt-Shift-Left","Command-Shift-Left|Ctrl-Shift-A"),exec:function(o){o.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolinestart",description:"Go to line start",bindKey:a("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(o){o.navigateLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectleft",description:"Select left",bindKey:a("Shift-Left","Shift-Left|Ctrl-Shift-B"),exec:function(o){o.getSelection().selectLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoleft",description:"Go to left",bindKey:a("Left","Left|Ctrl-B"),exec:function(o,i){o.navigateLeft(i.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordright",description:"Select word right",bindKey:a("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(o){o.getSelection().selectWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordright",description:"Go to word right",bindKey:a("Ctrl-Right","Option-Right"),exec:function(o){o.navigateWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolineend",description:"Select to line end",bindKey:a("Alt-Shift-Right","Command-Shift-Right|Shift-End|Ctrl-Shift-E"),exec:function(o){o.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolineend",description:"Go to line end",bindKey:a("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(o){o.navigateLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectright",description:"Select right",bindKey:a("Shift-Right","Shift-Right"),exec:function(o){o.getSelection().selectRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoright",description:"Go to right",bindKey:a("Right","Right|Ctrl-F"),exec:function(o,i){o.navigateRight(i.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectpagedown",description:"Select page down",bindKey:"Shift-PageDown",exec:function(o){o.selectPageDown()},readOnly:!0},{name:"pagedown",description:"Page down",bindKey:a(null,"Option-PageDown"),exec:function(o){o.scrollPageDown()},readOnly:!0},{name:"gotopagedown",description:"Go to page down",bindKey:a("PageDown","PageDown|Ctrl-V"),exec:function(o){o.gotoPageDown()},readOnly:!0},{name:"selectpageup",description:"Select page up",bindKey:"Shift-PageUp",exec:function(o){o.selectPageUp()},readOnly:!0},{name:"pageup",description:"Page up",bindKey:a(null,"Option-PageUp"),exec:function(o){o.scrollPageUp()},readOnly:!0},{name:"gotopageup",description:"Go to page up",bindKey:"PageUp",exec:function(o){o.gotoPageUp()},readOnly:!0},{name:"scrollup",description:"Scroll up",bindKey:a("Ctrl-Up",null),exec:function(o){o.renderer.scrollBy(0,-2*o.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"scrolldown",description:"Scroll down",bindKey:a("Ctrl-Down",null),exec:function(o){o.renderer.scrollBy(0,2*o.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"selectlinestart",description:"Select line start",bindKey:"Shift-Home",exec:function(o){o.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectlineend",description:"Select line end",bindKey:"Shift-End",exec:function(o){o.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"togglerecording",description:"Toggle recording",bindKey:a("Ctrl-Alt-E","Command-Option-E"),exec:function(o){o.commands.toggleRecording(o)},readOnly:!0},{name:"replaymacro",description:"Replay macro",bindKey:a("Ctrl-Shift-E","Command-Shift-E"),exec:function(o){o.commands.replay(o)},readOnly:!0},{name:"jumptomatching",description:"Jump to matching",bindKey:a("Ctrl-\\|Ctrl-P","Command-\\"),exec:function(o){o.jumpToMatching()},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"selecttomatching",description:"Select to matching",bindKey:a("Ctrl-Shift-\\|Ctrl-Shift-P","Command-Shift-\\"),exec:function(o){o.jumpToMatching(!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"expandToMatching",description:"Expand to matching",bindKey:a("Ctrl-Shift-M","Ctrl-Shift-M"),exec:function(o){o.jumpToMatching(!0,!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"passKeysToBrowser",description:"Pass keys to browser",bindKey:a(null,null),exec:function(){},passEvent:!0,readOnly:!0},{name:"copy",description:"Copy",exec:function(o){},readOnly:!0},{name:"cut",description:"Cut",exec:function(o){var i=o.$copyWithEmptySelection&&o.selection.isEmpty(),n=i?o.selection.getLineRange():o.selection.getRange();o._emit("cut",n),n.isEmpty()||o.session.remove(n),o.clearSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"paste",description:"Paste",exec:function(o,i){o.$handlePaste(i)},scrollIntoView:"cursor"},{name:"removeline",description:"Remove line",bindKey:a("Ctrl-D","Command-D"),exec:function(o){o.removeLines()},scrollIntoView:"cursor",multiSelectAction:"forEachLine"},{name:"duplicateSelection",description:"Duplicate selection",bindKey:a("Ctrl-Shift-D","Command-Shift-D"),exec:function(o){o.duplicateSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"sortlines",description:"Sort lines",bindKey:a("Ctrl-Alt-S","Command-Alt-S"),exec:function(o){o.sortLines()},scrollIntoView:"selection",multiSelectAction:"forEachLine"},{name:"togglecomment",description:"Toggle comment",bindKey:a("Ctrl-/","Command-/"),exec:function(o){o.toggleCommentLines()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"toggleBlockComment",description:"Toggle block comment",bindKey:a("Ctrl-Shift-/","Command-Shift-/"),exec:function(o){o.toggleBlockComment()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"modifyNumberUp",description:"Modify number up",bindKey:a("Ctrl-Shift-Up","Alt-Shift-Up"),exec:function(o){o.modifyNumber(1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"modifyNumberDown",description:"Modify number down",bindKey:a("Ctrl-Shift-Down","Alt-Shift-Down"),exec:function(o){o.modifyNumber(-1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"replace",description:"Replace",bindKey:a("Ctrl-H","Command-Option-F"),exec:function(o){u.loadModule("ace/ext/searchbox",function(i){i.Search(o,!0)})}},{name:"undo",description:"Undo",bindKey:a("Ctrl-Z","Command-Z"),exec:function(o){o.undo()}},{name:"redo",description:"Redo",bindKey:a("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(o){o.redo()}},{name:"copylinesup",description:"Copy lines up",bindKey:a("Alt-Shift-Up","Command-Option-Up"),exec:function(o){o.copyLinesUp()},scrollIntoView:"cursor"},{name:"movelinesup",description:"Move lines up",bindKey:a("Alt-Up","Option-Up"),exec:function(o){o.moveLinesUp()},scrollIntoView:"cursor"},{name:"copylinesdown",description:"Copy lines down",bindKey:a("Alt-Shift-Down","Command-Option-Down"),exec:function(o){o.copyLinesDown()},scrollIntoView:"cursor"},{name:"movelinesdown",description:"Move lines down",bindKey:a("Alt-Down","Option-Down"),exec:function(o){o.moveLinesDown()},scrollIntoView:"cursor"},{name:"del",description:"Delete",bindKey:a("Delete","Delete|Ctrl-D|Shift-Delete"),exec:function(o){o.remove("right")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"backspace",description:"Backspace",bindKey:a("Shift-Backspace|Backspace","Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(o){o.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"cut_or_delete",description:"Cut or delete",bindKey:a("Shift-Delete",null),exec:function(o){if(o.selection.isEmpty())o.remove("left");else return!1},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestart",description:"Remove to line start",bindKey:a("Alt-Backspace","Command-Backspace"),exec:function(o){o.removeToLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineend",description:"Remove to line end",bindKey:a("Alt-Delete","Ctrl-K|Command-Delete"),exec:function(o){o.removeToLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestarthard",description:"Remove to line start hard",bindKey:a("Ctrl-Shift-Backspace",null),exec:function(o){var i=o.selection.getRange();i.start.column=0,o.session.remove(i)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineendhard",description:"Remove to line end hard",bindKey:a("Ctrl-Shift-Delete",null),exec:function(o){var i=o.selection.getRange();i.end.column=Number.MAX_VALUE,o.session.remove(i)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordleft",description:"Remove word left",bindKey:a("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(o){o.removeWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordright",description:"Remove word right",bindKey:a("Ctrl-Delete","Alt-Delete"),exec:function(o){o.removeWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"outdent",description:"Outdent",bindKey:a("Shift-Tab","Shift-Tab"),exec:function(o){o.blockOutdent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"indent",description:"Indent",bindKey:a("Tab","Tab"),exec:function(o){o.indent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"blockoutdent",description:"Block outdent",bindKey:a("Ctrl-[","Ctrl-["),exec:function(o){o.blockOutdent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"blockindent",description:"Block indent",bindKey:a("Ctrl-]","Ctrl-]"),exec:function(o){o.blockIndent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"insertstring",description:"Insert string",exec:function(o,i){o.insert(i)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"inserttext",description:"Insert text",exec:function(o,i){o.insert(d.stringRepeat(i.text||"",i.times||1))},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"splitline",description:"Split line",bindKey:a(null,"Ctrl-O"),exec:function(o){o.splitLine()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"transposeletters",description:"Transpose letters",bindKey:a("Alt-Shift-X","Ctrl-T"),exec:function(o){o.transposeLetters()},multiSelectAction:function(o){o.transposeSelections(1)},scrollIntoView:"cursor"},{name:"touppercase",description:"To uppercase",bindKey:a("Ctrl-U","Ctrl-U"),exec:function(o){o.toUpperCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"tolowercase",description:"To lowercase",bindKey:a("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(o){o.toLowerCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"autoindent",description:"Auto Indent",bindKey:a(null,null),exec:function(o){o.autoIndent()},scrollIntoView:"animate"},{name:"expandtoline",description:"Expand to line",bindKey:a("Ctrl-Shift-L","Command-Shift-L"),exec:function(o){var i=o.selection.getRange();i.start.column=i.end.column=0,i.end.row++,o.selection.setRange(i,!1)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"openlink",bindKey:a("Ctrl+F3","F3"),exec:function(o){o.openLink()}},{name:"joinlines",description:"Join lines",bindKey:a(null,null),exec:function(o){for(var i=o.selection.isBackwards(),n=i?o.selection.getSelectionLead():o.selection.getSelectionAnchor(),l=i?o.selection.getSelectionAnchor():o.selection.getSelectionLead(),s=o.session.doc.getLine(n.row).length,c=o.session.doc.getTextRange(o.selection.getRange()),m=c.replace(/\n\s*/," ").length,h=o.session.doc.getLine(n.row),v=n.row+1;v<=l.row+1;v++){var k=d.stringTrimLeft(d.stringTrimRight(o.session.doc.getLine(v)));k.length!==0&&(k=" "+k),h+=k}l.row+1<o.session.doc.getLength()-1&&(h+=o.session.doc.getNewLineCharacter()),o.clearSelection(),o.session.doc.replace(new g(n.row,0,l.row+2,0),h),m>0?(o.selection.moveCursorTo(n.row,n.column),o.selection.selectTo(n.row,n.column+m)):(s=o.session.doc.getLine(n.row).length>s?s+1:s,o.selection.moveCursorTo(n.row,s))},multiSelectAction:"forEach",readOnly:!0},{name:"invertSelection",description:"Invert selection",bindKey:a(null,null),exec:function(o){var i=o.session.doc.getLength()-1,n=o.session.doc.getLine(i).length,l=o.selection.rangeList.ranges,s=[];l.length<1&&(l=[o.selection.getRange()]);for(var c=0;c<l.length;c++)c==l.length-1&&(l[c].end.row===i&&l[c].end.column===n||s.push(new g(l[c].end.row,l[c].end.column,i,n))),c===0?l[c].start.row===0&&l[c].start.column===0||s.push(new g(0,0,l[c].start.row,l[c].start.column)):s.push(new g(l[c-1].end.row,l[c-1].end.column,l[c].start.row,l[c].start.column));o.exitMultiSelectMode(),o.clearSelection();for(var c=0;c<s.length;c++)o.selection.addRange(s[c],!1)},readOnly:!0,scrollIntoView:"none"},{name:"addLineAfter",description:"Add new line after the current line",exec:function(o){o.selection.clearSelection(),o.navigateLineEnd(),o.insert(`
`)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"addLineBefore",description:"Add new line before the current line",exec:function(o){o.selection.clearSelection();var i=o.getCursorPosition();o.selection.moveTo(i.row-1,Number.MAX_VALUE),o.insert(`
`),i.row===0&&o.navigateUp()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"openCommandPallete",exec:function(o){console.warn("This is an obsolete command. Please use `openCommandPalette` instead."),o.prompt({$type:"commands"})},readOnly:!0},{name:"openCommandPalette",description:"Open command palette",bindKey:a("F1","F1"),exec:function(o){o.prompt({$type:"commands"})},readOnly:!0},{name:"modeSelect",description:"Change language mode...",bindKey:a(null,null),exec:function(o){o.prompt({$type:"modes"})},readOnly:!0}];for(var p=1;p<9;p++)t.commands.push({name:"foldToLevel"+p,description:"Fold To Level "+p,level:p,exec:function(o){o.session.foldToLevel(this.level)},scrollIntoView:"center",readOnly:!0})});ace.define("ace/line_widgets",["require","exports","module","ace/lib/dom"],function(e,t,r){"use strict";var d=e("./lib/dom"),u=function(){function g(a){this.session=a,this.session.widgetManager=this,this.session.getRowLength=this.getRowLength,this.session.$getWidgetScreenLength=this.$getWidgetScreenLength,this.updateOnChange=this.updateOnChange.bind(this),this.renderWidgets=this.renderWidgets.bind(this),this.measureWidgets=this.measureWidgets.bind(this),this.session._changedWidgets=[],this.$onChangeEditor=this.$onChangeEditor.bind(this),this.session.on("change",this.updateOnChange),this.session.on("changeFold",this.updateOnFold),this.session.on("changeEditor",this.$onChangeEditor)}return g.prototype.getRowLength=function(a){var p;return this.lineWidgets?p=this.lineWidgets[a]&&this.lineWidgets[a].rowCount||0:p=0,!this.$useWrapMode||!this.$wrapData[a]?1+p:this.$wrapData[a].length+1+p},g.prototype.$getWidgetScreenLength=function(){var a=0;return this.lineWidgets.forEach(function(p){p&&p.rowCount&&!p.hidden&&(a+=p.rowCount)}),a},g.prototype.$onChangeEditor=function(a){this.attach(a.editor)},g.prototype.attach=function(a){a&&a.widgetManager&&a.widgetManager!=this&&a.widgetManager.detach(),this.editor!=a&&(this.detach(),this.editor=a,a&&(a.widgetManager=this,a.renderer.on("beforeRender",this.measureWidgets),a.renderer.on("afterRender",this.renderWidgets)))},g.prototype.detach=function(a){var p=this.editor;if(p){this.editor=null,p.widgetManager=null,p.renderer.off("beforeRender",this.measureWidgets),p.renderer.off("afterRender",this.renderWidgets);var o=this.session.lineWidgets;o&&o.forEach(function(i){i&&i.el&&i.el.parentNode&&(i._inDocument=!1,i.el.parentNode.removeChild(i.el))})}},g.prototype.updateOnFold=function(a,p){var o=p.lineWidgets;if(!(!o||!a.action)){for(var i=a.data,n=i.start.row,l=i.end.row,s=a.action=="add",c=n+1;c<l;c++)o[c]&&(o[c].hidden=s);o[l]&&(s?o[n]?o[l].hidden=s:o[n]=o[l]:(o[n]==o[l]&&(o[n]=void 0),o[l].hidden=s))}},g.prototype.updateOnChange=function(a){var p=this.session.lineWidgets;if(p){var o=a.start.row,i=a.end.row-o;if(i!==0)if(a.action=="remove"){var n=p.splice(o+1,i);!p[o]&&n[n.length-1]&&(p[o]=n.pop()),n.forEach(function(s){s&&this.removeLineWidget(s)},this),this.$updateRows()}else{var l=new Array(i);p[o]&&p[o].column!=null&&a.start.column>p[o].column&&o++,l.unshift(o,0),p.splice.apply(p,l),this.$updateRows()}}},g.prototype.$updateRows=function(){var a=this.session.lineWidgets;if(a){var p=!0;a.forEach(function(o,i){if(o)for(p=!1,o.row=i;o.$oldWidget;)o.$oldWidget.row=i,o=o.$oldWidget}),p&&(this.session.lineWidgets=null)}},g.prototype.$registerLineWidget=function(a){this.session.lineWidgets||(this.session.lineWidgets=new Array(this.session.getLength()));var p=this.session.lineWidgets[a.row];return p&&(a.$oldWidget=p,p.el&&p.el.parentNode&&(p.el.parentNode.removeChild(p.el),p._inDocument=!1)),this.session.lineWidgets[a.row]=a,a},g.prototype.addLineWidget=function(a){if(this.$registerLineWidget(a),a.session=this.session,!this.editor)return a;var p=this.editor.renderer;a.html&&!a.el&&(a.el=d.createElement("div"),a.el.innerHTML=a.html),a.text&&!a.el&&(a.el=d.createElement("div"),a.el.textContent=a.text),a.el&&(d.addCssClass(a.el,"ace_lineWidgetContainer"),a.className&&d.addCssClass(a.el,a.className),a.el.style.position="absolute",a.el.style.zIndex="5",p.container.appendChild(a.el),a._inDocument=!0,a.coverGutter||(a.el.style.zIndex="3"),a.pixelHeight==null&&(a.pixelHeight=a.el.offsetHeight)),a.rowCount==null&&(a.rowCount=a.pixelHeight/p.layerConfig.lineHeight);var o=this.session.getFoldAt(a.row,0);if(a.$fold=o,o){var i=this.session.lineWidgets;a.row==o.end.row&&!i[o.start.row]?i[o.start.row]=a:a.hidden=!0}return this.session._emit("changeFold",{data:{start:{row:a.row}}}),this.$updateRows(),this.renderWidgets(null,p),this.onWidgetChanged(a),a},g.prototype.removeLineWidget=function(a){if(a._inDocument=!1,a.session=null,a.el&&a.el.parentNode&&a.el.parentNode.removeChild(a.el),a.editor&&a.editor.destroy)try{a.editor.destroy()}catch{}if(this.session.lineWidgets){var p=this.session.lineWidgets[a.row];if(p==a)this.session.lineWidgets[a.row]=a.$oldWidget,a.$oldWidget&&this.onWidgetChanged(a.$oldWidget);else for(;p;){if(p.$oldWidget==a){p.$oldWidget=a.$oldWidget;break}p=p.$oldWidget}}this.session._emit("changeFold",{data:{start:{row:a.row}}}),this.$updateRows()},g.prototype.getWidgetsAtRow=function(a){for(var p=this.session.lineWidgets,o=p&&p[a],i=[];o;)i.push(o),o=o.$oldWidget;return i},g.prototype.onWidgetChanged=function(a){this.session._changedWidgets.push(a),this.editor&&this.editor.renderer.updateFull()},g.prototype.measureWidgets=function(a,p){var o=this.session._changedWidgets,i=p.layerConfig;if(!(!o||!o.length)){for(var n=1/0,l=0;l<o.length;l++){var s=o[l];if(!(!s||!s.el)&&s.session==this.session){if(!s._inDocument){if(this.session.lineWidgets[s.row]!=s)continue;s._inDocument=!0,p.container.appendChild(s.el)}s.h=s.el.offsetHeight,s.fixedWidth||(s.w=s.el.offsetWidth,s.screenWidth=Math.ceil(s.w/i.characterWidth));var c=s.h/i.lineHeight;s.coverLine&&(c-=this.session.getRowLineCount(s.row),c<0&&(c=0)),s.rowCount!=c&&(s.rowCount=c,s.row<n&&(n=s.row))}}n!=1/0&&(this.session._emit("changeFold",{data:{start:{row:n}}}),this.session.lineWidgetWidth=null),this.session._changedWidgets=[]}},g.prototype.renderWidgets=function(a,p){var o=p.layerConfig,i=this.session.lineWidgets;if(i){for(var n=Math.min(this.firstRow,o.firstRow),l=Math.max(this.lastRow,o.lastRow,i.length);n>0&&!i[n];)n--;this.firstRow=o.firstRow,this.lastRow=o.lastRow,p.$cursorLayer.config=o;for(var s=n;s<=l;s++){var c=i[s];if(!(!c||!c.el)){if(c.hidden){c.el.style.top=-100-(c.pixelHeight||0)+"px";continue}c._inDocument||(c._inDocument=!0,p.container.appendChild(c.el));var m=p.$cursorLayer.getPixelPosition({row:s,column:0},!0).top;c.coverLine||(m+=o.lineHeight*this.session.getRowLineCount(c.row)),c.el.style.top=m-o.offset+"px";var h=c.coverGutter?0:p.gutterWidth;c.fixedWidth||(h-=p.scrollLeft),c.el.style.left=h+"px",c.fullWidth&&c.screenWidth&&(c.el.style.minWidth=o.width+2*o.padding+"px"),c.fixedWidth?c.el.style.right=p.scrollBar.getWidth()+"px":c.el.style.right=""}}}},g}();t.LineWidgets=u});ace.define("ace/keyboard/gutter_handler",["require","exports","module","ace/lib/keys","ace/mouse/default_gutter_handler"],function(e,t,r){"use strict";var d=e("../lib/keys"),u=e("../mouse/default_gutter_handler").GutterTooltip,g=function(){function p(o){this.editor=o,this.gutterLayer=o.renderer.$gutterLayer,this.element=o.renderer.$gutter,this.lines=o.renderer.$gutterLayer.$lines,this.activeRowIndex=null,this.activeLane=null,this.annotationTooltip=new u(this.editor)}return p.prototype.addListener=function(){this.element.addEventListener("keydown",this.$onGutterKeyDown.bind(this)),this.element.addEventListener("focusout",this.$blurGutter.bind(this)),this.editor.on("mousewheel",this.$blurGutter.bind(this))},p.prototype.removeListener=function(){this.element.removeEventListener("keydown",this.$onGutterKeyDown.bind(this)),this.element.removeEventListener("focusout",this.$blurGutter.bind(this)),this.editor.off("mousewheel",this.$blurGutter.bind(this))},p.prototype.$onGutterKeyDown=function(o){if(this.annotationTooltip.isOpen){o.preventDefault(),o.keyCode===d.escape&&this.annotationTooltip.hideTooltip();return}if(o.target===this.element){if(o.keyCode!=d.enter)return;o.preventDefault();var i=this.editor.getCursorPosition().row;this.editor.isRowVisible(i)||this.editor.scrollToLine(i,!0,!0),setTimeout(function(){var n=this.$rowToRowIndex(this.gutterLayer.$cursorCell.row),l=this.$findNearestFoldWidget(n),s=this.$findNearestAnnotation(n);if(!(l===null&&s===null)){if(l===null&&s!==null){this.activeRowIndex=s,this.activeLane="annotation",this.$focusAnnotation(this.activeRowIndex);return}if(l!==null&&s===null){this.activeRowIndex=l,this.activeLane="fold",this.$focusFoldWidget(this.activeRowIndex);return}if(Math.abs(s-n)<Math.abs(l-n)){this.activeRowIndex=s,this.activeLane="annotation",this.$focusAnnotation(this.activeRowIndex);return}else{this.activeRowIndex=l,this.activeLane="fold",this.$focusFoldWidget(this.activeRowIndex);return}}}.bind(this),10);return}this.$handleGutterKeyboardInteraction(o),setTimeout(function(){this.editor._signal("gutterkeydown",new a(o,this))}.bind(this),10)},p.prototype.$handleGutterKeyboardInteraction=function(o){if(o.keyCode===d.tab){o.preventDefault();return}if(o.keyCode===d.escape){o.preventDefault(),this.$blurGutter(),this.element.focus(),this.lane=null;return}if(o.keyCode===d.up){switch(o.preventDefault(),this.activeLane){case"fold":this.$moveFoldWidgetUp();break;case"annotation":this.$moveAnnotationUp();break}return}if(o.keyCode===d.down){switch(o.preventDefault(),this.activeLane){case"fold":this.$moveFoldWidgetDown();break;case"annotation":this.$moveAnnotationDown();break}return}if(o.keyCode===d.left){o.preventDefault(),this.$switchLane("annotation");return}if(o.keyCode===d.right){o.preventDefault(),this.$switchLane("fold");return}if(o.keyCode===d.enter||o.keyCode===d.space){switch(o.preventDefault(),this.activeLane){case"fold":if(this.gutterLayer.session.foldWidgets[this.$rowIndexToRow(this.activeRowIndex)]==="start"){var i=this.$rowIndexToRow(this.activeRowIndex);this.editor.session.onFoldWidgetClick(this.$rowIndexToRow(this.activeRowIndex),o),setTimeout(function(){this.$rowIndexToRow(this.activeRowIndex)!==i&&(this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=this.$rowToRowIndex(i),this.$focusFoldWidget(this.activeRowIndex))}.bind(this),10);break}else if(this.gutterLayer.session.foldWidgets[this.$rowIndexToRow(this.activeRowIndex)]==="end")break;return;case"annotation":var n=this.lines.cells[this.activeRowIndex].element.childNodes[2],l=n.getBoundingClientRect(),s=this.annotationTooltip.getElement().style;s.left=l.right+"px",s.top=l.bottom+"px",this.annotationTooltip.showTooltip(this.$rowIndexToRow(this.activeRowIndex));break}return}},p.prototype.$blurGutter=function(){if(this.activeRowIndex!==null)switch(this.activeLane){case"fold":this.$blurFoldWidget(this.activeRowIndex);break;case"annotation":this.$blurAnnotation(this.activeRowIndex);break}this.annotationTooltip.isOpen&&this.annotationTooltip.hideTooltip()},p.prototype.$isFoldWidgetVisible=function(o){var i=this.editor.isRowFullyVisible(this.$rowIndexToRow(o)),n=this.$getFoldWidget(o).style.display!=="none";return i&&n},p.prototype.$isAnnotationVisible=function(o){var i=this.editor.isRowFullyVisible(this.$rowIndexToRow(o)),n=this.$getAnnotation(o).style.display!=="none";return i&&n},p.prototype.$getFoldWidget=function(o){var i=this.lines.get(o),n=i.element;return n.childNodes[1]},p.prototype.$getAnnotation=function(o){var i=this.lines.get(o),n=i.element;return n.childNodes[2]},p.prototype.$findNearestFoldWidget=function(o){if(this.$isFoldWidgetVisible(o))return o;for(var i=0;o-i>0||o+i<this.lines.getLength()-1;){if(i++,o-i>=0&&this.$isFoldWidgetVisible(o-i))return o-i;if(o+i<=this.lines.getLength()-1&&this.$isFoldWidgetVisible(o+i))return o+i}return null},p.prototype.$findNearestAnnotation=function(o){if(this.$isAnnotationVisible(o))return o;for(var i=0;o-i>0||o+i<this.lines.getLength()-1;){if(i++,o-i>=0&&this.$isAnnotationVisible(o-i))return o-i;if(o+i<=this.lines.getLength()-1&&this.$isAnnotationVisible(o+i))return o+i}return null},p.prototype.$focusFoldWidget=function(o){if(o!=null){var i=this.$getFoldWidget(o);i.classList.add(this.editor.renderer.keyboardFocusClassName),i.focus()}},p.prototype.$focusAnnotation=function(o){if(o!=null){var i=this.$getAnnotation(o);i.classList.add(this.editor.renderer.keyboardFocusClassName),i.focus()}},p.prototype.$blurFoldWidget=function(o){var i=this.$getFoldWidget(o);i.classList.remove(this.editor.renderer.keyboardFocusClassName),i.blur()},p.prototype.$blurAnnotation=function(o){var i=this.$getAnnotation(o);i.classList.remove(this.editor.renderer.keyboardFocusClassName),i.blur()},p.prototype.$moveFoldWidgetUp=function(){for(var o=this.activeRowIndex;o>0;)if(o--,this.$isFoldWidgetVisible(o)){this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=o,this.$focusFoldWidget(this.activeRowIndex);return}},p.prototype.$moveFoldWidgetDown=function(){for(var o=this.activeRowIndex;o<this.lines.getLength()-1;)if(o++,this.$isFoldWidgetVisible(o)){this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=o,this.$focusFoldWidget(this.activeRowIndex);return}},p.prototype.$moveAnnotationUp=function(){for(var o=this.activeRowIndex;o>0;)if(o--,this.$isAnnotationVisible(o)){this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=o,this.$focusAnnotation(this.activeRowIndex);return}},p.prototype.$moveAnnotationDown=function(){for(var o=this.activeRowIndex;o<this.lines.getLength()-1;)if(o++,this.$isAnnotationVisible(o)){this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=o,this.$focusAnnotation(this.activeRowIndex);return}},p.prototype.$switchLane=function(o){switch(o){case"annotation":if(this.activeLane==="annotation")break;var i=this.$findNearestAnnotation(this.activeRowIndex);if(i==null)break;this.activeLane="annotation",this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=i,this.$focusAnnotation(this.activeRowIndex);break;case"fold":if(this.activeLane==="fold")break;var n=this.$findNearestFoldWidget(this.activeRowIndex);if(n==null)break;this.activeLane="fold",this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=n,this.$focusFoldWidget(this.activeRowIndex);break}},p.prototype.$rowIndexToRow=function(o){var i=this.lines.get(o);return i?i.row:null},p.prototype.$rowToRowIndex=function(o){for(var i=0;i<this.lines.getLength();i++){var n=this.lines.get(i);if(n.row==o)return i}return null},p}();t.GutterKeyboardHandler=g;var a=function(){function p(o,i){this.gutterKeyboardHandler=i,this.domEvent=o}return p.prototype.getKey=function(){return d.keyCodeToString(this.domEvent.keyCode)},p.prototype.getRow=function(){return this.gutterKeyboardHandler.$rowIndexToRow(this.gutterKeyboardHandler.activeRowIndex)},p.prototype.isInAnnotationLane=function(){return this.gutterKeyboardHandler.activeLane==="annotation"},p.prototype.isInFoldLane=function(){return this.gutterKeyboardHandler.activeLane==="fold"},p}();t.GutterKeyboardEvent=a});ace.define("ace/editor",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/keyboard/textinput","ace/mouse/mouse_handler","ace/mouse/fold_handler","ace/keyboard/keybinding","ace/edit_session","ace/search","ace/range","ace/lib/event_emitter","ace/commands/command_manager","ace/commands/default_commands","ace/config","ace/token_iterator","ace/line_widgets","ace/keyboard/gutter_handler","ace/config","ace/clipboard","ace/lib/keys"],function(e,t,r){"use strict";var d=this&&this.__values||function(y){var b=typeof Symbol=="function"&&Symbol.iterator,_=b&&y[b],E=0;if(_)return _.call(y);if(y&&typeof y.length=="number")return{next:function(){return y&&E>=y.length&&(y=void 0),{value:y&&y[E++],done:!y}}};throw new TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")},u=e("./lib/oop"),g=e("./lib/dom"),a=e("./lib/lang"),p=e("./lib/useragent"),o=e("./keyboard/textinput").TextInput,i=e("./mouse/mouse_handler").MouseHandler,n=e("./mouse/fold_handler").FoldHandler,l=e("./keyboard/keybinding").KeyBinding,s=e("./edit_session").EditSession,c=e("./search").Search,m=e("./range").Range,h=e("./lib/event_emitter").EventEmitter,v=e("./commands/command_manager").CommandManager,k=e("./commands/default_commands").commands,x=e("./config"),A=e("./token_iterator").TokenIterator,S=e("./line_widgets").LineWidgets,f=e("./keyboard/gutter_handler").GutterKeyboardHandler,L=e("./config").nls,$=e("./clipboard"),T=e("./lib/keys"),C=function(){function y(b,_,E){this.session,this.$toDestroy=[];var R=b.getContainerElement();this.container=R,this.renderer=b,this.id="editor"+ ++y.$uid,this.commands=new v(p.isMac?"mac":"win",k),typeof document=="object"&&(this.textInput=new o(b.getTextAreaContainer(),this),this.renderer.textarea=this.textInput.getElement(),this.$mouseHandler=new i(this),new n(this)),this.keyBinding=new l(this),this.$search=new c().set({wrap:!0}),this.$historyTracker=this.$historyTracker.bind(this),this.commands.on("exec",this.$historyTracker),this.$initOperationListeners(),this._$emitInputEvent=a.delayedCall(function(){this._signal("input",{}),this.session&&!this.session.destroyed&&this.session.bgTokenizer.scheduleStart()}.bind(this)),this.on("change",function(M,I){I._$emitInputEvent.schedule(31)}),this.setSession(_||E&&E.session||new s("")),x.resetOptions(this),E&&this.setOptions(E),x._signal("editor",this)}return y.prototype.$initOperationListeners=function(){this.commands.on("exec",this.startOperation.bind(this),!0),this.commands.on("afterExec",this.endOperation.bind(this),!0),this.$opResetTimer=a.delayedCall(this.endOperation.bind(this,!0)),this.on("change",function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.docChanged=!0}.bind(this),!0),this.on("changeSelection",function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.selectionChanged=!0}.bind(this),!0)},y.prototype.startOperation=function(b){if(this.curOp){if(!b||this.curOp.command)return;this.prevOp=this.curOp}b||(this.previousCommand=null,b={}),this.$opResetTimer.schedule(),this.curOp=this.session.curOp={command:b.command||{},args:b.args,scrollTop:this.renderer.scrollTop},this.curOp.selectionBefore=this.selection.toJSON()},y.prototype.endOperation=function(b){if(this.curOp&&this.session){if(b&&b.returnValue===!1||!this.session)return this.curOp=null;if(b==!0&&this.curOp.command&&this.curOp.command.name=="mouse"||(this._signal("beforeEndOperation"),!this.curOp))return;var _=this.curOp.command,E=_&&_.scrollIntoView;if(E){switch(E){case"center-animate":E="animate";case"center":this.renderer.scrollCursorIntoView(null,.5);break;case"animate":case"cursor":this.renderer.scrollCursorIntoView();break;case"selectionPart":var R=this.selection.getRange(),M=this.renderer.layerConfig;(R.start.row>=M.lastRow||R.end.row<=M.firstRow)&&this.renderer.scrollSelectionIntoView(this.selection.anchor,this.selection.lead);break;default:break}E=="animate"&&this.renderer.animateScrolling(this.curOp.scrollTop)}var I=this.selection.toJSON();this.curOp.selectionAfter=I,this.$lastSel=this.selection.toJSON(),this.session.getUndoManager().addSelection(I),this.prevOp=this.curOp,this.curOp=null}},y.prototype.$historyTracker=function(b){if(this.$mergeUndoDeltas){var _=this.prevOp,E=this.$mergeableCommands,R=_.command&&b.command.name==_.command.name;if(b.command.name=="insertstring"){var M=b.args;this.mergeNextCommand===void 0&&(this.mergeNextCommand=!0),R=R&&this.mergeNextCommand&&(!/\s/.test(M)||/\s/.test(_.args)),this.mergeNextCommand=!0}else R=R&&E.indexOf(b.command.name)!==-1;this.$mergeUndoDeltas!="always"&&Date.now()-this.sequenceStartTime>2e3&&(R=!1),R?this.session.mergeUndoDeltas=!0:E.indexOf(b.command.name)!==-1&&(this.sequenceStartTime=Date.now())}},y.prototype.setKeyboardHandler=function(b,_){if(b&&typeof b=="string"&&b!="ace"){this.$keybindingId=b;var E=this;x.loadModule(["keybinding",b],function(R){E.$keybindingId==b&&E.keyBinding.setKeyboardHandler(R&&R.handler),_&&_()})}else this.$keybindingId=null,this.keyBinding.setKeyboardHandler(b),_&&_()},y.prototype.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()},y.prototype.setSession=function(b){if(this.session!=b){this.curOp&&this.endOperation(),this.curOp={};var _=this.session;if(_){this.session.off("change",this.$onDocumentChange),this.session.off("changeMode",this.$onChangeMode),this.session.off("tokenizerUpdate",this.$onTokenizerUpdate),this.session.off("changeTabSize",this.$onChangeTabSize),this.session.off("changeWrapLimit",this.$onChangeWrapLimit),this.session.off("changeWrapMode",this.$onChangeWrapMode),this.session.off("changeFold",this.$onChangeFold),this.session.off("changeFrontMarker",this.$onChangeFrontMarker),this.session.off("changeBackMarker",this.$onChangeBackMarker),this.session.off("changeBreakpoint",this.$onChangeBreakpoint),this.session.off("changeAnnotation",this.$onChangeAnnotation),this.session.off("changeOverwrite",this.$onCursorChange),this.session.off("changeScrollTop",this.$onScrollTopChange),this.session.off("changeScrollLeft",this.$onScrollLeftChange);var E=this.session.getSelection();E.off("changeCursor",this.$onCursorChange),E.off("changeSelection",this.$onSelectionChange)}this.session=b,b?(this.$onDocumentChange=this.onDocumentChange.bind(this),b.on("change",this.$onDocumentChange),this.renderer.setSession(b),this.$onChangeMode=this.onChangeMode.bind(this),b.on("changeMode",this.$onChangeMode),this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this),b.on("tokenizerUpdate",this.$onTokenizerUpdate),this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer),b.on("changeTabSize",this.$onChangeTabSize),this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this),b.on("changeWrapLimit",this.$onChangeWrapLimit),this.$onChangeWrapMode=this.onChangeWrapMode.bind(this),b.on("changeWrapMode",this.$onChangeWrapMode),this.$onChangeFold=this.onChangeFold.bind(this),b.on("changeFold",this.$onChangeFold),this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this),this.session.on("changeFrontMarker",this.$onChangeFrontMarker),this.$onChangeBackMarker=this.onChangeBackMarker.bind(this),this.session.on("changeBackMarker",this.$onChangeBackMarker),this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this),this.session.on("changeBreakpoint",this.$onChangeBreakpoint),this.$onChangeAnnotation=this.onChangeAnnotation.bind(this),this.session.on("changeAnnotation",this.$onChangeAnnotation),this.$onCursorChange=this.onCursorChange.bind(this),this.session.on("changeOverwrite",this.$onCursorChange),this.$onScrollTopChange=this.onScrollTopChange.bind(this),this.session.on("changeScrollTop",this.$onScrollTopChange),this.$onScrollLeftChange=this.onScrollLeftChange.bind(this),this.session.on("changeScrollLeft",this.$onScrollLeftChange),this.selection=b.getSelection(),this.selection.on("changeCursor",this.$onCursorChange),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.on("changeSelection",this.$onSelectionChange),this.onChangeMode(),this.onCursorChange(),this.onScrollTopChange(),this.onScrollLeftChange(),this.onSelectionChange(),this.onChangeFrontMarker(),this.onChangeBackMarker(),this.onChangeBreakpoint(),this.onChangeAnnotation(),this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit(),this.renderer.updateFull()):(this.selection=null,this.renderer.setSession(b)),this._signal("changeSession",{session:b,oldSession:_}),this.curOp=null,_&&_._signal("changeEditor",{oldEditor:this}),b&&b._signal("changeEditor",{editor:this}),b&&!b.destroyed&&b.bgTokenizer.scheduleStart()}},y.prototype.getSession=function(){return this.session},y.prototype.setValue=function(b,_){return this.session.doc.setValue(b),_?_==1?this.navigateFileEnd():_==-1&&this.navigateFileStart():this.selectAll(),b},y.prototype.getValue=function(){return this.session.getValue()},y.prototype.getSelection=function(){return this.selection},y.prototype.resize=function(b){this.renderer.onResize(b)},y.prototype.setTheme=function(b,_){this.renderer.setTheme(b,_)},y.prototype.getTheme=function(){return this.renderer.getTheme()},y.prototype.setStyle=function(b){this.renderer.setStyle(b)},y.prototype.unsetStyle=function(b){this.renderer.unsetStyle(b)},y.prototype.getFontSize=function(){return this.getOption("fontSize")||g.computedStyle(this.container).fontSize},y.prototype.setFontSize=function(b){this.setOption("fontSize",b)},y.prototype.$highlightBrackets=function(){if(!this.$highlightPending){var b=this;this.$highlightPending=!0,setTimeout(function(){b.$highlightPending=!1;var _=b.session;if(!(!_||_.destroyed)){_.$bracketHighlight&&(_.$bracketHighlight.markerIds.forEach(function(F){_.removeMarker(F)}),_.$bracketHighlight=null);var E=b.getCursorPosition(),R=b.getKeyboardHandler(),M=R&&R.$getDirectionForHighlight&&R.$getDirectionForHighlight(b),I=_.getMatchingBracketRanges(E,M);if(!I){var P=new A(_,E.row,E.column),O=P.getCurrentToken();if(O&&/\b(?:tag-open|tag-name)/.test(O.type)){var N=_.getMatchingTags(E);N&&(I=[N.openTagName.isEmpty()?N.openTag:N.openTagName,N.closeTagName.isEmpty()?N.closeTag:N.closeTagName])}}if(!I&&_.$mode.getMatching&&(I=_.$mode.getMatching(b.session)),!I){b.getHighlightIndentGuides()&&b.renderer.$textLayer.$highlightIndentGuide();return}var D="ace_bracket";Array.isArray(I)?I.length==1&&(D="ace_error_bracket"):I=[I],I.length==2&&(m.comparePoints(I[0].end,I[1].start)==0?I=[m.fromPoints(I[0].start,I[1].end)]:m.comparePoints(I[0].start,I[1].end)==0&&(I=[m.fromPoints(I[1].start,I[0].end)])),_.$bracketHighlight={ranges:I,markerIds:I.map(function(F){return _.addMarker(F,D,"text")})},b.getHighlightIndentGuides()&&b.renderer.$textLayer.$highlightIndentGuide()}},50)}},y.prototype.focus=function(){this.textInput.focus()},y.prototype.isFocused=function(){return this.textInput.isFocused()},y.prototype.blur=function(){this.textInput.blur()},y.prototype.onFocus=function(b){this.$isFocused||(this.$isFocused=!0,this.renderer.showCursor(),this.renderer.visualizeFocus(),this._emit("focus",b))},y.prototype.onBlur=function(b){this.$isFocused&&(this.$isFocused=!1,this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._emit("blur",b))},y.prototype.$cursorChange=function(){this.renderer.updateCursor(),this.$highlightBrackets(),this.$updateHighlightActiveLine()},y.prototype.onDocumentChange=function(b){var _=this.session.$useWrapMode,E=b.start.row==b.end.row?b.end.row:1/0;this.renderer.updateLines(b.start.row,E,_),this._signal("change",b),this.$cursorChange()},y.prototype.onTokenizerUpdate=function(b){var _=b.data;this.renderer.updateLines(_.first,_.last)},y.prototype.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())},y.prototype.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())},y.prototype.onCursorChange=function(){this.$cursorChange(),this._signal("changeSelection")},y.prototype.$updateHighlightActiveLine=function(){var b=this.getSession(),_;if(this.$highlightActiveLine&&((this.$selectionStyle!="line"||!this.selection.isMultiLine())&&(_=this.getCursorPosition()),this.renderer.theme&&this.renderer.theme.$selectionColorConflict&&!this.selection.isEmpty()&&(_=!1),this.renderer.$maxLines&&this.session.getLength()===1&&!(this.renderer.$minLines>1)&&(_=!1)),b.$highlightLineMarker&&!_)b.removeMarker(b.$highlightLineMarker.id),b.$highlightLineMarker=null;else if(!b.$highlightLineMarker&&_){var E=new m(_.row,_.column,_.row,1/0);E.id=b.addMarker(E,"ace_active-line","screenLine"),b.$highlightLineMarker=E}else _&&(b.$highlightLineMarker.start.row=_.row,b.$highlightLineMarker.end.row=_.row,b.$highlightLineMarker.start.column=_.column,b._signal("changeBackMarker"))},y.prototype.onSelectionChange=function(b){var _=this.session;if(_.$selectionMarker&&_.removeMarker(_.$selectionMarker),_.$selectionMarker=null,this.selection.isEmpty())this.$updateHighlightActiveLine();else{var E=this.selection.getRange(),R=this.getSelectionStyle();_.$selectionMarker=_.addMarker(E,"ace_selection",R)}var M=this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp();this.session.highlight(M),this._signal("changeSelection")},y.prototype.$getSelectionHighLightRegexp=function(){var b=this.session,_=this.getSelectionRange();if(!(_.isEmpty()||_.isMultiLine())){var E=_.start.column,R=_.end.column,M=b.getLine(_.start.row),I=M.substring(E,R);if(!(I.length>5e3||!/[\w\d]/.test(I))){var P=this.$search.$assembleRegExp({wholeWord:!0,caseSensitive:!0,needle:I}),O=M.substring(E-1,R+1);if(P.test(O))return P}}},y.prototype.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()},y.prototype.onChangeBackMarker=function(){this.renderer.updateBackMarkers()},y.prototype.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()},y.prototype.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())},y.prototype.onChangeMode=function(b){this.renderer.updateText(),this._emit("changeMode",b)},y.prototype.onChangeWrapLimit=function(){this.renderer.updateFull()},y.prototype.onChangeWrapMode=function(){this.renderer.onResize(!0)},y.prototype.onChangeFold=function(){this.$updateHighlightActiveLine(),this.renderer.updateFull()},y.prototype.getSelectedText=function(){return this.session.getTextRange(this.getSelectionRange())},y.prototype.getCopyText=function(){var b=this.getSelectedText(),_=this.session.doc.getNewLineCharacter(),E=!1;if(!b&&this.$copyWithEmptySelection){E=!0;for(var R=this.selection.getAllRanges(),M=0;M<R.length;M++){var I=R[M];M&&R[M-1].start.row==I.start.row||(b+=this.session.getLine(I.start.row)+_)}}var P={text:b};return this._signal("copy",P),$.lineMode=E?P.text:!1,P.text},y.prototype.onCopy=function(){this.commands.exec("copy",this)},y.prototype.onCut=function(){this.commands.exec("cut",this)},y.prototype.onPaste=function(b,_){var E={text:b,event:_};this.commands.exec("paste",this,E)},y.prototype.$handlePaste=function(b){typeof b=="string"&&(b={text:b}),this._signal("paste",b);var _=b.text,E=_===$.lineMode,R=this.session;if(!this.inMultiSelectMode||this.inVirtualSelectionMode)E?R.insert({row:this.selection.lead.row,column:0},_):this.insert(_);else if(E)this.selection.rangeList.ranges.forEach(function(D){R.insert({row:D.start.row,column:0},_)});else{var M=_.split(/\r\n|\r|\n/),I=this.selection.rangeList.ranges,P=M.length==2&&(!M[0]||!M[1]);if(M.length!=I.length||P)return this.commands.exec("insertstring",this,_);for(var O=I.length;O--;){var N=I[O];N.isEmpty()||R.remove(N),R.insert(N.start,M[O])}}},y.prototype.execCommand=function(b,_){return this.commands.exec(b,this,_)},y.prototype.insert=function(b,_){var E=this.session,R=E.getMode(),M=this.getCursorPosition();if(this.getBehavioursEnabled()&&!_){var I=R.transformAction(E.getState(M.row),"insertion",this,E,b);I&&(b!==I.text&&(this.inVirtualSelectionMode||(this.session.mergeUndoDeltas=!1,this.mergeNextCommand=!1)),b=I.text)}if(b=="	"&&(b=this.session.getTabString()),this.selection.isEmpty()){if(this.session.getOverwrite()&&b.indexOf(`
`)==-1){var P=m.fromPoints(M,M);P.end.column+=b.length,this.session.remove(P)}}else{var P=this.getSelectionRange();M=this.session.remove(P),this.clearSelection()}if(b==`
`||b==`\r
`){var F=E.getLine(M.row);if(M.column>F.search(/\S|$/)){var O=F.substr(M.column).search(/\S|$/);E.doc.removeInLine(M.row,M.column,M.column+O)}}this.clearSelection();var N=M.column,D=E.getState(M.row),F=E.getLine(M.row),z=R.checkOutdent(D,F,b);if(E.insert(M,b),I&&I.selection&&(I.selection.length==2?this.selection.setSelectionRange(new m(M.row,N+I.selection[0],M.row,N+I.selection[1])):this.selection.setSelectionRange(new m(M.row+I.selection[0],I.selection[1],M.row+I.selection[2],I.selection[3]))),this.$enableAutoIndent){if(E.getDocument().isNewLine(b)){var W=R.getNextLineIndent(D,F.slice(0,M.column),E.getTabString());E.insert({row:M.row+1,column:0},W)}z&&R.autoOutdent(D,E,M.row)}},y.prototype.autoIndent=function(){for(var b=this.session,_=b.getMode(),E=this.selection.isEmpty()?[new m(0,0,b.doc.getLength()-1,0)]:this.selection.getAllRanges(),R="",M="",I="",P=b.getTabString(),O=0;O<E.length;O++)for(var N=E[O].start.row,D=E[O].end.row,F=N;F<=D;F++){F>0&&(R=b.getState(F-1),M=b.getLine(F-1),I=_.getNextLineIndent(R,M,P));var z=b.getLine(F),W=_.$getIndent(z);if(I!==W){if(W.length>0){var j=new m(F,0,F,W.length);b.remove(j)}I.length>0&&b.insert({row:F,column:0},I)}_.autoOutdent(R,b,F)}},y.prototype.onTextInput=function(b,_){if(!_)return this.keyBinding.onTextInput(b);this.startOperation({command:{name:"insertstring"}});var E=this.applyComposition.bind(this,b,_);this.selection.rangeCount?this.forEachSelection(E):E(),this.endOperation()},y.prototype.applyComposition=function(b,_){if(_.extendLeft||_.extendRight){var E=this.selection.getRange();E.start.column-=_.extendLeft,E.end.column+=_.extendRight,E.start.column<0&&(E.start.row--,E.start.column+=this.session.getLine(E.start.row).length+1),this.selection.setRange(E),!b&&!E.isEmpty()&&this.remove()}if((b||!this.selection.isEmpty())&&this.insert(b,!0),_.restoreStart||_.restoreEnd){var E=this.selection.getRange();E.start.column-=_.restoreStart,E.end.column-=_.restoreEnd,this.selection.setRange(E)}},y.prototype.onCommandKey=function(b,_,E){return this.keyBinding.onCommandKey(b,_,E)},y.prototype.setOverwrite=function(b){this.session.setOverwrite(b)},y.prototype.getOverwrite=function(){return this.session.getOverwrite()},y.prototype.toggleOverwrite=function(){this.session.toggleOverwrite()},y.prototype.setScrollSpeed=function(b){this.setOption("scrollSpeed",b)},y.prototype.getScrollSpeed=function(){return this.getOption("scrollSpeed")},y.prototype.setDragDelay=function(b){this.setOption("dragDelay",b)},y.prototype.getDragDelay=function(){return this.getOption("dragDelay")},y.prototype.setSelectionStyle=function(b){this.setOption("selectionStyle",b)},y.prototype.getSelectionStyle=function(){return this.getOption("selectionStyle")},y.prototype.setHighlightActiveLine=function(b){this.setOption("highlightActiveLine",b)},y.prototype.getHighlightActiveLine=function(){return this.getOption("highlightActiveLine")},y.prototype.setHighlightGutterLine=function(b){this.setOption("highlightGutterLine",b)},y.prototype.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},y.prototype.setHighlightSelectedWord=function(b){this.setOption("highlightSelectedWord",b)},y.prototype.getHighlightSelectedWord=function(){return this.$highlightSelectedWord},y.prototype.setAnimatedScroll=function(b){this.renderer.setAnimatedScroll(b)},y.prototype.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()},y.prototype.setShowInvisibles=function(b){this.renderer.setShowInvisibles(b)},y.prototype.getShowInvisibles=function(){return this.renderer.getShowInvisibles()},y.prototype.setDisplayIndentGuides=function(b){this.renderer.setDisplayIndentGuides(b)},y.prototype.getDisplayIndentGuides=function(){return this.renderer.getDisplayIndentGuides()},y.prototype.setHighlightIndentGuides=function(b){this.renderer.setHighlightIndentGuides(b)},y.prototype.getHighlightIndentGuides=function(){return this.renderer.getHighlightIndentGuides()},y.prototype.setShowPrintMargin=function(b){this.renderer.setShowPrintMargin(b)},y.prototype.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()},y.prototype.setPrintMarginColumn=function(b){this.renderer.setPrintMarginColumn(b)},y.prototype.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()},y.prototype.setReadOnly=function(b){this.setOption("readOnly",b)},y.prototype.getReadOnly=function(){return this.getOption("readOnly")},y.prototype.setBehavioursEnabled=function(b){this.setOption("behavioursEnabled",b)},y.prototype.getBehavioursEnabled=function(){return this.getOption("behavioursEnabled")},y.prototype.setWrapBehavioursEnabled=function(b){this.setOption("wrapBehavioursEnabled",b)},y.prototype.getWrapBehavioursEnabled=function(){return this.getOption("wrapBehavioursEnabled")},y.prototype.setShowFoldWidgets=function(b){this.setOption("showFoldWidgets",b)},y.prototype.getShowFoldWidgets=function(){return this.getOption("showFoldWidgets")},y.prototype.setFadeFoldWidgets=function(b){this.setOption("fadeFoldWidgets",b)},y.prototype.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},y.prototype.remove=function(b){this.selection.isEmpty()&&(b=="left"?this.selection.selectLeft():this.selection.selectRight());var _=this.getSelectionRange();if(this.getBehavioursEnabled()){var E=this.session,R=E.getState(_.start.row),M=E.getMode().transformAction(R,"deletion",this,E,_);if(_.end.column===0){var I=E.getTextRange(_);if(I[I.length-1]==`
`){var P=E.getLine(_.end.row);/^\s+$/.test(P)&&(_.end.column=P.length)}}M&&(_=M)}this.session.remove(_),this.clearSelection()},y.prototype.removeWordRight=function(){this.selection.isEmpty()&&this.selection.selectWordRight(),this.session.remove(this.getSelectionRange()),this.clearSelection()},y.prototype.removeWordLeft=function(){this.selection.isEmpty()&&this.selection.selectWordLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},y.prototype.removeToLineStart=function(){this.selection.isEmpty()&&this.selection.selectLineStart(),this.selection.isEmpty()&&this.selection.selectLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},y.prototype.removeToLineEnd=function(){this.selection.isEmpty()&&this.selection.selectLineEnd();var b=this.getSelectionRange();b.start.column==b.end.column&&b.start.row==b.end.row&&(b.end.column=0,b.end.row++),this.session.remove(b),this.clearSelection()},y.prototype.splitLine=function(){this.selection.isEmpty()||(this.session.remove(this.getSelectionRange()),this.clearSelection());var b=this.getCursorPosition();this.insert(`
`),this.moveCursorToPosition(b)},y.prototype.setGhostText=function(b,_){this.session.widgetManager||(this.session.widgetManager=new S(this.session),this.session.widgetManager.attach(this)),this.renderer.setGhostText(b,_)},y.prototype.removeGhostText=function(){this.session.widgetManager&&this.renderer.removeGhostText()},y.prototype.transposeLetters=function(){if(this.selection.isEmpty()){var b=this.getCursorPosition(),_=b.column;if(_!==0){var E=this.session.getLine(b.row),R,M;_<E.length?(R=E.charAt(_)+E.charAt(_-1),M=new m(b.row,_-1,b.row,_+1)):(R=E.charAt(_-1)+E.charAt(_-2),M=new m(b.row,_-2,b.row,_)),this.session.replace(M,R),this.session.selection.moveToPosition(M.end)}}},y.prototype.toLowerCase=function(){var b=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var _=this.getSelectionRange(),E=this.session.getTextRange(_);this.session.replace(_,E.toLowerCase()),this.selection.setSelectionRange(b)},y.prototype.toUpperCase=function(){var b=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var _=this.getSelectionRange(),E=this.session.getTextRange(_);this.session.replace(_,E.toUpperCase()),this.selection.setSelectionRange(b)},y.prototype.indent=function(){var b=this.session,_=this.getSelectionRange();if(_.start.row<_.end.row){var E=this.$getSelectedRows();b.indentRows(E.first,E.last,"	");return}else if(_.start.column<_.end.column){var R=b.getTextRange(_);if(!/^\s+$/.test(R)){var E=this.$getSelectedRows();b.indentRows(E.first,E.last,"	");return}}var M=b.getLine(_.start.row),I=_.start,P=b.getTabSize(),O=b.documentToScreenColumn(I.row,I.column);if(this.session.getUseSoftTabs())var N=P-O%P,D=a.stringRepeat(" ",N);else{for(var N=O%P;M[_.start.column-1]==" "&&N;)_.start.column--,N--;this.selection.setSelectionRange(_),D="	"}return this.insert(D)},y.prototype.blockIndent=function(){var b=this.$getSelectedRows();this.session.indentRows(b.first,b.last,"	")},y.prototype.blockOutdent=function(){var b=this.session.getSelection();this.session.outdentRows(b.getRange())},y.prototype.sortLines=function(){for(var b=this.$getSelectedRows(),_=this.session,E=[],R=b.first;R<=b.last;R++)E.push(_.getLine(R));E.sort(function(P,O){return P.toLowerCase()<O.toLowerCase()?-1:P.toLowerCase()>O.toLowerCase()?1:0});for(var M=new m(0,0,0,0),R=b.first;R<=b.last;R++){var I=_.getLine(R);M.start.row=R,M.end.row=R,M.end.column=I.length,_.replace(M,E[R-b.first])}},y.prototype.toggleCommentLines=function(){var b=this.session.getState(this.getCursorPosition().row),_=this.$getSelectedRows();this.session.getMode().toggleCommentLines(b,this.session,_.first,_.last)},y.prototype.toggleBlockComment=function(){var b=this.getCursorPosition(),_=this.session.getState(b.row),E=this.getSelectionRange();this.session.getMode().toggleBlockComment(_,this.session,E,b)},y.prototype.getNumberAt=function(b,_){var E=/[\-]?[0-9]+(?:\.[0-9]+)?/g;E.lastIndex=0;for(var R=this.session.getLine(b);E.lastIndex<_;){var M=E.exec(R);if(M.index<=_&&M.index+M[0].length>=_){var I={value:M[0],start:M.index,end:M.index+M[0].length};return I}}return null},y.prototype.modifyNumber=function(b){var _=this.selection.getCursor().row,E=this.selection.getCursor().column,R=new m(_,E-1,_,E),M=this.session.getTextRange(R);if(!isNaN(parseFloat(M))&&isFinite(M)){var I=this.getNumberAt(_,E);if(I){var P=I.value.indexOf(".")>=0?I.start+I.value.indexOf(".")+1:I.end,O=I.start+I.value.length-P,N=parseFloat(I.value);N*=Math.pow(10,O),P!==I.end&&E<P?b*=Math.pow(10,I.end-E-1):b*=Math.pow(10,I.end-E),N+=b,N/=Math.pow(10,O);var D=N.toFixed(O),F=new m(_,I.start,_,I.end);this.session.replace(F,D),this.moveCursorTo(_,Math.max(I.start+1,E+D.length-I.value.length))}}else this.toggleWord()},y.prototype.toggleWord=function(){var b=this.selection.getCursor().row,_=this.selection.getCursor().column;this.selection.selectWord();var E=this.getSelectedText(),R=this.selection.getWordRange().start.column,M=E.replace(/([a-z]+|[A-Z]+)(?=[A-Z_]|$)/g,"$1 ").split(/\s/),I=_-R-1;I<0&&(I=0);var P=0,O=0,N=this;E.match(/[A-Za-z0-9_]+/)&&M.forEach(function(nt,ot){O=P+nt.length,I>=P&&I<=O&&(E=nt,N.selection.clearSelection(),N.moveCursorTo(b,P+R),N.selection.selectTo(b,O+R)),P=O});for(var D=this.$toggleWordPairs,F,z=0;z<D.length;z++)for(var W=D[z],j=0;j<=1;j++){var Z=+!j,Y=E.match(new RegExp("^\\s?_?("+a.escapeRegExp(W[j])+")\\s?$","i"));if(Y){var q=E.match(new RegExp("([_]|^|\\s)("+a.escapeRegExp(Y[1])+")($|\\s)","g"));q&&(F=E.replace(new RegExp(a.escapeRegExp(W[j]),"i"),function(nt){var ot=W[Z];return nt.toUpperCase()==nt?ot=ot.toUpperCase():nt.charAt(0).toUpperCase()==nt.charAt(0)&&(ot=ot.substr(0,0)+W[Z].charAt(0).toUpperCase()+ot.substr(1)),ot}),this.insert(F),F="")}}},y.prototype.findLinkAt=function(b,_){var E,R,M=this.session.getLine(b),I=M.split(/((?:https?|ftp):\/\/[\S]+)/),P=_;P<0&&(P=0);var O=0,N=0,D;try{for(var F=d(I),z=F.next();!z.done;z=F.next()){var W=z.value;if(N=O+W.length,P>=O&&P<=N&&W.match(/((?:https?|ftp):\/\/[\S]+)/)){D=W.replace(/[\s:.,'";}\]]+$/,"");break}O=N}}catch(j){E={error:j}}finally{try{z&&!z.done&&(R=F.return)&&R.call(F)}finally{if(E)throw E.error}}return D},y.prototype.openLink=function(){var b=this.selection.getCursor(),_=this.findLinkAt(b.row,b.column);return _&&window.open(_,"_blank"),_!=null},y.prototype.removeLines=function(){var b=this.$getSelectedRows();this.session.removeFullLines(b.first,b.last),this.clearSelection()},y.prototype.duplicateSelection=function(){var b=this.selection,_=this.session,E=b.getRange(),R=b.isBackwards();if(E.isEmpty()){var M=E.start.row;_.duplicateLines(M,M)}else{var I=R?E.start:E.end,P=_.insert(I,_.getTextRange(E));E.start=I,E.end=P,b.setSelectionRange(E,R)}},y.prototype.moveLinesDown=function(){this.$moveLines(1,!1)},y.prototype.moveLinesUp=function(){this.$moveLines(-1,!1)},y.prototype.moveText=function(b,_,E){return this.session.moveText(b,_,E)},y.prototype.copyLinesUp=function(){this.$moveLines(-1,!0)},y.prototype.copyLinesDown=function(){this.$moveLines(1,!0)},y.prototype.$moveLines=function(b,_){var E,R,M=this.selection;if(!M.inMultiSelectMode||this.inVirtualSelectionMode){var I=M.toOrientedRange();E=this.$getSelectedRows(I),R=this.session.$moveLines(E.first,E.last,_?0:b),_&&b==-1&&(R=0),I.moveBy(R,0),M.fromOrientedRange(I)}else{var P=M.rangeList.ranges;M.rangeList.detach(this.session),this.inVirtualSelectionMode=!0;for(var O=0,N=0,D=P.length,F=0;F<D;F++){var z=F;P[F].moveBy(O,0),E=this.$getSelectedRows(P[F]);for(var W=E.first,j=E.last;++F<D;){N&&P[F].moveBy(N,0);var Z=this.$getSelectedRows(P[F]);if(_&&Z.first!=j)break;if(!_&&Z.first>j+1)break;j=Z.last}for(F--,O=this.session.$moveLines(W,j,_?0:b),_&&b==-1&&(z=F+1);z<=F;)P[z].moveBy(O,0),z++;_||(O=0),N+=O}M.fromOrientedRange(M.ranges[0]),M.rangeList.attach(this.session),this.inVirtualSelectionMode=!1}},y.prototype.$getSelectedRows=function(b){return b=(b||this.getSelectionRange()).collapseRows(),{first:this.session.getRowFoldStart(b.start.row),last:this.session.getRowFoldEnd(b.end.row)}},y.prototype.onCompositionStart=function(b){this.renderer.showComposition(b)},y.prototype.onCompositionUpdate=function(b){this.renderer.setCompositionText(b)},y.prototype.onCompositionEnd=function(){this.renderer.hideComposition()},y.prototype.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()},y.prototype.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()},y.prototype.isRowVisible=function(b){return b>=this.getFirstVisibleRow()&&b<=this.getLastVisibleRow()},y.prototype.isRowFullyVisible=function(b){return b>=this.renderer.getFirstFullyVisibleRow()&&b<=this.renderer.getLastFullyVisibleRow()},y.prototype.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1},y.prototype.$moveByPage=function(b,_){var E=this.renderer,R=this.renderer.layerConfig,M=b*Math.floor(R.height/R.lineHeight);_===!0?this.selection.$moveSelection(function(){this.moveCursorBy(M,0)}):_===!1&&(this.selection.moveCursorBy(M,0),this.selection.clearSelection());var I=E.scrollTop;E.scrollBy(0,M*R.lineHeight),_!=null&&E.scrollCursorIntoView(null,.5),E.animateScrolling(I)},y.prototype.selectPageDown=function(){this.$moveByPage(1,!0)},y.prototype.selectPageUp=function(){this.$moveByPage(-1,!0)},y.prototype.gotoPageDown=function(){this.$moveByPage(1,!1)},y.prototype.gotoPageUp=function(){this.$moveByPage(-1,!1)},y.prototype.scrollPageDown=function(){this.$moveByPage(1)},y.prototype.scrollPageUp=function(){this.$moveByPage(-1)},y.prototype.scrollToRow=function(b){this.renderer.scrollToRow(b)},y.prototype.scrollToLine=function(b,_,E,R){this.renderer.scrollToLine(b,_,E,R)},y.prototype.centerSelection=function(){var b=this.getSelectionRange(),_={row:Math.floor(b.start.row+(b.end.row-b.start.row)/2),column:Math.floor(b.start.column+(b.end.column-b.start.column)/2)};this.renderer.alignCursor(_,.5)},y.prototype.getCursorPosition=function(){return this.selection.getCursor()},y.prototype.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())},y.prototype.getSelectionRange=function(){return this.selection.getRange()},y.prototype.selectAll=function(){this.selection.selectAll()},y.prototype.clearSelection=function(){this.selection.clearSelection()},y.prototype.moveCursorTo=function(b,_){this.selection.moveCursorTo(b,_)},y.prototype.moveCursorToPosition=function(b){this.selection.moveCursorToPosition(b)},y.prototype.jumpToMatching=function(b,_){var E=this.getCursorPosition(),R=new A(this.session,E.row,E.column),M=R.getCurrentToken(),I=0;M&&M.type.indexOf("tag-name")!==-1&&(M=R.stepBackward());var P=M||R.stepForward();if(P){var O,N=!1,D={},F=E.column-P.start,z,W={")":"(","(":"(","]":"[","[":"[","{":"{","}":"{"};do{if(P.value.match(/[{}()\[\]]/g)){for(;F<P.value.length&&!N;F++)if(W[P.value[F]])switch(z=W[P.value[F]]+"."+P.type.replace("rparen","lparen"),isNaN(D[z])&&(D[z]=0),P.value[F]){case"(":case"[":case"{":D[z]++;break;case")":case"]":case"}":D[z]--,D[z]===-1&&(O="bracket",N=!0);break}}else P.type.indexOf("tag-name")!==-1&&(isNaN(D[P.value])&&(D[P.value]=0),M.value==="<"&&I>1?D[P.value]++:M.value==="</"&&D[P.value]--,D[P.value]===-1&&(O="tag",N=!0));N||(M=P,I++,P=R.stepForward(),F=0)}while(P&&!N);if(O){var j,Z;if(O==="bracket")j=this.session.getBracketRange(E),j||(j=new m(R.getCurrentTokenRow(),R.getCurrentTokenColumn()+F-1,R.getCurrentTokenRow(),R.getCurrentTokenColumn()+F-1),Z=j.start,(_||Z.row===E.row&&Math.abs(Z.column-E.column)<2)&&(j=this.session.getBracketRange(Z)));else if(O==="tag"){if(!P||P.type.indexOf("tag-name")===-1)return;if(j=new m(R.getCurrentTokenRow(),R.getCurrentTokenColumn()-2,R.getCurrentTokenRow(),R.getCurrentTokenColumn()-2),j.compare(E.row,E.column)===0){var Y=this.session.getMatchingTags(E);Y&&(Y.openTag.contains(E.row,E.column)?(j=Y.closeTag,Z=j.start):(j=Y.openTag,Y.closeTag.start.row===E.row&&Y.closeTag.start.column===E.column?Z=j.end:Z=j.start))}Z=Z||j.start}Z=j&&j.cursor||Z,Z&&(b?j&&_?this.selection.setRange(j):j&&j.isEqual(this.getSelectionRange())?this.clearSelection():this.selection.selectTo(Z.row,Z.column):this.selection.moveTo(Z.row,Z.column))}}},y.prototype.gotoLine=function(b,_,E){this.selection.clearSelection(),this.session.unfold({row:b-1,column:_||0}),this.exitMultiSelectMode&&this.exitMultiSelectMode(),this.moveCursorTo(b-1,_||0),this.isRowFullyVisible(b-1)||this.scrollToLine(b-1,!0,E)},y.prototype.navigateTo=function(b,_){this.selection.moveTo(b,_)},y.prototype.navigateUp=function(b){if(this.selection.isMultiLine()&&!this.selection.isBackwards()){var _=this.selection.anchor.getPosition();return this.moveCursorToPosition(_)}this.selection.clearSelection(),this.selection.moveCursorBy(-b||-1,0)},y.prototype.navigateDown=function(b){if(this.selection.isMultiLine()&&this.selection.isBackwards()){var _=this.selection.anchor.getPosition();return this.moveCursorToPosition(_)}this.selection.clearSelection(),this.selection.moveCursorBy(b||1,0)},y.prototype.navigateLeft=function(b){if(this.selection.isEmpty())for(b=b||1;b--;)this.selection.moveCursorLeft();else{var _=this.getSelectionRange().start;this.moveCursorToPosition(_)}this.clearSelection()},y.prototype.navigateRight=function(b){if(this.selection.isEmpty())for(b=b||1;b--;)this.selection.moveCursorRight();else{var _=this.getSelectionRange().end;this.moveCursorToPosition(_)}this.clearSelection()},y.prototype.navigateLineStart=function(){this.selection.moveCursorLineStart(),this.clearSelection()},y.prototype.navigateLineEnd=function(){this.selection.moveCursorLineEnd(),this.clearSelection()},y.prototype.navigateFileEnd=function(){this.selection.moveCursorFileEnd(),this.clearSelection()},y.prototype.navigateFileStart=function(){this.selection.moveCursorFileStart(),this.clearSelection()},y.prototype.navigateWordRight=function(){this.selection.moveCursorWordRight(),this.clearSelection()},y.prototype.navigateWordLeft=function(){this.selection.moveCursorWordLeft(),this.clearSelection()},y.prototype.replace=function(b,_){_&&this.$search.set(_);var E=this.$search.find(this.session),R=0;return E&&(this.$tryReplace(E,b)&&(R=1),this.selection.setSelectionRange(E),this.renderer.scrollSelectionIntoView(E.start,E.end)),R},y.prototype.replaceAll=function(b,_){_&&this.$search.set(_);var E=this.$search.findAll(this.session),R=0;if(!E.length)return R;var M=this.getSelectionRange();this.selection.moveTo(0,0);for(var I=E.length-1;I>=0;--I)this.$tryReplace(E[I],b)&&R++;return this.selection.setSelectionRange(M),R},y.prototype.$tryReplace=function(b,_){var E=this.session.getTextRange(b);return _=this.$search.replace(E,_),_!==null?(b.end=this.session.replace(b,_),b):null},y.prototype.getLastSearchOptions=function(){return this.$search.getOptions()},y.prototype.find=function(b,_,E){_||(_={}),typeof b=="string"||b instanceof RegExp?_.needle=b:typeof b=="object"&&u.mixin(_,b);var R=this.selection.getRange();_.needle==null&&(b=this.session.getTextRange(R)||this.$search.$options.needle,b||(R=this.session.getWordRange(R.start.row,R.start.column),b=this.session.getTextRange(R)),this.$search.set({needle:b})),this.$search.set(_),_.start||this.$search.set({start:R});var M=this.$search.find(this.session);if(_.preventScroll)return M;if(M)return this.revealRange(M,E),M;_.backwards?R.start=R.end:R.end=R.start,this.selection.setRange(R)},y.prototype.findNext=function(b,_){this.find({skipCurrent:!0,backwards:!1},b,_)},y.prototype.findPrevious=function(b,_){this.find(b,{skipCurrent:!0,backwards:!0},_)},y.prototype.revealRange=function(b,_){this.session.unfold(b),this.selection.setSelectionRange(b);var E=this.renderer.scrollTop;this.renderer.scrollSelectionIntoView(b.start,b.end,.5),_!==!1&&this.renderer.animateScrolling(E)},y.prototype.undo=function(){this.session.getUndoManager().undo(this.session),this.renderer.scrollCursorIntoView(null,.5)},y.prototype.redo=function(){this.session.getUndoManager().redo(this.session),this.renderer.scrollCursorIntoView(null,.5)},y.prototype.destroy=function(){this.$toDestroy&&(this.$toDestroy.forEach(function(b){b.destroy()}),this.$toDestroy=null),this.$mouseHandler&&this.$mouseHandler.destroy(),this.renderer.destroy(),this._signal("destroy",this),this.session&&this.session.destroy(),this._$emitInputEvent&&this._$emitInputEvent.cancel(),this.removeAllListeners()},y.prototype.setAutoScrollEditorIntoView=function(b){if(b){var _,E=this,R=!1;this.$scrollAnchor||(this.$scrollAnchor=document.createElement("div"));var M=this.$scrollAnchor;M.style.cssText="position:absolute",this.container.insertBefore(M,this.container.firstChild);var I=this.on("changeSelection",function(){R=!0}),P=this.renderer.on("beforeRender",function(){R&&(_=E.renderer.container.getBoundingClientRect())}),O=this.renderer.on("afterRender",function(){if(R&&_&&(E.isFocused()||E.searchBox&&E.searchBox.isFocused())){var N=E.renderer,D=N.$cursorLayer.$pixelPos,F=N.layerConfig,z=D.top-F.offset;D.top>=0&&z+_.top<0?R=!0:D.top<F.height&&D.top+_.top+F.lineHeight>window.innerHeight?R=!1:R=null,R!=null&&(M.style.top=z+"px",M.style.left=D.left+"px",M.style.height=F.lineHeight+"px",M.scrollIntoView(R)),R=_=null}});this.setAutoScrollEditorIntoView=function(N){N||(delete this.setAutoScrollEditorIntoView,this.off("changeSelection",I),this.renderer.off("afterRender",O),this.renderer.off("beforeRender",P))}}},y.prototype.$resetCursorStyle=function(){var b=this.$cursorStyle||"ace",_=this.renderer.$cursorLayer;_&&(_.setSmoothBlinking(/smooth/.test(b)),_.isBlinking=!this.$readOnly&&b!="wide",g.setCssClass(_.element,"ace_slim-cursors",/slim/.test(b)))},y.prototype.prompt=function(b,_,E){var R=this;x.loadModule("ace/ext/prompt",function(M){M.prompt(R,b,_,E)})},y}();C.$uid=0,C.prototype.curOp=null,C.prototype.prevOp={},C.prototype.$mergeableCommands=["backspace","del","insertstring"],C.prototype.$toggleWordPairs=[["first","last"],["true","false"],["yes","no"],["width","height"],["top","bottom"],["right","left"],["on","off"],["x","y"],["get","set"],["max","min"],["horizontal","vertical"],["show","hide"],["add","remove"],["up","down"],["before","after"],["even","odd"],["in","out"],["inside","outside"],["next","previous"],["increase","decrease"],["attach","detach"],["&&","||"],["==","!="]],u.implement(C.prototype,h),x.defineOptions(C.prototype,"editor",{selectionStyle:{set:function(y){this.onSelectionChange(),this._signal("changeSelectionStyle",{data:y})},initialValue:"line"},highlightActiveLine:{set:function(){this.$updateHighlightActiveLine()},initialValue:!0},highlightSelectedWord:{set:function(y){this.$onSelectionChange()},initialValue:!0},readOnly:{set:function(y){this.textInput.setReadOnly(y),this.$resetCursorStyle()},initialValue:!1},copyWithEmptySelection:{set:function(y){this.textInput.setCopyWithEmptySelection(y)},initialValue:!1},cursorStyle:{set:function(y){this.$resetCursorStyle()},values:["ace","slim","smooth","wide"],initialValue:"ace"},mergeUndoDeltas:{values:[!1,!0,"always"],initialValue:!0},behavioursEnabled:{initialValue:!0},wrapBehavioursEnabled:{initialValue:!0},enableAutoIndent:{initialValue:!0},autoScrollEditorIntoView:{set:function(y){this.setAutoScrollEditorIntoView(y)}},keyboardHandler:{set:function(y){this.setKeyboardHandler(y)},get:function(){return this.$keybindingId},handlesSet:!0},value:{set:function(y){this.session.setValue(y)},get:function(){return this.getValue()},handlesSet:!0,hidden:!0},session:{set:function(y){this.setSession(y)},get:function(){return this.session},handlesSet:!0,hidden:!0},showLineNumbers:{set:function(y){this.renderer.$gutterLayer.setShowLineNumbers(y),this.renderer.$loop.schedule(this.renderer.CHANGE_GUTTER),y&&this.$relativeLineNumbers?w.attach(this):w.detach(this)},initialValue:!0},relativeLineNumbers:{set:function(y){this.$showLineNumbers&&y?w.attach(this):w.detach(this)}},placeholder:{set:function(y){this.$updatePlaceholder||(this.$updatePlaceholder=function(){var b=this.session&&(this.renderer.$composition||this.session.getLength()>1||this.session.getLine(0).length>0);if(b&&this.renderer.placeholderNode)this.renderer.off("afterRender",this.$updatePlaceholder),g.removeCssClass(this.container,"ace_hasPlaceholder"),this.renderer.placeholderNode.remove(),this.renderer.placeholderNode=null;else if(!b&&!this.renderer.placeholderNode){this.renderer.on("afterRender",this.$updatePlaceholder),g.addCssClass(this.container,"ace_hasPlaceholder");var _=g.createElement("div");_.className="ace_placeholder",_.textContent=this.$placeholder||"",this.renderer.placeholderNode=_,this.renderer.content.appendChild(this.renderer.placeholderNode)}else!b&&this.renderer.placeholderNode&&(this.renderer.placeholderNode.textContent=this.$placeholder||"")}.bind(this),this.on("input",this.$updatePlaceholder)),this.$updatePlaceholder()}},enableKeyboardAccessibility:{set:function(y){var b={name:"blurTextInput",description:"Set focus to the editor content div to allow tabbing through the page",bindKey:"Esc",exec:function(R){R.blur(),R.renderer.scroller.focus()},readOnly:!0},_=function(R){if(R.target==this.renderer.scroller&&R.keyCode===T.enter){R.preventDefault();var M=this.getCursorPosition().row;this.isRowVisible(M)||this.scrollToLine(M,!0,!0),this.focus()}},E;y?(this.renderer.enableKeyboardAccessibility=!0,this.renderer.keyboardFocusClassName="ace_keyboard-focus",this.textInput.getElement().setAttribute("tabindex",-1),this.textInput.setNumberOfExtraLines(p.isWin?3:0),this.renderer.scroller.setAttribute("tabindex",0),this.renderer.scroller.setAttribute("role","group"),this.renderer.scroller.setAttribute("aria-roledescription",L("editor.scroller.aria-roledescription","editor")),this.renderer.scroller.classList.add(this.renderer.keyboardFocusClassName),this.renderer.scroller.setAttribute("aria-label",L("editor.scroller.aria-label","Editor content, press Enter to start editing, press Escape to exit")),this.renderer.scroller.addEventListener("keyup",_.bind(this)),this.commands.addCommand(b),this.renderer.$gutter.setAttribute("tabindex",0),this.renderer.$gutter.setAttribute("aria-hidden",!1),this.renderer.$gutter.setAttribute("role","group"),this.renderer.$gutter.setAttribute("aria-roledescription",L("editor.gutter.aria-roledescription","editor")),this.renderer.$gutter.setAttribute("aria-label",L("editor.gutter.aria-label","Editor gutter, press Enter to interact with controls using arrow keys, press Escape to exit")),this.renderer.$gutter.classList.add(this.renderer.keyboardFocusClassName),this.renderer.content.setAttribute("aria-hidden",!0),E||(E=new f(this)),E.addListener(),this.textInput.setAriaOptions({setLabel:!0})):(this.renderer.enableKeyboardAccessibility=!1,this.textInput.getElement().setAttribute("tabindex",0),this.textInput.setNumberOfExtraLines(0),this.renderer.scroller.setAttribute("tabindex",-1),this.renderer.scroller.removeAttribute("role"),this.renderer.scroller.removeAttribute("aria-roledescription"),this.renderer.scroller.classList.remove(this.renderer.keyboardFocusClassName),this.renderer.scroller.removeAttribute("aria-label"),this.renderer.scroller.removeEventListener("keyup",_.bind(this)),this.commands.removeCommand(b),this.renderer.content.removeAttribute("aria-hidden"),this.renderer.$gutter.setAttribute("tabindex",-1),this.renderer.$gutter.setAttribute("aria-hidden",!0),this.renderer.$gutter.removeAttribute("role"),this.renderer.$gutter.removeAttribute("aria-roledescription"),this.renderer.$gutter.removeAttribute("aria-label"),this.renderer.$gutter.classList.remove(this.renderer.keyboardFocusClassName),E&&E.removeListener())},initialValue:!1},textInputAriaLabel:{set:function(y){this.$textInputAriaLabel=y},initialValue:""},enableMobileMenu:{set:function(y){this.$enableMobileMenu=y},initialValue:!0},customScrollbar:"renderer",hScrollBarAlwaysVisible:"renderer",vScrollBarAlwaysVisible:"renderer",highlightGutterLine:"renderer",animatedScroll:"renderer",showInvisibles:"renderer",showPrintMargin:"renderer",printMarginColumn:"renderer",printMargin:"renderer",fadeFoldWidgets:"renderer",showFoldWidgets:"renderer",displayIndentGuides:"renderer",highlightIndentGuides:"renderer",showGutter:"renderer",fontSize:"renderer",fontFamily:"renderer",maxLines:"renderer",minLines:"renderer",scrollPastEnd:"renderer",fixedWidthGutter:"renderer",theme:"renderer",hasCssTransforms:"renderer",maxPixelHeight:"renderer",useTextareaForIME:"renderer",useResizeObserver:"renderer",useSvgGutterIcons:"renderer",showFoldedAnnotations:"renderer",scrollSpeed:"$mouseHandler",dragDelay:"$mouseHandler",dragEnabled:"$mouseHandler",focusTimeout:"$mouseHandler",tooltipFollowsMouse:"$mouseHandler",firstLineNumber:"session",overwrite:"session",newLineMode:"session",useWorker:"session",useSoftTabs:"session",navigateWithinSoftTabs:"session",tabSize:"session",wrap:"session",indentedSoftWrap:"session",foldStyle:"session",mode:"session"});var w={getText:function(y,b){return(Math.abs(y.selection.lead.row-b)||b+1+(b<9?"\xB7":""))+""},getWidth:function(y,b,_){return Math.max(b.toString().length,(_.lastRow+1).toString().length,2)*_.characterWidth},update:function(y,b){b.renderer.$loop.schedule(b.renderer.CHANGE_GUTTER)},attach:function(y){y.renderer.$gutterLayer.$renderer=this,y.on("changeSelection",this.update),this.update(null,y)},detach:function(y){y.renderer.$gutterLayer.$renderer==this&&(y.renderer.$gutterLayer.$renderer=null),y.off("changeSelection",this.update),this.update(null,y)}};t.Editor=C});ace.define("ace/layer/lines",["require","exports","module","ace/lib/dom"],function(e,t,r){"use strict";var d=e("../lib/dom"),u=function(){function g(a,p){this.element=a,this.canvasHeight=p||5e5,this.element.style.height=this.canvasHeight*2+"px",this.cells=[],this.cellCache=[],this.$offsetCoefficient=0}return g.prototype.moveContainer=function(a){d.translate(this.element,0,-(a.firstRowScreen*a.lineHeight%this.canvasHeight)-a.offset*this.$offsetCoefficient)},g.prototype.pageChanged=function(a,p){return Math.floor(a.firstRowScreen*a.lineHeight/this.canvasHeight)!==Math.floor(p.firstRowScreen*p.lineHeight/this.canvasHeight)},g.prototype.computeLineTop=function(a,p,o){var i=p.firstRowScreen*p.lineHeight,n=Math.floor(i/this.canvasHeight),l=o.documentToScreenRow(a,0)*p.lineHeight;return l-n*this.canvasHeight},g.prototype.computeLineHeight=function(a,p,o){return p.lineHeight*o.getRowLineCount(a)},g.prototype.getLength=function(){return this.cells.length},g.prototype.get=function(a){return this.cells[a]},g.prototype.shift=function(){this.$cacheCell(this.cells.shift())},g.prototype.pop=function(){this.$cacheCell(this.cells.pop())},g.prototype.push=function(a){if(Array.isArray(a)){this.cells.push.apply(this.cells,a);for(var p=d.createFragment(this.element),o=0;o<a.length;o++)p.appendChild(a[o].element);this.element.appendChild(p)}else this.cells.push(a),this.element.appendChild(a.element)},g.prototype.unshift=function(a){if(Array.isArray(a)){this.cells.unshift.apply(this.cells,a);for(var p=d.createFragment(this.element),o=0;o<a.length;o++)p.appendChild(a[o].element);this.element.firstChild?this.element.insertBefore(p,this.element.firstChild):this.element.appendChild(p)}else this.cells.unshift(a),this.element.insertAdjacentElement("afterbegin",a.element)},g.prototype.last=function(){return this.cells.length?this.cells[this.cells.length-1]:null},g.prototype.$cacheCell=function(a){a&&(a.element.remove(),this.cellCache.push(a))},g.prototype.createCell=function(a,p,o,i){var n=this.cellCache.pop();if(!n){var l=d.createElement("div");i&&i(l),this.element.appendChild(l),n={element:l,text:"",row:a}}return n.row=a,n},g}();t.Lines=u});ace.define("ace/layer/gutter",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/layer/lines","ace/config"],function(e,t,r){"use strict";var d=e("../lib/dom"),u=e("../lib/oop"),g=e("../lib/lang"),a=e("../lib/event_emitter").EventEmitter,p=e("./lines").Lines,o=e("../config").nls,i=function(){function l(s){this.element=d.createElement("div"),this.element.className="ace_layer ace_gutter-layer",s.appendChild(this.element),this.setShowFoldWidgets(this.$showFoldWidgets),this.gutterWidth=0,this.$annotations=[],this.$updateAnnotations=this.$updateAnnotations.bind(this),this.$lines=new p(this.element),this.$lines.$offsetCoefficient=1}return l.prototype.setSession=function(s){this.session&&this.session.off("change",this.$updateAnnotations),this.session=s,s&&s.on("change",this.$updateAnnotations)},l.prototype.addGutterDecoration=function(s,c){window.console&&console.warn&&console.warn("deprecated use session.addGutterDecoration"),this.session.addGutterDecoration(s,c)},l.prototype.removeGutterDecoration=function(s,c){window.console&&console.warn&&console.warn("deprecated use session.removeGutterDecoration"),this.session.removeGutterDecoration(s,c)},l.prototype.setAnnotations=function(s){this.$annotations=[];for(var c=0;c<s.length;c++){var m=s[c],h=m.row,v=this.$annotations[h];v||(v=this.$annotations[h]={text:[],type:[],displayText:[]});var k=m.text,x=m.text,A=m.type;k=k?g.escapeHTML(k):m.html||"",x=x||m.html||"",v.text.indexOf(k)===-1&&(v.text.push(k),v.type.push(A),v.displayText.push(x));var S=m.className;S?v.className=S:A=="error"?v.className=" ace_error":A=="warning"&&v.className!=" ace_error"?v.className=" ace_warning":A=="info"&&!v.className&&(v.className=" ace_info")}},l.prototype.$updateAnnotations=function(s){if(this.$annotations.length){var c=s.start.row,m=s.end.row-c;if(m!==0)if(s.action=="remove")this.$annotations.splice(c,m+1,null);else{var h=new Array(m+1);h.unshift(c,1),this.$annotations.splice.apply(this.$annotations,h)}}},l.prototype.update=function(s){this.config=s;var c=this.session,m=s.firstRow,h=Math.min(s.lastRow+s.gutterOffset,c.getLength()-1);this.oldLastRow=h,this.config=s,this.$lines.moveContainer(s),this.$updateCursorRow();for(var v=c.getNextFoldLine(m),k=v?v.start.row:1/0,x=null,A=-1,S=m;;){if(S>k&&(S=v.end.row+1,v=c.getNextFoldLine(S,v),k=v?v.start.row:1/0),S>h){for(;this.$lines.getLength()>A+1;)this.$lines.pop();break}x=this.$lines.get(++A),x?x.row=S:(x=this.$lines.createCell(S,s,this.session,n),this.$lines.push(x)),this.$renderCell(x,s,v,S),S++}this._signal("afterRender"),this.$updateGutterWidth(s)},l.prototype.$updateGutterWidth=function(s){var c=this.session,m=c.gutterRenderer||this.$renderer,h=c.$firstLineNumber,v=this.$lines.last()?this.$lines.last().text:"";(this.$fixedWidth||c.$useWrapMode)&&(v=c.getLength()+h-1);var k=m?m.getWidth(c,v,s):v.toString().length*s.characterWidth,x=this.$padding||this.$computePadding();k+=x.left+x.right,k!==this.gutterWidth&&!isNaN(k)&&(this.gutterWidth=k,this.element.parentNode.style.width=this.element.style.width=Math.ceil(this.gutterWidth)+"px",this._signal("changeGutterWidth",k))},l.prototype.$updateCursorRow=function(){if(this.$highlightGutterLine){var s=this.session.selection.getCursor();this.$cursorRow!==s.row&&(this.$cursorRow=s.row)}},l.prototype.updateLineHighlight=function(){if(this.$highlightGutterLine){var s=this.session.selection.cursor.row;if(this.$cursorRow=s,!(this.$cursorCell&&this.$cursorCell.row==s)){this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ",""));var c=this.$lines.cells;this.$cursorCell=null;for(var m=0;m<c.length;m++){var h=c[m];if(h.row>=this.$cursorRow){if(h.row>this.$cursorRow){var v=this.session.getFoldLine(this.$cursorRow);if(m>0&&v&&v.start.row==c[m-1].row)h=c[m-1];else break}h.element.className="ace_gutter-active-line "+h.element.className,this.$cursorCell=h;break}}}}},l.prototype.scrollLines=function(s){var c=this.config;if(this.config=s,this.$updateCursorRow(),this.$lines.pageChanged(c,s))return this.update(s);this.$lines.moveContainer(s);var m=Math.min(s.lastRow+s.gutterOffset,this.session.getLength()-1),h=this.oldLastRow;if(this.oldLastRow=m,!c||h<s.firstRow)return this.update(s);if(m<c.firstRow)return this.update(s);if(c.firstRow<s.firstRow)for(var v=this.session.getFoldedRowCount(c.firstRow,s.firstRow-1);v>0;v--)this.$lines.shift();if(h>m)for(var v=this.session.getFoldedRowCount(m+1,h);v>0;v--)this.$lines.pop();s.firstRow<c.firstRow&&this.$lines.unshift(this.$renderLines(s,s.firstRow,c.firstRow-1)),m>h&&this.$lines.push(this.$renderLines(s,h+1,m)),this.updateLineHighlight(),this._signal("afterRender"),this.$updateGutterWidth(s)},l.prototype.$renderLines=function(s,c,m){for(var h=[],v=c,k=this.session.getNextFoldLine(v),x=k?k.start.row:1/0;v>x&&(v=k.end.row+1,k=this.session.getNextFoldLine(v,k),x=k?k.start.row:1/0),!(v>m);){var A=this.$lines.createCell(v,s,this.session,n);this.$renderCell(A,s,k,v),h.push(A),v++}return h},l.prototype.$renderCell=function(s,c,m,h){var v=s.element,k=this.session,x=v.childNodes[0],A=v.childNodes[1],S=v.childNodes[2],f=S.firstChild,L=k.$firstLineNumber,$=k.$breakpoints,T=k.$decorations,C=k.gutterRenderer||this.$renderer,w=this.$showFoldWidgets&&k.foldWidgets,y=m?m.start.row:Number.MAX_VALUE,b=c.lineHeight+"px",_=this.$useSvgGutterIcons?"ace_gutter-cell_svg-icons ":"ace_gutter-cell ",E=this.$useSvgGutterIcons?"ace_icon_svg":"ace_icon",R=(C?C.getText(k,h):h+L).toString();if(this.$highlightGutterLine&&(h==this.$cursorRow||m&&h<this.$cursorRow&&h>=y&&this.$cursorRow<=m.end.row)&&(_+="ace_gutter-active-line ",this.$cursorCell!=s&&(this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ","")),this.$cursorCell=s)),$[h]&&(_+=$[h]),T[h]&&(_+=T[h]),this.$annotations[h]&&h!==y&&(_+=this.$annotations[h].className),w){var M=w[h];M==null&&(M=w[h]=k.getFoldWidget(h))}if(M){var I="ace_fold-widget ace_"+M,P=M=="start"&&h==y&&h<m.end.row;if(P){I+=" ace_closed";for(var O="",N=!1,D=h+1;D<=m.end.row;D++)if(this.$annotations[D]){if(this.$annotations[D].className===" ace_error"){N=!0,O=" ace_error_fold";break}if(this.$annotations[D].className===" ace_warning"){N=!0,O=" ace_warning_fold";continue}}_+=O}else I+=" ace_open";A.className!=I&&(A.className=I),d.setStyle(A.style,"height",b),d.setStyle(A.style,"display","inline-block"),A.setAttribute("role","button"),A.setAttribute("tabindex","-1");var F=k.getFoldWidgetRange(h);F?A.setAttribute("aria-label",o("gutter.code-folding.range.aria-label","Toggle code folding, rows $0 through $1",[F.start.row+1,F.end.row+1])):m?A.setAttribute("aria-label",o("gutter.code-folding.closed.aria-label","Toggle code folding, rows $0 through $1",[m.start.row+1,m.end.row+1])):A.setAttribute("aria-label",o("gutter.code-folding.open.aria-label","Toggle code folding, row $0",[h+1])),P?(A.setAttribute("aria-expanded","false"),A.setAttribute("title",o("gutter.code-folding.closed.title","Unfold code"))):(A.setAttribute("aria-expanded","true"),A.setAttribute("title",o("gutter.code-folding.open.title","Fold code")))}else A&&(d.setStyle(A.style,"display","none"),A.setAttribute("tabindex","0"),A.removeAttribute("role"),A.removeAttribute("aria-label"));if(N&&this.$showFoldedAnnotations){S.className="ace_gutter_annotation",f.className=E,f.className+=O,d.setStyle(f.style,"height",b),d.setStyle(S.style,"display","block"),d.setStyle(S.style,"height",b);var z;switch(O){case" ace_error_fold":z=o("gutter.annotation.aria-label.error","Read annotations row $0",[R]);break;case" ace_warning_fold":z=o("gutter.annotation.aria-label.warning","Read annotations row $0",[R]);break}S.setAttribute("aria-label",z),S.setAttribute("tabindex","-1"),S.setAttribute("role","button")}else if(this.$annotations[h]){S.className="ace_gutter_annotation",f.className=E,this.$useSvgGutterIcons?f.className+=this.$annotations[h].className:v.classList.add(this.$annotations[h].className.replace(" ","")),d.setStyle(f.style,"height",b),d.setStyle(S.style,"display","block"),d.setStyle(S.style,"height",b);var z;switch(this.$annotations[h].className){case" ace_error":z=o("gutter.annotation.aria-label.error","Read annotations row $0",[R]);break;case" ace_warning":z=o("gutter.annotation.aria-label.warning","Read annotations row $0",[R]);break;case" ace_info":z=o("gutter.annotation.aria-label.info","Read annotations row $0",[R]);break}S.setAttribute("aria-label",z),S.setAttribute("tabindex","-1"),S.setAttribute("role","button")}else d.setStyle(S.style,"display","none"),S.removeAttribute("aria-label"),S.removeAttribute("role"),S.setAttribute("tabindex","0");return R!==x.data&&(x.data=R),v.className!=_&&(v.className=_),d.setStyle(s.element.style,"height",this.$lines.computeLineHeight(h,c,k)+"px"),d.setStyle(s.element.style,"top",this.$lines.computeLineTop(h,c,k)+"px"),s.text=R,S.style.display==="none"&&A.style.display==="none"?s.element.setAttribute("aria-hidden",!0):s.element.setAttribute("aria-hidden",!1),s},l.prototype.setHighlightGutterLine=function(s){this.$highlightGutterLine=s},l.prototype.setShowLineNumbers=function(s){this.$renderer=!s&&{getWidth:function(){return 0},getText:function(){return""}}},l.prototype.getShowLineNumbers=function(){return this.$showLineNumbers},l.prototype.setShowFoldWidgets=function(s){s?d.addCssClass(this.element,"ace_folding-enabled"):d.removeCssClass(this.element,"ace_folding-enabled"),this.$showFoldWidgets=s,this.$padding=null},l.prototype.getShowFoldWidgets=function(){return this.$showFoldWidgets},l.prototype.$computePadding=function(){if(!this.element.firstChild)return{left:0,right:0};var s=d.computedStyle(this.element.firstChild);return this.$padding={},this.$padding.left=(parseInt(s.borderLeftWidth)||0)+(parseInt(s.paddingLeft)||0)+1,this.$padding.right=(parseInt(s.borderRightWidth)||0)+(parseInt(s.paddingRight)||0),this.$padding},l.prototype.getRegion=function(s){var c=this.$padding||this.$computePadding(),m=this.element.getBoundingClientRect();if(s.x<c.left+m.left)return"markers";if(this.$showFoldWidgets&&s.x>m.right-c.right)return"foldWidgets"},l}();i.prototype.$fixedWidth=!1,i.prototype.$highlightGutterLine=!0,i.prototype.$renderer="",i.prototype.$showLineNumbers=!0,i.prototype.$showFoldWidgets=!0,u.implement(i.prototype,a);function n(l){var s=document.createTextNode("");l.appendChild(s);var c=d.createElement("span");l.appendChild(c);var m=d.createElement("span");l.appendChild(m);var h=d.createElement("span");return m.appendChild(h),l}t.Gutter=i});ace.define("ace/layer/marker",["require","exports","module","ace/range","ace/lib/dom"],function(e,t,r){"use strict";var d=e("../range").Range,u=e("../lib/dom"),g=function(){function p(o){this.element=u.createElement("div"),this.element.className="ace_layer ace_marker-layer",o.appendChild(this.element)}return p.prototype.setPadding=function(o){this.$padding=o},p.prototype.setSession=function(o){this.session=o},p.prototype.setMarkers=function(o){this.markers=o},p.prototype.elt=function(o,i){var n=this.i!=-1&&this.element.childNodes[this.i];n?this.i++:(n=document.createElement("div"),this.element.appendChild(n),this.i=-1),n.style.cssText=i,n.className=o},p.prototype.update=function(o){if(o){this.config=o,this.i=0;var i;for(var n in this.markers){var l=this.markers[n];if(!l.range){l.update(i,this,this.session,o);continue}var s=l.range.clipRows(o.firstRow,o.lastRow);if(!s.isEmpty())if(s=s.toScreenRange(this.session),l.renderer){var c=this.$getTop(s.start.row,o),m=this.$padding+s.start.column*o.characterWidth;l.renderer(i,s,m,c,o)}else l.type=="fullLine"?this.drawFullLineMarker(i,s,l.clazz,o):l.type=="screenLine"?this.drawScreenLineMarker(i,s,l.clazz,o):s.isMultiLine()?l.type=="text"?this.drawTextMarker(i,s,l.clazz,o):this.drawMultiLineMarker(i,s,l.clazz,o):this.drawSingleLineMarker(i,s,l.clazz+" ace_start ace_br15",o)}if(this.i!=-1)for(;this.i<this.element.childElementCount;)this.element.removeChild(this.element.lastChild)}},p.prototype.$getTop=function(o,i){return(o-i.firstRowScreen)*i.lineHeight},p.prototype.drawTextMarker=function(o,i,n,l,s){for(var c=this.session,m=i.start.row,h=i.end.row,v=m,k=0,x=0,A=c.getScreenLastRowColumn(v),S=new d(v,i.start.column,v,x);v<=h;v++)S.start.row=S.end.row=v,S.start.column=v==m?i.start.column:c.getRowWrapIndent(v),S.end.column=A,k=x,x=A,A=v+1<h?c.getScreenLastRowColumn(v+1):v==h?0:i.end.column,this.drawSingleLineMarker(o,S,n+(v==m?" ace_start":"")+" ace_br"+a(v==m||v==m+1&&i.start.column,k<x,x>A,v==h),l,v==h?0:1,s)},p.prototype.drawMultiLineMarker=function(o,i,n,l,s){var c=this.$padding,m=l.lineHeight,h=this.$getTop(i.start.row,l),v=c+i.start.column*l.characterWidth;if(s=s||"",this.session.$bidiHandler.isBidiRow(i.start.row)){var k=i.clone();k.end.row=k.start.row,k.end.column=this.session.getLine(k.start.row).length,this.drawBidiSingleLineMarker(o,k,n+" ace_br1 ace_start",l,null,s)}else this.elt(n+" ace_br1 ace_start","height:"+m+"px;right:0;top:"+h+"px;left:"+v+"px;"+(s||""));if(this.session.$bidiHandler.isBidiRow(i.end.row)){var k=i.clone();k.start.row=k.end.row,k.start.column=0,this.drawBidiSingleLineMarker(o,k,n+" ace_br12",l,null,s)}else{h=this.$getTop(i.end.row,l);var x=i.end.column*l.characterWidth;this.elt(n+" ace_br12","height:"+m+"px;width:"+x+"px;top:"+h+"px;left:"+c+"px;"+(s||""))}if(m=(i.end.row-i.start.row-1)*l.lineHeight,!(m<=0)){h=this.$getTop(i.start.row+1,l);var A=(i.start.column?1:0)|(i.end.column?0:8);this.elt(n+(A?" ace_br"+A:""),"height:"+m+"px;right:0;top:"+h+"px;left:"+c+"px;"+(s||""))}},p.prototype.drawSingleLineMarker=function(o,i,n,l,s,c){if(this.session.$bidiHandler.isBidiRow(i.start.row))return this.drawBidiSingleLineMarker(o,i,n,l,s,c);var m=l.lineHeight,h=(i.end.column+(s||0)-i.start.column)*l.characterWidth,v=this.$getTop(i.start.row,l),k=this.$padding+i.start.column*l.characterWidth;this.elt(n,"height:"+m+"px;width:"+h+"px;top:"+v+"px;left:"+k+"px;"+(c||""))},p.prototype.drawBidiSingleLineMarker=function(o,i,n,l,s,c){var m=l.lineHeight,h=this.$getTop(i.start.row,l),v=this.$padding,k=this.session.$bidiHandler.getSelections(i.start.column,i.end.column);k.forEach(function(x){this.elt(n,"height:"+m+"px;width:"+(x.width+(s||0))+"px;top:"+h+"px;left:"+(v+x.left)+"px;"+(c||""))},this)},p.prototype.drawFullLineMarker=function(o,i,n,l,s){var c=this.$getTop(i.start.row,l),m=l.lineHeight;i.start.row!=i.end.row&&(m+=this.$getTop(i.end.row,l)-c),this.elt(n,"height:"+m+"px;top:"+c+"px;left:0;right:0;"+(s||""))},p.prototype.drawScreenLineMarker=function(o,i,n,l,s){var c=this.$getTop(i.start.row,l),m=l.lineHeight;this.elt(n,"height:"+m+"px;top:"+c+"px;left:0;right:0;"+(s||""))},p}();g.prototype.$padding=0;function a(p,o,i,n){return(p?1:0)|(o?2:0)|(i?4:0)|(n?8:0)}t.Marker=g});ace.define("ace/layer/text_util",["require","exports","module"],function(e,t,r){var d=new Set(["text","rparen","lparen"]);t.isTextToken=function(u){return d.has(u)}});ace.define("ace/layer/text",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/layer/lines","ace/lib/event_emitter","ace/config","ace/layer/text_util"],function(e,t,r){"use strict";var d=e("../lib/oop"),u=e("../lib/dom"),g=e("../lib/lang"),a=e("./lines").Lines,p=e("../lib/event_emitter").EventEmitter,o=e("../config").nls,i=e("./text_util").isTextToken,n=function(){function l(s){this.dom=u,this.element=this.dom.createElement("div"),this.element.className="ace_layer ace_text-layer",s.appendChild(this.element),this.$updateEolChar=this.$updateEolChar.bind(this),this.$lines=new a(this.element)}return l.prototype.$updateEolChar=function(){var s=this.session.doc,c=s.getNewLineCharacter()==`
`&&s.getNewLineMode()!="windows",m=c?this.EOL_CHAR_LF:this.EOL_CHAR_CRLF;if(this.EOL_CHAR!=m)return this.EOL_CHAR=m,!0},l.prototype.setPadding=function(s){this.$padding=s,this.element.style.margin="0 "+s+"px"},l.prototype.getLineHeight=function(){return this.$fontMetrics.$characterSize.height||0},l.prototype.getCharacterWidth=function(){return this.$fontMetrics.$characterSize.width||0},l.prototype.$setFontMetrics=function(s){this.$fontMetrics=s,this.$fontMetrics.on("changeCharacterSize",function(c){this._signal("changeCharacterSize",c)}.bind(this)),this.$pollSizeChanges()},l.prototype.checkForSizeChanges=function(){this.$fontMetrics.checkForSizeChanges()},l.prototype.$pollSizeChanges=function(){return this.$pollSizeChangesTimer=this.$fontMetrics.$pollSizeChanges()},l.prototype.setSession=function(s){this.session=s,s&&this.$computeTabString()},l.prototype.setShowInvisibles=function(s){return this.showInvisibles==s?!1:(this.showInvisibles=s,typeof s=="string"?(this.showSpaces=/tab/i.test(s),this.showTabs=/space/i.test(s),this.showEOL=/eol/i.test(s)):this.showSpaces=this.showTabs=this.showEOL=s,this.$computeTabString(),!0)},l.prototype.setDisplayIndentGuides=function(s){return this.displayIndentGuides==s?!1:(this.displayIndentGuides=s,this.$computeTabString(),!0)},l.prototype.setHighlightIndentGuides=function(s){return this.$highlightIndentGuides===s?!1:(this.$highlightIndentGuides=s,s)},l.prototype.$computeTabString=function(){var s=this.session.getTabSize();this.tabSize=s;for(var c=this.$tabStrings=[0],m=1;m<s+1;m++)if(this.showTabs){var h=this.dom.createElement("span");h.className="ace_invisible ace_invisible_tab",h.textContent=g.stringRepeat(this.TAB_CHAR,m),c.push(h)}else c.push(this.dom.createTextNode(g.stringRepeat(" ",m),this.element));if(this.displayIndentGuides){this.$indentGuideRe=/\s\S| \t|\t |\s$/;var v="ace_indent-guide",k=this.showSpaces?" ace_invisible ace_invisible_space":"",x=this.showSpaces?g.stringRepeat(this.SPACE_CHAR,this.tabSize):g.stringRepeat(" ",this.tabSize),A=this.showTabs?" ace_invisible ace_invisible_tab":"",S=this.showTabs?g.stringRepeat(this.TAB_CHAR,this.tabSize):x,h=this.dom.createElement("span");h.className=v+k,h.textContent=x,this.$tabStrings[" "]=h;var h=this.dom.createElement("span");h.className=v+A,h.textContent=S,this.$tabStrings["	"]=h}},l.prototype.updateLines=function(s,c,m){if(this.config.lastRow!=s.lastRow||this.config.firstRow!=s.firstRow)return this.update(s);this.config=s;for(var h=Math.max(c,s.firstRow),v=Math.min(m,s.lastRow),k=this.element.childNodes,x=0,S=s.firstRow;S<h;S++){var f=this.session.getFoldLine(S);if(f)if(f.containsRow(h)){h=f.start.row;break}else S=f.end.row;x++}for(var A=!1,S=h,f=this.session.getNextFoldLine(S),L=f?f.start.row:1/0;S>L&&(S=f.end.row+1,f=this.session.getNextFoldLine(S,f),L=f?f.start.row:1/0),!(S>v);){var $=k[x++];if($){this.dom.removeChildren($),this.$renderLine($,S,S==L?f:!1),A&&($.style.top=this.$lines.computeLineTop(S,s,this.session)+"px");var T=s.lineHeight*this.session.getRowLength(S)+"px";$.style.height!=T&&(A=!0,$.style.height=T)}S++}if(A)for(;x<this.$lines.cells.length;){var C=this.$lines.cells[x++];C.element.style.top=this.$lines.computeLineTop(C.row,s,this.session)+"px"}},l.prototype.scrollLines=function(s){var c=this.config;if(this.config=s,this.$lines.pageChanged(c,s))return this.update(s);this.$lines.moveContainer(s);var m=s.lastRow,h=c?c.lastRow:-1;if(!c||h<s.firstRow)return this.update(s);if(m<c.firstRow)return this.update(s);if(!c||c.lastRow<s.firstRow)return this.update(s);if(s.lastRow<c.firstRow)return this.update(s);if(c.firstRow<s.firstRow)for(var v=this.session.getFoldedRowCount(c.firstRow,s.firstRow-1);v>0;v--)this.$lines.shift();if(c.lastRow>s.lastRow)for(var v=this.session.getFoldedRowCount(s.lastRow+1,c.lastRow);v>0;v--)this.$lines.pop();s.firstRow<c.firstRow&&this.$lines.unshift(this.$renderLinesFragment(s,s.firstRow,c.firstRow-1)),s.lastRow>c.lastRow&&this.$lines.push(this.$renderLinesFragment(s,c.lastRow+1,s.lastRow)),this.$highlightIndentGuide()},l.prototype.$renderLinesFragment=function(s,c,m){for(var h=[],v=c,k=this.session.getNextFoldLine(v),x=k?k.start.row:1/0;v>x&&(v=k.end.row+1,k=this.session.getNextFoldLine(v,k),x=k?k.start.row:1/0),!(v>m);){var A=this.$lines.createCell(v,s,this.session),S=A.element;this.dom.removeChildren(S),u.setStyle(S.style,"height",this.$lines.computeLineHeight(v,s,this.session)+"px"),u.setStyle(S.style,"top",this.$lines.computeLineTop(v,s,this.session)+"px"),this.$renderLine(S,v,v==x?k:!1),this.$useLineGroups()?S.className="ace_line_group":S.className="ace_line",h.push(A),v++}return h},l.prototype.update=function(s){this.$lines.moveContainer(s),this.config=s;for(var c=s.firstRow,m=s.lastRow,h=this.$lines;h.getLength();)h.pop();h.push(this.$renderLinesFragment(s,c,m))},l.prototype.$renderToken=function(s,c,m,h){for(var v=this,k=/(\t)|( +)|([\x00-\x1f\x80-\xa0\xad\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\uFEFF\uFFF9-\uFFFC\u2066\u2067\u2068\u202A\u202B\u202D\u202E\u202C\u2069]+)|(\u3000)|([\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3001-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]|[\uD800-\uDBFF][\uDC00-\uDFFF])/g,x=this.dom.createFragment(this.element),A,S=0;A=k.exec(h);){var f=A[1],L=A[2],$=A[3],T=A[4],C=A[5];if(!(!v.showSpaces&&L)){var w=S!=A.index?h.slice(S,A.index):"";if(S=A.index+A[0].length,w&&x.appendChild(this.dom.createTextNode(w,this.element)),f){var y=v.session.getScreenTabSize(c+A.index);x.appendChild(v.$tabStrings[y].cloneNode(!0)),c+=y-1}else if(L)if(v.showSpaces){var b=this.dom.createElement("span");b.className="ace_invisible ace_invisible_space",b.textContent=g.stringRepeat(v.SPACE_CHAR,L.length),x.appendChild(b)}else x.appendChild(this.dom.createTextNode(L,this.element));else if($){var b=this.dom.createElement("span");b.className="ace_invisible ace_invisible_space ace_invalid",b.textContent=g.stringRepeat(v.SPACE_CHAR,$.length),x.appendChild(b)}else if(T){c+=1;var b=this.dom.createElement("span");b.style.width=v.config.characterWidth*2+"px",b.className=v.showSpaces?"ace_cjk ace_invisible ace_invisible_space":"ace_cjk",b.textContent=v.showSpaces?v.SPACE_CHAR:T,x.appendChild(b)}else if(C){c+=1;var b=this.dom.createElement("span");b.style.width=v.config.characterWidth*2+"px",b.className="ace_cjk",b.textContent=C,x.appendChild(b)}}}if(x.appendChild(this.dom.createTextNode(S?h.slice(S):h,this.element)),i(m.type))s.appendChild(x);else{var _="ace_"+m.type.replace(/\./g," ace_"),b=this.dom.createElement("span");m.type=="fold"&&(b.style.width=m.value.length*this.config.characterWidth+"px",b.setAttribute("title",o("inline-fold.closed.title","Unfold code"))),b.className=_,b.appendChild(x),s.appendChild(b)}return c+h.length},l.prototype.renderIndentGuide=function(s,c,m){var h=c.search(this.$indentGuideRe);if(h<=0||h>=m)return c;if(c[0]==" "){h-=h%this.tabSize;for(var v=h/this.tabSize,k=0;k<v;k++)s.appendChild(this.$tabStrings[" "].cloneNode(!0));return this.$highlightIndentGuide(),c.substr(h)}else if(c[0]=="	"){for(var k=0;k<h;k++)s.appendChild(this.$tabStrings["	"].cloneNode(!0));return this.$highlightIndentGuide(),c.substr(h)}return this.$highlightIndentGuide(),c},l.prototype.$highlightIndentGuide=function(){if(!(!this.$highlightIndentGuides||!this.displayIndentGuides)){this.$highlightIndentGuideMarker={indentLevel:void 0,start:void 0,end:void 0,dir:void 0};var s=this.session.doc.$lines;if(s){var c=this.session.selection.getCursor(),m=/^\s*/.exec(this.session.doc.getLine(c.row))[0].length,h=Math.floor(m/this.tabSize);this.$highlightIndentGuideMarker={indentLevel:h,start:c.row};var v=this.session.$bracketHighlight;if(v){for(var k=this.session.$bracketHighlight.ranges,x=0;x<k.length;x++)if(c.row!==k[x].start.row){this.$highlightIndentGuideMarker.end=k[x].start.row,c.row>k[x].start.row?this.$highlightIndentGuideMarker.dir=-1:this.$highlightIndentGuideMarker.dir=1;break}}if(!this.$highlightIndentGuideMarker.end&&s[c.row]!==""&&c.column===s[c.row].length){this.$highlightIndentGuideMarker.dir=1;for(var x=c.row+1;x<s.length;x++){var A=s[x],S=/^\s*/.exec(A)[0].length;if(A!==""&&(this.$highlightIndentGuideMarker.end=x,S<=m))break}}this.$renderHighlightIndentGuide()}}},l.prototype.$clearActiveIndentGuide=function(){for(var s=this.$lines.cells,c=0;c<s.length;c++){var m=s[c],h=m.element.childNodes;if(h.length>0){for(var v=0;v<h.length;v++)if(h[v].classList&&h[v].classList.contains("ace_indent-guide-active")){h[v].classList.remove("ace_indent-guide-active");break}}}},l.prototype.$setIndentGuideActive=function(s,c){var m=this.session.doc.getLine(s.row);if(m!==""){var h=s.element.childNodes;if(h){var v=h[c-1];v&&v.classList&&v.classList.contains("ace_indent-guide")&&v.classList.add("ace_indent-guide-active")}}},l.prototype.$renderHighlightIndentGuide=function(){if(this.$lines){var s=this.$lines.cells;this.$clearActiveIndentGuide();var c=this.$highlightIndentGuideMarker.indentLevel;if(c!==0)if(this.$highlightIndentGuideMarker.dir===1)for(var m=0;m<s.length;m++){var h=s[m];if(this.$highlightIndentGuideMarker.end&&h.row>=this.$highlightIndentGuideMarker.start+1){if(h.row>=this.$highlightIndentGuideMarker.end)break;this.$setIndentGuideActive(h,c)}}else for(var m=s.length-1;m>=0;m--){var h=s[m];if(this.$highlightIndentGuideMarker.end&&h.row<this.$highlightIndentGuideMarker.start){if(h.row<=this.$highlightIndentGuideMarker.end)break;this.$setIndentGuideActive(h,c)}}}},l.prototype.$createLineElement=function(s){var c=this.dom.createElement("div");return c.className="ace_line",c.style.height=this.config.lineHeight+"px",c},l.prototype.$renderWrappedLine=function(s,c,m){var h=0,v=0,k=m[0],x=0,A=this.$createLineElement();s.appendChild(A);for(var S=0;S<c.length;S++){var f=c[S],L=f.value;if(S==0&&this.displayIndentGuides){if(h=L.length,L=this.renderIndentGuide(A,L,k),!L)continue;h-=L.length}if(h+L.length<k)x=this.$renderToken(A,x,f,L),h+=L.length;else{for(;h+L.length>=k;)x=this.$renderToken(A,x,f,L.substring(0,k-h)),L=L.substring(k-h),h=k,A=this.$createLineElement(),s.appendChild(A),A.appendChild(this.dom.createTextNode(g.stringRepeat("\xA0",m.indent),this.element)),v++,x=0,k=m[v]||Number.MAX_VALUE;L.length!=0&&(h+=L.length,x=this.$renderToken(A,x,f,L))}}m[m.length-1]>this.MAX_LINE_LENGTH&&this.$renderOverflowMessage(A,x,null,"",!0)},l.prototype.$renderSimpleLine=function(s,c){for(var m=0,h=0;h<c.length;h++){var v=c[h],k=v.value;if(!(h==0&&this.displayIndentGuides&&(k=this.renderIndentGuide(s,k),!k))){if(m+k.length>this.MAX_LINE_LENGTH)return this.$renderOverflowMessage(s,m,v,k);m=this.$renderToken(s,m,v,k)}}},l.prototype.$renderOverflowMessage=function(s,c,m,h,v){m&&this.$renderToken(s,c,m,h.slice(0,this.MAX_LINE_LENGTH-c));var k=this.dom.createElement("span");k.className="ace_inline_button ace_keyword ace_toggle_wrap",k.textContent=v?"<hide>":"<click to see more...>",s.appendChild(k)},l.prototype.$renderLine=function(s,c,m){if(!m&&m!=!1&&(m=this.session.getFoldLine(c)),m)var h=this.$getFoldLineTokens(c,m);else var h=this.session.getTokens(c);var v=s;if(h.length){var k=this.session.getRowSplitData(c);if(k&&k.length){this.$renderWrappedLine(s,h,k);var v=s.lastChild}else{var v=s;this.$useLineGroups()&&(v=this.$createLineElement(),s.appendChild(v)),this.$renderSimpleLine(v,h)}}else this.$useLineGroups()&&(v=this.$createLineElement(),s.appendChild(v));if(this.showEOL&&v){m&&(c=m.end.row);var x=this.dom.createElement("span");x.className="ace_invisible ace_invisible_eol",x.textContent=c==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,v.appendChild(x)}},l.prototype.$getFoldLineTokens=function(s,c){var m=this.session,h=[];function v(x,A,S){for(var f=0,L=0;L+x[f].value.length<A;)if(L+=x[f].value.length,f++,f==x.length)return;if(L!=A){var $=x[f].value.substring(A-L);$.length>S-A&&($=$.substring(0,S-A)),h.push({type:x[f].type,value:$}),L=A+$.length,f+=1}for(;L<S&&f<x.length;){var $=x[f].value;$.length+L>S?h.push({type:x[f].type,value:$.substring(0,S-L)}):h.push(x[f]),L+=$.length,f+=1}}var k=m.getTokens(s);return c.walk(function(x,A,S,f,L){x!=null?h.push({type:"fold",value:x}):(L&&(k=m.getTokens(A)),k.length&&v(k,f,S))},c.end.row,this.session.getLine(c.end.row).length),h},l.prototype.$useLineGroups=function(){return this.session.getUseWrapMode()},l}();n.prototype.EOF_CHAR="\xB6",n.prototype.EOL_CHAR_LF="\xAC",n.prototype.EOL_CHAR_CRLF="\xA4",n.prototype.EOL_CHAR=n.prototype.EOL_CHAR_LF,n.prototype.TAB_CHAR="\u2014",n.prototype.SPACE_CHAR="\xB7",n.prototype.$padding=0,n.prototype.MAX_LINE_LENGTH=1e4,n.prototype.showInvisibles=!1,n.prototype.showSpaces=!1,n.prototype.showTabs=!1,n.prototype.showEOL=!1,n.prototype.displayIndentGuides=!0,n.prototype.$highlightIndentGuides=!0,n.prototype.$tabStrings=[],n.prototype.destroy={},n.prototype.onChangeTabSize=n.prototype.$computeTabString,d.implement(n.prototype,p),t.Text=n});ace.define("ace/layer/cursor",["require","exports","module","ace/lib/dom"],function(e,t,r){"use strict";var d=e("../lib/dom"),u=function(){function g(a){this.element=d.createElement("div"),this.element.className="ace_layer ace_cursor-layer",a.appendChild(this.element),this.isVisible=!1,this.isBlinking=!0,this.blinkInterval=1e3,this.smoothBlinking=!1,this.cursors=[],this.cursor=this.addCursor(),d.addCssClass(this.element,"ace_hidden-cursors"),this.$updateCursors=this.$updateOpacity.bind(this)}return g.prototype.$updateOpacity=function(a){for(var p=this.cursors,o=p.length;o--;)d.setStyle(p[o].style,"opacity",a?"":"0")},g.prototype.$startCssAnimation=function(){for(var a=this.cursors,p=a.length;p--;)a[p].style.animationDuration=this.blinkInterval+"ms";this.$isAnimating=!0,setTimeout(function(){this.$isAnimating&&d.addCssClass(this.element,"ace_animate-blinking")}.bind(this))},g.prototype.$stopCssAnimation=function(){this.$isAnimating=!1,d.removeCssClass(this.element,"ace_animate-blinking")},g.prototype.setPadding=function(a){this.$padding=a},g.prototype.setSession=function(a){this.session=a},g.prototype.setBlinking=function(a){a!=this.isBlinking&&(this.isBlinking=a,this.restartTimer())},g.prototype.setBlinkInterval=function(a){a!=this.blinkInterval&&(this.blinkInterval=a,this.restartTimer())},g.prototype.setSmoothBlinking=function(a){a!=this.smoothBlinking&&(this.smoothBlinking=a,d.setCssClass(this.element,"ace_smooth-blinking",a),this.$updateCursors(!0),this.restartTimer())},g.prototype.addCursor=function(){var a=d.createElement("div");return a.className="ace_cursor",this.element.appendChild(a),this.cursors.push(a),a},g.prototype.removeCursor=function(){if(this.cursors.length>1){var a=this.cursors.pop();return a.parentNode.removeChild(a),a}},g.prototype.hideCursor=function(){this.isVisible=!1,d.addCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},g.prototype.showCursor=function(){this.isVisible=!0,d.removeCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},g.prototype.restartTimer=function(){var a=this.$updateCursors;if(clearInterval(this.intervalId),clearTimeout(this.timeoutId),this.$stopCssAnimation(),this.smoothBlinking&&(this.$isSmoothBlinking=!1,d.removeCssClass(this.element,"ace_smooth-blinking")),a(!0),!this.isBlinking||!this.blinkInterval||!this.isVisible){this.$stopCssAnimation();return}if(this.smoothBlinking&&(this.$isSmoothBlinking=!0,setTimeout(function(){this.$isSmoothBlinking&&d.addCssClass(this.element,"ace_smooth-blinking")}.bind(this))),d.HAS_CSS_ANIMATION)this.$startCssAnimation();else{var p=function(){this.timeoutId=setTimeout(function(){a(!1)},.6*this.blinkInterval)}.bind(this);this.intervalId=setInterval(function(){a(!0),p()},this.blinkInterval),p()}},g.prototype.getPixelPosition=function(a,p){if(!this.config||!this.session)return{left:0,top:0};a||(a=this.session.selection.getCursor());var o=this.session.documentToScreenPosition(a),i=this.$padding+(this.session.$bidiHandler.isBidiRow(o.row,a.row)?this.session.$bidiHandler.getPosLeft(o.column):o.column*this.config.characterWidth),n=(o.row-(p?this.config.firstRowScreen:0))*this.config.lineHeight;return{left:i,top:n}},g.prototype.isCursorInView=function(a,p){return a.top>=0&&a.top<p.maxHeight},g.prototype.update=function(a){this.config=a;var p=this.session.$selectionMarkers,o=0,i=0;(p===void 0||p.length===0)&&(p=[{cursor:null}]);for(var o=0,n=p.length;o<n;o++){var l=this.getPixelPosition(p[o].cursor,!0);if(!((l.top>a.height+a.offset||l.top<0)&&o>1)){var s=this.cursors[i++]||this.addCursor(),c=s.style;this.drawCursor?this.drawCursor(s,l,a,p[o],this.session):this.isCursorInView(l,a)?(d.setStyle(c,"display","block"),d.translate(s,l.left,l.top),d.setStyle(c,"width",Math.round(a.characterWidth)+"px"),d.setStyle(c,"height",a.lineHeight+"px")):d.setStyle(c,"display","none")}}for(;this.cursors.length>i;)this.removeCursor();var m=this.session.getOverwrite();this.$setOverwrite(m),this.$pixelPos=l,this.restartTimer()},g.prototype.$setOverwrite=function(a){a!=this.overwrite&&(this.overwrite=a,a?d.addCssClass(this.element,"ace_overwrite-cursors"):d.removeCssClass(this.element,"ace_overwrite-cursors"))},g.prototype.destroy=function(){clearInterval(this.intervalId),clearTimeout(this.timeoutId)},g}();u.prototype.$padding=0,u.prototype.drawCursor=null,t.Cursor=u});ace.define("ace/scrollbar",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(e,t,r){"use strict";var d=this&&this.__extends||function(){var s=function(c,m){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,v){h.__proto__=v}||function(h,v){for(var k in v)Object.prototype.hasOwnProperty.call(v,k)&&(h[k]=v[k])},s(c,m)};return function(c,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");s(c,m);function h(){this.constructor=c}c.prototype=m===null?Object.create(m):(h.prototype=m.prototype,new h)}}(),u=e("./lib/oop"),g=e("./lib/dom"),a=e("./lib/event"),p=e("./lib/event_emitter").EventEmitter,o=32768,i=function(){function s(c,m){this.element=g.createElement("div"),this.element.className="ace_scrollbar ace_scrollbar"+m,this.inner=g.createElement("div"),this.inner.className="ace_scrollbar-inner",this.inner.textContent="\xA0",this.element.appendChild(this.inner),c.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,a.addListener(this.element,"scroll",this.onScroll.bind(this)),a.addListener(this.element,"mousedown",a.preventDefault)}return s.prototype.setVisible=function(c){this.element.style.display=c?"":"none",this.isVisible=c,this.coeff=1},s}();u.implement(i.prototype,p);var n=function(s){d(c,s);function c(m,h){var v=s.call(this,m,"-v")||this;return v.scrollTop=0,v.scrollHeight=0,h.$scrollbarWidth=v.width=g.scrollbarWidth(m.ownerDocument),v.inner.style.width=v.element.style.width=(v.width||15)+5+"px",v.$minWidth=0,v}return c.prototype.onScroll=function(){if(!this.skipEvent){if(this.scrollTop=this.element.scrollTop,this.coeff!=1){var m=this.element.clientHeight/this.scrollHeight;this.scrollTop=this.scrollTop*(1-m)/(this.coeff-m)}this._emit("scroll",{data:this.scrollTop})}this.skipEvent=!1},c.prototype.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},c.prototype.setHeight=function(m){this.element.style.height=m+"px"},c.prototype.setScrollHeight=function(m){this.scrollHeight=m,m>o?(this.coeff=o/m,m=o):this.coeff!=1&&(this.coeff=1),this.inner.style.height=m+"px"},c.prototype.setScrollTop=function(m){this.scrollTop!=m&&(this.skipEvent=!0,this.scrollTop=m,this.element.scrollTop=m*this.coeff)},c}(i);n.prototype.setInnerHeight=n.prototype.setScrollHeight;var l=function(s){d(c,s);function c(m,h){var v=s.call(this,m,"-h")||this;return v.scrollLeft=0,v.height=h.$scrollbarWidth,v.inner.style.height=v.element.style.height=(v.height||15)+5+"px",v}return c.prototype.onScroll=function(){this.skipEvent||(this.scrollLeft=this.element.scrollLeft,this._emit("scroll",{data:this.scrollLeft})),this.skipEvent=!1},c.prototype.getHeight=function(){return this.isVisible?this.height:0},c.prototype.setWidth=function(m){this.element.style.width=m+"px"},c.prototype.setInnerWidth=function(m){this.inner.style.width=m+"px"},c.prototype.setScrollWidth=function(m){this.inner.style.width=m+"px"},c.prototype.setScrollLeft=function(m){this.scrollLeft!=m&&(this.skipEvent=!0,this.scrollLeft=this.element.scrollLeft=m)},c}(i);t.ScrollBar=n,t.ScrollBarV=n,t.ScrollBarH=l,t.VScrollBar=n,t.HScrollBar=l});ace.define("ace/scrollbar_custom",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(e,t,r){"use strict";var d=this&&this.__extends||function(){var l=function(s,c){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,h){m.__proto__=h}||function(m,h){for(var v in h)Object.prototype.hasOwnProperty.call(h,v)&&(m[v]=h[v])},l(s,c)};return function(s,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");l(s,c);function m(){this.constructor=s}s.prototype=c===null?Object.create(c):(m.prototype=c.prototype,new m)}}(),u=e("./lib/oop"),g=e("./lib/dom"),a=e("./lib/event"),p=e("./lib/event_emitter").EventEmitter;g.importCssString(`.ace_editor>.ace_sb-v div, .ace_editor>.ace_sb-h div{
  position: absolute;
  background: rgba(128, 128, 128, 0.6);
  -moz-box-sizing: border-box;
  box-sizing: border-box;
  border: 1px solid #bbb;
  border-radius: 2px;
  z-index: 8;
}
.ace_editor>.ace_sb-v, .ace_editor>.ace_sb-h {
  position: absolute;
  z-index: 6;
  background: none;
  overflow: hidden!important;
}
.ace_editor>.ace_sb-v {
  z-index: 6;
  right: 0;
  top: 0;
  width: 12px;
}
.ace_editor>.ace_sb-v div {
  z-index: 8;
  right: 0;
  width: 100%;
}
.ace_editor>.ace_sb-h {
  bottom: 0;
  left: 0;
  height: 12px;
}
.ace_editor>.ace_sb-h div {
  bottom: 0;
  height: 100%;
}
.ace_editor>.ace_sb_grabbed {
  z-index: 8;
  background: #000;
}`,"ace_scrollbar.css",!1);var o=function(){function l(s,c){this.element=g.createElement("div"),this.element.className="ace_sb"+c,this.inner=g.createElement("div"),this.inner.className="",this.element.appendChild(this.inner),this.VScrollWidth=12,this.HScrollHeight=12,s.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,a.addMultiMouseDownListener(this.element,[500,300,300],this,"onMouseDown")}return l.prototype.setVisible=function(s){this.element.style.display=s?"":"none",this.isVisible=s,this.coeff=1},l}();u.implement(o.prototype,p);var i=function(l){d(s,l);function s(c,m){var h=l.call(this,c,"-v")||this;return h.scrollTop=0,h.scrollHeight=0,h.parent=c,h.width=h.VScrollWidth,h.renderer=m,h.inner.style.width=h.element.style.width=(h.width||15)+"px",h.$minWidth=0,h}return s.prototype.onMouseDown=function(c,m){if(c==="mousedown"&&!(a.getButton(m)!==0||m.detail===2)){if(m.target===this.inner){var h=this,v=m.clientY,k=function(T){v=T.clientY},x=function(){clearInterval(L)},A=m.clientY,S=this.thumbTop,f=function(){if(v!==void 0){var T=h.scrollTopFromThumbTop(S+v-A);T!==h.scrollTop&&h._emit("scroll",{data:T})}};a.capture(this.inner,k,x);var L=setInterval(f,20);return a.preventDefault(m)}var $=m.clientY-this.element.getBoundingClientRect().top-this.thumbHeight/2;return this._emit("scroll",{data:this.scrollTopFromThumbTop($)}),a.preventDefault(m)}},s.prototype.getHeight=function(){return this.height},s.prototype.scrollTopFromThumbTop=function(c){var m=c*(this.pageHeight-this.viewHeight)/(this.slideHeight-this.thumbHeight);return m=m>>0,m<0?m=0:m>this.pageHeight-this.viewHeight&&(m=this.pageHeight-this.viewHeight),m},s.prototype.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},s.prototype.setHeight=function(c){this.height=Math.max(0,c),this.slideHeight=this.height,this.viewHeight=this.height,this.setScrollHeight(this.pageHeight,!0)},s.prototype.setScrollHeight=function(c,m){this.pageHeight===c&&!m||(this.pageHeight=c,this.thumbHeight=this.slideHeight*this.viewHeight/this.pageHeight,this.thumbHeight>this.slideHeight&&(this.thumbHeight=this.slideHeight),this.thumbHeight<15&&(this.thumbHeight=15),this.inner.style.height=this.thumbHeight+"px",this.scrollTop>this.pageHeight-this.viewHeight&&(this.scrollTop=this.pageHeight-this.viewHeight,this.scrollTop<0&&(this.scrollTop=0),this._emit("scroll",{data:this.scrollTop})))},s.prototype.setScrollTop=function(c){this.scrollTop=c,c<0&&(c=0),this.thumbTop=c*(this.slideHeight-this.thumbHeight)/(this.pageHeight-this.viewHeight),this.inner.style.top=this.thumbTop+"px"},s}(o);i.prototype.setInnerHeight=i.prototype.setScrollHeight;var n=function(l){d(s,l);function s(c,m){var h=l.call(this,c,"-h")||this;return h.scrollLeft=0,h.scrollWidth=0,h.height=h.HScrollHeight,h.inner.style.height=h.element.style.height=(h.height||12)+"px",h.renderer=m,h}return s.prototype.onMouseDown=function(c,m){if(c==="mousedown"&&!(a.getButton(m)!==0||m.detail===2)){if(m.target===this.inner){var h=this,v=m.clientX,k=function(T){v=T.clientX},x=function(){clearInterval(L)},A=m.clientX,S=this.thumbLeft,f=function(){if(v!==void 0){var T=h.scrollLeftFromThumbLeft(S+v-A);T!==h.scrollLeft&&h._emit("scroll",{data:T})}};a.capture(this.inner,k,x);var L=setInterval(f,20);return a.preventDefault(m)}var $=m.clientX-this.element.getBoundingClientRect().left-this.thumbWidth/2;return this._emit("scroll",{data:this.scrollLeftFromThumbLeft($)}),a.preventDefault(m)}},s.prototype.getHeight=function(){return this.isVisible?this.height:0},s.prototype.scrollLeftFromThumbLeft=function(c){var m=c*(this.pageWidth-this.viewWidth)/(this.slideWidth-this.thumbWidth);return m=m>>0,m<0?m=0:m>this.pageWidth-this.viewWidth&&(m=this.pageWidth-this.viewWidth),m},s.prototype.setWidth=function(c){this.width=Math.max(0,c),this.element.style.width=this.width+"px",this.slideWidth=this.width,this.viewWidth=this.width,this.setScrollWidth(this.pageWidth,!0)},s.prototype.setScrollWidth=function(c,m){this.pageWidth===c&&!m||(this.pageWidth=c,this.thumbWidth=this.slideWidth*this.viewWidth/this.pageWidth,this.thumbWidth>this.slideWidth&&(this.thumbWidth=this.slideWidth),this.thumbWidth<15&&(this.thumbWidth=15),this.inner.style.width=this.thumbWidth+"px",this.scrollLeft>this.pageWidth-this.viewWidth&&(this.scrollLeft=this.pageWidth-this.viewWidth,this.scrollLeft<0&&(this.scrollLeft=0),this._emit("scroll",{data:this.scrollLeft})))},s.prototype.setScrollLeft=function(c){this.scrollLeft=c,c<0&&(c=0),this.thumbLeft=c*(this.slideWidth-this.thumbWidth)/(this.pageWidth-this.viewWidth),this.inner.style.left=this.thumbLeft+"px"},s}(o);n.prototype.setInnerWidth=n.prototype.setScrollWidth,t.ScrollBar=i,t.ScrollBarV=i,t.ScrollBarH=n,t.VScrollBar=i,t.HScrollBar=n});ace.define("ace/renderloop",["require","exports","module","ace/lib/event"],function(e,t,r){"use strict";var d=e("./lib/event"),u=function(){function g(a,p){this.onRender=a,this.pending=!1,this.changes=0,this.$recursionLimit=2,this.window=p||window;var o=this;this._flush=function(i){o.pending=!1;var n=o.changes;if(n&&(d.blockIdle(100),o.changes=0,o.onRender(n)),o.changes){if(o.$recursionLimit--<0)return;o.schedule()}else o.$recursionLimit=2}}return g.prototype.schedule=function(a){this.changes=this.changes|a,this.changes&&!this.pending&&(d.nextFrame(this._flush),this.pending=!0)},g.prototype.clear=function(a){var p=this.changes;return this.changes=0,p},g}();t.RenderLoop=u});ace.define("ace/layer/font_metrics",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/event","ace/lib/useragent","ace/lib/event_emitter"],function(e,t,r){var d=e("../lib/oop"),u=e("../lib/dom"),g=e("../lib/lang"),a=e("../lib/event"),p=e("../lib/useragent"),o=e("../lib/event_emitter").EventEmitter,i=512,n=typeof ResizeObserver=="function",l=200,s=function(){function c(m){this.el=u.createElement("div"),this.$setMeasureNodeStyles(this.el.style,!0),this.$main=u.createElement("div"),this.$setMeasureNodeStyles(this.$main.style),this.$measureNode=u.createElement("div"),this.$setMeasureNodeStyles(this.$measureNode.style),this.el.appendChild(this.$main),this.el.appendChild(this.$measureNode),m.appendChild(this.el),this.$measureNode.textContent=g.stringRepeat("X",i),this.$characterSize={width:0,height:0},n?this.$addObserver():this.checkForSizeChanges()}return c.prototype.$setMeasureNodeStyles=function(m,h){m.width=m.height="auto",m.left=m.top="0px",m.visibility="hidden",m.position="absolute",m.whiteSpace="pre",p.isIE<8?m["font-family"]="inherit":m.font="inherit",m.overflow=h?"hidden":"visible"},c.prototype.checkForSizeChanges=function(m){if(m===void 0&&(m=this.$measureSizes()),m&&(this.$characterSize.width!==m.width||this.$characterSize.height!==m.height)){this.$measureNode.style.fontWeight="bold";var h=this.$measureSizes();this.$measureNode.style.fontWeight="",this.$characterSize=m,this.charSizes=Object.create(null),this.allowBoldFonts=h&&h.width===m.width&&h.height===m.height,this._emit("changeCharacterSize",{data:m})}},c.prototype.$addObserver=function(){var m=this;this.$observer=new window.ResizeObserver(function(h){m.checkForSizeChanges()}),this.$observer.observe(this.$measureNode)},c.prototype.$pollSizeChanges=function(){if(this.$pollSizeChangesTimer||this.$observer)return this.$pollSizeChangesTimer;var m=this;return this.$pollSizeChangesTimer=a.onIdle(function h(){m.checkForSizeChanges(),a.onIdle(h,500)},500)},c.prototype.setPolling=function(m){m?this.$pollSizeChanges():this.$pollSizeChangesTimer&&(clearInterval(this.$pollSizeChangesTimer),this.$pollSizeChangesTimer=0)},c.prototype.$measureSizes=function(m){var h={height:(m||this.$measureNode).clientHeight,width:(m||this.$measureNode).clientWidth/i};return h.width===0||h.height===0?null:h},c.prototype.$measureCharWidth=function(m){this.$main.textContent=g.stringRepeat(m,i);var h=this.$main.getBoundingClientRect();return h.width/i},c.prototype.getCharacterWidth=function(m){var h=this.charSizes[m];return h===void 0&&(h=this.charSizes[m]=this.$measureCharWidth(m)/this.$characterSize.width),h},c.prototype.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.$observer&&this.$observer.disconnect(),this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)},c.prototype.$getZoom=function(m){return!m||!m.parentElement?1:(Number(window.getComputedStyle(m).zoom)||1)*this.$getZoom(m.parentElement)},c.prototype.$initTransformMeasureNodes=function(){var m=function(h,v){return["div",{style:"position: absolute;top:"+h+"px;left:"+v+"px;"}]};this.els=u.buildDom([m(0,0),m(l,0),m(0,l),m(l,l)],this.el)},c.prototype.transformCoordinates=function(m,h){if(m){var v=this.$getZoom(this.el);m=S(1/v,m)}function k(P,O,N){var D=P[1]*O[0]-P[0]*O[1];return[(-O[1]*N[0]+O[0]*N[1])/D,(+P[1]*N[0]-P[0]*N[1])/D]}function x(P,O){return[P[0]-O[0],P[1]-O[1]]}function A(P,O){return[P[0]+O[0],P[1]+O[1]]}function S(P,O){return[P*O[0],P*O[1]]}this.els||this.$initTransformMeasureNodes();function f(P){var O=P.getBoundingClientRect();return[O.left,O.top]}var L=f(this.els[0]),$=f(this.els[1]),T=f(this.els[2]),C=f(this.els[3]),w=k(x(C,$),x(C,T),x(A($,T),A(C,L))),y=S(1+w[0],x($,L)),b=S(1+w[1],x(T,L));if(h){var _=h,E=w[0]*_[0]/l+w[1]*_[1]/l+1,R=A(S(_[0],y),S(_[1],b));return A(S(1/E/l,R),L)}var M=x(m,L),I=k(x(y,S(w[0],M)),x(b,S(w[1],M)),M);return S(l,I)},c}();s.prototype.$characterSize={width:0,height:0},d.implement(s.prototype,o),t.FontMetrics=s});ace.define("ace/css/editor-css",["require","exports","module"],function(e,t,r){r.exports=`
.ace_br1 {border-top-left-radius    : 3px;}
.ace_br2 {border-top-right-radius   : 3px;}
.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}
.ace_br4 {border-bottom-right-radius: 3px;}
.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}
.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}
.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}
.ace_br8 {border-bottom-left-radius : 3px;}
.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}
.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}
.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}
.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}


.ace_editor {
    position: relative;
    overflow: hidden;
    padding: 0;
    font: 12px/normal 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'Source Code Pro', 'source-code-pro', monospace;
    direction: ltr;
    text-align: left;
    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
}

.ace_scroller {
    position: absolute;
    overflow: hidden;
    top: 0;
    bottom: 0;
    background-color: inherit;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    cursor: text;
}

.ace_content {
    position: absolute;
    box-sizing: border-box;
    min-width: 100%;
    contain: style size layout;
    font-variant-ligatures: no-common-ligatures;
}

.ace_keyboard-focus:focus {
    box-shadow: inset 0 0 0 2px #5E9ED6;
    outline: none;
}

.ace_dragging .ace_scroller:before{
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    content: '';
    background: rgba(250, 250, 250, 0.01);
    z-index: 1000;
}
.ace_dragging.ace_dark .ace_scroller:before{
    background: rgba(0, 0, 0, 0.01);
}

.ace_gutter {
    position: absolute;
    overflow : hidden;
    width: auto;
    top: 0;
    bottom: 0;
    left: 0;
    cursor: default;
    z-index: 4;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    contain: style size layout;
}

.ace_gutter-active-line {
    position: absolute;
    left: 0;
    right: 0;
}

.ace_scroller.ace_scroll-left:after {
    content: "";
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;
    pointer-events: none;
}

.ace_gutter-cell, .ace_gutter-cell_svg-icons {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    padding-left: 19px;
    padding-right: 6px;
    background-repeat: no-repeat;
}

.ace_gutter-cell_svg-icons .ace_gutter_annotation {
    margin-left: -14px;
    float: left;
}

.ace_gutter-cell .ace_gutter_annotation {
    margin-left: -19px;
    float: left;
}

.ace_gutter-cell.ace_error, .ace_icon.ace_error, .ace_icon.ace_error_fold {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: 2px center;
}

.ace_gutter-cell.ace_warning, .ace_icon.ace_warning, .ace_icon.ace_warning_fold {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: 2px center;
}

.ace_gutter-cell.ace_info, .ace_icon.ace_info {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");
    background-repeat: no-repeat;
    background-position: 2px center;
}
.ace_dark .ace_gutter-cell.ace_info, .ace_dark .ace_icon.ace_info {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");
}

.ace_icon_svg.ace_error {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJyZWQiIHNoYXBlLXJlbmRlcmluZz0iZ2VvbWV0cmljUHJlY2lzaW9uIj4KPGNpcmNsZSBmaWxsPSJub25lIiBjeD0iOCIgY3k9IjgiIHI9IjciIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4KPGxpbmUgeDE9IjExIiB5MT0iNSIgeDI9IjUiIHkyPSIxMSIvPgo8bGluZSB4MT0iMTEiIHkxPSIxMSIgeDI9IjUiIHkyPSI1Ii8+CjwvZz4KPC9zdmc+");
    background-color: crimson;
}
.ace_icon_svg.ace_warning {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJkYXJrb3JhbmdlIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiI+Cjxwb2x5Z29uIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGZpbGw9Im5vbmUiIHBvaW50cz0iOCAxIDE1IDE1IDEgMTUgOCAxIi8+CjxyZWN0IHg9IjgiIHk9IjEyIiB3aWR0aD0iMC4wMSIgaGVpZ2h0PSIwLjAxIi8+CjxsaW5lIHgxPSI4IiB5MT0iNiIgeDI9IjgiIHkyPSIxMCIvPgo8L2c+Cjwvc3ZnPg==");
    background-color: darkorange;
}
.ace_icon_svg.ace_info {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJibHVlIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiI+CjxjaXJjbGUgZmlsbD0ibm9uZSIgY3g9IjgiIGN5PSI4IiByPSI3IiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+Cjxwb2x5bGluZSBwb2ludHM9IjggMTEgOCA4Ii8+Cjxwb2x5bGluZSBwb2ludHM9IjkgOCA2IDgiLz4KPGxpbmUgeDE9IjEwIiB5MT0iMTEiIHgyPSI2IiB5Mj0iMTEiLz4KPHJlY3QgeD0iOCIgeT0iNSIgd2lkdGg9IjAuMDEiIGhlaWdodD0iMC4wMSIvPgo8L2c+Cjwvc3ZnPg==");
    background-color: royalblue;
}

.ace_icon_svg.ace_error_fold {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiIgZmlsbD0ibm9uZSI+CiAgPHBhdGggZD0ibSAxOC45Mjk4NTEsNy44Mjk4MDc2IGMgMC4xNDYzNTMsNi4zMzc0NjA0IC02LjMyMzE0Nyw3Ljc3Nzg0NDQgLTcuNDc3OTEyLDcuNzc3ODQ0NCAtMi4xMDcyNzI2LC0wLjEyODc1IDUuMTE3Njc4LDAuMzU2MjQ5IDUuMDUxNjk4LC03Ljg3MDA2MTggLTAuNjA0NjcyLC04LjAwMzk3MzQ5IC03LjA3NzI3MDYsLTcuNTYzMTE4OSAtNC44NTczLC03LjQzMDM5NTU2IDEuNjA2LC0wLjExNTE0MjI1IDYuODk3NDg1LDEuMjYyNTQ1OTYgNy4yODM1MTQsNy41MjI2MTI5NiB6IiBmaWxsPSJjcmltc29uIiBzdHJva2Utd2lkdGg9IjIiLz4KICA8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0ibSA4LjExNDc1NjIsMi4wNTI5ODI4IGMgMy4zNDkxNjk4LDAgNi4wNjQxMzI4LDIuNjc2ODYyNyA2LjA2NDEzMjgsNS45Nzg5NTMgMCwzLjMwMjExMjIgLTIuNzE0OTYzLDUuOTc4OTIwMiAtNi4wNjQxMzI4LDUuOTc4OTIwMiAtMy4zNDkxNDczLDAgLTYuMDY0MTc3MiwtMi42NzY4MDggLTYuMDY0MTc3MiwtNS45Nzg5MjAyIDAuMDA1MzksLTMuMjk5ODg2MSAyLjcxNzI2NTYsLTUuOTczNjQwOCA2LjA2NDE3NzIsLTUuOTc4OTUzIHogbSAwLC0xLjczNTgyNzE5IGMgLTQuMzIxNDgzNiwwIC03LjgyNDc0MDM4LDMuNDU0MDE4NDkgLTcuODI0NzQwMzgsNy43MTQ3ODAxOSAwLDQuMjYwNzI4MiAzLjUwMzI1Njc4LDcuNzE0NzQ1MiA3LjgyNDc0MDM4LDcuNzE0NzQ1MiA0LjMyMTQ0OTgsMCA3LjgyNDY5OTgsLTMuNDU0MDE3IDcuODI0Njk5OCwtNy43MTQ3NDUyIDAsLTIuMDQ2MDkxNCAtMC44MjQzOTIsLTQuMDA4MzY3MiAtMi4yOTE3NTYsLTUuNDU1MTc0NiBDIDEyLjE4MDIyNSwxLjEyOTk2NDggMTAuMTkwMDEzLDAuMzE3MTU1NjEgOC4xMTQ3NTYyLDAuMzE3MTU1NjEgWiBNIDYuOTM3NDU2Myw4LjI0MDU5ODUgNC42NzE4Njg1LDEwLjQ4NTg1MiA2LjAwODY4MTQsMTEuODc2NzI4IDguMzE3MDAzNSw5LjYwMDc5MTEgMTAuNjI1MzM3LDExLjg3NjcyOCAxMS45NjIxMzgsMTAuNDg1ODUyIDkuNjk2NTUwOCw4LjI0MDU5ODUgMTEuOTYyMTM4LDYuMDA2ODA2NiAxMC41NzMyNDYsNC42Mzc0MzM1IDguMzE3MDAzNSw2Ljg3MzQyOTcgNi4wNjA3NjA3LDQuNjM3NDMzNSA0LjY3MTg2ODUsNi4wMDY4MDY2IFoiIGZpbGw9ImNyaW1zb24iIHN0cm9rZS13aWR0aD0iMiIvPgo8L3N2Zz4=");
    background-color: crimson;
}
.ace_icon_svg.ace_warning_fold {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAyMCAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNC43NzY5IDE0LjczMzdMOC42NTE5MiAyLjQ4MzY5QzguMzI5NDYgMS44Mzg3NyA3LjQwOTEzIDEuODM4NzcgNy4wODY2NyAyLjQ4MzY5TDAuOTYxNjY5IDE0LjczMzdDMC42NzA3NzUgMTUuMzE1NSAxLjA5MzgzIDE2IDEuNzQ0MjkgMTZIMTMuOTk0M0MxNC42NDQ4IDE2IDE1LjA2NzggMTUuMzE1NSAxNC43NzY5IDE0LjczMzdaTTMuMTYwMDcgMTQuMjVMNy44NjkyOSA0LjgzMTU2TDEyLjU3ODUgMTQuMjVIMy4xNjAwN1pNOC43NDQyOSAxMS42MjVWMTMuMzc1SDYuOTk0MjlWMTEuNjI1SDguNzQ0MjlaTTYuOTk0MjkgMTAuNzVWNy4yNUg4Ljc0NDI5VjEwLjc1SDYuOTk0MjlaIiBmaWxsPSIjRUM3MjExIi8+CjxwYXRoIGQ9Ik0xMS4xOTkxIDIuOTUyMzhDMTAuODgwOSAyLjMxNDY3IDEwLjM1MzcgMS44MDUyNiA5LjcwNTUgMS41MDlMMTEuMDQxIDEuMDY5NzhDMTEuNjg4MyAwLjk0OTgxNCAxMi4zMzcgMS4yNzI2MyAxMi42MzE3IDEuODYxNDFMMTcuNjEzNiAxMS44MTYxQzE4LjM1MjcgMTMuMjkyOSAxNy41OTM4IDE1LjA4MDQgMTYuMDE4IDE1LjU3NDVDMTYuNDA0NCAxNC40NTA3IDE2LjMyMzEgMTMuMjE4OCAxNS43OTI0IDEyLjE1NTVMMTEuMTk5MSAyLjk1MjM4WiIgZmlsbD0iI0VDNzIxMSIvPgo8L3N2Zz4=");
    background-color: darkorange;
}

.ace_scrollbar {
    contain: strict;
    position: absolute;
    right: 0;
    bottom: 0;
    z-index: 6;
}

.ace_scrollbar-inner {
    position: absolute;
    cursor: text;
    left: 0;
    top: 0;
}

.ace_scrollbar-v{
    overflow-x: hidden;
    overflow-y: scroll;
    top: 0;
}

.ace_scrollbar-h {
    overflow-x: scroll;
    overflow-y: hidden;
    left: 0;
}

.ace_print-margin {
    position: absolute;
    height: 100%;
}

.ace_text-input {
    position: absolute;
    z-index: 0;
    width: 0.5em;
    height: 1em;
    opacity: 0;
    background: transparent;
    -moz-appearance: none;
    appearance: none;
    border: none;
    resize: none;
    outline: none;
    overflow: hidden;
    font: inherit;
    padding: 0 1px;
    margin: 0 -1px;
    contain: strict;
    -ms-user-select: text;
    -moz-user-select: text;
    -webkit-user-select: text;
    user-select: text;
    /*with \`pre-line\` chrome inserts &nbsp; instead of space*/
    white-space: pre!important;
}
.ace_text-input.ace_composition {
    background: transparent;
    color: inherit;
    z-index: 1000;
    opacity: 1;
}
.ace_composition_placeholder { color: transparent }
.ace_composition_marker { 
    border-bottom: 1px solid;
    position: absolute;
    border-radius: 0;
    margin-top: 1px;
}

[ace_nocontext=true] {
    transform: none!important;
    filter: none!important;
    clip-path: none!important;
    mask : none!important;
    contain: none!important;
    perspective: none!important;
    mix-blend-mode: initial!important;
    z-index: auto;
}

.ace_layer {
    z-index: 1;
    position: absolute;
    overflow: hidden;
    /* workaround for chrome bug https://github.com/ajaxorg/ace/issues/2312*/
    word-wrap: normal;
    white-space: pre;
    height: 100%;
    width: 100%;
    box-sizing: border-box;
    /* setting pointer-events: auto; on node under the mouse, which changes
        during scroll, will break mouse wheel scrolling in Safari */
    pointer-events: none;
}

.ace_gutter-layer {
    position: relative;
    width: auto;
    text-align: right;
    pointer-events: auto;
    height: 1000000px;
    contain: style size layout;
}

.ace_text-layer {
    font: inherit !important;
    position: absolute;
    height: 1000000px;
    width: 1000000px;
    contain: style size layout;
}

.ace_text-layer > .ace_line, .ace_text-layer > .ace_line_group {
    contain: style size layout;
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
}

.ace_hidpi .ace_text-layer,
.ace_hidpi .ace_gutter-layer,
.ace_hidpi .ace_content,
.ace_hidpi .ace_gutter {
    contain: strict;
}
.ace_hidpi .ace_text-layer > .ace_line, 
.ace_hidpi .ace_text-layer > .ace_line_group {
    contain: strict;
}

.ace_cjk {
    display: inline-block;
    text-align: center;
}

.ace_cursor-layer {
    z-index: 4;
}

.ace_cursor {
    z-index: 4;
    position: absolute;
    box-sizing: border-box;
    border-left: 2px solid;
    /* workaround for smooth cursor repaintng whole screen in chrome */
    transform: translatez(0);
}

.ace_multiselect .ace_cursor {
    border-left-width: 1px;
}

.ace_slim-cursors .ace_cursor {
    border-left-width: 1px;
}

.ace_overwrite-cursors .ace_cursor {
    border-left-width: 0;
    border-bottom: 1px solid;
}

.ace_hidden-cursors .ace_cursor {
    opacity: 0.2;
}

.ace_hasPlaceholder .ace_hidden-cursors .ace_cursor {
    opacity: 0;
}

.ace_smooth-blinking .ace_cursor {
    transition: opacity 0.18s;
}

.ace_animate-blinking .ace_cursor {
    animation-duration: 1000ms;
    animation-timing-function: step-end;
    animation-name: blink-ace-animate;
    animation-iteration-count: infinite;
}

.ace_animate-blinking.ace_smooth-blinking .ace_cursor {
    animation-duration: 1000ms;
    animation-timing-function: ease-in-out;
    animation-name: blink-ace-animate-smooth;
}
    
@keyframes blink-ace-animate {
    from, to { opacity: 1; }
    60% { opacity: 0; }
}

@keyframes blink-ace-animate-smooth {
    from, to { opacity: 1; }
    45% { opacity: 1; }
    60% { opacity: 0; }
    85% { opacity: 0; }
}

.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {
    position: absolute;
    z-index: 3;
}

.ace_marker-layer .ace_selection {
    position: absolute;
    z-index: 5;
}

.ace_marker-layer .ace_bracket {
    position: absolute;
    z-index: 6;
}

.ace_marker-layer .ace_error_bracket {
    position: absolute;
    border-bottom: 1px solid #DE5555;
    border-radius: 0;
}

.ace_marker-layer .ace_active-line {
    position: absolute;
    z-index: 2;
}

.ace_marker-layer .ace_selected-word {
    position: absolute;
    z-index: 4;
    box-sizing: border-box;
}

.ace_line .ace_fold {
    box-sizing: border-box;

    display: inline-block;
    height: 11px;
    margin-top: -2px;
    vertical-align: middle;

    background-image:
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");
    background-repeat: no-repeat, repeat-x;
    background-position: center center, top left;
    color: transparent;

    border: 1px solid black;
    border-radius: 2px;

    cursor: pointer;
    pointer-events: auto;
}

.ace_dark .ace_fold {
}

.ace_fold:hover{
    background-image:
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");
}

.ace_tooltip {
    background-color: #f5f5f5;
    border: 1px solid gray;
    border-radius: 1px;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
    color: black;
    max-width: 100%;
    padding: 3px 4px;
    position: fixed;
    z-index: 999999;
    box-sizing: border-box;
    cursor: default;
    white-space: pre-wrap;
    word-wrap: break-word;
    line-height: normal;
    font-style: normal;
    font-weight: normal;
    letter-spacing: normal;
    pointer-events: none;
    overflow: auto;
    max-width: min(60em, 66vw);
    overscroll-behavior: contain;
}
.ace_tooltip pre {
    white-space: pre-wrap;
}

.ace_tooltip.ace_dark {
    background-color: #636363;
    color: #fff;
}

.ace_tooltip:focus {
    outline: 1px solid #5E9ED6;
}

.ace_icon {
    display: inline-block;
    width: 18px;
    vertical-align: top;
}

.ace_icon_svg {
    display: inline-block;
    width: 12px;
    vertical-align: top;
    -webkit-mask-repeat: no-repeat;
    -webkit-mask-size: 12px;
    -webkit-mask-position: center;
}

.ace_folding-enabled > .ace_gutter-cell, .ace_folding-enabled > .ace_gutter-cell_svg-icons {
    padding-right: 13px;
}

.ace_fold-widget {
    box-sizing: border-box;

    margin: 0 -12px 0 1px;
    display: none;
    width: 11px;
    vertical-align: top;

    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: center;

    border-radius: 3px;
    
    border: 1px solid transparent;
    cursor: pointer;
}

.ace_folding-enabled .ace_fold-widget {
    display: inline-block;   
}

.ace_fold-widget.ace_end {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");
}

.ace_fold-widget.ace_closed {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");
}

.ace_fold-widget:hover {
    border: 1px solid rgba(0, 0, 0, 0.3);
    background-color: rgba(255, 255, 255, 0.2);
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);
}

.ace_fold-widget:active {
    border: 1px solid rgba(0, 0, 0, 0.4);
    background-color: rgba(0, 0, 0, 0.05);
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);
}
/**
 * Dark version for fold widgets
 */
.ace_dark .ace_fold-widget {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");
}
.ace_dark .ace_fold-widget.ace_end {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");
}
.ace_dark .ace_fold-widget.ace_closed {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");
}
.ace_dark .ace_fold-widget:hover {
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);
    background-color: rgba(255, 255, 255, 0.1);
}
.ace_dark .ace_fold-widget:active {
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);
}

.ace_inline_button {
    border: 1px solid lightgray;
    display: inline-block;
    margin: -1px 8px;
    padding: 0 5px;
    pointer-events: auto;
    cursor: pointer;
}
.ace_inline_button:hover {
    border-color: gray;
    background: rgba(200,200,200,0.2);
    display: inline-block;
    pointer-events: auto;
}

.ace_fold-widget.ace_invalid {
    background-color: #FFB4B4;
    border-color: #DE5555;
}

.ace_fade-fold-widgets .ace_fold-widget {
    transition: opacity 0.4s ease 0.05s;
    opacity: 0;
}

.ace_fade-fold-widgets:hover .ace_fold-widget {
    transition: opacity 0.05s ease 0.05s;
    opacity:1;
}

.ace_underline {
    text-decoration: underline;
}

.ace_bold {
    font-weight: bold;
}

.ace_nobold .ace_bold {
    font-weight: normal;
}

.ace_italic {
    font-style: italic;
}


.ace_error-marker {
    background-color: rgba(255, 0, 0,0.2);
    position: absolute;
    z-index: 9;
}

.ace_highlight-marker {
    background-color: rgba(255, 255, 0,0.2);
    position: absolute;
    z-index: 8;
}

.ace_mobile-menu {
    position: absolute;
    line-height: 1.5;
    border-radius: 4px;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    background: white;
    box-shadow: 1px 3px 2px grey;
    border: 1px solid #dcdcdc;
    color: black;
}
.ace_dark > .ace_mobile-menu {
    background: #333;
    color: #ccc;
    box-shadow: 1px 3px 2px grey;
    border: 1px solid #444;

}
.ace_mobile-button {
    padding: 2px;
    cursor: pointer;
    overflow: hidden;
}
.ace_mobile-button:hover {
    background-color: #eee;
    opacity:1;
}
.ace_mobile-button:active {
    background-color: #ddd;
}

.ace_placeholder {
    position: relative;
    font-family: arial;
    transform: scale(0.9);
    transform-origin: left;
    white-space: pre;
    opacity: 0.7;
    margin: 0 10px;
    z-index: 1;
}

.ace_ghost_text {
    opacity: 0.5;
    font-style: italic;
}

.ace_ghost_text_container > div {
    white-space: pre;
}

.ghost_text_line_wrapped::after {
    content: "\u21A9";
    position: absolute;
}

.ace_lineWidgetContainer.ace_ghost_text {
    margin: 0px 4px
}

.ace_screenreader-only {
    position:absolute;
    left:-10000px;
    top:auto;
    width:1px;
    height:1px;
    overflow:hidden;
}

.ace_hidden_token {
    display: none;
}`});ace.define("ace/layer/decorators",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event_emitter"],function(e,t,r){"use strict";var d=e("../lib/dom"),u=e("../lib/oop"),g=e("../lib/event_emitter").EventEmitter,a=function(){function p(o,i){this.canvas=d.createElement("canvas"),this.renderer=i,this.pixelRatio=1,this.maxHeight=i.layerConfig.maxHeight,this.lineHeight=i.layerConfig.lineHeight,this.canvasHeight=o.parent.scrollHeight,this.heightRatio=this.canvasHeight/this.maxHeight,this.canvasWidth=o.width,this.minDecorationHeight=2*this.pixelRatio|0,this.halfMinDecorationHeight=this.minDecorationHeight/2|0,this.canvas.width=this.canvasWidth,this.canvas.height=this.canvasHeight,this.canvas.style.top="0px",this.canvas.style.right="0px",this.canvas.style.zIndex="7px",this.canvas.style.position="absolute",this.colors={},this.colors.dark={error:"rgba(255, 18, 18, 1)",warning:"rgba(18, 136, 18, 1)",info:"rgba(18, 18, 136, 1)"},this.colors.light={error:"rgb(255,51,51)",warning:"rgb(32,133,72)",info:"rgb(35,68,138)"},o.element.appendChild(this.canvas)}return p.prototype.$updateDecorators=function(o){var i=this.renderer.theme.isDark===!0?this.colors.dark:this.colors.light;if(o){this.maxHeight=o.maxHeight,this.lineHeight=o.lineHeight,this.canvasHeight=o.height;var n=(o.lastRow+1)*this.lineHeight;n<this.canvasHeight?this.heightRatio=1:this.heightRatio=this.canvasHeight/this.maxHeight}var l=this.canvas.getContext("2d");function s(C,w){return C.priority<w.priority?-1:C.priority>w.priority?1:0}var c=this.renderer.session.$annotations;if(l.clearRect(0,0,this.canvas.width,this.canvas.height),c){var m={info:1,warning:2,error:3};c.forEach(function(C){C.priority=m[C.type]||null}),c=c.sort(s);for(var h=this.renderer.session.$foldData,v=0;v<c.length;v++){var k=c[v].row,x=this.compensateFoldRows(k,h),A=Math.round((k-x)*this.lineHeight*this.heightRatio),S=Math.round((k-x)*this.lineHeight*this.heightRatio),f=Math.round(((k-x)*this.lineHeight+this.lineHeight)*this.heightRatio),L=f-S;if(L<this.minDecorationHeight){var $=(S+f)/2|0;$<this.halfMinDecorationHeight?$=this.halfMinDecorationHeight:$+this.halfMinDecorationHeight>this.canvasHeight&&($=this.canvasHeight-this.halfMinDecorationHeight),S=Math.round($-this.halfMinDecorationHeight),f=Math.round($+this.halfMinDecorationHeight)}l.fillStyle=i[c[v].type]||null,l.fillRect(0,A,this.canvasWidth,f-S)}}var T=this.renderer.session.selection.getCursor();if(T){var x=this.compensateFoldRows(T.row,h),A=Math.round((T.row-x)*this.lineHeight*this.heightRatio);l.fillStyle="rgba(0, 0, 0, 0.5)",l.fillRect(0,A,this.canvasWidth,2)}},p.prototype.compensateFoldRows=function(o,i){var n=0;if(i&&i.length>0)for(var l=0;l<i.length;l++)o>i[l].start.row&&o<i[l].end.row?n+=o-i[l].start.row:o>=i[l].end.row&&(n+=i[l].end.row-i[l].start.row);return n},p}();u.implement(a.prototype,g),t.Decorator=a});ace.define("ace/virtual_renderer",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/config","ace/layer/gutter","ace/layer/marker","ace/layer/text","ace/layer/cursor","ace/scrollbar","ace/scrollbar","ace/scrollbar_custom","ace/scrollbar_custom","ace/renderloop","ace/layer/font_metrics","ace/lib/event_emitter","ace/css/editor-css","ace/layer/decorators","ace/lib/useragent","ace/layer/text_util"],function(e,t,r){"use strict";var d=e("./lib/oop"),u=e("./lib/dom"),g=e("./lib/lang"),a=e("./config"),p=e("./layer/gutter").Gutter,o=e("./layer/marker").Marker,i=e("./layer/text").Text,n=e("./layer/cursor").Cursor,l=e("./scrollbar").HScrollBar,s=e("./scrollbar").VScrollBar,c=e("./scrollbar_custom").HScrollBar,m=e("./scrollbar_custom").VScrollBar,h=e("./renderloop").RenderLoop,v=e("./layer/font_metrics").FontMetrics,k=e("./lib/event_emitter").EventEmitter,x=e("./css/editor-css"),A=e("./layer/decorators").Decorator,S=e("./lib/useragent"),f=e("./layer/text_util").isTextToken;u.importCssString(x,"ace_editor.css",!1);var L=function(){function $(T,C){var w=this;this.container=T||u.createElement("div"),u.addCssClass(this.container,"ace_editor"),u.HI_DPI&&u.addCssClass(this.container,"ace_hidpi"),this.setTheme(C),a.get("useStrictCSP")==null&&a.set("useStrictCSP",!1),this.$gutter=u.createElement("div"),this.$gutter.className="ace_gutter",this.container.appendChild(this.$gutter),this.$gutter.setAttribute("aria-hidden","true"),this.scroller=u.createElement("div"),this.scroller.className="ace_scroller",this.container.appendChild(this.scroller),this.content=u.createElement("div"),this.content.className="ace_content",this.scroller.appendChild(this.content),this.$gutterLayer=new p(this.$gutter),this.$gutterLayer.on("changeGutterWidth",this.onGutterResize.bind(this)),this.$markerBack=new o(this.content);var y=this.$textLayer=new i(this.content);this.canvas=y.element,this.$markerFront=new o(this.content),this.$cursorLayer=new n(this.content),this.$horizScroll=!1,this.$vScroll=!1,this.scrollBar=this.scrollBarV=new s(this.container,this),this.scrollBarH=new l(this.container,this),this.scrollBarV.on("scroll",function(b){w.$scrollAnimation||w.session.setScrollTop(b.data-w.scrollMargin.top)}),this.scrollBarH.on("scroll",function(b){w.$scrollAnimation||w.session.setScrollLeft(b.data-w.scrollMargin.left)}),this.scrollTop=0,this.scrollLeft=0,this.cursorPos={row:0,column:0},this.$fontMetrics=new v(this.container),this.$textLayer.$setFontMetrics(this.$fontMetrics),this.$textLayer.on("changeCharacterSize",function(b){w.updateCharacterSize(),w.onResize(!0,w.gutterWidth,w.$size.width,w.$size.height),w._signal("changeCharacterSize",b)}),this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0,$dirty:!0},this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:0,characterWidth:0,minHeight:1,maxHeight:1,offset:0,height:1,gutterOffset:1},this.scrollMargin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.margin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.$keepTextAreaAtCursor=!S.isIOS,this.$loop=new h(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView),this.$loop.schedule(this.CHANGE_FULL),this.updateCharacterSize(),this.setPadding(4),this.$addResizeObserver(),a.resetOptions(this),a._signal("renderer",this)}return $.prototype.updateCharacterSize=function(){this.$textLayer.allowBoldFonts!=this.$allowBoldFonts&&(this.$allowBoldFonts=this.$textLayer.allowBoldFonts,this.setStyle("ace_nobold",!this.$allowBoldFonts)),this.layerConfig.characterWidth=this.characterWidth=this.$textLayer.getCharacterWidth(),this.layerConfig.lineHeight=this.lineHeight=this.$textLayer.getLineHeight(),this.$updatePrintMargin(),u.setStyle(this.scroller.style,"line-height",this.lineHeight+"px")},$.prototype.setSession=function(T){this.session&&this.session.doc.off("changeNewLineMode",this.onChangeNewLineMode),this.session=T,T&&this.scrollMargin.top&&T.getScrollTop()<=0&&T.setScrollTop(-this.scrollMargin.top),this.$cursorLayer.setSession(T),this.$markerBack.setSession(T),this.$markerFront.setSession(T),this.$gutterLayer.setSession(T),this.$textLayer.setSession(T),T&&(this.$loop.schedule(this.CHANGE_FULL),this.session.$setFontMetrics(this.$fontMetrics),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.onChangeNewLineMode=this.onChangeNewLineMode.bind(this),this.onChangeNewLineMode(),this.session.doc.on("changeNewLineMode",this.onChangeNewLineMode))},$.prototype.updateLines=function(T,C,w){if(C===void 0&&(C=1/0),this.$changedLines?(this.$changedLines.firstRow>T&&(this.$changedLines.firstRow=T),this.$changedLines.lastRow<C&&(this.$changedLines.lastRow=C)):this.$changedLines={firstRow:T,lastRow:C},this.$changedLines.lastRow<this.layerConfig.firstRow)if(w)this.$changedLines.lastRow=this.layerConfig.lastRow;else return;this.$changedLines.firstRow>this.layerConfig.lastRow||this.$loop.schedule(this.CHANGE_LINES)},$.prototype.onChangeNewLineMode=function(){this.$loop.schedule(this.CHANGE_TEXT),this.$textLayer.$updateEolChar(),this.session.$bidiHandler.setEolChar(this.$textLayer.EOL_CHAR)},$.prototype.onChangeTabSize=function(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER),this.$textLayer.onChangeTabSize()},$.prototype.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)},$.prototype.updateFull=function(T){T?this.$renderChanges(this.CHANGE_FULL,!0):this.$loop.schedule(this.CHANGE_FULL)},$.prototype.updateFontSize=function(){this.$textLayer.checkForSizeChanges()},$.prototype.$updateSizeAsync=function(){this.$loop.pending?this.$size.$dirty=!0:this.onResize()},$.prototype.onResize=function(T,C,w,y){if(!(this.resizing>2)){this.resizing>0?this.resizing++:this.resizing=T?1:0;var b=this.container;y||(y=b.clientHeight||b.scrollHeight),!y&&this.$maxLines&&this.lineHeight>1&&(!b.style.height||b.style.height=="0px")&&(b.style.height="1px",y=b.clientHeight||b.scrollHeight),w||(w=b.clientWidth||b.scrollWidth);var _=this.$updateCachedSize(T,C,w,y);if(this.$resizeTimer&&this.$resizeTimer.cancel(),!this.$size.scrollerHeight||!w&&!y)return this.resizing=0;T&&(this.$gutterLayer.$padding=null),T?this.$renderChanges(_|this.$changes,!0):this.$loop.schedule(_|this.$changes),this.resizing&&(this.resizing=0),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.$customScrollbar&&this.$updateCustomScrollbar(!0)}},$.prototype.$updateCachedSize=function(T,C,w,y){y-=this.$extraHeight||0;var b=0,_=this.$size,E={width:_.width,height:_.height,scrollerHeight:_.scrollerHeight,scrollerWidth:_.scrollerWidth};if(y&&(T||_.height!=y)&&(_.height=y,b|=this.CHANGE_SIZE,_.scrollerHeight=_.height,this.$horizScroll&&(_.scrollerHeight-=this.scrollBarH.getHeight()),this.scrollBarV.setHeight(_.scrollerHeight),this.scrollBarV.element.style.bottom=this.scrollBarH.getHeight()+"px",b=b|this.CHANGE_SCROLL),w&&(T||_.width!=w)){b|=this.CHANGE_SIZE,_.width=w,C==null&&(C=this.$showGutter?this.$gutter.offsetWidth:0),this.gutterWidth=C,u.setStyle(this.scrollBarH.element.style,"left",C+"px"),u.setStyle(this.scroller.style,"left",C+this.margin.left+"px"),_.scrollerWidth=Math.max(0,w-C-this.scrollBarV.getWidth()-this.margin.h),u.setStyle(this.$gutter.style,"left",this.margin.left+"px");var R=this.scrollBarV.getWidth()+"px";u.setStyle(this.scrollBarH.element.style,"right",R),u.setStyle(this.scroller.style,"right",R),u.setStyle(this.scroller.style,"bottom",this.scrollBarH.getHeight()),this.scrollBarH.setWidth(_.scrollerWidth),(this.session&&this.session.getUseWrapMode()&&this.adjustWrapLimit()||T)&&(b|=this.CHANGE_FULL)}return _.$dirty=!w||!y,b&&this._signal("resize",E),b},$.prototype.onGutterResize=function(T){var C=this.$showGutter?T:0;C!=this.gutterWidth&&(this.$changes|=this.$updateCachedSize(!0,C,this.$size.width,this.$size.height)),this.session.getUseWrapMode()&&this.adjustWrapLimit()?this.$loop.schedule(this.CHANGE_FULL):this.$size.$dirty?this.$loop.schedule(this.CHANGE_FULL):this.$computeLayerConfig()},$.prototype.adjustWrapLimit=function(){var T=this.$size.scrollerWidth-this.$padding*2,C=Math.floor(T/this.characterWidth);return this.session.adjustWrapLimit(C,this.$showPrintMargin&&this.$printMarginColumn)},$.prototype.setAnimatedScroll=function(T){this.setOption("animatedScroll",T)},$.prototype.getAnimatedScroll=function(){return this.$animatedScroll},$.prototype.setShowInvisibles=function(T){this.setOption("showInvisibles",T),this.session.$bidiHandler.setShowInvisibles(T)},$.prototype.getShowInvisibles=function(){return this.getOption("showInvisibles")},$.prototype.getDisplayIndentGuides=function(){return this.getOption("displayIndentGuides")},$.prototype.setDisplayIndentGuides=function(T){this.setOption("displayIndentGuides",T)},$.prototype.getHighlightIndentGuides=function(){return this.getOption("highlightIndentGuides")},$.prototype.setHighlightIndentGuides=function(T){this.setOption("highlightIndentGuides",T)},$.prototype.setShowPrintMargin=function(T){this.setOption("showPrintMargin",T)},$.prototype.getShowPrintMargin=function(){return this.getOption("showPrintMargin")},$.prototype.setPrintMarginColumn=function(T){this.setOption("printMarginColumn",T)},$.prototype.getPrintMarginColumn=function(){return this.getOption("printMarginColumn")},$.prototype.getShowGutter=function(){return this.getOption("showGutter")},$.prototype.setShowGutter=function(T){return this.setOption("showGutter",T)},$.prototype.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},$.prototype.setFadeFoldWidgets=function(T){this.setOption("fadeFoldWidgets",T)},$.prototype.setHighlightGutterLine=function(T){this.setOption("highlightGutterLine",T)},$.prototype.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},$.prototype.$updatePrintMargin=function(){if(!(!this.$showPrintMargin&&!this.$printMarginEl)){if(!this.$printMarginEl){var T=u.createElement("div");T.className="ace_layer ace_print-margin-layer",this.$printMarginEl=u.createElement("div"),this.$printMarginEl.className="ace_print-margin",T.appendChild(this.$printMarginEl),this.content.insertBefore(T,this.content.firstChild)}var C=this.$printMarginEl.style;C.left=Math.round(this.characterWidth*this.$printMarginColumn+this.$padding)+"px",C.visibility=this.$showPrintMargin?"visible":"hidden",this.session&&this.session.$wrap==-1&&this.adjustWrapLimit()}},$.prototype.getContainerElement=function(){return this.container},$.prototype.getMouseEventTarget=function(){return this.scroller},$.prototype.getTextAreaContainer=function(){return this.container},$.prototype.$moveTextAreaToCursor=function(){if(!this.$isMousePressed){var T=this.textarea.style,C=this.$composition;if(!this.$keepTextAreaAtCursor&&!C){u.translate(this.textarea,-100,0);return}var w=this.$cursorLayer.$pixelPos;if(w){C&&C.markerRange&&(w=this.$cursorLayer.getPixelPosition(C.markerRange.start,!0));var y=this.layerConfig,b=w.top,_=w.left;b-=y.offset;var E=C&&C.useTextareaForIME||S.isMobile?this.lineHeight:1;if(b<0||b>y.height-E){u.translate(this.textarea,0,0);return}var R=1,M=this.$size.height-E;if(!C)b+=this.lineHeight;else if(C.useTextareaForIME){var I=this.textarea.value;R=this.characterWidth*this.session.$getStringScreenWidth(I)[0]}else b+=this.lineHeight+2;_-=this.scrollLeft,_>this.$size.scrollerWidth-R&&(_=this.$size.scrollerWidth-R),_+=this.gutterWidth+this.margin.left,u.setStyle(T,"height",E+"px"),u.setStyle(T,"width",R+"px"),u.translate(this.textarea,Math.min(_,this.$size.scrollerWidth-R),Math.min(b,M))}}},$.prototype.getFirstVisibleRow=function(){return this.layerConfig.firstRow},$.prototype.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(this.layerConfig.offset===0?0:1)},$.prototype.getLastFullyVisibleRow=function(){var T=this.layerConfig,C=T.lastRow,w=this.session.documentToScreenRow(C,0)*T.lineHeight;return w-this.session.getScrollTop()>T.height-T.lineHeight?C-1:C},$.prototype.getLastVisibleRow=function(){return this.layerConfig.lastRow},$.prototype.setPadding=function(T){this.$padding=T,this.$textLayer.setPadding(T),this.$cursorLayer.setPadding(T),this.$markerFront.setPadding(T),this.$markerBack.setPadding(T),this.$loop.schedule(this.CHANGE_FULL),this.$updatePrintMargin()},$.prototype.setScrollMargin=function(T,C,w,y){var b=this.scrollMargin;b.top=T|0,b.bottom=C|0,b.right=y|0,b.left=w|0,b.v=b.top+b.bottom,b.h=b.left+b.right,b.top&&this.scrollTop<=0&&this.session&&this.session.setScrollTop(-b.top),this.updateFull()},$.prototype.setMargin=function(T,C,w,y){var b=this.margin;b.top=T|0,b.bottom=C|0,b.right=y|0,b.left=w|0,b.v=b.top+b.bottom,b.h=b.left+b.right,this.$updateCachedSize(!0,this.gutterWidth,this.$size.width,this.$size.height),this.updateFull()},$.prototype.getHScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},$.prototype.setHScrollBarAlwaysVisible=function(T){this.setOption("hScrollBarAlwaysVisible",T)},$.prototype.getVScrollBarAlwaysVisible=function(){return this.$vScrollBarAlwaysVisible},$.prototype.setVScrollBarAlwaysVisible=function(T){this.setOption("vScrollBarAlwaysVisible",T)},$.prototype.$updateScrollBarV=function(){var T=this.layerConfig.maxHeight,C=this.$size.scrollerHeight;!this.$maxLines&&this.$scrollPastEnd&&(T-=(C-this.lineHeight)*this.$scrollPastEnd,this.scrollTop>T-C&&(T=this.scrollTop+C,this.scrollBarV.scrollTop=null)),this.scrollBarV.setScrollHeight(T+this.scrollMargin.v),this.scrollBarV.setScrollTop(this.scrollTop+this.scrollMargin.top)},$.prototype.$updateScrollBarH=function(){this.scrollBarH.setScrollWidth(this.layerConfig.width+2*this.$padding+this.scrollMargin.h),this.scrollBarH.setScrollLeft(this.scrollLeft+this.scrollMargin.left)},$.prototype.freeze=function(){this.$frozen=!0},$.prototype.unfreeze=function(){this.$frozen=!1},$.prototype.$renderChanges=function(T,C){if(this.$changes&&(T|=this.$changes,this.$changes=0),!this.session||!this.container.offsetWidth||this.$frozen||!T&&!C){this.$changes|=T;return}if(this.$size.$dirty)return this.$changes|=T,this.onResize(!0);this.lineHeight||this.$textLayer.checkForSizeChanges(),this._signal("beforeRender",T),this.session&&this.session.$bidiHandler&&this.session.$bidiHandler.updateCharacterWidths(this.$fontMetrics);var w=this.layerConfig;if(T&this.CHANGE_FULL||T&this.CHANGE_SIZE||T&this.CHANGE_TEXT||T&this.CHANGE_LINES||T&this.CHANGE_SCROLL||T&this.CHANGE_H_SCROLL){if(T|=this.$computeLayerConfig()|this.$loop.clear(),w.firstRow!=this.layerConfig.firstRow&&w.firstRowScreen==this.layerConfig.firstRowScreen){var y=this.scrollTop+(w.firstRow-Math.max(this.layerConfig.firstRow,0))*this.lineHeight;y>0&&(this.scrollTop=y,T=T|this.CHANGE_SCROLL,T|=this.$computeLayerConfig()|this.$loop.clear())}w=this.layerConfig,this.$updateScrollBarV(),T&this.CHANGE_H_SCROLL&&this.$updateScrollBarH(),u.translate(this.content,-this.scrollLeft,-w.offset);var b=w.width+2*this.$padding+"px",_=w.minHeight+"px";u.setStyle(this.content.style,"width",b),u.setStyle(this.content.style,"height",_)}if(T&this.CHANGE_H_SCROLL&&(u.translate(this.content,-this.scrollLeft,-w.offset),this.scroller.className=this.scrollLeft<=0?"ace_scroller ":"ace_scroller ace_scroll-left ",this.enableKeyboardAccessibility&&(this.scroller.className+=this.keyboardFocusClassName)),T&this.CHANGE_FULL){this.$changedLines=null,this.$textLayer.update(w),this.$showGutter&&this.$gutterLayer.update(w),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(w),this.$markerBack.update(w),this.$markerFront.update(w),this.$cursorLayer.update(w),this.$moveTextAreaToCursor(),this._signal("afterRender",T);return}if(T&this.CHANGE_SCROLL){this.$changedLines=null,T&this.CHANGE_TEXT||T&this.CHANGE_LINES?this.$textLayer.update(w):this.$textLayer.scrollLines(w),this.$showGutter&&(T&this.CHANGE_GUTTER||T&this.CHANGE_LINES?this.$gutterLayer.update(w):this.$gutterLayer.scrollLines(w)),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(w),this.$markerBack.update(w),this.$markerFront.update(w),this.$cursorLayer.update(w),this.$moveTextAreaToCursor(),this._signal("afterRender",T);return}T&this.CHANGE_TEXT?(this.$changedLines=null,this.$textLayer.update(w),this.$showGutter&&this.$gutterLayer.update(w),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(w)):T&this.CHANGE_LINES?((this.$updateLines()||T&this.CHANGE_GUTTER&&this.$showGutter)&&this.$gutterLayer.update(w),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(w)):T&this.CHANGE_TEXT||T&this.CHANGE_GUTTER?(this.$showGutter&&this.$gutterLayer.update(w),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(w)):T&this.CHANGE_CURSOR&&(this.$highlightGutterLine&&this.$gutterLayer.updateLineHighlight(w),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(w)),T&this.CHANGE_CURSOR&&(this.$cursorLayer.update(w),this.$moveTextAreaToCursor()),T&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)&&this.$markerFront.update(w),T&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)&&this.$markerBack.update(w),this._signal("afterRender",T)},$.prototype.$autosize=function(){var T=this.session.getScreenLength()*this.lineHeight,C=this.$maxLines*this.lineHeight,w=Math.min(C,Math.max((this.$minLines||1)*this.lineHeight,T))+this.scrollMargin.v+(this.$extraHeight||0);this.$horizScroll&&(w+=this.scrollBarH.getHeight()),this.$maxPixelHeight&&w>this.$maxPixelHeight&&(w=this.$maxPixelHeight);var y=w<=2*this.lineHeight,b=!y&&T>C;if(w!=this.desiredHeight||this.$size.height!=this.desiredHeight||b!=this.$vScroll){b!=this.$vScroll&&(this.$vScroll=b,this.scrollBarV.setVisible(b));var _=this.container.clientWidth;this.container.style.height=w+"px",this.$updateCachedSize(!0,this.$gutterWidth,_,w),this.desiredHeight=w,this._signal("autosize")}},$.prototype.$computeLayerConfig=function(){var T=this.session,C=this.$size,w=C.height<=2*this.lineHeight,y=this.session.getScreenLength(),b=y*this.lineHeight,_=this.$getLongestLine(),E=!w&&(this.$hScrollBarAlwaysVisible||C.scrollerWidth-_-2*this.$padding<0),R=this.$horizScroll!==E;R&&(this.$horizScroll=E,this.scrollBarH.setVisible(E));var M=this.$vScroll;this.$maxLines&&this.lineHeight>1&&this.$autosize();var I=C.scrollerHeight+this.lineHeight,P=!this.$maxLines&&this.$scrollPastEnd?(C.scrollerHeight-this.lineHeight)*this.$scrollPastEnd:0;b+=P;var O=this.scrollMargin;this.session.setScrollTop(Math.max(-O.top,Math.min(this.scrollTop,b-C.scrollerHeight+O.bottom))),this.session.setScrollLeft(Math.max(-O.left,Math.min(this.scrollLeft,_+2*this.$padding-C.scrollerWidth+O.right)));var N=!w&&(this.$vScrollBarAlwaysVisible||C.scrollerHeight-b+P<0||this.scrollTop>O.top),D=M!==N;D&&(this.$vScroll=N,this.scrollBarV.setVisible(N));var F=this.scrollTop%this.lineHeight,z=Math.ceil(I/this.lineHeight)-1,W=Math.max(0,Math.round((this.scrollTop-F)/this.lineHeight)),j=W+z,Z,Y,q=this.lineHeight;W=T.screenToDocumentRow(W,0);var nt=T.getFoldLine(W);nt&&(W=nt.start.row),Z=T.documentToScreenRow(W,0),Y=T.getRowLength(W)*q,j=Math.min(T.screenToDocumentRow(j,0),T.getLength()-1),I=C.scrollerHeight+T.getRowLength(j)*q+Y,F=this.scrollTop-Z*q;var ot=0;return(this.layerConfig.width!=_||R)&&(ot=this.CHANGE_H_SCROLL),(R||D)&&(ot|=this.$updateCachedSize(!0,this.gutterWidth,C.width,C.height),this._signal("scrollbarVisibilityChanged"),D&&(_=this.$getLongestLine())),this.layerConfig={width:_,padding:this.$padding,firstRow:W,firstRowScreen:Z,lastRow:j,lineHeight:q,characterWidth:this.characterWidth,minHeight:I,maxHeight:b,offset:F,gutterOffset:q?Math.max(0,Math.ceil((F+C.height-C.scrollerHeight)/q)):0,height:this.$size.scrollerHeight},this.session.$bidiHandler&&this.session.$bidiHandler.setContentWidth(_-this.$padding),ot},$.prototype.$updateLines=function(){if(this.$changedLines){var T=this.$changedLines.firstRow,C=this.$changedLines.lastRow;this.$changedLines=null;var w=this.layerConfig;if(!(T>w.lastRow+1)&&!(C<w.firstRow)){if(C===1/0){this.$showGutter&&this.$gutterLayer.update(w),this.$textLayer.update(w);return}return this.$textLayer.updateLines(w,T,C),!0}}},$.prototype.$getLongestLine=function(){var T=this.session.getScreenWidth();return this.showInvisibles&&!this.session.$useWrapMode&&(T+=1),this.$textLayer&&T>this.$textLayer.MAX_LINE_LENGTH&&(T=this.$textLayer.MAX_LINE_LENGTH+30),Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(T*this.characterWidth))},$.prototype.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(!0)),this.$loop.schedule(this.CHANGE_MARKER_FRONT)},$.prototype.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers()),this.$loop.schedule(this.CHANGE_MARKER_BACK)},$.prototype.addGutterDecoration=function(T,C){this.$gutterLayer.addGutterDecoration(T,C)},$.prototype.removeGutterDecoration=function(T,C){this.$gutterLayer.removeGutterDecoration(T,C)},$.prototype.updateBreakpoints=function(T){this._rows=T,this.$loop.schedule(this.CHANGE_GUTTER)},$.prototype.setAnnotations=function(T){this.$gutterLayer.setAnnotations(T),this.$loop.schedule(this.CHANGE_GUTTER)},$.prototype.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)},$.prototype.hideCursor=function(){this.$cursorLayer.hideCursor()},$.prototype.showCursor=function(){this.$cursorLayer.showCursor()},$.prototype.scrollSelectionIntoView=function(T,C,w){this.scrollCursorIntoView(T,w),this.scrollCursorIntoView(C,w)},$.prototype.scrollCursorIntoView=function(T,C,w){if(this.$size.scrollerHeight!==0){var y=this.$cursorLayer.getPixelPosition(T),b=y.left,_=y.top,E=w&&w.top||0,R=w&&w.bottom||0;this.$scrollAnimation&&(this.$stopAnimation=!0);var M=this.$scrollAnimation?this.session.getScrollTop():this.scrollTop;M+E>_?(C&&M+E>_+this.lineHeight&&(_-=C*this.$size.scrollerHeight),_===0&&(_=-this.scrollMargin.top),this.session.setScrollTop(_)):M+this.$size.scrollerHeight-R<_+this.lineHeight&&(C&&M+this.$size.scrollerHeight-R<_-this.lineHeight&&(_+=C*this.$size.scrollerHeight),this.session.setScrollTop(_+this.lineHeight+R-this.$size.scrollerHeight));var I=this.scrollLeft,P=2*this.layerConfig.characterWidth;b-P<I?(b-=P,b<this.$padding+P&&(b=-this.scrollMargin.left),this.session.setScrollLeft(b)):(b+=P,I+this.$size.scrollerWidth<b+this.characterWidth?this.session.setScrollLeft(Math.round(b+this.characterWidth-this.$size.scrollerWidth)):I<=this.$padding&&b-I<this.characterWidth&&this.session.setScrollLeft(0))}},$.prototype.getScrollTop=function(){return this.session.getScrollTop()},$.prototype.getScrollLeft=function(){return this.session.getScrollLeft()},$.prototype.getScrollTopRow=function(){return this.scrollTop/this.lineHeight},$.prototype.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)},$.prototype.scrollToRow=function(T){this.session.setScrollTop(T*this.lineHeight)},$.prototype.alignCursor=function(T,C){typeof T=="number"&&(T={row:T,column:0});var w=this.$cursorLayer.getPixelPosition(T),y=this.$size.scrollerHeight-this.lineHeight,b=w.top-y*(C||0);return this.session.setScrollTop(b),b},$.prototype.$calcSteps=function(T,C){var w=0,y=this.STEPS,b=[],_=function(E,R,M){return M*(Math.pow(E-1,3)+1)+R};for(w=0;w<y;++w)b.push(_(w/this.STEPS,T,C-T));return b},$.prototype.scrollToLine=function(T,C,w,y){var b=this.$cursorLayer.getPixelPosition({row:T,column:0}),_=b.top;C&&(_-=this.$size.scrollerHeight/2);var E=this.scrollTop;this.session.setScrollTop(_),w!==!1&&this.animateScrolling(E,y)},$.prototype.animateScrolling=function(T,C){var w=this.scrollTop;if(!this.$animatedScroll)return;var y=this;if(T==w)return;if(this.$scrollAnimation){var b=this.$scrollAnimation.steps;if(b.length&&(T=b[0],T==w))return}var _=y.$calcSteps(T,w);this.$scrollAnimation={from:T,to:w,steps:_},clearInterval(this.$timer),y.session.setScrollTop(_.shift()),y.session.$scrollTop=w;function E(){y.$timer=clearInterval(y.$timer),y.$scrollAnimation=null,y.$stopAnimation=!1,C&&C()}this.$timer=setInterval(function(){if(y.$stopAnimation){E();return}if(!y.session)return clearInterval(y.$timer);_.length?(y.session.setScrollTop(_.shift()),y.session.$scrollTop=w):w!=null?(y.session.$scrollTop=-1,y.session.setScrollTop(w),w=null):E()},10)},$.prototype.scrollToY=function(T){this.scrollTop!==T&&(this.$loop.schedule(this.CHANGE_SCROLL),this.scrollTop=T)},$.prototype.scrollToX=function(T){this.scrollLeft!==T&&(this.scrollLeft=T),this.$loop.schedule(this.CHANGE_H_SCROLL)},$.prototype.scrollTo=function(T,C){this.session.setScrollTop(C),this.session.setScrollLeft(T)},$.prototype.scrollBy=function(T,C){C&&this.session.setScrollTop(this.session.getScrollTop()+C),T&&this.session.setScrollLeft(this.session.getScrollLeft()+T)},$.prototype.isScrollableBy=function(T,C){if(C<0&&this.session.getScrollTop()>=1-this.scrollMargin.top||C>0&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight<-1+this.scrollMargin.bottom||T<0&&this.session.getScrollLeft()>=1-this.scrollMargin.left||T>0&&this.session.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.width<-1+this.scrollMargin.right)return!0},$.prototype.pixelToScreenCoordinates=function(T,C){var w;if(this.$hasCssTransforms){w={top:0,left:0};var y=this.$fontMetrics.transformCoordinates([T,C]);T=y[1]-this.gutterWidth-this.margin.left,C=y[0]}else w=this.scroller.getBoundingClientRect();var b=T+this.scrollLeft-w.left-this.$padding,_=b/this.characterWidth,E=Math.floor((C+this.scrollTop-w.top)/this.lineHeight),R=this.$blockCursor?Math.floor(_):Math.round(_);return{row:E,column:R,side:_-R>0?1:-1,offsetX:b}},$.prototype.screenToTextCoordinates=function(T,C){var w;if(this.$hasCssTransforms){w={top:0,left:0};var y=this.$fontMetrics.transformCoordinates([T,C]);T=y[1]-this.gutterWidth-this.margin.left,C=y[0]}else w=this.scroller.getBoundingClientRect();var b=T+this.scrollLeft-w.left-this.$padding,_=b/this.characterWidth,E=this.$blockCursor?Math.floor(_):Math.round(_),R=Math.floor((C+this.scrollTop-w.top)/this.lineHeight);return this.session.screenToDocumentPosition(R,Math.max(E,0),b)},$.prototype.textToScreenCoordinates=function(T,C){var w=this.scroller.getBoundingClientRect(),y=this.session.documentToScreenPosition(T,C),b=this.$padding+(this.session.$bidiHandler.isBidiRow(y.row,T)?this.session.$bidiHandler.getPosLeft(y.column):Math.round(y.column*this.characterWidth)),_=y.row*this.lineHeight;return{pageX:w.left+b-this.scrollLeft,pageY:w.top+_-this.scrollTop}},$.prototype.visualizeFocus=function(){u.addCssClass(this.container,"ace_focus")},$.prototype.visualizeBlur=function(){u.removeCssClass(this.container,"ace_focus")},$.prototype.showComposition=function(T){this.$composition=T,T.cssText||(T.cssText=this.textarea.style.cssText),T.useTextareaForIME==null&&(T.useTextareaForIME=this.$useTextareaForIME),this.$useTextareaForIME?(u.addCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText="",this.$moveTextAreaToCursor(),this.$cursorLayer.element.style.display="none"):T.markerId=this.session.addMarker(T.markerRange,"ace_composition_marker","text")},$.prototype.setCompositionText=function(T){var C=this.session.selection.cursor;this.addToken(T,"composition_placeholder",C.row,C.column),this.$moveTextAreaToCursor()},$.prototype.hideComposition=function(){if(this.$composition){this.$composition.markerId&&this.session.removeMarker(this.$composition.markerId),u.removeCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText=this.$composition.cssText;var T=this.session.selection.cursor;this.removeExtraToken(T.row,T.column),this.$composition=null,this.$cursorLayer.element.style.display=""}},$.prototype.setGhostText=function(T,C){var w=this.session.selection.cursor,y=C||{row:w.row,column:w.column};this.removeGhostText();var b=this.$calculateWrappedTextChunks(T,y);this.addToken(b[0].text,"ghost_text",y.row,y.column),this.$ghostText={text:T,position:{row:y.row,column:y.column}};var _=u.createElement("div");if(b.length>1){var E=this.hideTokensAfterPosition(y.row,y.column),R;b.slice(1).forEach(function(D){var F=u.createElement("div"),z=u.createElement("span");z.className="ace_ghost_text",D.wrapped&&(F.className="ghost_text_line_wrapped"),D.text.length===0&&(D.text=" "),z.appendChild(u.createTextNode(D.text)),F.appendChild(z),_.appendChild(F),R=F}),E.forEach(function(D){var F=u.createElement("span");f(D.type)||(F.className="ace_"+D.type.replace(/\./g," ace_")),F.appendChild(u.createTextNode(D.value)),R.appendChild(F)}),this.$ghostTextWidget={el:_,row:y.row,column:y.column,className:"ace_ghost_text_container"},this.session.widgetManager.addLineWidget(this.$ghostTextWidget);var M=this.$cursorLayer.getPixelPosition(y,!0),I=this.container,P=I.getBoundingClientRect().height,O=b.length*this.lineHeight,N=O<P-M.top;if(N)return;O<P?this.scrollBy(0,(b.length-1)*this.lineHeight):this.scrollToRow(y.row)}},$.prototype.$calculateWrappedTextChunks=function(T,C){var w=this.$size.scrollerWidth-this.$padding*2,y=Math.floor(w/this.characterWidth)-2;y=y<=0?60:y;for(var b=T.split(/\r?\n/),_=[],E=0;E<b.length;E++){var R=this.session.$getDisplayTokens(b[E],C.column),M=this.session.$computeWrapSplits(R,y,this.session.$tabSize);if(M.length>0){var I=0;M.push(b[E].length);for(var P=0;P<M.length;P++){var O=b[E].slice(I,M[P]);_.push({text:O,wrapped:!0}),I=M[P]}}else _.push({text:b[E],wrapped:!1})}return _},$.prototype.removeGhostText=function(){if(this.$ghostText){var T=this.$ghostText.position;this.removeExtraToken(T.row,T.column),this.$ghostTextWidget&&(this.session.widgetManager.removeLineWidget(this.$ghostTextWidget),this.$ghostTextWidget=null),this.$ghostText=null}},$.prototype.addToken=function(T,C,w,y){var b=this.session;b.bgTokenizer.lines[w]=null;var _={type:C,value:T},E=b.getTokens(w);if(y==null||!E.length)E.push(_);else for(var R=0,M=0;M<E.length;M++){var I=E[M];if(R+=I.value.length,y<=R){var P=I.value.length-(R-y),O=I.value.slice(0,P),N=I.value.slice(P);E.splice(M,1,{type:I.type,value:O},_,{type:I.type,value:N});break}}this.updateLines(w,w)},$.prototype.hideTokensAfterPosition=function(T,C){for(var w=this.session.getTokens(T),y=0,b=!1,_=[],E=0;E<w.length;E++){var R=w[E];if(y+=R.value.length,R.type!=="ghost_text"){if(b){_.push({type:R.type,value:R.value}),R.type="hidden_token";continue}y===C&&(b=!0)}}return this.updateLines(T,T),_},$.prototype.removeExtraToken=function(T,C){this.session.bgTokenizer.lines[T]=null,this.updateLines(T,T)},$.prototype.setTheme=function(T,C){var w=this;if(this.$themeId=T,w._dispatchEvent("themeChange",{theme:T}),!T||typeof T=="string"){var y=T||this.$options.theme.initialValue;a.loadModule(["theme",y],b)}else b(T);function b(_){if(w.$themeId!=T)return C&&C();if(!_||!_.cssClass)throw new Error("couldn't load module "+T+" or it didn't call define");_.$id&&(w.$themeId=_.$id),u.importCssString(_.cssText,_.cssClass,w.container),w.theme&&u.removeCssClass(w.container,w.theme.cssClass);var E="padding"in _?_.padding:"padding"in(w.theme||{})?4:w.$padding;w.$padding&&E!=w.$padding&&w.setPadding(E),w.$theme=_.cssClass,w.theme=_,u.addCssClass(w.container,_.cssClass),u.setCssClass(w.container,"ace_dark",_.isDark),w.$size&&(w.$size.width=0,w.$updateSizeAsync()),w._dispatchEvent("themeLoaded",{theme:_}),C&&C(),S.isSafari&&w.scroller&&(w.scroller.style.background="red",w.scroller.style.background="")}},$.prototype.getTheme=function(){return this.$themeId},$.prototype.setStyle=function(T,C){u.setCssClass(this.container,T,C!==!1)},$.prototype.unsetStyle=function(T){u.removeCssClass(this.container,T)},$.prototype.setCursorStyle=function(T){u.setStyle(this.scroller.style,"cursor",T)},$.prototype.setMouseCursor=function(T){u.setStyle(this.scroller.style,"cursor",T)},$.prototype.attachToShadowRoot=function(){u.importCssString(x,"ace_editor.css",this.container)},$.prototype.destroy=function(){this.freeze(),this.$fontMetrics.destroy(),this.$cursorLayer.destroy(),this.removeAllListeners(),this.container.textContent="",this.setOption("useResizeObserver",!1)},$.prototype.$updateCustomScrollbar=function(T){var C=this;this.$horizScroll=this.$vScroll=null,this.scrollBarV.element.remove(),this.scrollBarH.element.remove(),this.$scrollDecorator&&delete this.$scrollDecorator,T===!0?(this.scrollBarV=new m(this.container,this),this.scrollBarH=new c(this.container,this),this.scrollBarV.setHeight(this.$size.scrollerHeight),this.scrollBarH.setWidth(this.$size.scrollerWidth),this.scrollBarV.addEventListener("scroll",function(w){C.$scrollAnimation||C.session.setScrollTop(w.data-C.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function(w){C.$scrollAnimation||C.session.setScrollLeft(w.data-C.scrollMargin.left)}),this.$scrollDecorator=new A(this.scrollBarV,this),this.$scrollDecorator.$updateDecorators()):(this.scrollBarV=new s(this.container,this),this.scrollBarH=new l(this.container,this),this.scrollBarV.addEventListener("scroll",function(w){C.$scrollAnimation||C.session.setScrollTop(w.data-C.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function(w){C.$scrollAnimation||C.session.setScrollLeft(w.data-C.scrollMargin.left)}))},$.prototype.$addResizeObserver=function(){if(!(!window.ResizeObserver||this.$resizeObserver)){var T=this;this.$resizeTimer=g.delayedCall(function(){T.destroyed||T.onResize()},50),this.$resizeObserver=new window.ResizeObserver(function(C){var w=C[0].contentRect.width,y=C[0].contentRect.height;Math.abs(T.$size.width-w)>1||Math.abs(T.$size.height-y)>1?T.$resizeTimer.delay():T.$resizeTimer.cancel()}),this.$resizeObserver.observe(this.container)}},$}();L.prototype.CHANGE_CURSOR=1,L.prototype.CHANGE_MARKER=2,L.prototype.CHANGE_GUTTER=4,L.prototype.CHANGE_SCROLL=8,L.prototype.CHANGE_LINES=16,L.prototype.CHANGE_TEXT=32,L.prototype.CHANGE_SIZE=64,L.prototype.CHANGE_MARKER_BACK=128,L.prototype.CHANGE_MARKER_FRONT=256,L.prototype.CHANGE_FULL=512,L.prototype.CHANGE_H_SCROLL=1024,L.prototype.$changes=0,L.prototype.$padding=null,L.prototype.$frozen=!1,L.prototype.STEPS=8,d.implement(L.prototype,k),a.defineOptions(L.prototype,"renderer",{useResizeObserver:{set:function($){!$&&this.$resizeObserver?(this.$resizeObserver.disconnect(),this.$resizeTimer.cancel(),this.$resizeTimer=this.$resizeObserver=null):$&&!this.$resizeObserver&&this.$addResizeObserver()}},animatedScroll:{initialValue:!1},showInvisibles:{set:function($){this.$textLayer.setShowInvisibles($)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!1},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:!0},printMarginColumn:{set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function($){typeof $=="number"&&(this.$printMarginColumn=$),this.$showPrintMargin=!!$,this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&this.$printMarginColumn}},showGutter:{set:function($){this.$gutter.style.display=$?"block":"none",this.$loop.schedule(this.CHANGE_FULL),this.onGutterResize()},initialValue:!0},useSvgGutterIcons:{set:function($){this.$gutterLayer.$useSvgGutterIcons=$},initialValue:!1},showFoldedAnnotations:{set:function($){this.$gutterLayer.$showFoldedAnnotations=$},initialValue:!1},fadeFoldWidgets:{set:function($){u.setCssClass(this.$gutter,"ace_fade-fold-widgets",$)},initialValue:!1},showFoldWidgets:{set:function($){this.$gutterLayer.setShowFoldWidgets($),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},displayIndentGuides:{set:function($){this.$textLayer.setDisplayIndentGuides($)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!0},highlightIndentGuides:{set:function($){this.$textLayer.setHighlightIndentGuides($)==!0?this.$textLayer.$highlightIndentGuide():this.$textLayer.$clearActiveIndentGuide(this.$textLayer.$lines.cells)},initialValue:!0},highlightGutterLine:{set:function($){this.$gutterLayer.setHighlightGutterLine($),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},hScrollBarAlwaysVisible:{set:function($){(!this.$hScrollBarAlwaysVisible||!this.$horizScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},vScrollBarAlwaysVisible:{set:function($){(!this.$vScrollBarAlwaysVisible||!this.$vScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},fontSize:{set:function($){typeof $=="number"&&($=$+"px"),this.container.style.fontSize=$,this.updateFontSize()},initialValue:12},fontFamily:{set:function($){this.container.style.fontFamily=$,this.updateFontSize()}},maxLines:{set:function($){this.updateFull()}},minLines:{set:function($){this.$minLines<562949953421311||(this.$minLines=0),this.updateFull()}},maxPixelHeight:{set:function($){this.updateFull()},initialValue:0},scrollPastEnd:{set:function($){$=+$||0,this.$scrollPastEnd!=$&&(this.$scrollPastEnd=$,this.$loop.schedule(this.CHANGE_SCROLL))},initialValue:0,handlesSet:!0},fixedWidthGutter:{set:function($){this.$gutterLayer.$fixedWidth=!!$,this.$loop.schedule(this.CHANGE_GUTTER)}},customScrollbar:{set:function($){this.$updateCustomScrollbar($)},initialValue:!1},theme:{set:function($){this.setTheme($)},get:function(){return this.$themeId||this.theme},initialValue:"./theme/textmate",handlesSet:!0},hasCssTransforms:{},useTextareaForIME:{initialValue:!S.isMobile&&!S.isIE}}),t.VirtualRenderer=L});ace.define("ace/worker/worker_client",["require","exports","module","ace/lib/oop","ace/lib/net","ace/lib/event_emitter","ace/config"],function(e,t,r){"use strict";var d=e("../lib/oop"),u=e("../lib/net"),g=e("../lib/event_emitter").EventEmitter,a=e("../config");function p(l){var s="importScripts('"+u.qualifyURL(l)+"');";try{return new Blob([s],{type:"application/javascript"})}catch{var c=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,m=new c;return m.append(s),m.getBlob("application/javascript")}}function o(l){if(typeof Worker>"u")return{postMessage:function(){},terminate:function(){}};if(a.get("loadWorkerFromBlob")){var s=p(l),c=window.URL||window.webkitURL,m=c.createObjectURL(s);return new Worker(m)}return new Worker(l)}var i=function(l){l.postMessage||(l=this.$createWorkerFromOldConfig.apply(this,arguments)),this.$worker=l,this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.onMessage=this.onMessage.bind(this),this.callbackId=1,this.callbacks={},this.$worker.onmessage=this.onMessage};(function(){d.implement(this,g),this.$createWorkerFromOldConfig=function(l,s,c,m,h){if(e.nameToUrl&&!e.toUrl&&(e.toUrl=e.nameToUrl),a.get("packaged")||!e.toUrl)m=m||a.moduleUrl(s,"worker");else{var v=this.$normalizePath;m=m||v(e.toUrl("ace/worker/worker.js",null,"_"));var k={};l.forEach(function(x){k[x]=v(e.toUrl(x,null,"_").replace(/(\.js)?(\?.*)?$/,""))})}return this.$worker=o(m),h&&this.send("importScripts",h),this.$worker.postMessage({init:!0,tlns:k,module:s,classname:c}),this.$worker},this.onMessage=function(l){var s=l.data;switch(s.type){case"event":this._signal(s.name,{data:s.data});break;case"call":var c=this.callbacks[s.id];c&&(c(s.data),delete this.callbacks[s.id]);break;case"error":this.reportError(s.data);break;case"log":window.console&&console.log&&console.log.apply(console,s.data);break}},this.reportError=function(l){window.console&&console.error&&console.error(l)},this.$normalizePath=function(l){return u.qualifyURL(l)},this.terminate=function(){this._signal("terminate",{}),this.deltaQueue=null,this.$worker.terminate(),this.$worker.onerror=function(l){l.preventDefault()},this.$worker=null,this.$doc&&this.$doc.off("change",this.changeListener),this.$doc=null},this.send=function(l,s){this.$worker.postMessage({command:l,args:s})},this.call=function(l,s,c){if(c){var m=this.callbackId++;this.callbacks[m]=c,s.push(m)}this.send(l,s)},this.emit=function(l,s){try{s.data&&s.data.err&&(s.data.err={message:s.data.err.message,stack:s.data.err.stack,code:s.data.err.code}),this.$worker&&this.$worker.postMessage({event:l,data:{data:s.data}})}catch(c){console.error(c.stack)}},this.attachToDocument=function(l){this.$doc&&this.terminate(),this.$doc=l,this.call("setValue",[l.getValue()]),l.on("change",this.changeListener,!0)},this.changeListener=function(l){this.deltaQueue||(this.deltaQueue=[],setTimeout(this.$sendDeltaQueue,0)),l.action=="insert"?this.deltaQueue.push(l.start,l.lines):this.deltaQueue.push(l.start,l.end)},this.$sendDeltaQueue=function(){var l=this.deltaQueue;l&&(this.deltaQueue=null,l.length>50&&l.length>this.$doc.getLength()>>1?this.call("setValue",[this.$doc.getValue()]):this.emit("change",{data:l}))}}).call(i.prototype);var n=function(l,s,c){var m=null,h=!1,v=Object.create(g),k=[],x=new i({messageBuffer:k,terminate:function(){},postMessage:function(S){k.push(S),m&&(h?setTimeout(A):A())}});x.setEmitSync=function(S){h=S};var A=function(){var S=k.shift();S.command?m[S.command].apply(m,S.args):S.event&&v._signal(S.event,S.data)};return v.postMessage=function(S){x.onMessage({data:S})},v.callback=function(S,f){this.postMessage({type:"call",id:f,data:S})},v.emit=function(S,f){this.postMessage({type:"event",name:S,data:f})},a.loadModule(["worker",s],function(S){for(m=new S[c](v);k.length;)A()}),x};t.UIWorkerClient=n,t.WorkerClient=i,t.createWorker=o});ace.define("ace/placeholder",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/oop"],function(e,t,r){"use strict";var d=e("./range").Range,u=e("./lib/event_emitter").EventEmitter,g=e("./lib/oop"),a=function(){function p(o,i,n,l,s,c){var m=this;this.length=i,this.session=o,this.doc=o.getDocument(),this.mainClass=s,this.othersClass=c,this.$onUpdate=this.onUpdate.bind(this),this.doc.on("change",this.$onUpdate,!0),this.$others=l,this.$onCursorChange=function(){setTimeout(function(){m.onCursorChange()})},this.$pos=n;var h=o.getUndoManager().$undoStack||o.getUndoManager().$undostack||{length:-1};this.$undoStackDepth=h.length,this.setup(),o.selection.on("changeCursor",this.$onCursorChange)}return p.prototype.setup=function(){var o=this,i=this.doc,n=this.session;this.selectionBefore=n.selection.toJSON(),n.selection.inMultiSelectMode&&n.selection.toSingleRange(),this.pos=i.createAnchor(this.$pos.row,this.$pos.column);var l=this.pos;l.$insertRight=!0,l.detach(),l.markerId=n.addMarker(new d(l.row,l.column,l.row,l.column+this.length),this.mainClass,null,!1),this.others=[],this.$others.forEach(function(s){var c=i.createAnchor(s.row,s.column);c.$insertRight=!0,c.detach(),o.others.push(c)}),n.setUndoSelect(!1)},p.prototype.showOtherMarkers=function(){if(!this.othersActive){var o=this.session,i=this;this.othersActive=!0,this.others.forEach(function(n){n.markerId=o.addMarker(new d(n.row,n.column,n.row,n.column+i.length),i.othersClass,null,!1)})}},p.prototype.hideOtherMarkers=function(){if(this.othersActive){this.othersActive=!1;for(var o=0;o<this.others.length;o++)this.session.removeMarker(this.others[o].markerId)}},p.prototype.onUpdate=function(o){if(this.$updating)return this.updateAnchors(o);var i=o;if(i.start.row===i.end.row&&i.start.row===this.pos.row){this.$updating=!0;var n=o.action==="insert"?i.end.column-i.start.column:i.start.column-i.end.column,l=i.start.column>=this.pos.column&&i.start.column<=this.pos.column+this.length+1,s=i.start.column-this.pos.column;if(this.updateAnchors(o),l&&(this.length+=n),l&&!this.session.$fromUndo){if(o.action==="insert")for(var c=this.others.length-1;c>=0;c--){var m=this.others[c],h={row:m.row,column:m.column+s};this.doc.insertMergedLines(h,o.lines)}else if(o.action==="remove")for(var c=this.others.length-1;c>=0;c--){var m=this.others[c],h={row:m.row,column:m.column+s};this.doc.remove(new d(h.row,h.column,h.row,h.column-n))}}this.$updating=!1,this.updateMarkers()}},p.prototype.updateAnchors=function(o){this.pos.onChange(o);for(var i=this.others.length;i--;)this.others[i].onChange(o);this.updateMarkers()},p.prototype.updateMarkers=function(){if(!this.$updating){var o=this,i=this.session,n=function(s,c){i.removeMarker(s.markerId),s.markerId=i.addMarker(new d(s.row,s.column,s.row,s.column+o.length),c,null,!1)};n(this.pos,this.mainClass);for(var l=this.others.length;l--;)n(this.others[l],this.othersClass)}},p.prototype.onCursorChange=function(o){if(!(this.$updating||!this.session)){var i=this.session.selection.getCursor();i.row===this.pos.row&&i.column>=this.pos.column&&i.column<=this.pos.column+this.length?(this.showOtherMarkers(),this._emit("cursorEnter",o)):(this.hideOtherMarkers(),this._emit("cursorLeave",o))}},p.prototype.detach=function(){this.session.removeMarker(this.pos&&this.pos.markerId),this.hideOtherMarkers(),this.doc.off("change",this.$onUpdate),this.session.selection.off("changeCursor",this.$onCursorChange),this.session.setUndoSelect(!0),this.session=null},p.prototype.cancel=function(){if(this.$undoStackDepth!==-1){for(var o=this.session.getUndoManager(),i=(o.$undoStack||o.$undostack).length-this.$undoStackDepth,n=0;n<i;n++)o.undo(this.session,!0);this.selectionBefore&&this.session.selection.fromJSON(this.selectionBefore)}},p}();g.implement(a.prototype,u),t.PlaceHolder=a});ace.define("ace/mouse/multi_select_handler",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(e,t,r){var d=e("../lib/event"),u=e("../lib/useragent");function g(p,o){return p.row==o.row&&p.column==o.column}function a(p){var o=p.domEvent,i=o.altKey,n=o.shiftKey,l=o.ctrlKey,s=p.getAccelKey(),c=p.getButton();if(l&&u.isMac&&(c=o.button),p.editor.inMultiSelectMode&&c==2){p.editor.textInput.onContextMenu(p.domEvent);return}if(!l&&!i&&!s){c===0&&p.editor.inMultiSelectMode&&p.editor.exitMultiSelectMode();return}if(c===0){var m=p.editor,h=m.selection,v=m.inMultiSelectMode,k=p.getDocumentPosition(),x=h.getCursor(),A=p.inSelection()||h.isEmpty()&&g(k,x),S=p.x,f=p.y,L=function(O){S=O.clientX,f=O.clientY},$=m.session,T=m.renderer.pixelToScreenCoordinates(S,f),C=T,w;if(m.$mouseHandler.$enableJumpToDef)l&&i||s&&i?w=n?"block":"add":i&&m.$blockSelectEnabled&&(w="block");else if(s&&!i){if(w="add",!v&&n)return}else i&&m.$blockSelectEnabled&&(w="block");if(w&&u.isMac&&o.ctrlKey&&m.$mouseHandler.cancelContextMenu(),w=="add"){if(!v&&A)return;if(!v){var y=h.toOrientedRange();m.addSelectionMarker(y)}var b=h.rangeList.rangeAtPoint(k);m.inVirtualSelectionMode=!0,n&&(b=null,y=h.ranges[0]||y,m.removeSelectionMarker(y)),m.once("mouseup",function(){var O=h.toOrientedRange();b&&O.isEmpty()&&g(b.cursor,O.cursor)?h.substractPoint(O.cursor):(n?h.substractPoint(y.cursor):y&&(m.removeSelectionMarker(y),h.addRange(y)),h.addRange(O)),m.inVirtualSelectionMode=!1})}else if(w=="block"){p.stop(),m.inVirtualSelectionMode=!0;var _,E=[],R=function(){var O=m.renderer.pixelToScreenCoordinates(S,f),N=$.screenToDocumentPosition(O.row,O.column,O.offsetX);g(C,O)&&g(N,h.lead)||(C=O,m.selection.moveToPosition(N),m.renderer.scrollCursorIntoView(),m.removeSelectionMarkers(E),E=h.rectangularRangeBlock(C,T),m.$mouseHandler.$clickSelection&&E.length==1&&E[0].isEmpty()&&(E[0]=m.$mouseHandler.$clickSelection.clone()),E.forEach(m.addSelectionMarker,m),m.updateSelectionMarkers())};v&&!s?h.toSingleRange():!v&&s&&(_=h.toOrientedRange(),m.addSelectionMarker(_)),n?T=$.documentToScreenPosition(h.lead):h.moveToPosition(k),C={row:-1,column:-1};var M=function(O){R(),clearInterval(P),m.removeSelectionMarkers(E),E.length||(E=[h.toOrientedRange()]),_&&(m.removeSelectionMarker(_),h.toSingleRange(_));for(var N=0;N<E.length;N++)h.addRange(E[N]);m.inVirtualSelectionMode=!1,m.$mouseHandler.$clickSelection=null},I=R;d.capture(m.container,L,M);var P=setInterval(function(){I()},20);return p.preventDefault()}}}t.onMouseDown=a});ace.define("ace/commands/multi_select_commands",["require","exports","module","ace/keyboard/hash_handler"],function(e,t,r){t.defaultCommands=[{name:"addCursorAbove",description:"Add cursor above",exec:function(u){u.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelow",description:"Add cursor below",exec:function(u){u.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorAboveSkipCurrent",description:"Add cursor above (skip current)",exec:function(u){u.selectMoreLines(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelowSkipCurrent",description:"Add cursor below (skip current)",exec:function(u){u.selectMoreLines(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreBefore",description:"Select more before",exec:function(u){u.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreAfter",description:"Select more after",exec:function(u){u.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextBefore",description:"Select next before",exec:function(u){u.selectMore(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Left",mac:"Ctrl-Alt-Shift-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextAfter",description:"Select next after",exec:function(u){u.selectMore(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"toggleSplitSelectionIntoLines",description:"Split selection into lines",exec:function(u){u.multiSelect.rangeCount>1?u.multiSelect.joinSelections():u.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Alt-L",mac:"Ctrl-Alt-L"},readOnly:!0},{name:"splitSelectionIntoLines",description:"Split into lines",exec:function(u){u.multiSelect.splitIntoLines()},readOnly:!0},{name:"alignCursors",description:"Align cursors",exec:function(u){u.alignCursors()},bindKey:{win:"Ctrl-Alt-A",mac:"Ctrl-Alt-A"},scrollIntoView:"cursor"},{name:"findAll",description:"Find all",exec:function(u){u.findAll()},bindKey:{win:"Ctrl-Alt-K",mac:"Ctrl-Alt-G"},scrollIntoView:"cursor",readOnly:!0}],t.multiSelectCommands=[{name:"singleSelection",description:"Single selection",bindKey:"esc",exec:function(u){u.exitMultiSelectMode()},scrollIntoView:"cursor",readOnly:!0,isAvailable:function(u){return u&&u.inMultiSelectMode}}];var d=e("../keyboard/hash_handler").HashHandler;t.keyboardHandler=new d(t.multiSelectCommands)});ace.define("ace/multi_select",["require","exports","module","ace/range_list","ace/range","ace/selection","ace/mouse/multi_select_handler","ace/lib/event","ace/lib/lang","ace/commands/multi_select_commands","ace/search","ace/edit_session","ace/editor","ace/config"],function(e,t,r){var d=e("./range_list").RangeList,u=e("./range").Range,g=e("./selection").Selection,a=e("./mouse/multi_select_handler").onMouseDown,p=e("./lib/event"),o=e("./lib/lang"),i=e("./commands/multi_select_commands");t.commands=i.defaultCommands.concat(i.multiSelectCommands);var n=e("./search").Search,l=new n;function s(x,A,S){return l.$options.wrap=!0,l.$options.needle=A,l.$options.backwards=S==-1,l.find(x)}var c=e("./edit_session").EditSession;(function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}).call(c.prototype),function(){this.ranges=null,this.rangeList=null,this.addRange=function(x,A){if(x){if(!this.inMultiSelectMode&&this.rangeCount===0){var S=this.toOrientedRange();if(this.rangeList.add(S),this.rangeList.add(x),this.rangeList.ranges.length!=2)return this.rangeList.removeAll(),A||this.fromOrientedRange(x);this.rangeList.removeAll(),this.rangeList.add(S),this.$onAddRange(S)}x.cursor||(x.cursor=x.end);var f=this.rangeList.add(x);return this.$onAddRange(x),f.length&&this.$onRemoveRange(f),this.rangeCount>1&&!this.inMultiSelectMode&&(this._signal("multiSelect"),this.inMultiSelectMode=!0,this.session.$undoSelect=!1,this.rangeList.attach(this.session)),A||this.fromOrientedRange(x)}},this.toSingleRange=function(x){x=x||this.ranges[0];var A=this.rangeList.removeAll();A.length&&this.$onRemoveRange(A),x&&this.fromOrientedRange(x)},this.substractPoint=function(x){var A=this.rangeList.substractPoint(x);if(A)return this.$onRemoveRange(A),A[0]},this.mergeOverlappingRanges=function(){var x=this.rangeList.merge();x.length&&this.$onRemoveRange(x)},this.$onAddRange=function(x){this.rangeCount=this.rangeList.ranges.length,this.ranges.unshift(x),this._signal("addRange",{range:x})},this.$onRemoveRange=function(x){if(this.rangeCount=this.rangeList.ranges.length,this.rangeCount==1&&this.inMultiSelectMode){var A=this.rangeList.ranges.pop();x.push(A),this.rangeCount=0}for(var S=x.length;S--;){var f=this.ranges.indexOf(x[S]);this.ranges.splice(f,1)}this._signal("removeRange",{ranges:x}),this.rangeCount===0&&this.inMultiSelectMode&&(this.inMultiSelectMode=!1,this._signal("singleSelect"),this.session.$undoSelect=!0,this.rangeList.detach(this.session)),A=A||this.ranges[0],A&&!A.isEqual(this.getRange())&&this.fromOrientedRange(A)},this.$initRangeList=function(){this.rangeList||(this.rangeList=new d,this.ranges=[],this.rangeCount=0)},this.getAllRanges=function(){return this.rangeCount?this.rangeList.ranges.concat():[this.getRange()]},this.splitIntoLines=function(){for(var x=this.ranges.length?this.ranges:[this.getRange()],A=[],S=0;S<x.length;S++){var f=x[S],L=f.start.row,$=f.end.row;if(L===$)A.push(f.clone());else{for(A.push(new u(L,f.start.column,L,this.session.getLine(L).length));++L<$;)A.push(this.getLineRange(L,!0));A.push(new u($,0,$,f.end.column))}S==0&&!this.isBackwards()&&(A=A.reverse())}this.toSingleRange();for(var S=A.length;S--;)this.addRange(A[S])},this.joinSelections=function(){var x=this.rangeList.ranges,A=x[x.length-1],S=u.fromPoints(x[0].start,A.end);this.toSingleRange(),this.setSelectionRange(S,A.cursor==A.start)},this.toggleBlockSelection=function(){if(this.rangeCount>1){var x=this.rangeList.ranges,A=x[x.length-1],S=u.fromPoints(x[0].start,A.end);this.toSingleRange(),this.setSelectionRange(S,A.cursor==A.start)}else{var f=this.session.documentToScreenPosition(this.cursor),L=this.session.documentToScreenPosition(this.anchor),$=this.rectangularRangeBlock(f,L);$.forEach(this.addRange,this)}},this.rectangularRangeBlock=function(x,A,S){var f=[],L=x.column<A.column;if(L)var $=x.column,T=A.column,C=x.offsetX,w=A.offsetX;else var $=A.column,T=x.column,C=A.offsetX,w=x.offsetX;var y=x.row<A.row;if(y)var b=x.row,_=A.row;else var b=A.row,_=x.row;$<0&&($=0),b<0&&(b=0),b==_&&(S=!0);for(var E,R=b;R<=_;R++){var M=u.fromPoints(this.session.screenToDocumentPosition(R,$,C),this.session.screenToDocumentPosition(R,T,w));if(M.isEmpty()){if(E&&h(M.end,E))break;E=M.end}M.cursor=L?M.start:M.end,f.push(M)}if(y&&f.reverse(),!S){for(var I=f.length-1;f[I].isEmpty()&&I>0;)I--;if(I>0)for(var P=0;f[P].isEmpty();)P++;for(var O=I;O>=P;O--)f[O].isEmpty()&&f.splice(O,1)}return f}}.call(g.prototype);var m=e("./editor").Editor;(function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.addSelectionMarker=function(x){x.cursor||(x.cursor=x.end);var A=this.getSelectionStyle();return x.marker=this.session.addMarker(x,"ace_selection",A),this.session.$selectionMarkers.push(x),this.session.selectionMarkerCount=this.session.$selectionMarkers.length,x},this.removeSelectionMarker=function(x){if(x.marker){this.session.removeMarker(x.marker);var A=this.session.$selectionMarkers.indexOf(x);A!=-1&&this.session.$selectionMarkers.splice(A,1),this.session.selectionMarkerCount=this.session.$selectionMarkers.length}},this.removeSelectionMarkers=function(x){for(var A=this.session.$selectionMarkers,S=x.length;S--;){var f=x[S];if(f.marker){this.session.removeMarker(f.marker);var L=A.indexOf(f);L!=-1&&A.splice(L,1)}}this.session.selectionMarkerCount=A.length},this.$onAddRange=function(x){this.addSelectionMarker(x.range),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onRemoveRange=function(x){this.removeSelectionMarkers(x.ranges),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onMultiSelect=function(x){this.inMultiSelectMode||(this.inMultiSelectMode=!0,this.setStyle("ace_multiselect"),this.keyBinding.addKeyboardHandler(i.keyboardHandler),this.commands.setDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers())},this.$onSingleSelect=function(x){this.session.multiSelect.inVirtualMode||(this.inMultiSelectMode=!1,this.unsetStyle("ace_multiselect"),this.keyBinding.removeKeyboardHandler(i.keyboardHandler),this.commands.removeDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers(),this._emit("changeSelection"))},this.$onMultiSelectExec=function(x){var A=x.command,S=x.editor;if(S.multiSelect){if(A.multiSelectAction)A.multiSelectAction=="forEach"?f=S.forEachSelection(A,x.args):A.multiSelectAction=="forEachLine"?f=S.forEachSelection(A,x.args,!0):A.multiSelectAction=="single"?(S.exitMultiSelectMode(),f=A.exec(S,x.args||{})):f=A.multiSelectAction(S,x.args||{});else{var f=A.exec(S,x.args||{});S.multiSelect.addRange(S.multiSelect.toOrientedRange()),S.multiSelect.mergeOverlappingRanges()}return f}},this.forEachSelection=function(x,A,S){if(!this.inVirtualSelectionMode){var f=S&&S.keepOrder,L=S==!0||S&&S.$byLines,$=this.session,T=this.selection,C=T.rangeList,w=(f?T:C).ranges,y;if(!w.length)return x.exec?x.exec(this,A||{}):x(this,A||{});var b=T._eventRegistry;T._eventRegistry={};var _=new g($);this.inVirtualSelectionMode=!0;for(var E=w.length;E--;){if(L)for(;E>0&&w[E].start.row==w[E-1].end.row;)E--;_.fromOrientedRange(w[E]),_.index=E,this.selection=$.selection=_;var R=x.exec?x.exec(this,A||{}):x(this,A||{});!y&&R!==void 0&&(y=R),_.toOrientedRange(w[E])}_.detach(),this.selection=$.selection=T,this.inVirtualSelectionMode=!1,T._eventRegistry=b,T.mergeOverlappingRanges(),T.ranges[0]&&T.fromOrientedRange(T.ranges[0]);var M=this.renderer.$scrollAnimation;return this.onCursorChange(),this.onSelectionChange(),M&&M.from==M.to&&this.renderer.animateScrolling(M.from),y}},this.exitMultiSelectMode=function(){!this.inMultiSelectMode||this.inVirtualSelectionMode||this.multiSelect.toSingleRange()},this.getSelectedText=function(){var x="";if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){for(var A=this.multiSelect.rangeList.ranges,S=[],f=0;f<A.length;f++)S.push(this.session.getTextRange(A[f]));var L=this.session.getDocument().getNewLineCharacter();x=S.join(L),x.length==(S.length-1)*L.length&&(x="")}else this.selection.isEmpty()||(x=this.session.getTextRange(this.getSelectionRange()));return x},this.$checkMultiselectChange=function(x,A){if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){var S=this.multiSelect.ranges[0];if(this.multiSelect.isEmpty()&&A==this.multiSelect.anchor)return;var f=A==this.multiSelect.anchor?S.cursor==S.start?S.end:S.start:S.cursor;f.row!=A.row||this.session.$clipPositionToDocument(f.row,f.column).column!=A.column?this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange()):this.multiSelect.mergeOverlappingRanges()}},this.findAll=function(x,A,S){if(A=A||{},A.needle=x||A.needle,A.needle==null){var f=this.selection.isEmpty()?this.selection.getWordRange():this.selection.getRange();A.needle=this.session.getTextRange(f)}this.$search.set(A);var L=this.$search.findAll(this.session);if(!L.length)return 0;var $=this.multiSelect;S||$.toSingleRange(L[0]);for(var T=L.length;T--;)$.addRange(L[T],!0);return f&&$.rangeList.rangeAtPoint(f.start)&&$.addRange(f,!0),L.length},this.selectMoreLines=function(x,A){var S=this.selection.toOrientedRange(),f=S.cursor==S.end,L=this.session.documentToScreenPosition(S.cursor);this.selection.$desiredColumn&&(L.column=this.selection.$desiredColumn);var $=this.session.screenToDocumentPosition(L.row+x,L.column);if(S.isEmpty())var C=$;else var T=this.session.documentToScreenPosition(f?S.end:S.start),C=this.session.screenToDocumentPosition(T.row+x,T.column);if(f){var w=u.fromPoints($,C);w.cursor=w.start}else{var w=u.fromPoints(C,$);w.cursor=w.end}if(w.desiredColumn=L.column,!this.selection.inMultiSelectMode)this.selection.addRange(S);else if(A)var y=S.cursor;this.selection.addRange(w),y&&this.selection.substractPoint(y)},this.transposeSelections=function(x){for(var A=this.session,S=A.multiSelect,f=S.ranges,L=f.length;L--;){var $=f[L];if($.isEmpty()){var T=A.getWordRange($.start.row,$.start.column);$.start.row=T.start.row,$.start.column=T.start.column,$.end.row=T.end.row,$.end.column=T.end.column}}S.mergeOverlappingRanges();for(var C=[],L=f.length;L--;){var $=f[L];C.unshift(A.getTextRange($))}x<0?C.unshift(C.pop()):C.push(C.shift());for(var L=f.length;L--;){var $=f[L],w=$.clone();A.replace($,C[L]),$.start.row=w.start.row,$.start.column=w.start.column}S.fromOrientedRange(S.ranges[0])},this.selectMore=function(x,A,S){var f=this.session,L=f.multiSelect,$=L.toOrientedRange();if(!($.isEmpty()&&($=f.getWordRange($.start.row,$.start.column),$.cursor=x==-1?$.start:$.end,this.multiSelect.addRange($),S))){var T=f.getTextRange($),C=s(f,T,x);C&&(C.cursor=x==-1?C.start:C.end,this.session.unfold(C),this.multiSelect.addRange(C),this.renderer.scrollCursorIntoView(null,.5)),A&&this.multiSelect.substractPoint($.cursor)}},this.alignCursors=function(){var x=this.session,A=x.multiSelect,S=A.ranges,f=-1,L=S.filter(function(I){if(I.cursor.row==f)return!0;f=I.cursor.row});if(!S.length||L.length==S.length-1){var $=this.selection.getRange(),T=$.start.row,C=$.end.row,w=T==C;if(w){var y=this.session.getLength(),b;do b=this.session.getLine(C);while(/[=:]/.test(b)&&++C<y);do b=this.session.getLine(T);while(/[=:]/.test(b)&&--T>0);T<0&&(T=0),C>=y&&(C=y-1)}var _=this.session.removeFullLines(T,C);_=this.$reAlignText(_,w),this.session.insert({row:T,column:0},_.join(`
`)+`
`),w||($.start.column=0,$.end.column=_[_.length-1].length),this.selection.setRange($)}else{L.forEach(function(I){A.substractPoint(I.cursor)});var E=0,R=1/0,M=S.map(function(I){var P=I.cursor,O=x.getLine(P.row),N=O.substr(P.column).search(/\S/g);return N==-1&&(N=0),P.column>E&&(E=P.column),N<R&&(R=N),N});S.forEach(function(I,P){var O=I.cursor,N=E-O.column,D=M[P]-R;N>D?x.insert(O,o.stringRepeat(" ",N-D)):x.remove(new u(O.row,O.column,O.row,O.column-N+D)),I.start.column=I.end.column=E,I.start.row=I.end.row=O.row,I.cursor=I.end}),A.fromOrientedRange(S[0]),this.renderer.updateCursor(),this.renderer.updateBackMarkers()}},this.$reAlignText=function(x,A){var S=!0,f=!0,L,$,T;return x.map(function(_){var E=_.match(/(\s*)(.*?)(\s*)([=:].*)/);return E?L==null?(L=E[1].length,$=E[2].length,T=E[3].length,E):(L+$+T!=E[1].length+E[2].length+E[3].length&&(f=!1),L!=E[1].length&&(S=!1),L>E[1].length&&(L=E[1].length),$<E[2].length&&($=E[2].length),T>E[3].length&&(T=E[3].length),E):[_]}).map(A?w:S?f?y:w:b);function C(_){return o.stringRepeat(" ",_)}function w(_){return _[2]?C(L)+_[2]+C($-_[2].length+T)+_[4].replace(/^([=:])\s+/,"$1 "):_[0]}function y(_){return _[2]?C(L+$-_[2].length)+_[2]+C(T)+_[4].replace(/^([=:])\s+/,"$1 "):_[0]}function b(_){return _[2]?C(L)+_[2]+C(T)+_[4].replace(/^([=:])\s+/,"$1 "):_[0]}}}).call(m.prototype);function h(x,A){return x.row==A.row&&x.column==A.column}t.onSessionChange=function(x){var A=x.session;A&&!A.multiSelect&&(A.$selectionMarkers=[],A.selection.$initRangeList(),A.multiSelect=A.selection),this.multiSelect=A&&A.multiSelect;var S=x.oldSession;S&&(S.multiSelect.off("addRange",this.$onAddRange),S.multiSelect.off("removeRange",this.$onRemoveRange),S.multiSelect.off("multiSelect",this.$onMultiSelect),S.multiSelect.off("singleSelect",this.$onSingleSelect),S.multiSelect.lead.off("change",this.$checkMultiselectChange),S.multiSelect.anchor.off("change",this.$checkMultiselectChange)),A&&(A.multiSelect.on("addRange",this.$onAddRange),A.multiSelect.on("removeRange",this.$onRemoveRange),A.multiSelect.on("multiSelect",this.$onMultiSelect),A.multiSelect.on("singleSelect",this.$onSingleSelect),A.multiSelect.lead.on("change",this.$checkMultiselectChange),A.multiSelect.anchor.on("change",this.$checkMultiselectChange)),A&&this.inMultiSelectMode!=A.selection.inMultiSelectMode&&(A.selection.inMultiSelectMode?this.$onMultiSelect():this.$onSingleSelect())};function v(x){x.$multiselectOnSessionChange||(x.$onAddRange=x.$onAddRange.bind(x),x.$onRemoveRange=x.$onRemoveRange.bind(x),x.$onMultiSelect=x.$onMultiSelect.bind(x),x.$onSingleSelect=x.$onSingleSelect.bind(x),x.$multiselectOnSessionChange=t.onSessionChange.bind(x),x.$checkMultiselectChange=x.$checkMultiselectChange.bind(x),x.$multiselectOnSessionChange(x),x.on("changeSession",x.$multiselectOnSessionChange),x.on("mousedown",a),x.commands.addCommands(i.defaultCommands),k(x))}function k(x){if(!x.textInput)return;var A=x.textInput.getElement(),S=!1;p.addListener(A,"keydown",function(L){var $=L.keyCode==18&&!(L.ctrlKey||L.shiftKey||L.metaKey);x.$blockSelectEnabled&&$?S||(x.renderer.setMouseCursor("crosshair"),S=!0):S&&f()},x),p.addListener(A,"keyup",f,x),p.addListener(A,"blur",f,x);function f(L){S&&(x.renderer.setMouseCursor(""),S=!1)}}t.MultiSelect=v,e("./config").defineOptions(m.prototype,"editor",{enableMultiselect:{set:function(x){v(this),x?this.on("mousedown",a):this.off("mousedown",a)},value:!0},enableBlockSelect:{set:function(x){this.$blockSelectEnabled=x},value:!0}})});ace.define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"],function(e,t,r){"use strict";var d=e("../../range").Range,u=t.FoldMode=function(){};(function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(g,a,p){var o=g.getLine(p);return this.foldingStartMarker.test(o)?"start":a=="markbeginend"&&this.foldingStopMarker&&this.foldingStopMarker.test(o)?"end":""},this.getFoldWidgetRange=function(g,a,p){return null},this.indentationBlock=function(g,a,p){var o=/\S/,i=g.getLine(a),n=i.search(o);if(n!=-1){for(var l=p||i.length,s=g.getLength(),c=a,m=a;++a<s;){var h=g.getLine(a).search(o);if(h!=-1){if(h<=n){var v=g.getTokenAt(a,0);if(!v||v.type!=="string")break}m=a}}if(m>c){var k=g.getLine(m).length;return new d(c,l,m,k)}}},this.openingBracketBlock=function(g,a,p,o,i){var n={row:p,column:o+1},l=g.$findClosingBracket(a,n,i);if(l){var s=g.foldWidgets[l.row];return s==null&&(s=g.getFoldWidget(l.row)),s=="start"&&l.row>n.row&&(l.row--,l.column=g.getLine(l.row).length),d.fromPoints(n,l)}},this.closingBracketBlock=function(g,a,p,o,i){var n={row:p,column:o},l=g.$findOpeningBracket(a,n);if(l)return l.column++,n.column--,d.fromPoints(l,n)}}).call(u.prototype)});ace.define("ace/ext/error_marker",["require","exports","module","ace/line_widgets","ace/lib/dom","ace/range","ace/config"],function(e,t,r){"use strict";var d=e("../line_widgets").LineWidgets,u=e("../lib/dom"),g=e("../range").Range,a=e("../config").nls;function p(i,n,l){for(var s=0,c=i.length-1;s<=c;){var m=s+c>>1,h=l(n,i[m]);if(h>0)s=m+1;else if(h<0)c=m-1;else return m}return-(s+1)}function o(i,n,l){var s=i.getAnnotations().sort(g.comparePoints);if(s.length){var c=p(s,{row:n,column:-1},g.comparePoints);c<0&&(c=-c-1),c>=s.length?c=l>0?0:s.length-1:c===0&&l<0&&(c=s.length-1);var m=s[c];if(!(!m||!l)){if(m.row===n){do m=s[c+=l];while(m&&m.row===n);if(!m)return s.slice()}var h=[];n=m.row;do h[l<0?"unshift":"push"](m),m=s[c+=l];while(m&&m.row==n);return h.length&&h}}}t.showErrorMarker=function(i,n){var l=i.session;l.widgetManager||(l.widgetManager=new d(l),l.widgetManager.attach(i));var s=i.getCursorPosition(),c=s.row,m=l.widgetManager.getWidgetsAtRow(c).filter(function($){return $.type=="errorMarker"})[0];m?m.destroy():c-=n;var h=o(l,c,n),v;if(h){var k=h[0];s.column=(k.pos&&typeof k.column!="number"?k.pos.sc:k.column)||0,s.row=k.row,v=i.renderer.$gutterLayer.$annotations[s.row]}else{if(m)return;v={displayText:[a("error-marker.good-state","Looks good!")],className:"ace_ok"}}i.session.unfold(s.row),i.selection.moveToPosition(s);var x={row:s.row,fixedWidth:!0,coverGutter:!0,el:u.createElement("div"),type:"errorMarker"},A=x.el.appendChild(u.createElement("div")),S=x.el.appendChild(u.createElement("div"));S.className="error_widget_arrow "+v.className;var f=i.renderer.$cursorLayer.getPixelPosition(s).left;S.style.left=f+i.renderer.gutterWidth-5+"px",x.el.className="error_widget_wrapper",A.className="error_widget "+v.className,v.displayText.forEach(function($,T){A.appendChild(u.createTextNode($)),T<v.displayText.length-1&&A.appendChild(u.createElement("br"))}),A.appendChild(u.createElement("div"));var L=function($,T,C){if(T===0&&(C==="esc"||C==="return"))return x.destroy(),{command:"null"}};x.destroy=function(){i.$mouseHandler.isMousePressed||(i.keyBinding.removeKeyboardHandler(L),l.widgetManager.removeLineWidget(x),i.off("changeSelection",x.destroy),i.off("changeSession",x.destroy),i.off("mouseup",x.destroy),i.off("change",x.destroy))},i.keyBinding.addKeyboardHandler(L),i.on("changeSelection",x.destroy),i.on("changeSession",x.destroy),i.on("mouseup",x.destroy),i.on("change",x.destroy),i.session.widgetManager.addLineWidget(x),x.el.onmousedown=i.focus.bind(i),i.renderer.scrollCursorIntoView(null,.5,{bottom:x.el.offsetHeight})},u.importCssString(`
    .error_widget_wrapper {
        background: inherit;
        color: inherit;
        border:none
    }
    .error_widget {
        border-top: solid 2px;
        border-bottom: solid 2px;
        margin: 5px 0;
        padding: 10px 40px;
        white-space: pre-wrap;
    }
    .error_widget.ace_error, .error_widget_arrow.ace_error{
        border-color: #ff5a5a
    }
    .error_widget.ace_warning, .error_widget_arrow.ace_warning{
        border-color: #F1D817
    }
    .error_widget.ace_info, .error_widget_arrow.ace_info{
        border-color: #5a5a5a
    }
    .error_widget.ace_ok, .error_widget_arrow.ace_ok{
        border-color: #5aaa5a
    }
    .error_widget_arrow {
        position: absolute;
        border: solid 5px;
        border-top-color: transparent!important;
        border-right-color: transparent!important;
        border-left-color: transparent!important;
        top: -5px;
    }
`,"error_marker.css",!1)});ace.define("ace/ace",["require","exports","module","ace/lib/dom","ace/range","ace/editor","ace/edit_session","ace/undomanager","ace/virtual_renderer","ace/worker/worker_client","ace/keyboard/hash_handler","ace/placeholder","ace/multi_select","ace/mode/folding/fold_mode","ace/theme/textmate","ace/ext/error_marker","ace/config","ace/loader_build"],function(e,t,r){"use strict";e("./loader_build")(t);var d=e("./lib/dom"),u=e("./range").Range,g=e("./editor").Editor,a=e("./edit_session").EditSession,p=e("./undomanager").UndoManager,o=e("./virtual_renderer").VirtualRenderer;e("./worker/worker_client"),e("./keyboard/hash_handler"),e("./placeholder"),e("./multi_select"),e("./mode/folding/fold_mode"),e("./theme/textmate"),e("./ext/error_marker"),t.config=e("./config"),t.edit=function(i,n){if(typeof i=="string"){var l=i;if(i=document.getElementById(l),!i)throw new Error("ace.edit can't find div #"+l)}if(i&&i.env&&i.env.editor instanceof g)return i.env.editor;var s="";if(i&&/input|textarea/i.test(i.tagName)){var c=i;s=c.value,i=d.createElement("pre"),c.parentNode.replaceChild(i,c)}else i&&(s=i.textContent,i.innerHTML="");var m=t.createEditSession(s),h=new g(new o(i),m,n),v={document:m,editor:h,onResize:h.resize.bind(h,null)};return c&&(v.textarea=c),h.on("destroy",function(){v.editor.container.env=null}),h.container.env=h.env=v,h},t.createEditSession=function(i,n){var l=new a(i,n);return l.setUndoManager(new p),l},t.Range=u,t.Editor=g,t.EditSession=a,t.UndoManager=p,t.VirtualRenderer=o,t.version=t.config.version});(function(){ace.require(["ace/ace"],function(e){e&&(e.config.init(!0),e.define=ace.define);var t=function(){return this}();!t&&typeof window<"u"&&(t=window),!t&&typeof self<"u"&&(t=self),t.ace||(t.ace=e);for(var r in e)e.hasOwnProperty(r)&&(t.ace[r]=e[r]);t.ace.default=t.ace,typeof ha=="object"&&typeof mp=="object"&&ha&&(ha.exports=t.ace)})})()});var hp=In((Xs,qs)=>{(function(e,t){typeof Xs=="object"&&typeof qs<"u"?qs.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis<"u"?globalThis:e||self,e.DOMPurify=t())})(Xs,function(){"use strict";let{entries:e,setPrototypeOf:t,isFrozen:r,getPrototypeOf:d,getOwnPropertyDescriptor:u}=Object,{freeze:g,seal:a,create:p}=Object,{apply:o,construct:i}=typeof Reflect<"u"&&Reflect;g||(g=function(V){return V}),a||(a=function(V){return V}),o||(o=function(V,st,it){return V.apply(st,it)}),i||(i=function(V,st){return new V(...st)});let n=L(Array.prototype.forEach),l=L(Array.prototype.pop),s=L(Array.prototype.push),c=L(String.prototype.toLowerCase),m=L(String.prototype.toString),h=L(String.prototype.match),v=L(String.prototype.replace),k=L(String.prototype.indexOf),x=L(String.prototype.trim),A=L(Object.prototype.hasOwnProperty),S=L(RegExp.prototype.test),f=$(TypeError);function L(K){return function(V){for(var st=arguments.length,it=new Array(st>1?st-1:0),bt=1;bt<st;bt++)it[bt-1]=arguments[bt];return o(K,V,it)}}function $(K){return function(){for(var V=arguments.length,st=new Array(V),it=0;it<V;it++)st[it]=arguments[it];return i(K,st)}}function T(K,V){let st=arguments.length>2&&arguments[2]!==void 0?arguments[2]:c;t&&t(K,null);let it=V.length;for(;it--;){let bt=V[it];if(typeof bt=="string"){let U=st(bt);U!==bt&&(r(V)||(V[it]=U),bt=U)}K[bt]=!0}return K}function C(K){for(let V=0;V<K.length;V++)A(K,V)||(K[V]=null);return K}function w(K){let V=p(null);for(let[st,it]of e(K))A(K,st)&&(Array.isArray(it)?V[st]=C(it):it&&typeof it=="object"&&it.constructor===Object?V[st]=w(it):V[st]=it);return V}function y(K,V){for(;K!==null;){let it=u(K,V);if(it){if(it.get)return L(it.get);if(typeof it.value=="function")return L(it.value)}K=d(K)}function st(){return null}return st}let b=g(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),_=g(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),E=g(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),R=g(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),M=g(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),I=g(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),P=g(["#text"]),O=g(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),N=g(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),D=g(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),F=g(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),z=a(/\{\{[\w\W]*|[\w\W]*\}\}/gm),W=a(/<%[\w\W]*|[\w\W]*%>/gm),j=a(/\${[\w\W]*}/gm),Z=a(/^data-[\-\w.\u00B7-\uFFFF]/),Y=a(/^aria-[\-\w]+$/),q=a(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),nt=a(/^(?:\w+script|data):/i),ot=a(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),wt=a(/^html$/i),Et=a(/^[a-z][.\w]*(-[.\w]+)+$/i);var vt=Object.freeze({__proto__:null,MUSTACHE_EXPR:z,ERB_EXPR:W,TMPLIT_EXPR:j,DATA_ATTR:Z,ARIA_ATTR:Y,IS_ALLOWED_URI:q,IS_SCRIPT_OR_DATA:nt,ATTR_WHITESPACE:ot,DOCTYPE_NAME:wt,CUSTOM_ELEMENT:Et});let H={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},J=function(){return typeof window>"u"?null:window},at=function(V,st){if(typeof V!="object"||typeof V.createPolicy!="function")return null;let it=null,bt="data-tt-policy-suffix";st&&st.hasAttribute(bt)&&(it=st.getAttribute(bt));let U="dompurify"+(it?"#"+it:"");try{return V.createPolicy(U,{createHTML(G){return G},createScriptURL(G){return G}})}catch{return console.warn("TrustedTypes policy "+U+" could not be created."),null}};function tt(){let K=arguments.length>0&&arguments[0]!==void 0?arguments[0]:J(),V=ut=>tt(ut);if(V.version="3.1.6",V.removed=[],!K||!K.document||K.document.nodeType!==H.document)return V.isSupported=!1,V;let{document:st}=K,it=st,bt=it.currentScript,{DocumentFragment:U,HTMLTemplateElement:G,Node:rt,Element:ft,NodeFilter:kt,NamedNodeMap:Rt=K.NamedNodeMap||K.MozNamedAttrMap,HTMLFormElement:Mt,DOMParser:Ot,trustedTypes:Pt}=K,Lt=ft.prototype,Yt=y(Lt,"cloneNode"),er=y(Lt,"remove"),ge=y(Lt,"nextSibling"),zi=y(Lt,"childNodes"),rr=y(Lt,"parentNode");if(typeof G=="function"){let ut=st.createElement("template");ut.content&&ut.content.ownerDocument&&(st=ut.content.ownerDocument)}let Ae,_o="",{implementation:ti,createNodeIterator:Bi,createDocumentFragment:Eo,getElementsByTagName:he}=st,{importNode:ae}=it,Zt={};V.isSupported=typeof e=="function"&&typeof rr=="function"&&ti&&ti.createHTMLDocument!==void 0;let{MUSTACHE_EXPR:Le,ERB_EXPR:ve,TMPLIT_EXPR:se,DATA_ATTR:hr,ARIA_ATTR:br,IS_SCRIPT_OR_DATA:no,ATTR_WHITESPACE:Zl,CUSTOM_ELEMENT:Om}=vt,{IS_ALLOWED_URI:td}=vt,ye=null,ed=T({},[...b,..._,...E,...M,...P]),xe=null,rd=T({},[...O,...N,...D,...F]),le=Object.seal(p(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Hi=null,Ba=null,od=!0,Ha=!0,id=!1,nd=!0,ei=!1,Ua=!0,So=!1,ja=!1,Wa=!1,ri=!1,An=!1,Ln=!1,ad=!0,sd=!1,Pm="user-content-",Va=!0,Ui=!1,oi={},ii=null,ld=T({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),dd=null,cd=T({},["audio","video","img","source","image","track"]),Ga=null,pd=T({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),$n="http://www.w3.org/1998/Math/MathML",Rn="http://www.w3.org/2000/svg",Br="http://www.w3.org/1999/xhtml",ni=Br,Ka=!1,Ya=null,Dm=T({},[$n,Rn,Br],m),ji=null,Nm=["application/xhtml+xml","text/html"],Fm="text/html",ke=null,ai=null,zm=st.createElement("form"),ud=function(B){return B instanceof RegExp||B instanceof Function},Ja=function(){let B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(ai&&ai===B)){if((!B||typeof B!="object")&&(B={}),B=w(B),ji=Nm.indexOf(B.PARSER_MEDIA_TYPE)===-1?Fm:B.PARSER_MEDIA_TYPE,ke=ji==="application/xhtml+xml"?m:c,ye=A(B,"ALLOWED_TAGS")?T({},B.ALLOWED_TAGS,ke):ed,xe=A(B,"ALLOWED_ATTR")?T({},B.ALLOWED_ATTR,ke):rd,Ya=A(B,"ALLOWED_NAMESPACES")?T({},B.ALLOWED_NAMESPACES,m):Dm,Ga=A(B,"ADD_URI_SAFE_ATTR")?T(w(pd),B.ADD_URI_SAFE_ATTR,ke):pd,dd=A(B,"ADD_DATA_URI_TAGS")?T(w(cd),B.ADD_DATA_URI_TAGS,ke):cd,ii=A(B,"FORBID_CONTENTS")?T({},B.FORBID_CONTENTS,ke):ld,Hi=A(B,"FORBID_TAGS")?T({},B.FORBID_TAGS,ke):{},Ba=A(B,"FORBID_ATTR")?T({},B.FORBID_ATTR,ke):{},oi=A(B,"USE_PROFILES")?B.USE_PROFILES:!1,od=B.ALLOW_ARIA_ATTR!==!1,Ha=B.ALLOW_DATA_ATTR!==!1,id=B.ALLOW_UNKNOWN_PROTOCOLS||!1,nd=B.ALLOW_SELF_CLOSE_IN_ATTR!==!1,ei=B.SAFE_FOR_TEMPLATES||!1,Ua=B.SAFE_FOR_XML!==!1,So=B.WHOLE_DOCUMENT||!1,ri=B.RETURN_DOM||!1,An=B.RETURN_DOM_FRAGMENT||!1,Ln=B.RETURN_TRUSTED_TYPE||!1,Wa=B.FORCE_BODY||!1,ad=B.SANITIZE_DOM!==!1,sd=B.SANITIZE_NAMED_PROPS||!1,Va=B.KEEP_CONTENT!==!1,Ui=B.IN_PLACE||!1,td=B.ALLOWED_URI_REGEXP||q,ni=B.NAMESPACE||Br,le=B.CUSTOM_ELEMENT_HANDLING||{},B.CUSTOM_ELEMENT_HANDLING&&ud(B.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(le.tagNameCheck=B.CUSTOM_ELEMENT_HANDLING.tagNameCheck),B.CUSTOM_ELEMENT_HANDLING&&ud(B.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(le.attributeNameCheck=B.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),B.CUSTOM_ELEMENT_HANDLING&&typeof B.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(le.allowCustomizedBuiltInElements=B.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),ei&&(Ha=!1),An&&(ri=!0),oi&&(ye=T({},P),xe=[],oi.html===!0&&(T(ye,b),T(xe,O)),oi.svg===!0&&(T(ye,_),T(xe,N),T(xe,F)),oi.svgFilters===!0&&(T(ye,E),T(xe,N),T(xe,F)),oi.mathMl===!0&&(T(ye,M),T(xe,D),T(xe,F))),B.ADD_TAGS&&(ye===ed&&(ye=w(ye)),T(ye,B.ADD_TAGS,ke)),B.ADD_ATTR&&(xe===rd&&(xe=w(xe)),T(xe,B.ADD_ATTR,ke)),B.ADD_URI_SAFE_ATTR&&T(Ga,B.ADD_URI_SAFE_ATTR,ke),B.FORBID_CONTENTS&&(ii===ld&&(ii=w(ii)),T(ii,B.FORBID_CONTENTS,ke)),Va&&(ye["#text"]=!0),So&&T(ye,["html","head","body"]),ye.table&&(T(ye,["tbody"]),delete Hi.tbody),B.TRUSTED_TYPES_POLICY){if(typeof B.TRUSTED_TYPES_POLICY.createHTML!="function")throw f('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof B.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw f('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');Ae=B.TRUSTED_TYPES_POLICY,_o=Ae.createHTML("")}else Ae===void 0&&(Ae=at(Pt,bt)),Ae!==null&&typeof _o=="string"&&(_o=Ae.createHTML(""));g&&g(B),ai=B}},md=T({},["mi","mo","mn","ms","mtext"]),gd=T({},["foreignobject","annotation-xml"]),Bm=T({},["title","style","font","a","script"]),hd=T({},[..._,...E,...R]),bd=T({},[...M,...I]),Hm=function(B){let et=rr(B);(!et||!et.tagName)&&(et={namespaceURI:ni,tagName:"template"});let dt=c(B.tagName),Jt=c(et.tagName);return Ya[B.namespaceURI]?B.namespaceURI===Rn?et.namespaceURI===Br?dt==="svg":et.namespaceURI===$n?dt==="svg"&&(Jt==="annotation-xml"||md[Jt]):!!hd[dt]:B.namespaceURI===$n?et.namespaceURI===Br?dt==="math":et.namespaceURI===Rn?dt==="math"&&gd[Jt]:!!bd[dt]:B.namespaceURI===Br?et.namespaceURI===Rn&&!gd[Jt]||et.namespaceURI===$n&&!md[Jt]?!1:!bd[dt]&&(Bm[dt]||!hd[dt]):!!(ji==="application/xhtml+xml"&&Ya[B.namespaceURI]):!1},Ar=function(B){s(V.removed,{element:B});try{rr(B).removeChild(B)}catch{er(B)}},Mn=function(B,et){try{s(V.removed,{attribute:et.getAttributeNode(B),from:et})}catch{s(V.removed,{attribute:null,from:et})}if(et.removeAttribute(B),B==="is"&&!xe[B])if(ri||An)try{Ar(et)}catch{}else try{et.setAttribute(B,"")}catch{}},fd=function(B){let et=null,dt=null;if(Wa)B="<remove></remove>"+B;else{let $e=h(B,/^[\r\n\t ]+/);dt=$e&&$e[0]}ji==="application/xhtml+xml"&&ni===Br&&(B='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+B+"</body></html>");let Jt=Ae?Ae.createHTML(B):B;if(ni===Br)try{et=new Ot().parseFromString(Jt,ji)}catch{}if(!et||!et.documentElement){et=ti.createDocument(ni,"template",null);try{et.documentElement.innerHTML=Ka?_o:Jt}catch{}}let Ie=et.body||et.documentElement;return B&&dt&&Ie.insertBefore(st.createTextNode(dt),Ie.childNodes[0]||null),ni===Br?he.call(et,So?"html":"body")[0]:So?et.documentElement:Ie},vd=function(B){return Bi.call(B.ownerDocument||B,B,kt.SHOW_ELEMENT|kt.SHOW_COMMENT|kt.SHOW_TEXT|kt.SHOW_PROCESSING_INSTRUCTION|kt.SHOW_CDATA_SECTION,null)},wd=function(B){return B instanceof Mt&&(typeof B.nodeName!="string"||typeof B.textContent!="string"||typeof B.removeChild!="function"||!(B.attributes instanceof Rt)||typeof B.removeAttribute!="function"||typeof B.setAttribute!="function"||typeof B.namespaceURI!="string"||typeof B.insertBefore!="function"||typeof B.hasChildNodes!="function")},yd=function(B){return typeof rt=="function"&&B instanceof rt},Hr=function(B,et,dt){Zt[B]&&n(Zt[B],Jt=>{Jt.call(V,et,dt,ai)})},xd=function(B){let et=null;if(Hr("beforeSanitizeElements",B,null),wd(B))return Ar(B),!0;let dt=ke(B.nodeName);if(Hr("uponSanitizeElement",B,{tagName:dt,allowedTags:ye}),B.hasChildNodes()&&!yd(B.firstElementChild)&&S(/<[/\w]/g,B.innerHTML)&&S(/<[/\w]/g,B.textContent)||B.nodeType===H.progressingInstruction||Ua&&B.nodeType===H.comment&&S(/<[/\w]/g,B.data))return Ar(B),!0;if(!ye[dt]||Hi[dt]){if(!Hi[dt]&&_d(dt)&&(le.tagNameCheck instanceof RegExp&&S(le.tagNameCheck,dt)||le.tagNameCheck instanceof Function&&le.tagNameCheck(dt)))return!1;if(Va&&!ii[dt]){let Jt=rr(B)||B.parentNode,Ie=zi(B)||B.childNodes;if(Ie&&Jt){let $e=Ie.length;for(let je=$e-1;je>=0;--je){let Lr=Yt(Ie[je],!0);Lr.__removalCount=(B.__removalCount||0)+1,Jt.insertBefore(Lr,ge(B))}}}return Ar(B),!0}return B instanceof ft&&!Hm(B)||(dt==="noscript"||dt==="noembed"||dt==="noframes")&&S(/<\/no(script|embed|frames)/i,B.innerHTML)?(Ar(B),!0):(ei&&B.nodeType===H.text&&(et=B.textContent,n([Le,ve,se],Jt=>{et=v(et,Jt," ")}),B.textContent!==et&&(s(V.removed,{element:B.cloneNode()}),B.textContent=et)),Hr("afterSanitizeElements",B,null),!1)},kd=function(B,et,dt){if(ad&&(et==="id"||et==="name")&&(dt in st||dt in zm))return!1;if(!(Ha&&!Ba[et]&&S(hr,et))){if(!(od&&S(br,et))){if(!xe[et]||Ba[et]){if(!(_d(B)&&(le.tagNameCheck instanceof RegExp&&S(le.tagNameCheck,B)||le.tagNameCheck instanceof Function&&le.tagNameCheck(B))&&(le.attributeNameCheck instanceof RegExp&&S(le.attributeNameCheck,et)||le.attributeNameCheck instanceof Function&&le.attributeNameCheck(et))||et==="is"&&le.allowCustomizedBuiltInElements&&(le.tagNameCheck instanceof RegExp&&S(le.tagNameCheck,dt)||le.tagNameCheck instanceof Function&&le.tagNameCheck(dt))))return!1}else if(!Ga[et]){if(!S(td,v(dt,Zl,""))){if(!((et==="src"||et==="xlink:href"||et==="href")&&B!=="script"&&k(dt,"data:")===0&&dd[B])){if(!(id&&!S(no,v(dt,Zl,"")))){if(dt)return!1}}}}}}return!0},_d=function(B){return B!=="annotation-xml"&&h(B,Om)},Ed=function(B){Hr("beforeSanitizeAttributes",B,null);let{attributes:et}=B;if(!et)return;let dt={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:xe},Jt=et.length;for(;Jt--;){let Ie=et[Jt],{name:$e,namespaceURI:je,value:Lr}=Ie,Wi=ke($e),ze=$e==="value"?Lr:x(Lr);if(dt.attrName=Wi,dt.attrValue=ze,dt.keepAttr=!0,dt.forceKeepAttr=void 0,Hr("uponSanitizeAttribute",B,dt),ze=dt.attrValue,Ua&&S(/((--!?|])>)|<\/(style|title)/i,ze)){Mn($e,B);continue}if(dt.forceKeepAttr||(Mn($e,B),!dt.keepAttr))continue;if(!nd&&S(/\/>/i,ze)){Mn($e,B);continue}ei&&n([Le,ve,se],Td=>{ze=v(ze,Td," ")});let Sd=ke(B.nodeName);if(kd(Sd,Wi,ze)){if(sd&&(Wi==="id"||Wi==="name")&&(Mn($e,B),ze=Pm+ze),Ae&&typeof Pt=="object"&&typeof Pt.getAttributeType=="function"&&!je)switch(Pt.getAttributeType(Sd,Wi)){case"TrustedHTML":{ze=Ae.createHTML(ze);break}case"TrustedScriptURL":{ze=Ae.createScriptURL(ze);break}}try{je?B.setAttributeNS(je,$e,ze):B.setAttribute($e,ze),wd(B)?Ar(B):l(V.removed)}catch{}}}Hr("afterSanitizeAttributes",B,null)},Um=function ut(B){let et=null,dt=vd(B);for(Hr("beforeSanitizeShadowDOM",B,null);et=dt.nextNode();)Hr("uponSanitizeShadowNode",et,null),!xd(et)&&(et.content instanceof U&&ut(et.content),Ed(et));Hr("afterSanitizeShadowDOM",B,null)};return V.sanitize=function(ut){let B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},et=null,dt=null,Jt=null,Ie=null;if(Ka=!ut,Ka&&(ut="<!-->"),typeof ut!="string"&&!yd(ut))if(typeof ut.toString=="function"){if(ut=ut.toString(),typeof ut!="string")throw f("dirty is not a string, aborting")}else throw f("toString is not a function");if(!V.isSupported)return ut;if(ja||Ja(B),V.removed=[],typeof ut=="string"&&(Ui=!1),Ui){if(ut.nodeName){let Lr=ke(ut.nodeName);if(!ye[Lr]||Hi[Lr])throw f("root node is forbidden and cannot be sanitized in-place")}}else if(ut instanceof rt)et=fd("<!---->"),dt=et.ownerDocument.importNode(ut,!0),dt.nodeType===H.element&&dt.nodeName==="BODY"||dt.nodeName==="HTML"?et=dt:et.appendChild(dt);else{if(!ri&&!ei&&!So&&ut.indexOf("<")===-1)return Ae&&Ln?Ae.createHTML(ut):ut;if(et=fd(ut),!et)return ri?null:Ln?_o:""}et&&Wa&&Ar(et.firstChild);let $e=vd(Ui?ut:et);for(;Jt=$e.nextNode();)xd(Jt)||(Jt.content instanceof U&&Um(Jt.content),Ed(Jt));if(Ui)return ut;if(ri){if(An)for(Ie=Eo.call(et.ownerDocument);et.firstChild;)Ie.appendChild(et.firstChild);else Ie=et;return(xe.shadowroot||xe.shadowrootmode)&&(Ie=ae.call(it,Ie,!0)),Ie}let je=So?et.outerHTML:et.innerHTML;return So&&ye["!doctype"]&&et.ownerDocument&&et.ownerDocument.doctype&&et.ownerDocument.doctype.name&&S(wt,et.ownerDocument.doctype.name)&&(je="<!DOCTYPE "+et.ownerDocument.doctype.name+`>
`+je),ei&&n([Le,ve,se],Lr=>{je=v(je,Lr," ")}),Ae&&Ln?Ae.createHTML(je):je},V.setConfig=function(){let ut=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ja(ut),ja=!0},V.clearConfig=function(){ai=null,ja=!1},V.isValidAttribute=function(ut,B,et){ai||Ja({});let dt=ke(ut),Jt=ke(B);return kd(dt,Jt,et)},V.addHook=function(ut,B){typeof B=="function"&&(Zt[ut]=Zt[ut]||[],s(Zt[ut],B))},V.removeHook=function(ut){if(Zt[ut])return l(Zt[ut])},V.removeHooks=function(ut){Zt[ut]&&(Zt[ut]=[])},V.removeAllHooks=function(){Zt={}},V}var ct=tt();return ct})});var Wn={};Ym(Wn,{afterMain:()=>Md,afterRead:()=>Ld,afterWrite:()=>Pd,applyStyles:()=>li,arrow:()=>Dn,auto:()=>Vi,basePlacements:()=>Ur,beforeMain:()=>$d,beforeRead:()=>Cd,beforeWrite:()=>Id,bottom:()=>be,clippingParents:()=>qa,computeStyles:()=>ci,createPopper:()=>tn,createPopperBase:()=>Wd,createPopperLite:()=>Vd,detectOverflow:()=>He,end:()=>ao,eventListeners:()=>pi,flip:()=>Bn,hide:()=>Hn,left:()=>ie,main:()=>Rd,modifierPhases:()=>Za,offset:()=>Un,placements:()=>Ki,popper:()=>To,popperGenerator:()=>Oo,popperOffsets:()=>gi,preventOverflow:()=>jn,read:()=>Ad,reference:()=>Qa,right:()=>de,start:()=>$r,top:()=>re,variationPlacements:()=>Pn,viewport:()=>Gi,write:()=>Od});var re="top",be="bottom",de="right",ie="left",Vi="auto",Ur=[re,be,de,ie],$r="start",ao="end",qa="clippingParents",Gi="viewport",To="popper",Qa="reference",Pn=Ur.reduce(function(e,t){return e.concat([t+"-"+$r,t+"-"+ao])},[]),Ki=[].concat(Ur,[Vi]).reduce(function(e,t){return e.concat([t,t+"-"+$r,t+"-"+ao])},[]),Cd="beforeRead",Ad="read",Ld="afterRead",$d="beforeMain",Rd="main",Md="afterMain",Id="beforeWrite",Od="write",Pd="afterWrite",Za=[Cd,Ad,Ld,$d,Rd,Md,Id,Od,Pd];function _e(e){return e?(e.nodeName||"").toLowerCase():null}function te(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function or(e){var t=te(e).Element;return e instanceof t||e instanceof Element}function we(e){var t=te(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function si(e){if(typeof ShadowRoot>"u")return!1;var t=te(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function Xm(e){var t=e.state;Object.keys(t.elements).forEach(function(r){var d=t.styles[r]||{},u=t.attributes[r]||{},g=t.elements[r];!we(g)||!_e(g)||(Object.assign(g.style,d),Object.keys(u).forEach(function(a){var p=u[a];p===!1?g.removeAttribute(a):g.setAttribute(a,p===!0?"":p)}))})}function qm(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow),function(){Object.keys(t.elements).forEach(function(d){var u=t.elements[d],g=t.attributes[d]||{},a=Object.keys(t.styles.hasOwnProperty(d)?t.styles[d]:r[d]),p=a.reduce(function(o,i){return o[i]="",o},{});!we(u)||!_e(u)||(Object.assign(u.style,p),Object.keys(g).forEach(function(o){u.removeAttribute(o)}))})}}var li={name:"applyStyles",enabled:!0,phase:"write",fn:Xm,effect:qm,requires:["computeStyles"]};function Ee(e){return e.split("-")[0]}var fr=Math.max,Co=Math.min,jr=Math.round;function di(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function Yi(){return!/^((?!chrome|android).)*safari/i.test(di())}function ir(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var d=e.getBoundingClientRect(),u=1,g=1;t&&we(e)&&(u=e.offsetWidth>0&&jr(d.width)/e.offsetWidth||1,g=e.offsetHeight>0&&jr(d.height)/e.offsetHeight||1);var a=or(e)?te(e):window,p=a.visualViewport,o=!Yi()&&r,i=(d.left+(o&&p?p.offsetLeft:0))/u,n=(d.top+(o&&p?p.offsetTop:0))/g,l=d.width/u,s=d.height/g;return{width:l,height:s,top:n,right:i+l,bottom:n+s,left:i,x:i,y:n}}function Ao(e){var t=ir(e),r=e.offsetWidth,d=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-d)<=1&&(d=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:d}}function Ji(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&si(r)){var d=t;do{if(d&&e.isSameNode(d))return!0;d=d.parentNode||d.host}while(d)}return!1}function Be(e){return te(e).getComputedStyle(e)}function ts(e){return["table","td","th"].indexOf(_e(e))>=0}function Re(e){return((or(e)?e.ownerDocument:e.document)||window.document).documentElement}function Wr(e){return _e(e)==="html"?e:e.assignedSlot||e.parentNode||(si(e)?e.host:null)||Re(e)}function Dd(e){return!we(e)||Be(e).position==="fixed"?null:e.offsetParent}function Qm(e){var t=/firefox/i.test(di()),r=/Trident/i.test(di());if(r&&we(e)){var d=Be(e);if(d.position==="fixed")return null}var u=Wr(e);for(si(u)&&(u=u.host);we(u)&&["html","body"].indexOf(_e(u))<0;){var g=Be(u);if(g.transform!=="none"||g.perspective!=="none"||g.contain==="paint"||["transform","perspective"].indexOf(g.willChange)!==-1||t&&g.willChange==="filter"||t&&g.filter&&g.filter!=="none")return u;u=u.parentNode}return null}function vr(e){for(var t=te(e),r=Dd(e);r&&ts(r)&&Be(r).position==="static";)r=Dd(r);return r&&(_e(r)==="html"||_e(r)==="body"&&Be(r).position==="static")?t:r||Qm(e)||t}function Lo(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function $o(e,t,r){return fr(e,Co(t,r))}function Nd(e,t,r){var d=$o(e,t,r);return d>r?r:d}function Xi(){return{top:0,right:0,bottom:0,left:0}}function qi(e){return Object.assign({},Xi(),e)}function Qi(e,t){return t.reduce(function(r,d){return r[d]=e,r},{})}var Zm=function(t,r){return t=typeof t=="function"?t(Object.assign({},r.rects,{placement:r.placement})):t,qi(typeof t!="number"?t:Qi(t,Ur))};function tg(e){var t,r=e.state,d=e.name,u=e.options,g=r.elements.arrow,a=r.modifiersData.popperOffsets,p=Ee(r.placement),o=Lo(p),i=[ie,de].indexOf(p)>=0,n=i?"height":"width";if(!(!g||!a)){var l=Zm(u.padding,r),s=Ao(g),c=o==="y"?re:ie,m=o==="y"?be:de,h=r.rects.reference[n]+r.rects.reference[o]-a[o]-r.rects.popper[n],v=a[o]-r.rects.reference[o],k=vr(g),x=k?o==="y"?k.clientHeight||0:k.clientWidth||0:0,A=h/2-v/2,S=l[c],f=x-s[n]-l[m],L=x/2-s[n]/2+A,$=$o(S,L,f),T=o;r.modifiersData[d]=(t={},t[T]=$,t.centerOffset=$-L,t)}}function eg(e){var t=e.state,r=e.options,d=r.element,u=d===void 0?"[data-popper-arrow]":d;u!=null&&(typeof u=="string"&&(u=t.elements.popper.querySelector(u),!u)||Ji(t.elements.popper,u)&&(t.elements.arrow=u))}var Dn={name:"arrow",enabled:!0,phase:"main",fn:tg,effect:eg,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function nr(e){return e.split("-")[1]}var rg={top:"auto",right:"auto",bottom:"auto",left:"auto"};function og(e,t){var r=e.x,d=e.y,u=t.devicePixelRatio||1;return{x:jr(r*u)/u||0,y:jr(d*u)/u||0}}function Fd(e){var t,r=e.popper,d=e.popperRect,u=e.placement,g=e.variation,a=e.offsets,p=e.position,o=e.gpuAcceleration,i=e.adaptive,n=e.roundOffsets,l=e.isFixed,s=a.x,c=s===void 0?0:s,m=a.y,h=m===void 0?0:m,v=typeof n=="function"?n({x:c,y:h}):{x:c,y:h};c=v.x,h=v.y;var k=a.hasOwnProperty("x"),x=a.hasOwnProperty("y"),A=ie,S=re,f=window;if(i){var L=vr(r),$="clientHeight",T="clientWidth";if(L===te(r)&&(L=Re(r),Be(L).position!=="static"&&p==="absolute"&&($="scrollHeight",T="scrollWidth")),L=L,u===re||(u===ie||u===de)&&g===ao){S=be;var C=l&&L===f&&f.visualViewport?f.visualViewport.height:L[$];h-=C-d.height,h*=o?1:-1}if(u===ie||(u===re||u===be)&&g===ao){A=de;var w=l&&L===f&&f.visualViewport?f.visualViewport.width:L[T];c-=w-d.width,c*=o?1:-1}}var y=Object.assign({position:p},i&&rg),b=n===!0?og({x:c,y:h},te(r)):{x:c,y:h};if(c=b.x,h=b.y,o){var _;return Object.assign({},y,(_={},_[S]=x?"0":"",_[A]=k?"0":"",_.transform=(f.devicePixelRatio||1)<=1?"translate("+c+"px, "+h+"px)":"translate3d("+c+"px, "+h+"px, 0)",_))}return Object.assign({},y,(t={},t[S]=x?h+"px":"",t[A]=k?c+"px":"",t.transform="",t))}function ig(e){var t=e.state,r=e.options,d=r.gpuAcceleration,u=d===void 0?!0:d,g=r.adaptive,a=g===void 0?!0:g,p=r.roundOffsets,o=p===void 0?!0:p,i={placement:Ee(t.placement),variation:nr(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:u,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,Fd(Object.assign({},i,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:a,roundOffsets:o})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,Fd(Object.assign({},i,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:o})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}var ci={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:ig,data:{}};var Nn={passive:!0};function ng(e){var t=e.state,r=e.instance,d=e.options,u=d.scroll,g=u===void 0?!0:u,a=d.resize,p=a===void 0?!0:a,o=te(t.elements.popper),i=[].concat(t.scrollParents.reference,t.scrollParents.popper);return g&&i.forEach(function(n){n.addEventListener("scroll",r.update,Nn)}),p&&o.addEventListener("resize",r.update,Nn),function(){g&&i.forEach(function(n){n.removeEventListener("scroll",r.update,Nn)}),p&&o.removeEventListener("resize",r.update,Nn)}}var pi={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:ng,data:{}};var ag={left:"right",right:"left",bottom:"top",top:"bottom"};function ui(e){return e.replace(/left|right|bottom|top/g,function(t){return ag[t]})}var sg={start:"end",end:"start"};function Fn(e){return e.replace(/start|end/g,function(t){return sg[t]})}function Ro(e){var t=te(e),r=t.pageXOffset,d=t.pageYOffset;return{scrollLeft:r,scrollTop:d}}function Mo(e){return ir(Re(e)).left+Ro(e).scrollLeft}function es(e,t){var r=te(e),d=Re(e),u=r.visualViewport,g=d.clientWidth,a=d.clientHeight,p=0,o=0;if(u){g=u.width,a=u.height;var i=Yi();(i||!i&&t==="fixed")&&(p=u.offsetLeft,o=u.offsetTop)}return{width:g,height:a,x:p+Mo(e),y:o}}function rs(e){var t,r=Re(e),d=Ro(e),u=(t=e.ownerDocument)==null?void 0:t.body,g=fr(r.scrollWidth,r.clientWidth,u?u.scrollWidth:0,u?u.clientWidth:0),a=fr(r.scrollHeight,r.clientHeight,u?u.scrollHeight:0,u?u.clientHeight:0),p=-d.scrollLeft+Mo(e),o=-d.scrollTop;return Be(u||r).direction==="rtl"&&(p+=fr(r.clientWidth,u?u.clientWidth:0)-g),{width:g,height:a,x:p,y:o}}function Io(e){var t=Be(e),r=t.overflow,d=t.overflowX,u=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+u+d)}function zn(e){return["html","body","#document"].indexOf(_e(e))>=0?e.ownerDocument.body:we(e)&&Io(e)?e:zn(Wr(e))}function so(e,t){var r;t===void 0&&(t=[]);var d=zn(e),u=d===((r=e.ownerDocument)==null?void 0:r.body),g=te(d),a=u?[g].concat(g.visualViewport||[],Io(d)?d:[]):d,p=t.concat(a);return u?p:p.concat(so(Wr(a)))}function mi(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function lg(e,t){var r=ir(e,!1,t==="fixed");return r.top=r.top+e.clientTop,r.left=r.left+e.clientLeft,r.bottom=r.top+e.clientHeight,r.right=r.left+e.clientWidth,r.width=e.clientWidth,r.height=e.clientHeight,r.x=r.left,r.y=r.top,r}function zd(e,t,r){return t===Gi?mi(es(e,r)):or(t)?lg(t,r):mi(rs(Re(e)))}function dg(e){var t=so(Wr(e)),r=["absolute","fixed"].indexOf(Be(e).position)>=0,d=r&&we(e)?vr(e):e;return or(d)?t.filter(function(u){return or(u)&&Ji(u,d)&&_e(u)!=="body"}):[]}function os(e,t,r,d){var u=t==="clippingParents"?dg(e):[].concat(t),g=[].concat(u,[r]),a=g[0],p=g.reduce(function(o,i){var n=zd(e,i,d);return o.top=fr(n.top,o.top),o.right=Co(n.right,o.right),o.bottom=Co(n.bottom,o.bottom),o.left=fr(n.left,o.left),o},zd(e,a,d));return p.width=p.right-p.left,p.height=p.bottom-p.top,p.x=p.left,p.y=p.top,p}function Zi(e){var t=e.reference,r=e.element,d=e.placement,u=d?Ee(d):null,g=d?nr(d):null,a=t.x+t.width/2-r.width/2,p=t.y+t.height/2-r.height/2,o;switch(u){case re:o={x:a,y:t.y-r.height};break;case be:o={x:a,y:t.y+t.height};break;case de:o={x:t.x+t.width,y:p};break;case ie:o={x:t.x-r.width,y:p};break;default:o={x:t.x,y:t.y}}var i=u?Lo(u):null;if(i!=null){var n=i==="y"?"height":"width";switch(g){case $r:o[i]=o[i]-(t[n]/2-r[n]/2);break;case ao:o[i]=o[i]+(t[n]/2-r[n]/2);break;default:}}return o}function He(e,t){t===void 0&&(t={});var r=t,d=r.placement,u=d===void 0?e.placement:d,g=r.strategy,a=g===void 0?e.strategy:g,p=r.boundary,o=p===void 0?qa:p,i=r.rootBoundary,n=i===void 0?Gi:i,l=r.elementContext,s=l===void 0?To:l,c=r.altBoundary,m=c===void 0?!1:c,h=r.padding,v=h===void 0?0:h,k=qi(typeof v!="number"?v:Qi(v,Ur)),x=s===To?Qa:To,A=e.rects.popper,S=e.elements[m?x:s],f=os(or(S)?S:S.contextElement||Re(e.elements.popper),o,n,a),L=ir(e.elements.reference),$=Zi({reference:L,element:A,strategy:"absolute",placement:u}),T=mi(Object.assign({},A,$)),C=s===To?T:L,w={top:f.top-C.top+k.top,bottom:C.bottom-f.bottom+k.bottom,left:f.left-C.left+k.left,right:C.right-f.right+k.right},y=e.modifiersData.offset;if(s===To&&y){var b=y[u];Object.keys(w).forEach(function(_){var E=[de,be].indexOf(_)>=0?1:-1,R=[re,be].indexOf(_)>=0?"y":"x";w[_]+=b[R]*E})}return w}function is(e,t){t===void 0&&(t={});var r=t,d=r.placement,u=r.boundary,g=r.rootBoundary,a=r.padding,p=r.flipVariations,o=r.allowedAutoPlacements,i=o===void 0?Ki:o,n=nr(d),l=n?p?Pn:Pn.filter(function(m){return nr(m)===n}):Ur,s=l.filter(function(m){return i.indexOf(m)>=0});s.length===0&&(s=l);var c=s.reduce(function(m,h){return m[h]=He(e,{placement:h,boundary:u,rootBoundary:g,padding:a})[Ee(h)],m},{});return Object.keys(c).sort(function(m,h){return c[m]-c[h]})}function cg(e){if(Ee(e)===Vi)return[];var t=ui(e);return[Fn(e),t,Fn(t)]}function pg(e){var t=e.state,r=e.options,d=e.name;if(!t.modifiersData[d]._skip){for(var u=r.mainAxis,g=u===void 0?!0:u,a=r.altAxis,p=a===void 0?!0:a,o=r.fallbackPlacements,i=r.padding,n=r.boundary,l=r.rootBoundary,s=r.altBoundary,c=r.flipVariations,m=c===void 0?!0:c,h=r.allowedAutoPlacements,v=t.options.placement,k=Ee(v),x=k===v,A=o||(x||!m?[ui(v)]:cg(v)),S=[v].concat(A).reduce(function(W,j){return W.concat(Ee(j)===Vi?is(t,{placement:j,boundary:n,rootBoundary:l,padding:i,flipVariations:m,allowedAutoPlacements:h}):j)},[]),f=t.rects.reference,L=t.rects.popper,$=new Map,T=!0,C=S[0],w=0;w<S.length;w++){var y=S[w],b=Ee(y),_=nr(y)===$r,E=[re,be].indexOf(b)>=0,R=E?"width":"height",M=He(t,{placement:y,boundary:n,rootBoundary:l,altBoundary:s,padding:i}),I=E?_?de:ie:_?be:re;f[R]>L[R]&&(I=ui(I));var P=ui(I),O=[];if(g&&O.push(M[b]<=0),p&&O.push(M[I]<=0,M[P]<=0),O.every(function(W){return W})){C=y,T=!1;break}$.set(y,O)}if(T)for(var N=m?3:1,D=function(j){var Z=S.find(function(Y){var q=$.get(Y);if(q)return q.slice(0,j).every(function(nt){return nt})});if(Z)return C=Z,"break"},F=N;F>0;F--){var z=D(F);if(z==="break")break}t.placement!==C&&(t.modifiersData[d]._skip=!0,t.placement=C,t.reset=!0)}}var Bn={name:"flip",enabled:!0,phase:"main",fn:pg,requiresIfExists:["offset"],data:{_skip:!1}};function Bd(e,t,r){return r===void 0&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function Hd(e){return[re,de,be,ie].some(function(t){return e[t]>=0})}function ug(e){var t=e.state,r=e.name,d=t.rects.reference,u=t.rects.popper,g=t.modifiersData.preventOverflow,a=He(t,{elementContext:"reference"}),p=He(t,{altBoundary:!0}),o=Bd(a,d),i=Bd(p,u,g),n=Hd(o),l=Hd(i);t.modifiersData[r]={referenceClippingOffsets:o,popperEscapeOffsets:i,isReferenceHidden:n,hasPopperEscaped:l},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":n,"data-popper-escaped":l})}var Hn={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:ug};function mg(e,t,r){var d=Ee(e),u=[ie,re].indexOf(d)>=0?-1:1,g=typeof r=="function"?r(Object.assign({},t,{placement:e})):r,a=g[0],p=g[1];return a=a||0,p=(p||0)*u,[ie,de].indexOf(d)>=0?{x:p,y:a}:{x:a,y:p}}function gg(e){var t=e.state,r=e.options,d=e.name,u=r.offset,g=u===void 0?[0,0]:u,a=Ki.reduce(function(n,l){return n[l]=mg(l,t.rects,g),n},{}),p=a[t.placement],o=p.x,i=p.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=o,t.modifiersData.popperOffsets.y+=i),t.modifiersData[d]=a}var Un={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:gg};function hg(e){var t=e.state,r=e.name;t.modifiersData[r]=Zi({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}var gi={name:"popperOffsets",enabled:!0,phase:"read",fn:hg,data:{}};function ns(e){return e==="x"?"y":"x"}function bg(e){var t=e.state,r=e.options,d=e.name,u=r.mainAxis,g=u===void 0?!0:u,a=r.altAxis,p=a===void 0?!1:a,o=r.boundary,i=r.rootBoundary,n=r.altBoundary,l=r.padding,s=r.tether,c=s===void 0?!0:s,m=r.tetherOffset,h=m===void 0?0:m,v=He(t,{boundary:o,rootBoundary:i,padding:l,altBoundary:n}),k=Ee(t.placement),x=nr(t.placement),A=!x,S=Lo(k),f=ns(S),L=t.modifiersData.popperOffsets,$=t.rects.reference,T=t.rects.popper,C=typeof h=="function"?h(Object.assign({},t.rects,{placement:t.placement})):h,w=typeof C=="number"?{mainAxis:C,altAxis:C}:Object.assign({mainAxis:0,altAxis:0},C),y=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,b={x:0,y:0};if(L){if(g){var _,E=S==="y"?re:ie,R=S==="y"?be:de,M=S==="y"?"height":"width",I=L[S],P=I+v[E],O=I-v[R],N=c?-T[M]/2:0,D=x===$r?$[M]:T[M],F=x===$r?-T[M]:-$[M],z=t.elements.arrow,W=c&&z?Ao(z):{width:0,height:0},j=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:Xi(),Z=j[E],Y=j[R],q=$o(0,$[M],W[M]),nt=A?$[M]/2-N-q-Z-w.mainAxis:D-q-Z-w.mainAxis,ot=A?-$[M]/2+N+q+Y+w.mainAxis:F+q+Y+w.mainAxis,wt=t.elements.arrow&&vr(t.elements.arrow),Et=wt?S==="y"?wt.clientTop||0:wt.clientLeft||0:0,vt=(_=y?.[S])!=null?_:0,H=I+nt-vt-Et,J=I+ot-vt,at=$o(c?Co(P,H):P,I,c?fr(O,J):O);L[S]=at,b[S]=at-I}if(p){var tt,ct=S==="x"?re:ie,K=S==="x"?be:de,V=L[f],st=f==="y"?"height":"width",it=V+v[ct],bt=V-v[K],U=[re,ie].indexOf(k)!==-1,G=(tt=y?.[f])!=null?tt:0,rt=U?it:V-$[st]-T[st]-G+w.altAxis,ft=U?V+$[st]+T[st]-G-w.altAxis:bt,kt=c&&U?Nd(rt,V,ft):$o(c?rt:it,V,c?ft:bt);L[f]=kt,b[f]=kt-V}t.modifiersData[d]=b}}var jn={name:"preventOverflow",enabled:!0,phase:"main",fn:bg,requiresIfExists:["offset"]};function as(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function ss(e){return e===te(e)||!we(e)?Ro(e):as(e)}function fg(e){var t=e.getBoundingClientRect(),r=jr(t.width)/e.offsetWidth||1,d=jr(t.height)/e.offsetHeight||1;return r!==1||d!==1}function ls(e,t,r){r===void 0&&(r=!1);var d=we(t),u=we(t)&&fg(t),g=Re(t),a=ir(e,u,r),p={scrollLeft:0,scrollTop:0},o={x:0,y:0};return(d||!d&&!r)&&((_e(t)!=="body"||Io(g))&&(p=ss(t)),we(t)?(o=ir(t,!0),o.x+=t.clientLeft,o.y+=t.clientTop):g&&(o.x=Mo(g))),{x:a.left+p.scrollLeft-o.x,y:a.top+p.scrollTop-o.y,width:a.width,height:a.height}}function vg(e){var t=new Map,r=new Set,d=[];e.forEach(function(g){t.set(g.name,g)});function u(g){r.add(g.name);var a=[].concat(g.requires||[],g.requiresIfExists||[]);a.forEach(function(p){if(!r.has(p)){var o=t.get(p);o&&u(o)}}),d.push(g)}return e.forEach(function(g){r.has(g.name)||u(g)}),d}function ds(e){var t=vg(e);return Za.reduce(function(r,d){return r.concat(t.filter(function(u){return u.phase===d}))},[])}function cs(e){var t;return function(){return t||(t=new Promise(function(r){Promise.resolve().then(function(){t=void 0,r(e())})})),t}}function ps(e){var t=e.reduce(function(r,d){var u=r[d.name];return r[d.name]=u?Object.assign({},u,d,{options:Object.assign({},u.options,d.options),data:Object.assign({},u.data,d.data)}):d,r},{});return Object.keys(t).map(function(r){return t[r]})}var Ud={placement:"bottom",modifiers:[],strategy:"absolute"};function jd(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some(function(d){return!(d&&typeof d.getBoundingClientRect=="function")})}function Oo(e){e===void 0&&(e={});var t=e,r=t.defaultModifiers,d=r===void 0?[]:r,u=t.defaultOptions,g=u===void 0?Ud:u;return function(p,o,i){i===void 0&&(i=g);var n={placement:"bottom",orderedModifiers:[],options:Object.assign({},Ud,g),modifiersData:{},elements:{reference:p,popper:o},attributes:{},styles:{}},l=[],s=!1,c={state:n,setOptions:function(k){var x=typeof k=="function"?k(n.options):k;h(),n.options=Object.assign({},g,n.options,x),n.scrollParents={reference:or(p)?so(p):p.contextElement?so(p.contextElement):[],popper:so(o)};var A=ds(ps([].concat(d,n.options.modifiers)));return n.orderedModifiers=A.filter(function(S){return S.enabled}),m(),c.update()},forceUpdate:function(){if(!s){var k=n.elements,x=k.reference,A=k.popper;if(jd(x,A)){n.rects={reference:ls(x,vr(A),n.options.strategy==="fixed"),popper:Ao(A)},n.reset=!1,n.placement=n.options.placement,n.orderedModifiers.forEach(function(w){return n.modifiersData[w.name]=Object.assign({},w.data)});for(var S=0;S<n.orderedModifiers.length;S++){if(n.reset===!0){n.reset=!1,S=-1;continue}var f=n.orderedModifiers[S],L=f.fn,$=f.options,T=$===void 0?{}:$,C=f.name;typeof L=="function"&&(n=L({state:n,options:T,name:C,instance:c})||n)}}}},update:cs(function(){return new Promise(function(v){c.forceUpdate(),v(n)})}),destroy:function(){h(),s=!0}};if(!jd(p,o))return c;c.setOptions(i).then(function(v){!s&&i.onFirstUpdate&&i.onFirstUpdate(v)});function m(){n.orderedModifiers.forEach(function(v){var k=v.name,x=v.options,A=x===void 0?{}:x,S=v.effect;if(typeof S=="function"){var f=S({state:n,name:k,instance:c,options:A}),L=function(){};l.push(f||L)}})}function h(){l.forEach(function(v){return v()}),l=[]}return c}}var Wd=Oo();var wg=[pi,gi,ci,li],Vd=Oo({defaultModifiers:wg});var yg=[pi,gi,ci,li,Un,Bn,jn,Dn,Hn],tn=Oo({defaultModifiers:yg});var lo=new Map,us={set(e,t,r){lo.has(e)||lo.set(e,new Map);let d=lo.get(e);if(!d.has(t)&&d.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(d.keys())[0]}.`);return}d.set(t,r)},get(e,t){return lo.has(e)&&lo.get(e).get(t)||null},remove(e,t){if(!lo.has(e))return;let r=lo.get(e);r.delete(t),r.size===0&&lo.delete(e)}},xg=1e6,kg=1e3,Cs="transitionend",yc=e=>(e&&window.CSS&&window.CSS.escape&&(e=e.replace(/#([^\s"#']+)/g,(t,r)=>`#${CSS.escape(r)}`)),e),_g=e=>e==null?`${e}`:Object.prototype.toString.call(e).match(/\s([a-z]+)/i)[1].toLowerCase(),Eg=e=>{do e+=Math.floor(Math.random()*xg);while(document.getElementById(e));return e},Sg=e=>{if(!e)return 0;let{transitionDuration:t,transitionDelay:r}=window.getComputedStyle(e),d=Number.parseFloat(t),u=Number.parseFloat(r);return!d&&!u?0:(t=t.split(",")[0],r=r.split(",")[0],(Number.parseFloat(t)+Number.parseFloat(r))*kg)},xc=e=>{e.dispatchEvent(new Event(Cs))},Vr=e=>!e||typeof e!="object"?!1:(typeof e.jquery<"u"&&(e=e[0]),typeof e.nodeType<"u"),co=e=>Vr(e)?e.jquery?e[0]:e:typeof e=="string"&&e.length>0?document.querySelector(yc(e)):null,xi=e=>{if(!Vr(e)||e.getClientRects().length===0)return!1;let t=getComputedStyle(e).getPropertyValue("visibility")==="visible",r=e.closest("details:not([open])");if(!r)return t;if(r!==e){let d=e.closest("summary");if(d&&d.parentNode!==r||d===null)return!1}return t},po=e=>!e||e.nodeType!==Node.ELEMENT_NODE||e.classList.contains("disabled")?!0:typeof e.disabled<"u"?e.disabled:e.hasAttribute("disabled")&&e.getAttribute("disabled")!=="false",kc=e=>{if(!document.documentElement.attachShadow)return null;if(typeof e.getRootNode=="function"){let t=e.getRootNode();return t instanceof ShadowRoot?t:null}return e instanceof ShadowRoot?e:e.parentNode?kc(e.parentNode):null},Zn=()=>{},sn=e=>{e.offsetHeight},_c=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,ms=[],Tg=e=>{document.readyState==="loading"?(ms.length||document.addEventListener("DOMContentLoaded",()=>{for(let t of ms)t()}),ms.push(e)):e()},ar=()=>document.documentElement.dir==="rtl",lr=e=>{Tg(()=>{let t=_c();if(t){let r=e.NAME,d=t.fn[r];t.fn[r]=e.jQueryInterface,t.fn[r].Constructor=e,t.fn[r].noConflict=()=>(t.fn[r]=d,e.jQueryInterface)}})},We=(e,t=[],r=e)=>typeof e=="function"?e(...t):r,Ec=(e,t,r=!0)=>{if(!r){We(e);return}let u=Sg(t)+5,g=!1,a=({target:p})=>{p===t&&(g=!0,t.removeEventListener(Cs,a),We(e))};t.addEventListener(Cs,a),setTimeout(()=>{g||xc(t)},u)},Ms=(e,t,r,d)=>{let u=e.length,g=e.indexOf(t);return g===-1?!r&&d?e[u-1]:e[0]:(g+=r?1:-1,d&&(g=(g+u)%u),e[Math.max(0,Math.min(g,u-1))])},Cg=/[^.]*(?=\..*)\.|.*/,Ag=/\..*/,Lg=/::\d+$/,gs={},Gd=1,Sc={mouseenter:"mouseover",mouseleave:"mouseout"},$g=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function Tc(e,t){return t&&`${t}::${Gd++}`||e.uidEvent||Gd++}function Cc(e){let t=Tc(e);return e.uidEvent=t,gs[t]=gs[t]||{},gs[t]}function Rg(e,t){return function r(d){return Is(d,{delegateTarget:e}),r.oneOff&&X.off(e,d.type,t),t.apply(e,[d])}}function Mg(e,t,r){return function d(u){let g=e.querySelectorAll(t);for(let{target:a}=u;a&&a!==this;a=a.parentNode)for(let p of g)if(p===a)return Is(u,{delegateTarget:a}),d.oneOff&&X.off(e,u.type,t,r),r.apply(a,[u])}}function Ac(e,t,r=null){return Object.values(e).find(d=>d.callable===t&&d.delegationSelector===r)}function Lc(e,t,r){let d=typeof t=="string",u=d?r:t||r,g=$c(e);return $g.has(g)||(g=e),[d,u,g]}function Kd(e,t,r,d,u){if(typeof t!="string"||!e)return;let[g,a,p]=Lc(t,r,d);t in Sc&&(a=(m=>function(h){if(!h.relatedTarget||h.relatedTarget!==h.delegateTarget&&!h.delegateTarget.contains(h.relatedTarget))return m.call(this,h)})(a));let o=Cc(e),i=o[p]||(o[p]={}),n=Ac(i,a,g?r:null);if(n){n.oneOff=n.oneOff&&u;return}let l=Tc(a,t.replace(Cg,"")),s=g?Mg(e,r,a):Rg(e,a);s.delegationSelector=g?r:null,s.callable=a,s.oneOff=u,s.uidEvent=l,i[l]=s,e.addEventListener(p,s,g)}function As(e,t,r,d,u){let g=Ac(t[r],d,u);g&&(e.removeEventListener(r,g,!!u),delete t[r][g.uidEvent])}function Ig(e,t,r,d){let u=t[r]||{};for(let[g,a]of Object.entries(u))g.includes(d)&&As(e,t,r,a.callable,a.delegationSelector)}function $c(e){return e=e.replace(Ag,""),Sc[e]||e}var X={on(e,t,r,d){Kd(e,t,r,d,!1)},one(e,t,r,d){Kd(e,t,r,d,!0)},off(e,t,r,d){if(typeof t!="string"||!e)return;let[u,g,a]=Lc(t,r,d),p=a!==t,o=Cc(e),i=o[a]||{},n=t.startsWith(".");if(typeof g<"u"){if(!Object.keys(i).length)return;As(e,o,a,g,u?r:null);return}if(n)for(let l of Object.keys(o))Ig(e,o,l,t.slice(1));for(let[l,s]of Object.entries(i)){let c=l.replace(Lg,"");(!p||t.includes(c))&&As(e,o,a,s.callable,s.delegationSelector)}},trigger(e,t,r){if(typeof t!="string"||!e)return null;let d=_c(),u=$c(t),g=t!==u,a=null,p=!0,o=!0,i=!1;g&&d&&(a=d.Event(t,r),d(e).trigger(a),p=!a.isPropagationStopped(),o=!a.isImmediatePropagationStopped(),i=a.isDefaultPrevented());let n=Is(new Event(t,{bubbles:p,cancelable:!0}),r);return i&&n.preventDefault(),o&&e.dispatchEvent(n),n.defaultPrevented&&a&&a.preventDefault(),n}};function Is(e,t={}){for(let[r,d]of Object.entries(t))try{e[r]=d}catch{Object.defineProperty(e,r,{configurable:!0,get(){return d}})}return e}function Yd(e){if(e==="true")return!0;if(e==="false")return!1;if(e===Number(e).toString())return Number(e);if(e===""||e==="null")return null;if(typeof e!="string")return e;try{return JSON.parse(decodeURIComponent(e))}catch{return e}}function hs(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}var Gr={setDataAttribute(e,t,r){e.setAttribute(`data-bs-${hs(t)}`,r)},removeDataAttribute(e,t){e.removeAttribute(`data-bs-${hs(t)}`)},getDataAttributes(e){if(!e)return{};let t={},r=Object.keys(e.dataset).filter(d=>d.startsWith("bs")&&!d.startsWith("bsConfig"));for(let d of r){let u=d.replace(/^bs/,"");u=u.charAt(0).toLowerCase()+u.slice(1,u.length),t[u]=Yd(e.dataset[d])}return t},getDataAttribute(e,t){return Yd(e.getAttribute(`data-bs-${hs(t)}`))}},No=class{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(t){return t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t}_mergeConfigObj(t,r){let d=Vr(r)?Gr.getDataAttribute(r,"config"):{};return{...this.constructor.Default,...typeof d=="object"?d:{},...Vr(r)?Gr.getDataAttributes(r):{},...typeof t=="object"?t:{}}}_typeCheckConfig(t,r=this.constructor.DefaultType){for(let[d,u]of Object.entries(r)){let g=t[d],a=Vr(g)?"element":_g(g);if(!new RegExp(u).test(a))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${d}" provided type "${a}" but expected type "${u}".`)}}},Og="5.3.3",Xe=class extends No{constructor(t,r){super(),t=co(t),t&&(this._element=t,this._config=this._getConfig(r),us.set(this._element,this.constructor.DATA_KEY,this))}dispose(){us.remove(this._element,this.constructor.DATA_KEY),X.off(this._element,this.constructor.EVENT_KEY);for(let t of Object.getOwnPropertyNames(this))this[t]=null}_queueCallback(t,r,d=!0){Ec(t,r,d)}_getConfig(t){return t=this._mergeConfigObj(t,this._element),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}static getInstance(t){return us.get(co(t),this.DATA_KEY)}static getOrCreateInstance(t,r={}){return this.getInstance(t)||new this(t,typeof r=="object"?r:null)}static get VERSION(){return Og}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(t){return`${t}${this.EVENT_KEY}`}},bs=e=>{let t=e.getAttribute("data-bs-target");if(!t||t==="#"){let r=e.getAttribute("href");if(!r||!r.includes("#")&&!r.startsWith("."))return null;r.includes("#")&&!r.startsWith("#")&&(r=`#${r.split("#")[1]}`),t=r&&r!=="#"?r.trim():null}return t?t.split(",").map(r=>yc(r)).join(","):null},gt={find(e,t=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(t,e))},findOne(e,t=document.documentElement){return Element.prototype.querySelector.call(t,e)},children(e,t){return[].concat(...e.children).filter(r=>r.matches(t))},parents(e,t){let r=[],d=e.parentNode.closest(t);for(;d;)r.push(d),d=d.parentNode.closest(t);return r},prev(e,t){let r=e.previousElementSibling;for(;r;){if(r.matches(t))return[r];r=r.previousElementSibling}return[]},next(e,t){let r=e.nextElementSibling;for(;r;){if(r.matches(t))return[r];r=r.nextElementSibling}return[]},focusableChildren(e){let t=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(r=>`${r}:not([tabindex^="-"])`).join(",");return this.find(t,e).filter(r=>!po(r)&&xi(r))},getSelectorFromElement(e){let t=bs(e);return t&&gt.findOne(t)?t:null},getElementFromSelector(e){let t=bs(e);return t?gt.findOne(t):null},getMultipleElementsFromSelector(e){let t=bs(e);return t?gt.find(t):[]}},la=(e,t="hide")=>{let r=`click.dismiss${e.EVENT_KEY}`,d=e.NAME;X.on(document,r,`[data-bs-dismiss="${d}"]`,function(u){if(["A","AREA"].includes(this.tagName)&&u.preventDefault(),po(this))return;let g=gt.getElementFromSelector(this)||this.closest(`.${d}`);e.getOrCreateInstance(g)[t]()})},Pg="alert",Dg="bs.alert",Rc=`.${Dg}`,Ng=`close${Rc}`,Fg=`closed${Rc}`,zg="fade",Bg="show",ta=class e extends Xe{static get NAME(){return Pg}close(){if(X.trigger(this._element,Ng).defaultPrevented)return;this._element.classList.remove(Bg);let r=this._element.classList.contains(zg);this._queueCallback(()=>this._destroyElement(),this._element,r)}_destroyElement(){this._element.remove(),X.trigger(this._element,Fg),this.dispose()}static jQueryInterface(t){return this.each(function(){let r=e.getOrCreateInstance(this);if(typeof t=="string"){if(r[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);r[t](this)}})}};la(ta,"close");lr(ta);var Hg="button",Ug="bs.button",jg=`.${Ug}`,Wg=".data-api",Vg="active",Jd='[data-bs-toggle="button"]',Gg=`click${jg}${Wg}`,ea=class e extends Xe{static get NAME(){return Hg}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(Vg))}static jQueryInterface(t){return this.each(function(){let r=e.getOrCreateInstance(this);t==="toggle"&&r[t]()})}};X.on(document,Gg,Jd,e=>{e.preventDefault();let t=e.target.closest(Jd);ea.getOrCreateInstance(t).toggle()});lr(ea);var Kg="swipe",ki=".bs.swipe",Yg=`touchstart${ki}`,Jg=`touchmove${ki}`,Xg=`touchend${ki}`,qg=`pointerdown${ki}`,Qg=`pointerup${ki}`,Zg="touch",th="pen",eh="pointer-event",rh=40,oh={endCallback:null,leftCallback:null,rightCallback:null},ih={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"},ra=class e extends No{constructor(t,r){super(),this._element=t,!(!t||!e.isSupported())&&(this._config=this._getConfig(r),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return oh}static get DefaultType(){return ih}static get NAME(){return Kg}dispose(){X.off(this._element,ki)}_start(t){if(!this._supportPointerEvents){this._deltaX=t.touches[0].clientX;return}this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX)}_end(t){this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX-this._deltaX),this._handleSwipe(),We(this._config.endCallback)}_move(t){this._deltaX=t.touches&&t.touches.length>1?0:t.touches[0].clientX-this._deltaX}_handleSwipe(){let t=Math.abs(this._deltaX);if(t<=rh)return;let r=t/this._deltaX;this._deltaX=0,r&&We(r>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(X.on(this._element,qg,t=>this._start(t)),X.on(this._element,Qg,t=>this._end(t)),this._element.classList.add(eh)):(X.on(this._element,Yg,t=>this._start(t)),X.on(this._element,Jg,t=>this._move(t)),X.on(this._element,Xg,t=>this._end(t)))}_eventIsPointerPenTouch(t){return this._supportPointerEvents&&(t.pointerType===th||t.pointerType===Zg)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}},nh="carousel",ah="bs.carousel",mo=`.${ah}`,Mc=".data-api",sh="ArrowLeft",lh="ArrowRight",dh=500,en="next",hi="prev",fi="left",qn="right",ch=`slide${mo}`,fs=`slid${mo}`,ph=`keydown${mo}`,uh=`mouseenter${mo}`,mh=`mouseleave${mo}`,gh=`dragstart${mo}`,hh=`load${mo}${Mc}`,bh=`click${mo}${Mc}`,Ic="carousel",Vn="active",fh="slide",vh="carousel-item-end",wh="carousel-item-start",yh="carousel-item-next",xh="carousel-item-prev",Oc=".active",Pc=".carousel-item",kh=Oc+Pc,_h=".carousel-item img",Eh=".carousel-indicators",Sh="[data-bs-slide], [data-bs-slide-to]",Th='[data-bs-ride="carousel"]',Ch={[sh]:qn,[lh]:fi},Ah={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Lh={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"},on=class e extends Xe{constructor(t,r){super(t,r),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=gt.findOne(Eh,this._element),this._addEventListeners(),this._config.ride===Ic&&this.cycle()}static get Default(){return Ah}static get DefaultType(){return Lh}static get NAME(){return nh}next(){this._slide(en)}nextWhenVisible(){!document.hidden&&xi(this._element)&&this.next()}prev(){this._slide(hi)}pause(){this._isSliding&&xc(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){X.one(this._element,fs,()=>this.cycle());return}this.cycle()}}to(t){let r=this._getItems();if(t>r.length-1||t<0)return;if(this._isSliding){X.one(this._element,fs,()=>this.to(t));return}let d=this._getItemIndex(this._getActive());if(d===t)return;let u=t>d?en:hi;this._slide(u,r[t])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(t){return t.defaultInterval=t.interval,t}_addEventListeners(){this._config.keyboard&&X.on(this._element,ph,t=>this._keydown(t)),this._config.pause==="hover"&&(X.on(this._element,uh,()=>this.pause()),X.on(this._element,mh,()=>this._maybeEnableCycle())),this._config.touch&&ra.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(let d of gt.find(_h,this._element))X.on(d,gh,u=>u.preventDefault());let r={leftCallback:()=>this._slide(this._directionToOrder(fi)),rightCallback:()=>this._slide(this._directionToOrder(qn)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),dh+this._config.interval))}};this._swipeHelper=new ra(this._element,r)}_keydown(t){if(/input|textarea/i.test(t.target.tagName))return;let r=Ch[t.key];r&&(t.preventDefault(),this._slide(this._directionToOrder(r)))}_getItemIndex(t){return this._getItems().indexOf(t)}_setActiveIndicatorElement(t){if(!this._indicatorsElement)return;let r=gt.findOne(Oc,this._indicatorsElement);r.classList.remove(Vn),r.removeAttribute("aria-current");let d=gt.findOne(`[data-bs-slide-to="${t}"]`,this._indicatorsElement);d&&(d.classList.add(Vn),d.setAttribute("aria-current","true"))}_updateInterval(){let t=this._activeElement||this._getActive();if(!t)return;let r=Number.parseInt(t.getAttribute("data-bs-interval"),10);this._config.interval=r||this._config.defaultInterval}_slide(t,r=null){if(this._isSliding)return;let d=this._getActive(),u=t===en,g=r||Ms(this._getItems(),d,u,this._config.wrap);if(g===d)return;let a=this._getItemIndex(g),p=c=>X.trigger(this._element,c,{relatedTarget:g,direction:this._orderToDirection(t),from:this._getItemIndex(d),to:a});if(p(ch).defaultPrevented||!d||!g)return;let i=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(a),this._activeElement=g;let n=u?wh:vh,l=u?yh:xh;g.classList.add(l),sn(g),d.classList.add(n),g.classList.add(n);let s=()=>{g.classList.remove(n,l),g.classList.add(Vn),d.classList.remove(Vn,l,n),this._isSliding=!1,p(fs)};this._queueCallback(s,d,this._isAnimated()),i&&this.cycle()}_isAnimated(){return this._element.classList.contains(fh)}_getActive(){return gt.findOne(kh,this._element)}_getItems(){return gt.find(Pc,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(t){return ar()?t===fi?hi:en:t===fi?en:hi}_orderToDirection(t){return ar()?t===hi?fi:qn:t===hi?qn:fi}static jQueryInterface(t){return this.each(function(){let r=e.getOrCreateInstance(this,t);if(typeof t=="number"){r.to(t);return}if(typeof t=="string"){if(r[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);r[t]()}})}};X.on(document,bh,Sh,function(e){let t=gt.getElementFromSelector(this);if(!t||!t.classList.contains(Ic))return;e.preventDefault();let r=on.getOrCreateInstance(t),d=this.getAttribute("data-bs-slide-to");if(d){r.to(d),r._maybeEnableCycle();return}if(Gr.getDataAttribute(this,"slide")==="next"){r.next(),r._maybeEnableCycle();return}r.prev(),r._maybeEnableCycle()});X.on(window,hh,()=>{let e=gt.find(Th);for(let t of e)on.getOrCreateInstance(t)});lr(on);var $h="collapse",Rh="bs.collapse",ln=`.${Rh}`,Mh=".data-api",Ih=`show${ln}`,Oh=`shown${ln}`,Ph=`hide${ln}`,Dh=`hidden${ln}`,Nh=`click${ln}${Mh}`,vs="show",wi="collapse",Gn="collapsing",Fh="collapsed",zh=`:scope .${wi} .${wi}`,Bh="collapse-horizontal",Hh="width",Uh="height",jh=".collapse.show, .collapse.collapsing",Ls='[data-bs-toggle="collapse"]',Wh={parent:null,toggle:!0},Vh={parent:"(null|element)",toggle:"boolean"},oa=class e extends Xe{constructor(t,r){super(t,r),this._isTransitioning=!1,this._triggerArray=[];let d=gt.find(Ls);for(let u of d){let g=gt.getSelectorFromElement(u),a=gt.find(g).filter(p=>p===this._element);g!==null&&a.length&&this._triggerArray.push(u)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Wh}static get DefaultType(){return Vh}static get NAME(){return $h}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let t=[];if(this._config.parent&&(t=this._getFirstLevelChildren(jh).filter(p=>p!==this._element).map(p=>e.getOrCreateInstance(p,{toggle:!1}))),t.length&&t[0]._isTransitioning||X.trigger(this._element,Ih).defaultPrevented)return;for(let p of t)p.hide();let d=this._getDimension();this._element.classList.remove(wi),this._element.classList.add(Gn),this._element.style[d]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;let u=()=>{this._isTransitioning=!1,this._element.classList.remove(Gn),this._element.classList.add(wi,vs),this._element.style[d]="",X.trigger(this._element,Oh)},a=`scroll${d[0].toUpperCase()+d.slice(1)}`;this._queueCallback(u,this._element,!0),this._element.style[d]=`${this._element[a]}px`}hide(){if(this._isTransitioning||!this._isShown()||X.trigger(this._element,Ph).defaultPrevented)return;let r=this._getDimension();this._element.style[r]=`${this._element.getBoundingClientRect()[r]}px`,sn(this._element),this._element.classList.add(Gn),this._element.classList.remove(wi,vs);for(let u of this._triggerArray){let g=gt.getElementFromSelector(u);g&&!this._isShown(g)&&this._addAriaAndCollapsedClass([u],!1)}this._isTransitioning=!0;let d=()=>{this._isTransitioning=!1,this._element.classList.remove(Gn),this._element.classList.add(wi),X.trigger(this._element,Dh)};this._element.style[r]="",this._queueCallback(d,this._element,!0)}_isShown(t=this._element){return t.classList.contains(vs)}_configAfterMerge(t){return t.toggle=!!t.toggle,t.parent=co(t.parent),t}_getDimension(){return this._element.classList.contains(Bh)?Hh:Uh}_initializeChildren(){if(!this._config.parent)return;let t=this._getFirstLevelChildren(Ls);for(let r of t){let d=gt.getElementFromSelector(r);d&&this._addAriaAndCollapsedClass([r],this._isShown(d))}}_getFirstLevelChildren(t){let r=gt.find(zh,this._config.parent);return gt.find(t,this._config.parent).filter(d=>!r.includes(d))}_addAriaAndCollapsedClass(t,r){if(t.length)for(let d of t)d.classList.toggle(Fh,!r),d.setAttribute("aria-expanded",r)}static jQueryInterface(t){let r={};return typeof t=="string"&&/show|hide/.test(t)&&(r.toggle=!1),this.each(function(){let d=e.getOrCreateInstance(this,r);if(typeof t=="string"){if(typeof d[t]>"u")throw new TypeError(`No method named "${t}"`);d[t]()}})}};X.on(document,Nh,Ls,function(e){(e.target.tagName==="A"||e.delegateTarget&&e.delegateTarget.tagName==="A")&&e.preventDefault();for(let t of gt.getMultipleElementsFromSelector(this))oa.getOrCreateInstance(t,{toggle:!1}).toggle()});lr(oa);var Xd="dropdown",Gh="bs.dropdown",zo=`.${Gh}`,Os=".data-api",Kh="Escape",qd="Tab",Yh="ArrowUp",Qd="ArrowDown",Jh=2,Xh=`hide${zo}`,qh=`hidden${zo}`,Qh=`show${zo}`,Zh=`shown${zo}`,Dc=`click${zo}${Os}`,Nc=`keydown${zo}${Os}`,tb=`keyup${zo}${Os}`,vi="show",eb="dropup",rb="dropend",ob="dropstart",ib="dropup-center",nb="dropdown-center",Po='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',ab=`${Po}.${vi}`,Qn=".dropdown-menu",sb=".navbar",lb=".navbar-nav",db=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",cb=ar()?"top-end":"top-start",pb=ar()?"top-start":"top-end",ub=ar()?"bottom-end":"bottom-start",mb=ar()?"bottom-start":"bottom-end",gb=ar()?"left-start":"right-start",hb=ar()?"right-start":"left-start",bb="top",fb="bottom",vb={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},wb={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"},Rr=class e extends Xe{constructor(t,r){super(t,r),this._popper=null,this._parent=this._element.parentNode,this._menu=gt.next(this._element,Qn)[0]||gt.prev(this._element,Qn)[0]||gt.findOne(Qn,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return vb}static get DefaultType(){return wb}static get NAME(){return Xd}toggle(){return this._isShown()?this.hide():this.show()}show(){if(po(this._element)||this._isShown())return;let t={relatedTarget:this._element};if(!X.trigger(this._element,Qh,t).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(lb))for(let d of[].concat(...document.body.children))X.on(d,"mouseover",Zn);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(vi),this._element.classList.add(vi),X.trigger(this._element,Zh,t)}}hide(){if(po(this._element)||!this._isShown())return;let t={relatedTarget:this._element};this._completeHide(t)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(t){if(!X.trigger(this._element,Xh,t).defaultPrevented){if("ontouchstart"in document.documentElement)for(let d of[].concat(...document.body.children))X.off(d,"mouseover",Zn);this._popper&&this._popper.destroy(),this._menu.classList.remove(vi),this._element.classList.remove(vi),this._element.setAttribute("aria-expanded","false"),Gr.removeDataAttribute(this._menu,"popper"),X.trigger(this._element,qh,t)}}_getConfig(t){if(t=super._getConfig(t),typeof t.reference=="object"&&!Vr(t.reference)&&typeof t.reference.getBoundingClientRect!="function")throw new TypeError(`${Xd.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return t}_createPopper(){if(typeof Wn>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let t=this._element;this._config.reference==="parent"?t=this._parent:Vr(this._config.reference)?t=co(this._config.reference):typeof this._config.reference=="object"&&(t=this._config.reference);let r=this._getPopperConfig();this._popper=tn(t,this._menu,r)}_isShown(){return this._menu.classList.contains(vi)}_getPlacement(){let t=this._parent;if(t.classList.contains(rb))return gb;if(t.classList.contains(ob))return hb;if(t.classList.contains(ib))return bb;if(t.classList.contains(nb))return fb;let r=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return t.classList.contains(eb)?r?pb:cb:r?mb:ub}_detectNavbar(){return this._element.closest(sb)!==null}_getOffset(){let{offset:t}=this._config;return typeof t=="string"?t.split(",").map(r=>Number.parseInt(r,10)):typeof t=="function"?r=>t(r,this._element):t}_getPopperConfig(){let t={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(Gr.setDataAttribute(this._menu,"popper","static"),t.modifiers=[{name:"applyStyles",enabled:!1}]),{...t,...We(this._config.popperConfig,[t])}}_selectMenuItem({key:t,target:r}){let d=gt.find(db,this._menu).filter(u=>xi(u));d.length&&Ms(d,r,t===Qd,!d.includes(r)).focus()}static jQueryInterface(t){return this.each(function(){let r=e.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof r[t]>"u")throw new TypeError(`No method named "${t}"`);r[t]()}})}static clearMenus(t){if(t.button===Jh||t.type==="keyup"&&t.key!==qd)return;let r=gt.find(ab);for(let d of r){let u=e.getInstance(d);if(!u||u._config.autoClose===!1)continue;let g=t.composedPath(),a=g.includes(u._menu);if(g.includes(u._element)||u._config.autoClose==="inside"&&!a||u._config.autoClose==="outside"&&a||u._menu.contains(t.target)&&(t.type==="keyup"&&t.key===qd||/input|select|option|textarea|form/i.test(t.target.tagName)))continue;let p={relatedTarget:u._element};t.type==="click"&&(p.clickEvent=t),u._completeHide(p)}}static dataApiKeydownHandler(t){let r=/input|textarea/i.test(t.target.tagName),d=t.key===Kh,u=[Yh,Qd].includes(t.key);if(!u&&!d||r&&!d)return;t.preventDefault();let g=this.matches(Po)?this:gt.prev(this,Po)[0]||gt.next(this,Po)[0]||gt.findOne(Po,t.delegateTarget.parentNode),a=e.getOrCreateInstance(g);if(u){t.stopPropagation(),a.show(),a._selectMenuItem(t);return}a._isShown()&&(t.stopPropagation(),a.hide(),g.focus())}};X.on(document,Nc,Po,Rr.dataApiKeydownHandler);X.on(document,Nc,Qn,Rr.dataApiKeydownHandler);X.on(document,Dc,Rr.clearMenus);X.on(document,tb,Rr.clearMenus);X.on(document,Dc,Po,function(e){e.preventDefault(),Rr.getOrCreateInstance(this).toggle()});lr(Rr);var Fc="backdrop",yb="fade",Zd="show",tc=`mousedown.bs.${Fc}`,xb={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},kb={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"},ia=class extends No{constructor(t){super(),this._config=this._getConfig(t),this._isAppended=!1,this._element=null}static get Default(){return xb}static get DefaultType(){return kb}static get NAME(){return Fc}show(t){if(!this._config.isVisible){We(t);return}this._append();let r=this._getElement();this._config.isAnimated&&sn(r),r.classList.add(Zd),this._emulateAnimation(()=>{We(t)})}hide(t){if(!this._config.isVisible){We(t);return}this._getElement().classList.remove(Zd),this._emulateAnimation(()=>{this.dispose(),We(t)})}dispose(){this._isAppended&&(X.off(this._element,tc),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){let t=document.createElement("div");t.className=this._config.className,this._config.isAnimated&&t.classList.add(yb),this._element=t}return this._element}_configAfterMerge(t){return t.rootElement=co(t.rootElement),t}_append(){if(this._isAppended)return;let t=this._getElement();this._config.rootElement.append(t),X.on(t,tc,()=>{We(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(t){Ec(t,this._getElement(),this._config.isAnimated)}},_b="focustrap",Eb="bs.focustrap",na=`.${Eb}`,Sb=`focusin${na}`,Tb=`keydown.tab${na}`,Cb="Tab",Ab="forward",ec="backward",Lb={autofocus:!0,trapElement:null},$b={autofocus:"boolean",trapElement:"element"},aa=class extends No{constructor(t){super(),this._config=this._getConfig(t),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Lb}static get DefaultType(){return $b}static get NAME(){return _b}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),X.off(document,na),X.on(document,Sb,t=>this._handleFocusin(t)),X.on(document,Tb,t=>this._handleKeydown(t)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,X.off(document,na))}_handleFocusin(t){let{trapElement:r}=this._config;if(t.target===document||t.target===r||r.contains(t.target))return;let d=gt.focusableChildren(r);d.length===0?r.focus():this._lastTabNavDirection===ec?d[d.length-1].focus():d[0].focus()}_handleKeydown(t){t.key===Cb&&(this._lastTabNavDirection=t.shiftKey?ec:Ab)}},rc=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",oc=".sticky-top",Kn="padding-right",ic="margin-right",nn=class{constructor(){this._element=document.body}getWidth(){let t=document.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}hide(){let t=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Kn,r=>r+t),this._setElementAttributes(rc,Kn,r=>r+t),this._setElementAttributes(oc,ic,r=>r-t)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Kn),this._resetElementAttributes(rc,Kn),this._resetElementAttributes(oc,ic)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(t,r,d){let u=this.getWidth(),g=a=>{if(a!==this._element&&window.innerWidth>a.clientWidth+u)return;this._saveInitialAttribute(a,r);let p=window.getComputedStyle(a).getPropertyValue(r);a.style.setProperty(r,`${d(Number.parseFloat(p))}px`)};this._applyManipulationCallback(t,g)}_saveInitialAttribute(t,r){let d=t.style.getPropertyValue(r);d&&Gr.setDataAttribute(t,r,d)}_resetElementAttributes(t,r){let d=u=>{let g=Gr.getDataAttribute(u,r);if(g===null){u.style.removeProperty(r);return}Gr.removeDataAttribute(u,r),u.style.setProperty(r,g)};this._applyManipulationCallback(t,d)}_applyManipulationCallback(t,r){if(Vr(t)){r(t);return}for(let d of gt.find(t,this._element))r(d)}},Rb="modal",Mb="bs.modal",sr=`.${Mb}`,Ib=".data-api",Ob="Escape",Pb=`hide${sr}`,Db=`hidePrevented${sr}`,zc=`hidden${sr}`,Bc=`show${sr}`,Nb=`shown${sr}`,Fb=`resize${sr}`,zb=`click.dismiss${sr}`,Bb=`mousedown.dismiss${sr}`,Hb=`keydown.dismiss${sr}`,Ub=`click${sr}${Ib}`,nc="modal-open",jb="fade",ac="show",ws="modal-static",Wb=".modal.show",Vb=".modal-dialog",Gb=".modal-body",Kb='[data-bs-toggle="modal"]',Yb={backdrop:!0,focus:!0,keyboard:!0},Jb={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"},Mr=class e extends Xe{constructor(t,r){super(t,r),this._dialog=gt.findOne(Vb,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new nn,this._addEventListeners()}static get Default(){return Yb}static get DefaultType(){return Jb}static get NAME(){return Rb}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||this._isTransitioning||X.trigger(this._element,Bc,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(nc),this._adjustDialog(),this._backdrop.show(()=>this._showElement(t)))}hide(){!this._isShown||this._isTransitioning||X.trigger(this._element,Pb).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(ac),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){X.off(window,sr),X.off(this._dialog,sr),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new ia({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new aa({trapElement:this._element})}_showElement(t){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;let r=gt.findOne(Gb,this._dialog);r&&(r.scrollTop=0),sn(this._element),this._element.classList.add(ac);let d=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,X.trigger(this._element,Nb,{relatedTarget:t})};this._queueCallback(d,this._dialog,this._isAnimated())}_addEventListeners(){X.on(this._element,Hb,t=>{if(t.key===Ob){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),X.on(window,Fb,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),X.on(this._element,Bb,t=>{X.one(this._element,zb,r=>{if(!(this._element!==t.target||this._element!==r.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(nc),this._resetAdjustments(),this._scrollBar.reset(),X.trigger(this._element,zc)})}_isAnimated(){return this._element.classList.contains(jb)}_triggerBackdropTransition(){if(X.trigger(this._element,Db).defaultPrevented)return;let r=this._element.scrollHeight>document.documentElement.clientHeight,d=this._element.style.overflowY;d==="hidden"||this._element.classList.contains(ws)||(r||(this._element.style.overflowY="hidden"),this._element.classList.add(ws),this._queueCallback(()=>{this._element.classList.remove(ws),this._queueCallback(()=>{this._element.style.overflowY=d},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){let t=this._element.scrollHeight>document.documentElement.clientHeight,r=this._scrollBar.getWidth(),d=r>0;if(d&&!t){let u=ar()?"paddingLeft":"paddingRight";this._element.style[u]=`${r}px`}if(!d&&t){let u=ar()?"paddingRight":"paddingLeft";this._element.style[u]=`${r}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(t,r){return this.each(function(){let d=e.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof d[t]>"u")throw new TypeError(`No method named "${t}"`);d[t](r)}})}};X.on(document,Ub,Kb,function(e){let t=gt.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&e.preventDefault(),X.one(t,Bc,u=>{u.defaultPrevented||X.one(t,zc,()=>{xi(this)&&this.focus()})});let r=gt.findOne(Wb);r&&Mr.getInstance(r).hide(),Mr.getOrCreateInstance(t).toggle(this)});la(Mr);lr(Mr);var Xb="offcanvas",qb="bs.offcanvas",Kr=`.${qb}`,Hc=".data-api",Qb=`load${Kr}${Hc}`,Zb="Escape",sc="show",lc="showing",dc="hiding",tf="offcanvas-backdrop",Uc=".offcanvas.show",ef=`show${Kr}`,rf=`shown${Kr}`,of=`hide${Kr}`,cc=`hidePrevented${Kr}`,jc=`hidden${Kr}`,nf=`resize${Kr}`,af=`click${Kr}${Hc}`,sf=`keydown.dismiss${Kr}`,lf='[data-bs-toggle="offcanvas"]',df={backdrop:!0,keyboard:!0,scroll:!1},cf={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"},uo=class e extends Xe{constructor(t,r){super(t,r),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return df}static get DefaultType(){return cf}static get NAME(){return Xb}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){if(this._isShown||X.trigger(this._element,ef,{relatedTarget:t}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new nn().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(lc);let d=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(sc),this._element.classList.remove(lc),X.trigger(this._element,rf,{relatedTarget:t})};this._queueCallback(d,this._element,!0)}hide(){if(!this._isShown||X.trigger(this._element,of).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(dc),this._backdrop.hide();let r=()=>{this._element.classList.remove(sc,dc),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new nn().reset(),X.trigger(this._element,jc)};this._queueCallback(r,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){let t=()=>{if(this._config.backdrop==="static"){X.trigger(this._element,cc);return}this.hide()},r=!!this._config.backdrop;return new ia({className:tf,isVisible:r,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:r?t:null})}_initializeFocusTrap(){return new aa({trapElement:this._element})}_addEventListeners(){X.on(this._element,sf,t=>{if(t.key===Zb){if(this._config.keyboard){this.hide();return}X.trigger(this._element,cc)}})}static jQueryInterface(t){return this.each(function(){let r=e.getOrCreateInstance(this,t);if(typeof t=="string"){if(r[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);r[t](this)}})}};X.on(document,af,lf,function(e){let t=gt.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&e.preventDefault(),po(this))return;X.one(t,jc,()=>{xi(this)&&this.focus()});let r=gt.findOne(Uc);r&&r!==t&&uo.getInstance(r).hide(),uo.getOrCreateInstance(t).toggle(this)});X.on(window,Qb,()=>{for(let e of gt.find(Uc))uo.getOrCreateInstance(e).show()});X.on(window,nf,()=>{for(let e of gt.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(e).position!=="fixed"&&uo.getOrCreateInstance(e).hide()});la(uo);lr(uo);var pf=/^aria-[\w-]*$/i,Wc={"*":["class","dir","id","lang","role",pf],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},uf=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),mf=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,gf=(e,t)=>{let r=e.nodeName.toLowerCase();return t.includes(r)?uf.has(r)?!!mf.test(e.nodeValue):!0:t.filter(d=>d instanceof RegExp).some(d=>d.test(r))};function hf(e,t,r){if(!e.length)return e;if(r&&typeof r=="function")return r(e);let u=new window.DOMParser().parseFromString(e,"text/html"),g=[].concat(...u.body.querySelectorAll("*"));for(let a of g){let p=a.nodeName.toLowerCase();if(!Object.keys(t).includes(p)){a.remove();continue}let o=[].concat(...a.attributes),i=[].concat(t["*"]||[],t[p]||[]);for(let n of o)gf(n,i)||a.removeAttribute(n.nodeName)}return u.body.innerHTML}var bf="TemplateFactory",ff={allowList:Wc,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},vf={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},wf={entry:"(string|element|function|null)",selector:"(string|element)"},$s=class extends No{constructor(t){super(),this._config=this._getConfig(t)}static get Default(){return ff}static get DefaultType(){return vf}static get NAME(){return bf}getContent(){return Object.values(this._config.content).map(t=>this._resolvePossibleFunction(t)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(t){return this._checkContent(t),this._config.content={...this._config.content,...t},this}toHtml(){let t=document.createElement("div");t.innerHTML=this._maybeSanitize(this._config.template);for(let[u,g]of Object.entries(this._config.content))this._setContent(t,g,u);let r=t.children[0],d=this._resolvePossibleFunction(this._config.extraClass);return d&&r.classList.add(...d.split(" ")),r}_typeCheckConfig(t){super._typeCheckConfig(t),this._checkContent(t.content)}_checkContent(t){for(let[r,d]of Object.entries(t))super._typeCheckConfig({selector:r,entry:d},wf)}_setContent(t,r,d){let u=gt.findOne(d,t);if(u){if(r=this._resolvePossibleFunction(r),!r){u.remove();return}if(Vr(r)){this._putElementInTemplate(co(r),u);return}if(this._config.html){u.innerHTML=this._maybeSanitize(r);return}u.textContent=r}}_maybeSanitize(t){return this._config.sanitize?hf(t,this._config.allowList,this._config.sanitizeFn):t}_resolvePossibleFunction(t){return We(t,[this])}_putElementInTemplate(t,r){if(this._config.html){r.innerHTML="",r.append(t);return}r.textContent=t.textContent}},yf="tooltip",xf=new Set(["sanitize","allowList","sanitizeFn"]),ys="fade",kf="modal",Yn="show",_f=".tooltip-inner",pc=`.${kf}`,uc="hide.bs.modal",rn="hover",xs="focus",Ef="click",Sf="manual",Tf="hide",Cf="hidden",Af="show",Lf="shown",$f="inserted",Rf="click",Mf="focusin",If="focusout",Of="mouseenter",Pf="mouseleave",Df={AUTO:"auto",TOP:"top",RIGHT:ar()?"left":"right",BOTTOM:"bottom",LEFT:ar()?"right":"left"},Nf={allowList:Wc,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Ff={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"},yi=class e extends Xe{constructor(t,r){if(typeof Wn>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(t,r),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return Nf}static get DefaultType(){return Ff}static get NAME(){return yf}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),X.off(this._element.closest(pc),uc,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;let t=X.trigger(this._element,this.constructor.eventName(Af)),d=(kc(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(t.defaultPrevented||!d)return;this._disposePopper();let u=this._getTipElement();this._element.setAttribute("aria-describedby",u.getAttribute("id"));let{container:g}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(g.append(u),X.trigger(this._element,this.constructor.eventName($f))),this._popper=this._createPopper(u),u.classList.add(Yn),"ontouchstart"in document.documentElement)for(let p of[].concat(...document.body.children))X.on(p,"mouseover",Zn);let a=()=>{X.trigger(this._element,this.constructor.eventName(Lf)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(a,this.tip,this._isAnimated())}hide(){if(!this._isShown()||X.trigger(this._element,this.constructor.eventName(Tf)).defaultPrevented)return;if(this._getTipElement().classList.remove(Yn),"ontouchstart"in document.documentElement)for(let u of[].concat(...document.body.children))X.off(u,"mouseover",Zn);this._activeTrigger[Ef]=!1,this._activeTrigger[xs]=!1,this._activeTrigger[rn]=!1,this._isHovered=null;let d=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),X.trigger(this._element,this.constructor.eventName(Cf)))};this._queueCallback(d,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(t){let r=this._getTemplateFactory(t).toHtml();if(!r)return null;r.classList.remove(ys,Yn),r.classList.add(`bs-${this.constructor.NAME}-auto`);let d=Eg(this.constructor.NAME).toString();return r.setAttribute("id",d),this._isAnimated()&&r.classList.add(ys),r}setContent(t){this._newContent=t,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(t){return this._templateFactory?this._templateFactory.changeContent(t):this._templateFactory=new $s({...this._config,content:t,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[_f]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(t){return this.constructor.getOrCreateInstance(t.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(ys)}_isShown(){return this.tip&&this.tip.classList.contains(Yn)}_createPopper(t){let r=We(this._config.placement,[this,t,this._element]),d=Df[r.toUpperCase()];return tn(this._element,t,this._getPopperConfig(d))}_getOffset(){let{offset:t}=this._config;return typeof t=="string"?t.split(",").map(r=>Number.parseInt(r,10)):typeof t=="function"?r=>t(r,this._element):t}_resolvePossibleFunction(t){return We(t,[this._element])}_getPopperConfig(t){let r={placement:t,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:d=>{this._getTipElement().setAttribute("data-popper-placement",d.state.placement)}}]};return{...r,...We(this._config.popperConfig,[r])}}_setListeners(){let t=this._config.trigger.split(" ");for(let r of t)if(r==="click")X.on(this._element,this.constructor.eventName(Rf),this._config.selector,d=>{this._initializeOnDelegatedTarget(d).toggle()});else if(r!==Sf){let d=r===rn?this.constructor.eventName(Of):this.constructor.eventName(Mf),u=r===rn?this.constructor.eventName(Pf):this.constructor.eventName(If);X.on(this._element,d,this._config.selector,g=>{let a=this._initializeOnDelegatedTarget(g);a._activeTrigger[g.type==="focusin"?xs:rn]=!0,a._enter()}),X.on(this._element,u,this._config.selector,g=>{let a=this._initializeOnDelegatedTarget(g);a._activeTrigger[g.type==="focusout"?xs:rn]=a._element.contains(g.relatedTarget),a._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},X.on(this._element.closest(pc),uc,this._hideModalHandler)}_fixTitle(){let t=this._element.getAttribute("title");t&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",t),this._element.setAttribute("data-bs-original-title",t),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(t,r){clearTimeout(this._timeout),this._timeout=setTimeout(t,r)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(t){let r=Gr.getDataAttributes(this._element);for(let d of Object.keys(r))xf.has(d)&&delete r[d];return t={...r,...typeof t=="object"&&t?t:{}},t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t.container=t.container===!1?document.body:co(t.container),typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),typeof t.title=="number"&&(t.title=t.title.toString()),typeof t.content=="number"&&(t.content=t.content.toString()),t}_getDelegateConfig(){let t={};for(let[r,d]of Object.entries(this._config))this.constructor.Default[r]!==d&&(t[r]=d);return t.selector=!1,t.trigger="manual",t}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(t){return this.each(function(){let r=e.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof r[t]>"u")throw new TypeError(`No method named "${t}"`);r[t]()}})}};lr(yi);var zf="popover",Bf=".popover-header",Hf=".popover-body",Uf={...yi.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},jf={...yi.DefaultType,content:"(null|string|element|function)"},Rs=class e extends yi{static get Default(){return Uf}static get DefaultType(){return jf}static get NAME(){return zf}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[Bf]:this._getTitle(),[Hf]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(t){return this.each(function(){let r=e.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof r[t]>"u")throw new TypeError(`No method named "${t}"`);r[t]()}})}};lr(Rs);var Wf="scrollspy",Vf="bs.scrollspy",Ps=`.${Vf}`,Gf=".data-api",Kf=`activate${Ps}`,mc=`click${Ps}`,Yf=`load${Ps}${Gf}`,Jf="dropdown-item",bi="active",Xf='[data-bs-spy="scroll"]',ks="[href]",qf=".nav, .list-group",gc=".nav-link",Qf=".nav-item",Zf=".list-group-item",tv=`${gc}, ${Qf} > ${gc}, ${Zf}`,ev=".dropdown",rv=".dropdown-toggle",ov={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},iv={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"},sa=class e extends Xe{constructor(t,r){super(t,r),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return ov}static get DefaultType(){return iv}static get NAME(){return Wf}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(let t of this._observableSections.values())this._observer.observe(t)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(t){return t.target=co(t.target)||document.body,t.rootMargin=t.offset?`${t.offset}px 0px -30%`:t.rootMargin,typeof t.threshold=="string"&&(t.threshold=t.threshold.split(",").map(r=>Number.parseFloat(r))),t}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(X.off(this._config.target,mc),X.on(this._config.target,mc,ks,t=>{let r=this._observableSections.get(t.target.hash);if(r){t.preventDefault();let d=this._rootElement||window,u=r.offsetTop-this._element.offsetTop;if(d.scrollTo){d.scrollTo({top:u,behavior:"smooth"});return}d.scrollTop=u}}))}_getNewObserver(){let t={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(r=>this._observerCallback(r),t)}_observerCallback(t){let r=a=>this._targetLinks.get(`#${a.target.id}`),d=a=>{this._previousScrollData.visibleEntryTop=a.target.offsetTop,this._process(r(a))},u=(this._rootElement||document.documentElement).scrollTop,g=u>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=u;for(let a of t){if(!a.isIntersecting){this._activeTarget=null,this._clearActiveClass(r(a));continue}let p=a.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(g&&p){if(d(a),!u)return;continue}!g&&!p&&d(a)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;let t=gt.find(ks,this._config.target);for(let r of t){if(!r.hash||po(r))continue;let d=gt.findOne(decodeURI(r.hash),this._element);xi(d)&&(this._targetLinks.set(decodeURI(r.hash),r),this._observableSections.set(r.hash,d))}}_process(t){this._activeTarget!==t&&(this._clearActiveClass(this._config.target),this._activeTarget=t,t.classList.add(bi),this._activateParents(t),X.trigger(this._element,Kf,{relatedTarget:t}))}_activateParents(t){if(t.classList.contains(Jf)){gt.findOne(rv,t.closest(ev)).classList.add(bi);return}for(let r of gt.parents(t,qf))for(let d of gt.prev(r,tv))d.classList.add(bi)}_clearActiveClass(t){t.classList.remove(bi);let r=gt.find(`${ks}.${bi}`,t);for(let d of r)d.classList.remove(bi)}static jQueryInterface(t){return this.each(function(){let r=e.getOrCreateInstance(this,t);if(typeof t=="string"){if(r[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);r[t]()}})}};X.on(window,Yf,()=>{for(let e of gt.find(Xf))sa.getOrCreateInstance(e)});lr(sa);var nv="tab",av="bs.tab",Bo=`.${av}`,sv=`hide${Bo}`,lv=`hidden${Bo}`,dv=`show${Bo}`,cv=`shown${Bo}`,pv=`click${Bo}`,uv=`keydown${Bo}`,mv=`load${Bo}`,gv="ArrowLeft",hc="ArrowRight",hv="ArrowUp",bc="ArrowDown",_s="Home",fc="End",Do="active",vc="fade",Es="show",bv="dropdown",Vc=".dropdown-toggle",fv=".dropdown-menu",Ss=`:not(${Vc})`,vv='.list-group, .nav, [role="tablist"]',wv=".nav-item, .list-group-item",yv=`.nav-link${Ss}, .list-group-item${Ss}, [role="tab"]${Ss}`,Gc='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Ts=`${yv}, ${Gc}`,xv=`.${Do}[data-bs-toggle="tab"], .${Do}[data-bs-toggle="pill"], .${Do}[data-bs-toggle="list"]`,an=class e extends Xe{constructor(t){super(t),this._parent=this._element.closest(vv),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),X.on(this._element,uv,r=>this._keydown(r)))}static get NAME(){return nv}show(){let t=this._element;if(this._elemIsActive(t))return;let r=this._getActiveElem(),d=r?X.trigger(r,sv,{relatedTarget:t}):null;X.trigger(t,dv,{relatedTarget:r}).defaultPrevented||d&&d.defaultPrevented||(this._deactivate(r,t),this._activate(t,r))}_activate(t,r){if(!t)return;t.classList.add(Do),this._activate(gt.getElementFromSelector(t));let d=()=>{if(t.getAttribute("role")!=="tab"){t.classList.add(Es);return}t.removeAttribute("tabindex"),t.setAttribute("aria-selected",!0),this._toggleDropDown(t,!0),X.trigger(t,cv,{relatedTarget:r})};this._queueCallback(d,t,t.classList.contains(vc))}_deactivate(t,r){if(!t)return;t.classList.remove(Do),t.blur(),this._deactivate(gt.getElementFromSelector(t));let d=()=>{if(t.getAttribute("role")!=="tab"){t.classList.remove(Es);return}t.setAttribute("aria-selected",!1),t.setAttribute("tabindex","-1"),this._toggleDropDown(t,!1),X.trigger(t,lv,{relatedTarget:r})};this._queueCallback(d,t,t.classList.contains(vc))}_keydown(t){if(![gv,hc,hv,bc,_s,fc].includes(t.key))return;t.stopPropagation(),t.preventDefault();let r=this._getChildren().filter(u=>!po(u)),d;if([_s,fc].includes(t.key))d=r[t.key===_s?0:r.length-1];else{let u=[hc,bc].includes(t.key);d=Ms(r,t.target,u,!0)}d&&(d.focus({preventScroll:!0}),e.getOrCreateInstance(d).show())}_getChildren(){return gt.find(Ts,this._parent)}_getActiveElem(){return this._getChildren().find(t=>this._elemIsActive(t))||null}_setInitialAttributes(t,r){this._setAttributeIfNotExists(t,"role","tablist");for(let d of r)this._setInitialAttributesOnChild(d)}_setInitialAttributesOnChild(t){t=this._getInnerElement(t);let r=this._elemIsActive(t),d=this._getOuterElement(t);t.setAttribute("aria-selected",r),d!==t&&this._setAttributeIfNotExists(d,"role","presentation"),r||t.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(t,"role","tab"),this._setInitialAttributesOnTargetPanel(t)}_setInitialAttributesOnTargetPanel(t){let r=gt.getElementFromSelector(t);r&&(this._setAttributeIfNotExists(r,"role","tabpanel"),t.id&&this._setAttributeIfNotExists(r,"aria-labelledby",`${t.id}`))}_toggleDropDown(t,r){let d=this._getOuterElement(t);if(!d.classList.contains(bv))return;let u=(g,a)=>{let p=gt.findOne(g,d);p&&p.classList.toggle(a,r)};u(Vc,Do),u(fv,Es),d.setAttribute("aria-expanded",r)}_setAttributeIfNotExists(t,r,d){t.hasAttribute(r)||t.setAttribute(r,d)}_elemIsActive(t){return t.classList.contains(Do)}_getInnerElement(t){return t.matches(Ts)?t:gt.findOne(Ts,t)}_getOuterElement(t){return t.closest(wv)||t}static jQueryInterface(t){return this.each(function(){let r=e.getOrCreateInstance(this);if(typeof t=="string"){if(r[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);r[t]()}})}};X.on(document,pv,Gc,function(e){["A","AREA"].includes(this.tagName)&&e.preventDefault(),!po(this)&&an.getOrCreateInstance(this).show()});X.on(window,mv,()=>{for(let e of gt.find(xv))an.getOrCreateInstance(e)});lr(an);var kv="toast",_v="bs.toast",go=`.${_v}`,Ev=`mouseover${go}`,Sv=`mouseout${go}`,Tv=`focusin${go}`,Cv=`focusout${go}`,Av=`hide${go}`,Lv=`hidden${go}`,$v=`show${go}`,Rv=`shown${go}`,Mv="fade",wc="hide",Jn="show",Xn="showing",Iv={animation:"boolean",autohide:"boolean",delay:"number"},Ov={animation:!0,autohide:!0,delay:5e3},Fo=class e extends Xe{constructor(t,r){super(t,r),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Ov}static get DefaultType(){return Iv}static get NAME(){return kv}show(){if(X.trigger(this._element,$v).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(Mv);let r=()=>{this._element.classList.remove(Xn),X.trigger(this._element,Rv),this._maybeScheduleHide()};this._element.classList.remove(wc),sn(this._element),this._element.classList.add(Jn,Xn),this._queueCallback(r,this._element,this._config.animation)}hide(){if(!this.isShown()||X.trigger(this._element,Av).defaultPrevented)return;let r=()=>{this._element.classList.add(wc),this._element.classList.remove(Xn,Jn),X.trigger(this._element,Lv)};this._element.classList.add(Xn),this._queueCallback(r,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Jn),super.dispose()}isShown(){return this._element.classList.contains(Jn)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(t,r){switch(t.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=r;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=r;break}}if(r){this._clearTimeout();return}let d=t.relatedTarget;this._element===d||this._element.contains(d)||this._maybeScheduleHide()}_setListeners(){X.on(this._element,Ev,t=>this._onInteraction(t,!0)),X.on(this._element,Sv,t=>this._onInteraction(t,!1)),X.on(this._element,Tv,t=>this._onInteraction(t,!0)),X.on(this._element,Cv,t=>this._onInteraction(t,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(t){return this.each(function(){let r=e.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof r[t]>"u")throw new TypeError(`No method named "${t}"`);r[t](this)}})}};la(Fo);lr(Fo);var wu=On(Kc());var Ho=class extends Error{};Ho.prototype.name="InvalidTokenError";function Pv(e){return decodeURIComponent(atob(e).replace(/(.)/g,(t,r)=>{let d=r.charCodeAt(0).toString(16).toUpperCase();return d.length<2&&(d="0"+d),"%"+d}))}function Dv(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return Pv(t)}catch{return atob(t)}}function Yc(e,t){if(typeof e!="string")throw new Ho("Invalid token specified: must be a string");t||(t={});let r=t.header===!0?0:1,d=e.split(".")[r];if(typeof d!="string")throw new Ho(`Invalid token specified: missing part #${r+1}`);let u;try{u=Dv(d)}catch(g){throw new Ho(`Invalid token specified: invalid base64 for part #${r+1} (${g.message})`)}try{return JSON.parse(u)}catch(g){throw new Ho(`Invalid token specified: invalid json for part #${r+1} (${g.message})`)}}var Nv={debug:()=>{},info:()=>{},warn:()=>{},error:()=>{}},Or,Pr,pa=(e=>(e[e.NONE=0]="NONE",e[e.ERROR=1]="ERROR",e[e.WARN=2]="WARN",e[e.INFO=3]="INFO",e[e.DEBUG=4]="DEBUG",e))(pa||{});(e=>{function t(){Or=3,Pr=Nv}e.reset=t;function r(u){if(!(0<=u&&u<=4))throw new Error("Invalid log level");Or=u}e.setLevel=r;function d(u){Pr=u}e.setLogger=d})(pa||(pa={}));var Ft=class Ir{constructor(t){this._name=t}debug(...t){Or>=4&&Pr.debug(Ir._format(this._name,this._method),...t)}info(...t){Or>=3&&Pr.info(Ir._format(this._name,this._method),...t)}warn(...t){Or>=2&&Pr.warn(Ir._format(this._name,this._method),...t)}error(...t){Or>=1&&Pr.error(Ir._format(this._name,this._method),...t)}throw(t){throw this.error(t),t}create(t){let r=Object.create(this);return r._method=t,r.debug("begin"),r}static createStatic(t,r){let d=new Ir(`${t}.${r}`);return d.debug("begin"),d}static _format(t,r){let d=`[${t}]`;return r?`${d} ${r}:`:d}static debug(t,...r){Or>=4&&Pr.debug(Ir._format(t),...r)}static info(t,...r){Or>=3&&Pr.info(Ir._format(t),...r)}static warn(t,...r){Or>=2&&Pr.warn(Ir._format(t),...r)}static error(t,...r){Or>=1&&Pr.error(Ir._format(t),...r)}};pa.reset();var Fv="10000000-1000-4000-8000-100000000000",Jc=e=>btoa([...new Uint8Array(e)].map(t=>String.fromCharCode(t)).join("")),_i=class dn{static _randomWord(){let t=new Uint32Array(1);return crypto.getRandomValues(t),t[0]}static generateUUIDv4(){return Fv.replace(/[018]/g,r=>(+r^dn._randomWord()&15>>+r/4).toString(16)).replace(/-/g,"")}static generateCodeVerifier(){return dn.generateUUIDv4()+dn.generateUUIDv4()+dn.generateUUIDv4()}static async generateCodeChallenge(t){if(!crypto.subtle)throw new Error("Crypto.subtle is available only in secure contexts (HTTPS).");try{let d=new TextEncoder().encode(t),u=await crypto.subtle.digest("SHA-256",d);return Jc(u).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}catch(r){throw Ft.error("CryptoUtils.generateCodeChallenge",r),r}}static generateBasicAuth(t,r){let u=new TextEncoder().encode([t,r].join(":"));return Jc(u)}},ho=class{constructor(e){this._name=e,this._logger=new Ft(`Event('${this._name}')`),this._callbacks=[]}addHandler(e){return this._callbacks.push(e),()=>this.removeHandler(e)}removeHandler(e){let t=this._callbacks.lastIndexOf(e);t>=0&&this._callbacks.splice(t,1)}async raise(...e){this._logger.debug("raise:",...e);for(let t of this._callbacks)await t(...e)}},zs=class{static decode(e){try{return Yc(e)}catch(t){throw Ft.error("JwtUtils.decode",t),t}}},Xc=class{static center({...e}){var t,r,d;return e.width==null&&(e.width=(t=[800,720,600,480].find(u=>u<=window.outerWidth/1.618))!=null?t:360),(r=e.left)!=null||(e.left=Math.max(0,Math.round(window.screenX+(window.outerWidth-e.width)/2))),e.height!=null&&((d=e.top)!=null||(e.top=Math.max(0,Math.round(window.screenY+(window.outerHeight-e.height)/2)))),e}static serialize(e){return Object.entries(e).filter(([,t])=>t!=null).map(([t,r])=>`${t}=${typeof r!="boolean"?r:r?"yes":"no"}`).join(",")}},Yr=class ca extends ho{constructor(){super(...arguments),this._logger=new Ft(`Timer('${this._name}')`),this._timerHandle=null,this._expiration=0,this._callback=()=>{let t=this._expiration-ca.getEpochTime();this._logger.debug("timer completes in",t),this._expiration<=ca.getEpochTime()&&(this.cancel(),super.raise())}}static getEpochTime(){return Math.floor(Date.now()/1e3)}init(t){let r=this._logger.create("init");t=Math.max(Math.floor(t),1);let d=ca.getEpochTime()+t;if(this.expiration===d&&this._timerHandle){r.debug("skipping since already initialized for expiration at",this.expiration);return}this.cancel(),r.debug("using duration",t),this._expiration=d;let u=Math.min(t,5);this._timerHandle=setInterval(this._callback,u*1e3)}get expiration(){return this._expiration}cancel(){this._logger.create("cancel"),this._timerHandle&&(clearInterval(this._timerHandle),this._timerHandle=null)}},Bs=class{static readParams(e,t="query"){if(!e)throw new TypeError("Invalid URL");let d=new URL(e,"http://127.0.0.1")[t==="fragment"?"hash":"search"];return new URLSearchParams(d.slice(1))}},Hs=";",Uo=class extends Error{constructor(e,t){var r,d,u;if(super(e.error_description||e.error||""),this.form=t,this.name="ErrorResponse",!e.error)throw Ft.error("ErrorResponse","No error passed"),new Error("No error passed");this.error=e.error,this.error_description=(r=e.error_description)!=null?r:null,this.error_uri=(d=e.error_uri)!=null?d:null,this.state=e.userState,this.session_state=(u=e.session_state)!=null?u:null,this.url_state=e.url_state}},Vs=class extends Error{constructor(e){super(e),this.name="ErrorTimeout"}},zv=class{constructor(e){this._logger=new Ft("AccessTokenEvents"),this._expiringTimer=new Yr("Access token expiring"),this._expiredTimer=new Yr("Access token expired"),this._expiringNotificationTimeInSeconds=e.expiringNotificationTimeInSeconds}load(e){let t=this._logger.create("load");if(e.access_token&&e.expires_in!==void 0){let r=e.expires_in;if(t.debug("access token present, remaining duration:",r),r>0){let u=r-this._expiringNotificationTimeInSeconds;u<=0&&(u=1),t.debug("registering expiring timer, raising in",u,"seconds"),this._expiringTimer.init(u)}else t.debug("canceling existing expiring timer because we're past expiration."),this._expiringTimer.cancel();let d=r+1;t.debug("registering expired timer, raising in",d,"seconds"),this._expiredTimer.init(d)}else this._expiringTimer.cancel(),this._expiredTimer.cancel()}unload(){this._logger.debug("unload: canceling existing access token timers"),this._expiringTimer.cancel(),this._expiredTimer.cancel()}addAccessTokenExpiring(e){return this._expiringTimer.addHandler(e)}removeAccessTokenExpiring(e){this._expiringTimer.removeHandler(e)}addAccessTokenExpired(e){return this._expiredTimer.addHandler(e)}removeAccessTokenExpired(e){this._expiredTimer.removeHandler(e)}},Bv=class{constructor(e,t,r,d,u){this._callback=e,this._client_id=t,this._intervalInSeconds=d,this._stopOnError=u,this._logger=new Ft("CheckSessionIFrame"),this._timer=null,this._session_state=null,this._message=a=>{a.origin===this._frame_origin&&a.source===this._frame.contentWindow&&(a.data==="error"?(this._logger.error("error message from check session op iframe"),this._stopOnError&&this.stop()):a.data==="changed"?(this._logger.debug("changed message from check session op iframe"),this.stop(),this._callback()):this._logger.debug(a.data+" message from check session op iframe"))};let g=new URL(r);this._frame_origin=g.origin,this._frame=window.document.createElement("iframe"),this._frame.style.visibility="hidden",this._frame.style.position="fixed",this._frame.style.left="-1000px",this._frame.style.top="0",this._frame.width="0",this._frame.height="0",this._frame.src=g.href}load(){return new Promise(e=>{this._frame.onload=()=>{e()},window.document.body.appendChild(this._frame),window.addEventListener("message",this._message,!1)})}start(e){if(this._session_state===e)return;this._logger.create("start"),this.stop(),this._session_state=e;let t=()=>{!this._frame.contentWindow||!this._session_state||this._frame.contentWindow.postMessage(this._client_id+" "+this._session_state,this._frame_origin)};t(),this._timer=setInterval(t,this._intervalInSeconds*1e3)}stop(){this._logger.create("stop"),this._session_state=null,this._timer&&(clearInterval(this._timer),this._timer=null)}},tp=class{constructor(){this._logger=new Ft("InMemoryWebStorage"),this._data={}}clear(){this._logger.create("clear"),this._data={}}getItem(e){return this._logger.create(`getItem('${e}')`),this._data[e]}setItem(e,t){this._logger.create(`setItem('${e}')`),this._data[e]=t}removeItem(e){this._logger.create(`removeItem('${e}')`),delete this._data[e]}get length(){return Object.getOwnPropertyNames(this._data).length}key(e){return Object.getOwnPropertyNames(this._data)[e]}},Gs=class{constructor(e=[],t=null,r={}){this._jwtHandler=t,this._extraHeaders=r,this._logger=new Ft("JsonService"),this._contentTypes=[],this._contentTypes.push(...e,"application/json"),t&&this._contentTypes.push("application/jwt")}async fetchWithTimeout(e,t={}){let{timeoutInSeconds:r,...d}=t;if(!r)return await fetch(e,d);let u=new AbortController,g=setTimeout(()=>u.abort(),r*1e3);try{return await fetch(e,{...t,signal:u.signal})}catch(a){throw a instanceof DOMException&&a.name==="AbortError"?new Vs("Network timed out"):a}finally{clearTimeout(g)}}async getJson(e,{token:t,credentials:r}={}){let d=this._logger.create("getJson"),u={Accept:this._contentTypes.join(", ")};t&&(d.debug("token passed, setting Authorization header"),u.Authorization="Bearer "+t),this.appendExtraHeaders(u);let g;try{d.debug("url:",e),g=await this.fetchWithTimeout(e,{method:"GET",headers:u,credentials:r})}catch(o){throw d.error("Network Error"),o}d.debug("HTTP response received, status",g.status);let a=g.headers.get("Content-Type");if(a&&!this._contentTypes.find(o=>a.startsWith(o))&&d.throw(new Error(`Invalid response Content-Type: ${a??"undefined"}, from URL: ${e}`)),g.ok&&this._jwtHandler&&a?.startsWith("application/jwt"))return await this._jwtHandler(await g.text());let p;try{p=await g.json()}catch(o){throw d.error("Error parsing JSON response",o),g.ok?o:new Error(`${g.statusText} (${g.status})`)}if(!g.ok)throw d.error("Error from server:",p),p.error?new Uo(p):new Error(`${g.statusText} (${g.status}): ${JSON.stringify(p)}`);return p}async postForm(e,{body:t,basicAuth:r,timeoutInSeconds:d,initCredentials:u}){let g=this._logger.create("postForm"),a={Accept:this._contentTypes.join(", "),"Content-Type":"application/x-www-form-urlencoded"};r!==void 0&&(a.Authorization="Basic "+r),this.appendExtraHeaders(a);let p;try{g.debug("url:",e),p=await this.fetchWithTimeout(e,{method:"POST",headers:a,body:t,timeoutInSeconds:d,credentials:u})}catch(l){throw g.error("Network error"),l}g.debug("HTTP response received, status",p.status);let o=p.headers.get("Content-Type");if(o&&!this._contentTypes.find(l=>o.startsWith(l)))throw new Error(`Invalid response Content-Type: ${o??"undefined"}, from URL: ${e}`);let i=await p.text(),n={};if(i)try{n=JSON.parse(i)}catch(l){throw g.error("Error parsing JSON response",l),p.ok?l:new Error(`${p.statusText} (${p.status})`)}if(!p.ok)throw g.error("Error from server:",n),n.error?new Uo(n,t):new Error(`${p.statusText} (${p.status}): ${JSON.stringify(n)}`);return n}appendExtraHeaders(e){let t=this._logger.create("appendExtraHeaders"),r=Object.keys(this._extraHeaders),d=["authorization","accept","content-type"];r.length!==0&&r.forEach(u=>{if(d.includes(u.toLocaleLowerCase())){t.warn("Protected header could not be overridden",u,d);return}let g=typeof this._extraHeaders[u]=="function"?this._extraHeaders[u]():this._extraHeaders[u];g&&g!==""&&(e[u]=g)})}},Hv=class{constructor(e){this._settings=e,this._logger=new Ft("MetadataService"),this._signingKeys=null,this._metadata=null,this._metadataUrl=this._settings.metadataUrl,this._jsonService=new Gs(["application/jwk-set+json"],null,this._settings.extraHeaders),this._settings.signingKeys&&(this._logger.debug("using signingKeys from settings"),this._signingKeys=this._settings.signingKeys),this._settings.metadata&&(this._logger.debug("using metadata from settings"),this._metadata=this._settings.metadata),this._settings.fetchRequestCredentials&&(this._logger.debug("using fetchRequestCredentials from settings"),this._fetchRequestCredentials=this._settings.fetchRequestCredentials)}resetSigningKeys(){this._signingKeys=null}async getMetadata(){let e=this._logger.create("getMetadata");if(this._metadata)return e.debug("using cached values"),this._metadata;if(!this._metadataUrl)throw e.throw(new Error("No authority or metadataUrl configured on settings")),null;e.debug("getting metadata from",this._metadataUrl);let t=await this._jsonService.getJson(this._metadataUrl,{credentials:this._fetchRequestCredentials});return e.debug("merging remote JSON with seed metadata"),this._metadata=Object.assign({},this._settings.metadataSeed,t),this._metadata}getIssuer(){return this._getMetadataProperty("issuer")}getAuthorizationEndpoint(){return this._getMetadataProperty("authorization_endpoint")}getUserInfoEndpoint(){return this._getMetadataProperty("userinfo_endpoint")}getTokenEndpoint(e=!0){return this._getMetadataProperty("token_endpoint",e)}getCheckSessionIframe(){return this._getMetadataProperty("check_session_iframe",!0)}getEndSessionEndpoint(){return this._getMetadataProperty("end_session_endpoint",!0)}getRevocationEndpoint(e=!0){return this._getMetadataProperty("revocation_endpoint",e)}getKeysEndpoint(e=!0){return this._getMetadataProperty("jwks_uri",e)}async _getMetadataProperty(e,t=!1){let r=this._logger.create(`_getMetadataProperty('${e}')`),d=await this.getMetadata();if(r.debug("resolved"),d[e]===void 0){if(t===!0){r.warn("Metadata does not contain optional property");return}r.throw(new Error("Metadata does not contain property "+e))}return d[e]}async getSigningKeys(){let e=this._logger.create("getSigningKeys");if(this._signingKeys)return e.debug("returning signingKeys from cache"),this._signingKeys;let t=await this.getKeysEndpoint(!1);e.debug("got jwks_uri",t);let r=await this._jsonService.getJson(t);if(e.debug("got key set",r),!Array.isArray(r.keys))throw e.throw(new Error("Missing keys on keyset")),null;return this._signingKeys=r.keys,this._signingKeys}},ep=class{constructor({prefix:e="oidc.",store:t=localStorage}={}){this._logger=new Ft("WebStorageStateStore"),this._store=t,this._prefix=e}async set(e,t){this._logger.create(`set('${e}')`),e=this._prefix+e,await this._store.setItem(e,t)}async get(e){return this._logger.create(`get('${e}')`),e=this._prefix+e,await this._store.getItem(e)}async remove(e){this._logger.create(`remove('${e}')`),e=this._prefix+e;let t=await this._store.getItem(e);return await this._store.removeItem(e),t}async getAllKeys(){this._logger.create("getAllKeys");let e=await this._store.length,t=[];for(let r=0;r<e;r++){let d=await this._store.key(r);d&&d.indexOf(this._prefix)===0&&t.push(d.substr(this._prefix.length))}return t}},Uv="code",jv="openid",Wv="client_secret_post",Vv=60*15,Us=class{constructor({authority:e,metadataUrl:t,metadata:r,signingKeys:d,metadataSeed:u,client_id:g,client_secret:a,response_type:p=Uv,scope:o=jv,redirect_uri:i,post_logout_redirect_uri:n,client_authentication:l=Wv,prompt:s,display:c,max_age:m,ui_locales:h,acr_values:v,resource:k,response_mode:x,filterProtocolClaims:A=!0,loadUserInfo:S=!1,staleStateAgeInSeconds:f=Vv,mergeClaimsStrategy:L={array:"replace"},disablePKCE:$=!1,stateStore:T,revokeTokenAdditionalContentTypes:C,fetchRequestCredentials:w,refreshTokenAllowedScope:y,extraQueryParams:b={},extraTokenParams:_={},extraHeaders:E={}}){if(this.authority=e,t?this.metadataUrl=t:(this.metadataUrl=e,e&&(this.metadataUrl.endsWith("/")||(this.metadataUrl+="/"),this.metadataUrl+=".well-known/openid-configuration")),this.metadata=r,this.metadataSeed=u,this.signingKeys=d,this.client_id=g,this.client_secret=a,this.response_type=p,this.scope=o,this.redirect_uri=i,this.post_logout_redirect_uri=n,this.client_authentication=l,this.prompt=s,this.display=c,this.max_age=m,this.ui_locales=h,this.acr_values=v,this.resource=k,this.response_mode=x,this.filterProtocolClaims=A??!0,this.loadUserInfo=!!S,this.staleStateAgeInSeconds=f,this.mergeClaimsStrategy=L,this.disablePKCE=!!$,this.revokeTokenAdditionalContentTypes=C,this.fetchRequestCredentials=w||"same-origin",T)this.stateStore=T;else{let R=typeof window<"u"?window.localStorage:new tp;this.stateStore=new ep({store:R})}this.refreshTokenAllowedScope=y,this.extraQueryParams=b,this.extraTokenParams=_,this.extraHeaders=E}},Gv=class{constructor(e,t){this._settings=e,this._metadataService=t,this._logger=new Ft("UserInfoService"),this._getClaimsFromJwt=async r=>{let d=this._logger.create("_getClaimsFromJwt");try{let u=zs.decode(r);return d.debug("JWT decoding successful"),u}catch(u){throw d.error("Error parsing JWT response"),u}},this._jsonService=new Gs(void 0,this._getClaimsFromJwt,this._settings.extraHeaders)}async getClaims(e){let t=this._logger.create("getClaims");e||this._logger.throw(new Error("No token passed"));let r=await this._metadataService.getUserInfoEndpoint();t.debug("got userinfo url",r);let d=await this._jsonService.getJson(r,{token:e,credentials:this._settings.fetchRequestCredentials});return t.debug("got claims",d),d}},rp=class{constructor(e,t){this._settings=e,this._metadataService=t,this._logger=new Ft("TokenClient"),this._jsonService=new Gs(this._settings.revokeTokenAdditionalContentTypes,null,this._settings.extraHeaders)}async exchangeCode({grant_type:e="authorization_code",redirect_uri:t=this._settings.redirect_uri,client_id:r=this._settings.client_id,client_secret:d=this._settings.client_secret,...u}){let g=this._logger.create("exchangeCode");r||g.throw(new Error("A client_id is required")),t||g.throw(new Error("A redirect_uri is required")),u.code||g.throw(new Error("A code is required"));let a=new URLSearchParams({grant_type:e,redirect_uri:t});for(let[n,l]of Object.entries(u))l!=null&&a.set(n,l);let p;switch(this._settings.client_authentication){case"client_secret_basic":if(!d)throw g.throw(new Error("A client_secret is required")),null;p=_i.generateBasicAuth(r,d);break;case"client_secret_post":a.append("client_id",r),d&&a.append("client_secret",d);break}let o=await this._metadataService.getTokenEndpoint(!1);g.debug("got token endpoint");let i=await this._jsonService.postForm(o,{body:a,basicAuth:p,initCredentials:this._settings.fetchRequestCredentials});return g.debug("got response"),i}async exchangeCredentials({grant_type:e="password",client_id:t=this._settings.client_id,client_secret:r=this._settings.client_secret,scope:d=this._settings.scope,...u}){let g=this._logger.create("exchangeCredentials");t||g.throw(new Error("A client_id is required"));let a=new URLSearchParams({grant_type:e,scope:d});for(let[n,l]of Object.entries(u))l!=null&&a.set(n,l);let p;switch(this._settings.client_authentication){case"client_secret_basic":if(!r)throw g.throw(new Error("A client_secret is required")),null;p=_i.generateBasicAuth(t,r);break;case"client_secret_post":a.append("client_id",t),r&&a.append("client_secret",r);break}let o=await this._metadataService.getTokenEndpoint(!1);g.debug("got token endpoint");let i=await this._jsonService.postForm(o,{body:a,basicAuth:p,initCredentials:this._settings.fetchRequestCredentials});return g.debug("got response"),i}async exchangeRefreshToken({grant_type:e="refresh_token",client_id:t=this._settings.client_id,client_secret:r=this._settings.client_secret,timeoutInSeconds:d,...u}){let g=this._logger.create("exchangeRefreshToken");t||g.throw(new Error("A client_id is required")),u.refresh_token||g.throw(new Error("A refresh_token is required"));let a=new URLSearchParams({grant_type:e});for(let[n,l]of Object.entries(u))Array.isArray(l)?l.forEach(s=>a.append(n,s)):l!=null&&a.set(n,l);let p;switch(this._settings.client_authentication){case"client_secret_basic":if(!r)throw g.throw(new Error("A client_secret is required")),null;p=_i.generateBasicAuth(t,r);break;case"client_secret_post":a.append("client_id",t),r&&a.append("client_secret",r);break}let o=await this._metadataService.getTokenEndpoint(!1);g.debug("got token endpoint");let i=await this._jsonService.postForm(o,{body:a,basicAuth:p,timeoutInSeconds:d,initCredentials:this._settings.fetchRequestCredentials});return g.debug("got response"),i}async revoke(e){var t;let r=this._logger.create("revoke");e.token||r.throw(new Error("A token is required"));let d=await this._metadataService.getRevocationEndpoint(!1);r.debug(`got revocation endpoint, revoking ${(t=e.token_type_hint)!=null?t:"default token type"}`);let u=new URLSearchParams;for(let[g,a]of Object.entries(e))a!=null&&u.set(g,a);u.set("client_id",this._settings.client_id),this._settings.client_secret&&u.set("client_secret",this._settings.client_secret),await this._jsonService.postForm(d,{body:u}),r.debug("got response")}},Kv=class{constructor(e,t,r){this._settings=e,this._metadataService=t,this._claimsService=r,this._logger=new Ft("ResponseValidator"),this._userInfoService=new Gv(this._settings,this._metadataService),this._tokenClient=new rp(this._settings,this._metadataService)}async validateSigninResponse(e,t){let r=this._logger.create("validateSigninResponse");this._processSigninState(e,t),r.debug("state processed"),await this._processCode(e,t),r.debug("code processed"),e.isOpenId&&this._validateIdTokenAttributes(e),r.debug("tokens validated"),await this._processClaims(e,t?.skipUserInfo,e.isOpenId),r.debug("claims processed")}async validateCredentialsResponse(e,t){let r=this._logger.create("validateCredentialsResponse");e.isOpenId&&e.id_token&&this._validateIdTokenAttributes(e),r.debug("tokens validated"),await this._processClaims(e,t,e.isOpenId),r.debug("claims processed")}async validateRefreshResponse(e,t){var r,d;let u=this._logger.create("validateRefreshResponse");e.userState=t.data,(r=e.session_state)!=null||(e.session_state=t.session_state),(d=e.scope)!=null||(e.scope=t.scope),e.isOpenId&&e.id_token&&(this._validateIdTokenAttributes(e,t.id_token),u.debug("ID Token validated")),e.id_token||(e.id_token=t.id_token,e.profile=t.profile);let g=e.isOpenId&&!!e.id_token;await this._processClaims(e,!1,g),u.debug("claims processed")}validateSignoutResponse(e,t){let r=this._logger.create("validateSignoutResponse");if(t.id!==e.state&&r.throw(new Error("State does not match")),r.debug("state validated"),e.userState=t.data,e.error)throw r.warn("Response was error",e.error),new Uo(e)}_processSigninState(e,t){var r;let d=this._logger.create("_processSigninState");if(t.id!==e.state&&d.throw(new Error("State does not match")),t.client_id||d.throw(new Error("No client_id on state")),t.authority||d.throw(new Error("No authority on state")),this._settings.authority!==t.authority&&d.throw(new Error("authority mismatch on settings vs. signin state")),this._settings.client_id&&this._settings.client_id!==t.client_id&&d.throw(new Error("client_id mismatch on settings vs. signin state")),d.debug("state validated"),e.userState=t.data,e.url_state=t.url_state,(r=e.scope)!=null||(e.scope=t.scope),e.error)throw d.warn("Response was error",e.error),new Uo(e);t.code_verifier&&!e.code&&d.throw(new Error("Expected code in response"))}async _processClaims(e,t=!1,r=!0){let d=this._logger.create("_processClaims");if(e.profile=this._claimsService.filterProtocolClaims(e.profile),t||!this._settings.loadUserInfo||!e.access_token){d.debug("not loading user info");return}d.debug("loading user info");let u=await this._userInfoService.getClaims(e.access_token);d.debug("user info claims received from user info endpoint"),r&&u.sub!==e.profile.sub&&d.throw(new Error("subject from UserInfo response does not match subject in ID Token")),e.profile=this._claimsService.mergeClaims(e.profile,this._claimsService.filterProtocolClaims(u)),d.debug("user info claims received, updated profile:",e.profile)}async _processCode(e,t){let r=this._logger.create("_processCode");if(e.code){r.debug("Validating code");let d=await this._tokenClient.exchangeCode({client_id:t.client_id,client_secret:t.client_secret,code:e.code,redirect_uri:t.redirect_uri,code_verifier:t.code_verifier,...t.extraTokenParams});Object.assign(e,d)}else r.debug("No code to process")}_validateIdTokenAttributes(e,t){var r;let d=this._logger.create("_validateIdTokenAttributes");d.debug("decoding ID Token JWT");let u=zs.decode((r=e.id_token)!=null?r:"");if(u.sub||d.throw(new Error("ID Token is missing a subject claim")),t){let g=zs.decode(t);u.sub!==g.sub&&d.throw(new Error("sub in id_token does not match current sub")),u.auth_time&&u.auth_time!==g.auth_time&&d.throw(new Error("auth_time in id_token does not match original auth_time")),u.azp&&u.azp!==g.azp&&d.throw(new Error("azp in id_token does not match original azp")),!u.azp&&g.azp&&d.throw(new Error("azp not in id_token, but present in original id_token"))}e.profile=u}},ua=class js{constructor(t){this.id=t.id||_i.generateUUIDv4(),this.data=t.data,t.created&&t.created>0?this.created=t.created:this.created=Yr.getEpochTime(),this.request_type=t.request_type,this.url_state=t.url_state}toStorageString(){return new Ft("State").create("toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type,url_state:this.url_state})}static fromStorageString(t){return Ft.createStatic("State","fromStorageString"),Promise.resolve(new js(JSON.parse(t)))}static async clearStaleState(t,r){let d=Ft.createStatic("State","clearStaleState"),u=Yr.getEpochTime()-r,g=await t.getAllKeys();d.debug("got keys",g);for(let a=0;a<g.length;a++){let p=g[a],o=await t.get(p),i=!1;if(o)try{let n=await js.fromStorageString(o);d.debug("got item from key:",p,n.created),n.created<=u&&(i=!0)}catch(n){d.error("Error parsing state for key:",p,n),i=!0}else d.debug("no item in storage for key:",p),i=!0;i&&(d.debug("removed item for key:",p),t.remove(p))}}},op=class Ws extends ua{constructor(t){super(t),this.code_verifier=t.code_verifier,this.code_challenge=t.code_challenge,this.authority=t.authority,this.client_id=t.client_id,this.redirect_uri=t.redirect_uri,this.scope=t.scope,this.client_secret=t.client_secret,this.extraTokenParams=t.extraTokenParams,this.response_mode=t.response_mode,this.skipUserInfo=t.skipUserInfo}static async create(t){let r=t.code_verifier===!0?_i.generateCodeVerifier():t.code_verifier||void 0,d=r?await _i.generateCodeChallenge(r):void 0;return new Ws({...t,code_verifier:r,code_challenge:d})}toStorageString(){return new Ft("SigninState").create("toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type,url_state:this.url_state,code_verifier:this.code_verifier,authority:this.authority,client_id:this.client_id,redirect_uri:this.redirect_uri,scope:this.scope,client_secret:this.client_secret,extraTokenParams:this.extraTokenParams,response_mode:this.response_mode,skipUserInfo:this.skipUserInfo})}static fromStorageString(t){Ft.createStatic("SigninState","fromStorageString");let r=JSON.parse(t);return Ws.create(r)}},ip=class np{constructor(t){this.url=t.url,this.state=t.state}static async create({url:t,authority:r,client_id:d,redirect_uri:u,response_type:g,scope:a,state_data:p,response_mode:o,request_type:i,client_secret:n,nonce:l,url_state:s,resource:c,skipUserInfo:m,extraQueryParams:h,extraTokenParams:v,disablePKCE:k,...x}){if(!t)throw this._logger.error("create: No url passed"),new Error("url");if(!d)throw this._logger.error("create: No client_id passed"),new Error("client_id");if(!u)throw this._logger.error("create: No redirect_uri passed"),new Error("redirect_uri");if(!g)throw this._logger.error("create: No response_type passed"),new Error("response_type");if(!a)throw this._logger.error("create: No scope passed"),new Error("scope");if(!r)throw this._logger.error("create: No authority passed"),new Error("authority");let A=await op.create({data:p,request_type:i,url_state:s,code_verifier:!k,client_id:d,authority:r,redirect_uri:u,response_mode:o,client_secret:n,scope:a,extraTokenParams:v,skipUserInfo:m}),S=new URL(t);S.searchParams.append("client_id",d),S.searchParams.append("redirect_uri",u),S.searchParams.append("response_type",g),S.searchParams.append("scope",a),l&&S.searchParams.append("nonce",l);let f=A.id;s&&(f=`${f}${Hs}${s}`),S.searchParams.append("state",f),A.code_challenge&&(S.searchParams.append("code_challenge",A.code_challenge),S.searchParams.append("code_challenge_method","S256")),c&&(Array.isArray(c)?c:[c]).forEach($=>S.searchParams.append("resource",$));for(let[L,$]of Object.entries({response_mode:o,...x,...h}))$!=null&&S.searchParams.append(L,$.toString());return new np({url:S.href,state:A})}};ip._logger=new Ft("SigninRequest");var Yv=ip,Jv="openid",Ns=class{constructor(e){if(this.access_token="",this.token_type="",this.profile={},this.state=e.get("state"),this.session_state=e.get("session_state"),this.state){let t=decodeURIComponent(this.state).split(Hs);this.state=t[0],t.length>1&&(this.url_state=t.slice(1).join(Hs))}this.error=e.get("error"),this.error_description=e.get("error_description"),this.error_uri=e.get("error_uri"),this.code=e.get("code")}get expires_in(){if(this.expires_at!==void 0)return this.expires_at-Yr.getEpochTime()}set expires_in(e){typeof e=="string"&&(e=Number(e)),e!==void 0&&e>=0&&(this.expires_at=Math.floor(e)+Yr.getEpochTime())}get isOpenId(){var e;return((e=this.scope)==null?void 0:e.split(" ").includes(Jv))||!!this.id_token}},Xv=class{constructor({url:e,state_data:t,id_token_hint:r,post_logout_redirect_uri:d,extraQueryParams:u,request_type:g,client_id:a}){if(this._logger=new Ft("SignoutRequest"),!e)throw this._logger.error("ctor: No url passed"),new Error("url");let p=new URL(e);r&&p.searchParams.append("id_token_hint",r),a&&p.searchParams.append("client_id",a),d&&(p.searchParams.append("post_logout_redirect_uri",d),t&&(this.state=new ua({data:t,request_type:g}),p.searchParams.append("state",this.state.id)));for(let[o,i]of Object.entries({...u}))i!=null&&p.searchParams.append(o,i.toString());this.url=p.href}},qv=class{constructor(e){this.state=e.get("state"),this.error=e.get("error"),this.error_description=e.get("error_description"),this.error_uri=e.get("error_uri")}},Qv=["nbf","jti","auth_time","nonce","acr","amr","azp","at_hash"],Zv=["sub","iss","aud","exp","iat"],t0=class{constructor(e){this._settings=e,this._logger=new Ft("ClaimsService")}filterProtocolClaims(e){let t={...e};if(this._settings.filterProtocolClaims){let r;Array.isArray(this._settings.filterProtocolClaims)?r=this._settings.filterProtocolClaims:r=Qv;for(let d of r)Zv.includes(d)||delete t[d]}return t}mergeClaims(e,t){let r={...e};for(let[d,u]of Object.entries(t))if(r[d]!==u)if(Array.isArray(r[d])||Array.isArray(u))if(this._settings.mergeClaimsStrategy.array=="replace")r[d]=u;else{let g=Array.isArray(r[d])?r[d]:[r[d]];for(let a of Array.isArray(u)?u:[u])g.includes(a)||g.push(a);r[d]=g}else typeof r[d]=="object"&&typeof u=="object"?r[d]=this.mergeClaims(r[d],u):r[d]=u;return r}},e0=class{constructor(e,t){this._logger=new Ft("OidcClient"),this.settings=e instanceof Us?e:new Us(e),this.metadataService=t??new Hv(this.settings),this._claimsService=new t0(this.settings),this._validator=new Kv(this.settings,this.metadataService,this._claimsService),this._tokenClient=new rp(this.settings,this.metadataService)}async createSigninRequest({state:e,request:t,request_uri:r,request_type:d,id_token_hint:u,login_hint:g,skipUserInfo:a,nonce:p,url_state:o,response_type:i=this.settings.response_type,scope:n=this.settings.scope,redirect_uri:l=this.settings.redirect_uri,prompt:s=this.settings.prompt,display:c=this.settings.display,max_age:m=this.settings.max_age,ui_locales:h=this.settings.ui_locales,acr_values:v=this.settings.acr_values,resource:k=this.settings.resource,response_mode:x=this.settings.response_mode,extraQueryParams:A=this.settings.extraQueryParams,extraTokenParams:S=this.settings.extraTokenParams}){let f=this._logger.create("createSigninRequest");if(i!=="code")throw new Error("Only the Authorization Code flow (with PKCE) is supported");let L=await this.metadataService.getAuthorizationEndpoint();f.debug("Received authorization endpoint",L);let $=await Yv.create({url:L,authority:this.settings.authority,client_id:this.settings.client_id,redirect_uri:l,response_type:i,scope:n,state_data:e,url_state:o,prompt:s,display:c,max_age:m,ui_locales:h,id_token_hint:u,login_hint:g,acr_values:v,resource:k,request:t,request_uri:r,extraQueryParams:A,extraTokenParams:S,request_type:d,response_mode:x,client_secret:this.settings.client_secret,skipUserInfo:a,nonce:p,disablePKCE:this.settings.disablePKCE});await this.clearStaleState();let T=$.state;return await this.settings.stateStore.set(T.id,T.toStorageString()),$}async readSigninResponseState(e,t=!1){let r=this._logger.create("readSigninResponseState"),d=new Ns(Bs.readParams(e,this.settings.response_mode));if(!d.state)throw r.throw(new Error("No state in response")),null;let u=await this.settings.stateStore[t?"remove":"get"](d.state);if(!u)throw r.throw(new Error("No matching state found in storage")),null;return{state:await op.fromStorageString(u),response:d}}async processSigninResponse(e){let t=this._logger.create("processSigninResponse"),{state:r,response:d}=await this.readSigninResponseState(e,!0);return t.debug("received state from storage; validating response"),await this._validator.validateSigninResponse(d,r),d}async processResourceOwnerPasswordCredentials({username:e,password:t,skipUserInfo:r=!1,extraTokenParams:d={}}){let u=await this._tokenClient.exchangeCredentials({username:e,password:t,...d}),g=new Ns(new URLSearchParams);return Object.assign(g,u),await this._validator.validateCredentialsResponse(g,r),g}async useRefreshToken({state:e,redirect_uri:t,resource:r,timeoutInSeconds:d,extraTokenParams:u}){var g;let a=this._logger.create("useRefreshToken"),p;if(this.settings.refreshTokenAllowedScope===void 0)p=e.scope;else{let n=this.settings.refreshTokenAllowedScope.split(" ");p=(((g=e.scope)==null?void 0:g.split(" "))||[]).filter(s=>n.includes(s)).join(" ")}let o=await this._tokenClient.exchangeRefreshToken({refresh_token:e.refresh_token,scope:p,redirect_uri:t,resource:r,timeoutInSeconds:d,...u}),i=new Ns(new URLSearchParams);return Object.assign(i,o),a.debug("validating response",i),await this._validator.validateRefreshResponse(i,{...e,scope:p}),i}async createSignoutRequest({state:e,id_token_hint:t,client_id:r,request_type:d,post_logout_redirect_uri:u=this.settings.post_logout_redirect_uri,extraQueryParams:g=this.settings.extraQueryParams}={}){let a=this._logger.create("createSignoutRequest"),p=await this.metadataService.getEndSessionEndpoint();if(!p)throw a.throw(new Error("No end session endpoint")),null;a.debug("Received end session endpoint",p),!r&&u&&!t&&(r=this.settings.client_id);let o=new Xv({url:p,id_token_hint:t,client_id:r,post_logout_redirect_uri:u,state_data:e,extraQueryParams:g,request_type:d});await this.clearStaleState();let i=o.state;return i&&(a.debug("Signout request has state to persist"),await this.settings.stateStore.set(i.id,i.toStorageString())),o}async readSignoutResponseState(e,t=!1){let r=this._logger.create("readSignoutResponseState"),d=new qv(Bs.readParams(e,this.settings.response_mode));if(!d.state){if(r.debug("No state in response"),d.error)throw r.warn("Response was error:",d.error),new Uo(d);return{state:void 0,response:d}}let u=await this.settings.stateStore[t?"remove":"get"](d.state);if(!u)throw r.throw(new Error("No matching state found in storage")),null;return{state:await ua.fromStorageString(u),response:d}}async processSignoutResponse(e){let t=this._logger.create("processSignoutResponse"),{state:r,response:d}=await this.readSignoutResponseState(e,!0);return r?(t.debug("Received state from storage; validating response"),this._validator.validateSignoutResponse(d,r)):t.debug("No state from storage; skipping response validation"),d}clearStaleState(){return this._logger.create("clearStaleState"),ua.clearStaleState(this.settings.stateStore,this.settings.staleStateAgeInSeconds)}async revokeToken(e,t){return this._logger.create("revokeToken"),await this._tokenClient.revoke({token:e,token_type_hint:t})}},r0=class{constructor(e){this._userManager=e,this._logger=new Ft("SessionMonitor"),this._start=async t=>{let r=t.session_state;if(!r)return;let d=this._logger.create("_start");if(t.profile?(this._sub=t.profile.sub,d.debug("session_state",r,", sub",this._sub)):(this._sub=void 0,d.debug("session_state",r,", anonymous user")),this._checkSessionIFrame){this._checkSessionIFrame.start(r);return}try{let u=await this._userManager.metadataService.getCheckSessionIframe();if(u){d.debug("initializing check session iframe");let g=this._userManager.settings.client_id,a=this._userManager.settings.checkSessionIntervalInSeconds,p=this._userManager.settings.stopCheckSessionOnError,o=new Bv(this._callback,g,u,a,p);await o.load(),this._checkSessionIFrame=o,o.start(r)}else d.warn("no check session iframe found in the metadata")}catch(u){d.error("Error from getCheckSessionIframe:",u instanceof Error?u.message:u)}},this._stop=()=>{let t=this._logger.create("_stop");if(this._sub=void 0,this._checkSessionIFrame&&this._checkSessionIFrame.stop(),this._userManager.settings.monitorAnonymousSession){let r=setInterval(async()=>{clearInterval(r);try{let d=await this._userManager.querySessionStatus();if(d){let u={session_state:d.session_state,profile:d.sub?{sub:d.sub}:null};this._start(u)}}catch(d){t.error("error from querySessionStatus",d instanceof Error?d.message:d)}},1e3)}},this._callback=async()=>{let t=this._logger.create("_callback");try{let r=await this._userManager.querySessionStatus(),d=!0;r&&this._checkSessionIFrame?r.sub===this._sub?(d=!1,this._checkSessionIFrame.start(r.session_state),t.debug("same sub still logged in at OP, session state has changed, restarting check session iframe; session_state",r.session_state),await this._userManager.events._raiseUserSessionChanged()):t.debug("different subject signed into OP",r.sub):t.debug("subject no longer signed into OP"),d?this._sub?await this._userManager.events._raiseUserSignedOut():await this._userManager.events._raiseUserSignedIn():t.debug("no change in session detected, no event to raise")}catch(r){this._sub&&(t.debug("Error calling queryCurrentSigninSession; raising signed out event",r),await this._userManager.events._raiseUserSignedOut())}},e||this._logger.throw(new Error("No user manager passed")),this._userManager.events.addUserLoaded(this._start),this._userManager.events.addUserUnloaded(this._stop),this._init().catch(t=>{this._logger.error(t)})}async _init(){this._logger.create("_init");let e=await this._userManager.getUser();if(e)this._start(e);else if(this._userManager.settings.monitorAnonymousSession){let t=await this._userManager.querySessionStatus();if(t){let r={session_state:t.session_state,profile:t.sub?{sub:t.sub}:null};this._start(r)}}}},Fs=class ap{constructor(t){var r;this.id_token=t.id_token,this.session_state=(r=t.session_state)!=null?r:null,this.access_token=t.access_token,this.refresh_token=t.refresh_token,this.token_type=t.token_type,this.scope=t.scope,this.profile=t.profile,this.expires_at=t.expires_at,this.state=t.userState,this.url_state=t.url_state}get expires_in(){if(this.expires_at!==void 0)return this.expires_at-Yr.getEpochTime()}set expires_in(t){t!==void 0&&(this.expires_at=Math.floor(t)+Yr.getEpochTime())}get expired(){let t=this.expires_in;if(t!==void 0)return t<=0}get scopes(){var t,r;return(r=(t=this.scope)==null?void 0:t.split(" "))!=null?r:[]}toStorageString(){return new Ft("User").create("toStorageString"),JSON.stringify({id_token:this.id_token,session_state:this.session_state,access_token:this.access_token,refresh_token:this.refresh_token,token_type:this.token_type,scope:this.scope,profile:this.profile,expires_at:this.expires_at})}static fromStorageString(t){return Ft.createStatic("User","fromStorageString"),new ap(JSON.parse(t))}},qc="oidc-client",sp=class{constructor(){this._abort=new ho("Window navigation aborted"),this._disposeHandlers=new Set,this._window=null}async navigate(e){let t=this._logger.create("navigate");if(!this._window)throw new Error("Attempted to navigate on a disposed window");t.debug("setting URL in window"),this._window.location.replace(e.url);let{url:r,keepOpen:d}=await new Promise((u,g)=>{let a=p=>{var o;let i=p.data,n=(o=e.scriptOrigin)!=null?o:window.location.origin;if(!(p.origin!==n||i?.source!==qc)){try{let l=Bs.readParams(i.url,e.response_mode).get("state");if(l||t.warn("no state found in response url"),p.source!==this._window&&l!==e.state)return}catch{this._dispose(),g(new Error("Invalid response from window"))}u(i)}};window.addEventListener("message",a,!1),this._disposeHandlers.add(()=>window.removeEventListener("message",a,!1)),this._disposeHandlers.add(this._abort.addHandler(p=>{this._dispose(),g(p)}))});return t.debug("got response from window"),this._dispose(),d||this.close(),{url:r}}_dispose(){this._logger.create("_dispose");for(let e of this._disposeHandlers)e();this._disposeHandlers.clear()}static _notifyParent(e,t,r=!1,d=window.location.origin){e.postMessage({source:qc,url:t,keepOpen:r},d)}},lp={location:!1,toolbar:!1,height:640,closePopupWindowAfterInSeconds:-1},dp="_blank",o0=60,i0=2,cp=10,n0=class extends Us{constructor(e){let{popup_redirect_uri:t=e.redirect_uri,popup_post_logout_redirect_uri:r=e.post_logout_redirect_uri,popupWindowFeatures:d=lp,popupWindowTarget:u=dp,redirectMethod:g="assign",redirectTarget:a="self",iframeNotifyParentOrigin:p=e.iframeNotifyParentOrigin,iframeScriptOrigin:o=e.iframeScriptOrigin,silent_redirect_uri:i=e.redirect_uri,silentRequestTimeoutInSeconds:n=cp,automaticSilentRenew:l=!0,validateSubOnSilentRenew:s=!0,includeIdTokenInSilentRenew:c=!1,monitorSession:m=!1,monitorAnonymousSession:h=!1,checkSessionIntervalInSeconds:v=i0,query_status_response_type:k="code",stopCheckSessionOnError:x=!0,revokeTokenTypes:A=["access_token","refresh_token"],revokeTokensOnSignout:S=!1,includeIdTokenInSilentSignout:f=!1,accessTokenExpiringNotificationTimeInSeconds:L=o0,userStore:$}=e;if(super(e),this.popup_redirect_uri=t,this.popup_post_logout_redirect_uri=r,this.popupWindowFeatures=d,this.popupWindowTarget=u,this.redirectMethod=g,this.redirectTarget=a,this.iframeNotifyParentOrigin=p,this.iframeScriptOrigin=o,this.silent_redirect_uri=i,this.silentRequestTimeoutInSeconds=n,this.automaticSilentRenew=l,this.validateSubOnSilentRenew=s,this.includeIdTokenInSilentRenew=c,this.monitorSession=m,this.monitorAnonymousSession=h,this.checkSessionIntervalInSeconds=v,this.stopCheckSessionOnError=x,this.query_status_response_type=k,this.revokeTokenTypes=A,this.revokeTokensOnSignout=S,this.includeIdTokenInSilentSignout=f,this.accessTokenExpiringNotificationTimeInSeconds=L,$)this.userStore=$;else{let T=typeof window<"u"?window.sessionStorage:new tp;this.userStore=new ep({store:T})}}},Qc=class pp extends sp{constructor({silentRequestTimeoutInSeconds:t=cp}){super(),this._logger=new Ft("IFrameWindow"),this._timeoutInSeconds=t,this._frame=pp.createHiddenIframe(),this._window=this._frame.contentWindow}static createHiddenIframe(){let t=window.document.createElement("iframe");return t.style.visibility="hidden",t.style.position="fixed",t.style.left="-1000px",t.style.top="0",t.width="0",t.height="0",window.document.body.appendChild(t),t}async navigate(t){this._logger.debug("navigate: Using timeout of:",this._timeoutInSeconds);let r=setTimeout(()=>void this._abort.raise(new Vs("IFrame timed out without a response")),this._timeoutInSeconds*1e3);return this._disposeHandlers.add(()=>clearTimeout(r)),await super.navigate(t)}close(){var t;this._frame&&(this._frame.parentNode&&(this._frame.addEventListener("load",r=>{var d;let u=r.target;(d=u.parentNode)==null||d.removeChild(u),this._abort.raise(new Error("IFrame removed from DOM"))},!0),(t=this._frame.contentWindow)==null||t.location.replace("about:blank")),this._frame=null),this._window=null}static notifyParent(t,r){return super._notifyParent(window.parent,t,!1,r)}},a0=class{constructor(e){this._settings=e,this._logger=new Ft("IFrameNavigator")}async prepare({silentRequestTimeoutInSeconds:e=this._settings.silentRequestTimeoutInSeconds}){return new Qc({silentRequestTimeoutInSeconds:e})}async callback(e){this._logger.create("callback"),Qc.notifyParent(e,this._settings.iframeNotifyParentOrigin)}},s0=500,l0=1e3,Zc=class extends sp{constructor({popupWindowTarget:e=dp,popupWindowFeatures:t={}}){super(),this._logger=new Ft("PopupWindow");let r=Xc.center({...lp,...t});this._window=window.open(void 0,e,Xc.serialize(r)),t.closePopupWindowAfterInSeconds&&t.closePopupWindowAfterInSeconds>0&&setTimeout(()=>{if(!this._window||typeof this._window.closed!="boolean"||this._window.closed){this._abort.raise(new Error("Popup blocked by user"));return}this.close()},t.closePopupWindowAfterInSeconds*l0)}async navigate(e){var t;(t=this._window)==null||t.focus();let r=setInterval(()=>{(!this._window||this._window.closed)&&this._abort.raise(new Error("Popup closed by user"))},s0);return this._disposeHandlers.add(()=>clearInterval(r)),await super.navigate(e)}close(){this._window&&(this._window.closed||(this._window.close(),this._abort.raise(new Error("Popup closed")))),this._window=null}static notifyOpener(e,t){if(!window.opener)throw new Error("No window.opener. Can't complete notification.");return super._notifyParent(window.opener,e,t)}},d0=class{constructor(e){this._settings=e,this._logger=new Ft("PopupNavigator")}async prepare({popupWindowFeatures:e=this._settings.popupWindowFeatures,popupWindowTarget:t=this._settings.popupWindowTarget}){return new Zc({popupWindowFeatures:e,popupWindowTarget:t})}async callback(e,{keepOpen:t=!1}){this._logger.create("callback"),Zc.notifyOpener(e,t)}},c0=class{constructor(e){this._settings=e,this._logger=new Ft("RedirectNavigator")}async prepare({redirectMethod:e=this._settings.redirectMethod,redirectTarget:t=this._settings.redirectTarget}){var r;this._logger.create("prepare");let d=window.self;t==="top"&&(d=(r=window.top)!=null?r:window.self);let u=d.location[e].bind(d.location),g;return{navigate:async a=>{this._logger.create("navigate");let p=new Promise((o,i)=>{g=i});return u(a.url),await p},close:()=>{this._logger.create("close"),g?.(new Error("Redirect aborted")),d.stop()}}}async callback(){}},p0=class extends zv{constructor(e){super({expiringNotificationTimeInSeconds:e.accessTokenExpiringNotificationTimeInSeconds}),this._logger=new Ft("UserManagerEvents"),this._userLoaded=new ho("User loaded"),this._userUnloaded=new ho("User unloaded"),this._silentRenewError=new ho("Silent renew error"),this._userSignedIn=new ho("User signed in"),this._userSignedOut=new ho("User signed out"),this._userSessionChanged=new ho("User session changed")}async load(e,t=!0){super.load(e),t&&await this._userLoaded.raise(e)}async unload(){super.unload(),await this._userUnloaded.raise()}addUserLoaded(e){return this._userLoaded.addHandler(e)}removeUserLoaded(e){return this._userLoaded.removeHandler(e)}addUserUnloaded(e){return this._userUnloaded.addHandler(e)}removeUserUnloaded(e){return this._userUnloaded.removeHandler(e)}addSilentRenewError(e){return this._silentRenewError.addHandler(e)}removeSilentRenewError(e){return this._silentRenewError.removeHandler(e)}async _raiseSilentRenewError(e){await this._silentRenewError.raise(e)}addUserSignedIn(e){return this._userSignedIn.addHandler(e)}removeUserSignedIn(e){this._userSignedIn.removeHandler(e)}async _raiseUserSignedIn(){await this._userSignedIn.raise()}addUserSignedOut(e){return this._userSignedOut.addHandler(e)}removeUserSignedOut(e){this._userSignedOut.removeHandler(e)}async _raiseUserSignedOut(){await this._userSignedOut.raise()}addUserSessionChanged(e){return this._userSessionChanged.addHandler(e)}removeUserSessionChanged(e){this._userSessionChanged.removeHandler(e)}async _raiseUserSessionChanged(){await this._userSessionChanged.raise()}},u0=class{constructor(e){this._userManager=e,this._logger=new Ft("SilentRenewService"),this._isStarted=!1,this._retryTimer=new Yr("Retry Silent Renew"),this._tokenExpiring=async()=>{let t=this._logger.create("_tokenExpiring");try{await this._userManager.signinSilent(),t.debug("silent token renewal successful")}catch(r){if(r instanceof Vs){t.warn("ErrorTimeout from signinSilent:",r,"retry in 5s"),this._retryTimer.init(5);return}t.error("Error from signinSilent:",r),await this._userManager.events._raiseSilentRenewError(r)}}}async start(){let e=this._logger.create("start");if(!this._isStarted){this._isStarted=!0,this._userManager.events.addAccessTokenExpiring(this._tokenExpiring),this._retryTimer.addHandler(this._tokenExpiring);try{await this._userManager.getUser()}catch(t){e.error("getUser error",t)}}}stop(){this._isStarted&&(this._retryTimer.cancel(),this._retryTimer.removeHandler(this._tokenExpiring),this._userManager.events.removeAccessTokenExpiring(this._tokenExpiring),this._isStarted=!1)}},m0=class{constructor(e){this.refresh_token=e.refresh_token,this.id_token=e.id_token,this.session_state=e.session_state,this.scope=e.scope,this.profile=e.profile,this.data=e.state}},ma=class{constructor(e,t,r,d){this._logger=new Ft("UserManager"),this.settings=new n0(e),this._client=new e0(e),this._redirectNavigator=t??new c0(this.settings),this._popupNavigator=r??new d0(this.settings),this._iframeNavigator=d??new a0(this.settings),this._events=new p0(this.settings),this._silentRenewService=new u0(this),this.settings.automaticSilentRenew&&this.startSilentRenew(),this._sessionMonitor=null,this.settings.monitorSession&&(this._sessionMonitor=new r0(this))}get events(){return this._events}get metadataService(){return this._client.metadataService}async getUser(){let e=this._logger.create("getUser"),t=await this._loadUser();return t?(e.info("user loaded"),await this._events.load(t,!1),t):(e.info("user not found in storage"),null)}async removeUser(){let e=this._logger.create("removeUser");await this.storeUser(null),e.info("user removed from storage"),await this._events.unload()}async signinRedirect(e={}){this._logger.create("signinRedirect");let{redirectMethod:t,...r}=e,d=await this._redirectNavigator.prepare({redirectMethod:t});await this._signinStart({request_type:"si:r",...r},d)}async signinRedirectCallback(e=window.location.href){let t=this._logger.create("signinRedirectCallback"),r=await this._signinEnd(e);return r.profile&&r.profile.sub?t.info("success, signed in subject",r.profile.sub):t.info("no subject"),r}async signinResourceOwnerCredentials({username:e,password:t,skipUserInfo:r=!1}){let d=this._logger.create("signinResourceOwnerCredential"),u=await this._client.processResourceOwnerPasswordCredentials({username:e,password:t,skipUserInfo:r,extraTokenParams:this.settings.extraTokenParams});d.debug("got signin response");let g=await this._buildUser(u);return g.profile&&g.profile.sub?d.info("success, signed in subject",g.profile.sub):d.info("no subject"),g}async signinPopup(e={}){let t=this._logger.create("signinPopup"),{popupWindowFeatures:r,popupWindowTarget:d,...u}=e,g=this.settings.popup_redirect_uri;g||t.throw(new Error("No popup_redirect_uri configured"));let a=await this._popupNavigator.prepare({popupWindowFeatures:r,popupWindowTarget:d}),p=await this._signin({request_type:"si:p",redirect_uri:g,display:"popup",...u},a);return p&&(p.profile&&p.profile.sub?t.info("success, signed in subject",p.profile.sub):t.info("no subject")),p}async signinPopupCallback(e=window.location.href,t=!1){let r=this._logger.create("signinPopupCallback");await this._popupNavigator.callback(e,{keepOpen:t}),r.info("success")}async signinSilent(e={}){var t;let r=this._logger.create("signinSilent"),{silentRequestTimeoutInSeconds:d,...u}=e,g=await this._loadUser();if(g?.refresh_token){r.debug("using refresh token");let i=new m0(g);return await this._useRefreshToken({state:i,redirect_uri:u.redirect_uri,resource:u.resource,extraTokenParams:u.extraTokenParams,timeoutInSeconds:d})}let a=this.settings.silent_redirect_uri;a||r.throw(new Error("No silent_redirect_uri configured"));let p;g&&this.settings.validateSubOnSilentRenew&&(r.debug("subject prior to silent renew:",g.profile.sub),p=g.profile.sub);let o=await this._iframeNavigator.prepare({silentRequestTimeoutInSeconds:d});return g=await this._signin({request_type:"si:s",redirect_uri:a,prompt:"none",id_token_hint:this.settings.includeIdTokenInSilentRenew?g?.id_token:void 0,...u},o,p),g&&((t=g.profile)!=null&&t.sub?r.info("success, signed in subject",g.profile.sub):r.info("no subject")),g}async _useRefreshToken(e){let t=await this._client.useRefreshToken({...e,timeoutInSeconds:this.settings.silentRequestTimeoutInSeconds}),r=new Fs({...e.state,...t});return await this.storeUser(r),await this._events.load(r),r}async signinSilentCallback(e=window.location.href){let t=this._logger.create("signinSilentCallback");await this._iframeNavigator.callback(e),t.info("success")}async signinCallback(e=window.location.href){let{state:t}=await this._client.readSigninResponseState(e);switch(t.request_type){case"si:r":return await this.signinRedirectCallback(e);case"si:p":return await this.signinPopupCallback(e);case"si:s":return await this.signinSilentCallback(e);default:throw new Error("invalid response_type in state")}}async signoutCallback(e=window.location.href,t=!1){let{state:r}=await this._client.readSignoutResponseState(e);if(r)switch(r.request_type){case"so:r":await this.signoutRedirectCallback(e);break;case"so:p":await this.signoutPopupCallback(e,t);break;case"so:s":await this.signoutSilentCallback(e);break;default:throw new Error("invalid response_type in state")}}async querySessionStatus(e={}){let t=this._logger.create("querySessionStatus"),{silentRequestTimeoutInSeconds:r,...d}=e,u=this.settings.silent_redirect_uri;u||t.throw(new Error("No silent_redirect_uri configured"));let g=await this._loadUser(),a=await this._iframeNavigator.prepare({silentRequestTimeoutInSeconds:r}),p=await this._signinStart({request_type:"si:s",redirect_uri:u,prompt:"none",id_token_hint:this.settings.includeIdTokenInSilentRenew?g?.id_token:void 0,response_type:this.settings.query_status_response_type,scope:"openid",skipUserInfo:!0,...d},a);try{let o=await this._client.processSigninResponse(p.url);return t.debug("got signin response"),o.session_state&&o.profile.sub?(t.info("success for subject",o.profile.sub),{session_state:o.session_state,sub:o.profile.sub}):(t.info("success, user not authenticated"),null)}catch(o){if(this.settings.monitorAnonymousSession&&o instanceof Uo)switch(o.error){case"login_required":case"consent_required":case"interaction_required":case"account_selection_required":return t.info("success for anonymous user"),{session_state:o.session_state}}throw o}}async _signin(e,t,r){let d=await this._signinStart(e,t);return await this._signinEnd(d.url,r)}async _signinStart(e,t){let r=this._logger.create("_signinStart");try{let d=await this._client.createSigninRequest(e);return r.debug("got signin request"),await t.navigate({url:d.url,state:d.state.id,response_mode:d.state.response_mode,scriptOrigin:this.settings.iframeScriptOrigin})}catch(d){throw r.debug("error after preparing navigator, closing navigator window"),t.close(),d}}async _signinEnd(e,t){let r=this._logger.create("_signinEnd"),d=await this._client.processSigninResponse(e);return r.debug("got signin response"),await this._buildUser(d,t)}async _buildUser(e,t){let r=this._logger.create("_buildUser"),d=new Fs(e);if(t){if(t!==d.profile.sub)throw r.debug("current user does not match user returned from signin. sub from signin:",d.profile.sub),new Uo({...e,error:"login_required"});r.debug("current user matches user returned from signin")}return await this.storeUser(d),r.debug("user stored"),await this._events.load(d),d}async signoutRedirect(e={}){let t=this._logger.create("signoutRedirect"),{redirectMethod:r,...d}=e,u=await this._redirectNavigator.prepare({redirectMethod:r});await this._signoutStart({request_type:"so:r",post_logout_redirect_uri:this.settings.post_logout_redirect_uri,...d},u),t.info("success")}async signoutRedirectCallback(e=window.location.href){let t=this._logger.create("signoutRedirectCallback"),r=await this._signoutEnd(e);return t.info("success"),r}async signoutPopup(e={}){let t=this._logger.create("signoutPopup"),{popupWindowFeatures:r,popupWindowTarget:d,...u}=e,g=this.settings.popup_post_logout_redirect_uri,a=await this._popupNavigator.prepare({popupWindowFeatures:r,popupWindowTarget:d});await this._signout({request_type:"so:p",post_logout_redirect_uri:g,state:g==null?void 0:{},...u},a),t.info("success")}async signoutPopupCallback(e=window.location.href,t=!1){let r=this._logger.create("signoutPopupCallback");await this._popupNavigator.callback(e,{keepOpen:t}),r.info("success")}async _signout(e,t){let r=await this._signoutStart(e,t);return await this._signoutEnd(r.url)}async _signoutStart(e={},t){var r;let d=this._logger.create("_signoutStart");try{let u=await this._loadUser();d.debug("loaded current user from storage"),this.settings.revokeTokensOnSignout&&await this._revokeInternal(u);let g=e.id_token_hint||u&&u.id_token;g&&(d.debug("setting id_token_hint in signout request"),e.id_token_hint=g),await this.removeUser(),d.debug("user removed, creating signout request");let a=await this._client.createSignoutRequest(e);return d.debug("got signout request"),await t.navigate({url:a.url,state:(r=a.state)==null?void 0:r.id,scriptOrigin:this.settings.iframeScriptOrigin})}catch(u){throw d.debug("error after preparing navigator, closing navigator window"),t.close(),u}}async _signoutEnd(e){let t=this._logger.create("_signoutEnd"),r=await this._client.processSignoutResponse(e);return t.debug("got signout response"),r}async signoutSilent(e={}){var t;let r=this._logger.create("signoutSilent"),{silentRequestTimeoutInSeconds:d,...u}=e,g=this.settings.includeIdTokenInSilentSignout?(t=await this._loadUser())==null?void 0:t.id_token:void 0,a=this.settings.popup_post_logout_redirect_uri,p=await this._iframeNavigator.prepare({silentRequestTimeoutInSeconds:d});await this._signout({request_type:"so:s",post_logout_redirect_uri:a,id_token_hint:g,...u},p),r.info("success")}async signoutSilentCallback(e=window.location.href){let t=this._logger.create("signoutSilentCallback");await this._iframeNavigator.callback(e),t.info("success")}async revokeTokens(e){let t=await this._loadUser();await this._revokeInternal(t,e)}async _revokeInternal(e,t=this.settings.revokeTokenTypes){let r=this._logger.create("_revokeInternal");if(!e)return;let d=t.filter(u=>typeof e[u]=="string");if(!d.length){r.debug("no need to revoke due to no token(s)");return}for(let u of d)await this._client.revokeToken(e[u],u),r.info(`${u} revoked successfully`),u!=="access_token"&&(e[u]=null);await this.storeUser(e),r.debug("user stored"),await this._events.load(e)}startSilentRenew(){this._logger.create("startSilentRenew"),this._silentRenewService.start()}stopSilentRenew(){this._silentRenewService.stop()}get _userStoreKey(){return`user:${this.settings.authority}:${this.settings.client_id}`}async _loadUser(){let e=this._logger.create("_loadUser"),t=await this.settings.userStore.get(this._userStoreKey);return t?(e.debug("user storageString loaded"),Fs.fromStorageString(t)):(e.debug("no user storageString"),null)}async storeUser(e){let t=this._logger.create("storeUser");if(e){t.debug("storing user");let r=e.toStorageString();await this.settings.userStore.set(this._userStoreKey,r)}else this._logger.debug("removing user"),await this.settings.userStore.remove(this._userStoreKey)}async clearStaleState(){await this._client.clearStaleState()}};var fp=On(up()),vp=On(gp());var wp=On(hp()),Ei={modalBodyConfirm:null,buttonConfirmed:null,toastContainer:null};function yp(){ht(Ei)}var Ht=function(e,t,r,d,...u){let g=e.insertRow();g.id=t,bo(g,t,t,0);let a=t;return u.forEach(p=>{bo(g,p),a=p}),r&&g.classList.add("table-active"),d&&Zs(g,bp,h0(bp,g0,d),"Copy to clipboard"),g};function Si(e,t,r,d=!1,u=null){let g=e.insertCell(0);g.style.verticalAlign="middle",g.style.width="25px";let a=document.createElement("input");return a.classList.add("form-check-input"),a.type="checkbox",a.id=t,a.checked=r,a.disabled=d,u&&(a.onchange=u),g.append(a),a}function bo(e,t,r=null,d=-1){let u=e.insertCell(d);return u.textContent=t,u.setAttribute("data-bs-toggle","tooltip"),u.title=r??t,u}function Zs(e,t,r,d){let u=e.insertCell();u.classList.add("table-action-column");let g=document.createElement("button");g.classList.add("btn"),g.style.padding="0",g.innerHTML=`<i class="bi ${t}"></i>`,d&&(g.title=d),g.onclick=r,u.appendChild(g)}var bp="bi-copy",g0="bi-check-lg";function h0(e,t,r){return d=>{navigator.clipboard.writeText(r);let u=d.currentTarget.querySelector(".bi");u.classList.replace(e,t),setTimeout(()=>u.classList.replace(t,e),500)}}function ba(e,t){let r=document.createElement("th");r.textContent=t,e.appendChild(r)}function Ve(e,t){e.textContent="",t.forEach(r=>{let d=document.createElement("option");d.text=r,e.appendChild(d)})}function tl(e,t){e.textContent="",t.forEach(r=>{let d=document.createElement("option");d.value=r.key,d.text=r.text,e.appendChild(d)})}function fo(e,t){t.forEach(r=>{jo(e,r)})}function jo(e,t,r=!1,d){let u=document.createElement("li");u.innerHTML=r?`<h6 class="dropdown-header" data-value='${d}'>${Jr(t)}</h6>`:`<a class="dropdown-item" data-value='${d}'>${Jr(t)}</a>`,e.appendChild(u)}function Ti(e,t,r,d,u=null){let g="tab"+Math.random().toString(36).replace("0.",""),a=document.createElement("li");a.classList.add("nav-item"),u&&(a.setAttribute("data-bs-toggle","tooltip"),a.setAttribute("title",u)),a.innerHTML=`<a class="nav-link" data-bs-toggle="tab" data-bs-target="#${g}">${r}</a>`,e.appendChild(a);let p=document.createElement("template");return p.innerHTML=d,p.content.firstElementChild.id=g,t.appendChild(p.content.firstElementChild),g}function ht(e,t=null){Object.keys(e).forEach(r=>{if(e[r]=(t??document).getElementById(r),!e[r])throw new Error(`Element ${r} not found.`)})}function Jr(e){return wp.sanitize(e)}function el(e,t="Info"){let r=document.createElement("div");r.classList.add("toast"),r.innerHTML=`<div class="toast-header toast-header-info">
  <i class="bi me-2 bi-info-circle-fill"></i>
  <strong class="me-auto">${Jr(t)}</strong>
  <small>${status}</small>
  <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
  </div>
  <div class="toast-body">${Jr(e)}</div>`,Ei.toastContainer.appendChild(r),r.addEventListener("hidden.bs.toast",()=>{r.remove()}),new Fo(r).show()}function ne(e,t="Error",r=""){let d=document.createElement("div");d.classList.add("toast"),d.innerHTML=`<div class="toast-header toast-header-warn alert-danger">
  <i class="bi me-2 bi-exclamation-triangle-fill"></i>
  <strong class="me-auto">${Jr(t)}</strong>
  <small>${r}</small>
  <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
  </div>
  <div class="toast-body">${Jr(e)}</div>`,Ei.toastContainer.appendChild(d),d.addEventListener("hidden.bs.toast",()=>{d.remove()}),new Fo(d).show()}function b0(e){this.message=e,this.name="UserException"}function lt(e,t,r=null){if(r&&r.classList.remove("is-invalid"),!e)throw r?(r.parentNode.getElementsByClassName("invalid-feedback")[0].textContent=t,r.classList.add("is-invalid")):ne(t,"Error"),new b0(t)}function cn(e,t=!1){return t?e.replace("T"," ").replace("Z","").replace("."," "):e.split(".")[0].replace("T"," ")}var Qs;function Ge(e,t,r){Qs=Qs??new Mr("#modalConfirm"),Ei.modalBodyConfirm.textContent=e,Ei.buttonConfirmed.innerText=t,Ei.buttonConfirmed.onclick=r,Qs.show()}function Dt(e,t,r=!1,d=!1){let u=vp.edit(e);return u.setOption("wrap",d),u.setOption("useWorker",!1),u.session.setMode(t),r&&(u.setReadOnly(!0),u.renderer.setShowGutter(!1)),u}function xp(e,t,r){return new fp.default({selector:e,data:{src:t,keys:["label","group"]},placeHolder:r,resultsList:{class:"dropdown-menu show",maxResults:30},resultItem:{class:"dropdown-item",highlight:!0,element:(d,u)=>{d.style="display: flex;",d.innerHTML=`<span style="flex-grow: 1;" >${Jr(u.key==="label"?u.match:u.value.label)}</span>
            <span style="color: 3a8c9a;" class="fw-light fst-italic ms-1">
              ${u.key==="group"?u.match:u.value.group}</span>`}},events:{input:{results:()=>{Array.from(document.getElementsByClassName("resizable_pane")).forEach(d=>{d.style.overflow="unset"})},close:()=>{Array.from(document.getElementsByClassName("resizable_pane")).forEach(d=>{d.style.overflow="auto"})}}}})}function dr(e,t){e.addEventListener("click",()=>{t.classList.remove("is-invalid")})}function kp(e,t){Array.from(e.rows).forEach(r=>{t(r)?r.classList.add("table-active"):r.classList.remove("table-active")})}function Ct(e){return JSON.stringify(e,null,2)}function _p(e,t){let r=e.value.indexOf(t);return r>=0?(e.focus(),e.setSelectionRange(r,r+t.length),!0):!1}function pn(e,t,r){!r||r.length===t.length?e.textContent=t.length>0?t.length.toString():"":e.textContent=`${r.length}/${t.length}`}var Ep=`<!--
  ~ Copyright (c) 2022 Contributors to the Eclipse Foundation
  ~
  ~ See the NOTICE file(s) distributed with this work for additional
  ~ information regarding copyright ownership.
  ~
  ~ This program and the accompanying materials are made available under the
  ~ terms of the Eclipse Public License 2.0 which is available at
  ~ http://www.eclipse.org/legal/epl-2.0
  ~
  ~ SPDX-License-Identifier: EPL-2.0
  -->
<div class="row resizable_pane" style="height: 80vh">
    <div class="col-md-4 resizable_flex_column">
        <div class="input-group has-validation">
            <input class="form-control" id="tableValidationEnvironments" hidden="true"></input>
            <div class="invalid-feedback"></div>
        </div>
        <div class="table-wrap">
            <table class="table table-striped table-hover table-sm">
                <tbody id="tbodyEnvironments"></tbody>
            </table>
        </div>
    </div>
    <div class="col-md-8 resizable_flex_column">
        <ul class="nav nav-tabs nav-fill">
            <li class="nav-item">
                <a class="nav-link active" data-bs-toggle="tab" data-bs-target="#tabEnvDetails">Manage</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-bs-toggle="tab" data-bs-target="#tabEnvJson">JSON</a>
            </li>
        </ul>
        <div class="tab-content" style="flex-grow: 1; overflow: hidden;">
            <div class="tab-pane container active no-margin" id="tabEnvDetails">
                <crud-toolbar label="Name" id="crudEnvironmentFields" allowIdChange>
                    <div class="input-group input-group-sm mt-1">
                        <label class="input-group-text" data-bs-toggle="tooltip"
                            title="URI including protocol, host and port (e.g. http://localhost:8080)">API URI</label>
                        <input type="text" class="form-control form-control-sm" id="inputApiUri" disabled></input>
                    </div>
                    <div class="input-group input-group-sm mt-1">
                        <label class="input-group-text" data-bs-toggle="tooltip"
                            title="A comma-separated list of namespaces (e.g. com.example.namespace). The given namespaces are used as a parameter for the Things search">Search Namespaces</label>
                        <input type="text" class="form-control form-control-sm" spellcheck="false" id="inputSearchNamespaces" disabled></input>
                    </div>
                    <div class="input-group input-group-sm mt-1 mb-3">
                        <label class="input-group-text">Ditto Version</label>
                        <select class="form-select form-select-sm" id="selectDittoVersion" disabled>
                            <option selected value="3">3</option>
                            <option value="2">2</option>
                        </select>
                    </div>    
                    <label class="form-label">Optional Tabs</label>
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" role="switch" id="inputTabPolicies" disabled>
                        <label class="form-check-label" for="inputTabPolicies">Policies</label>
                      </div>
                      <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" role="switch" id="inputTabConnections" disabled>
                        <label class="form-check-label" for="inputTabConnections">Connections</label>
                      </div>
                      <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" role="switch" id="inputTabOperations" disabled>
                        <label class="form-check-label" for="inputTabOperations">Operations</label>
                      </div>
            </crud-toolbar>
            </div>
            <div class="tab-pane container no-margin" id="tabEnvJson">
                <crud-toolbar label="Name" id="crudEnvironmentJson" allowIdChange>
                    <div class="ace_container" style="flex-grow: 1;">
                        <div>
                            <div class="script_editor" id="settingsEditor"></div>
                        </div>
                    </div>
                </crud-toolbar>
            </div>
        </div>
    </div>
</div>`;var Sp={local_ditto:{api_uri:"http://localhost:8080",ditto_version:3,disablePolicies:!1,disableConnections:!1,disableOperations:!1,authSettings:{main:{method:"basic",oidc:{enabled:!1},basic:{enabled:!0,defaultUsernamePassword:"ditto:ditto"},bearer:{enabled:!0},pre:{enabled:!1,defaultDittoPreAuthenticatedUsername:null}},devops:{method:"basic",oidc:{enabled:!1},basic:{enabled:!0,defaultUsernamePassword:"devops:foobar"},bearer:{enabled:!0}},oidc:{}}},local_ditto_ide:{api_uri:"http://localhost:8080",ditto_version:3,disablePolicies:!1,disableConnections:!1,disableOperations:!1,authSettings:{main:{method:"pre",oidc:{enabled:!1},basic:{enabled:!0,defaultUsernamePassword:null},bearer:{enabled:!0},pre:{enabled:!1,defaultDittoPreAuthenticatedUsername:"pre:ditto"}},devops:{method:"basic",oidc:{enabled:!1},basic:{enabled:!0,defaultUsernamePassword:"devops:foobar"},bearer:{enabled:!0}},oidc:{}}},ditto_sandbox:{api_uri:"https://ditto.eclipseprojects.io",ditto_version:3,disablePolicies:!1,disableConnections:!0,disableOperations:!0,authSettings:{main:{method:"basic",oidc:{enabled:!0,defaultProvider:"fake"},basic:{enabled:!0,defaultUsernamePassword:"ditto:ditto"},bearer:{enabled:!0},pre:{enabled:!1,defaultDittoPreAuthenticatedUsername:null}},devops:{method:"basic",oidc:{enabled:!1,defaultProvider:null},basic:{enabled:!1,defaultUsernamePassword:null},bearer:{enabled:!1}},oidc:{}}},oidc_example:{api_uri:"http://localhost:8080",ditto_version:3,disablePolicies:!1,disableConnections:!1,disableOperations:!1,authSettings:{main:{method:"oidc",oidc:{enabled:!0,defaultProvider:"fake",autoSso:!0},basic:{enabled:!1,defaultUsernamePassword:null},bearer:{enabled:!0},pre:{enabled:!1,defaultDittoPreAuthenticatedUsername:null}},devops:{method:"oidc",oidc:{enabled:!0,defaultProvider:"fake",autoSso:!0},basic:{enabled:!1,defaultUsernamePassword:null},bearer:{enabled:!0}},oidc:{providers:{fake:{displayName:"Fake IDP to test",extractBearerTokenFrom:"access_token",authority:"http://localhost:9900/fake",client_id:"some-client-id",redirect_uri:"http://localhost:8000",response_type:"code",scope:"openid"}}}}}};var w0="state",Ci="primaryEnvironmentName",fa="oidcProvider",y0="environmentsURL",$p="ditto-ui-env",Wo=(u=>(u.oidc="oidc",u.basic="basic",u.bearer="bearer",u.pre="pre",u))(Wo||{}),Xt,ee,vo,mt={environmentSelector:null,tbodyEnvironments:null,tableValidationEnvironments:null,crudEnvironmentFields:null,crudEnvironmentJson:null,inputApiUri:null,inputSearchNamespaces:null,selectDittoVersion:null,inputTabPolicies:null,inputTabConnections:null,inputTabOperations:null},Rp=[];document.getElementById("environmentsHTML").innerHTML=Ep;function rl(e){Object.assign(this,e),this.authSettings.main.oidc.provider=e.authSettings?.main?.oidc?.defaultProvider,Op(e.authSettings?.main?.basic?.defaultUsernamePassword),this.authSettings.main.pre.dittoPreAuthenticatedUsername=e.authSettings?.main?.pre?.defaultDittoPreAuthenticatedUsername,this.authSettings.devops.oidc.provider=e.authSettings?.devops?.oidc?.defaultProvider,Pp(e.authSettings?.devops?.basic?.defaultUsernamePassword)}function un(){return mt.environmentSelector.value}function Q(){return Xt[un()]}function Ke(e){Rp.push(e)}async function Mp(e,t=null){await Dp(e),Rp.forEach(r=>r.call(null,t))}async function Ip(){ht(mt),dr(mt.tbodyEnvironments,mt.tableValidationEnvironments),Xt=await _0(),vo=Dt("settingsEditor","ace/mode/json",!0),mt.tbodyEnvironments.addEventListener("click",k0),mt.crudEnvironmentJson.addEventListener("onCreateClick",Cp),mt.crudEnvironmentJson.addEventListener("onUpdateClick",Ap),mt.crudEnvironmentJson.addEventListener("onDeleteClick",Tp),mt.crudEnvironmentJson.addEventListener("onEditToggle",Lp),mt.crudEnvironmentFields.addEventListener("onCreateClick",Cp),mt.crudEnvironmentFields.addEventListener("onUpdateClick",Ap),mt.crudEnvironmentFields.addEventListener("onDeleteClick",Tp),mt.crudEnvironmentFields.addEventListener("onEditToggle",Lp),mt.environmentSelector.onchange=x0,document.querySelector('a[data-bs-target="#tabEnvJson"]').addEventListener("shown.bs.tab",()=>{vo.renderer.updateFull()}),await oe(!0)}async function x0(){let e=new URLSearchParams(window.location.search);e.set(Ci,un()),window.history.replaceState(null,null,`${window.location.pathname}?${e}`),await Mp(!1)}async function Tp(){lt(ee,"No environment selected",mt.tableValidationEnvironments),lt(Object.keys(Xt).length>=2,"At least one environment is required",mt.tableValidationEnvironments),delete Xt[ee],ee=null,await oe(!1)}async function Cp(e){lt(e.target.idValue,"Environment name must not be empty",e.target.validationElement),lt(!Xt[e.target.idValue],"Environment name already used",e.target.validationElement),e.target===mt.crudEnvironmentFields?Xt[e.target.idValue]=new rl({api_uri:mt.inputApiUri.value??"",searchNamespaces:mt.inputSearchNamespaces.value??"",ditto_version:mt.selectDittoVersion.value?mt.selectDittoVersion.value:"3"}):Xt[e.target.idValue]=new rl(JSON.parse(vo.getValue())),ee=e.target.idValue,e.target.toggleEdit(),await oe(!1)}function k0(e){e.target&&e.target.tagName==="TD"&&(ee&&ee===e.target.parentNode.id?ee=null:ee=e.target.parentNode.id,ol())}async function Ap(e){ee!==e.target.idValue&&t(),e.target===mt.crudEnvironmentFields?(Xt[ee].api_uri=mt.inputApiUri.value,Xt[ee].ditto_version=mt.selectDittoVersion.value,Xt[ee].searchNamespaces=mt.inputSearchNamespaces.value,Xt[ee].disablePolicies=!mt.inputTabPolicies.checked,Xt[ee].disableConnections=!mt.inputTabConnections.checked,Xt[ee].disableOperations=!mt.inputTabOperations.checked):Xt[ee]=JSON.parse(vo.getValue()),e.target.toggleEdit(),await oe(!1);function t(){Xt[e.target.idValue]=Xt[ee],delete Xt[ee],ee=e.target.idValue}}function Vo(){Xt&&localStorage.setItem($p,JSON.stringify(Xt))}async function oe(e,t=null){r(),Vo(),ol(),d(),await Mp(e,t);function r(){let u=mt.environmentSelector.value,g=new URLSearchParams(window.location.search);u||(u=g.get(Ci));let a=g.get(w0);if(!u&&a!==null){let p=a.split(";");if(p.length>1){let o=atob(p[1]),i=new URLSearchParams(o),n=i.get(Ci),l=i.get(fa);u=n,l&&(Xt[u].authSettings.main.oidc.provider=l)}}(!u||!Xt[u])&&(u=Object.keys(Xt)[0]),Ve(mt.environmentSelector,Object.keys(Xt)),mt.environmentSelector.value=u}function d(){mt.tbodyEnvironments.textContent="",Object.keys(Xt).forEach(u=>{Ht(mt.tbodyEnvironments,u,u===ee)})}}function ol(){if(ee){let e=Xt[ee];mt.crudEnvironmentFields.idValue=ee,mt.crudEnvironmentJson.idValue=ee,vo.setValue(Ct(e),-1),mt.inputApiUri.value=e.api_uri,mt.inputSearchNamespaces.value=e.searchNamespaces??"",mt.selectDittoVersion.value=e.ditto_version?e.ditto_version:"3",mt.inputTabPolicies.checked=!e.disablePolicies,mt.inputTabConnections.checked=!e.disableConnections,mt.inputTabOperations.checked=!e.disableOperations}else mt.crudEnvironmentFields.idValue=null,mt.crudEnvironmentJson.idValue=null,vo.setValue(""),mt.inputApiUri.value=null,mt.inputSearchNamespaces.value=null,mt.selectDittoVersion.value=3,mt.inputTabPolicies.checked=!0,mt.inputTabConnections.checked=!0,mt.inputTabOperations.checked=!0}async function _0(){let e,t,d=new URLSearchParams(window.location.search).get(y0);if(d)try{let o=await fetch(d);if(!o.ok)throw new Error(`URL ${d} can not be loaded`);e=await o.json(),a(e)}catch(o){e=null,ne(o.message,"Error loading environments from URL")}let u=localStorage.getItem($p);u&&(t=JSON.parse(u));let g;return e?t?g=p(e,t):g=e:t?g=t:g=Sp,Object.keys(g).forEach(o=>{g[o]=new rl(g[o])}),g;function a(o){Object.keys(o).forEach(i=>{if(!o[i].hasOwnProperty("api_uri"))throw new SyntaxError("Environments json invalid")})}function p(o,i){let n={};return Object.keys(o).forEach(l=>{n[l]={...i[l],...o[l]}}),{...i,...n}}}function Lp(e){mt.inputApiUri.disabled=!e.detail.isEditing,mt.inputSearchNamespaces.disabled=!e.detail.isEditing,mt.selectDittoVersion.disabled=!e.detail.isEditing,mt.inputTabPolicies.disabled=!e.detail.isEditing,mt.inputTabConnections.disabled=!e.detail.isEditing,mt.inputTabOperations.disabled=!e.detail.isEditing,vo.setReadOnly(!e.detail.isEditing),vo.renderer.setShowGutter(e.detail.isEditing),e.detail.isEditing||ol()}function Dr(e){"@babel/helpers - typeof";return Dr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dr(e)}function Fp(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Np(e,t){for(var r=0;r<t.length;r++){var d=t[r];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(e,d.key,d)}}function zp(e,t,r){return t&&Np(e.prototype,t),r&&Np(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function E0(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hn(e,t)}function gn(e){return gn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},gn(e)}function hn(e,t){return hn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(d,u){return d.__proto__=u,d},hn(e,t)}function Bp(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function mn(e,t,r){return Bp()?mn=Reflect.construct.bind():mn=function(u,g,a){var p=[null];p.push.apply(p,g);var o=Function.bind.apply(u,p),i=new o;return a&&hn(i,a.prototype),i},mn.apply(null,arguments)}function S0(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function nl(e){var t=typeof Map=="function"?new Map:void 0;return nl=function(d){if(d===null||!S0(d))return d;if(typeof d!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t<"u"){if(t.has(d))return t.get(d);t.set(d,u)}function u(){return mn(d,arguments,gn(this).constructor)}return u.prototype=Object.create(d.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),hn(u,d)},nl(e)}function T0(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C0(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return T0(e)}function A0(e){var t=Bp();return function(){var d=gn(e),u;if(t){var g=gn(this).constructor;u=Reflect.construct(d,arguments,g)}else u=d.apply(this,arguments);return C0(this,u)}}function L0(e){return $0(e)||R0(e)||Hp(e)||M0()}function $0(e){if(Array.isArray(e))return al(e)}function R0(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Hp(e,t){if(e){if(typeof e=="string")return al(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return al(e,t)}}function al(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,d=new Array(t);r<t;r++)d[r]=e[r];return d}function M0(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function I0(e,t){var r=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Hp(e))||t&&e&&typeof e.length=="number"){r&&(e=r);var d=0,u=function(){};return{s:u,n:function(){return d>=e.length?{done:!0}:{done:!1,value:e[d++]}},e:function(o){throw o},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var g=!0,a=!1,p;return{s:function(){r=r.call(e)},n:function(){var o=r.next();return g=o.done,o},e:function(o){a=!0,p=o},f:function(){try{!g&&r.return!=null&&r.return()}finally{if(a)throw p}}}}var Ye=Object.prototype.hasOwnProperty;function Go(e,t){return e=e.slice(),e.push(t),e}function sl(e,t){return t=t.slice(),t.unshift(e),t}var O0=function(e){E0(r,e);var t=A0(r);function r(d){var u;return Fp(this,r),u=t.call(this,'JSONPath should not be called with "new" (it prevents return of (unwrapped) scalar values)'),u.avoidNew=!0,u.value=d,u.name="NewError",u}return zp(r)}(nl(Error));function Nt(e,t,r,d,u){if(!(this instanceof Nt))try{return new Nt(e,t,r,d,u)}catch(o){if(!o.avoidNew)throw o;return o.value}typeof e=="string"&&(u=d,d=r,r=t,t=e,e=null);var g=e&&Dr(e)==="object";if(e=e||{},this.json=e.json||r,this.path=e.path||t,this.resultType=e.resultType||"value",this.flatten=e.flatten||!1,this.wrap=Ye.call(e,"wrap")?e.wrap:!0,this.sandbox=e.sandbox||{},this.preventEval=e.preventEval||!1,this.parent=e.parent||null,this.parentProperty=e.parentProperty||null,this.callback=e.callback||d||null,this.otherTypeCallback=e.otherTypeCallback||u||function(){throw new TypeError("You must supply an otherTypeCallback callback option with the @other() operator.")},e.autostart!==!1){var a={path:g?e.path:t};g?"json"in e&&(a.json=e.json):a.json=r;var p=this.evaluate(a);if(!p||Dr(p)!=="object")throw new O0(p);return p}}Nt.prototype.evaluate=function(e,t,r,d){var u=this,g=this.parent,a=this.parentProperty,p=this.flatten,o=this.wrap;if(this.currResultType=this.resultType,this.currPreventEval=this.preventEval,this.currSandbox=this.sandbox,r=r||this.callback,this.currOtherTypeCallback=d||this.otherTypeCallback,t=t||this.json,e=e||this.path,e&&Dr(e)==="object"&&!Array.isArray(e)){if(!e.path&&e.path!=="")throw new TypeError('You must supply a "path" property when providing an object argument to JSONPath.evaluate().');if(!Ye.call(e,"json"))throw new TypeError('You must supply a "json" property when providing an object argument to JSONPath.evaluate().');var i=e;t=i.json,p=Ye.call(e,"flatten")?e.flatten:p,this.currResultType=Ye.call(e,"resultType")?e.resultType:this.currResultType,this.currSandbox=Ye.call(e,"sandbox")?e.sandbox:this.currSandbox,o=Ye.call(e,"wrap")?e.wrap:o,this.currPreventEval=Ye.call(e,"preventEval")?e.preventEval:this.currPreventEval,r=Ye.call(e,"callback")?e.callback:r,this.currOtherTypeCallback=Ye.call(e,"otherTypeCallback")?e.otherTypeCallback:this.currOtherTypeCallback,g=Ye.call(e,"parent")?e.parent:g,a=Ye.call(e,"parentProperty")?e.parentProperty:a,e=e.path}if(g=g||null,a=a||null,Array.isArray(e)&&(e=Nt.toPathString(e)),!(!e&&e!==""||!t)){var n=Nt.toPathArray(e);n[0]==="$"&&n.length>1&&n.shift(),this._hasParentSelector=null;var l=this._trace(n,t,["$"],g,a,r).filter(function(s){return s&&!s.isParentSelector});return l.length?!o&&l.length===1&&!l[0].hasArrExpr?this._getPreferredOutput(l[0]):l.reduce(function(s,c){var m=u._getPreferredOutput(c);return p&&Array.isArray(m)?s=s.concat(m):s.push(m),s},[]):o?[]:void 0}};Nt.prototype._getPreferredOutput=function(e){var t=this.currResultType;switch(t){case"all":{var r=Array.isArray(e.path)?e.path:Nt.toPathArray(e.path);return e.pointer=Nt.toPointer(r),e.path=typeof e.path=="string"?e.path:Nt.toPathString(e.path),e}case"value":case"parent":case"parentProperty":return e[t];case"path":return Nt.toPathString(e[t]);case"pointer":return Nt.toPointer(e.path);default:throw new TypeError("Unknown result type")}};Nt.prototype._handleCallback=function(e,t,r){if(t){var d=this._getPreferredOutput(e);e.path=typeof e.path=="string"?e.path:Nt.toPathString(e.path),t(d,r,e)}};Nt.prototype._trace=function(e,t,r,d,u,g,a,p){var o=this,i;if(!e.length)return i={path:r,value:t,parent:d,parentProperty:u,hasArrExpr:a},this._handleCallback(i,g,"value"),i;var n=e[0],l=e.slice(1),s=[];function c(y){Array.isArray(y)?y.forEach(function(b){s.push(b)}):s.push(y)}if((typeof n!="string"||p)&&t&&Ye.call(t,n))c(this._trace(l,t[n],Go(r,n),t,n,g,a));else if(n==="*")this._walk(t,function(y){c(o._trace(l,t[y],Go(r,y),t,y,g,!0,!0))});else if(n==="..")c(this._trace(l,t,r,d,u,g,a)),this._walk(t,function(y){Dr(t[y])==="object"&&c(o._trace(e.slice(),t[y],Go(r,y),t,y,g,!0))});else{if(n==="^")return this._hasParentSelector=!0,{path:r.slice(0,-1),expr:l,isParentSelector:!0};if(n==="~")return i={path:Go(r,n),value:u,parent:d,parentProperty:null},this._handleCallback(i,g,"property"),i;if(n==="$")c(this._trace(l,t,r,null,null,g,a));else if(/^(\x2D?[0-9]*):(\x2D?[0-9]*):?([0-9]*)$/.test(n))c(this._slice(n,l,t,r,d,u,g));else if(n.indexOf("?(")===0){if(this.currPreventEval)throw new Error("Eval [?(expr)] prevented in JSONPath expression.");var m=n.replace(/^\?\(((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?)\)$/,"$1");this._walk(t,function(y){o._eval(m,t[y],y,r,d,u)&&c(o._trace(l,t[y],Go(r,y),t,y,g,!0))})}else if(n[0]==="("){if(this.currPreventEval)throw new Error("Eval [(expr)] prevented in JSONPath expression.");c(this._trace(sl(this._eval(n,t,r[r.length-1],r.slice(0,-1),d,u),l),t,r,d,u,g,a))}else if(n[0]==="@"){var h=!1,v=n.slice(1,-2);switch(v){case"scalar":(!t||!["object","function"].includes(Dr(t)))&&(h=!0);break;case"boolean":case"string":case"undefined":case"function":Dr(t)===v&&(h=!0);break;case"integer":Number.isFinite(t)&&!(t%1)&&(h=!0);break;case"number":Number.isFinite(t)&&(h=!0);break;case"nonFinite":typeof t=="number"&&!Number.isFinite(t)&&(h=!0);break;case"object":t&&Dr(t)===v&&(h=!0);break;case"array":Array.isArray(t)&&(h=!0);break;case"other":h=this.currOtherTypeCallback(t,r,d,u);break;case"null":t===null&&(h=!0);break;default:throw new TypeError("Unknown value type "+v)}if(h)return i={path:r,value:t,parent:d,parentProperty:u},this._handleCallback(i,g,"value"),i}else if(n[0]==="`"&&t&&Ye.call(t,n.slice(1))){var k=n.slice(1);c(this._trace(l,t[k],Go(r,k),t,k,g,a,!0))}else if(n.includes(",")){var x=n.split(","),A=I0(x),S;try{for(A.s();!(S=A.n()).done;){var f=S.value;c(this._trace(sl(f,l),t,r,d,u,g,!0))}}catch(y){A.e(y)}finally{A.f()}}else!p&&t&&Ye.call(t,n)&&c(this._trace(l,t[n],Go(r,n),t,n,g,a,!0))}if(this._hasParentSelector)for(var L=0;L<s.length;L++){var $=s[L];if($&&$.isParentSelector){var T=this._trace($.expr,t,$.path,d,u,g,a);if(Array.isArray(T)){s[L]=T[0];for(var C=T.length,w=1;w<C;w++)L++,s.splice(L,0,T[w])}else s[L]=T}}return s};Nt.prototype._walk=function(e,t){if(Array.isArray(e))for(var r=e.length,d=0;d<r;d++)t(d);else e&&Dr(e)==="object"&&Object.keys(e).forEach(function(u){t(u)})};Nt.prototype._slice=function(e,t,r,d,u,g,a){if(Array.isArray(r)){var p=r.length,o=e.split(":"),i=o[2]&&Number.parseInt(o[2])||1,n=o[0]&&Number.parseInt(o[0])||0,l=o[1]&&Number.parseInt(o[1])||p;n=n<0?Math.max(0,n+p):Math.min(p,n),l=l<0?Math.max(0,l+p):Math.min(p,l);for(var s=[],c=n;c<l;c+=i){var m=this._trace(sl(c,t),r,d,u,g,a,!0);m.forEach(function(h){s.push(h)})}return s}};Nt.prototype._eval=function(e,t,r,d,u,g){this.currSandbox._$_parentProperty=g,this.currSandbox._$_parent=u,this.currSandbox._$_property=r,this.currSandbox._$_root=this.json,this.currSandbox._$_v=t;var a=e.includes("@path");a&&(this.currSandbox._$_path=Nt.toPathString(d.concat([r])));var p="script:"+e;if(!Nt.cache[p]){var o=e.replace(/@parentProperty/g,"_$_parentProperty").replace(/@parent/g,"_$_parent").replace(/@property/g,"_$_property").replace(/@root/g,"_$_root").replace(/@([\t-\r \)\.\[\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])/g,"_$_v$1");a&&(o=o.replace(/@path/g,"_$_path")),Nt.cache[p]=new this.vm.Script(o)}try{return Nt.cache[p].runInNewContext(this.currSandbox)}catch(i){throw new Error("jsonPath: "+i.message+": "+e)}};Nt.cache={};Nt.toPathString=function(e){for(var t=e,r=t.length,d="$",u=1;u<r;u++)/^(~|\^|@(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\(\))$/.test(t[u])||(d+=/^[\*0-9]+$/.test(t[u])?"["+t[u]+"]":"['"+t[u]+"']");return d};Nt.toPointer=function(e){for(var t=e,r=t.length,d="",u=1;u<r;u++)/^(~|\^|@(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\(\))$/.test(t[u])||(d+="/"+t[u].toString().replace(/~/g,"~0").replace(/\//g,"~1"));return d};Nt.toPathArray=function(e){var t=Nt.cache;if(t[e])return t[e].concat();var r=[],d=e.replace(/@(?:null|boolean|number|string|integer|undefined|nonFinite|scalar|array|object|function|other)\(\)/g,";$&;").replace(/['\[](\??\((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\))['\]]/g,function(g,a){return"[#"+(r.push(a)-1)+"]"}).replace(/\[["']((?:(?!['\]])[\s\S])*)["']\]/g,function(g,a){return"['"+a.replace(/\./g,"%@%").replace(/~/g,"%%@@%%")+"']"}).replace(/~/g,";~;").replace(/["']?\.["']?(?!(?:(?!\[)[\s\S])*\])|\[["']?/g,";").replace(/%@%/g,".").replace(/%%@@%%/g,"~").replace(/(?:;)?(\^+)(?:;)?/g,function(g,a){return";"+a.split("").join(";")+";"}).replace(/;;;|;;/g,";..;").replace(/;$|'?\]|'$/g,""),u=d.split(";").map(function(g){var a=g.match(/#([0-9]+)/);return!a||!a[1]?g:r[a[1]]});return t[e]=u,t[e].concat()};var P0=function(t,r,d){for(var u=t.length,g=0;g<u;g++){var a=t[g];d(a)&&r.push(t.splice(g--,1)[0])}},D0=function(){function e(t){Fp(this,e),this.code=t}return zp(e,[{key:"runInNewContext",value:function(r){var d=this.code,u=Object.keys(r),g=[];P0(u,g,function(n){return typeof r[n]=="function"});var a=u.map(function(n,l){return r[n]}),p=g.reduce(function(n,l){var s=r[l].toString();return/function/.test(s)||(s="function "+s),"var "+l+"="+s+";"+n},"");d=p+d,!/(["'])use strict\1/.test(d)&&!u.includes("arguments")&&(d="var arguments = undefined;"+d),d=d.replace(/;[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*$/,"");var o=d.lastIndexOf(";"),i=o>-1?d.slice(0,o+1)+" return "+d.slice(o+1):" return "+d;return mn(Function,u.concat([i])).apply(void 0,L0(a))}}]),e}();Nt.prototype.vm={Script:D0};var Up=`<!--
  ~ Copyright (c) 2022 Contributors to the Eclipse Foundation
  ~
  ~ See the NOTICE file(s) distributed with this work for additional
  ~ information regarding copyright ownership.
  ~
  ~ This program and the accompanying materials are made available under the
  ~ terms of the Eclipse Public License 2.0 which is available at
  ~ http://www.eclipse.org/legal/epl-2.0
  ~
  ~ SPDX-License-Identifier: EPL-2.0
  -->
<!-- Scrollable modal -->
<div id="fieldsModal" class="modal fade" tabindex="-1">
    <div class="modal-dialog modal-dialog-scrollable modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                Adjust fields for things table
                <button type="button" class="btn-close btn-sm" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <div class="input-group input-group-sm mb-1 mt-1">
                    <div class="form-control-sm" style="flex-grow: 1;"></div>
                    <button class="btn btn-outline-secondary btn-sm" id="fieldUp">
                        <i class="bi bi-chevron-up"></i>
                    </button>
                    <button class="btn btn-outline-secondary btn-sm" id="fieldDown">
                        <i class="bi bi-chevron-down"></i>
                    </button>
                </div>

                <table class="table table-striped table-hover table-sm has-validation">
                    <tbody id="fieldList"></tbody>
                </table>
                <h6>Field Details</h6>
                <div class="input-group input-group-sm mb-1 mt-1 has-validation">
                    <label class="input-group-text">Field Path</label>
                    <input type="text" class="form-control" id="fieldPath"></input>
                    <button class="btn btn-outline-secondary btn-sm" id="fieldCreate" data-bs-toggle="tooltip"
                        title="Add a new field with the given path">
                        <i class="bi bi-plus-circle"></i>
                    </button>
                    <button class="btn btn-outline-secondary btn-sm" id="fieldUpdate" data-bs-toggle="tooltip"
                        title="Save selected field details">
                        <i class="bi bi-save"></i>
                    </button>
                    <button class="btn btn-outline-secondary btn-sm" id="fieldDelete" data-bs-toggle="tooltip"
                        title="Delete selected field">
                        <i class="bi bi-trash3"></i>
                    </button>
                    <div class="invalid-feedback"></div>
                </div>
                <div class="input-group input-group-sm mb-1">
                    <label class="input-group-text">Field Label</label>
                    <input type="text" class="form-control form-control-sm" id="fieldLabel"></input>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline-secondary btn-sm" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>`;var qt=-1,Vt={fieldPath:null,fieldLabel:null,fieldList:null,fieldsModal:null};document.getElementById("fieldsHTML").innerHTML=Up;function dl(){Q().fieldList||(Q().fieldList=[]);let e=Q().fieldList.filter(t=>t.active).map(t=>t.path);return"fields=thingId"+(e.length>0?","+e:"")}var ll=null;function jp(e){Vt.fieldPath.value=e,Vt.fieldLabel.value=null,ll||(ll=new Mr(Vt.fieldsModal)),ll.show()}async function Wp(){Ke(z0),ht(Vt),Vt.fieldList.addEventListener("click",e=>{e.target&&e.target.tagName==="TD"&&F0(e.target.parentNode.rowIndex)}),Vt.fieldsModal.addEventListener("hide.bs.modal",async()=>{await oe(!1)}),document.getElementById("fieldUpdate").onclick=()=>{lt(qt>=0,"No field selected");let e=Q().fieldList[qt],d=Q().fieldList.filter((u,g)=>g!=qt).map(u=>u.path).includes(e.path);lt(!Q().fieldList.filter((u,g)=>g!=qt).map(u=>u.path).includes(Vt.fieldPath.value),"Changed field path already exists",Vt.fieldPath),e.path=Vt.fieldPath.value,e.label=Vt.fieldLabel.value,Ko()},document.getElementById("fieldCreate").onclick=()=>{lt(Vt.fieldPath.value,"Field path must not be empty",Vt.fieldPath),lt(!Q().fieldList.map(e=>e.path).includes(Vt.fieldPath.value),"Field path already exists",Vt.fieldPath),Q().fieldList.push({active:!0,path:Vt.fieldPath.value,label:Vt.fieldLabel.value?Vt.fieldLabel.value:Vt.fieldPath.value.split("/").slice(-1)[0]}),Ko()},document.getElementById("fieldDelete").onclick=()=>{lt(qt>=0,"No field selected"),Q().fieldList.splice(qt,1),Ko(),qt=-1},document.getElementById("fieldUp").onclick=()=>{if(qt<=0)return;let e=Q().fieldList[qt];Q().fieldList.splice(qt,1),qt--,Q().fieldList.splice(qt,0,e),Ko()},document.getElementById("fieldDown").onclick=()=>{if(qt<0||qt===Q().fieldList.length-1)return;let e=Q().fieldList[qt];Q().fieldList.splice(qt,1),qt++,Q().fieldList.splice(qt,0,e),Ko()}}function F0(e){if(qt===e)qt=-1,Vt.fieldPath.value=null,Vt.fieldLabel.value=null;else{qt=e;let t=Q().fieldList[qt];Vt.fieldPath.value=t.path,Vt.fieldLabel.value=t.label?t.label:null}}function z0(){Q().fieldList||(Q().fieldList=[]),Ko()}function Ko(){Vt.fieldList.textContent="",qt=-1,Q().fieldList.forEach((e,t)=>{let r=Vt.fieldPath.value===e.path,d=Vt.fieldList.insertRow();Si(d,String(t),e.active,!1,B0),d.insertCell(-1).textContent=e.path,d.insertCell(-1).textContent=e.label?e.label:null,r&&(qt=t,d.classList.add("table-active"),Vt.fieldLabel.value=e.label)}),qt<0&&(Vt.fieldPath.value=null,Vt.fieldLabel.value=null)}function B0(e){Q().fieldList[e.target.id].active=e.target.checked,Ko()}function Nr(e,t,r,d=null){let u=e,g=t,a=r,p=d,o=!1;return u.addEventListener("click",i),Ke(n),{set viewDirty(l){o=l}};function i(){Vp(u.dataset.auth==="devOps"),o&&(a.call(null,!1),o=!1)}function n(l){u.toggleAttribute("hidden",Q()[p]??!1),["pinnedThings","filterList","messageTemplates","recentPolicyIds"].includes(l)||(g.classList.contains("show")?a.call(null,!0):o=!0)}}var Gp=`<!--
  ~ Copyright (c) 2022 Contributors to the Eclipse Foundation
  ~
  ~ See the NOTICE file(s) distributed with this work for additional
  ~ information regarding copyright ownership.
  ~
  ~ This program and the accompanying materials are made available under the
  ~ terms of the Eclipse Public License 2.0 which is available at
  ~ http://www.eclipse.org/legal/epl-2.0
  ~
  ~ SPDX-License-Identifier: EPL-2.0
  -->
<div>
    <div>
        <div class="row resizable_pane" style="height: 40vh;">
            <div class="col-md-7 resizable_flex_column">
                <form class="input-group input-group-sm mb-1 mt-1" autocomplete="off">
                    <div class="btn-group dropend">
                        <button id="searchFavorite" class="btn btn-outline-secondary btn-sm" data-bs-toggle="tooltip"
                            title="Toggle favorite for search filter">
                            <i id="favIcon" class="bi bi-star"></i>
                        </button>
                    </div>
                    <input autocomplete="false" name="hidden" type="text" style="display:none;">
                    <input type="search" class="form-control form-control-sm" id="searchFilterEdit" name="search"
                           spellcheck=false autocomplete="off" />
                    <span class="input-group-text" id="searchFilterCount" data-bs-toggle="tooltip"
                          title="Amount of things matching the filter">
                    </span>
                    <button type="button" id="searchThings" class="btn btn-outline-primary btn-sm" data-bs-toggle="tooltip"
                        title="Search things by thingId or valid ditto search filter">
                        search
                    </button>
                    <button type="button" id="pinnedThings" class="btn btn-outline-secondary btn-sm me-3 button_round_right"
                        data-bs-toggle="tooltip" title="Pinned things: get the list of all individually pinned things">
                        pinned
                    </button>
                    <button type="button" id="tableSettings" class="btn btn-outline-secondary btn-sm button_round_both"
                        data-bs-toggle="modal" data-bs-target="#fieldsModal">
                        <span data-bs-toggle="tooltip" title="Adjust fields for things table">
                            <i class="bi bi-gear"></i>
                        </span>
                    </button>
                </form>
                <div class="table-wrap">
                    <table class="table table-striped table-hover table-sm">
                        <thead>
                            <tr id="thingsTableHead"></tr>
                        </thead>
                        <tbody id="thingsTableBody"></tbody>
                    </table>
                </div>
            </div>
            <div class="col-md-5 resizable_flex_column" style="height: auto" id="details">
                <ul id="tabItemsThing" class="nav nav-tabs nav-fill">
                    <li class="nav-item">
                        <a class="nav-link active" data-bs-toggle="tab" data-bs-target="#tabThingDetails">Details</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" data-bs-toggle="tab" data-bs-target="#tabModifyThing">Manage</a>
                        </li>
                    </ul>
                    <div id="tabContentThing" class="tab-content" style="flex-grow:1; overflow:hidden;">
                        <div class="tab-pane fade show active container no-margin" id="tabThingDetails">
                            <div class="table-wrap">
                                <table class="table table-striped table-hover table-sm">
                                    <tbody id="tbodyThingDetails"></tbody>
                                </table>
                            </div>
                    </div>
                    <div class="tab-pane fade container no-margin" id="tabModifyThing">
                        <crud-toolbar id="crudThings" label="Thing ID">
                            <div class="input-group input-group-sm mb-1">
                                <label class="input-group-text" id="labelX">Definition</label>
                                <div class="btn-group dropend">
                                    <button class="btn btn-outline-secondary btn-sm dropdown-toggle"
                                    data-bs-toggle="dropdown" disabled id="buttonThingDefinitions"></button>
                                    <ul id="ulThingDefinitions" class="dropdown-menu" style="position: fixed; top: auto;"></ul>                                    
                                </div>
                                <input type="text" class="form-control" id="inputThingDefinition" disabled></input>
                            </div>
                            <div class="ace_container mb-1" style="flex-grow: 1;">
                                <div class="script_editor" id="thingJsonEditor"></div>
                            </div>
                        </crud-toolbar>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<h5 data-bs-toggle="collapse" data-bs-target="#collapseAttributes">Attributes <span class="badge rounded-pill bg-info"
        id="badgeAttributeCount"></span></h5>
<hr />
<div class="collapse" id="collapseAttributes">
    <div class="row resizable_pane" style="height: 20vh;">
        <div class="col-md-7 resizable_flex_column" style="overflow-y:scroll;">
            <table class="table table-striped table-hover table-sm">
                <tbody id="tbodyAttributes"></tbody>
            </table>
        </div>
        <div class="col-md-5 resizable_flex_column" style="height: auto">
            <ul class="nav nav-tabs nav-fill" id="tabItemsAttribute">
                <li class="nav-item">
                    <a class="nav-link active" data-bs-toggle="tab" data-bs-target="#tabCrudAttribute">Manage</a>
                </li>
            </ul>
            <div class="tab-content" style="flex-grow: 1;" id="tabContentAttribute">
                <div class="tab-pane container active no-margin" id="tabCrudAttribute">
                    <crud-toolbar id="crudAttribute" label="Attribute key">
                        <div class="ace_container mb-1" style="flex-grow: 1;">
                            <div class="script_editor" id="attributeEditor"></div>
                        </div>
                    </crud-toolbar>
                </div>
            </div>
        </div>
    </div>
</div>
`;var St,Kp=[],pl={collapseThings:null,tabThings:null};document.getElementById("thingsHTML").innerHTML=Gp;function Se(e){Kp.push(e)}async function Yp(){ht(pl),Nr(pl.tabThings,pl.collapseThings,U0)}function wr(e,t=null){console.assert(e&&e!=="","thingId expected"),xt("GET",`/things/${e}?fields=thingId%2CpolicyId%2Cdefinition%2Cattributes%2Cfeatures%2C_created%2C_modified%2C_revision%2C_metadata`).then(r=>{Fr(r),t&&t()}).catch(()=>Fr(null))}function Fr(e){let t=e&&(!St||St.thingId!==e.thingId);St=e,Kp.forEach(r=>r.call(null,St,t))}function U0(){va()}var Ai,wa;async function Jp(){Se(V0),qp(W0),Ke(G0)}var Xp=[];function xa(e){Xp.push(e)}function j0(e){Xp.forEach(t=>t.call(null,e))}function W0(e,t){ya(wa),e&&e.length>0&&(wa=gl(e,t),wa.onmessage=Y0)}function V0(e,t){e?t&&(Ai&&Ai.close(),Ai=gl(e.thingId,"fields=thingId,policyId,definition,attributes,features,_revision,_created,_modified,_metadata,_context/topic,_context/path,_context/value&extraFields=thingId,policyId,definition,attributes,features,_revision,_created,_modified,_metadata"),Ai.onmessage=K0):ya(Ai)}function ya(e){e&&e.close()}function G0(e){["pinnedThings","filterList","messageTemplates","recentPolicyIds"].includes(e)||(ya(Ai),ya(wa))}function K0(e){if(e.data&&e.data!==""){let t=JSON.parse(e.data);Fr(t),j0(JSON.parse(e.data))}}function Y0(e){e.data&&e.data!==""&&ml(JSON.parse(e.data))}var wo=class{static{this.lastSearch=""}},ka,pe={searchFilterCount:null,thingsTableHead:null,thingsTableBody:null,searchFilterEdit:null,favIcon:null},Qp=[];function qp(e){Qp.push(e)}function Li(e=null,t=null){Qp.forEach(r=>r.call(null,e,t))}async function Zp(){Se(Q0),xa(ml),ht(pe),pe.thingsTableBody.addEventListener("click",J0)}function J0(e){if(e.target&&e.target.nodeName==="TD"){let t=e.target.parentNode;t.id==="searchThingsMore"?(t.style.pointerEvents="none",e.stopImmediatePropagation(),tu(pe.searchFilterEdit.value,!0)):St&&St.thingId===t.id?(e.stopImmediatePropagation(),Fr(null)):wr(t.id,null)}}function fn(e,t){wo.lastSearch=e,e===""||/^(eq\(|ne\(|gt\(|ge\(|lt\(|le\(|in\(|like\(|ilike\(|exists\(|and\(|or\(|not\().*/.test(e)?(tu(e),t()):vn([e]);let d=new URLSearchParams(window.location.search);d.get("filter")!==e&&(d.set("filter",e),window.history.replaceState(null,null,`${window.location.pathname}?${d}`))}function hl(){wo.lastSearch="pinned",pe.searchFilterEdit.value=null,pe.favIcon.classList.replace("bi-star-fill","bi-star"),vn(Q().pinnedThings)}function va(){wo.lastSearch==="pinned"?hl():fn(wo.lastSearch,()=>null)}function vn(e){pe.searchFilterCount.textContent="",pe.thingsTableBody.textContent="";let t=dl();e.length>0?xt("GET",`/things?${t}&ids=${e}&option=sort(%2BthingId)`).then(r=>{eu(r),pe.searchFilterCount.textContent="#: "+r.length,Li(e,t)}).catch(r=>{_a(),Li()}):(_a(),Li())}function _a(e=!1){ka=null,pe.searchFilterCount.textContent="",pe.thingsTableHead.textContent="",pe.thingsTableBody.textContent="",e||Fr(null)}function X0(e){pe.searchFilterCount.textContent="";let t=Q().searchNamespaces;xt("GET","/search/things/count"+(e&&e!==""?"?filter="+encodeURIComponent(e):"")+(t&&t!==""?"&namespaces="+t:""),null,null).then(r=>{pe.searchFilterCount.textContent="#: "+r}).catch(r=>{Li()})}function tu(e,t=!1){document.body.style.cursor="progress";let r=Q().searchNamespaces,d=dl();xt("GET","/search/things?"+d+(e&&e!==""?"&filter="+encodeURIComponent(e):"")+(r&&r!==""?"&namespaces="+r:"")+"&option=sort(%2BthingId)"+(t?",cursor("+ka+")":""),null,null).then(a=>{t?bl():(X0(e),_a(!0)),eu(a.items),u(a),t||Li(a.items.map(p=>p.thingId),d)}).catch(a=>{_a(),Li()}).finally(()=>{document.body.style.cursor="default"});function u(a){a.cursor?(g(),ka=a.cursor):ka=null}function g(){let a=pe.thingsTableBody.insertRow().insertCell(-1);a.textContent="load more...",a.colSpan=pe.thingsTableBody.rows[0].childElementCount,a.style.textAlign="center",a.style.cursor="pointer",a.disabled=!0,a.style.color="#3a8c9a",a.parentNode.id="searchThingsMore"}}function bl(){let e=document.getElementById("searchThingsMore");e&&e.parentNode.removeChild(e)}function eu(e){let t=Q().fieldList.filter(a=>a.active);d();let r=!1;e.forEach((a,p)=>{let o=pe.thingsTableBody.insertRow();u(o,a)}),r||Fr(null);function d(){pe.thingsTableHead.textContent="",ba(pe.thingsTableHead,""),ba(pe.thingsTableHead,"Thing ID"),t.forEach(a=>{ba(pe.thingsTableHead,a.label?a.label:a.path)})}function u(a,p){a.id=p.thingId,St&&p.thingId===St.thingId&&(r=!0,a.classList.add("table-active")),Si(a,p.thingId,Q().pinnedThings.includes(p.thingId),!1,q0),bo(a,g(p.thingId),p.thingId),t.forEach(o=>{let i=o.path.replace(/\//g,".");i.charAt(0)!=="."&&(i="$."+i);let n=Nt({json:p,path:i});bo(a,n.length!==0?n[0]:"").setAttribute("jsonPath",i)})}function g(a){let p=/([0-9a-f]{7})[0-9a-f]-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}/g,o=a;return Q().shortenUUID&&(o=o.replace(p,"$1")),Q().defaultNamespace&&(o=o.replace(Q().defaultNamespace,"dn")),o}}async function q0(e){if(e.target.checked)Q().pinnedThings.push(this.id);else{let t=Q().pinnedThings.indexOf(this.id);t>-1&&Q().pinnedThings.splice(t,1)}await oe(!1,"pinnedThings")}function Q0(e){e||kp(pe.thingsTableBody,()=>!1)}function ml(e){let t=document.getElementById(e.thingId);console.assert(t!==null,"Unexpected thingId for table update. thingId was not loaded before"),Array.from(t.cells).forEach(r=>{let d=r.getAttribute("jsonPath");if(d){let u=Nt({json:e,path:d});u.length!==0&&(r.innerHTML=Jr(u[0]))}})}var Z0=['eq(attributes/location,"kitchen")','ge(thingId,"myThing1")','gt(_created,"2020-08-05T12:17")',"exists(features/featureId)",'and(eq(attributes/location,"kitchen"),eq(attributes/color,"red"))','or(eq(attributes/location,"kitchen"),eq(attributes/location,"living-room"))','like(attributes/key1,"known-chars-at-start*")'],fl=[],ru,zr="...",ou,ue={favIcon:null,searchFilterEdit:null,searchThings:null,searchFavorite:null,tabThings:null,pinnedThings:null};async function nu(){Ke(tw),ht(ue),ue.pinnedThings.onclick=hl,ou=xp("#searchFilterEdit",rw,"Search for Things..."),ou.input.addEventListener("selection",e=>{let t=e.detail.selection.value;ew(t.rql)}),ue.searchThings.onclick=()=>{fn(ue.searchFilterEdit.value,()=>iu(ue.searchFilterEdit.value))},ue.searchFavorite.onclick=async e=>{e.preventDefault(),await ow(ue.searchFilterEdit.value)&&(ue.favIcon.classList.toggle("bi-star"),ue.favIcon.classList.toggle("bi-star-fill"))},ue.searchFilterEdit.onkeyup=e=>{(e.key==="Enter"||e.code===13)&&ue.searchFilterEdit.value.indexOf(zr)<0?fn(ue.searchFilterEdit.value,()=>iu(ue.searchFilterEdit.value)):(clearTimeout(ru),ru=setTimeout(au,1e3))},ue.searchFilterEdit.onchange=()=>{bl()},ue.searchFilterEdit.focus()}function tw(){Q().filterList||(Q().filterList=[]),Q().pinnedThings||(Q().pinnedThings=[])}function vl(e){ue.searchFilterEdit.value=e}function ew(e){vl(e),au(),_p(ue.searchFilterEdit,zr)||fn(ue.searchFilterEdit.value,()=>null)}async function rw(e){let t=new Date,r=new Date,d=new Date;return t.setDate(t.getDate()-1),r.setHours(r.getHours()-1),d.setMinutes(d.getMinutes()-1),[{label:"Created since 1m",rql:`gt(_created,"${d.toISOString()}")`,group:"Time"},{label:"Created since 1h",rql:`gt(_created,"${r.toISOString()}")`,group:"Time"},{label:"Created since 24h",rql:`gt(_created,"${t.toISOString()}")`,group:"Time"},{label:"Modified since 1m",rql:`gt(_modified,"${d.toISOString()}")`,group:"Time"},{label:"Modified since 1h",rql:`gt(_modified,"${r.toISOString()}")`,group:"Time"},{label:"Modified since 24h",rql:`gt(_modified,"${t.toISOString()}")`,group:"Time"},{label:`thingId = ${zr}`,rql:`eq(thingId,"${zr}")`,group:"ThingId"},{label:`thingId ~ ${zr}`,rql:`like(thingId,"${zr}*")`,group:"ThingId"},...(Q().filterList??[]).map(u=>({label:u,rql:u,group:"Favorite"})),...(Q().fieldList??[]).map(u=>({label:`${u.label} = ${zr}`,rql:`eq(${u.path},"${zr}")`,group:"Field"})),...(Q().fieldList??[]).map(u=>({label:`${u.label} ~ ${zr}`,rql:`like(${u.path},"*${zr}*")`,group:"Field"})),...fl.map(u=>({label:u,rql:u,group:"Recent"})),...Z0.map(u=>({label:u,rql:u,group:"Example"}))]}async function ow(e){if(!e||e==="")return!1;let t=Q().filterList.indexOf(e);return t>=0?Q().filterList.splice(t,1):Q().filterList.push(e),await oe(!1,"filterList"),!0}function au(){Q().filterList.indexOf(ue.searchFilterEdit.value)>=0?ue.favIcon.classList.replace("bi-star","bi-star-fill"):ue.favIcon.classList.replace("bi-star-fill","bi-star")}function iu(e){fl.includes(e)||fl.unshift(e)}var su=`<!--
  ~ Copyright (c) 2022 Contributors to the Eclipse Foundation
  ~
  ~ See the NOTICE file(s) distributed with this work for additional
  ~ information regarding copyright ownership.
  ~
  ~ This program and the accompanying materials are made available under the
  ~ terms of the Eclipse Public License 2.0 which is available at
  ~ http://www.eclipse.org/legal/epl-2.0
  ~
  ~ SPDX-License-Identifier: EPL-2.0
  -->
<div id="authorizationModal" class="modal fade" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                Authorize
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <form class="modal-body">
                <div class="row">
                    <h5>Main authentication</h5>
                    <hr />
                    <div class="row" id="mainOidcSection">
                      <div class="col-md-5">
                        <input type="radio" id="main-oidc" name="main-auth-method" value="oidc">
                        <label for="main-oidc">Single-Sign-On</label>
                      </div>
                      <div class="col-md-7">
                        <div class="input-group">
                          <label for="oidcProvider" class="input-group-text"><small>SSO provider</small></label>
                          <select class="form-select form-select-sm me-2" id="oidcProvider"></select>
                          <input type="hidden" class="form-control form-control-sm" id="oidcBearer" name="oidcBearer" />
                          <button class="btn btn-outline-secondary btn-sm" id="main-oidc-login" data-bs-dismiss="modal">Login</button>
                          <button class="btn btn-outline-secondary btn-sm" id="main-oidc-logout" data-bs-dismiss="modal">Logout</button>
                        </div>
                      </div>
                    </div>
                    <div class="row pt-2" id="mainBasicSection">
                        <div class="col-md-5">
                            <input type="radio" id="main-userpass" name="main-auth-method" value="basic" />
                            <label for="main-userpass">Basic</label>
                        </div>
                        <div class="col-md-7">
                            <div class="input-group input-group-sm mb-1">
                                <label for="userName" class="input-group-text">Username</label>
                                <input type="text" class="form-control form-control-sm" id="userName" name="username" />
                            </div>
                            <div class="input-group input-group-sm mb-1">
                                <label for="password" class="input-group-text">Password</label>
                                <input type="password" class="form-control form-control-sm" id="password" name="password" />
                            </div>
                        </div>
                    </div>
                    <div class="row pt-2" id="mainBearerSection">
                        <div class="col-md-5">
                            <input type="radio" id="main-bearer" name="main-auth-method" value="bearer">
                            <label for="main-bearer">Bearer<br /><small>(JWT OAuth2.0 Bearer token)</small></label>
                        </div>
                        <div class="col-md-7">
                            <div class="input-group input-group-sm mb-1">
                                <label for="bearer" class="input-group-text">Bearer</label>
                                <input type="password" class="form-control form-control-sm" id="bearer" name="bearer" />
                            </div>
                        </div>
                    </div>
                    <div class="row pt-2" id="mainPreAuthenticatedSection">
                        <div class="col-md-5">
                            <input type="radio" id="main-pre" name="main-auth-method" value="pre" />
                            <label for="main-pre">Pre authenticated<br />
                                <small>(via HTTP header 'x-ditto-pre-authenticated', must take the form
                                    <code>prefix:suffix</code>)</small>
                            </label>
                        </div>
                        <div class="col-md-7">
                            <div class="input-group input-group-sm mb-1">
                                <label for="dittoPreAuthenticatedUsername" class="input-group-text">prefix:suffix</label>
                                <input type="text" class="form-control form-control-sm" id="dittoPreAuthenticatedUsername" name="pre-authenticated-username"  />
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row mt-3">
                    <h5>DevOps authentication</h5>
                    <small>(for Connections and administrative tasks, optional)</small>
                    <hr />
                    <div class="row" id="devOpsOidcSection">
                      <div class="col-md-5">
                        <input type="radio" id="devops-oidc" name="devops-auth-method" value="oidc" />
                        <label for="devops-oidc">Single-Sign-On</label>
                      </div>
                      <div class="col-md-7">
                        <div class="input-group">
                          <label for="devOpsOidcProvider" class="input-group-text"><small>SSO provider</small></label>
                          <select class="form-select form-select-sm me-2" id="devOpsOidcProvider"></select>
                          <input type="hidden" class="form-control form-control-sm" id="oidcBearerDevOps" name="oidcBearerDevOps" />
                          <button class="btn btn-outline-secondary btn-sm" id="devops-oidc-login" data-bs-dismiss="modal">Login</button>
                          <button class="btn btn-outline-secondary btn-sm" id="devops-oidc-logout" data-bs-dismiss="modal">Logout</button>
                        </div>
                      </div>
                    </div>
                    <div class="row pt-2" id="devOpsBasicSection">
                        <div class="col-md-5">
                            <input type="radio" id="devops-userpass" name="devops-auth-method" value="basic" />
                            <label for="devops-userpass">Basic<br /></label>
                        </div>
                        <div class="col-md-7">
                            <div class="input-group input-group-sm mb-1">
                                <label for="devOpsUserName" class="input-group-text">DevOps Username</label>
                                <input type="text" class="form-control form-control-sm" id="devOpsUserName" name="username" />
                            </div>
                            <div class="input-group input-group-sm mb-1">
                                <label for="devOpsPassword" class="input-group-text">DevOps Password</label>
                                <input type="password" class="form-control form-control-sm" id="devOpsPassword" name="password" />
                            </div>
                        </div>
                    </div>
                    <div class="row pt-2" id="devOpsBearerSection">
                        <div class="col-md-5">
                            <input type="radio" id="devops-bearer" name="devops-auth-method" value="bearer" />
                            <label for="devops-bearer">Bearer<br /><small>(JWT OAuth2.0 Bearer token)</small></label>
                        </div>
                        <div class="col-md-7">
                            <div class="input-group input-group-sm mb-1">
                                <label for="bearerDevOps" class="input-group-text">DevOps Bearer</label>
                                <input type="password" class="form-control form-control-sm" id="bearerDevOps" name="devops-bearer" />
                            </div>
                        </div>
                    </div>
                </div>
                <div class="input-group input-group-sm" style="flex-direction: row-reverse;">
                    <button class="btn btn-outline-secondary btn-sm" data-bs-dismiss="modal"
                        id="authorizeSubmit">Authorize</button>
                </div>
            </form>
        </div>
    </div>
</div>
`;var yt={mainBearerSection:null,oidcBearer:null,bearer:null,mainBasicSection:null,userName:null,password:null,devOpsBearerSection:null,oidcBearerDevOps:null,bearerDevOps:null,devOpsBasicSection:null,devOpsUserName:null,devOpsPassword:null,mainPreAuthenticatedSection:null,dittoPreAuthenticatedUsername:null,mainOidcSection:null,oidcProvider:null,devOpsOidcSection:null,devOpsOidcProvider:null,collapseConnections:null};function aw(e){Object.assign(this,e)}var wl=!1;document.getElementById("authorizationHTML").innerHTML=su;function Vp(e){wl=e,yl(wl)}function du(){return yt.userName.value+":"+yt.password.value}function cu(){return yt.bearer.value}function pu(){return yt.oidcBearer.value}function uu(){return yt.devOpsUserName.value+":"+yt.devOpsPassword.value}function mu(){return yt.bearerDevOps.value}function gu(){return yt.oidcBearerDevOps.value}function Op(e){e&&e.length>0&&(yt.userName.value=e.split(":")[0],yt.password.value=e.split(":")[1])}function Pp(e){e&&e.length>0&&(yt.devOpsUserName.value=e.split(":")[0],yt.devOpsPassword.value=e.split(":")[1])}function Ea(e){yt.oidcBearer.value=e}function hu(e){yt.oidcBearerDevOps.value=e}function bu(){ht(yt),document.getElementById("authorize").onclick=()=>{let e=Q(),t=e.authSettings?.main?.method,r=e.authSettings?.devops?.method;t||(yt.dittoPreAuthenticatedUsername.value&&yt.dittoPreAuthenticatedUsername.value.length>0?t="pre":yt.bearer.value&&yt.bearer.value.length>0?t="bearer":yt.userName.value&&yt.userName.value.length>0&&(t="basic")),r||(yt.bearerDevOps.value&&yt.bearerDevOps.value.length>0?r="bearer":yt.devOpsUserName.value&&yt.devOpsUserName.value.length>0&&(r="basic")),Array.from(document.querySelectorAll('input[name="main-auth-method"]')).forEach(d=>{d.checked=Wo[d.value]===t}),Array.from(document.querySelectorAll('input[name="devops-auth-method"]')).forEach(d=>{d.checked=Wo[d.value]===r})},document.getElementById("authorizeSubmit").onclick=async e=>{e.preventDefault();let t=document.querySelector('input[name="main-auth-method"]:checked'),r=t?t.value:void 0,d=document.querySelector('input[name="devops-auth-method"]:checked'),u=d?d.value:void 0,g=Q();g.authSettings.main.method=Wo[r],g.authSettings.devops.method=Wo[u],g.authSettings.main.pre.dittoPreAuthenticatedUsername=yt.dittoPreAuthenticatedUsername.value,g.authSettings.main.oidc.defaultProvider=yt.oidcProvider.value,g.authSettings.devops.oidc.defaultProvider=yt.devOpsOidcProvider.value,await oe(!1)},document.getElementById("main-oidc-login").onclick=async e=>{e.preventDefault();let t=Q();t.authSettings.main.oidc.provider=yt.oidcProvider.value,Vo(),await Sa(!0)&&(t.authSettings.main.method="oidc",el("You are already logged in")),await oe(!1)},document.getElementById("main-oidc-logout").onclick=async e=>{e.preventDefault();let t=Q();t.authSettings.main.oidc.provider=yt.oidcProvider.value,await lu(t.authSettings.main.oidc)},document.getElementById("devops-oidc-login").onclick=async e=>{e.preventDefault();let t=Q();t.authSettings.devops.oidc.provider=yt.devOpsOidcProvider.value,Vo(),await Sa(!1)&&(t.authSettings.devops.method="oidc",el("You are already logged in")),await oe(!1)},document.getElementById("devops-oidc-logout").onclick=async e=>{e.preventDefault();let t=Q();t.authSettings.devops.oidc.provider=yt.devOpsOidcProvider.value,await lu(t.authSettings.devops.oidc)}}function fu(e){e===void 0&&(e=new URLSearchParams(window.location.search));let t=e.get("code")!==null,r=e.get("state")!==null;return t&&r}async function vu(e){let t=Q(),r=e.get(fa)||t.authSettings?.main?.oidc.provider,d=t.authSettings.oidc.providers[r],u=d;if(u!=null){let g=new ma(u);try{let a=await g.signinCallback(window.location.href);if(a){let p=a.state;p.mainAuth&&(t.authSettings.main.method="oidc",Ea(a[d.extractBearerTokenFrom])),p.devopsAuth&&(t.authSettings.devops.method="oidc",hu(a[d.extractBearerTokenFrom])),window.history.replaceState(null,null,`${u.redirect_uri}?${atob(a.url_state)}`),await oe(!1)}}catch(a){console.error(`Could not login due to: ${a}`)}}}async function Sa(e){let t=Q(),r;e?r=t.authSettings?.main?.oidc:r=t.authSettings?.devops?.oidc;let d=t.authSettings?.main?.oidc.provider==t.authSettings?.devops?.oidc.provider,u=t.authSettings.oidc.providers[r.provider],g=u;if(g!=null){let a=new URLSearchParams(window.location.search),p=new ma(g);if(fu(a))return await vu(a),!1;{let o=await p.getUser();if(o?.[u.extractBearerTokenFrom]!==void 0||o?.expired===!0)return d?(Ea(o[u.extractBearerTokenFrom]),hu(o[u.extractBearerTokenFrom])):Ea(o[u.extractBearerTokenFrom]),!0;a.set(Ci,un()),a.set(fa,r.provider);try{await p.signinRedirect({state:new aw({mainAuth:e||d,devopsAuth:!e||d}),url_state:btoa(a.toString())})}catch(i){return ne(i),!1}}}}async function lu(e){let r=Q().authSettings.oidc.providers[e.provider];if(r!=null){let d=new ma(r);try{let u=new URLSearchParams(window.location.search);u.set(Ci,un());let g;r.post_logout_redirect_uri?g=r.post_logout_redirect_uri:g=`${r.redirect_uri}?${u.toString()}`,await d.signoutRedirect({post_logout_redirect_uri:g})}catch(u){ne(u)}finally{Ea(void 0),Vo()}}}function Xr(e,t){!e&&t?t.style.display="none":e&&(t.style.display=null)}async function Dp(e){let t=Q();if(yt.dittoPreAuthenticatedUsername.value=t.authSettings?.main?.pre?.dittoPreAuthenticatedUsername?t.authSettings?.main?.pre?.dittoPreAuthenticatedUsername:"",t.authSettings?.oidc?.providers){let a=Object.keys(t.authSettings.oidc.providers).map(p=>({key:p,text:t.authSettings.oidc.providers[p].displayName}));tl(yt.oidcProvider,a),tl(yt.devOpsOidcProvider,a),yt.oidcProvider.value=t.authSettings.main.oidc.provider,yt.devOpsOidcProvider.value=t.authSettings.devops.oidc.provider}Xr(t.authSettings.main.oidc.enabled,yt.mainOidcSection),Xr(t.authSettings.main.basic.enabled,yt.mainBasicSection),Xr(t.authSettings.main.bearer.enabled,yt.mainBearerSection),Xr(t.authSettings.main.pre.enabled,yt.mainPreAuthenticatedSection);let r=t.authSettings.main.oidc.enabled||t.authSettings.main.basic.enabled||t.authSettings.main.bearer.enabled||t.authSettings.main.pre.enabled;Xr(r,yt.mainBasicSection.parentElement),Xr(t.authSettings.devops.oidc.enabled,yt.devOpsOidcSection),Xr(t.authSettings.devops.basic.enabled,yt.devOpsBasicSection),Xr(t.authSettings.devops.bearer.enabled,yt.devOpsBearerSection);let d=t.authSettings.devops.oidc.enabled||t.authSettings.devops.basic.enabled||t.authSettings.devops.bearer.enabled;Xr(d,yt.devOpsBasicSection.parentElement);let u=new URLSearchParams(window.location.search);e&&t.authSettings?.main?.method==="oidc"&&t.authSettings?.main?.oidc?.autoSso===!0?(await Sa(!0),Vo()):e&&t.authSettings?.devops?.method==="oidc"&&t.authSettings?.devops?.oidc?.autoSso===!0?(await Sa(!1),Vo()):fu(u)&&await vu(u),yl(wl);let g=u.get("filter");g&&(wo.lastSearch=g,vl(g))}var sw={things:{listConnections:{path:"/api/2/solutions/{{solutionId}}/connections",method:"GET",body:null,unwrapJsonPath:null},retrieveConnection:{path:"/api/2/solutions/{{solutionId}}/connections/{{connectionId}}",method:"GET",body:null,unwrapJsonPath:null},createConnection:{path:"/api/2/solutions/{{solutionId}}/connections",method:"POST",body:null,unwrapJsonPath:null},modifyConnection:{path:"/api/2/solutions/{{solutionId}}/connections/{{connectionId}}",method:"PUT",body:null,unwrapJsonPath:null},deleteConnection:{path:"/api/2/solutions/{{solutionId}}/connections/{{connectionId}}",method:"DELETE",body:null,unwrapJsonPath:null},retrieveStatus:{path:"/api/2/solutions/{{solutionId}}/connections/{{connectionId}}/status",method:"GET",body:null,unwrapJsonPath:null},retrieveConnectionLogs:{path:"/api/2/solutions/{{solutionId}}/connections/{{connectionId}}/logs",method:"GET",body:null,unwrapJsonPath:null},retrieveConnectionMetrics:{path:"/api/2/solutions/{{solutionId}}/connections/{{connectionId}}/metrics",method:"GET",body:null,unwrapJsonPath:null},connectionCommand:{path:"/api/2/solutions/{{solutionId}}/connections/{{connectionId}}/command",method:"POST",body:null,unwrapJsonPath:null}},ditto_3:{listConnections:{path:"/api/2/connections",method:"GET",body:null,unwrapJsonPath:null},retrieveConnection:{path:"/api/2/connections/{{connectionId}}",method:"GET",body:null,unwrapJsonPath:null},createConnection:{path:"/api/2/connections",method:"POST",body:null,unwrapJsonPath:null},modifyConnection:{path:"/api/2/connections/{{connectionId}}",method:"PUT",body:null,unwrapJsonPath:null},deleteConnection:{path:"/api/2/connections/{{connectionId}}",method:"DELETE",body:null,unwrapJsonPath:null},retrieveStatus:{path:"/api/2/connections/{{connectionId}}/status",method:"GET",body:null,unwrapJsonPath:null},retrieveConnectionLogs:{path:"/api/2/connections/{{connectionId}}/logs",method:"GET",body:null,unwrapJsonPath:null},retrieveConnectionMetrics:{path:"/api/2/connections/{{connectionId}}/metrics",method:"GET",body:null,unwrapJsonPath:null},connectionCommand:{path:"/api/2/connections/{{connectionId}}/command",method:"POST",body:null,unwrapJsonPath:null}},ditto_2:{listConnections:{path:"/devops/piggyback/connectivity",method:"POST",body:{targetActorSelection:"/user/connectivityRoot/connectionIdsRetrieval/singleton",headers:{aggregate:!1},piggybackCommand:{type:"connectivity.commands:retrieveAllConnectionIds"}},unwrapJsonPath:"?.?.connectionIds"},retrieveConnection:{path:"/devops/piggyback/connectivity",method:"POST",body:{targetActorSelection:"/system/sharding/connection",headers:{aggregate:!1},piggybackCommand:{type:"connectivity.commands:retrieveConnection",connectionId:"{{connectionId}}"}},unwrapJsonPath:"?.?.connection"},createConnection:{path:"/devops/piggyback/connectivity",method:"POST",body:{targetActorSelection:"/system/sharding/connection",headers:{aggregate:!1},piggybackCommand:{type:"connectivity.commands:createConnection",connection:"{{connectionJson}}"}},unwrapJsonPath:"?.?.connection"},modifyConnection:{path:"/devops/piggyback/connectivity",method:"POST",body:{targetActorSelection:"/system/sharding/connection",headers:{aggregate:!1},piggybackCommand:{type:"connectivity.commands:modifyConnection",connection:"{{connectionJson}}"}},unwrapJsonPath:null},deleteConnection:{path:"/devops/piggyback/connectivity",method:"POST",body:{targetActorSelection:"/system/sharding/connection",headers:{aggregate:!1},piggybackCommand:{type:"connectivity.commands:deleteConnection",connectionId:"{{connectionId}}"}},unwrapJsonPath:null},retrieveStatus:{path:"/devops/piggyback/connectivity",method:"POST",body:{targetActorSelection:"/system/sharding/connection",headers:{aggregate:!1},piggybackCommand:{type:"connectivity.commands:retrieveConnectionStatus",connectionId:"{{connectionId}}"}},unwrapJsonPath:"?.?"},retrieveConnectionLogs:{path:"/devops/piggyback/connectivity",method:"POST",body:{targetActorSelection:"/system/sharding/connection",headers:{aggregate:!1,"is-group-topic":!0},piggybackCommand:{type:"connectivity.commands:retrieveConnectionLogs",connectionId:"{{connectionId}}"}},unwrapJsonPath:"?.?"},retrieveConnectionMetrics:{path:"/devops/piggyback/connectivity",method:"POST",body:{targetActorSelection:"/system/sharding/connection",headers:{aggregate:!1,"is-group-topic":!0},piggybackCommand:{type:"connectivity.commands:retrieveConnectionMetrics",connectionId:"{{connectionId}}"}},unwrapJsonPath:"?.?"},connectionCommand:{path:"/devops/piggyback/connectivity",method:"POST",body:{targetActorSelection:"/system/sharding/connection",headers:{aggregate:!1,"is-group-topic":!0},piggybackCommand:{type:"{{command}}",connectionId:"{{connectionId}}"}},unwrapJsonPath:null}}},pr,Oe;function yl(e){Oe=void 0;let t=Q();if(e){let r=t.authSettings?.devops?.method;if(r==="basic"){let d=uu();d?(pr="Authorization",Oe="Basic "+window.btoa(d)):ne("DevOps Username/password missing")}else if(r==="bearer"){let d=mu();d?(pr="Authorization",Oe="Bearer "+d):ne("DevOps Bearer token missing")}else if(r==="oidc"){let d=gu();d?(pr="Authorization",Oe="Bearer "+d):ne("DevOps SSO (Bearer) token missing")}else pr="Authorization",Oe="Basic"}else{let r=t.authSettings?.main?.method;if(r==="basic"){let d=du();d?(pr="Authorization",Oe="Basic "+window.btoa(d)):ne("Username/password missing")}else if(r==="pre")t.authSettings.main.pre.dittoPreAuthenticatedUsername?(pr="x-ditto-pre-authenticated",Oe=t.authSettings.main.pre.dittoPreAuthenticatedUsername):ne("Pre-Authenticated username missing");else if(r==="bearer"){let d=cu();d?(pr="Authorization",Oe="Bearer "+d):ne("Bearer token missing")}else if(r==="oidc"){let d=pu();d?(pr="Authorization",Oe="Bearer "+d):ne("SSO (Bearer) token missing")}else pr="Authorization",Oe="Basic"}}function lw(e){return e.status===400&&e.error==="jwt:invalid"||e.status===401}function Ta(e,t){e.status&&e.message?(ne(e.description+`
(${e.error})`,e.message,e.status),lw(e)&&document.getElementById("authorize").click()):ne(JSON.stringify(e),"Error",t.status)}async function xt(e,t,r=null,d=null,u=!1,g=!1,a=!1){if(Oe){let p,o=e==="PATCH"?"application/merge-patch+json":"application/json";try{p=await fetch(Q().api_uri+(g?"":"/api/2")+t,{method:e,headers:{"Content-Type":o,[pr]:Oe,...d},...e!=="GET"&&e!=="DELETE"&&r!==void 0&&{body:JSON.stringify(r)}})}catch(i){throw ne(i),i}if(!p.ok){if(a)return u?p:p.json().then(i=>(Ta(i,p),i));throw p.json().then(i=>{Ta(i,p)}).catch(i=>{ne("No error details from Ditto",p.statusText,p.status)}),new Error("An error occurred: "+p.status)}return p.status!==204?u?p:p.json():null}else throw new Error("Authentication missing")}function gl(e,t){if(Oe)return new wu.EventSourcePolyfill(`${Q().api_uri}/api/2/things?ids=${e}${t?"&"+t:""}`,{headers:{[pr]:Oe}});throw new Error("Authentication missing")}async function Pe(e,t,r="",d=null,u=null){let g=sw[$i()][e],a,p;if(g.body?p=JSON.stringify(g.body).replace("{{connectionId}}",r).replace('"{{connectionJson}}"',JSON.stringify(d)).replace("{{command}}",u):d?p=JSON.stringify(d):p=u,Oe)try{a=await fetch(Q().api_uri+g.path.replace("{{connectionId}}",r),{method:g.method,headers:{"Content-Type":e==="connectionCommand"?"text/plain":"application/json",[pr]:Oe},...p&&{body:p}})}catch(o){throw ne(o),o}else throw new Error("Authentication missing");if(!a.ok)throw a.json().then(o=>{Ta(o,a)}).catch(o=>{ne("No error details from Ditto",a.statusText,a.status)}),new Error("An error occured: "+a.status);e!=="connectionCommand"&&a.status!==204?(document.body.style.cursor="progress",a.json().then(o=>{if(o&&o["?"]&&o["?"]["?"].status>=400){let i=o["?"]["?"].payload;Ta(i,a)}else g.unwrapJsonPath&&g.unwrapJsonPath.split(".").forEach(function(i){i==="?"&&(i=Object.keys(o)[0]),o=o[i]}),t(o)}).catch(o=>{throw ne("Error calling connections API",o),o}).finally(()=>{document.body.style.cursor="default"})):t&&t()}function $i(){return Q().ditto_version===2?"ditto_2":"ditto_3"}var yu=`<!--
  ~ Copyright (c) 2022 Contributors to the Eclipse Foundation
  ~
  ~ See the NOTICE file(s) distributed with this work for additional
  ~ information regarding copyright ownership.
  ~
  ~ This program and the accompanying materials are made available under the
  ~ terms of the Eclipse Public License 2.0 which is available at
  ~ http://www.eclipse.org/legal/epl-2.0
  ~
  ~ SPDX-License-Identifier: EPL-2.0
  -->
<h5 data-bs-toggle="collapse" data-bs-target="#connectionsEdit">
    Manage Connections
</h5>
<hr />
<div class="collapse show" id="connectionsEdit">
    <div class="row resizable_pane" style="height: 80vh;">
        <div class="col-md-4 resizable_flex_column">
            <div class="input-group input-group-sm mt-1 mb-1" role="group">
                <div style="flex-grow: 1;"></div>
                <button class="btn btn-outline-secondary btn-sm button_round_left" id="buttonLoadConnections">
                    <i class="bi bi-arrow-clockwise"></i>
                    Refresh
                </button>
            </div>
            <div class="input-group has-validation">
                <input class="form-control" id="tableValidationConnections" hidden="true"></input>
                <div class="invalid-feedback"></div>
            </div>
            <div class="table-wrap mb-1">
                <table class="table table-striped table-hover table-sm">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Live Status</th>
                            <th>Recovery Status</th>
                        </tr>
                    </thead>
                    <tbody id="tbodyConnections"></tbody>
                </table>
            </div>
        </div>
        <div class="col-md-8 resizable_flex_column">
            <h6>CRUD Connection</h6>
            <crud-toolbar label="Connection Id" id="crudConnection" style="flex-grow: 1;">
                <div class="input-group input-group-sm mb-1">
                    <label class="input-group-text">Template</label>
                    <div class="btn-group dropend">
                        <button class="btn btn-outline-secondary btn-sm dropdown-toggle"
                        data-bs-toggle="dropdown" id="buttonConnectionTemplates" disabled></button>
                        <ul id="ulConnectionTemplates" class="dropdown-menu" style="position: fixed; top: auto;"></ul>                                    
                    </div>
                    <input type="text" class="form-control form-control-sm" id="inputConnectionTemplate" disabled></input>
                </div>
                <div class="input-group has-validation">
                    <input class="form-control" id="editorValidationConnection" hidden="true"></input>
                    <div class="invalid-feedback"></div>
                </div>
                <div class="row mb-1" style="flex-grow: 1;">
                    <div class="col-md-6 resizable_flex_column">
                        <div class="ace_container" style="flex-grow: 1;">
                            <div class="script_editor" id="connectionEditor"></div>
                        </div>        
                    </div>
                    <div class="col-md-6 resizable_flex_column">
                        <h6>Incoming JavaScript Mapping</h6>
                        <div class="ace_container mb-3" style="flex-grow: 1;">
                            <div class="script_editor" id="connectionIncomingScript"></div>
                        </div>
                        <h6>Outgoing JavaScript Mapping</h6>
                        <div class="ace_container" style="flex-grow: 1;">
                            <div class="script_editor" id="connectionOutgoingScript"></div>
                        </div>        
                    </div>
                </div>
            </crud-toolbar>
        </div>
    </div>
</div>
<h5 data-bs-toggle="collapse" data-bs-target="#tabConnectionHelper">
    Connection Status, Metrics and Logs
</h5>
<hr />
<div class="collapse show" id="tabConnectionHelper">
    <div class="row resizable_pane" style="height: 80vh;">
        <div class="col-md-4 resizable_flex_column">
            <ul class="nav nav-tabs nav-fill">
                <li class="nav-item">
                    <a class="nav-link active" data-bs-toggle="tab" data-bs-target="#tabConnectionMetrics">Metrics</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-bs-toggle="tab" data-bs-target="#tabConnectionStatus">Status</a>
                </li>
            </ul>
            <div class="tab-content" style="flex-grow: 1; overflow: hidden">
                <div class="tab-pane container active no-margin" id="tabConnectionMetrics">
                    <div class="resizable_flex_column">
                        <div class="input-group input-group-sm mb-1 mt-1">
                            <button class="btn btn-outline-secondary btn-sm button_round_both"
                                id="buttonResetConnectionMetrics" data-bs-toggle="tooltip"
                                title="Reset connection metrics for the selected connection">
                                <i class="bi bi-x-circle"></i>
                                Reset
                            </button>
                            <div class="form-control-sm" style="flex-grow: 1;"></div>
                            <button class="btn btn-outline-secondary btn-sm button_round_both"
                                id="buttonRetrieveConnectionMetrics" data-bs-toggle="tooltip"
                                title="Refresh connection metrics for the selected connection">
                                <i class="bi bi-arrow-clockwise"></i>
                                Refresh
                            </button>
                        </div>
                        <div class="table-wrap">
                            <table class="table table-striped table-hover table-sm">
                                <thead>
                                    <tr>
                                        <th>Direction</th>
                                        <th>Type</th>
                                        <th>Level</th>
                                        <th>1m</th>
                                        <th>1h</th>
                                        <th>24h</th>
                                    </tr>
                                </thead>
                                <tbody id="tbodyConnectionMetrics"></tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="tab-pane container fade no-margin" id="tabConnectionStatus">
                    <div class="resizable_flex_column">
                        <div class="input-group input-group-sm mb-1 mt-1">
                            <div class="form-control-sm" style="flex-grow: 1;"></div>
                            <button class="btn btn-outline-secondary btn-sm button_round_both"
                                id="buttonRetrieveConnectionStatus" data-bs-toggle="tooltip"
                                title="Refresh connection status">
                                <i class="bi bi-arrow-clockwise"></i>
                                Refresh
                            </button>
                        </div>
                        <div class="ace_container" style="flex-grow: 1;">
                            <div class="script_editor" id="connectionStatusDetail"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-4 resizable_flex_column">
            <h6>Connection Logs <span class="badge rounded-pill bg-info" id="badgeConnectionLogsCount"></span></h6>
            <div class="input-group input-group-sm mb-1">
                <button class="btn btn-outline-secondary btn-sm button_round_left" id="buttonEnableConnectionLogs"
                    data-bs-toggle="tooltip" title="Click to enable connection logs for the selected connection">
                    <i class="bi bi-toggle-off"></i>
                    <span>Enable</span>
                </button>
                <button class="btn btn-outline-secondary btn-sm button_round_right" id="buttonResetConnectionLogs"
                    data-bs-toggle="tooltip" title="Reset connection logs for the selected connection">
                    <i class="bi bi-x-circle"></i>
                    Reset
                </button>
                <div class="form-control-sm" style="flex-grow: 1;"></div>
                <button class="btn btn-outline-secondary btn-sm button_round_both" id="buttonRetrieveConnectionLogs"
                    data-bs-toggle="tooltip" title="Refresh connection logs for the selected connection">
                    <i class="bi bi-arrow-clockwise"></i>
                    Refresh
                </button>
            </div>
            <table-filter id="tableFilterConnectionLogs"></table-filter>
            <div class="table-wrap">
                <table class="table table-striped table-hover table-sm" style="table-layout: fixed;">
                    <thead>
                        <tr>
                            <th>Timestamp</th>
                            <th>Category</th>
                            <th>Type</th>
                            <th>Level</th>
                        </tr>
                    </thead>
                    <tbody id="tbodyConnectionLogs"></tbody>
                </table>
            </div>
        </div>
        <div class="col-md-4 resizable_flex_column">
            <h6>Connection Log Detail</h6>
            <div class="ace_container" style="flex-grow: 1;">
                <div class="script_editor" id="connectionLogDetail"></div>
            </div>
        </div>
    </div>
</div>`;var xu=[];document.getElementById("connectionsHTML").innerHTML=yu;function Ca(e){xu.push(e)}function cw(e,t){xu.forEach(r=>r.call(null,e,t))}var qr={tbodyConnections:null,buttonLoadConnections:null,tabConnections:null,collapseConnections:null,tableValidationConnections:null},yo;function ku(){ht(qr),Nr(qr.tabConnections,qr.collapseConnections,uw,"disableConnections"),dr(qr.tbodyConnections,qr.tableValidationConnections),qr.buttonLoadConnections.onclick=Ri,qr.tbodyConnections.addEventListener("click",pw)}function Yo(e,t=!1){yo=e?e.id:null,cw(e,t)}function Ri(){qr.tbodyConnections.textContent="";let e=!1;Pe("listConnections",t=>{t.forEach(r=>{let d=$i()==="ditto_2"?r:r.id,u=qr.tbodyConnections.insertRow();u.id=d,$i()==="ditto_2"?Pe("retrieveConnection",g=>{u.insertCell(0).textContent=g.name},d):u.insertCell(0).textContent=r.name?r.name:d,Pe("retrieveStatus",g=>{u.insertCell(-1).textContent=g.liveStatus,u.insertCell(-1).textContent=g.recoveryStatus},d),d===yo&&(u.classList.add("table-active"),e=!0)}),e||(yo=null,Yo(null))})}function pw(e){e.target&&e.target.tagName==="TD"&&(yo===e.target.parentNode.id?(yo=null,Yo(null)):(yo=e.target.parentNode.id,Pe("retrieveConnection",Yo,yo)))}function uw(e){e&&(yo=null,Yo(null)),Ri()}var kl={"AMQP 0.9.1":{name:"AMQP 0.9.1",connectionType:"amqp-091",connectionStatus:"closed",failoverEnabled:!0,uri:"amqp://user:password@localhost:5672/vhost",sources:[{addresses:["queueName"],authorizationContext:["ditto:inbound-auth-subject"]}],targets:[{address:"exchangeName/routingKey",topics:["_/_/things/twin/events","_/_/things/live/messages"],authorizationContext:["ditto:outbound-auth-subject"]}]},"AMQP 1.0":{name:"AMQP 1.0",connectionType:"amqp-10",connectionStatus:"closed",failoverEnabled:!0,uri:"amqps://user:password@hono.eclipseprojects.io:5671",sources:[{addresses:["telemetry/FOO"],authorizationContext:["ditto:inbound-auth-subject"]}],targets:[{address:"events/twin",topics:["_/_/things/twin/events"],authorizationContext:["ditto:outbound-auth-subject"]}]},"MQTT 3.1.1":{name:"MQTT 3.1.1",connectionType:"mqtt",connectionStatus:"closed",failoverEnabled:!0,uri:"tcp://test.mosquitto.org:1883",sources:[{addresses:["eclipse-ditto-sandbox/#"],authorizationContext:["ditto:inbound-auth-subject"],qos:0}],targets:[{address:"eclipse-ditto-sandbox/{{ thing:id }}",topics:["_/_/things/twin/events"],authorizationContext:["ditto:outbound-auth-subject"],qos:0}]},"MQTT 5":{name:"MQTT 5",connectionType:"mqtt-5",connectionStatus:"closed",failoverEnabled:!0,uri:"tcp://test.mosquitto.org:1883",sources:[{addresses:["eclipse-ditto-sandbox/#"],authorizationContext:["ditto:inbound-auth-subject"],qos:0}],targets:[{address:"eclipse-ditto-sandbox/{{ thing:id }}",topics:["_/_/things/twin/events"],authorizationContext:["ditto:outbound-auth-subject"],qos:0}]},"MQTT 5 with JS mapping":{name:"MQTT 5 with JS mapping",connectionType:"mqtt-5",connectionStatus:"closed",failoverEnabled:!0,uri:"tcp://test.mosquitto.org:1883",sources:[{addresses:["eclipse-ditto-sandbox/#"],authorizationContext:["ditto:inbound-auth-subject"],qos:0,enforcement:{input:"{{ source:address }}",filters:["eclipse-ditto-sandbox/{{ thing:name }}/update"]},replyTarget:{enabled:!1},payloadMapping:["javascript"]}],targets:[{address:"eclipse-ditto-sandbox/{{ thing:id }}",topics:["_/_/things/twin/events"],authorizationContext:["ditto:outbound-auth-subject"],qos:0,payloadMapping:["javascript"]}],mappingDefinitions:{javascript:{mappingEngine:"JavaScript",options:{incomingScript:`/**
 * Maps the passed parameters to a Ditto Protocol message.
 * @param {Object.<string, string>} headers - The headers Object containing all received header values
 * @param {string} [textPayload] - The String to be mapped
 * @param {ArrayBuffer} [bytePayload] - The bytes to be mapped as ArrayBuffer
 * @param {string} [contentType] - The received Content-Type, e.g. "application/json"
 * @returns {(DittoProtocolMessage|Array<DittoProtocolMessage>)} dittoProtocolMessage(s) -
 *  The mapped Ditto Protocol message,
 *  an array of Ditto Protocol messages or
 *  <code>null</code> if the message could/should not be mapped
 */
function mapToDittoProtocolMsg(
  headers,
  textPayload,
  bytePayload,
  contentType
) {

  // ### Insert/adapt your mapping logic here.
  // Use helper function Ditto.buildDittoProtocolMsg to build Ditto protocol message
  // based on incoming payload.
  // See https://www.eclipse.dev/ditto/connectivity-mapping.html#helper-functions for details.

  // ### example code assuming the Ditto protocol content type for incoming messages.
  if (contentType === 'application/vnd.eclipse.ditto+json') {
    // Message is sent as Ditto protocol text payload and can be used directly
    return JSON.parse(textPayload);
  } else if (contentType === 'application/octet-stream') {
    // Message is sent as binary payload; assume Ditto protocol message (JSON).
    try {
      return JSON.parse(Ditto.arrayBufferToString(bytePayload));
    } catch (e) {
      // parsing failed (no JSON document); return null to drop the message
      return null;
    }
  }

  // no mapping logic matched; return null to drop the message
  return null;
}`,outgoingScript:`/**
 * Maps the passed parameters which originated from a Ditto Protocol message to an external message.
 * @param {string} namespace - The namespace of the entity in java package notation, e.g.: "org.eclipse.ditto". Or "_"
 * (underscore) for connection announcements.
 * @param {string} name - The name of the entity, e.g.: "device".
 * @param {string} group - The affected group/entity: "things"|"policies"|"connections".
 * @param {string} channel - The channel for the signal: "twin"|"live"|"none"
 * @param {string} criterion - The criterion to apply: "commands"|"events"|"search"|"messages"|"announcements"|"errors".
 * @param {string} action - The action to perform: "create"|"retrieve"|"modify"|"delete". Or the announcement name:
 * "opened"|"closed"|"subjectDeletion". Or the subject of the message.
 * @param {string} path - The path which is affected by the message (e.g.: "/attributes"), or the destination
 * of a message (e.g.: "inbox"|"outbox").
 * @param {Object.<string, string>} dittoHeaders - The headers Object containing all Ditto Protocol header values.
 * @param {*} [value] - The value to apply / which was applied (e.g. in a "modify" action).
 * @param {number} [status] - The status code that indicates the result of the command. When this field is set,
 * it indicates that the Ditto Protocol Message contains a response.
 * @param {Object} [extra] - The enriched extra fields when selected via "extraFields" option.
 * @returns {(ExternalMessage|Array<ExternalMessage>)} externalMessage - The mapped external message, an array of
 * external messages or <code>null</code> if the message could/should not be mapped.
 */
function mapFromDittoProtocolMsg(
  namespace,
  name,
  group,
  channel,
  criterion,
  action,
  path,
  dittoHeaders,
  value,
  status,
  extra
) {

  // ###
  // Insert your mapping logic here

  // ### example code using the Ditto protocol content type.
  let headers = dittoHeaders;
  let textPayload = JSON.stringify(Ditto.buildDittoProtocolMsg(namespace, name, group, channel, criterion, action,
                                                               path, dittoHeaders, value, status, extra));
  let bytePayload = null;
  let contentType = 'application/vnd.eclipse.ditto+json';

  return Ditto.buildExternalMsg(
      headers, // The external headers Object containing header values
      textPayload, // The external mapped String
      bytePayload, // The external mapped byte[]
      contentType // The returned Content-Type
  );
}`,loadBytebufferJS:"false",loadLongJS:"false"}}}},"HTTP 1.1":{name:"HTTP 1.1",connectionType:"http-push",connectionStatus:"closed",failoverEnabled:!0,uri:"https://webhook.site:443/<YOUR-WEBHOOK-ID>",specificConfig:{parallelism:"1"},sources:[],targets:[{address:"POST:/ditto-event/{{ thing:id }}",topics:["_/_/things/twin/events"],authorizationContext:["ditto:outbound-auth-subject"],headerMapping:{"content-type":"{{ header:content-type }}","api-key":"this-is-a-secret-api-key-to-send-along"}}]},"Kafka 2.x":{name:"Kafka 2.x",connectionType:"kafka",connectionStatus:"closed",failoverEnabled:!0,uri:"tcp://user:password@localhost:9092",specificConfig:{bootstrapServers:"localhost:9092,other.host:9092",saslMechanism:"plain"},sources:[{addresses:["theTopic"],consumerCount:1,qos:1,authorizationContext:["ditto:inbound-auth-subject"],enforcement:{input:"{{ header:device_id }}",filters:["{{ entity:id }}"]},headerMapping:{},payloadMapping:["Ditto"],replyTarget:{enabled:!0,address:"theReplyTopic",headerMapping:{},expectedResponseTypes:["response","error","nack"]},acknowledgementRequests:{includes:[]},declaredAcks:[]}],targets:[{address:"topic/key",topics:["_/_/things/twin/events","_/_/things/live/messages"],authorizationContext:["ditto:outbound-auth-subject"]}]}};var Qt={buttonConnectionTemplates:null,ulConnectionTemplates:null,inputConnectionTemplate:null,crudConnection:null,editorValidationConnection:null},Ue,Jo,Xo,qe,La;function Eu(){Ca(Aa),ht(Qt),fo(Qt.ulConnectionTemplates,Object.keys(kl)),Ue=Dt("connectionEditor","ace/mode/json",!0),Jo=Dt("connectionIncomingScript","ace/mode/javascript",!0),Xo=Dt("connectionOutgoingScript","ace/mode/javascript",!0),Qt.ulConnectionTemplates.addEventListener("click",ww),Jo.on("blur",_u(Jo,"incomingScript")),Xo.on("blur",_u(Xo,"outgoingScript")),Ue.on("input",gw),Ue.getSession().on("changeAnnotation",hw),Qt.crudConnection.addEventListener("onEditToggle",yw),Qt.crudConnection.addEventListener("onCreateClick",vw),Qt.crudConnection.addEventListener("onUpdateClick",bw),Qt.crudConnection.addEventListener("onDeleteClick",fw)}function _u(e,t){return()=>{if(!Qt.crudConnection.isEditing||La)return;let d=JSON.parse(Ue.getValue());r(d),d.mappingDefinitions.javascript.options[t]=e.getValue(),Ue.setValue(Ct(d),-1)};function r(d){d.mappingDefinitions||(d.mappingDefinitions={javascript:{mappingEngine:"JavaScript",options:{incomingScript:"",outgoingScript:""}}})}}function gw(){Ue.session.getUndoManager().isClean()||(Qt.inputConnectionTemplate.value=null,Qt.editorValidationConnection.classList.remove("is-invalid"))}function hw(){La=Ue.getSession().getAnnotations().filter(e=>e.type==="error").length>0}function bw(){lt(!La,"Errors in connection json",Qt.editorValidationConnection),qe=JSON.parse(Ue.getValue()),Pe("modifyConnection",()=>{Ri(),Qt.crudConnection.toggleEdit()},Qt.crudConnection.idValue,qe)}function fw(){Ge(`Are you sure you want to delete connection<br>'${qe.name}'?`,"Delete",()=>{Pe("deleteConnection",()=>{Yo(null),Ri()},Qt.crudConnection.idValue)})}function vw(){lt(Ue.getValue()!=="","Please enter a connection configuration (select a template as a basis)",Qt.editorValidationConnection),lt(!La,"Errors in connection json",Qt.editorValidationConnection);let e=JSON.parse(Ue.getValue());$i()==="ditto_2"?e.id=Math.random().toString(36).replace("0.",""):delete e.id,Pe("createConnection",t=>{Yo(t,!0),Ri(),Qt.crudConnection.toggleEdit()},null,e)}function ww(e){Qt.inputConnectionTemplate.value=e.target.textContent;let t=JSON.parse(JSON.stringify(kl[Qt.inputConnectionTemplate.value]));Aa(t),Qt.editorValidationConnection.classList.remove("is-invalid"),Ue.session.getUndoManager().markClean()}function Aa(e){qe=e,Jo.setValue(""),Xo.setValue(""),qe?(Qt.crudConnection.idValue=qe.id?qe.id:null,Ue.setValue(Ct(qe),-1),qe.mappingDefinitions&&qe.mappingDefinitions.javascript&&(Jo.setValue(qe.mappingDefinitions.javascript.options.incomingScript,-1),Xo.setValue(qe.mappingDefinitions.javascript.options.outgoingScript,-1))):(Qt.crudConnection.idValue=null,Ue.setValue(""))}function yw(e){let t=e.detail.isEditing;Qt.buttonConnectionTemplates.disabled=!t,Ue.setReadOnly(!t),Ue.renderer.setShowGutter(t),Jo.setReadOnly(!t),Jo.renderer.setShowGutter(t),Xo.setReadOnly(!t),Xo.renderer.setShowGutter(t),t||(Qt.crudConnection.idValue&&Qt.crudConnection.idValue!==""?Aa(qe):Aa(null))}var wn=(r=>(r[r.PROP_LIKE=0]="PROP_LIKE",r[r.PROP_EQ=1]="PROP_EQ",r))(wn||{}),De=class e{constructor(t,r,d="@",u){console.assert(!(d==="@"&&t!==0)),this.type=t,this.key=d,this.values=[r],this.keyDisplay=u}add(t){this.values=[...new Set([...t,...this.values])]}toJsonPath(){switch(this.type){case 1:return this.values.map(t=>`@.${this.key}=="${t}"`).join("||");case 0:return this.key==="@"?`/${this.values[0].toString().replace(/\//g,"\\/")}/.test(JSON.stringify(@))`:this.values.map(t=>`/${t.replace(/\//g,"\\/")}/.test(@.${this.key})`).join("||")}}static fromString(t){let r=/^([^:~]+)(:|~)?(.*)/gm.exec(t.replace(/\s/g,""));return r[2]===":"?new e(1,r[3],r[1]):r[2]==="~"?new e(0,r[3],r[1]):new e(0,r[1])}static fromJSON(t){return console.assert(t.values.length===1),new e(t.type,t.values[0],t.key,t.keyDisplay)}toString(){switch(this.type){case 1:return`${this.keyDisplay??this.key}:${this.values.toString().replace(/\\/g,"")}`;case 0:return this.key==="@"?this.values[0]:`${this.keyDisplay??this.key}~${this.values.toString().replace(/\\/g,"")}`}}},yn=class{constructor(){this.terms=[];this.addPropEq=(t,r)=>(this.addOrUpdate(new De(1,r,t)),this);this.addPropLike=(t,r)=>(this.addOrUpdate(new De(0,r,t)),this);this.addFromString=t=>{let r=De.fromString(t);return this.addOrUpdate(r),this};this.addOrUpdate=t=>{let r=this.terms.find(d=>d.type===t.type&&d.key===t.key);return r?r.add(t.values):this.terms.push(t),this};this.getAllUIs=()=>this.terms.map(t=>this.createChipUIForTerm(t));this.deleteFilterCallback=t=>{let r=t.target.getAttribute("data-key"),d=wn[t.target.getAttribute("data-type")];this.terms=this.terms.filter(u=>u.key!==r||u.type!==d),this.onFilterChange&&this.onFilterChange.filterChanged()}}setAllLike(t){return this.addOrUpdate(new De(0,t)),this}clear(){this.terms=[]}createChipUIForTerm(t){let r=document.createElement("span");r.classList.add("badge","rounded-pill","bg-info","mb-1","me-1"),r.innerText=t.toString();let d=document.createElement("button");return d.type="button",d.classList.add("btn-close"),d.style.fontSize="0.75em",d.setAttribute("data-key",t.key),d.setAttribute("data-type",wn[t.type]),d.onclick=this.deleteFilterCallback,r.appendChild(d),r}createJsonPath(){let t=this.terms.map(r=>r.toJsonPath());return t.length>1?`$[?(${t.map(r=>`(${r})`).join("&&")})]`:t.length>0?`$[?(${t})]`:null}};var Bt={tbodyConnectionLogs:null,tbodyConnectionMetrics:null,buttonRetrieveConnectionStatus:null,buttonRetrieveConnectionLogs:null,buttonEnableConnectionLogs:null,buttonResetConnectionLogs:null,buttonRetrieveConnectionMetrics:null,buttonResetConnectionMetrics:null,tableValidationConnections:null,tableFilterConnectionLogs:null,badgeConnectionLogsCount:null},_l=[],$a,Mi,Ra,Qe;async function Tu(){Ca(Aw),ht(Bt),Mi=Dt("connectionLogDetail","ace/mode/json",!0),Mi.session.setUseWrapMode(!0),Ra=Dt("connectionStatusDetail","ace/mode/json",!0),Bt.buttonRetrieveConnectionStatus.onclick=Su,document.querySelector('a[data-bs-target="#tabConnectionStatus"]').onclick=Su,Bt.buttonEnableConnectionLogs.onclick=Tw,Bt.buttonResetConnectionLogs.onclick=Sw,Bt.buttonRetrieveConnectionLogs.onclick=Ma,Bt.tbodyConnectionLogs.addEventListener("click",_w),Bt.tableFilterConnectionLogs.addEventListener("filterChange",Lw),Bt.tableFilterConnectionLogs.filterOptions=$w(),Bt.buttonRetrieveConnectionMetrics.onclick=El,document.querySelector('a[data-bs-target="#tabConnectionMetrics"]').onclick=El,Bt.buttonResetConnectionMetrics.onclick=kw,Bt.tbodyConnectionMetrics.addEventListener("click",Ew)}function kw(){lt(Qe,"Please select a connection",Bt.tableValidationConnections),Pe("connectionCommand",El,Qe,null,"connectivity.commands:resetConnectionMetrics")}function _w(e){Mi.setValue(Ct($a[e.target.parentNode.rowIndex-1]),-1),Mi.session.getUndoManager().reset()}function Ew(e){}function Sw(){lt(Qe,"Please select a connection",Bt.tableValidationConnections),Pe("connectionCommand",Ma,Qe,null,"connectivity.commands:resetConnectionLogs")}function Tw(){lt(Qe,"Please select a connection",Bt.tableValidationConnections),Pe("connectionCommand",Ma,Qe,null,"connectivity.commands:enableConnectionLogs")}function El(){lt(Qe,"Please select a connection",Bt.tableValidationConnections),Bt.tbodyConnectionMetrics.textContent="",Pe("retrieveConnectionMetrics",e=>{e.connectionMetrics&&Object.keys(e.connectionMetrics).forEach(t=>{e.connectionMetrics[t]&&Object.keys(e.connectionMetrics[t]).forEach(r=>{let d=e.connectionMetrics[t][r];Ht(Bt.tbodyConnectionMetrics,t,!1,null,r,"success",d.success.PT1M,d.success.PT1H,d.success.PT24H);let g=Ht(Bt.tbodyConnectionMetrics,t,!1,null,r,"failure",d.failure.PT1M,d.failure.PT1H,d.failure.PT24H).lastElementChild;for(let a=0;a<3;a++)g.innerHTML!=="0"&&g.classList.add("text-danger"),g=g.previousElementSibling})})},Qe)}function Su(){lt(Qe,"Please select a connection",Bt.tableValidationConnections),Pe("retrieveStatus",e=>{Ra.setValue(Ct(e),-1),Ra.session.getUndoManager().reset()},Qe)}function Ma(){lt(Qe,"Please select a connection",Bt.tableValidationConnections),Pe("retrieveConnectionLogs",e=>{_l=e.connectionLogs,Cw(e),Cu()},Qe)}function Cu(){Bt.tbodyConnectionLogs.textContent="",Mi.setValue(""),$a=Bt.tableFilterConnectionLogs.filterItems(_l),$a.forEach(e=>{Ht(Bt.tbodyConnectionLogs,cn(e.timestamp,!0),!1,null,e.category,e.type,e.level)}),pn(Bt.badgeConnectionLogsCount,_l,$a),Bt.tbodyConnectionLogs.scrollTop=Bt.tbodyConnectionLogs.scrollHeight-Bt.tbodyConnectionLogs.clientHeight}function Cw(e){e.enabledUntil?(Bt.buttonEnableConnectionLogs.querySelector("i").classList.replace("bi-toggle-off","bi-toggle-on"),Bt.buttonEnableConnectionLogs.setAttribute("title",`Enabled until ${cn(e.enabledUntil)}`)):(Bt.buttonEnableConnectionLogs.querySelector("i").classList.replace("bi-toggle-on","bi-toggle-off"),Bt.buttonEnableConnectionLogs.setAttribute("title","Click to enable connection logs for the selected connection"))}function Aw(e,t=!0){Qe=e?e.id:null,Ra.setValue(""),Mi.setValue(""),Bt.tbodyConnectionMetrics.textContent="",Bt.tbodyConnectionLogs.textContent="",!t&&e&&e.id&&Ma()}function Lw(e){Cu()}function $w(){let e=[];return["consumed","mapped","dropped","enforced","acknowledged","throttled","dispatched","filtered","published"].forEach(t=>e.push(new De(1,t,"type"))),["source","target","response"].forEach(t=>e.push(new De(1,t,"category"))),["success","failure"].forEach(t=>e.push(new De(1,t,"level"))),["thing"].forEach(t=>e.push(new De(1,t,"entityType"))),e}var Au=`<!--
  ~ Copyright (c) 2023 Contributors to the Eclipse Foundation
  ~
  ~ See the NOTICE file(s) distributed with this work for additional
  ~ information regarding copyright ownership.
  ~
  ~ This program and the accompanying materials are made available under the
  ~ terms of the Eclipse Public License 2.0 which is available at
  ~ http://www.eclipse.org/legal/epl-2.0
  ~
  ~ SPDX-License-Identifier: EPL-2.0
  -->
<h5 data-bs-toggle="collapse" data-bs-target="#piggyBackCommands">
    Piggyback Commands
</h5>
<hr />
<div class="collapse show" id="piggyBackCommands">
    <div class="row-cols-md-auto" style="height: 80vh;">
        <div class="col-md-auto resizable_flex_column">
            <div class="row mb-1" style="flex-grow: 1;">
                <div class="col-md-6 resizable_flex_column">
                    <div class="col-md-auto resizable_flex_column">
                        <div class="row mb-1">
                            <div class="col-md-6 resizable_flex_column">
                                <div class="col-md-auto">
                                    <button id="showTemplates" class="btn btn-outline-primary btn-sm button_round_right"
                                        data-bs-toggle="modal" data-bs-target="#templatesModal">
                                        Insert Template
                                    </button>
                                </div>
                            </div>
                            <div class="col-md-6 resizable_flex_column">
                                <div class="col-md-auto">
                                    <button class="btn btn-outline-primary btn-sm button_round_right"
                                        style="float: right;" id="buttonSubmit">
                                        Submit
                                    </button>
                                    <button hidden class="btn btn-outline-secondary btn-sm button_round_right"
                                        style="float: right;" id="buttonCancel">
                                        Cancel
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="input-group input-group-sm mb-1 has-validation">
                            <label class="input-group-text">Service</label>
                            <select class="form-select-sm" id="serviceSelector"></select>
                            <button class="btn btn-outline-primary btn-sm button_round_right"
                                id="buttonLoadServiceInstances">
                                <i class="bi bi-arrow-clockwise"></i>
                            </button>
                            <div class="invalid-feedback"></div>
                        </div>

                        <div class="input-group input-group-sm mb-1" hidden id="instanceContainer">
                            <a class="input-group-text">Instance:</a>
                            <select class="form-select-sm" id="instanceSelector"></select>
                        </div>

                        <div class="input-group input-group-sm mb-1 has-validation" style="width: 20%;">
                            <label class="input-group-text">Timeout in sec</label>
                            <input type="text" class="form-control form-control-sm" id="timeout"></input>
                            <div class="invalid-feedback"></div>
                        </div>
                        <div class="input-group input-group-sm mb-1 has-validation">
                            <label class="input-group-text">Actor path</label>
                            <input type="text" class="form-control form-control-sm" id="targetActorSelection"></input>
                            <div class="invalid-feedback"></div>
                        </div>
                        <div class="has-validation">
                            <h6 id="headerValidationElement">Header</h6>
                            <div class="invalid-feedback"></div>
                        </div>
                        <div class="ace_container" style="flex-grow: 0.2;">
                            <div class="script_editor" id="aceHeaders"></div>
                        </div>
                        <div class="has-validation">
                            <h6 id="commandValidationElement">Command</h6>
                            <div class="invalid-feedback"></div>
                        </div>
                        <div class="ace_container" style="flex-grow: 1;">
                            <div class="script_editor" id="aceCommand"></div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 resizable_flex_column">
                    <div class="row mb-1">
                        <div class="col-md-auto resizable_flex_column">
                            <h6>Request status:</h6>
                        </div>
                        <div class="col-md-auto resizable_flex_column">
                            <div id="responseStatus">no request made</div>
                        </div>
                    </div>
                    <h6>Result</h6>
                    <div class="ace_container" style="flex-grow: 1;">
                        <div class="script_editor" id="acePiggybackResponse"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
`;var Ia={targetActorSelection:"/user/gateway/proxy",headers:{aggregate:!1,"is-group-topic":!1},command:{type:"things.commands:retrieveThing",thingID:"com.acme:foobar1"}};var Lu={Overall:{"Modify SBR enabled":{service:"Overall",timeout:5,targetActorSelection:"/system/cluster/core/daemon/downingProvider",headers:{aggregate:!0,"ditto-sudo":!0},command:{type:"ditto.sbr:modify",enabled:!0}}},connectivity:{"sudo: retrieve connection":{service:"connectivity",timeout:5,targetActorSelection:"/system/sharding/connection",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"connectivity.commands:retrieveConnection",connectionId:"{{connection.id}}"}},"sudo: retrieve all connection IDs":{service:"connectivity",timeout:5,targetActorSelection:"/user/connectivityRoot/connectionIdsRetrieval",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"connectivity.commands:retrieveAllConnectionIds"}},"sudo: retrieve all connection IDs by tag":{service:"connectivity",timeout:5,targetActorSelection:"/user/connectivityRoot/connectionIdsRetrieval",headers:{aggregate:!1,"is-group-topic":!1},command:{type:"connectivity.sudo.commands:sudoRetrieveConnectionIdsByTag",tag:"{{tag}}"}},"sudo: retrieve connection tags":{service:"connectivity",timeout:5,targetActorSelection:"/system/sharding/connection",headers:{aggregate:!1,"is-group-topic":!1},command:{type:"connectivity.sudo.commands:sudoRetrieveConnectionTags",connectionId:"{{connection.id}}"}},"sudo: retrieve connection metrics":{service:"connectivity",timeout:5,targetActorSelection:"/system/sharding/connection",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"connectivity.commands:retrieveConnectionMetrics",connectionId:"{{connection.id}}"}},"sudo: retrieve connection logs":{service:"connectivity",timeout:5,targetActorSelection:"/system/sharding/connection",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"connectivity.commands:retrieveConnectionLogs",connectionId:"{{connection.id}}"}},"sudo: enable connection logs":{service:"connectivity",timeout:5,targetActorSelection:"/system/sharding/connection",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"connectivity.commands:enableConnectionLogs",connectionId:"{{connection.id}}"}},"sudo: close connection":{service:"connectivity",timeout:5,targetActorSelection:"/system/sharding/connection",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"connectivity.commands:closeConnection",connectionId:"{{connection.id}}"}},"sudo: open connection":{service:"connectivity",timeout:5,targetActorSelection:"/system/sharding/connection",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"connectivity.commands:openConnection",connectionId:"{{connection.id}}"}},"create connection":{service:"connectivity",timeout:5,targetActorSelection:"/system/sharding/connection",headers:{aggregate:!1,"is-group-topic":!1,"ditto-auth-context":{type:"{{auth.type}}",subjects:["{{subject}}"]}},command:{type:"connectivity.commands:modifyConnection",connection:"{{full.connection.json}}"}},"sudo: modify connection":{service:"connectivity",timeout:5,targetActorSelection:"/system/sharding/connection",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"connectivity.commands:modifyConnection",connection:"{{full.connection.json}}"}},"connectivity: retrieve cleanup progress":{service:"connectivity",timeout:5,targetActorSelection:"/user/connectivityRoot/persistenceCleanup",headers:{"ditto-sudo":!0},command:{type:"status.commands:retrieveHealth"}},"connectivity: retrieve cleanup config":{service:"connectivity",timeout:5,targetActorSelection:"/user/connectivityRoot/persistenceCleanup",headers:{"ditto-sudo":!0},command:{type:"common.commands:retrieveConfig"}},"connectivity: modify cleanup config":{service:"connectivity",timeout:5,targetActorSelection:"/user/connectivityRoot/persistenceCleanup",headers:{"ditto-sudo":!0},command:{type:"common.commands:modifyConfig",config:{enabled:!1,"last-pid":""}}}},gateway:{},policies:{"retrieve policy":{service:"policies",timeout:5,targetActorSelection:"/system/sharding/policy",headers:{aggregate:!1,"is-group-topic":!1,"ditto-auth-context":{type:"{{auth.type}}",subjects:["{{subject}}"]}},command:{type:"policies.commands:retrievePolicy",policyId:"{{policy.id}}"}},"modify policy":{service:"policies",timeout:5,targetActorSelection:"/system/sharding/policy",headers:{aggregate:!1,"is-group-topic":!1,"ditto-auth-context":{type:"{{auth.type}}",subjects:["{{subject}}"]}},command:{type:"policies.commands:modifyPolicy",policyId:"{{policy.id}}",policy:{entries:{}}}},"sudo: retrieve policy":{service:"policies",timeout:5,targetActorSelection:"/system/sharding/policy",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"policies.commands:retrievePolicy",policyId:"{{policy.id}}"}},"sudo: modify policy":{service:"policies",timeout:5,targetActorSelection:"/system/sharding/policy",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"policies.commands:modifyPolicy",policyId:"{{policy.id}}",policy:{entries:{}}}},"sudo: delete policy":{service:"policies",timeout:5,targetActorSelection:"/system/sharding/policy",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"policies.commands:deletePolicy",policyId:"{{policy.id}}"}},"unblock namespace":{service:"policies",timeout:5,targetActorSelection:"/user/blockedNamespacesUpdater/singleton",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"namespaces.commands:unblockNamespace",namespace:"{{namespace}}"}},"policies: retrieve cleanup progress":{service:"policies",timeout:5,targetActorSelection:"/user/policiesRoot/persistenceCleanup",headers:{"ditto-sudo":!0},command:{type:"status.commands:retrieveHealth"}},"policies: retrieve cleanup config":{service:"policies",timeout:5,targetActorSelection:"/user/policiesRoot/persistenceCleanup",headers:{"ditto-sudo":!0},command:{type:"common.commands:retrieveConfig"}},"policies: modify cleanup config":{service:"policies",timeout:5,targetActorSelection:"/user/policiesRoot/persistenceCleanup",headers:{"ditto-sudo":!0},command:{type:"common.commands:modifyConfig",config:{enabled:!1,"last-pid":""}}}},things:{"retrieve thing":{service:"things",timeout:5,targetActorSelection:"/system/sharding/thing",headers:{aggregate:!1,"is-group-topic":!1,"ditto-auth-context":{type:"{{auth.type}}",subjects:["{{subject}}"]}},command:{type:"things.commands:retrieveThing",thingId:"{{thing.id}}"}},"create thing":{service:"things",timeout:5,targetActorSelection:"/system/sharding/thing",headers:{aggregate:!1,"is-group-topic":!1,"ditto-auth-context":{type:"{{auth.type}}",subjects:["{{subject}}"]}},command:{type:"things.commands:createThing",thing:{thingId:"{{thing.id}}",policyId:"{{policy.id}}",attributes:{foo:"bar"}}}},"modify thing":{service:"things",timeout:5,targetActorSelection:"/system/sharding/thing",headers:{aggregate:!1,"is-group-topic":!1,"ditto-auth-context":{type:"{{auth.type}}",subjects:["{{subject}}"]}},command:{type:"things.commands:modifyThing",thing:{thingId:"{{thing.id}}",policyId:"{{policy.id}}",attributes:{foo:"bar"}}}},"sudo: retrieve thing":{service:"things",timeout:5,targetActorSelection:"/system/sharding/thing",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"things.commands:retrieveThing",thingId:"{{thing.id}}"}},"sudo: create thing":{service:"things",timeout:5,targetActorSelection:"/system/sharding/thing",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"things.commands:createThing",thing:{thingId:"{{thing.id}}",policyId:"{{thing.id}}",attributes:{foo:"bar"}}}},"sudo: modify thing":{service:"things",timeout:5,targetActorSelection:"/system/sharding/thing",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"things.commands:modifyThing",thing:{thingId:"{{thing.id}}",policyId:"{{thing.id}}",attributes:{foo:"bar"}}}},"sudo: delete thing":{service:"things",timeout:5,targetActorSelection:"/system/sharding/thing",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"things.commands:deleteThing",thingId:"{{thing.id}}"}},"thing: retrieve cleanup progress":{service:"things",timeout:5,targetActorSelection:"/user/thingsRoot/persistenceCleanup",headers:{"ditto-sudo":!0},command:{type:"status.commands:retrieveHealth"}},"thing: retrieve cleanup config":{service:"things",timeout:5,targetActorSelection:"/user/thingsRoot/persistenceCleanup",headers:{"ditto-sudo":!0},command:{type:"common.commands:retrieveConfig"}},"thing: modify cleanup config":{service:"things",timeout:5,targetActorSelection:"/user/thingsRoot/persistenceCleanup",headers:{"ditto-sudo":!0},command:{type:"common.commands:modifyConfig",config:{enabled:!1,"last-pid":""}}}},search:{"retrieve sync progress":{service:"search",timeout:5,targetActorSelection:"/user/thingsWildcardSearchRoot/searchUpdaterRoot/backgroundSync/singleton",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"status.commands:retrieveHealth"}},"reset sync events":{service:"search",timeout:5,targetActorSelection:"/user/thingsWildcardSearchRoot/searchUpdaterRoot/backgroundSync/singleton",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"status.commands:resetHealthEvents"}},"retrieve sync config":{service:"search",timeout:5,targetActorSelection:"/user/thingsWildcardSearchRoot/searchUpdaterRoot/backgroundSync/singleton",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"common.commands:retrieveConfig"}},"modify sync config":{service:"search",timeout:5,targetActorSelection:"/user/thingsWildcardSearchRoot/searchUpdaterRoot/backgroundSync/singleton",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"common.commands:modifyConfig",config:{enabled:!0,"idle-timeout":"5m",keep:{events:"2"},"max-backoff":"2m","max-restarts":180,"min-backoff":"1s","policy-ask-timeout":"10s","quiet-period":"8m",recovery:"5m",throttle:{period:"10s",throughput:100},"tolerance-window":"20m"}}},"force update thing in index":{service:"search",timeout:5,targetActorSelection:"/user/thingsWildcardSearchRoot/searchUpdaterRoot/thingsUpdater",headers:{aggregate:!1,"is-group-topic":!1,"force-update":!0},command:{type:"thing-search.sudo.commands:sudoUpdateThing",thingId:"<THING-ID>",invalidateThing:!1,invalidatePolicy:!1,updateReason:"UNKNOWN"}},"force update for complete namespaces":{service:"search",timeout:5,targetActorSelection:"/user/thingsWildcardSearchRoot/searchUpdaterRoot/backgroundSyncProxy",headers:{aggregate:!1,"is-group-topic":!1,"force-update":!0,namespaces:["namespace1","namespace2"]},command:{type:"common.commands:shutdown"}}}};var $u=`<!--
  ~ Copyright (c) 2023 Contributors to the Eclipse Foundation
  ~
  ~ See the NOTICE file(s) distributed with this work for additional
  ~ information regarding copyright ownership.
  ~
  ~ This program and the accompanying materials are made available under the
  ~ terms of the Eclipse Public License 2.0 which is available at
  ~ http://www.eclipse.org/legal/epl-2.0
  ~
  ~ SPDX-License-Identifier: EPL-2.0
  -->
<div id="templatesModal" class="modal fade" tabindex="-1">
    <div class="modal-dialog modal-dialog-scrollable modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                Templates
                <button type="button" class="btn-close btn-sm" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <div class="input-group input-group-sm mb-1">
                    <a class="nav-link active">Service: </a>
                    <select class="form-select-sm" id="templateServiceSelector"></select>
                </div>

                <div class="input-group input-group-sm mb-1">
                    <a class="nav-link active">Template:</a>
                    <select class="form-select-sm" id="templateSelector"></select>
                </div>

                <pre class="ace_container" id="commandPreview"></pre>

                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-secondary btn-sm"
                        data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-outline-primary btn-sm" id="insertTemplate"
                        data-bs-toggle="tooltip" data-bs-dismiss="modal">Insert</button>
                </div>
            </div>
        </div>
    </div>
</div>`;var Je={templateServiceSelector:null,templateSelector:null,commandPreview:null,insertTemplate:null,templatesModal:null},Sl="Overall",Tl,Cl=new Map,xn=new Map;document.getElementById("templatesHTML").innerHTML=$u;async function Ru(){ht(Je),Dw(),Je.templateServiceSelector.onchange=Iu,Je.templateSelector.onchange=Ou,Je.insertTemplate.onclick=Nw}function Mu(e){Je.templateServiceSelector.value=e,Iu()}function Al(e,t,r){return{targetActorSelection:e,headers:t,piggybackCommand:r}}function Dw(){let e=[];for(let[t,r]of Object.entries(Lu).sort()){e.push(t),xn.set(t,[]);for(let[d,u]of Object.entries(r))xn.get(t).push(d),Cl.set(d,u),u.service!==Sl&&xn.get(Sl).push(d)}Ve(Je.templateServiceSelector,e),Ve(Je.templateSelector,xn.get(Sl))}function Iu(){if(Je.templateServiceSelector.value!==Tl){Tl=Je.templateServiceSelector.value;let e=xn.get(Tl);Ve(Je.templateSelector,e),Ou()}}function Ou(){let e=Cl.get(Je.templateSelector.value);if(e){let t=Al(e.targetActorSelection,e.headers,e.command);Je.commandPreview.textContent=Ct(t)}else Je.commandPreview.textContent=""}async function Nw(){let e=Cl.get(Je.templateSelector.value);e&&Du(e)}var Ll="Invalid json!",Fw="Headers field is required!",zw="Command field is required!",Hu="Timeout field is required!",Uu="Actor path field is required!",ju="No services available!",Ml="Loading...",Bw="request in progress",Fu="error",Qr,Oa="Overall",Ii={},kr,Wu="All",qo,Zr,to,Qo,$l=new Map,pt={showTemplates:null,serviceSelector:null,instanceContainer:null,instanceSelector:null,timeout:null,buttonLoadServiceInstances:null,targetActorSelection:null,buttonSubmit:null,buttonCancel:null,responseStatus:null,commandValidationElement:null,headerValidationElement:null,tabOperations:null,collapseOperations:null};document.getElementById("piggybackHTML").innerHTML=Au;async function Vu(){ht(pt),pt.showTemplates.onclick=function(){let e=pt.serviceSelector.value;e===Ml&&(e=Oa),Mu(e)},Nr(pt.tabOperations,pt.collapseOperations,zu,"disableOperations"),Hw(),pt.targetActorSelection.placeholder=Ia.targetActorSelection,pt.buttonLoadServiceInstances.onclick=zu,pt.buttonSubmit.onclick=Uw,pt.serviceSelector.onchange=Il,pt.instanceSelector.onchange=jw,pt.timeout.onchange=Ww,pt.targetActorSelection.onchange=Vw}function Du(e){Qr=e,pt.serviceSelector.value=Qr.service,qo=void 0,Il(),pt.timeout.value=Qr.timeout,pt.targetActorSelection.value=Qr.targetActorSelection,Zr.setValue(Ct(Qr.headers),-1),to.setValue(Ct(Qr.command),-1)}async function zu(){Ii[Oa]=[],Ve(pt.serviceSelector,[Ml]),await xt("GET","/devops/logging",null,null,!1,!0).then(t=>{let r=Object.entries(t).sort();r.length>0?r.forEach(d=>{let g=Object.values(d[1]).map(a=>a.instance).sort();g.unshift(Wu),Ii[d[0]]=g}):Ii=[]}).catch(t=>{Ii=[]}),e(Ii);function e(t){let r=Object.keys(t);kr?r.indexOf(kr)==-1&&(kr=void 0):Qr&&r.indexOf(Qr.service)!==-1?kr=Qr.service:r.length>0&&(kr=r[0]),Ve(pt.serviceSelector,r),pt.serviceSelector.value=kr,Il()}}function Il(){!pt.serviceSelector.value!==kr&&(xr(pt.serviceSelector.value!=="",ju,pt.serviceSelector),kr=pt.serviceSelector.value,kr&&kr!==Oa?(pt.instanceContainer.removeAttribute("hidden",""),e(Ii[kr])):pt.instanceContainer.setAttribute("hidden",""));function e(t){qo?t.indexOf(qo)==-1&&(qo=void 0):t.length>0&&(qo=t[0]),Ve(pt.instanceSelector,t),pt.instanceSelector.value=qo}}function Hw(){Zr=Dt("aceHeaders","ace/mode/json"),Zr.setOption("wrap",!0),$l.set(Zr.getSession(),pt.headerValidationElement),to=Dt("aceCommand","ace/mode/json"),to.setOption("wrap",!0),$l.set(to.getSession(),pt.commandValidationElement),Qo=Dt("acePiggybackResponse","ace/mode/json"),Qo.setReadOnly(!0),Qo.setOption("wrap",!0),Zr.setOption("placeholder",Ct(Ia.headers)),to.setOption("placeholder",Ct(Ia.command)),Zr.getSession().on("changeAnnotation",Bu),to.getSession().on("changeAnnotation",Bu)}function Bu(e,t){xr(!Rl(t),Ll,$l.get(t))}function Rl(e){return e.getAnnotations().filter(t=>t.type==="error").length>0}async function Uw(){if(e()){pt.responseStatus.textContent=Bw,Qo.setValue("",-1);let u=t(pt.serviceSelector.value,pt.instanceSelector.value,pt.timeout.value),g=Al(pt.targetActorSelection.value,JSON.parse(Zr.getValue()),JSON.parse(to.getValue()));new Promise((p,o)=>{r(o);try{xt("POST",u,g,null,!0,!0).then(i=>p(i)).catch(i=>o(i))}catch(i){d(),Qo.setValue(i.message,-1),pt.responseStatus.textContent=Fu}}).then(p=>{d(),p.json().then(o=>{Qo.setValue(Ct(o),-1),pt.responseStatus.textContent=p.status})}).catch(p=>{d(),Qo.setValue(p.message,-1),pt.responseStatus.textContent=Fu})}function e(){let u=xr(pt.timeout.value.trim()!=="",Hu,pt.timeout),g=xr(pt.serviceSelector.value!==""&&pt.serviceSelector.value!==Ml,ju,pt.serviceSelector),a=xr(pt.targetActorSelection.value.trim()!=="",Uu,pt.targetActorSelection),p=xr(Zr.getValue().trim()!=="",Fw,pt.headerValidationElement);p&&=xr(!Rl(Zr.getSession()),Ll,pt.headerValidationElement);let o=xr(to.getValue().trim()!=="",zw,pt.commandValidationElement);return o&&=xr(!Rl(to.getSession()),Ll,pt.commandValidationElement),u&&g&&a&&p&&o}function t(u,g,a){let p="";return u&&u!==Oa&&(p=`/${u}`,g&&g!=Wu&&(p+=`/${g}`)),`/devops/piggyback${p}?timeout=${a}`}function r(u){pt.buttonCancel.onclick=function(){u({message:"Cancelled"})},pt.buttonCancel.removeAttribute("hidden",""),pt.buttonSubmit.setAttribute("hidden","")}function d(){pt.buttonCancel.setAttribute("hidden",""),pt.buttonSubmit.removeAttribute("hidden",""),pt.buttonCancel.onclick=void 0}}function jw(){qo=pt.instanceSelector.value}function Ww(){xr(pt.timeout.value.trim()!=="",Hu,pt.timeout)}function Vw(){xr(pt.targetActorSelection.value.trim()!=="",Uu,pt.targetActorSelection)}function xr(e,t,r){try{lt(e,t,r)}catch{return!1}return!0}var Gu=`<!--
  ~ Copyright (c) 2023 Contributors to the Eclipse Foundation
  ~
  ~ See the NOTICE file(s) distributed with this work for additional
  ~ information regarding copyright ownership.
  ~
  ~ This program and the accompanying materials are made available under the
  ~ terms of the Eclipse Public License 2.0 which is available at
  ~ http://www.eclipse.org/legal/epl-2.0
  ~
  ~ SPDX-License-Identifier: EPL-2.0
-->

<h5 data-bs-toggle="collapse" data-bs-target="#servicesLogging">Ditto Services Logging</h5>
<hr />
<div class="collapse show" id="servicesLogging">
    <div class="input-group input-group-sm mt-1 mb-1" role="group">
        <div style="flex-grow: 1;"></div>
        <button class="btn btn-outline-primary btn-sm button_round_left" id="buttonLoadAllLogLevels">
            <i class="bi bi-arrow-clockwise"></i>
            Refresh
        </button>
    </div>
    <div class="row resizable_pane" style="height: 80vh">
        <div class="col-md-12 resizable_flex_column">
            <div id="divLoggers"></div>
            <template id="templateLogger">
                <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
                      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
                <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css"
                    rel="stylesheet"
                    integrity="sha512-dPXYcDub/aeb08c63jRq/k6GaKccl256JQy/AnOq7CAnEZ9FzSL9wSbcZkMp4R26vBsMLFYH4kQ67/bbV8XaCQ=="
                    crossorigin="anonymous" referrerpolicy="no-referrer" />
                <link href="./dist/main.css" rel="stylesheet" />

                <div class="input-group input-group-sm mb-1 has-validation">
                    <input class="form-control me-1" type="text" disabled id="inputLogger" spellcheck="false"></input>
                    <div class="btn-group" role="group">
                        <input type="radio" class="btn-check" name="btnLevel" id="debug" autocomplete="off">
                        <label class="btn btn-sm btn-outline-secondary" for="debug">DEBUG</label>
                        <input type="radio" class="btn-check" name="btnLevel" id="info" autocomplete="off">
                        <label class="btn btn-sm btn-outline-success" for="info">INFO</label>
                        <input type="radio" class="btn-check" name="btnLevel" id="warn" autocomplete="off">
                        <label class="btn btn-sm btn-outline-warning" for="warn">WARN</label>
                        <input type="radio" class="btn-check" name="btnLevel" id="error" autocomplete="off">
                        <label class="btn btn-sm btn-outline-danger" for="error">ERROR</label>
                    </div>
                    <div class="invalid-feedback"></div>
                </div>
            </template>
        </div>
    </div>
</div>
`;var _r={buttonLoadAllLogLevels:null,divLoggers:null,templateLogger:null,tabOperations:null,collapseOperations:null};document.getElementById("servicesLoggingHTML").innerHTML=Gu;async function Yu(){ht(_r),Nr(_r.tabOperations,_r.collapseOperations,Ol,"disableOperations"),_r.buttonLoadAllLogLevels.onclick=Ol}function Ku(e,t){xt("PUT","/devops/logging/"+e,t,null,!1,!0).then(()=>{Ol()})}function Ol(){xt("GET","/devops/logging",null,null,!1,!0).then(e=>Kw(e)).catch(e=>{_r.divLoggers.textContent=""})}function Kw(e){_r.divLoggers.textContent="",Object.keys(e).sort().forEach((u,g)=>{t(u,g),Object.values(e[u])[0].loggerConfigs.forEach(a=>{r(u,a)}),d(u)});function t(u,g){let a=document.createElement("h6");a.innerText=u,g>0&&a.classList.add("mt-3"),_r.divLoggers.append(a)}function r(u,g){let a=document.createElement("div");a.attachShadow({mode:"open"}),a.shadowRoot.append(_r.templateLogger.content.cloneNode(!0)),a.shadowRoot.getElementById("inputLogger").value=g.logger,a.shadowRoot.getElementById(g.level).setAttribute("checked",""),Array.from(a.shadowRoot.querySelectorAll(".btn-check")).forEach(p=>{p.addEventListener("click",o=>Ku(u,{logger:g.logger,level:o.target.id}))}),_r.divLoggers.append(a)}function d(u){let g=document.createElement("div");g.attachShadow({mode:"open"}),g.shadowRoot.append(_r.templateLogger.content.cloneNode(!0));let a=g.shadowRoot.getElementById("inputLogger");a.disabled=!1,a.placeholder="Add new logger name and choose log level",a.addEventListener("change",p=>{p.target.classList.remove("is-invalid")}),Array.from(g.shadowRoot.querySelectorAll(".btn-check")).forEach(p=>{p.addEventListener("click",o=>{lt(a.value&&a.value.trim()!=="","Logger name must not be empty",a),Ku(u,{logger:a.value,level:o.target.id})})}),_r.divLoggers.append(g)}}var Ju=`<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css" rel="stylesheet"
  integrity="sha512-dPXYcDub/aeb08c63jRq/k6GaKccl256JQy/AnOq7CAnEZ9FzSL9wSbcZkMp4R26vBsMLFYH4kQ67/bbV8XaCQ=="
  crossorigin="anonymous" referrerpolicy="no-referrer" />
<link href="./dist/main.css" rel="stylesheet" />
<div class="resizable_flex_column px-1" id="divRoot">
  <div class="input-group input-group-sm mb-1 mt-1 has-validation">
    <label class="input-group-text" id="label">Default</label>
    <input type="text" class="form-control" spellcheck="false" disabled id="inputIdValue">
    <button class="btn btn-outline-primary btn-sm" id="buttonEdit" data-bs-toggle="tooltip" title="Edit">
      Create
    </button>
    <button class="btn btn-outline-primary btn-sm" hidden id="buttonCreate" data-bs-toggle="tooltip" title="Create">
      Create
    </button>
    <button class="btn btn-outline-primary btn-sm" hidden id="buttonUpdate" data-bs-toggle="tooltip" title="Update">
      Update
    </button>
    <button class="btn btn-outline-secondary btn-sm" hidden id="buttonDelete" data-bs-toggle="tooltip" title="Delete">
      Delete
    </button>
    <button class="btn btn-outline-secondary btn-sm" hidden id="buttonCancel" data-bs-toggle="tooltip" title="Cancel">
      Cancel
    </button>
    <button type="button" id="buttonFullscreen" hidden class="btn btn-outline-secondary btn-sm button_round_both ms-1" title="Toggle fullscreen">
        <i class="bi bi-arrows-fullscreen"></i>
    </button>
    <div class="invalid-feedback"></div>
  </div>
  <slot></slot>
</div>`;var Xw="editBackground",Pa="editForground",Pl="editForgroundBig",qw="bi-arrows-fullscreen",Qw="bi-fullscreen-exit",Da="fullscreen";var Dl=class extends HTMLElement{constructor(){super();this.isEditing=!1;this.isEditDisabled=!1;this.isCreateDisabled=!1;this.isDeleteDisabled=!1;this.dom={label:null,inputIdValue:null,buttonEdit:null,buttonCreate:null,buttonUpdate:null,buttonDelete:null,buttonCancel:null,buttonFullscreen:null,divRoot:null};this.attachShadow({mode:"open"})}get idValue(){return this.dom.inputIdValue.value}set idValue(r){let d=this.shadowRoot.getElementById("inputIdValue");d.value=r,d.classList.remove("is-invalid");let u=this.shadowRoot.getElementById("buttonEdit");r&&r!==""?u.innerText="Edit":u.innerText="Create";let g=this.shadowRoot.getElementById("buttonDelete");!this.isEditing&&!this.isDeleteDisabled&&r&&r!==""?g.removeAttribute("hidden"):g.setAttribute("hidden","")}get editDisabled(){return this.isEditDisabled}set createDisabled(r){this.isCreateDisabled=r,this.lazyInit(this.dom.buttonCreate),this.setButtonState(this.dom.buttonCreate,r)}set deleteDisabled(r){this.isDeleteDisabled=r,this.lazyInit(this.dom.buttonDelete),this.setButtonState(this.dom.buttonDelete,r)}set editDisabled(r){this.isEditDisabled=r,this.isEditing||(this.lazyInit(this.dom.buttonEdit),this.setButtonState(this.dom.buttonEdit,r))}lazyInit(r){r||ht(this.dom,this.shadowRoot)}setButtonState(r,d){d?r.setAttribute("hidden",""):r.removeAttribute("hidden")}get validationElement(){return this.dom.inputIdValue}connectedCallback(){this.shadowRoot.innerHTML=Ju,setTimeout(()=>{ht(this.dom,this.shadowRoot),this.dom.buttonEdit.onclick=()=>this.toggleEdit(!1),this.dom.buttonCancel.onclick=()=>this.toggleEdit(!0),this.dom.label.innerText=this.getAttribute("label")||"Label",this.dom.buttonCreate.onclick=this.eventDispatcher("onCreateClick"),this.dom.buttonUpdate.onclick=this.eventDispatcher("onUpdateClick"),this.dom.buttonDelete.onclick=this.eventDispatcher("onDeleteClick"),this.dom.buttonFullscreen.onclick=()=>this.toggleFullscreen(),this.dom.inputIdValue.addEventListener("change",r=>{r.target.classList.remove("is-invalid"),this.dispatchEvent(new CustomEvent("onIdValueChange",{composed:!0}))})})}eventDispatcher(r){return()=>{this.dispatchEvent(new CustomEvent(r,{composed:!0}))}}toggleEdit(r){this.isEditing=!this.isEditing,document.getElementById("modalCrudEdit").classList.toggle(Xw),document.body.classList.toggle("modal-open"),document.body.style.overflow=this.isEditing&&this.hasAttribute(Da)?"hidden":"",this.dom.divRoot.classList.toggle(this.hasAttribute(Da)?Pl:Pa),this.setButtonState(this.dom.buttonEdit,this.isEditing||this.isEditDisabled),this.setButtonState(this.dom.buttonFullscreen,!this.isEditing),this.dom.buttonCancel.toggleAttribute("hidden"),this.isEditing?this.dom.inputIdValue.value?this.dom.buttonUpdate.toggleAttribute("hidden"):this.isCreateDisabled||this.dom.buttonCreate.toggleAttribute("hidden"):(this.dom.buttonCreate.setAttribute("hidden",""),this.dom.buttonUpdate.setAttribute("hidden","")),(this.isEditing||!this.dom.inputIdValue.value)&&this.dom.buttonDelete.setAttribute("hidden","");let d=this.isEditing&&(!this.dom.inputIdValue.value||this.hasAttribute("allowIdChange"));this.dom.inputIdValue.disabled=!d,this.dispatchEvent(new CustomEvent("onEditToggle",{composed:!0,detail:{isEditing:this.isEditing,isCancel:r}}))}toggleFullscreen(){this.toggleAttribute(Da),this.dom.buttonFullscreen.querySelector(".bi").classList.toggle(qw),this.dom.buttonFullscreen.querySelector(".bi").classList.toggle(Qw),document.body.style.overflow=this.isEditing&&this.hasAttribute(Da)?"hidden":"",this.dom.divRoot.classList.contains(Pa)?this.dom.divRoot.classList.replace(Pa,Pl):this.dom.divRoot.classList.replace(Pl,Pa)}};customElements.define("crud-toolbar",Dl);function Na(){let e=[];return{addChangeListener:t,notifyAll:r};function t(d){e.push(d)}function r(d){e.forEach(u=>u.call(null,d))}}var Xu=`<div>
    <h5>Policies</h5>
    <hr />
    <div class="row">
        <div class="col-md-4">
            <h6>Load a policy</h6>
            <form class="input-group input-group-sm mb-1 mt-1 has-validation" role="group" autocomplete="off">
                <label class="input-group-text">Policy Id</label>
                <input autocomplete="false" name="hidden" type="text" style="display:none;">
                <input type="search" class="form-control form-control-sm" id="inputPolicyId"></input>
                <button id="buttonLoadPolicy" class="btn btn-outline-primary btn-sm"
                    title="Load policy with the given ID">
                    Load
                </button>
                <div class="invalid-feedback"></div>
            </form>
            <h6>Recent policies</h6>
            <div class="table-wrap" style="height: 35vh;">
                <table class="table table-striped table-hover table-sm">
                    <tbody id="tbodyRecentPolicies"></tbody>
                </table>
            </div>
            <h6>Who am I</h6>
            <div class="table-wrap" style="height: 35vh;">
                <table class="table table-striped table-hover table-sm">
                    <tbody id="tbodyWhoami"></tbody>
                </table>
            </div>
        </div>
        <div class="col-md-8">
            <div class="resizable_flex_column">
                <ul class="nav nav-tabs nav-fill">
                    <li class="nav-item">
                        <a class="nav-link active" data-bs-toggle="tab" data-bs-target="#tabPolicyEntries">Entries</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-bs-toggle="tab" data-bs-target="#tabPolicyImports">Imports</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-bs-toggle="tab" data-bs-target="#tabPolicyJson">JSON</a>
                    </li>
                </ul>
                <div class="tab-content" style="flex-grow: 1; overflow: hidden;">
                    <div class="tab-pane container active no-margin" id="tabPolicyEntries">
                        <h5>Policy Entries</h5>
                        <hr />
                        <div class="row resizable_pane" style="height: 22vh;">
                            <div class="col-md-6 resizable_flex_column">
                                <div class="input-group has-validation">
                                    <input class="form-control" id="tableValidationEntries" hidden="true"></input>
                                    <div class="invalid-feedback"></div>
                                </div>
                                <div class="table-wrap">
                                    <table class="table table-striped table-hover table-sm">
                                        <tbody id="tbodyPolicyEntries"></tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="col-md-6 resizable_flex_column">
                                <crud-toolbar label="Entry" id="crudEntry">
                                    <div class="input-group input-group-sm mb-1">
                                        <label class="input-group-text">Importable</label>
                                        <select class="form-select form-select-sm" id="selectImportable" disabled>
                                            <option selected value="implicit">implicit</option>
                                            <option value="explicit">explicit</option>
                                            <option value="never">never</option>
                                        </select>
                                    </div>    
                                </crud-toolbar>
                            </div>
                        </div>                
                        <h6>Subjects</h6>
                        <div class="row resizable_pane" style="height: 22vh;">
                            <div class="col-md-6 resizable_flex_column">
                                <div class="input-group has-validation">
                                    <input class="form-control" id="tableValidationSubjects" hidden="true"></input>
                                    <div class="invalid-feedback"></div>
                                </div>
                                <div class="table-wrap">
                                    <table class="table table-striped table-hover table-sm">
                                        <tbody id="tbodyPolicySubjects"></tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="col-md-6 resizable_flex_column">
                                <crud-toolbar label="Subject" id="crudSubject" style="flex-grow: 1;">
                                    <div class="ace_container" style="flex-grow: 1;">
                                        <div class="script_editor" id="subjectEditor"></div>
                                    </div>        
                                </crud-toolbar>
                            </div>
                            <!-- <div class="row flex_column_part">
                            </div> -->
                        </div>
                        <h6>Resources</h6>
                        <div class="row resizable_pane" style="height: 22vh;">
                            <div class="col-md-6 resizable_flex_column">
                                <div class="input-group has-validation">
                                    <input class="form-control" id="tableValidationResources" hidden="true"></input>
                                    <div class="invalid-feedback"></div>
                                </div>
                                <div class="table-wrap">
                                    <table class="table table-striped table-hover table-sm">
                                        <tbody id="tbodyPolicyResources"></tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="col-md-6 resizable_flex_column">
                                <crud-toolbar label="Resource" id="crudResource" style="flex-grow: 1;">
                                    <div class="input-group input-group-sm mb-1">
                                        <label class="input-group-text">Template</label>
                                        <select class="form-select form-select-sm" id="selectResourceTemplates" disabled></select>
                                    </div>
                                    <div class="ace_container" style="flex-grow: 1;">
                                        <div class="script_editor" id="resourceEditor"></div>
                                    </div>        
                                </crud-toolbar>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="tab-content" style="flex-grow: 1; overflow: hidden;">
                    <div class="tab-pane container no-margin" id="tabPolicyImports">
                        <h5>Policy Imports</h5>
                        <hr />
                        <div class="row resizable_pane" style="height: 75vh;">
                            <div class="col-md-6 resizable_flex_column">
                                <div class="table-wrap">
                                    <table class="table table-striped table-hover table-sm">
                                        <tbody id="tbodyPolicyImports"></tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="col-md-6 resizable_flex_column">
                                <crud-toolbar label="Imported Policy Id" id="crudImport" style="flex-grow: 1;">
                                    <div class="table-wrap">
                                        <table class="table table-striped table-hover table-sm">
                                            <tbody id="tbodyPolicyImportEntries"></tbody>
                                        </table>
                                    </div>
                                </crud-toolbar>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="tab-content" style="flex-grow: 1; overflow: hidden; height: 80vh;">
                    <div class="tab-pane container no-margin" id="tabPolicyJson">
                        <crud-toolbar label="PolicyId" id="crudPolicyJson">
                            <div class="input-group input-group-sm mb-1">
                                <label class="input-group-text">Template</label>
                                <select class="form-select form-select-sm" id="selectPolicyJSONTemplate" disabled></select>
                            </div>    
                            <div class="ace_container" style="flex-grow: 1;">
                                <div>
                                    <div class="script_editor" id="policyEditor"></div>
                                </div>
                            </div>
                        </crud-toolbar>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>`;var Zo=Na(),$t,qu,Te={inputPolicyId:null,tbodyRecentPolicies:null,tbodyWhoami:null,buttonLoadPolicy:null,collapsePolicies:null,tabPolicies:null};document.getElementById("policyHTML").innerHTML=Xu;function Qu(){Ke(iy),ht(Te),qu=Nr(Te.tabPolicies,Te.collapsePolicies,ry,"disablePolicies"),Te.tbodyRecentPolicies.addEventListener("click",ny),Te.buttonLoadPolicy.onclick=e=>{e.preventDefault(),lt(Te.inputPolicyId.value,"Please enter a policyId",Te.inputPolicyId),Oi(Te.inputPolicyId.value)},Te.tbodyWhoami.onclick=e=>{},Se(ty)}function ty(e){Te.inputPolicyId.value=e&&e.policyId,qu.viewDirty=!0}function ey(){Te.tbodyWhoami.textContent="",xt("GET","/whoami").then(e=>{e.subjects.forEach(t=>{Ht(Te.tbodyWhoami,t,!1,t,t===e.defaultSubject?"default":"")})}).catch(e=>{})}function Oi(e){xt("GET","/policies/"+e).then(t=>xo(t)).catch(()=>xo(null))}async function xo(e){$t=e,$t?await oy($t.policyId):Te.inputPolicyId.value=null,Zo.notifyAll($t)}async function ry(e){ey(),e&&await xo(null),Te.inputPolicyId.value&&Oi(Te.inputPolicyId.value)}async function oy(e){let t=Q().recentPolicyIds.indexOf(e);t>=0&&Q().recentPolicyIds.splice(t,1),Q().recentPolicyIds.unshift(e),Q().recentPolicyIds.length>=10&&Q().recentPolicyIds.pop(),await oe(!1,"recentPolicyIds")}function iy(e){Q().recentPolicyIds=Q().recentPolicyIds||[],Te.tbodyRecentPolicies.textContent="",Q().recentPolicyIds.forEach(t=>{Ht(Te.tbodyRecentPolicies,t,$t&&$t.policyId===t,t)})}function ny(e){if(e.target&&e.target.nodeName==="TD"){let t=e.target.parentNode;$t&&$t.policyId===t.id?xo(null):(Te.inputPolicyId.value=t.id,Oi(t.id))}}function Ce(e,t){return()=>{t in[0,1]&&e.toggleEdit(!1),Oi($t.policyId)}}var _n=Na(),Gt,Ut={tbodyPolicyEntries:null,tableValidationEntries:null,selectImportable:null,crudEntry:null};function Zu(){ht(Ut),Zo.addChangeListener(py),dr(Ut.tbodyPolicyEntries,Ut.tableValidationEntries),Ut.crudEntry.editDisabled=!0,Ut.crudEntry.addEventListener("onCreateClick",ly),Ut.crudEntry.addEventListener("onDeleteClick",cy),Ut.crudEntry.addEventListener("onUpdateClick",dy),Ut.crudEntry.addEventListener("onEditToggle",ay),Ut.tbodyPolicyEntries.onclick=sy}function ay(e){Ut.selectImportable.disabled=!e.detail.isEditing,e.detail.isCancel&&tm(Gt)}function sy(e){Gt===e.target.textContent?Gt=null:Gt=e.target.textContent,Fa(Gt)}function ly(){lt(Ut.crudEntry.idValue,"Please enter a label for the entry",Ut.crudEntry.validationElement),lt(!Object.keys($t.entries).includes(Ut.crudEntry.idValue),`Entry with label ${Ut.crudEntry.idValue} already exists`,Ut.crudEntry.validationElement),Gt=Ut.crudEntry.idValue,Nl(Ut.crudEntry.idValue,{subjects:{},resources:{},importable:Ut.selectImportable.value},Ce(Ut.crudEntry,0))}function dy(){$t.entries[Gt].importable=Ut.selectImportable.value,Nl(Gt,$t.entries[Gt],Ce(Ut.crudEntry,1))}function cy(){eo(),Ge(`Are you sure you want to delete policy entry<br>'${Ut.crudEntry.idValue}'?`,"Delete",()=>{Nl(Gt,null,Ce(Ut.crudEntry,2))})}function Nl(e,t,r){xt(t?"PUT":"DELETE",`/policies/${$t.policyId}/entries/${e}`,t).then(r)}function py(e){if(Ut.tbodyPolicyEntries.textContent="",Ut.crudEntry.idValue=null,Ut.crudEntry.editDisabled=e===null,e){let t=!1;Object.keys(e.entries).forEach(r=>{Ht(Ut.tbodyPolicyEntries,r,r===Gt),r===Gt&&(Fa(r),t=!0)}),t||(Gt=null,Fa(null))}else Fa(null)}function Fa(e){tm(e),_n.notifyAll(Gt)}function tm(e){Ut.crudEntry.idValue=e,Ut.selectImportable.value=e&&$t.entries[e].importable}function eo(){lt(Gt,"Please select an entry",Ut.tableValidationEntries)}var ur,me={tbodyPolicyImports:null,tbodyPolicyImportEntries:null,crudImport:null};function em(){ht(me),Zo.addChangeListener(vy),me.tbodyPolicyImports.onclick=my,me.crudImport.editDisabled=!0,me.crudImport.addEventListener("onCreateClick",gy),me.crudImport.addEventListener("onUpdateClick",hy),me.crudImport.addEventListener("onDeleteClick",by),me.crudImport.addEventListener("onEditToggle",fy),me.crudImport.addEventListener("onIdValueChange",uy)}async function uy(){await Di(me.crudImport.idValue),om(!1)}function my(e){let t=e.target;ur===t.parentElement.id?ur=null:ur=t.parentElement.id,Di(ur)}function zl(e,t,r){xt(t?"PUT":"DELETE",`/policies/${$t.policyId}/imports/${e}`,t).then(r)}function gy(){ur=me.crudImport.idValue,zl(ur,rm(),Ce(me.crudImport,0))}function hy(){zl(ur,rm(),Ce(me.crudImport,1))}function by(){Ge(`Are you sure you want to delete policy import<br>'${me.crudImport.idValue}'?`,"Delete",()=>{zl(ur,null,Ce(me.crudImport,2))})}function rm(){let e={},t=document.querySelectorAll('#tbodyPolicyImportEntries input:checked[data-importable="explicit"]');return t.length>0&&(e.entries=Array.from(t).map(r=>r.id)),e}function fy(e){om(!e.detail.isEditing),e.detail.isCancel&&Di(ur)}function om(e){document.querySelectorAll('#tbodyPolicyImportEntries input[data-importable="explicit"]').forEach(t=>t.disabled=e)}async function vy(e){if(me.tbodyPolicyImports.textContent="",me.crudImport.idValue=null,me.crudImport.editDisabled=e===null,e){let r=!1;for(let d of Object.keys(e.imports)){let u=Ht(me.tbodyPolicyImports,d,d===ur);Zs(u,"bi-arrow-up-right-square",t(d),"Open policy"),d===ur&&(await Di(d),r=!0)}r||(ur=null,await Di(null))}else await Di(null);function t(r){return d=>{xt("GET","/policies/"+r).then(async u=>{await xo(u)})}}}async function Di(e){if(me.crudImport.idValue=e,me.tbodyPolicyImportEntries.textContent="",e){let r=await xt("GET","/policies/"+e);Object.keys(r.entries).forEach(d=>{let u=me.tbodyPolicyImportEntries.insertRow(),g=Si(u,d,t(d,r),!0);g.dataset.importable=r.entries[d].importable,bo(u,d,JSON.stringify(r.entries[d],null,4)),bo(u,r.entries[d].importable)})}function t(r,d){let u=$t.imports[e],g=u&&u.entries&&u.entries.includes(r),a=d.entries[r].importable==="implicit";return g||a}}var Bl={"Standard Example":{entries:{DEFAULT:{subjects:{"{{ request:subjectId }}":{type:"the creator"}},resources:{"policy:/":{grant:["READ","WRITE"],revoke:[]},"thing:/":{grant:["READ","WRITE"],revoke:[]},"message:/":{grant:["READ","WRITE"],revoke:[]}}}}},"Imports Importing Example":{entries:{DEFAULT:{subjects:{"{{ request:subjectId }}":{type:"the creator"}},resources:{"policy:/":{grant:["READ","WRITE"],revoke:[]}}}},imports:{"ditto:imported-policy":{entries:["EXPLICIT"]},"ditto:another-imported-policy":{}}},"Imports Exporting Example":{entries:{DEFAULT:{subjects:{"{{ request:subjectId }}":{type:"the creator"}},resources:{"policy:/":{grant:["READ","WRITE"],revoke:[]}},importable:"never"},IMPLICIT:{subjects:{"nginx:ditto":{type:"the creator"}},resources:{"things:/":{grant:["READ","WRITE"],revoke:[]}},importable:"implicit"},EXPLICIT:{subjects:{"nginx:ditto":{type:"the creator"}},resources:{"things:/":{grant:["READ","WRITE"],revoke:[]}},importable:"explicit"},NEVER:{subjects:{"nginx:ditto":{type:"the creator"}},resources:{"things:/":{grant:["READ","WRITE"],revoke:[]}},importable:"never"}}}};var fe={crudPolicyJson:null,selectPolicyJSONTemplate:null},ro;function im(){ht(fe),Zo.addChangeListener(nm),ro=Dt("policyEditor","ace/mode/json",!0),fe.crudPolicyJson.addEventListener("onCreateClick",_y),fe.crudPolicyJson.addEventListener("onDeleteClick",Sy),fe.crudPolicyJson.addEventListener("onUpdateClick",Ey),fe.crudPolicyJson.addEventListener("onEditToggle",ky),Ve(fe.selectPolicyJSONTemplate,["Select an example",...Object.keys(Bl)]),fe.selectPolicyJSONTemplate.addEventListener("change",xy),document.querySelector('a[data-bs-target="#tabPolicyJson"]').addEventListener("shown.bs.tab",e=>{ro.renderer.updateFull()})}function xy(e){ro.setValue(JSON.stringify(Bl[e.target.value],null,2),-1)}function ky(e){ro.setReadOnly(!e.detail.isEditing),ro.renderer.setShowGutter(e.detail.isEditing),fe.selectPolicyJSONTemplate.disabled=!e.detail.isEditing,fe.selectPolicyJSONTemplate.selectedIndex=0,e.detail.isCancel&&nm($t)}function _y(){lt(fe.crudPolicyJson.idValue,"PolicyId must not be empty",fe.crudPolicyJson.validationElement),Hl(fe.crudPolicyJson.idValue,JSON.parse(ro.getValue()),()=>{fe.crudPolicyJson.toggleEdit(!1),Oi(fe.crudPolicyJson.idValue)})}function Ey(){Hl(fe.crudPolicyJson.idValue,JSON.parse(ro.getValue()),Ce(fe.crudPolicyJson,1))}async function Sy(){Ge(`Are you sure you want to delete policy<br>'${fe.crudPolicyJson.idValue}'?`,"Delete",()=>{Hl(fe.crudPolicyJson.idValue,null,()=>{e(fe.crudPolicyJson.idValue),xo(null)})});async function e(t){let r=Q().recentPolicyIds.indexOf(t);r>=0&&Q().recentPolicyIds.splice(r,1),await oe(!1,"recentPolicyIds")}}function Hl(e,t,r){xt(t?"PUT":"DELETE",`/policies/${e}`,t).then(r)}function nm(e){fe.crudPolicyJson.idValue=e&&e.policyId,e?ro.setValue(JSON.stringify(e,null,2),-1):ro.setValue("")}var Ul={resources:{"thing:/":{grant:["READ","WRITE"],revoke:[]},"message:/":{grant:["READ","WRITE"],revoke:[]},"policy:/":{grant:["READ","WRITE"],revoke:[]}}};var Me,zt={tbodyPolicyResources:null,selectResourceTemplates:null,tableValidationResources:null,crudResource:null},Ze;function am(){ht(zt),_n.addChangeListener(Oy),dr(zt.tbodyPolicyResources,zt.tableValidationResources),Ze=Dt("resourceEditor","ace/mode/json",!0),zt.tbodyPolicyResources.onclick=Ly,zt.crudResource.editDisabled=!0,zt.crudResource.addEventListener("onCreateClick",$y),zt.crudResource.addEventListener("onUpdateClick",Ry),zt.crudResource.addEventListener("onDeleteClick",My),zt.crudResource.addEventListener("onEditToggle",Iy),Ve(zt.selectResourceTemplates,["Select a resource template",...Object.keys(Ul.resources)]),zt.selectResourceTemplates.addEventListener("change",Ay)}function Ay(e){zt.crudResource.idValue=e.target.value,Ze.setValue(JSON.stringify(Ul.resources[e.target.value],null,2),-1)}function Ly(e){Me===e.target.parentNode.id?(Me=null,zt.crudResource.idValue=null,Ze.setValue("")):(Me=e.target.parentNode.id,zt.crudResource.idValue=Me,Ze.setValue(JSON.stringify($t.entries[Gt].resources[Me],null,2),-1)),zt.crudResource.idValue=Me}function $y(){eo(),lt(zt.crudResource.idValue,"Please enter a resource",zt.crudResource.validationElement),lt(!Object.keys($t.entries[Gt].resources).includes(zt.crudResource.idValue),"Resource already exists",zt.crudResource.validationElement),Me=zt.crudResource.idValue,jl(zt.crudResource.idValue,Ze.getValue()!==""?JSON.parse(Ze.getValue()):{grant:["READ","WRITE"],revoke:[]},Ce(zt.crudResource,0))}function Ry(){eo(),lt(Me,"Please select a resource",zt.tableValidationResources),jl(Me,JSON.parse(Ze.getValue()),Ce(zt.crudResource,1))}function My(){eo(),lt(Me,"Please select a resource",zt.tableValidationResources),jl(Me,null,Ce(zt.crudResource,2))}function jl(e,t,r){xt(t?"PUT":"DELETE",`/policies/${$t.policyId}/entries/${Gt}/resources/${e}`,t).then(r)}function Iy(e){zt.selectResourceTemplates.disabled=!e.detail.isEditing,zt.selectResourceTemplates.selectedIndex=0,Ze.setReadOnly(!e.detail.isEditing),Ze.renderer.setShowGutter(e.detail.isEditing),e.detail.isCancel&&(zt.crudResource.idValue=Me,$t&&Gt&&Me?Ze.setValue(JSON.stringify($t.entries[Gt].resources[Me],null,2),-1):Ze.setValue(""))}function Oy(e){Me=null,zt.tbodyPolicyResources.textContent="",zt.crudResource.idValue=null,Ze.setValue(""),zt.crudResource.editDisabled=e===null,$t&&e&&Object.keys($t.entries[e].resources).forEach(t=>{Ht(zt.tbodyPolicyResources,t,t===Me,null,JSON.stringify($t.entries[e].resources[t])),t===Me&&(zt.crudResource.idValue=t,Ze.setValue(JSON.stringify($t.entries[e].resources[t],null,2),-1))})}var Ne,Kt={tbodyPolicySubjects:null,tableValidationSubjects:null,crudSubject:null},mr;function sm(){ht(Kt),_n.addChangeListener(Hy),dr(Kt.tbodyPolicySubjects,Kt.tableValidationSubjects),mr=Dt("subjectEditor","ace/mode/json",!0),Kt.tbodyPolicySubjects.onclick=Dy,Kt.crudSubject.editDisabled=!0,Kt.crudSubject.addEventListener("onCreateClick",Ny),Kt.crudSubject.addEventListener("onUpdateClick",Fy),Kt.crudSubject.addEventListener("onDeleteClick",zy),Kt.crudSubject.addEventListener("onEditToggle",By)}function Dy(e){let t=e.target;Ne===t.parentElement.id?(Ne=null,mr.setValue("")):(Ne=t.parentElement.id,mr.setValue(JSON.stringify($t.entries[Gt].subjects[Ne],null,2),-1)),Kt.crudSubject.idValue=Ne}function Ny(){eo(),lt(Kt.crudSubject.idValue,"Please enter a subject or select one above",Kt.crudSubject.validationElement),lt(!Object.keys($t.entries[Gt].subjects).includes(Kt.crudSubject.idValue),"Subject already exists",Kt.crudSubject.validationElement),Ne=Kt.crudSubject.idValue,Wl(Kt.crudSubject.idValue,mr.getValue()!==""?JSON.parse(mr.getValue()):{type:"generated"},Ce(Kt.crudSubject,0))}function Wl(e,t,r){xt(t?"PUT":"DELETE",`/policies/${$t.policyId}/entries/${Gt}/subjects/${e}`,t).then(r)}function Fy(){eo(),lt(Ne,"Please select a subject",Kt.tableValidationSubjects),Wl(Ne,JSON.parse(mr.getValue()),Ce(Kt.crudSubject,1))}function zy(){eo(),lt(Ne,"Please select a subject",Kt.tableValidationSubjects),Wl(Ne,null,Ce(Kt.crudSubject,2))}function By(e){mr.setReadOnly(!e.detail.isEditing),mr.renderer.setShowGutter(e.detail.isEditing),e.detail.isCancel&&(Kt.crudSubject.idValue=Ne,$t&&Gt&&Ne?mr.setValue(JSON.stringify($t.entries[Gt].subjects[Ne],null,2),-1):mr.setValue(""))}function Hy(e){Ne=null,Kt.tbodyPolicySubjects.textContent="",Kt.crudSubject.idValue=null,Kt.crudSubject.editDisabled=e===null,mr.setValue(""),$t&&e&&Object.keys($t.entries[e].subjects).forEach(t=>{Ht(Kt.tbodyPolicySubjects,t,t===Ne,null,JSON.stringify($t.entries[e].subjects[t])),t===Ne&&(Kt.crudSubject.idValue=t,mr.setValue(JSON.stringify($t.entries[e].subjects[t],null,2),-1))})}var Wt={tbodyAttributes:null,crudAttribute:null,badgeAttributeCount:null},lm,oo;function dm(){Se(Ky),ht(Wt),Wt.tbodyAttributes.onclick=Gy,Wt.crudAttribute.addEventListener("onCreateClick",jy),Wt.crudAttribute.addEventListener("onUpdateClick",Wy),Wt.crudAttribute.addEventListener("onDeleteClick",Vy),Wt.crudAttribute.addEventListener("onEditToggle",Jy),oo=Dt("attributeEditor","ace/mode/json",!0),document.querySelector('a[data-bs-target="#tabCrudAttribute"]').addEventListener("shown.bs.tab",e=>{oo.renderer.updateFull()})}function jy(){lt(Wt.crudAttribute.idValue,"Attribute path must not be empty",Wt.crudAttribute.validationElement),lt(!St.attributes||!Object.keys(St.attributes).includes(Wt.crudAttribute.idValue),`Attribute path ${Wt.crudAttribute.idValue} already exists in Thing`,Wt.crudAttribute.validationElement),Vl("PUT",!0)}function Wy(){Vl("PUT")}function Vy(){Ge(`Are you sure you want to delete attribute<br>'${Wt.crudAttribute.idValue}'?`,"Delete",()=>{Vl("DELETE")})}function Gy(e){if(e.target&&e.target.nodeName==="TD"){let t=e.target.parentNode.children[0].innerText;Wt.crudAttribute.idValue===t?En(null):En(St,t)}}function Vl(e,t=!1){let r=JSON.parse(oo.getValue());xt(e,`/things/${St.thingId}/attributes/${Wt.crudAttribute.idValue}`,e==="PUT"?r:null,t?{"If-None-Match":"*"}:{"If-Match":e==="PUT"?lm:"*"}).then(()=>{e==="PUT"&&Wt.crudAttribute.toggleEdit(),wr(St.thingId)})}function En(e,t=null){Wt.crudAttribute.isEditing||(e?(Wt.crudAttribute.idValue=t,e.attributes&&oo.setValue(Ct(e.attributes[t]),-1)):(Wt.crudAttribute.idValue=null,oo.setValue("")))}function Ky(e){Wt.crudAttribute.editDisabled=e===null,Wt.tbodyAttributes.textContent="";let t=0,r=!1;e&&e.attributes&&Object.keys(St.attributes).forEach(d=>{d===Wt.crudAttribute.idValue&&(En(St,d),r=!0),Ht(Wt.tbodyAttributes,d,d===Wt.crudAttribute.idValue,null,Yy(St.attributes[d])),t++}),Wt.badgeAttributeCount.innerText=t>0?t:"",r||En(null)}function Yy(e){return typeof e=="object"?JSON.stringify(e):e.toString()}function Jy(e){let t=e.detail.isEditing;t&&Wt.crudAttribute.idValue&&Wt.crudAttribute.idValue!==""?xt("GET",`/things/${St.thingId}/attributes/${Wt.crudAttribute.idValue}`,null,null,!0).then(d=>(lm=d.headers.get("ETag").replace("W/",""),d.json())).then(d=>{r(),oo.setValue(Ct(d),-1)}):(r(),En(St,Wt.crudAttribute.idValue),St.attributes&&oo.setValue(Ct(St.attributes[Wt.crudAttribute.idValue]),-1));function r(){oo.setReadOnly(!t),oo.renderer.setShowGutter(t)}}var cm=`<!--
  ~ Copyright (c) 2022 Contributors to the Eclipse Foundation
  ~
  ~ See the NOTICE file(s) distributed with this work for additional
  ~ information regarding copyright ownership.
  ~
  ~ This program and the accompanying materials are made available under the
  ~ terms of the Eclipse Public License 2.0 which is available at
  ~ http://www.eclipse.org/legal/epl-2.0
  ~
  ~ SPDX-License-Identifier: EPL-2.0
  -->
<div class="tab-pane container fade no-margin">
    <div class="resizable_flex_column">
        <div class="input-group input-group-sm mb-1 mt-1 has-validation">
            <label class="input-group-text">Subject and Timeout</label>
            <input type="text" class="form-control" id="inputMessageSubject"></input>
            <input type="number" class="form-control form-control-sm" id="inputMessageTimeout" value="10"></input>
            <button class="btn btn-outline-primary btn-sm" id="buttonMessageSend" disabled>
                <i class="bi bi-send"></i>
                Send
                <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
            </button>
            <div class="invalid-feedback"></div>
        </div>
        <div class="input-group input-group-sm mb-1 has-validation">
            <label class="input-group-text">Template</label>
            <div class="btn-group dropend">
                <button id="buttonMessageFavorite" class="btn btn-outline-secondary btn-sm" data-bs-toggle="tooltip"
                    title="Save favorite for message on this feature">
                    <i id="favIconMessage" class="bi bi-star"></i>
                </button>
                <button class="btn btn-outline-secondary btn-sm dropdown-toggle dropdown-toggle-split"
                    data-bs-toggle="dropdown"></button>
                <ul id="ulMessageTemplates" class="dropdown-menu" style="position: fixed; top: auto;">
                </ul>
            </div>
            <input type="text" class="form-control" id="inputMessageTemplate">
            <div class="invalid-feedback"></div>
        </div>
        <div class="input-group input-group-sm" style="flex-grow: 1; display: flex;">
            <label class="input-group-text">Payload<br>and<br>Response</label>
            <div class="ace_container" style="flex-grow: 1;">
                <div class="script_editor" id="acePayload"></div>
            </div>
            <div class="ace_container" style="flex-grow: 1;">
                <div class="script_editor" id="aceResponse"></div>
            </div>
        </div>

    </div>
</div>`;var pm=`<!--
  ~ Copyright (c) 2022 Contributors to the Eclipse Foundation
  ~
  ~ See the NOTICE file(s) distributed with this work for additional
  ~ information regarding copyright ownership.
  ~
  ~ This program and the accompanying materials are made available under the
  ~ terms of the Eclipse Public License 2.0 which is available at
  ~ http://www.eclipse.org/legal/epl-2.0
  ~
  ~ SPDX-License-Identifier: EPL-2.0
  -->
<h5 data-bs-toggle="collapse" data-bs-target="#collapseFeatures">
    Features <span class="badge rounded-pill bg-info" id="badgeFeatureCount"></span></h5>
<hr />
<div class="collapse show" id="collapseFeatures">
    <div class="row resizable_pane" style="height: 45vh;">
        <div class="col-md-4 resizable_flex_column">
            <div class="input-group has-validation">
                <input class="form-control" id="tableValidationFeature" hidden="true"></input>
                <div class="invalid-feedback"></div>
            </div>
            <div class="table-wrap">
                <table class="table table-striped table-hover table-sm">
                    <tbody id="tbodyFeatures"></tbody>
                </table>
            </div>
        </div>
        <div class="col-md-8 resizable_flex_column">
            <ul class="nav nav-tabs nav-fill" id="tabItemsFeatures">
                <li class="nav-item">
                    <a class="nav-link active" data-bs-toggle="tab" data-bs-target="#tabCrudFeature">Manage</a>
                </li>
            </ul>
            <div class="tab-content" style="flex-grow: 1;" id="tabContentFeatures">
                <div class="tab-pane container active no-margin" id="tabCrudFeature">
                    <crud-toolbar id="crudFeature" label="Feature ID">
                        <div class="input-group input-group-sm mb-1">
                            <label class="input-group-text">Definition</label>
                            <input type="text" class="form-control" id="inputFeatureDefinition" disabled></input>
                        </div>
                        <div class="input-group input-group-sm mb-1" style="flex-grow: 1; display: flex;">
                            <label class="input-group-text">Properties<br>and<br>Desired<br>Properties</label>
                            <div class="ace_container" style="flex-grow: 1;">
                                <div class="script_editor" id="featurePropertiesEditor"></div>
                            </div>
                            <div class="ace_container" style="flex-grow: 1;">
                                <div class="script_editor" id="featureDesiredPropertiesEditor"></div>
                            </div>
                        </div>
                    </crud-toolbar>
                </div>
            </div>
        </div>
    </div>
</div>`;var um=[];document.getElementById("featuresHTML").innerHTML=pm;function za(e){um.push(e)}function Zy(){um.forEach(e=>e.call(null,At.crudFeature.idValue))}var gr,io,mm,At={crudFeature:null,inputFeatureDefinition:null,badgeFeatureCount:null,tbodyFeatures:null,tableValidationFeature:null};function gm(){Se(nx),ht(At),dr(At.tbodyFeatures,At.tableValidationFeature),At.tbodyFeatures.onclick=ix,At.crudFeature.editDisabled=!0,At.crudFeature.addEventListener("onCreateClick",ox),At.crudFeature.addEventListener("onUpdateClick",tx),At.crudFeature.addEventListener("onDeleteClick",ex),At.crudFeature.addEventListener("onEditToggle",ax),gr=Dt("featurePropertiesEditor","ace/mode/json",!0),io=Dt("featureDesiredPropertiesEditor","ace/mode/json",!0),gr.on("dblclick",rx),document.querySelector('a[data-bs-target="#tabCrudFeature"]').addEventListener("shown.bs.tab",e=>{gr.renderer.updateFull(),io.renderer.updateFull()})}function tx(){Kl("PUT")}function ex(){Ge(`Are you sure you want to delete feature<br>'${At.crudFeature.idValue}'?`,"Delete",()=>{Kl("DELETE")})}function rx(e){e.domEvent.shiftKey&&setTimeout(()=>{let t=gr.getSelectedText();if(t){let r="$.."+t.replace(/['"]+/g,"").trim(),d=Nt({json:JSON.parse(gr.getValue()),path:r,resultType:"pointer"});jp("features/"+At.crudFeature.idValue+"/properties"+d)}},10)}function ox(){lt(At.crudFeature.idValue,"Feature ID must not be empty",At.crudFeature.validationElement),lt(!St.features||!Object.keys(St.features).includes(At.crudFeature.idValue),`Feature ID ${At.crudFeature.idValue} already exists in Thing`,At.crudFeature.validationElement),Kl("PUT",!0)}function ix(e){e.target&&e.target.nodeName==="TD"&&(At.crudFeature.idValue===e.target.textContent?Ni(null):Ni(St,e.target.textContent))}function Kl(e,t=!1){lt(St,"No Thing selected"),lt(At.crudFeature.idValue,"No Feature selected");let r={},d=gr.getValue(),u=io.getValue();At.inputFeatureDefinition.value&&(r.definition=At.inputFeatureDefinition.value.split(",")),d&&(r.properties=JSON.parse(d)),u&&(r.desiredProperties=JSON.parse(u)),xt(e,"/things/"+St.thingId+"/features/"+At.crudFeature.idValue,e==="PUT"?r:null,t?{"If-None-Match":"*"}:{"If-Match":e==="PUT"?mm:"*"}).then(()=>{e==="PUT"&&At.crudFeature.toggleEdit(),wr(St.thingId)}).catch()}function Gl(e){e?(At.inputFeatureDefinition.value=e.definition?e.definition:null,e.properties?gr.setValue(Ct(e.properties),-1):gr.setValue(""),e.desiredProperties?io.setValue(Ct(e.desiredProperties),-1):io.setValue("")):(At.inputFeatureDefinition.value=null,gr.setValue(""),io.setValue("")),gr.session.getUndoManager().reset(),io.session.getUndoManager().reset()}function Ni(e,t=null){At.crudFeature.isEditing||(e&&e.features&&t?(At.crudFeature.idValue=t,Gl(e.features[t])):(At.crudFeature.idValue=null,Gl(null)),Zy())}function nx(e){At.crudFeature.editDisabled=e===null,At.tbodyFeatures.textContent="";let t=0,r=!1;if(e&&e.features)for(let d of Object.keys(e.features))d===At.crudFeature.idValue&&(Ni(e,d),r=!0),Ht(At.tbodyFeatures,d,d===At.crudFeature.idValue),t++;At.badgeFeatureCount.textContent=t>0?t:"",r||Ni(e,null)}function ax(e){let t=e.detail.isEditing;t&&At.crudFeature.idValue&&At.crudFeature.idValue!==""?xt("GET",`/things/${St.thingId}/features/${At.crudFeature.idValue}`,null,null,!0).then(u=>(mm=u.headers.get("ETag").replace("W/",""),u.json())).then(u=>{r(),Gl(u)}):(r(),d(),At.crudFeature.validationElement.classList.remove("is-invalid"));function r(){At.inputFeatureDefinition.disabled=!t,gr.setReadOnly(!t),gr.renderer.setShowGutter(t),io.setReadOnly(!t),io.renderer.setShowGutter(t)}function d(){At.crudFeature.idValue?Ni(St,At.crudFeature.idValue):Ni(null)}}var Sr,_t={inputMessageSubject:null,inputMessageTimeout:null,inputMessageTemplate:null,buttonMessageSend:null,buttonMessageFavorite:null,ulMessageTemplates:null,favIconMessage:null,tableValidationFeature:null},Er,Sn;async function bm(){Ke(lx),za(dx),Ti(document.getElementById("tabItemsFeatures"),document.getElementById("tabContentFeatures"),"Send Message",cm),ht(_t),Er=Dt("acePayload","ace/mode/json"),Sn=Dt("aceResponse","ace/mode/json",!0),_t.buttonMessageSend.onclick=()=>{lt(Sr,"Please select a Feature",_t.tableValidationFeature),lt(_t.inputMessageSubject.value,"Please give a Subject",_t.inputMessageSubject),lt(_t.inputMessageTimeout.value,"Please give a timeout",_t.inputMessageTimeout),_t.buttonMessageSend.classList.add("busy"),_t.buttonMessageSend.disabled=!0,sx()},_t.buttonMessageFavorite.onclick=async()=>{let e=_t.inputMessageTemplate.value,t=Sr,r=Er.getValue();lt(t,"Please select a Feature",_t.tableValidationFeature),lt(e,"Please give a name for the template",_t.inputMessageTemplate),Q().messageTemplates[t]=Q().messageTemplates[t]||{},Object.keys(Q().messageTemplates[t]).includes(e)&&_t.favIconMessage.classList.contains("bi-star-fill")?(_t.favIconMessage.classList.replace("bi-star-fill","bi-star"),delete Q().messageTemplates[t][e]):(_t.favIconMessage.classList.replace("bi-star","bi-star-fill"),Q().messageTemplates[t][e]={subject:_t.inputMessageSubject.value,timeout:_t.inputMessageTimeout.value,...r&&{payload:JSON.parse(r)}},Er.session.getUndoManager().markClean()),await oe(!1,"messageTemplates")},_t.ulMessageTemplates.addEventListener("click",e=>{if(e.target&&e.target.classList.contains("dropdown-item")){_t.favIconMessage.classList.replace("bi-star","bi-star-fill");let t=Q().messageTemplates[Sr][e.target.textContent];_t.inputMessageTemplate.value=e.target.textContent,_t.inputMessageSubject.value=t.subject,_t.inputMessageTimeout.value=t.timeout,Er.setValue(Ct(t.payload),-1),Er.session.getUndoManager().markClean()}}),[_t.inputMessageTemplate,_t.inputMessageSubject,_t.inputMessageTimeout].forEach(e=>{e.addEventListener("change",()=>{_t.favIconMessage.classList.replace("bi-star-fill","bi-star")})}),Er.on("input",()=>{Er.session.getUndoManager().isClean()||_t.favIconMessage.classList.replace("bi-star-fill","bi-star")})}function sx(){let e;Er&&Er.getValue().length>0?e=JSON.parse(Er.getValue()):e=null,Sn.setValue(""),xt("POST","/things/"+St.thingId+"/features/"+Sr+"/inbox/messages/"+_t.inputMessageSubject.value+"?timeout="+_t.inputMessageTimeout.value,e,null,!1,!1,!0).then(t=>{_t.buttonMessageSend.classList.remove("busy"),_t.buttonMessageSend.disabled=!1,_t.inputMessageTimeout.value>0&&Sn.setValue(Ct(t),-1)}).catch(t=>{_t.buttonMessageSend.classList.remove("busy"),_t.buttonMessageSend.disabled=!1,Sn.setValue(`Error: ${t}`)})}function lx(e){Q().messageTemplates=Q().messageTemplates||{},e||fm(),e==="messageTemplates"&&vm()}function fm(){_t.favIconMessage.classList.replace("bi-star-fill","bi-star"),_t.inputMessageTemplate.value=null,_t.inputMessageSubject.value=null,_t.inputMessageTimeout.value="10",Er.setValue(""),Sn.setValue(""),_t.ulMessageTemplates.textContent="",_t.buttonMessageSend.disabled=!Sr||Sr===""}function vm(){_t.ulMessageTemplates.textContent="",jo(_t.ulMessageTemplates,"Saved message templates",!0),Sr&&Q().messageTemplates[Sr]&&fo(_t.ulMessageTemplates,Object.keys(Q().messageTemplates[Sr]))}function dx(e){e!==Sr&&(Sr=e,fm(),vm())}var wm=`<!--
  ~ Copyright (c) 2022 Contributors to the Eclipse Foundation
  ~
  ~ See the NOTICE file(s) distributed with this work for additional
  ~ information regarding copyright ownership.
  ~
  ~ This program and the accompanying materials are made available under the
  ~ terms of the Eclipse Public License 2.0 which is available at
  ~ http://www.eclipse.org/legal/epl-2.0
  ~
  ~ SPDX-License-Identifier: EPL-2.0
  -->
<h5 data-bs-toggle="collapse" data-bs-target="#collapseMessages">
    Incoming Thing Updates <span class="badge rounded-pill bg-info" id="badgeMessageIncomingCount"></span></h5>
<hr />
<div class="collapse" id="collapseMessages">
    <div class="row resizable_pane" style="height: 45vh;">
        <div class="col-md-7 resizable_flex_column">
            <div class="input-group input-group-sm mb-1">
                <button class="btn btn-outline-secondary btn-sm button_round_right" id="buttonResetMessagesIncoming"
                    data-bs-toggle="tooltip" title="Reset connection logs for the selected connection">
                    <i class="bi bi-x-circle"></i>
                    Reset
                </button>
            </div>
            <table-filter id="tableFilterMessagesIncoming"></table-filter>
            <div class="table-wrap">
                <table class="table table-striped table-hover table-sm">
                    <thead>
                        <tr>
                            <th>Revision</th>
                            <th>Action</th>
                            <th>Path</th>
                            <th>Field(s)</th>
                            <th>Modified</th>
                        </tr>
                    </thead>
                    <tbody id="tbodyMessagesIncoming"></tbody>
                </table>
            </div>
        </div>
        <div class="col-md-5 resizable_flex_column">
            <h6>Thing Update Detail</h6>
            <div class="input-group input-group-sm mb-1 mt-1">
                <label class="input-group-text" for="selectThingUpdateMessageContent">Show</label>
                <select class="form-select form-select-sm" id="selectThingUpdateMessageContent">
                    <option value="ONLY_CONTEXT" selected>Only context</option>
                    <option value="ONLY_CONTEXT_WITH_METADATA">Only context with metadata</option>
                    <option value="FULL_THING">Only full Thing JSON</option>
                    <option value="FULL_THING_WITH_CONTEXT">Full Thing JSON with context and metadata</option>
                </select>
            </div>
            <div class="ace_container" style="flex-grow: 1;">
                <div class="script_editor" id="messageIncomingDetail"></div>
            </div>
        </div>
    </div>
</div>`;var Fe={badgeMessageIncomingCount:null,buttonResetMessagesIncoming:null,selectThingUpdateMessageContent:null,tbodyMessagesIncoming:null,tableFilterMessagesIncoming:null},Tn=[],Tr=[],Fi,ko,ym,xm="ONLY_CONTEXT";document.getElementById("messagesIncomingHTML").innerHTML=wm;function km(){xa(gx),Se(hx),ht(Fe),ko=Dt("messageIncomingDetail","ace/mode/json",!0),Fe.buttonResetMessagesIncoming.onclick=Em,Fe.selectThingUpdateMessageContent.onchange=mx,Fe.tbodyMessagesIncoming.addEventListener("click",ux),Fe.tableFilterMessagesIncoming.addEventListener("filterChange",bx),Fe.tableFilterMessagesIncoming.filterOptions=Tm()}function ux(e){Fi=e.target.parentNode.rowIndex-1,_m(),ko.session.getUndoManager().reset()}function _m(){switch(xm){case"FULL_THING_WITH_CONTEXT":{ko.setValue(Ct(Tr[Fi]),-1);break}case"FULL_THING":{let t=Object.entries(Tr[Fi]).filter(([d,u])=>!d.startsWith("_")),r=Object.fromEntries(t);ko.setValue(Ct(r),-1);break}case"ONLY_CONTEXT_WITH_METADATA":{let t=Object.entries(Tr[Fi]).filter(([d,u])=>d.startsWith("_")),r=Object.fromEntries(t);ko.setValue(Ct(r),-1);break}case"ONLY_CONTEXT":{let t=Object.entries(Tr[Fi]).filter(([d,u])=>d.startsWith("_")).filter(([d,u])=>d!=="_metadata"),r=Object.fromEntries(t);ko.setValue(Ct(r),-1);break}default:ko.setValue(Ct(Tr[Fi]),-1)}}function Em(){Tn=[],Tr=[],Fe.badgeMessageIncomingCount.textContent="",Fe.tbodyMessagesIncoming.textContent="",ko.setValue("")}function mx(){xm=Fe.selectThingUpdateMessageContent.value,_m()}function gx(e){Tn.push(e);let t=Fe.tableFilterMessagesIncoming.filterItems([e]);t.length>0&&(Tr.push(t[0]),Sm(t[0])),pn(Fe.badgeMessageIncomingCount,Tn,Tr)}function Sm(e){let t=e._context.topic.substring(e._context.topic.lastIndexOf("/")+1);Ht(Fe.tbodyMessagesIncoming,e._revision,!1,null,t,e._context.path,r(t).join(`
`),cn(e._modified,!0));function r(d){return d==="deleted"?[]:e._context?.value?[...e._context.value.features?Object.keys(e._context.value.features):[],...e._context.value.attributes?Object.keys(e._context.value.attributes):[]]:[...e.features?Object.keys(e.features):[],...e.attributes?Object.keys(e.attributes):[]]}}function hx(e){(!e||e.thingId!==ym)&&(ym=e?e.thingId:null,Em(),Fe.tableFilterMessagesIncoming.filterOptions=Tm(e))}function Tm(e){let t=[];return["created","modified","merged","deleted"].forEach(r=>t.push(new De(0,`/${r}`,"_context.topic","Action"))),e&&["features","attributes"].forEach(r=>{e[r]&&Object.keys(e[r]).forEach(d=>{t.push(new De(0,`/${r}/${d}`,"_context.path","Path"))})}),t}function bx(e){Fe.tbodyMessagesIncoming.textContent="",Tr=Fe.tableFilterMessagesIncoming.filterItems(Tn),Tr.forEach(t=>Sm(t)),pn(Fe.badgeMessageIncomingCount,Tn,Tr)}var Cm=`<!--
  ~ Copyright (c) 2023 Contributors to the Eclipse Foundation
  ~
  ~ See the NOTICE file(s) distributed with this work for additional
  ~ information regarding copyright ownership.
  ~
  ~ This program and the accompanying materials are made available under the
  ~ terms of the Eclipse Public License 2.0 which is available at
  ~ http://www.eclipse.org/legal/epl-2.0
  ~
  ~ SPDX-License-Identifier: EPL-2.0
  -->
<div class="tab-pane container fade no-margin">
    <div class="resizable_flex_column">
        <div class="input-group input-group-sm mb-1 mt-1 has-validation">
            <label class="input-group-text">Subject and Timeout</label>
            <input type="text" class="form-control" id="inputThingMessageSubject"></input>
            <input type="number" class="form-control form-control-sm" id="inputThingMessageTimeout" value="10"></input>
            <button class="btn btn-outline-primary btn-sm" id="buttonThingMessageSend">
                <i class="bi bi-send"></i>
                Send
                <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
            </button>
            <div class="invalid-feedback"></div>
        </div>
        <div class="input-group input-group-sm mb-1 has-validation">
            <label class="input-group-text">Template</label>
            <div class="btn-group dropend">
                <button id="buttonThingMessageFavorite" class="btn btn-outline-secondary btn-sm" data-bs-toggle="tooltip"
                    title="Save favorite for message on this feature">
                    <i id="favIconThingMessage" class="bi bi-star"></i>
                </button>
                <button class="btn btn-outline-secondary btn-sm dropdown-toggle dropdown-toggle-split"
                    data-bs-toggle="dropdown"></button>
                <ul id="ulThingMessageTemplates" class="dropdown-menu" style="position: fixed; top: auto;">
                </ul>
            </div>
            <input type="text" class="form-control" id="inputThingMessageTemplate">
            <div class="invalid-feedback"></div>
        </div>
        <div class="input-group input-group-sm" style="flex-grow: 1; display: flex;">
            <label class="input-group-text">Payload<br>and<br>Response</label>
            <div class="ace_container" style="flex-grow: 1;">
                <div class="script_editor" id="acePayloadThingMessage"></div>
            </div>
            <div class="ace_container" style="flex-grow: 1;">
                <div class="script_editor" id="aceResponseThingMessage"></div>
            </div>
        </div>

    </div>
</div>`;var Tt={inputThingMessageSubject:null,inputThingMessageTimeout:null,inputThingMessageTemplate:null,buttonThingMessageSend:null,buttonThingMessageFavorite:null,ulThingMessageTemplates:null,favIconThingMessage:null},Cr,Cn;async function Am(){Ke(yx),Se(kx),Ti(document.getElementById("tabItemsThing"),document.getElementById("tabContentThing"),"Send Message",Cm),ht(Tt),Cr=Dt("acePayloadThingMessage","ace/mode/json"),Cn=Dt("aceResponseThingMessage","ace/mode/json",!0),Tt.buttonThingMessageSend.onclick=()=>{lt(Tt.inputThingMessageSubject.value,"Please give a Subject",Tt.inputThingMessageSubject),lt(Tt.inputThingMessageTimeout.value,"Please give a timeout",Tt.inputThingMessageTimeout),Tt.buttonThingMessageSend.classList.add("busy"),Tt.buttonThingMessageSend.disabled=!0,wx()},Tt.buttonThingMessageFavorite.onclick=async()=>{let e=Tt.inputThingMessageTemplate.value,t=Cr.getValue();lt(e,"Please give a name for the template",Tt.inputThingMessageTemplate),Q().messageTemplates["/"]=Q().messageTemplates["/"]||{},Object.keys(Q().messageTemplates["/"]).includes(e)&&Tt.favIconThingMessage.classList.contains("bi-star-fill")?(Tt.favIconThingMessage.classList.replace("bi-star-fill","bi-star"),delete Q().messageTemplates["/"][e]):(Tt.favIconThingMessage.classList.replace("bi-star","bi-star-fill"),Q().messageTemplates["/"][e]={subject:Tt.inputThingMessageSubject.value,timeout:Tt.inputThingMessageTimeout.value,...t&&{payload:JSON.parse(t)}},Cr.session.getUndoManager().markClean()),await oe(!1,"messageTemplates")},Tt.ulThingMessageTemplates.addEventListener("click",e=>{if(e.target&&e.target.classList.contains("dropdown-item")){Tt.favIconThingMessage.classList.replace("bi-star","bi-star-fill");let t=Q().messageTemplates["/"][e.target.textContent];Tt.inputThingMessageTemplate.value=e.target.textContent,Tt.inputThingMessageSubject.value=t.subject,Tt.inputThingMessageTimeout.value=t.timeout,Cr.setValue(Ct(t.payload),-1),Cr.session.getUndoManager().markClean()}}),[Tt.inputThingMessageTemplate,Tt.inputThingMessageSubject,Tt.inputThingMessageTimeout].forEach(e=>{e.addEventListener("change",()=>{Tt.favIconThingMessage.classList.replace("bi-star-fill","bi-star")})}),Cr.on("input",()=>{Cr.session.getUndoManager().isClean()||Tt.favIconThingMessage.classList.replace("bi-star-fill","bi-star")})}function wx(){let e;Cr&&Cr.getValue().length>0?e=JSON.parse(Cr.getValue()):e=null,Cn.setValue(""),xt("POST","/things/"+St.thingId+"/inbox/messages/"+Tt.inputThingMessageSubject.value+"?timeout="+Tt.inputThingMessageTimeout.value,e,null,!1,!1,!0).then(t=>{Tt.buttonThingMessageSend.classList.remove("busy"),Tt.buttonThingMessageSend.disabled=!1,Tt.inputThingMessageTimeout.value>0&&Cn.setValue(Ct(t),-1)}).catch(t=>{Tt.buttonThingMessageSend.classList.remove("busy"),Tt.buttonThingMessageSend.disabled=!1,Cn.setValue(`Error: ${t}`)})}function yx(e){Q().messageTemplates=Q().messageTemplates||{},e||Lm(),xx()}function Lm(){Tt.favIconThingMessage.classList.replace("bi-star-fill","bi-star"),Tt.inputThingMessageTemplate.value=null,Tt.inputThingMessageSubject.value=null,Tt.inputThingMessageTimeout.value="10",Cr.setValue(""),Cn.setValue(""),Tt.ulThingMessageTemplates.textContent="",Tt.buttonThingMessageSend.disabled=St===null}function xx(){Tt.ulThingMessageTemplates.textContent="",jo(Tt.ulThingMessageTemplates,"Saved message templates",!0),Q().messageTemplates["/"]&&fo(Tt.ulThingMessageTemplates,Object.keys(Q().messageTemplates["/"]))}function kx(e,t){(!e||t)&&Lm()}var Yl={"(empty thing)":{},"WoT ThingModel 'floor-lamp' 1.0.0":{definition:"https://eclipse-ditto.github.io/ditto-examples/wot/models/floor-lamp-1.0.0.tm.jsonld"},"com.acme:coffeebrewer:0.1.0":{definition:"com.acme:coffeebrewer:0.1.0",attributes:{manufacturer:"ACME demo corp.",location:"Berlin, main floor",serialno:"42",model:"Speaking coffee machine"},features:{"coffee-brewer":{definition:["com.acme:coffeebrewer:0.1.0"],properties:{"brewed-coffees":0}},"water-tank":{properties:{configuration:{smartMode:!0,brewingTemp:87,tempToHold:44,timeoutSeconds:6e3},status:{waterAmount:731,temperature:44}}}}}};var tr,$m,It={tbodyThingDetails:null,crudThings:null,buttonThingDefinitions:null,inputThingDefinition:null,ulThingDefinitions:null};async function Rm(){Se(Lx),ht(It),tr=Dt("thingJsonEditor","ace/mode/json",!0),fo(It.ulThingDefinitions,Object.keys(Yl)),It.ulThingDefinitions.addEventListener("click",Ax),It.crudThings.addEventListener("onCreateClick",Cx),It.crudThings.addEventListener("onUpdateClick",Tx),It.crudThings.addEventListener("onDeleteClick",Sx),It.crudThings.addEventListener("onEditToggle",$x),document.querySelector('a[data-bs-target="#tabModifyThing"]').addEventListener("shown.bs.tab",e=>{tr.renderer.updateFull()})}function Sx(){Ge(`Are you sure you want to delete thing<br>'${It.crudThings.idValue}'?`,"Delete",()=>{xt("DELETE",`/things/${It.crudThings.idValue}`,null,{"if-match":"*"}).then(()=>{va()})})}function Tx(){xt("PATCH",`/things/${It.crudThings.idValue}`,JSON.parse(tr.getValue()),{"if-match":$m||"*","if-equal":"skip-minimizing-merge"}).then(()=>{It.crudThings.toggleEdit(),wr(It.crudThings.idValue,null)})}async function Cx(){let e=tr.getValue();It.crudThings.idValue!==void 0&&It.crudThings.idValue!==""?xt("PUT","/things/"+It.crudThings.idValue,e===""?{}:JSON.parse(e),{"if-none-match":"*"}).then(t=>{It.crudThings.toggleEdit(),wr(t.thingId,()=>{vn([t.thingId])})}):xt("POST","/things",e===""?{}:JSON.parse(e)).then(t=>{It.crudThings.toggleEdit(),wr(t.thingId,()=>{vn([t.thingId])})})}function Ax(e){Fr(null),It.inputThingDefinition.value=e.target.textContent,tr.setValue(Ct(Yl[e.target.textContent]),-1)}function Lx(e){if(It.crudThings.isEditing)return;t(),r();function t(){It.tbodyThingDetails.textContent="",e&&(Ht(It.tbodyThingDetails,"thingId",!1,e.thingId,e.thingId),Ht(It.tbodyThingDetails,"policyId",!1,e.policyId,e.policyId),Ht(It.tbodyThingDetails,"definition",!1,e.definition??" ",e.definition??""),Ht(It.tbodyThingDetails,"revision",!1,e._revision,e._revision),Ht(It.tbodyThingDetails,"created",!1,e._created,e._created),Ht(It.tbodyThingDetails,"modified",!1,e._modified,e._modified))}function r(){if(e){It.crudThings.idValue=e.thingId,It.inputThingDefinition.value=e.definition??"";let d=JSON.parse(JSON.stringify(e));delete d._revision,delete d._created,delete d._modified,delete d._context,tr.setValue(Ct(d),-1),tr.session.getUndoManager().reset()}else It.crudThings.idValue=null,It.inputThingDefinition.value=null,tr.setValue(""),tr.session.getUndoManager().reset()}}function $x(e){let t=e.detail.isEditing;t&&St?xt("GET",`/things/${St.thingId}`,null,null,!0).then(g=>($m=g.headers.get("ETag").replace("W/",""),g.json())).then(g=>{r(),d(g)}):(r(),u());function r(){It.buttonThingDefinitions.disabled=!t,It.inputThingDefinition.disabled=!t,tr.setReadOnly(!t),tr.renderer.setShowGutter(t)}function d(g){It.inputThingDefinition.value=g.definition??"",tr.setValue(Ct(g),-1)}function u(){It.crudThings.idValue&&It.crudThings.idValue!==""?wr(It.crudThings.idValue,null):(It.inputThingDefinition.value=null,tr.setValue(""))}}var Mm=`<!--
  ~ Copyright (c) 2022 Contributors to the Eclipse Foundation
  ~
  ~ See the NOTICE file(s) distributed with this work for additional
  ~ information regarding copyright ownership.
  ~
  ~ This program and the accompanying materials are made available under the
  ~ terms of the Eclipse Public License 2.0 which is available at
  ~ http://www.eclipse.org/legal/epl-2.0
  ~
  ~ SPDX-License-Identifier: EPL-2.0
  -->
<div class="tab-pane container fade no-margin">
    <div class="resizable_flex_column">
        <div class="ace_container" style="flex-grow: 1;">
            <div class="script_editor" id="aceDescription"></div>
        </div>
    </div>
</div>`;function Jl(e,t){let r,d,u=!1,g=t,a;return{ready:async()=>{let l=Ti(document.getElementById(e.itemsId),document.getElementById(e.contentId),"WoT TD",Mm,"Generated WoT Thing Description. This requires a valid reference to a WoT Thing Model in the "+(t?"Feature":"Thing")+" definition. The Ditto environment must have WoT support enabled.");r=document.querySelector(`a[data-bs-target="#${l}"]`),r.onclick=i;let s=Math.random().toString(36).replace("0.","");document.getElementById("aceDescription").id=s,d=Dt(s,"ace/mode/json",!0)},onReferenceChanged:l=>{g&&(a=l),r&&r.classList.contains("active")?n():u=!0}};function i(){u&&(n(),u=!1)}function n(){let l=g?"/features/"+a:"";d.setValue(""),St&&(!g||a)&&xt("GET","/things/"+St.thingId+l,null,{accept:"application/td+json"}).then(s=>{d.setValue(Ct(s),-1)}).catch()}}var Im=`<!--
  ~ Copyright (c) 2024 Contributors to the Eclipse Foundation
  ~
  ~ See the NOTICE file(s) distributed with this work for additional
  ~ information regarding copyright ownership.
  ~
  ~ This program and the accompanying materials are made available under the
  ~ terms of the Eclipse Public License 2.0 which is available at
  ~ http://www.eclipse.org/legal/epl-2.0
  ~
  ~ SPDX-License-Identifier: EPL-2.0
  -->
<form class="input-group input-group-sm has-validation mb-1" autocomplete="off">
  <label class="input-group-text" hidden>Filter</label>
  <div class="btn-group dropend">
      <button type="button" class="btn btn-outline-secondary btn-sm dropdown-toggle"
          data-bs-toggle="dropdown" aria-expanded="false"></button>
      <ul id="ulFilterOptions" class="dropdown-menu">
          <input type="text" name="dropdown" class="form-control form-control-sm" placeholder="Filter entries..." spellcheck="false" autocomplete="off">
      </ul>                                    
  </div>
  <input autocomplete="false" name="hidden" type="text" style="display:none;">
  <input type="search" name="main" class="form-control form-control-sm me-1"
    placeholder="Add basic filter..." autocomplete="off" spellcheck="false"></input>
  <div class="form-check form-switch">
    <input class="form-check-input mt-2" type="checkbox" role="switch"
        data-bs-toggle="tooltip" title="Toggle advanced search">
  </div>
  <div class="invalid-feedback"></div>
</form>
<div data-bs-theme="dark">
</div>

`;var Xl=class extends HTMLElement{constructor(){super();this.basicFilters=new yn;this.mode=0;this.basicFilters.onFilterChange=this}connectedCallback(){this.innerHTML=Im,this.mainInput=this.querySelector('input[name="main"]'),this.mainInput.addEventListener("keyup",this.mainInputChangedCallback(this)),this.mainInput.addEventListener("search",this.mainInputChangedCallback(this)),this.dropDownInput=this.querySelector('input[name="dropdown"]'),this.dropDownInput.addEventListener("keyup",this.filterDropdown(this)),this.dropDownInput.addEventListener("search",this.filterDropdown(this)),this.querySelector("button").addEventListener("click",this.onDropDownToggle(this)),this.querySelector("ul").addEventListener("click",this.filterSelectedCallback(this)),this.querySelector('input[role="switch"').addEventListener("click",this.toggleModeCallback(this))}set filterOptions(r){let d=this.querySelector("ul"),u=d.firstElementChild;d.replaceChildren(u),r.forEach(g=>{jo(d,g.toString(),!1,JSON.stringify(g))})}get filter(){return this.validatedFilter}filterItems(r){let d=r;if(this.validatedFilter)try{d=Nt({path:this.validatedFilter,json:r})}catch(u){console.log(u.message)}return d}fillUIChips(){let r=this.querySelector('[data-bs-theme="dark"]');r.textContent="",this.basicFilters.getAllUIs().forEach(d=>r.appendChild(d))}toggleModeCallback(r){return d=>{switch(r.mode){case 0:r.mainInput.value=r.filter,r.mainInput.placeholder="Enter JSONPath to filter...",r.querySelector('[data-bs-theme="dark"]').hidden=!0,r.mode=1;break;case 1:r.mainInput.value="",r.mainInput.placeholder="Add basic filter...",r.querySelector('[data-bs-theme="dark"]').hidden=!1,r.mode=0,this.basicFilters.clear(),this.filterChanged()}}}filterSelectedCallback(r){return d=>{let u=d.target;if(u&&u.classList.contains("dropdown-item")){let g=De.fromJSON(JSON.parse(u.dataset.value));r.mode===0?r.basicFilters.addOrUpdate(g):r.mainInput.value=new yn().addOrUpdate(g).createJsonPath()}r.filterChanged()}}mainInputChangedCallback(r){return d=>{if(d.type==="search"||d.key==="Enter"||d.code==="Enter")switch(r.mode){case 0:r.basicFilters.addFromString(r.mainInput.value),r.filterChanged(),r.mainInput.value="";break;case 1:try{let u=Nt({path:r.mainInput.value,json:[{_context:{topic:"test",path:"test"}}]});r.filterChanged()}catch(u){lt(!1,u.message,r.mainInput)}}}}filterDropdown(r){return d=>{r.querySelectorAll(".dropdown-menu li").forEach(u=>{let g=d.target.value.toLowerCase();u.hidden=u.textContent.toLowerCase().indexOf(g)<0})}}filterChanged(){switch(this.mode){case 0:this.validatedFilter=this.basicFilters.createJsonPath(),this.fillUIChips();break;case 1:this.validatedFilter=this.mainInput.value}this.dispatchEvent(new CustomEvent("filterChange",{composed:!0,detail:{filter:this.validatedFilter}}))}onDropDownToggle(r){return()=>{r.dropDownInput.value="",r.dropDownInput.dispatchEvent(new Event("keyup")),r.dropDownInput.focus()}}};customElements.define("table-filter",Xl);var ql=!1,Ql;document.addEventListener("DOMContentLoaded",async function(){yp(),await Yp(),await Zp(),await Rm(),await Am(),await Jp(),km(),dm(),await Wp(),await nu(),gm(),await bm(),Qu(),im(),em(),Zu(),sm(),am(),ku(),Eu(),await Tu(),await Yu(),bu(),await Ip(),await Vu(),await Ru();let e=Jl({itemsId:"tabItemsThing",contentId:"tabContentThing"},!1);Se(e.onReferenceChanged),await e.ready();let t=Jl({itemsId:"tabItemsFeatures",contentId:"tabContentFeatures"},!0);za(t.onReferenceChanged),await t.ready(),new Rr(document.querySelector(".dropdown-toggle"),{popperConfig:{strategy:"fixed"}}),Ql=document.getElementById("mainNavbar"),Ql.querySelectorAll(".nav-link").forEach(g=>{g.addEventListener("click",a=>{Ql.querySelectorAll(".nav-link,.active").forEach(p=>p.classList.remove("active")),a.currentTarget.classList.add("active")})}),document.querySelectorAll(".table").forEach(g=>{g.addEventListener("click",a=>{let p=a.target;p&&p.tagName==="TD"&&(Array.from(p.parentNode.parentNode.children).forEach(o=>{o!==p.parentNode&&o.classList.remove("table-active")}),p.parentElement.classList.toggle("table-active"))})});let r=new ResizeObserver(()=>{ql=!0});document.querySelectorAll(".resizable_pane").forEach(g=>{r.observe(g),g.addEventListener("mouseup",()=>{ql&&(window.dispatchEvent(new Event("resize")),ql=!1)})});let{get:d,set:u}=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value");document.querySelectorAll("input").forEach(g=>{g.addEventListener("change",a=>{a.target.classList.remove("is-invalid")}),Object.defineProperty(g,"value",{get(){return d.call(this)},set(a){return g.classList.remove("is-invalid"),u.call(this,a)}})})});})();
/*! Bundled license information:

event-source-polyfill/src/eventsource.js:
  (** @license
   * eventsource.js
   * Available under MIT License (MIT)
   * https://github.com/Yaffle/EventSource/
   *)

ace-builds/src-noconflict/ace.js:
  (*
  * based on code from:
  *
  * @license RequireJS text 0.25.0 Copyright (c) 2010-2011, The Dojo Foundation All Rights Reserved.
  * Available via the MIT or new BSD license.
  * see: http://github.com/jrburke/requirejs for details
  *)

dompurify/dist/purify.js:
  (*! @license DOMPurify 3.1.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.6/LICENSE *)

bootstrap/dist/js/bootstrap.esm.js:
  (*!
    * Bootstrap v5.3.3 (https://getbootstrap.com/)
    * Copyright 2011-2024 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
    * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
    *)
*/
