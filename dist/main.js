(()=>{var ym=Object.create;var Oa=Object.defineProperty;var xm=Object.getOwnPropertyDescriptor;var km=Object.getOwnPropertyNames;var Em=Object.getPrototypeOf,_m=Object.prototype.hasOwnProperty;var Pa=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Sm=(e,t)=>{for(var r in t)Oa(e,r,{get:t[r],enumerable:!0})},Cm=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let p of km(t))!_m.call(e,p)&&p!==r&&Oa(e,p,{get:()=>t[p],enumerable:!(n=xm(t,p))||n.enumerable});return e};var Da=(e,t,r)=>(r=e!=null?ym(Em(e)):{},Cm(t||!e||!e.__esModule?Oa(r,"default",{value:e,enumerable:!0}):r,e));var Ec=Pa((ks,Zn)=>{(function(e){"use strict";var t=e.setTimeout,r=e.clearTimeout,n=e.XMLHttpRequest,p=e.XDomainRequest,g=e.ActiveXObject,s=e.EventSource,u=e.document,o=e.Promise,i=e.fetch,a=e.Response,l=e.TextDecoder,d=e.TextEncoder,c=e.AbortController;if(typeof window<"u"&&typeof u<"u"&&!("readyState"in u)&&u.body==null&&(u.readyState="loading",window.addEventListener("load",function(U){u.readyState="complete"},!1)),n==null&&g!=null&&(n=function(){return new g("Microsoft.XMLHTTP")}),Object.create==null&&(Object.create=function(U){function K(){}return K.prototype=U,new K}),Date.now||(Date.now=function(){return new Date().getTime()}),c==null){var m=i;i=function(U,K){var it=K.signal;return m(U,{headers:K.headers,credentials:K.credentials,cache:K.cache}).then(function(Q){var st=Q.body.getReader();return it._reader=st,it._aborted&&it._reader.cancel(),{status:Q.status,statusText:Q.statusText,headers:Q.headers,body:{getReader:function(){return st}}}})},c=function(){this.signal={_reader:null,_aborted:!1},this.abort=function(){this.signal._reader!=null&&this.signal._reader.cancel(),this.signal._aborted=!0}}}function h(){this.bitsNeeded=0,this.codePoint=0}h.prototype.decode=function(U){function K(It,H,V){if(V===1)return It>=128>>H&&It<<H<=2047;if(V===2)return It>=2048>>H&&It<<H<=55295||It>=57344>>H&&It<<H<=65535;if(V===3)return It>=65536>>H&&It<<H<=1114111;throw new Error}function it(It,H){if(It===6*1)return H>>6>15?3:H>31?2:1;if(It===6*2)return H>15?3:2;if(It===6*3)return 3;throw new Error}for(var Q=65533,st="",rt=this.bitsNeeded,nt=this.codePoint,Lt=0;Lt<U.length;Lt+=1){var ft=U[Lt];rt!==0&&(ft<128||ft>191||!K(nt<<6|ft&63,rt-6,it(rt,nt)))&&(rt=0,nt=Q,st+=String.fromCharCode(nt)),rt===0?(ft>=0&&ft<=127?(rt=0,nt=ft):ft>=192&&ft<=223?(rt=6*1,nt=ft&31):ft>=224&&ft<=239?(rt=6*2,nt=ft&15):ft>=240&&ft<=247?(rt=6*3,nt=ft&7):(rt=0,nt=Q),rt!==0&&!K(nt,rt,it(rt,nt))&&(rt=0,nt=Q)):(rt-=6,nt=nt<<6|ft&63),rt===0&&(nt<=65535?st+=String.fromCharCode(nt):(st+=String.fromCharCode(55296+(nt-65535-1>>10)),st+=String.fromCharCode(56320+(nt-65535-1&1023))))}return this.bitsNeeded=rt,this.codePoint=nt,st};var v=function(){try{return new l().decode(new d().encode("test"),{stream:!0})==="test"}catch(U){console.debug("TextDecoder does not support streaming option. Using polyfill instead: "+U)}return!1};(l==null||d==null||!v())&&(l=h);var k=function(){};function x(U){this.withCredentials=!1,this.readyState=0,this.status=0,this.statusText="",this.responseText="",this.onprogress=k,this.onload=k,this.onerror=k,this.onreadystatechange=k,this._contentType="",this._xhr=U,this._sendTimeout=0,this._abort=k}x.prototype.open=function(U,K){this._abort(!0);var it=this,Q=this._xhr,st=1,rt=0;this._abort=function(V){it._sendTimeout!==0&&(r(it._sendTimeout),it._sendTimeout=0),(st===1||st===2||st===3)&&(st=4,Q.onload=k,Q.onerror=k,Q.onabort=k,Q.onprogress=k,Q.onreadystatechange=k,Q.abort(),rt!==0&&(r(rt),rt=0),V||(it.readyState=4,it.onabort(null),it.onreadystatechange())),st=0};var nt=function(){if(st===1){var V=0,tt="",gt=void 0;if("contentType"in Q)V=200,tt="OK",gt=Q.contentType;else try{V=Q.status,tt=Q.statusText,gt=Q.getResponseHeader("Content-Type")}catch{V=0,tt="",gt=void 0}V!==0&&(st=2,it.readyState=2,it.status=V,it.statusText=tt,it._contentType=gt,it.onreadystatechange())}},Lt=function(){if(nt(),st===2||st===3){st=3;var V="";try{V=Q.responseText}catch{}it.readyState=3,it.responseText=V,it.onprogress()}},ft=function(V,tt){if((tt==null||tt.preventDefault==null)&&(tt={preventDefault:k}),Lt(),st===1||st===2||st===3){if(st=4,rt!==0&&(r(rt),rt=0),it.readyState=4,V==="load")it.onload(tt);else if(V==="error")it.onerror(tt);else if(V==="abort")it.onabort(tt);else throw new TypeError;it.onreadystatechange()}},It=function(V){Q!=null&&(Q.readyState===4?(!("onload"in Q)||!("onerror"in Q)||!("onabort"in Q))&&ft(Q.responseText===""?"error":"load",V):Q.readyState===3?"onprogress"in Q||Lt():Q.readyState===2&&nt())},H=function(){rt=t(function(){H()},500),Q.readyState===3&&Lt()};"onload"in Q&&(Q.onload=function(V){ft("load",V)}),"onerror"in Q&&(Q.onerror=function(V){ft("error",V)}),"onabort"in Q&&(Q.onabort=function(V){ft("abort",V)}),"onprogress"in Q&&(Q.onprogress=Lt),"onreadystatechange"in Q&&(Q.onreadystatechange=function(V){It(V)}),("contentType"in Q||!("ontimeout"in n.prototype))&&(K+=(K.indexOf("?")===-1?"?":"&")+"padding=true"),Q.open(U,K,!0),"readyState"in Q&&(rt=t(function(){H()},0))},x.prototype.abort=function(){this._abort(!1)},x.prototype.getResponseHeader=function(U){return this._contentType},x.prototype.setRequestHeader=function(U,K){var it=this._xhr;"setRequestHeader"in it&&it.setRequestHeader(U,K)},x.prototype.getAllResponseHeaders=function(){return this._xhr.getAllResponseHeaders!=null&&this._xhr.getAllResponseHeaders()||""},x.prototype.send=function(){if((!("ontimeout"in n.prototype)||!("sendAsBinary"in n.prototype)&&!("mozAnon"in n.prototype))&&u!=null&&u.readyState!=null&&u.readyState!=="complete"){var U=this;U._sendTimeout=t(function(){U._sendTimeout=0,U.send()},4);return}var K=this._xhr;"withCredentials"in K&&(K.withCredentials=this.withCredentials);try{K.send(void 0)}catch(it){throw it}};function T(U){return U.replace(/[A-Z]/g,function(K){return String.fromCharCode(K.charCodeAt(0)+32)})}function S(U){for(var K=Object.create(null),it=U.split(`\r
`),Q=0;Q<it.length;Q+=1){var st=it[Q],rt=st.split(": "),nt=rt.shift(),Lt=rt.join(": ");K[T(nt)]=Lt}this._map=K}S.prototype.get=function(U){return this._map[T(U)]},n!=null&&n.HEADERS_RECEIVED==null&&(n.HEADERS_RECEIVED=2);function f(){}f.prototype.open=function(U,K,it,Q,st,rt,nt){U.open("GET",st);var Lt=0;U.onprogress=function(){var It=U.responseText,H=It.slice(Lt);Lt+=H.length,it(H)},U.onerror=function(It){It.preventDefault(),Q(new Error("NetworkError"))},U.onload=function(){Q(null)},U.onabort=function(){Q(null)},U.onreadystatechange=function(){if(U.readyState===n.HEADERS_RECEIVED){var It=U.status,H=U.statusText,V=U.getResponseHeader("Content-Type"),tt=U.getAllResponseHeaders();K(It,H,V,new S(tt))}},U.withCredentials=rt;for(var ft in nt)Object.prototype.hasOwnProperty.call(nt,ft)&&U.setRequestHeader(ft,nt[ft]);return U.send(),U};function L(U){this._headers=U}L.prototype.get=function(U){return this._headers.get(U)};function $(){}$.prototype.open=function(U,K,it,Q,st,rt,nt){var Lt=null,ft=new c,It=ft.signal,H=new l;return i(st,{headers:nt,credentials:rt?"include":"same-origin",signal:It,cache:"no-store"}).then(function(V){return Lt=V.body.getReader(),K(V.status,V.statusText,V.headers.get("Content-Type"),new L(V.headers)),new o(function(tt,gt){var _t=function(){Lt.read().then(function($t){if($t.done)tt(void 0);else{var Tt=H.decode($t.value,{stream:!0});it(Tt),_t()}}).catch(function($t){gt($t)})};_t()})}).catch(function(V){if(V.name!=="AbortError")return V}).then(function(V){Q(V)}),{abort:function(){Lt?.cancel(),ft.abort()}}};function A(){this._listeners=Object.create(null)}function C(U){t(function(){throw U},0)}A.prototype.dispatchEvent=function(U){U.target=this;var K=this._listeners[U.type];if(K!=null)for(var it=K.length,Q=0;Q<it;Q+=1){var st=K[Q];try{typeof st.handleEvent=="function"?st.handleEvent(U):st.call(this,U)}catch(rt){C(rt)}}},A.prototype.addEventListener=function(U,K){U=String(U);var it=this._listeners,Q=it[U];Q==null&&(Q=[],it[U]=Q);for(var st=!1,rt=0;rt<Q.length;rt+=1)Q[rt]===K&&(st=!0);st||Q.push(K)},A.prototype.removeEventListener=function(U,K){U=String(U);var it=this._listeners,Q=it[U];if(Q!=null){for(var st=[],rt=0;rt<Q.length;rt+=1)Q[rt]!==K&&st.push(Q[rt]);st.length===0?delete it[U]:it[U]=st}};function w(U){this.type=U,this.target=void 0}function y(U,K){w.call(this,U),this.data=K.data,this.lastEventId=K.lastEventId}y.prototype=Object.create(w.prototype);function b(U,K){w.call(this,U),this.status=K.status,this.statusText=K.statusText,this.headers=K.headers}b.prototype=Object.create(w.prototype);function E(U,K){w.call(this,U),this.error=K.error}E.prototype=Object.create(w.prototype);var _=-1,R=0,M=1,I=2,P=-1,O=0,F=1,D=2,z=3,N=/^text\/event\-stream(;.*)?$/i,W=1e3,j=18e6,X=function(U,K){var it=U==null?K:parseInt(U,10);return it!==it&&(it=K),G(it)},G=function(U){return Math.min(Math.max(U,W),j)},J=function(U,K,it){try{typeof K=="function"&&K.call(U,it)}catch(Q){C(Q)}};function ot(U,K){A.call(this),K=K||{},this.onopen=void 0,this.onmessage=void 0,this.onerror=void 0,this.url=void 0,this.readyState=void 0,this.withCredentials=void 0,this.headers=void 0,this._close=void 0,bt(this,U,K)}function et(){return n!=null&&"withCredentials"in n.prototype||p==null?new n:new p}var vt=i!=null&&a!=null&&"body"in a.prototype;function bt(U,K,it){K=String(K);var Q=!!it.withCredentials,st=it.lastEventIdQueryParameterName||"lastEventId",rt=G(1e3),nt=X(it.heartbeatTimeout,45e3),Lt="",ft=rt,It=!1,H=0,V=it.headers||{},tt=it.Transport,gt=vt&&tt==null?void 0:new x(tt!=null?new tt:et()),_t=tt!=null&&typeof tt!="string"?new tt:gt==null?new $:new f,$t=void 0,Tt=0,Pt=_,Ft="",Rt="",Bt="",Ce="",ae=O,Co=0,Br=0,ri=function(he,Ot,be,De){if(Pt===R)if(he===200&&be!=null&&N.test(be)){Pt=M,It=Date.now(),ft=rt,U.readyState=M;var ye=new b("open",{status:he,statusText:Ot,headers:De});U.dispatchEvent(ye),J(U,U.onopen,ye)}else{var de="";he!==200?(Ot&&(Ot=Ot.replace(/\s+/g," ")),de="EventSource's response has a status "+he+" "+Ot+" that is not 200. Aborting the connection."):de="EventSource's response has a Content-Type specifying an unsupported type: "+(be==null?"-":be.replace(/\s+/g," "))+". Aborting the connection.",Ur();var ye=new b("error",{status:he,statusText:Ot,headers:De});U.dispatchEvent(ye),J(U,U.onerror,ye),console.error(de)}},oi=function(he){if(Pt===M){for(var Ot=-1,be=0;be<he.length;be+=1){var De=he.charCodeAt(be);(De===10||De===13)&&(Ot=be)}var ye=(Ot!==-1?Ce:"")+he.slice(0,Ot+1);Ce=(Ot===-1?Ce:"")+he.slice(Ot+1),he!==""&&(It=Date.now(),H+=he.length);for(var de=0;de<ye.length;de+=1){var De=ye.charCodeAt(de);if(ae===P&&De===10)ae=O;else if(ae===P&&(ae=O),De===13||De===10){if(ae!==O){ae===F&&(Br=de+1);var rr=ye.slice(Co,Br-1),or=ye.slice(Br+(Br<de&&ye.charCodeAt(Br)===32?1:0),de);rr==="data"?(Ft+=`
`,Ft+=or):rr==="id"?Rt=or:rr==="event"?Bt=or:rr==="retry"?(rt=X(or,rt),ft=rt):rr==="heartbeatTimeout"&&(nt=X(or,nt),Tt!==0&&(r(Tt),Tt=t(function(){To()},nt)))}if(ae===O){if(Ft!==""){Lt=Rt,Bt===""&&(Bt="message");var so=new y(Bt,{data:Ft.slice(1),lastEventId:Rt});if(U.dispatchEvent(so),Bt==="open"?J(U,U.onopen,so):Bt==="message"?J(U,U.onmessage,so):Bt==="error"&&J(U,U.onerror,so),Pt===I)return}Ft="",Bt=""}ae=De===13?P:O}else ae===O&&(Co=de,ae=F),ae===F?De===58&&(Br=de+1,ae=D):ae===D&&(ae=z)}}},En=function(he){if(Pt===M||Pt===R){Pt=_,Tt!==0&&(r(Tt),Tt=0),Tt=t(function(){To()},ft),ft=G(Math.min(rt*16,ft*2)),U.readyState=R;var Ot=new E("error",{error:he});U.dispatchEvent(Ot),J(U,U.onerror,Ot),he!=null&&console.error(he)}},Ur=function(){Pt=I,$t!=null&&($t.abort(),$t=void 0),Tt!==0&&(r(Tt),Tt=0),U.readyState=I},To=function(){if(Tt=0,Pt!==_){if(!It&&$t!=null)En(new Error("No activity within "+nt+" milliseconds. "+(Pt===R?"No response received.":H+" chars received.")+" Reconnecting.")),$t!=null&&($t.abort(),$t=void 0);else{var he=Math.max((It||Date.now())+nt-Date.now(),1);It=!1,Tt=t(function(){To()},he)}return}It=!1,H=0,Tt=t(function(){To()},nt),Pt=R,Ft="",Bt="",Rt=Lt,Ce="",Co=0,Br=0,ae=O;var Ot=K;if(K.slice(0,5)!=="data:"&&K.slice(0,5)!=="blob:"&&Lt!==""){var be=K.indexOf("?");Ot=be===-1?K:K.slice(0,be+1)+K.slice(be+1).replace(/(?:^|&)([^=&]*)(?:=[^&]*)?/g,function(or,so){return so===st?"":or}),Ot+=(K.indexOf("?")===-1?"?":"&")+st+"="+encodeURIComponent(Lt)}var De=U.withCredentials,ye={};ye.Accept="text/event-stream";var de=U.headers;if(de!=null)for(var rr in de)Object.prototype.hasOwnProperty.call(de,rr)&&(ye[rr]=de[rr]);try{$t=_t.open(gt,ri,oi,En,Ot,De,ye)}catch(or){throw Ur(),or}};U.url=K,U.readyState=R,U.withCredentials=Q,U.headers=V,U._close=Ur,To()}ot.prototype=Object.create(A.prototype),ot.prototype.CONNECTING=R,ot.prototype.OPEN=M,ot.prototype.CLOSED=I,ot.prototype.close=function(){this._close()},ot.CONNECTING=R,ot.OPEN=M,ot.CLOSED=I,ot.prototype.withCredentials=void 0;var ht=s;n!=null&&(s==null||!("withCredentials"in s.prototype))&&(ht=ot),function(U){if(typeof Zn=="object"&&typeof Zn.exports=="object"){var K=U(ks);K!==void 0&&(Zn.exports=K)}else typeof define=="function"&&define.amd?define(["exports"],U):U(e)}(function(U){U.EventSourcePolyfill=ot,U.NativeEventSource=s,U.EventSource=ht})})(typeof globalThis>"u"?typeof window<"u"?window:typeof self<"u"?self:ks:globalThis)});var Hc=Pa((Os,Ps)=>{var Is,ia;Is=Os,ia=function(){"use strict";function e(_,R){var M=Object.keys(_);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(_);R&&(I=I.filter(function(P){return Object.getOwnPropertyDescriptor(_,P).enumerable})),M.push.apply(M,I)}return M}function t(_){for(var R=1;R<arguments.length;R++){var M=arguments[R]!=null?arguments[R]:{};R%2?e(Object(M),!0).forEach(function(I){n(_,I,M[I])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(M)):e(Object(M)).forEach(function(I){Object.defineProperty(_,I,Object.getOwnPropertyDescriptor(M,I))})}return _}function r(_){return r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(R){return typeof R}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},r(_)}function n(_,R,M){return R in _?Object.defineProperty(_,R,{value:M,enumerable:!0,configurable:!0,writable:!0}):_[R]=M,_}function p(_){return function(R){if(Array.isArray(R))return s(R)}(_)||function(R){if(typeof Symbol<"u"&&R[Symbol.iterator]!=null||R["@@iterator"]!=null)return Array.from(R)}(_)||g(_)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function g(_,R){if(_){if(typeof _=="string")return s(_,R);var M=Object.prototype.toString.call(_).slice(8,-1);return M==="Object"&&_.constructor&&(M=_.constructor.name),M==="Map"||M==="Set"?Array.from(_):M==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(M)?s(_,R):void 0}}function s(_,R){(R==null||R>_.length)&&(R=_.length);for(var M=0,I=new Array(R);M<R;M++)I[M]=_[M];return I}var u=function(_){return typeof _=="string"?document.querySelector(_):_()},o=function(_,R){var M=typeof _=="string"?document.createElement(_):_;for(var I in R){var P=R[I];if(I==="inside")P.append(M);else if(I==="dest")u(P[0]).insertAdjacentElement(P[1],M);else if(I==="around"){var O=P;O.parentNode.insertBefore(M,O),M.append(O),O.getAttribute("autofocus")!=null&&O.focus()}else I in M?M[I]=P:M.setAttribute(I,P)}return M},i=function(_,R){return _=String(_).toLowerCase(),R?_.normalize("NFD").replace(/[\u0300-\u036f]/g,"").normalize("NFC"):_},a=function(_,R){return o("mark",t({innerHTML:_},typeof R=="string"&&{class:R})).outerHTML},l=function(_,R){R.input.dispatchEvent(new CustomEvent(_,{bubbles:!0,detail:R.feedback,cancelable:!0}))},d=function(_,R,M){var I=M||{},P=I.mode,O=I.diacritics,F=I.highlight,D=i(R,O);if(R=String(R),_=i(_,O),P==="loose"){var z=(_=_.replace(/ /g,"")).length,N=0,W=Array.from(R).map(function(X,G){return N<z&&D[G]===_[N]&&(X=F?a(X,F):X,N++),X}).join("");if(N===z)return W}else{var j=D.indexOf(_);if(~j)return _=R.substring(j,j+_.length),j=F?R.replace(_,a(_,F)):R}},c=function(_,R){return new Promise(function(M,I){var P;return(P=_.data).cache&&P.store?M():new Promise(function(O,F){return typeof P.src=="function"?P.src(R).then(O,F):O(P.src)}).then(function(O){try{return _.feedback=P.store=O,l("response",_),M()}catch(F){return I(F)}},I)})},m=function(_,R){var M=R.data,I=R.searchEngine,P=[];M.store.forEach(function(F,D){var z=function(j){var X=j?F[j]:F,G=typeof I=="function"?I(_,X):d(_,X,{mode:I,diacritics:R.diacritics,highlight:R.resultItem.highlight});if(G){var J={match:G,value:F};j&&(J.key=j),P.push(J)}};if(M.keys){var N,W=function(j,X){var G=typeof Symbol<"u"&&j[Symbol.iterator]||j["@@iterator"];if(!G){if(Array.isArray(j)||(G=g(j))||X&&j&&typeof j.length=="number"){G&&(j=G);var J=0,ot=function(){};return{s:ot,n:function(){return J>=j.length?{done:!0}:{done:!1,value:j[J++]}},e:function(ht){throw ht},f:ot}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var et,vt=!0,bt=!1;return{s:function(){G=G.call(j)},n:function(){var ht=G.next();return vt=ht.done,ht},e:function(ht){bt=!0,et=ht},f:function(){try{vt||G.return==null||G.return()}finally{if(bt)throw et}}}}(M.keys);try{for(W.s();!(N=W.n()).done;)z(N.value)}catch(j){W.e(j)}finally{W.f()}}else z()}),M.filter&&(P=M.filter(P));var O=P.slice(0,R.resultsList.maxResults);R.feedback={query:_,matches:P,results:O},l("results",R)},h="aria-expanded",v="aria-activedescendant",k="aria-selected",x=function(_,R){_.feedback.selection=t({index:R},_.feedback.results[R])},T=function(_){_.isOpen||((_.wrapper||_.input).setAttribute(h,!0),_.list.removeAttribute("hidden"),_.isOpen=!0,l("open",_))},S=function(_){_.isOpen&&((_.wrapper||_.input).setAttribute(h,!1),_.input.setAttribute(v,""),_.list.setAttribute("hidden",""),_.isOpen=!1,l("close",_))},f=function(_,R){var M=R.resultItem,I=R.list.getElementsByTagName(M.tag),P=!!M.selected&&M.selected.split(" ");if(R.isOpen&&I.length){var O,F,D=R.cursor;_>=I.length&&(_=0),_<0&&(_=I.length-1),R.cursor=_,D>-1&&(I[D].removeAttribute(k),P&&(F=I[D].classList).remove.apply(F,p(P))),I[_].setAttribute(k,!0),P&&(O=I[_].classList).add.apply(O,p(P)),R.input.setAttribute(v,I[R.cursor].id),R.list.scrollTop=I[_].offsetTop-R.list.clientHeight+I[_].clientHeight+5,R.feedback.cursor=R.cursor,x(R,_),l("navigate",R)}},L=function(_){f(_.cursor+1,_)},$=function(_){f(_.cursor-1,_)},A=function(_,R,M){(M=M>=0?M:_.cursor)<0||(_.feedback.event=R,x(_,M),l("selection",_),S(_))};function C(_,R){var M=this;return new Promise(function(I,P){var O,F;return O=R||((F=_.input)instanceof HTMLInputElement||F instanceof HTMLTextAreaElement?F.value:F.innerHTML),function(z,N,W){return N?N(z):z.length>=W}(O=_.query?_.query(O):O,_.trigger,_.threshold)?c(_,O).then(function(z){try{return _.feedback instanceof Error?I():(m(O,_),_.resultsList&&function(N){var W=N.resultsList,j=N.list,X=N.resultItem,G=N.feedback,J=G.matches,ot=G.results;if(N.cursor=-1,j.innerHTML="",J.length||W.noResults){var et=new DocumentFragment;ot.forEach(function(vt,bt){var ht=o(X.tag,t({id:"".concat(X.id,"_").concat(bt),role:"option",innerHTML:vt.match,inside:et},X.class&&{class:X.class}));X.element&&X.element(ht,vt)}),j.append(et),W.element&&W.element(j,G),T(N)}else S(N)}(_),D.call(M))}catch(N){return P(N)}},P):(S(_),D.call(M));function D(){return I()}})}var w=function(_,R){for(var M in _)for(var I in _[M])R(M,I)},y=function(_){var R,M,I,P=_.events,O=(R=function(){return C(_)},M=_.debounce,function(){clearTimeout(I),I=setTimeout(function(){return R()},M)}),F=_.events=t({input:t({},P&&P.input)},_.resultsList&&{list:P?t({},P.list):{}}),D={input:{input:function(){O()},keydown:function(z){(function(N,W){switch(N.keyCode){case 40:case 38:N.preventDefault(),N.keyCode===40?L(W):$(W);break;case 13:W.submit||N.preventDefault(),W.cursor>=0&&A(W,N);break;case 9:W.resultsList.tabSelect&&W.cursor>=0&&A(W,N);break;case 27:W.input.value="",S(W)}})(z,_)},blur:function(){S(_)}},list:{mousedown:function(z){z.preventDefault()},click:function(z){(function(N,W){var j=W.resultItem.tag.toUpperCase(),X=Array.from(W.list.querySelectorAll(j)),G=N.target.closest(j);G&&G.nodeName===j&&A(W,N,X.indexOf(G))})(z,_)}}};w(D,function(z,N){(_.resultsList||N==="input")&&(F[z][N]||(F[z][N]=D[z][N]))}),w(F,function(z,N){_[z].addEventListener(N,F[z][N])})};function b(_){var R=this;return new Promise(function(M,I){var P,O,F;if(P=_.placeHolder,F={role:"combobox","aria-owns":(O=_.resultsList).id,"aria-haspopup":!0,"aria-expanded":!1},o(_.input,t(t({"aria-controls":O.id,"aria-autocomplete":"both"},P&&{placeholder:P}),!_.wrapper&&t({},F))),_.wrapper&&(_.wrapper=o("div",t({around:_.input,class:_.name+"_wrapper"},F))),O&&(_.list=o(O.tag,t({dest:[O.destination,O.position],id:O.id,role:"listbox",hidden:"hidden"},O.class&&{class:O.class}))),y(_),_.data.cache)return c(_).then(function(z){try{return D.call(R)}catch(N){return I(N)}},I);function D(){return l("init",_),M()}return D.call(R)})}function E(_){var R=_.prototype;R.init=function(){b(this)},R.start=function(M){C(this,M)},R.unInit=function(){if(this.wrapper){var M=this.wrapper.parentNode;M.insertBefore(this.input,this.wrapper),M.removeChild(this.wrapper)}var I;w((I=this).events,function(P,O){I[P].removeEventListener(O,I.events[P][O])})},R.open=function(){T(this)},R.close=function(){S(this)},R.goTo=function(M){f(M,this)},R.next=function(){L(this)},R.previous=function(){$(this)},R.select=function(M){A(this,null,M)},R.search=function(M,I,P){return d(M,I,P)}}return function _(R){this.options=R,this.id=_.instances=(_.instances||0)+1,this.name="autoComplete",this.wrapper=1,this.threshold=1,this.debounce=0,this.resultsList={position:"afterend",tag:"ul",maxResults:5},this.resultItem={tag:"li"},function(M){var I=M.name,P=M.options,O=M.resultsList,F=M.resultItem;for(var D in P)if(r(P[D])==="object")for(var z in M[D]||(M[D]={}),P[D])M[D][z]=P[D][z];else M[D]=P[D];M.selector=M.selector||"#"+I,O.destination=O.destination||M.selector,O.id=O.id||I+"_list_"+M.id,F.id=F.id||I+"_result",M.input=u(M.selector)}(this),E.call(this,_),b(this)}},typeof Os=="object"&&typeof Ps<"u"?Ps.exports=ia():typeof define=="function"&&define.amd?define(ia):(Is=typeof globalThis<"u"?globalThis:Is||self).autoComplete=ia()});var Wc=Pa((jc,na)=>{(function(){var e="ace",t=function(){return this}();if(!t&&typeof window<"u"&&(t=window),!e&&typeof requirejs<"u")return;var r=function(o,i,a){if(typeof o!="string"){r.original?r.original.apply(this,arguments):(console.error("dropping module because define wasn't a string."),console.trace());return}arguments.length==2&&(a=i),r.modules[o]||(r.payloads[o]=a,r.modules[o]=null)};r.modules={},r.payloads={};var n=function(o,i,a){if(typeof i=="string"){var l=s(o,i);if(l!=null)return a&&a(),l}else if(Object.prototype.toString.call(i)==="[object Array]"){for(var d=[],c=0,m=i.length;c<m;++c){var h=s(o,i[c]);if(h==null&&p.original)return;d.push(h)}return a&&a.apply(null,d)||!0}},p=function(o,i){var a=n("",o,i);return a==null&&p.original?p.original.apply(this,arguments):a},g=function(o,i){if(i.indexOf("!")!==-1){var a=i.split("!");return g(o,a[0])+"!"+g(o,a[1])}if(i.charAt(0)=="."){var l=o.split("/").slice(0,-1).join("/");for(i=l+"/"+i;i.indexOf(".")!==-1&&d!=i;){var d=i;i=i.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}}return i},s=function(o,i){i=g(o,i);var a=r.modules[i];if(!a){if(a=r.payloads[i],typeof a=="function"){var l={},d={id:i,uri:"",exports:l,packaged:!0},c=function(h,v){return n(i,h,v)},m=a(c,l,d);l=m||d.exports,r.modules[i]=l,delete r.payloads[i]}a=r.modules[i]=l||a}return a};function u(o){var i=t;o&&(t[o]||(t[o]={}),i=t[o]),(!i.define||!i.define.packaged)&&(r.original=i.define,i.define=r,i.define.packaged=!0),(!i.require||!i.require.packaged)&&(p.original=i.require,i.require=p,i.require.packaged=!0)}u(e)})();ace.define("ace/lib/es6-shim",["require","exports","module"],function(e,t,r){function n(p,g,s){Object.defineProperty(p,g,{value:s,enumerable:!1,writable:!0,configurable:!0})}String.prototype.startsWith||n(String.prototype,"startsWith",function(p,g){return g=g||0,this.lastIndexOf(p,g)===g}),String.prototype.endsWith||n(String.prototype,"endsWith",function(p,g){var s=this;(g===void 0||g>s.length)&&(g=s.length),g-=p.length;var u=s.indexOf(p,g);return u!==-1&&u===g}),String.prototype.repeat||n(String.prototype,"repeat",function(p){for(var g="",s=this;p>0;)p&1&&(g+=s),(p>>=1)&&(s+=s);return g}),String.prototype.includes||n(String.prototype,"includes",function(p,g){return this.indexOf(p,g)!=-1}),Object.assign||(Object.assign=function(p){if(p==null)throw new TypeError("Cannot convert undefined or null to object");for(var g=Object(p),s=1;s<arguments.length;s++){var u=arguments[s];u!=null&&Object.keys(u).forEach(function(o){g[o]=u[o]})}return g}),Object.values||(Object.values=function(p){return Object.keys(p).map(function(g){return p[g]})}),Array.prototype.find||n(Array.prototype,"find",function(p){for(var g=this.length,s=arguments[1],u=0;u<g;u++){var o=this[u];if(p.call(s,o,u,this))return o}}),Array.prototype.findIndex||n(Array.prototype,"findIndex",function(p){for(var g=this.length,s=arguments[1],u=0;u<g;u++){var o=this[u];if(p.call(s,o,u,this))return u}}),Array.prototype.includes||n(Array.prototype,"includes",function(p,g){return this.indexOf(p,g)!=-1}),Array.prototype.fill||n(Array.prototype,"fill",function(p){for(var g=this,s=g.length>>>0,u=arguments[1],o=u>>0,i=o<0?Math.max(s+o,0):Math.min(o,s),a=arguments[2],l=a===void 0?s:a>>0,d=l<0?Math.max(s+l,0):Math.min(l,s);i<d;)g[i]=p,i++;return g}),Array.of||n(Array,"of",function(){return Array.prototype.slice.call(arguments)})});ace.define("ace/lib/fixoldbrowsers",["require","exports","module","ace/lib/es6-shim"],function(e,t,r){"use strict";e("./es6-shim")});ace.define("ace/lib/deep_copy",["require","exports","module"],function(e,t,r){t.deepCopy=function n(p){if(typeof p!="object"||!p)return p;var g;if(Array.isArray(p)){g=[];for(var s=0;s<p.length;s++)g[s]=n(p[s]);return g}if(Object.prototype.toString.call(p)!=="[object Object]")return p;g={};for(var s in p)g[s]=n(p[s]);return g}});ace.define("ace/lib/lang",["require","exports","module","ace/lib/deep_copy"],function(e,t,r){"use strict";t.last=function(g){return g[g.length-1]},t.stringReverse=function(g){return g.split("").reverse().join("")},t.stringRepeat=function(g,s){for(var u="";s>0;)s&1&&(u+=g),(s>>=1)&&(g+=g);return u};var n=/^\s\s*/,p=/\s\s*$/;t.stringTrimLeft=function(g){return g.replace(n,"")},t.stringTrimRight=function(g){return g.replace(p,"")},t.copyObject=function(g){var s={};for(var u in g)s[u]=g[u];return s},t.copyArray=function(g){for(var s=[],u=0,o=g.length;u<o;u++)g[u]&&typeof g[u]=="object"?s[u]=this.copyObject(g[u]):s[u]=g[u];return s},t.deepCopy=e("./deep_copy").deepCopy,t.arrayToMap=function(g){for(var s={},u=0;u<g.length;u++)s[g[u]]=1;return s},t.createMap=function(g){var s=Object.create(null);for(var u in g)s[u]=g[u];return s},t.arrayRemove=function(g,s){for(var u=0;u<=g.length;u++)s===g[u]&&g.splice(u,1)},t.escapeRegExp=function(g){return g.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},t.escapeHTML=function(g){return(""+g).replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")},t.getMatchOffsets=function(g,s){var u=[];return g.replace(s,function(o){u.push({offset:arguments[arguments.length-2],length:o.length})}),u},t.deferredCall=function(g){var s=null,u=function(){s=null,g()},o=function(i){return o.cancel(),s=setTimeout(u,i||0),o};return o.schedule=o,o.call=function(){return this.cancel(),g(),o},o.cancel=function(){return clearTimeout(s),s=null,o},o.isPending=function(){return s},o},t.delayedCall=function(g,s){var u=null,o=function(){u=null,g()},i=function(a){u==null&&(u=setTimeout(o,a||s))};return i.delay=function(a){u&&clearTimeout(u),u=setTimeout(o,a||s)},i.schedule=i,i.call=function(){this.cancel(),g()},i.cancel=function(){u&&clearTimeout(u),u=null},i.isPending=function(){return u},i},t.supportsLookbehind=function(){try{new RegExp("(?<=.)")}catch{return!1}return!0},t.skipEmptyMatch=function(g,s,u){return u&&g.codePointAt(s)>65535?2:1}});ace.define("ace/lib/useragent",["require","exports","module"],function(e,t,r){"use strict";t.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"},t.getOS=function(){return t.isMac?t.OS.MAC:t.isLinux?t.OS.LINUX:t.OS.WINDOWS};var n=typeof navigator=="object"?navigator:{},p=(/mac|win|linux/i.exec(n.platform)||["other"])[0].toLowerCase(),g=n.userAgent||"",s=n.appName||"";t.isWin=p=="win",t.isMac=p=="mac",t.isLinux=p=="linux",t.isIE=s=="Microsoft Internet Explorer"||s.indexOf("MSAppHost")>=0?parseFloat((g.match(/(?:MSIE |Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]):parseFloat((g.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]),t.isOldIE=t.isIE&&t.isIE<9,t.isGecko=t.isMozilla=g.match(/ Gecko\/\d+/),t.isOpera=typeof opera=="object"&&Object.prototype.toString.call(window.opera)=="[object Opera]",t.isWebKit=parseFloat(g.split("WebKit/")[1])||void 0,t.isChrome=parseFloat(g.split(" Chrome/")[1])||void 0,t.isSafari=parseFloat(g.split(" Safari/")[1])&&!t.isChrome||void 0,t.isEdge=parseFloat(g.split(" Edge/")[1])||void 0,t.isAIR=g.indexOf("AdobeAIR")>=0,t.isAndroid=g.indexOf("Android")>=0,t.isChromeOS=g.indexOf(" CrOS ")>=0,t.isIOS=/iPad|iPhone|iPod/.test(g)&&!window.MSStream,t.isIOS&&(t.isMac=!0),t.isMobile=t.isIOS||t.isAndroid});ace.define("ace/lib/dom",["require","exports","module","ace/lib/useragent"],function(e,t,r){"use strict";var n=e("./useragent"),p="http://www.w3.org/1999/xhtml";t.buildDom=function a(l,d,c){if(typeof l=="string"&&l){var m=document.createTextNode(l);return d&&d.appendChild(m),m}if(!Array.isArray(l))return l&&l.appendChild&&d&&d.appendChild(l),l;if(typeof l[0]!="string"||!l[0]){for(var h=[],v=0;v<l.length;v++){var k=a(l[v],d,c);k&&h.push(k)}return h}var x=document.createElement(l[0]),T=l[1],S=1;T&&typeof T=="object"&&!Array.isArray(T)&&(S=2);for(var v=S;v<l.length;v++)a(l[v],x,c);return S==2&&Object.keys(T).forEach(function(f){var L=T[f];f==="class"?x.className=Array.isArray(L)?L.join(" "):L:typeof L=="function"||f=="value"||f[0]=="$"?x[f]=L:f==="ref"?c&&(c[L]=x):f==="style"?typeof L=="string"&&(x.style.cssText=L):L!=null&&x.setAttribute(f,L)}),d&&d.appendChild(x),x},t.getDocumentHead=function(a){return a||(a=document),a.head||a.getElementsByTagName("head")[0]||a.documentElement},t.createElement=function(a,l){return document.createElementNS?document.createElementNS(l||p,a):document.createElement(a)},t.removeChildren=function(a){a.innerHTML=""},t.createTextNode=function(a,l){var d=l?l.ownerDocument:document;return d.createTextNode(a)},t.createFragment=function(a){var l=a?a.ownerDocument:document;return l.createDocumentFragment()},t.hasCssClass=function(a,l){var d=(a.className+"").split(/\s+/g);return d.indexOf(l)!==-1},t.addCssClass=function(a,l){t.hasCssClass(a,l)||(a.className+=" "+l)},t.removeCssClass=function(a,l){for(var d=a.className.split(/\s+/g);;){var c=d.indexOf(l);if(c==-1)break;d.splice(c,1)}a.className=d.join(" ")},t.toggleCssClass=function(a,l){for(var d=a.className.split(/\s+/g),c=!0;;){var m=d.indexOf(l);if(m==-1)break;c=!1,d.splice(m,1)}return c&&d.push(l),a.className=d.join(" "),c},t.setCssClass=function(a,l,d){d?t.addCssClass(a,l):t.removeCssClass(a,l)},t.hasCssString=function(a,l){var d=0,c;if(l=l||document,c=l.querySelectorAll("style")){for(;d<c.length;)if(c[d++].id===a)return!0}},t.removeElementById=function(a,l){l=l||document,l.getElementById(a)&&l.getElementById(a).remove()};var g,s=[];t.useStrictCSP=function(a){g=a,a==!1?u():s||(s=[])};function u(){var a=s;s=null,a&&a.forEach(function(l){o(l[0],l[1])})}function o(a,l,d){if(!(typeof document>"u")){if(s){if(d)u();else if(d===!1)return s.push([a,l])}if(!g){var c=d;!d||!d.getRootNode?c=document:(c=d.getRootNode(),(!c||c==d)&&(c=document));var m=c.ownerDocument||c;if(l&&t.hasCssString(l,c))return null;l&&(a+=`
/*# sourceURL=ace/css/`+l+" */");var h=t.createElement("style");h.appendChild(m.createTextNode(a)),l&&(h.id=l),c==m&&(c=t.getDocumentHead(m)),c.insertBefore(h,c.firstChild)}}}if(t.importCssString=o,t.importCssStylsheet=function(a,l){t.buildDom(["link",{rel:"stylesheet",href:a}],t.getDocumentHead(l))},t.scrollbarWidth=function(a){var l=t.createElement("ace_inner");l.style.width="100%",l.style.minWidth="0px",l.style.height="200px",l.style.display="block";var d=t.createElement("ace_outer"),c=d.style;c.position="absolute",c.left="-10000px",c.overflow="hidden",c.width="200px",c.minWidth="0px",c.height="150px",c.display="block",d.appendChild(l);var m=a&&a.documentElement||document&&document.documentElement;if(!m)return 0;m.appendChild(d);var h=l.offsetWidth;c.overflow="scroll";var v=l.offsetWidth;return h===v&&(v=d.clientWidth),m.removeChild(d),h-v},t.computedStyle=function(a,l){return window.getComputedStyle(a,"")||{}},t.setStyle=function(a,l,d){a[l]!==d&&(a[l]=d)},t.HAS_CSS_ANIMATION=!1,t.HAS_CSS_TRANSFORMS=!1,t.HI_DPI=n.isWin?typeof window<"u"&&window.devicePixelRatio>=1.5:!0,n.isChromeOS&&(t.HI_DPI=!1),typeof document<"u"){var i=document.createElement("div");t.HI_DPI&&i.style.transform!==void 0&&(t.HAS_CSS_TRANSFORMS=!0),!n.isEdge&&typeof i.style.animationName<"u"&&(t.HAS_CSS_ANIMATION=!0),i=null}t.HAS_CSS_TRANSFORMS?t.translate=function(a,l,d){a.style.transform="translate("+Math.round(l)+"px, "+Math.round(d)+"px)"}:t.translate=function(a,l,d){a.style.top=Math.round(d)+"px",a.style.left=Math.round(l)+"px"}});ace.define("ace/lib/net",["require","exports","module","ace/lib/dom"],function(e,t,r){"use strict";var n=e("./dom");t.get=function(p,g){var s=new XMLHttpRequest;s.open("GET",p,!0),s.onreadystatechange=function(){s.readyState===4&&g(s.responseText)},s.send(null)},t.loadScript=function(p,g){var s=n.getDocumentHead(),u=document.createElement("script");u.src=p,s.appendChild(u),u.onload=u.onreadystatechange=function(o,i){(i||!u.readyState||u.readyState=="loaded"||u.readyState=="complete")&&(u=u.onload=u.onreadystatechange=null,i||g())}},t.qualifyURL=function(p){var g=document.createElement("a");return g.href=p,g.href}});ace.define("ace/lib/oop",["require","exports","module"],function(e,t,r){"use strict";t.inherits=function(n,p){n.super_=p,n.prototype=Object.create(p.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}})},t.mixin=function(n,p){for(var g in p)n[g]=p[g];return n},t.implement=function(n,p){t.mixin(n,p)}});ace.define("ace/lib/event_emitter",["require","exports","module"],function(e,t,r){"use strict";var n={},p=function(){this.propagationStopped=!0},g=function(){this.defaultPrevented=!0};n._emit=n._dispatchEvent=function(s,u){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var o=this._eventRegistry[s]||[],i=this._defaultHandlers[s];if(!(!o.length&&!i)){(typeof u!="object"||!u)&&(u={}),u.type||(u.type=s),u.stopPropagation||(u.stopPropagation=p),u.preventDefault||(u.preventDefault=g),o=o.slice();for(var a=0;a<o.length&&(o[a](u,this),!u.propagationStopped);a++);if(i&&!u.defaultPrevented)return i(u,this)}},n._signal=function(s,u){var o=(this._eventRegistry||{})[s];if(o){o=o.slice();for(var i=0;i<o.length;i++)o[i](u,this)}},n.once=function(s,u){var o=this;if(this.on(s,function i(){o.off(s,i),u.apply(null,arguments)}),!u)return new Promise(function(i){u=i})},n.setDefaultHandler=function(s,u){var o=this._defaultHandlers;if(o||(o=this._defaultHandlers={_disabled_:{}}),o[s]){var i=o[s],a=o._disabled_[s];a||(o._disabled_[s]=a=[]),a.push(i);var l=a.indexOf(u);l!=-1&&a.splice(l,1)}o[s]=u},n.removeDefaultHandler=function(s,u){var o=this._defaultHandlers;if(o){var i=o._disabled_[s];if(o[s]==u)i&&this.setDefaultHandler(s,i.pop());else if(i){var a=i.indexOf(u);a!=-1&&i.splice(a,1)}}},n.on=n.addEventListener=function(s,u,o){this._eventRegistry=this._eventRegistry||{};var i=this._eventRegistry[s];return i||(i=this._eventRegistry[s]=[]),i.indexOf(u)==-1&&i[o?"unshift":"push"](u),u},n.off=n.removeListener=n.removeEventListener=function(s,u){this._eventRegistry=this._eventRegistry||{};var o=this._eventRegistry[s];if(o){var i=o.indexOf(u);i!==-1&&o.splice(i,1)}},n.removeAllListeners=function(s){s||(this._eventRegistry=this._defaultHandlers=void 0),this._eventRegistry&&(this._eventRegistry[s]=void 0),this._defaultHandlers&&(this._defaultHandlers[s]=void 0)},t.EventEmitter=n});ace.define("ace/lib/report_error",["require","exports","module"],function(e,t,r){t.reportError=function(p,g){var s=new Error(p);s.data=g,typeof console=="object"&&console.error&&console.error(s),setTimeout(function(){throw s})}});ace.define("ace/lib/default_english_messages",["require","exports","module"],function(e,t,r){var n={"autocomplete.popup.aria-roledescription":"Autocomplete suggestions","autocomplete.popup.aria-label":"Autocomplete suggestions","autocomplete.popup.item.aria-roledescription":"item","autocomplete.loading":"Loading...","editor.scroller.aria-roledescription":"editor","editor.scroller.aria-label":"Editor content, press Enter to start editing, press Escape to exit","editor.gutter.aria-roledescription":"editor","editor.gutter.aria-label":"Editor gutter, press Enter to interact with controls using arrow keys, press Escape to exit","error-marker.good-state":"Looks good!","prompt.recently-used":"Recently used","prompt.other-commands":"Other commands","prompt.no-matching-commands":"No matching commands","search-box.find.placeholder":"Search for","search-box.find-all.text":"All","search-box.replace.placeholder":"Replace with","search-box.replace-next.text":"Replace","search-box.replace-all.text":"All","search-box.toggle-replace.title":"Toggle Replace mode","search-box.toggle-regexp.title":"RegExp Search","search-box.toggle-case.title":"CaseSensitive Search","search-box.toggle-whole-word.title":"Whole Word Search","search-box.toggle-in-selection.title":"Search In Selection","search-box.search-counter":"$0 of $1","text-input.aria-roledescription":"editor","text-input.aria-label":"Cursor at row $0","gutter.code-folding.range.aria-label":"Toggle code folding, rows $0 through $1","gutter.code-folding.closed.aria-label":"Toggle code folding, rows $0 through $1","gutter.code-folding.open.aria-label":"Toggle code folding, row $0","gutter.code-folding.closed.title":"Unfold code","gutter.code-folding.open.title":"Fold code","gutter.annotation.aria-label.error":"Error, read annotations row $0","gutter.annotation.aria-label.warning":"Warning, read annotations row $0","gutter.annotation.aria-label.info":"Info, read annotations row $0","inline-fold.closed.title":"Unfold code","gutter-tooltip.aria-label.error.singular":"error","gutter-tooltip.aria-label.error.plural":"errors","gutter-tooltip.aria-label.warning.singular":"warning","gutter-tooltip.aria-label.warning.plural":"warnings","gutter-tooltip.aria-label.info.singular":"information message","gutter-tooltip.aria-label.info.plural":"information messages"};t.defaultEnglishMessages=n});ace.define("ace/lib/app_config",["require","exports","module","ace/lib/oop","ace/lib/event_emitter","ace/lib/report_error","ace/lib/default_english_messages"],function(e,t,r){"no use strict";var n=e("./oop"),p=e("./event_emitter").EventEmitter,g=e("./report_error").reportError,s=e("./default_english_messages").defaultEnglishMessages,u={setOptions:function(d){Object.keys(d).forEach(function(c){this.setOption(c,d[c])},this)},getOptions:function(d){var c={};if(d)Array.isArray(d)||(c=d,d=Object.keys(c));else{var m=this.$options;d=Object.keys(m).filter(function(h){return!m[h].hidden})}return d.forEach(function(h){c[h]=this.getOption(h)},this),c},setOption:function(d,c){if(this["$"+d]!==c){var m=this.$options[d];if(!m)return o('misspelled option "'+d+'"');if(m.forwardTo)return this[m.forwardTo]&&this[m.forwardTo].setOption(d,c);m.handlesSet||(this["$"+d]=c),m&&m.set&&m.set.call(this,c)}},getOption:function(d){var c=this.$options[d];return c?c.forwardTo?this[c.forwardTo]&&this[c.forwardTo].getOption(d):c&&c.get?c.get.call(this):this["$"+d]:o('misspelled option "'+d+'"')}};function o(d){typeof console<"u"&&console.warn&&console.warn.apply(console,arguments)}var i,a,l=function(){function d(){this.$defaultOptions={},i=s,a="dollarSigns"}return d.prototype.defineOptions=function(c,m,h){return c.$options||(this.$defaultOptions[m]=c.$options={}),Object.keys(h).forEach(function(v){var k=h[v];typeof k=="string"&&(k={forwardTo:k}),k.name||(k.name=v),c.$options[k.name]=k,"initialValue"in k&&(c["$"+k.name]=k.initialValue)}),n.implement(c,u),this},d.prototype.resetOptions=function(c){Object.keys(c.$options).forEach(function(m){var h=c.$options[m];"value"in h&&c.setOption(m,h.value)})},d.prototype.setDefaultValue=function(c,m,h){if(!c){for(c in this.$defaultOptions)if(this.$defaultOptions[c][m])break;if(!this.$defaultOptions[c][m])return!1}var v=this.$defaultOptions[c]||(this.$defaultOptions[c]={});v[m]&&(v.forwardTo?this.setDefaultValue(v.forwardTo,m,h):v[m].value=h)},d.prototype.setDefaultValues=function(c,m){Object.keys(m).forEach(function(h){this.setDefaultValue(c,h,m[h])},this)},d.prototype.setMessages=function(c,m){i=c,m&&m.placeholders&&(a=m.placeholders)},d.prototype.nls=function(c,m,h){i[c]||(o("No message found for the key '"+c+"' in the provided messages, trying to find a translation for the default string '"+m+"'."),i[m]||o("No message found for the default string '"+m+"' in the provided messages. Falling back to the default English message."));var v=i[c]||i[m]||m;return h&&(a==="dollarSigns"&&(v=v.replace(/\$(\$|[\d]+)/g,function(k,x){return x=="$"?"$":h[x]})),a==="curlyBrackets"&&(v=v.replace(/\{([^\}]+)\}/g,function(k,x){return h[x]}))),v},d}();l.prototype.warn=o,l.prototype.reportError=g,n.implement(l.prototype,p),t.AppConfig=l});ace.define("ace/theme/textmate-css",["require","exports","module"],function(e,t,r){r.exports=`.ace-tm .ace_gutter {
  background: #f0f0f0;
  color: #333;
}

.ace-tm .ace_print-margin {
  width: 1px;
  background: #e8e8e8;
}

.ace-tm .ace_fold {
    background-color: #6B72E6;
}

.ace-tm {
  background-color: #FFFFFF;
  color: black;
}

.ace-tm .ace_cursor {
  color: black;
}
        
.ace-tm .ace_invisible {
  color: rgb(191, 191, 191);
}

.ace-tm .ace_storage,
.ace-tm .ace_keyword {
  color: blue;
}

.ace-tm .ace_constant {
  color: rgb(197, 6, 11);
}

.ace-tm .ace_constant.ace_buildin {
  color: rgb(88, 72, 246);
}

.ace-tm .ace_constant.ace_language {
  color: rgb(88, 92, 246);
}

.ace-tm .ace_constant.ace_library {
  color: rgb(6, 150, 14);
}

.ace-tm .ace_invalid {
  background-color: rgba(255, 0, 0, 0.1);
  color: red;
}

.ace-tm .ace_support.ace_function {
  color: rgb(60, 76, 114);
}

.ace-tm .ace_support.ace_constant {
  color: rgb(6, 150, 14);
}

.ace-tm .ace_support.ace_type,
.ace-tm .ace_support.ace_class {
  color: rgb(109, 121, 222);
}

.ace-tm .ace_keyword.ace_operator {
  color: rgb(104, 118, 135);
}

.ace-tm .ace_string {
  color: rgb(3, 106, 7);
}

.ace-tm .ace_comment {
  color: rgb(76, 136, 107);
}

.ace-tm .ace_comment.ace_doc {
  color: rgb(0, 102, 255);
}

.ace-tm .ace_comment.ace_doc.ace_tag {
  color: rgb(128, 159, 191);
}

.ace-tm .ace_constant.ace_numeric {
  color: rgb(0, 0, 205);
}

.ace-tm .ace_variable {
  color: rgb(49, 132, 149);
}

.ace-tm .ace_xml-pe {
  color: rgb(104, 104, 91);
}

.ace-tm .ace_entity.ace_name.ace_function {
  color: #0000A2;
}


.ace-tm .ace_heading {
  color: rgb(12, 7, 255);
}

.ace-tm .ace_list {
  color:rgb(185, 6, 144);
}

.ace-tm .ace_meta.ace_tag {
  color:rgb(0, 22, 142);
}

.ace-tm .ace_string.ace_regex {
  color: rgb(255, 0, 0)
}

.ace-tm .ace_marker-layer .ace_selection {
  background: rgb(181, 213, 255);
}
.ace-tm.ace_multiselect .ace_selection.ace_start {
  box-shadow: 0 0 3px 0px white;
}
.ace-tm .ace_marker-layer .ace_step {
  background: rgb(252, 255, 0);
}

.ace-tm .ace_marker-layer .ace_stack {
  background: rgb(164, 229, 101);
}

.ace-tm .ace_marker-layer .ace_bracket {
  margin: -1px 0 0 -1px;
  border: 1px solid rgb(192, 192, 192);
}

.ace-tm .ace_marker-layer .ace_active-line {
  background: rgba(0, 0, 0, 0.07);
}

.ace-tm .ace_gutter-active-line {
    background-color : #dcdcdc;
}

.ace-tm .ace_marker-layer .ace_selected-word {
  background: rgb(250, 250, 255);
  border: 1px solid rgb(200, 200, 250);
}

.ace-tm .ace_indent-guide {
  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;
}

.ace-tm .ace_indent-guide-active {
  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAZSURBVHjaYvj///9/hivKyv8BAAAA//8DACLqBhbvk+/eAAAAAElFTkSuQmCC") right repeat-y;
}
`});ace.define("ace/theme/textmate",["require","exports","module","ace/theme/textmate-css","ace/lib/dom"],function(e,t,r){"use strict";t.isDark=!1,t.cssClass="ace-tm",t.cssText=e("./textmate-css"),t.$id="ace/theme/textmate";var n=e("../lib/dom");n.importCssString(t.cssText,t.cssClass,!1)});ace.define("ace/config",["require","exports","module","ace/lib/lang","ace/lib/net","ace/lib/dom","ace/lib/app_config","ace/theme/textmate"],function(e,t,r){"no use strict";var n=e("./lib/lang"),p=e("./lib/net"),g=e("./lib/dom"),s=e("./lib/app_config").AppConfig;r.exports=t=new s;var u={packaged:!1,workerPath:null,modePath:null,themePath:null,basePath:"",suffix:".js",$moduleUrls:{},loadWorkerFromBlob:!0,sharedPopups:!1,useStrictCSP:null};t.get=function(l){if(!u.hasOwnProperty(l))throw new Error("Unknown config key: "+l);return u[l]},t.set=function(l,d){if(u.hasOwnProperty(l))u[l]=d;else if(this.setDefaultValue("",l,d)==!1)throw new Error("Unknown config key: "+l);l=="useStrictCSP"&&g.useStrictCSP(d)},t.all=function(){return n.copyObject(u)},t.$modes={},t.moduleUrl=function(l,d){if(u.$moduleUrls[l])return u.$moduleUrls[l];var c=l.split("/");d=d||c[c.length-2]||"";var m=d=="snippets"?"/":"-",h=c[c.length-1];if(d=="worker"&&m=="-"){var v=new RegExp("^"+d+"[\\-_]|[\\-_]"+d+"$","g");h=h.replace(v,"")}(!h||h==d)&&c.length>1&&(h=c[c.length-2]);var k=u[d+"Path"];return k==null?k=u.basePath:m=="/"&&(d=m=""),k&&k.slice(-1)!="/"&&(k+="/"),k+d+m+h+this.get("suffix")},t.setModuleUrl=function(l,d){return u.$moduleUrls[l]=d};var o=function(l,d){if(l==="ace/theme/textmate"||l==="./theme/textmate")return d(null,e("./theme/textmate"));if(i)return i(l,d);console.error("loader is not configured")},i;t.setLoader=function(l){i=l},t.dynamicModules=Object.create(null),t.$loading={},t.$loaded={},t.loadModule=function(l,d){var c;if(Array.isArray(l))var m=l[0],h=l[1];else if(typeof l=="string")var h=l;var v=function(k){if(k&&!t.$loading[h])return d&&d(k);if(t.$loading[h]||(t.$loading[h]=[]),t.$loading[h].push(d),!(t.$loading[h].length>1)){var x=function(){o(h,function(T,S){S&&(t.$loaded[h]=S),t._emit("load.module",{name:h,module:S});var f=t.$loading[h];t.$loading[h]=null,f.forEach(function(L){L&&L(S)})})};if(!t.get("packaged"))return x();p.loadScript(t.moduleUrl(h,m),x),a()}};if(t.dynamicModules[h])t.dynamicModules[h]().then(function(k){k.default?v(k.default):v(k)});else{try{c=this.$require(h)}catch{}v(c||t.$loaded[h])}},t.$require=function(l){if(typeof r.require=="function"){var d="require";return r[d](l)}},t.setModuleLoader=function(l,d){t.dynamicModules[l]=d};var a=function(){!u.basePath&&!u.workerPath&&!u.modePath&&!u.themePath&&!Object.keys(u.$moduleUrls).length&&(console.error("Unable to infer path to ace from script src,","use ace.config.set('basePath', 'path') to enable dynamic loading of modes and themes","or with webpack use ace/webpack-resolver"),a=function(){})};t.version="1.35.4"});ace.define("ace/loader_build",["require","exports","module","ace/lib/fixoldbrowsers","ace/config"],function(e,t,r){"use strict";e("./lib/fixoldbrowsers");var n=e("./config");n.setLoader(function(u,o){e([u],function(i){o(null,i)})});var p=function(){return this||typeof window<"u"&&window}();r.exports=function(u){n.init=g,n.$require=e,u.require=e,typeof define=="function"&&(u.define=define)},g(!0);function g(u){if(!(!p||!p.document)){n.set("packaged",u||e.packaged||r.packaged||p.define&&define.packaged);var o={},i="",a=document.currentScript||document._currentScript,l=a&&a.ownerDocument||document;a&&a.src&&(i=a.src.split(/[?#]/)[0].split("/").slice(0,-1).join("/")||"");for(var d=l.getElementsByTagName("script"),c=0;c<d.length;c++){var m=d[c],h=m.src||m.getAttribute("src");if(h){for(var v=m.attributes,k=0,x=v.length;k<x;k++){var T=v[k];T.name.indexOf("data-ace-")===0&&(o[s(T.name.replace(/^data-ace-/,""))]=T.value)}var S=h.match(/^(.*)\/ace([\-.]\w+)?\.js(\?|$)/);S&&(i=S[1])}}i&&(o.base=o.base||i,o.packaged=!0),o.basePath=o.base,o.workerPath=o.workerPath||o.base,o.modePath=o.modePath||o.base,o.themePath=o.themePath||o.base,delete o.base;for(var f in o)typeof o[f]<"u"&&n.set(f,o[f])}}function s(u){return u.replace(/-(.)/g,function(o,i){return i.toUpperCase()})}});ace.define("ace/range",["require","exports","module"],function(e,t,r){"use strict";var n=function(){function p(g,s,u,o){this.start={row:g,column:s},this.end={row:u,column:o}}return p.prototype.isEqual=function(g){return this.start.row===g.start.row&&this.end.row===g.end.row&&this.start.column===g.start.column&&this.end.column===g.end.column},p.prototype.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},p.prototype.contains=function(g,s){return this.compare(g,s)==0},p.prototype.compareRange=function(g){var s,u=g.end,o=g.start;return s=this.compare(u.row,u.column),s==1?(s=this.compare(o.row,o.column),s==1?2:s==0?1:0):s==-1?-2:(s=this.compare(o.row,o.column),s==-1?-1:s==1?42:0)},p.prototype.comparePoint=function(g){return this.compare(g.row,g.column)},p.prototype.containsRange=function(g){return this.comparePoint(g.start)==0&&this.comparePoint(g.end)==0},p.prototype.intersects=function(g){var s=this.compareRange(g);return s==-1||s==0||s==1},p.prototype.isEnd=function(g,s){return this.end.row==g&&this.end.column==s},p.prototype.isStart=function(g,s){return this.start.row==g&&this.start.column==s},p.prototype.setStart=function(g,s){typeof g=="object"?(this.start.column=g.column,this.start.row=g.row):(this.start.row=g,this.start.column=s)},p.prototype.setEnd=function(g,s){typeof g=="object"?(this.end.column=g.column,this.end.row=g.row):(this.end.row=g,this.end.column=s)},p.prototype.inside=function(g,s){return this.compare(g,s)==0?!(this.isEnd(g,s)||this.isStart(g,s)):!1},p.prototype.insideStart=function(g,s){return this.compare(g,s)==0?!this.isEnd(g,s):!1},p.prototype.insideEnd=function(g,s){return this.compare(g,s)==0?!this.isStart(g,s):!1},p.prototype.compare=function(g,s){return!this.isMultiLine()&&g===this.start.row?s<this.start.column?-1:s>this.end.column?1:0:g<this.start.row?-1:g>this.end.row?1:this.start.row===g?s>=this.start.column?0:-1:this.end.row===g?s<=this.end.column?0:1:0},p.prototype.compareStart=function(g,s){return this.start.row==g&&this.start.column==s?-1:this.compare(g,s)},p.prototype.compareEnd=function(g,s){return this.end.row==g&&this.end.column==s?1:this.compare(g,s)},p.prototype.compareInside=function(g,s){return this.end.row==g&&this.end.column==s?1:this.start.row==g&&this.start.column==s?-1:this.compare(g,s)},p.prototype.clipRows=function(g,s){if(this.end.row>s)var u={row:s+1,column:0};else if(this.end.row<g)var u={row:g,column:0};if(this.start.row>s)var o={row:s+1,column:0};else if(this.start.row<g)var o={row:g,column:0};return p.fromPoints(o||this.start,u||this.end)},p.prototype.extend=function(g,s){var u=this.compare(g,s);if(u==0)return this;if(u==-1)var o={row:g,column:s};else var i={row:g,column:s};return p.fromPoints(o||this.start,i||this.end)},p.prototype.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},p.prototype.isMultiLine=function(){return this.start.row!==this.end.row},p.prototype.clone=function(){return p.fromPoints(this.start,this.end)},p.prototype.collapseRows=function(){return this.end.column==0?new p(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new p(this.start.row,0,this.end.row,0)},p.prototype.toScreenRange=function(g){var s=g.documentToScreenPosition(this.start),u=g.documentToScreenPosition(this.end);return new p(s.row,s.column,u.row,u.column)},p.prototype.moveBy=function(g,s){this.start.row+=g,this.start.column+=s,this.end.row+=g,this.end.column+=s},p}();n.fromPoints=function(p,g){return new n(p.row,p.column,g.row,g.column)},n.comparePoints=function(p,g){return p.row-g.row||p.column-g.column},t.Range=n});ace.define("ace/lib/keys",["require","exports","module","ace/lib/oop"],function(e,t,r){"use strict";for(var n=e("./oop"),p={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta",91:"MetaLeft",92:"MetaRight",93:"ContextMenu"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,super:8,meta:8,command:8,cmd:8,control:1},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete","-13":"NumpadEnter",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",59:";",61:"=",107:"+",109:"-",110:".",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",111:"/",106:"*"}},g={Command:224,Backspace:8,Tab:9,Return:13,Enter:13,Pause:19,Escape:27,PageUp:33,PageDown:34,End:35,Home:36,Insert:45,Delete:46,ArrowLeft:37,ArrowUp:38,ArrowRight:39,ArrowDown:40,Backquote:192,Minus:189,Equal:187,BracketLeft:219,Backslash:220,BracketRight:221,Semicolon:186,Quote:222,Comma:188,Period:190,Slash:191,Space:32,NumpadAdd:107,NumpadDecimal:110,NumpadSubtract:109,NumpadDivide:111,NumpadMultiply:106},s=0;s<10;s++)g["Digit"+s]=48+s,g["Numpad"+s]=96+s,p.PRINTABLE_KEYS[48+s]=""+s,p.FUNCTION_KEYS[96+s]="Numpad"+s;for(var s=65;s<91;s++){var u=String.fromCharCode(s+32);g["Key"+u.toUpperCase()]=s,p.PRINTABLE_KEYS[s]=u}for(var s=1;s<13;s++)g["F"+s]=111+s,p.FUNCTION_KEYS[111+s]="F"+s;var o={Shift:16,Control:17,Alt:18,Meta:224};for(var i in o)g[i]=g[i+"Left"]=g[i+"Right"]=o[i];t.$codeToKeyCode=g,p.PRINTABLE_KEYS[173]="-";for(var a in p.FUNCTION_KEYS){var l=p.FUNCTION_KEYS[a].toLowerCase();p[l]=parseInt(a,10)}for(var a in p.PRINTABLE_KEYS){var l=p.PRINTABLE_KEYS[a].toLowerCase();p[l]=parseInt(a,10)}n.mixin(p,p.MODIFIER_KEYS),n.mixin(p,p.PRINTABLE_KEYS),n.mixin(p,p.FUNCTION_KEYS),p.enter=p.return,p.escape=p.esc,p.del=p.delete,function(){for(var d=["cmd","ctrl","alt","shift"],c=Math.pow(2,d.length);c--;)p.KEY_MODS[c]=d.filter(function(m){return c&p.KEY_MODS[m]}).join("-")+"-"}(),p.KEY_MODS[0]="",p.KEY_MODS[-1]="input-",n.mixin(t,p),t.default=t,t.keyCodeToString=function(d){var c=p[d];return typeof c!="string"&&(c=String.fromCharCode(d)),c.toLowerCase()}});ace.define("ace/lib/event",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(e,t,r){"use strict";var n=e("./keys"),p=e("./useragent"),g=null,s=0,u;function o(){u=!1;try{document.createComment("").addEventListener("test",function(){},{get passive(){return u={passive:!1},!0}})}catch{}}function i(){return u==null&&o(),u}function a(k,x,T){this.elem=k,this.type=x,this.callback=T}a.prototype.destroy=function(){d(this.elem,this.type,this.callback),this.elem=this.type=this.callback=void 0};var l=t.addListener=function(k,x,T,S){k.addEventListener(x,T,i()),S&&S.$toDestroy.push(new a(k,x,T))},d=t.removeListener=function(k,x,T){k.removeEventListener(x,T,i())};t.stopEvent=function(k){return t.stopPropagation(k),t.preventDefault(k),!1},t.stopPropagation=function(k){k.stopPropagation&&k.stopPropagation()},t.preventDefault=function(k){k.preventDefault&&k.preventDefault()},t.getButton=function(k){return k.type=="dblclick"?0:k.type=="contextmenu"||p.isMac&&k.ctrlKey&&!k.altKey&&!k.shiftKey?2:k.button},t.capture=function(k,x,T){var S=k&&k.ownerDocument||document;function f(L){x&&x(L),T&&T(L),d(S,"mousemove",x),d(S,"mouseup",f),d(S,"dragstart",f)}return l(S,"mousemove",x),l(S,"mouseup",f),l(S,"dragstart",f),f},t.addMouseWheelListener=function(k,x,T){l(k,"wheel",function(S){var f=.15,L=S.deltaX||0,$=S.deltaY||0;switch(S.deltaMode){case S.DOM_DELTA_PIXEL:S.wheelX=L*f,S.wheelY=$*f;break;case S.DOM_DELTA_LINE:var A=15;S.wheelX=L*A,S.wheelY=$*A;break;case S.DOM_DELTA_PAGE:var C=150;S.wheelX=L*C,S.wheelY=$*C;break}x(S)},T)},t.addMultiMouseDownListener=function(k,x,T,S,f){var L=0,$,A,C,w={2:"dblclick",3:"tripleclick",4:"quadclick"};function y(b){if(t.getButton(b)!==0?L=0:b.detail>1?(L++,L>4&&(L=1)):L=1,p.isIE){var E=Math.abs(b.clientX-$)>5||Math.abs(b.clientY-A)>5;(!C||E)&&(L=1),C&&clearTimeout(C),C=setTimeout(function(){C=null},x[L-1]||600),L==1&&($=b.clientX,A=b.clientY)}if(b._clicks=L,T[S]("mousedown",b),L>4)L=0;else if(L>1)return T[S](w[L],b)}Array.isArray(k)||(k=[k]),k.forEach(function(b){l(b,"mousedown",y,f)})};function c(k){return 0|(k.ctrlKey?1:0)|(k.altKey?2:0)|(k.shiftKey?4:0)|(k.metaKey?8:0)}t.getModifierString=function(k){return n.KEY_MODS[c(k)]};function m(k,x,T){var S=c(x);if(!T&&x.code&&(T=n.$codeToKeyCode[x.code]||T),!p.isMac&&g){if(x.getModifierState&&(x.getModifierState("OS")||x.getModifierState("Win"))&&(S|=8),g.altGr)if((3&S)!=3)g.altGr=0;else return;if(T===18||T===17){var f=x.location;if(T===17&&f===1)g[T]==1&&(s=x.timeStamp);else if(T===18&&S===3&&f===2){var L=x.timeStamp-s;L<50&&(g.altGr=!0)}}}if(T in n.MODIFIER_KEYS&&(T=-1),!(!S&&T===13&&x.location===3&&(k(x,S,-T),x.defaultPrevented))){if(p.isChromeOS&&S&8){if(k(x,S,T),x.defaultPrevented)return;S&=-9}return!S&&!(T in n.FUNCTION_KEYS)&&!(T in n.PRINTABLE_KEYS)?!1:k(x,S,T)}}t.addCommandKeyListener=function(k,x,T){var S=null;l(k,"keydown",function(f){g[f.keyCode]=(g[f.keyCode]||0)+1;var L=m(x,f,f.keyCode);return S=f.defaultPrevented,L},T),l(k,"keypress",function(f){S&&(f.ctrlKey||f.altKey||f.shiftKey||f.metaKey)&&(t.stopEvent(f),S=null)},T),l(k,"keyup",function(f){g[f.keyCode]=null},T),g||(h(),l(window,"focus",h))};function h(){g=Object.create(null)}if(typeof window=="object"&&window.postMessage&&!p.isOldIE){var v=1;t.nextTick=function(k,x){x=x||window;var T="zero-timeout-message-"+v++,S=function(f){f.data==T&&(t.stopPropagation(f),d(x,"message",S),k())};l(x,"message",S),x.postMessage(T,"*")}}t.$idleBlocked=!1,t.onIdle=function(k,x){return setTimeout(function T(){t.$idleBlocked?setTimeout(T,100):k()},x)},t.$idleBlockId=null,t.blockIdle=function(k){t.$idleBlockId&&clearTimeout(t.$idleBlockId),t.$idleBlocked=!0,t.$idleBlockId=setTimeout(function(){t.$idleBlocked=!1},k||100)},t.nextFrame=typeof window=="object"&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame),t.nextFrame?t.nextFrame=t.nextFrame.bind(window):t.nextFrame=function(k){setTimeout(k,17)}});ace.define("ace/clipboard",["require","exports","module"],function(e,t,r){"use strict";var n;r.exports={lineMode:!1,pasteCancelled:function(){return n&&n>Date.now()-50?!0:n=!1},cancel:function(){n=Date.now()}}});ace.define("ace/keyboard/textinput",["require","exports","module","ace/lib/event","ace/config","ace/lib/useragent","ace/lib/dom","ace/lib/lang","ace/clipboard","ace/lib/keys"],function(e,t,r){"use strict";var n=e("../lib/event"),p=e("../config").nls,g=e("../lib/useragent"),s=e("../lib/dom"),u=e("../lib/lang"),o=e("../clipboard"),i=g.isChrome<18,a=g.isIE,l=g.isChrome>63,d=400,c=e("../lib/keys"),m=c.KEY_MODS,h=g.isIOS,v=h?/\s/:/\n/,k=g.isMobile,x;x=function(T,S){var f=s.createElement("textarea");f.className="ace_text-input",f.setAttribute("wrap","off"),f.setAttribute("autocorrect","off"),f.setAttribute("autocapitalize","off"),f.setAttribute("spellcheck","false"),f.style.opacity="0",T.insertBefore(f,T.firstChild);var L=!1,$=!1,A=!1,C=!1,w="";k||(f.style.fontSize="1px");var y=!1,b=!1,E="",_=0,R=0,M=0,I=Number.MAX_SAFE_INTEGER,P=Number.MIN_SAFE_INTEGER,O=0;try{var F=document.activeElement===f}catch{}this.setNumberOfExtraLines=function(H){if(I=Number.MAX_SAFE_INTEGER,P=Number.MIN_SAFE_INTEGER,H<0){O=0;return}O=H},this.setAriaOptions=function(H){if(H.activeDescendant?(f.setAttribute("aria-haspopup","true"),f.setAttribute("aria-autocomplete",H.inline?"both":"list"),f.setAttribute("aria-activedescendant",H.activeDescendant)):(f.setAttribute("aria-haspopup","false"),f.setAttribute("aria-autocomplete","both"),f.removeAttribute("aria-activedescendant")),H.role&&f.setAttribute("role",H.role),H.setLabel){f.setAttribute("aria-roledescription",p("text-input.aria-roledescription","editor"));var V="";if(S.$textInputAriaLabel&&(V+="".concat(S.$textInputAriaLabel,", ")),S.session){var tt=S.session.selection.cursor.row;V+=p("text-input.aria-label","Cursor at row $0",[tt+1])}f.setAttribute("aria-label",V)}},this.setAriaOptions({role:"textbox"}),n.addListener(f,"blur",function(H){b||(S.onBlur(H),F=!1)},S),n.addListener(f,"focus",function(H){if(!b){if(F=!0,g.isEdge)try{if(!document.hasFocus())return}catch{}S.onFocus(H),g.isEdge?setTimeout(z):z()}},S),this.$focusScroll=!1,this.focus=function(){if(this.setAriaOptions({setLabel:S.renderer.enableKeyboardAccessibility}),w||l||this.$focusScroll=="browser")return f.focus({preventScroll:!0});var H=f.style.top;f.style.position="fixed",f.style.top="0px";try{var V=f.getBoundingClientRect().top!=0}catch{return}var tt=[];if(V)for(var gt=f.parentElement;gt&&gt.nodeType==1;)tt.push(gt),gt.setAttribute("ace_nocontext","true"),!gt.parentElement&&gt.getRootNode?gt=gt.getRootNode().host:gt=gt.parentElement;f.focus({preventScroll:!0}),V&&tt.forEach(function(_t){_t.removeAttribute("ace_nocontext")}),setTimeout(function(){f.style.position="",f.style.top=="0px"&&(f.style.top=H)},0)},this.blur=function(){f.blur()},this.isFocused=function(){return F},S.on("beforeEndOperation",function(){var H=S.curOp,V=H&&H.command&&H.command.name;if(V!="insertstring"){var tt=V&&(H.docChanged||H.selectionChanged);A&&tt&&(E=f.value="",it()),z()}});var D=function(H,V){for(var tt=V,gt=1;gt<=H-I&&gt<2*O+1;gt++)tt+=S.session.getLine(H-gt).length+1;return tt},z=h?function(H){if(!(!F||L&&!H||C)){H||(H="");var V=`
 ab`+H+`cde fg
`;V!=f.value&&(f.value=E=V);var tt=4,gt=4+(H.length||(S.selection.isEmpty()?0:1));(_!=tt||R!=gt)&&f.setSelectionRange(tt,gt),_=tt,R=gt}}:function(){if(!(A||C)&&!(!F&&!X)){A=!0;var H=0,V=0,tt="";if(S.session){var gt=S.selection,_t=gt.getRange(),$t=gt.cursor.row;$t===P+1?(I=P+1,P=I+2*O):$t===I-1?(P=I-1,I=P-2*O):($t<I-1||$t>P+1)&&(I=$t>O?$t-O:0,P=$t>O?$t+O:2*O);for(var Tt=[],Pt=I;Pt<=P;Pt++)Tt.push(S.session.getLine(Pt));if(tt=Tt.join(`
`),H=D(_t.start.row,_t.start.column),V=D(_t.end.row,_t.end.column),_t.start.row<I){var Ft=S.session.getLine(I-1);H=_t.start.row<I-1?0:H,V+=Ft.length+1,tt=Ft+`
`+tt}else if(_t.end.row>P){var Rt=S.session.getLine(P+1);V=_t.end.row>P+1?Rt.length:_t.end.column,V+=tt.length+1,tt=tt+`
`+Rt}else k&&$t>0&&(tt=`
`+tt,V+=1,H+=1);tt.length>d&&(H<d&&V<d?tt=tt.slice(0,d):(tt=`
`,H==V?H=V=0:(H=0,V=1)));var Bt=tt+`

`;Bt!=E&&(f.value=E=Bt,_=R=Bt.length)}if(X&&(_=f.selectionStart,R=f.selectionEnd),R!=V||_!=H||f.selectionEnd!=R)try{f.setSelectionRange(H,V),_=H,R=V}catch{}A=!1}};this.resetSelection=z,F&&S.onFocus();var N=function(H){return H.selectionStart===0&&H.selectionEnd>=E.length&&H.value===E&&E&&H.selectionEnd!==R},W=function(H){A||(L?L=!1:N(f)?(S.selectAll(),z()):k&&f.selectionStart!=_&&z())},j=null;this.setInputHandler=function(H){j=H},this.getInputHandler=function(){return j};var X=!1,G=function(H,V){if(X&&(X=!1),$)return z(),H&&S.onPaste(H),$=!1,"";for(var tt=f.selectionStart,gt=f.selectionEnd,_t=_,$t=E.length-R,Tt=H,Pt=H.length-tt,Ft=H.length-gt,Rt=0;_t>0&&E[Rt]==H[Rt];)Rt++,_t--;for(Tt=Tt.slice(Rt),Rt=1;$t>0&&E.length-Rt>_-1&&E[E.length-Rt]==H[H.length-Rt];)Rt++,$t--;Pt-=Rt-1,Ft-=Rt-1;var Bt=Tt.length-Rt+1;if(Bt<0&&(_t=-Bt,Bt=0),Tt=Tt.slice(0,Bt),!V&&!Tt&&!Pt&&!_t&&!$t&&!Ft)return"";C=!0;var Ce=!1;return g.isAndroid&&Tt==". "&&(Tt="  ",Ce=!0),Tt&&!_t&&!$t&&!Pt&&!Ft||y?S.onTextInput(Tt):S.onTextInput(Tt,{extendLeft:_t,extendRight:$t,restoreStart:Pt,restoreEnd:Ft}),C=!1,E=H,_=tt,R=gt,M=Ft,Ce?`
`:Tt},J=function(H){if(A)return K();if(H&&H.inputType){if(H.inputType=="historyUndo")return S.execCommand("undo");if(H.inputType=="historyRedo")return S.execCommand("redo")}var V=f.value,tt=G(V,!0);(V.length>d+100||v.test(tt)||k&&_<1&&_==R)&&z()},ot=function(H,V,tt){var gt=H.clipboardData||window.clipboardData;if(!(!gt||i)){var _t=a||tt?"Text":"text/plain";try{return V?gt.setData(_t,V)!==!1:gt.getData(_t)}catch($t){if(!tt)return ot($t,V,!0)}}},et=function(H,V){var tt=S.getCopyText();if(!tt)return n.preventDefault(H);ot(H,tt)?(h&&(z(tt),L=tt,setTimeout(function(){L=!1},10)),V?S.onCut():S.onCopy(),n.preventDefault(H)):(L=!0,f.value=tt,f.select(),setTimeout(function(){L=!1,z(),V?S.onCut():S.onCopy()}))},vt=function(H){et(H,!0)},bt=function(H){et(H,!1)},ht=function(H){var V=ot(H);o.pasteCancelled()||(typeof V=="string"?(V&&S.onPaste(V,H),g.isIE&&setTimeout(z),n.preventDefault(H)):(f.value="",$=!0))};n.addCommandKeyListener(f,function(H,V,tt){if(!A)return S.onCommandKey(H,V,tt)},S),n.addListener(f,"select",W,S),n.addListener(f,"input",J,S),n.addListener(f,"cut",vt,S),n.addListener(f,"copy",bt,S),n.addListener(f,"paste",ht,S),(!("oncut"in f)||!("oncopy"in f)||!("onpaste"in f))&&n.addListener(T,"keydown",function(H){if(!(g.isMac&&!H.metaKey||!H.ctrlKey))switch(H.keyCode){case 67:bt(H);break;case 86:ht(H);break;case 88:vt(H);break}},S);var U=function(H){if(!(A||!S.onCompositionStart||S.$readOnly)&&(A={},!y)){H.data&&(A.useTextareaForIME=!1),setTimeout(K,0),S._signal("compositionStart"),S.on("mousedown",Q);var V=S.getSelectionRange();V.end.row=V.start.row,V.end.column=V.start.column,A.markerRange=V,A.selectionStart=_,S.onCompositionStart(A),A.useTextareaForIME?(E=f.value="",_=0,R=0):(f.msGetInputContext&&(A.context=f.msGetInputContext()),f.getInputContext&&(A.context=f.getInputContext()))}},K=function(){if(!(!A||!S.onCompositionUpdate||S.$readOnly)){if(y)return Q();if(A.useTextareaForIME)S.onCompositionUpdate(f.value);else{var H=f.value;G(H),A.markerRange&&(A.context&&(A.markerRange.start.column=A.selectionStart=A.context.compositionStartOffset),A.markerRange.end.column=A.markerRange.start.column+R-A.selectionStart+M)}}},it=function(H){!S.onCompositionEnd||S.$readOnly||(A=!1,S.onCompositionEnd(),S.off("mousedown",Q),H&&J())};function Q(){b=!0,f.blur(),f.focus(),b=!1}var st=u.delayedCall(K,50).schedule.bind(null,null);function rt(H){H.keyCode==27&&f.value.length<f.selectionStart&&(A||(E=f.value),_=R=-1,z()),st()}n.addListener(f,"compositionstart",U,S),n.addListener(f,"compositionupdate",K,S),n.addListener(f,"keyup",rt,S),n.addListener(f,"keydown",st,S),n.addListener(f,"compositionend",it,S),this.getElement=function(){return f},this.setCommandMode=function(H){y=H,f.readOnly=!1},this.setReadOnly=function(H){y||(f.readOnly=H)},this.setCopyWithEmptySelection=function(H){},this.onContextMenu=function(H){X=!0,z(),S._emit("nativecontextmenu",{target:S,domEvent:H}),this.moveToMouse(H,!0)},this.moveToMouse=function(H,V){w||(w=f.style.cssText),f.style.cssText=(V?"z-index:100000;":"")+(g.isIE?"opacity:0.1;":"")+"text-indent: -"+(_+R)*S.renderer.characterWidth*.5+"px;";var tt=S.container.getBoundingClientRect(),gt=s.computedStyle(S.container),_t=tt.top+(parseInt(gt.borderTopWidth)||0),$t=tt.left+(parseInt(tt.borderLeftWidth)||0),Tt=tt.bottom-_t-f.clientHeight-2,Pt=function(Ft){s.translate(f,Ft.clientX-$t-2,Math.min(Ft.clientY-_t-2,Tt))};Pt(H),H.type=="mousedown"&&(S.renderer.$isMousePressed=!0,clearTimeout(nt),g.isWin&&n.capture(S.container,Pt,Lt))},this.onContextMenuClose=Lt;var nt;function Lt(){clearTimeout(nt),nt=setTimeout(function(){w&&(f.style.cssText=w,w=""),S.renderer.$isMousePressed=!1,S.renderer.$keepTextAreaAtCursor&&S.renderer.$moveTextAreaToCursor()},0)}var ft=function(H){S.textInput.onContextMenu(H),Lt()};n.addListener(f,"mouseup",ft,S),n.addListener(f,"mousedown",function(H){H.preventDefault(),Lt()},S),n.addListener(S.renderer.scroller,"contextmenu",ft,S),n.addListener(f,"contextmenu",ft,S),h&&It(T,S,f);function It(H,V,tt){var gt=null,_t=!1;tt.addEventListener("keydown",function(Tt){gt&&clearTimeout(gt),_t=!0},!0),tt.addEventListener("keyup",function(Tt){gt=setTimeout(function(){_t=!1},100)},!0);var $t=function(Tt){if(document.activeElement===tt&&!(_t||A||V.$mouseHandler.isMousePressed)&&!L){var Pt=tt.selectionStart,Ft=tt.selectionEnd,Rt=null,Bt=0;if(Pt==0?Rt=c.up:Pt==1?Rt=c.home:Ft>R&&E[Ft]==`
`?Rt=c.end:Pt<_&&E[Pt-1]==" "?(Rt=c.left,Bt=m.option):Pt<_||Pt==_&&R!=_&&Pt==Ft?Rt=c.left:Ft>R&&E.slice(0,Ft).split(`
`).length>2?Rt=c.down:Ft>R&&E[Ft-1]==" "?(Rt=c.right,Bt=m.option):(Ft>R||Ft==R&&R!=_&&Pt==Ft)&&(Rt=c.right),Pt!==Ft&&(Bt|=m.shift),Rt){var Ce=V.onCommandKey({},Bt,Rt);if(!Ce&&V.commands){Rt=c.keyCodeToString(Rt);var ae=V.commands.findKeyCommand(Bt,Rt);ae&&V.execCommand(ae)}_=Pt,R=Ft,z("")}}};document.addEventListener("selectionchange",$t),V.on("destroy",function(){document.removeEventListener("selectionchange",$t)})}this.destroy=function(){f.parentElement&&f.parentElement.removeChild(f)}},t.TextInput=x,t.$setUserAgentForTests=function(T,S){k=T,h=S}});ace.define("ace/mouse/default_handlers",["require","exports","module","ace/lib/useragent"],function(e,t,r){"use strict";var n=e("../lib/useragent"),p=0,g=550,s=function(){function i(a){a.$clickSelection=null;var l=a.editor;l.setDefaultHandler("mousedown",this.onMouseDown.bind(a)),l.setDefaultHandler("dblclick",this.onDoubleClick.bind(a)),l.setDefaultHandler("tripleclick",this.onTripleClick.bind(a)),l.setDefaultHandler("quadclick",this.onQuadClick.bind(a)),l.setDefaultHandler("mousewheel",this.onMouseWheel.bind(a));var d=["select","startSelect","selectEnd","selectAllEnd","selectByWordsEnd","selectByLinesEnd","dragWait","dragWaitEnd","focusWait"];d.forEach(function(c){a[c]=this[c]},this),a.selectByLines=this.extendSelectionBy.bind(a,"getLineRange"),a.selectByWords=this.extendSelectionBy.bind(a,"getWordRange")}return i.prototype.onMouseDown=function(a){var l=a.inSelection(),d=a.getDocumentPosition();this.mousedownEvent=a;var c=this.editor,m=a.getButton();if(m!==0){var h=c.getSelectionRange(),v=h.isEmpty();(v||m==1)&&c.selection.moveToPosition(d),m==2&&(c.textInput.onContextMenu(a.domEvent),n.isMozilla||a.preventDefault());return}if(this.mousedownEvent.time=Date.now(),l&&!c.isFocused()&&(c.focus(),this.$focusTimeout&&!this.$clickSelection&&!c.inMultiSelectMode)){this.setState("focusWait"),this.captureMouse(a);return}return this.captureMouse(a),this.startSelect(d,a.domEvent._clicks>1),a.preventDefault()},i.prototype.startSelect=function(a,l){a=a||this.editor.renderer.screenToTextCoordinates(this.x,this.y);var d=this.editor;this.mousedownEvent&&(this.mousedownEvent.getShiftKey()?d.selection.selectToPosition(a):l||d.selection.moveToPosition(a),l||this.select(),d.setStyle("ace_selecting"),this.setState("select"))},i.prototype.select=function(){var a,l=this.editor,d=l.renderer.screenToTextCoordinates(this.x,this.y);if(this.$clickSelection){var c=this.$clickSelection.comparePoint(d);if(c==-1)a=this.$clickSelection.end;else if(c==1)a=this.$clickSelection.start;else{var m=o(this.$clickSelection,d);d=m.cursor,a=m.anchor}l.selection.setSelectionAnchor(a.row,a.column)}l.selection.selectToPosition(d),l.renderer.scrollCursorIntoView()},i.prototype.extendSelectionBy=function(a){var l,d=this.editor,c=d.renderer.screenToTextCoordinates(this.x,this.y),m=d.selection[a](c.row,c.column);if(this.$clickSelection){var h=this.$clickSelection.comparePoint(m.start),v=this.$clickSelection.comparePoint(m.end);if(h==-1&&v<=0)l=this.$clickSelection.end,(m.end.row!=c.row||m.end.column!=c.column)&&(c=m.start);else if(v==1&&h>=0)l=this.$clickSelection.start,(m.start.row!=c.row||m.start.column!=c.column)&&(c=m.end);else if(h==-1&&v==1)c=m.end,l=m.start;else{var k=o(this.$clickSelection,c);c=k.cursor,l=k.anchor}d.selection.setSelectionAnchor(l.row,l.column)}d.selection.selectToPosition(c),d.renderer.scrollCursorIntoView()},i.prototype.selectByLinesEnd=function(){this.$clickSelection=null,this.editor.unsetStyle("ace_selecting")},i.prototype.focusWait=function(){var a=u(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y),l=Date.now();(a>p||l-this.mousedownEvent.time>this.$focusTimeout)&&this.startSelect(this.mousedownEvent.getDocumentPosition())},i.prototype.onDoubleClick=function(a){var l=a.getDocumentPosition(),d=this.editor,c=d.session,m=c.getBracketRange(l);m?(m.isEmpty()&&(m.start.column--,m.end.column++),this.setState("select")):(m=d.selection.getWordRange(l.row,l.column),this.setState("selectByWords")),this.$clickSelection=m,this.select()},i.prototype.onTripleClick=function(a){var l=a.getDocumentPosition(),d=this.editor;this.setState("selectByLines");var c=d.getSelectionRange();c.isMultiLine()&&c.contains(l.row,l.column)?(this.$clickSelection=d.selection.getLineRange(c.start.row),this.$clickSelection.end=d.selection.getLineRange(c.end.row).end):this.$clickSelection=d.selection.getLineRange(l.row),this.select()},i.prototype.onQuadClick=function(a){var l=this.editor;l.selectAll(),this.$clickSelection=l.getSelectionRange(),this.setState("selectAll")},i.prototype.onMouseWheel=function(a){if(!a.getAccelKey()){a.getShiftKey()&&a.wheelY&&!a.wheelX&&(a.wheelX=a.wheelY,a.wheelY=0);var l=this.editor;this.$lastScroll||(this.$lastScroll={t:0,vx:0,vy:0,allowed:0});var d=this.$lastScroll,c=a.domEvent.timeStamp,m=c-d.t,h=m?a.wheelX/m:d.vx,v=m?a.wheelY/m:d.vy;m<g&&(h=(h+d.vx)/2,v=(v+d.vy)/2);var k=Math.abs(h/v),x=!1;if(k>=1&&l.renderer.isScrollableBy(a.wheelX*a.speed,0)&&(x=!0),k<=1&&l.renderer.isScrollableBy(0,a.wheelY*a.speed)&&(x=!0),x)d.allowed=c;else if(c-d.allowed<g){var T=Math.abs(h)<=1.5*Math.abs(d.vx)&&Math.abs(v)<=1.5*Math.abs(d.vy);T?(x=!0,d.allowed=c):d.allowed=0}if(d.t=c,d.vx=h,d.vy=v,x)return l.renderer.scrollBy(a.wheelX*a.speed,a.wheelY*a.speed),a.stop()}},i}();s.prototype.selectEnd=s.prototype.selectByLinesEnd,s.prototype.selectAllEnd=s.prototype.selectByLinesEnd,s.prototype.selectByWordsEnd=s.prototype.selectByLinesEnd,t.DefaultHandlers=s;function u(i,a,l,d){return Math.sqrt(Math.pow(l-i,2)+Math.pow(d-a,2))}function o(i,a){if(i.start.row==i.end.row)var l=2*a.column-i.start.column-i.end.column;else if(i.start.row==i.end.row-1&&!i.start.column&&!i.end.column)var l=a.column-4;else var l=2*a.row-i.start.row-i.end.row;return l<0?{cursor:i.start,anchor:i.end}:{cursor:i.end,anchor:i.start}}});ace.define("ace/lib/scroll",["require","exports","module"],function(e,t,r){t.preventParentScroll=function(p){p.stopPropagation();var g=p.currentTarget,s=g.scrollHeight>g.clientHeight;s||p.preventDefault()}});ace.define("ace/tooltip",["require","exports","module","ace/lib/dom","ace/lib/event","ace/range","ace/lib/scroll"],function(e,t,r){"use strict";var n=this&&this.__extends||function(){var m=function(h,v){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,x){k.__proto__=x}||function(k,x){for(var T in x)Object.prototype.hasOwnProperty.call(x,T)&&(k[T]=x[T])},m(h,v)};return function(h,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");m(h,v);function k(){this.constructor=h}h.prototype=v===null?Object.create(v):(k.prototype=v.prototype,new k)}}(),p=this&&this.__values||function(m){var h=typeof Symbol=="function"&&Symbol.iterator,v=h&&m[h],k=0;if(v)return v.call(m);if(m&&typeof m.length=="number")return{next:function(){return m&&k>=m.length&&(m=void 0),{value:m&&m[k++],done:!m}}};throw new TypeError(h?"Object is not iterable.":"Symbol.iterator is not defined.")},g=e("./lib/dom"),s=e("./lib/event"),u=e("./range").Range,o=e("./lib/scroll").preventParentScroll,i="ace_tooltip",a=function(){function m(h){this.isOpen=!1,this.$element=null,this.$parentNode=h}return m.prototype.$init=function(){return this.$element=g.createElement("div"),this.$element.className=i,this.$element.style.display="none",this.$parentNode.appendChild(this.$element),this.$element},m.prototype.getElement=function(){return this.$element||this.$init()},m.prototype.setText=function(h){this.getElement().textContent=h},m.prototype.setHtml=function(h){this.getElement().innerHTML=h},m.prototype.setPosition=function(h,v){this.getElement().style.left=h+"px",this.getElement().style.top=v+"px"},m.prototype.setClassName=function(h){g.addCssClass(this.getElement(),h)},m.prototype.setTheme=function(h){this.$element.className=i+" "+(h.isDark?"ace_dark ":"")+(h.cssClass||"")},m.prototype.show=function(h,v,k){h!=null&&this.setText(h),v!=null&&k!=null&&this.setPosition(v,k),this.isOpen||(this.getElement().style.display="block",this.isOpen=!0)},m.prototype.hide=function(h){this.isOpen&&(this.getElement().style.display="none",this.getElement().className=i,this.isOpen=!1)},m.prototype.getHeight=function(){return this.getElement().offsetHeight},m.prototype.getWidth=function(){return this.getElement().offsetWidth},m.prototype.destroy=function(){this.isOpen=!1,this.$element&&this.$element.parentNode&&this.$element.parentNode.removeChild(this.$element)},m}(),l=function(){function m(){this.popups=[]}return m.prototype.addPopup=function(h){this.popups.push(h),this.updatePopups()},m.prototype.removePopup=function(h){var v=this.popups.indexOf(h);v!==-1&&(this.popups.splice(v,1),this.updatePopups())},m.prototype.updatePopups=function(){var h,v,k,x;this.popups.sort(function(y,b){return b.priority-y.priority});var T=[];try{for(var S=p(this.popups),f=S.next();!f.done;f=S.next()){var L=f.value,$=!0;try{for(var A=(k=void 0,p(T)),C=A.next();!C.done;C=A.next()){var w=C.value;if(this.doPopupsOverlap(w,L)){$=!1;break}}}catch(y){k={error:y}}finally{try{C&&!C.done&&(x=A.return)&&x.call(A)}finally{if(k)throw k.error}}$?T.push(L):L.hide()}}catch(y){h={error:y}}finally{try{f&&!f.done&&(v=S.return)&&v.call(S)}finally{if(h)throw h.error}}},m.prototype.doPopupsOverlap=function(h,v){var k=h.getElement().getBoundingClientRect(),x=v.getElement().getBoundingClientRect();return k.left<x.right&&k.right>x.left&&k.top<x.bottom&&k.bottom>x.top},m}(),d=new l;t.popupManager=d,t.Tooltip=a;var c=function(m){n(h,m);function h(v){v===void 0&&(v=document.body);var k=m.call(this,v)||this;k.timeout=void 0,k.lastT=0,k.idleTime=350,k.lastEvent=void 0,k.onMouseOut=k.onMouseOut.bind(k),k.onMouseMove=k.onMouseMove.bind(k),k.waitForHover=k.waitForHover.bind(k),k.hide=k.hide.bind(k);var x=k.getElement();return x.style.whiteSpace="pre-wrap",x.style.pointerEvents="auto",x.addEventListener("mouseout",k.onMouseOut),x.tabIndex=-1,x.addEventListener("blur",function(){x.contains(document.activeElement)||this.hide()}.bind(k)),x.addEventListener("wheel",o),k}return h.prototype.addToEditor=function(v){v.on("mousemove",this.onMouseMove),v.on("mousedown",this.hide),v.renderer.getMouseEventTarget().addEventListener("mouseout",this.onMouseOut,!0)},h.prototype.removeFromEditor=function(v){v.off("mousemove",this.onMouseMove),v.off("mousedown",this.hide),v.renderer.getMouseEventTarget().removeEventListener("mouseout",this.onMouseOut,!0),this.timeout&&(clearTimeout(this.timeout),this.timeout=null)},h.prototype.onMouseMove=function(v,k){this.lastEvent=v,this.lastT=Date.now();var x=k.$mouseHandler.isMousePressed;if(this.isOpen){var T=this.lastEvent&&this.lastEvent.getDocumentPosition();(!this.range||!this.range.contains(T.row,T.column)||x||this.isOutsideOfText(this.lastEvent))&&this.hide()}this.timeout||x||(this.lastEvent=v,this.timeout=setTimeout(this.waitForHover,this.idleTime))},h.prototype.waitForHover=function(){this.timeout&&clearTimeout(this.timeout);var v=Date.now()-this.lastT;if(this.idleTime-v>10){this.timeout=setTimeout(this.waitForHover,this.idleTime-v);return}this.timeout=null,this.lastEvent&&!this.isOutsideOfText(this.lastEvent)&&this.$gatherData(this.lastEvent,this.lastEvent.editor)},h.prototype.isOutsideOfText=function(v){var k=v.editor,x=v.getDocumentPosition(),T=k.session.getLine(x.row);if(x.column==T.length){var S=k.renderer.pixelToScreenCoordinates(v.clientX,v.clientY),f=k.session.documentToScreenPosition(x.row,x.column);if(f.column!=S.column||f.row!=S.row)return!0}return!1},h.prototype.setDataProvider=function(v){this.$gatherData=v},h.prototype.showForRange=function(v,k,x,T){var S=10;if(!(T&&T!=this.lastEvent)&&!(this.isOpen&&document.activeElement==this.getElement())){var f=v.renderer;this.isOpen||(d.addPopup(this),this.$registerCloseEvents(),this.setTheme(f.theme)),this.isOpen=!0,this.addMarker(k,v.session),this.range=u.fromPoints(k.start,k.end);var L=f.textToScreenCoordinates(k.start.row,k.start.column),$=f.scroller.getBoundingClientRect();L.pageX<$.left&&(L.pageX=$.left);var A=this.getElement();A.innerHTML="",A.appendChild(x),A.style.maxHeight="",A.style.display="block";var C=A.clientHeight,w=A.clientWidth,y=window.innerHeight-L.pageY-f.lineHeight,b=!0;L.pageY-C<0&&L.pageY<y&&(b=!1),A.style.maxHeight=(b?L.pageY:y)-S+"px",A.style.top=b?"":L.pageY+f.lineHeight+"px",A.style.bottom=b?window.innerHeight-L.pageY+"px":"",A.style.left=Math.min(L.pageX,window.innerWidth-w-S)+"px"}},h.prototype.addMarker=function(v,k){this.marker&&this.$markerSession.removeMarker(this.marker),this.$markerSession=k,this.marker=k&&k.addMarker(v,"ace_highlight-marker","text")},h.prototype.hide=function(v){!v&&document.activeElement==this.getElement()||v&&v.target&&(v.type!="keydown"||v.ctrlKey||v.metaKey)&&this.$element.contains(v.target)||(this.lastEvent=null,this.timeout&&clearTimeout(this.timeout),this.timeout=null,this.addMarker(null),this.isOpen&&(this.$removeCloseEvents(),this.getElement().style.display="none",this.isOpen=!1,d.removePopup(this)))},h.prototype.$registerCloseEvents=function(){window.addEventListener("keydown",this.hide,!0),window.addEventListener("wheel",this.hide,!0),window.addEventListener("mousedown",this.hide,!0)},h.prototype.$removeCloseEvents=function(){window.removeEventListener("keydown",this.hide,!0),window.removeEventListener("wheel",this.hide,!0),window.removeEventListener("mousedown",this.hide,!0)},h.prototype.onMouseOut=function(v){this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.lastEvent=null,this.isOpen&&(!v.relatedTarget||this.getElement().contains(v.relatedTarget)||v&&v.currentTarget.contains(v.relatedTarget)||v.relatedTarget.classList.contains("ace_content")||this.hide())},h}(a);t.HoverTooltip=c});ace.define("ace/mouse/default_gutter_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/tooltip","ace/config","ace/lib/lang"],function(e,t,r){"use strict";var n=this&&this.__extends||function(){var d=function(c,m){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,v){h.__proto__=v}||function(h,v){for(var k in v)Object.prototype.hasOwnProperty.call(v,k)&&(h[k]=v[k])},d(c,m)};return function(c,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");d(c,m);function h(){this.constructor=c}c.prototype=m===null?Object.create(m):(h.prototype=m.prototype,new h)}}(),p=this&&this.__values||function(d){var c=typeof Symbol=="function"&&Symbol.iterator,m=c&&d[c],h=0;if(m)return m.call(d);if(d&&typeof d.length=="number")return{next:function(){return d&&h>=d.length&&(d=void 0),{value:d&&d[h++],done:!d}}};throw new TypeError(c?"Object is not iterable.":"Symbol.iterator is not defined.")},g=e("../lib/dom"),s=e("../lib/event"),u=e("../tooltip").Tooltip,o=e("../config").nls,i=e("../lib/lang");function a(d){var c=d.editor,m=c.renderer.$gutterLayer,h=new l(c);d.editor.setDefaultHandler("guttermousedown",function(f){if(!(!c.isFocused()||f.getButton()!=0)){var L=m.getRegion(f);if(L!="foldWidgets"){var $=f.getDocumentPosition().row,A=c.session.selection;if(f.getShiftKey())A.selectTo($,0);else{if(f.domEvent.detail==2)return c.selectAll(),f.preventDefault();d.$clickSelection=c.selection.getLineRange($)}return d.setState("selectByLines"),d.captureMouse(f),f.preventDefault()}}});var v,k;function x(){var f=k.getDocumentPosition().row,L=c.session.getLength();if(f==L){var $=c.renderer.pixelToScreenCoordinates(0,k.y).row,A=k.$pos;if($>c.session.documentToScreenRow(A.row,A.column))return T()}if(h.showTooltip(f),!!h.isOpen)if(c.on("mousewheel",T),d.$tooltipFollowsMouse)S(k);else{var C=k.getGutterRow(),w=m.$lines.get(C);if(w){var y=w.element.querySelector(".ace_gutter_annotation"),b=y.getBoundingClientRect(),E=h.getElement().style;E.left=b.right+"px",E.top=b.bottom+"px"}else S(k)}}function T(){v&&(v=clearTimeout(v)),h.isOpen&&(h.hideTooltip(),c.off("mousewheel",T))}function S(f){h.setPosition(f.x,f.y)}d.editor.setDefaultHandler("guttermousemove",function(f){var L=f.domEvent.target||f.domEvent.srcElement;if(g.hasCssClass(L,"ace_fold-widget"))return T();h.isOpen&&d.$tooltipFollowsMouse&&S(f),k=f,!v&&(v=setTimeout(function(){v=null,k&&!d.isMousePressed?x():T()},50))}),s.addListener(c.renderer.$gutter,"mouseout",function(f){k=null,!(!h.isOpen||v)&&(v=setTimeout(function(){v=null,T()},50))},c),c.on("changeSession",T),c.on("input",T)}t.GutterHandler=a;var l=function(d){n(c,d);function c(m){var h=d.call(this,m.container)||this;return h.editor=m,h}return c.prototype.setPosition=function(m,h){var v=window.innerWidth||document.documentElement.clientWidth,k=window.innerHeight||document.documentElement.clientHeight,x=this.getWidth(),T=this.getHeight();m+=15,h+=15,m+x>v&&(m-=m+x-v),h+T>k&&(h-=20+T),u.prototype.setPosition.call(this,m,h)},Object.defineProperty(c,"annotationLabels",{get:function(){return{error:{singular:o("gutter-tooltip.aria-label.error.singular","error"),plural:o("gutter-tooltip.aria-label.error.plural","errors")},warning:{singular:o("gutter-tooltip.aria-label.warning.singular","warning"),plural:o("gutter-tooltip.aria-label.warning.plural","warnings")},info:{singular:o("gutter-tooltip.aria-label.info.singular","information message"),plural:o("gutter-tooltip.aria-label.info.plural","information messages")}}},enumerable:!1,configurable:!0}),c.prototype.showTooltip=function(m){var h,v=this.editor.renderer.$gutterLayer,k=v.$annotations[m],x;k?x={displayText:Array.from(k.displayText),type:Array.from(k.type)}:x={displayText:[],type:[]};var T=v.session.getFoldLine(m);if(T&&v.$showFoldedAnnotations){for(var S={error:[],warning:[],info:[]},f,L=m+1;L<=T.end.row;L++)if(v.$annotations[L])for(var $=0;$<v.$annotations[L].text.length;$++){var A=v.$annotations[L].type[$];if(S[A].push(v.$annotations[L].text[$]),A==="error"){f="error_fold";continue}if(A==="warning"){f="warning_fold";continue}}if(f==="error_fold"||f==="warning_fold"){var C="".concat(c.annotationsToSummaryString(S)," in folded code.");x.displayText.push(C),x.type.push(f)}}if(x.displayText.length===0)return this.hide();for(var w={error:[],warning:[],info:[]},y=v.$useSvgGutterIcons?"ace_icon_svg":"ace_icon",L=0;L<x.displayText.length;L++){var b=g.createElement("span"),E=g.createElement("span");(h=E.classList).add.apply(h,["ace_".concat(x.type[L]),y]),E.setAttribute("aria-label","".concat(c.annotationLabels[x.type[L].replace("_fold","")].singular)),E.setAttribute("role","img"),E.appendChild(g.createTextNode(" ")),b.appendChild(E),b.appendChild(g.createTextNode(x.displayText[L])),b.appendChild(g.createElement("br")),w[x.type[L].replace("_fold","")].push(b)}var _=this.getElement();g.removeChildren(_),w.error.forEach(function(R){return _.appendChild(R)}),w.warning.forEach(function(R){return _.appendChild(R)}),w.info.forEach(function(R){return _.appendChild(R)}),_.setAttribute("aria-live","polite"),this.isOpen||(this.setTheme(this.editor.renderer.theme),this.setClassName("ace_gutter-tooltip")),this.show(),this.editor._signal("showGutterTooltip",this)},c.prototype.hideTooltip=function(){this.$element.removeAttribute("aria-live"),this.hide(),this.editor._signal("hideGutterTooltip",this)},c.annotationsToSummaryString=function(m){var h,v,k=[],x=["error","warning","info"];try{for(var T=p(x),S=T.next();!S.done;S=T.next()){var f=S.value;if(m[f].length){var L=m[f].length===1?c.annotationLabels[f].singular:c.annotationLabels[f].plural;k.push("".concat(m[f].length," ").concat(L))}}}catch($){h={error:$}}finally{try{S&&!S.done&&(v=T.return)&&v.call(T)}finally{if(h)throw h.error}}return k.join(", ")},c}(u);t.GutterTooltip=l});ace.define("ace/mouse/mouse_event",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(e,t,r){"use strict";var n=e("../lib/event"),p=e("../lib/useragent"),g=function(){function s(u,o){this.speed,this.wheelX,this.wheelY,this.domEvent=u,this.editor=o,this.x=this.clientX=u.clientX,this.y=this.clientY=u.clientY,this.$pos=null,this.$inSelection=null,this.propagationStopped=!1,this.defaultPrevented=!1}return s.prototype.stopPropagation=function(){n.stopPropagation(this.domEvent),this.propagationStopped=!0},s.prototype.preventDefault=function(){n.preventDefault(this.domEvent),this.defaultPrevented=!0},s.prototype.stop=function(){this.stopPropagation(),this.preventDefault()},s.prototype.getDocumentPosition=function(){return this.$pos?this.$pos:(this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY),this.$pos)},s.prototype.getGutterRow=function(){var u=this.getDocumentPosition().row,o=this.editor.session.documentToScreenRow(u,0),i=this.editor.session.documentToScreenRow(this.editor.renderer.$gutterLayer.$lines.get(0).row,0);return o-i},s.prototype.inSelection=function(){if(this.$inSelection!==null)return this.$inSelection;var u=this.editor,o=u.getSelectionRange();if(o.isEmpty())this.$inSelection=!1;else{var i=this.getDocumentPosition();this.$inSelection=o.contains(i.row,i.column)}return this.$inSelection},s.prototype.getButton=function(){return n.getButton(this.domEvent)},s.prototype.getShiftKey=function(){return this.domEvent.shiftKey},s.prototype.getAccelKey=function(){return p.isMac?this.domEvent.metaKey:this.domEvent.ctrlKey},s}();t.MouseEvent=g});ace.define("ace/mouse/dragdrop_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],function(e,t,r){"use strict";var n=e("../lib/dom"),p=e("../lib/event"),g=e("../lib/useragent"),s=200,u=200,o=5;function i(l){var d=l.editor,c=n.createElement("div");c.style.cssText="top:-100px;position:absolute;z-index:2147483647;opacity:0.5",c.textContent="\xA0";var m=["dragWait","dragWaitEnd","startDrag","dragReadyEnd","onMouseDrag"];m.forEach(function(D){l[D]=this[D]},this),d.on("mousedown",this.onMouseDown.bind(l));var h=d.container,v,k,x,T,S,f,L=0,$,A,C,w,y;this.onDragStart=function(D){if(this.cancelDrag||!h.draggable){var z=this;return setTimeout(function(){z.startSelect(),z.captureMouse(D)},0),D.preventDefault()}S=d.getSelectionRange();var N=D.dataTransfer;N.effectAllowed=d.getReadOnly()?"copy":"copyMove",d.container.appendChild(c),N.setDragImage&&N.setDragImage(c,0,0),setTimeout(function(){d.container.removeChild(c)}),N.clearData(),N.setData("Text",d.session.getTextRange()),A=!0,this.setState("drag")},this.onDragEnd=function(D){if(h.draggable=!1,A=!1,this.setState(null),!d.getReadOnly()){var z=D.dataTransfer.dropEffect;!$&&z=="move"&&d.session.remove(d.getSelectionRange()),d.$resetCursorStyle()}this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle("")},this.onDragEnter=function(D){if(!(d.getReadOnly()||!O(D.dataTransfer)))return k=D.clientX,x=D.clientY,v||R(),L++,D.dataTransfer.dropEffect=$=F(D),p.preventDefault(D)},this.onDragOver=function(D){if(!(d.getReadOnly()||!O(D.dataTransfer)))return k=D.clientX,x=D.clientY,v||(R(),L++),I!==null&&(I=null),D.dataTransfer.dropEffect=$=F(D),p.preventDefault(D)},this.onDragLeave=function(D){if(L--,L<=0&&v)return M(),$=null,p.preventDefault(D)},this.onDrop=function(D){if(f){var z=D.dataTransfer;if(A)switch($){case"move":S.contains(f.row,f.column)?S={start:f,end:f}:S=d.moveText(S,f);break;case"copy":S=d.moveText(S,f,!0);break}else{var N=z.getData("Text");S={start:f,end:d.session.insert(f,N)},d.focus(),$=null}return M(),p.preventDefault(D)}},p.addListener(h,"dragstart",this.onDragStart.bind(l),d),p.addListener(h,"dragend",this.onDragEnd.bind(l),d),p.addListener(h,"dragenter",this.onDragEnter.bind(l),d),p.addListener(h,"dragover",this.onDragOver.bind(l),d),p.addListener(h,"dragleave",this.onDragLeave.bind(l),d),p.addListener(h,"drop",this.onDrop.bind(l),d);function b(D,z){var N=Date.now(),W=!z||D.row!=z.row,j=!z||D.column!=z.column;if(!w||W||j)d.moveCursorToPosition(D),w=N,y={x:k,y:x};else{var X=a(y.x,y.y,k,x);X>o?w=null:N-w>=u&&(d.renderer.scrollCursorIntoView(),w=null)}}function E(D,z){var N=Date.now(),W=d.renderer.layerConfig.lineHeight,j=d.renderer.layerConfig.characterWidth,X=d.renderer.scroller.getBoundingClientRect(),G={x:{left:k-X.left,right:X.right-k},y:{top:x-X.top,bottom:X.bottom-x}},J=Math.min(G.x.left,G.x.right),ot=Math.min(G.y.top,G.y.bottom),et={row:D.row,column:D.column};J/j<=2&&(et.column+=G.x.left<G.x.right?-3:2),ot/W<=1&&(et.row+=G.y.top<G.y.bottom?-1:1);var vt=D.row!=et.row,bt=D.column!=et.column,ht=!z||D.row!=z.row;vt||bt&&!ht?C?N-C>=s&&d.renderer.scrollCursorIntoView(et):C=N:C=null}function _(){var D=f;f=d.renderer.screenToTextCoordinates(k,x),b(f,D),E(f,D)}function R(){S=d.selection.toOrientedRange(),v=d.session.addMarker(S,"ace_selection",d.getSelectionStyle()),d.clearSelection(),d.isFocused()&&d.renderer.$cursorLayer.setBlinking(!1),clearInterval(T),_(),T=setInterval(_,20),L=0,p.addListener(document,"mousemove",P)}function M(){clearInterval(T),d.session.removeMarker(v),v=null,d.selection.fromOrientedRange(S),d.isFocused()&&!A&&d.$resetCursorStyle(),S=null,f=null,L=0,C=null,w=null,p.removeListener(document,"mousemove",P)}var I=null;function P(){I==null&&(I=setTimeout(function(){I!=null&&v&&M()},20))}function O(D){var z=D.types;return!z||Array.prototype.some.call(z,function(N){return N=="text/plain"||N=="Text"})}function F(D){var z=["copy","copymove","all","uninitialized"],N=["move","copymove","linkmove","all","uninitialized"],W=g.isMac?D.altKey:D.ctrlKey,j="uninitialized";try{j=D.dataTransfer.effectAllowed.toLowerCase()}catch{}var X="none";return W&&z.indexOf(j)>=0?X="copy":N.indexOf(j)>=0?X="move":z.indexOf(j)>=0&&(X="copy"),X}}(function(){this.dragWait=function(){var l=Date.now()-this.mousedownEvent.time;l>this.editor.getDragDelay()&&this.startDrag()},this.dragWaitEnd=function(){var l=this.editor.container;l.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()),this.selectEnd()},this.dragReadyEnd=function(l){this.editor.$resetCursorStyle(),this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle(""),this.dragWaitEnd()},this.startDrag=function(){this.cancelDrag=!1;var l=this.editor,d=l.container;d.draggable=!0,l.renderer.$cursorLayer.setBlinking(!1),l.setStyle("ace_dragging");var c=g.isWin?"default":"move";l.renderer.setCursorStyle(c),this.setState("dragReady")},this.onMouseDrag=function(l){var d=this.editor.container;if(g.isIE&&this.state=="dragReady"){var c=a(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);c>3&&d.dragDrop()}if(this.state==="dragWait"){var c=a(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);c>0&&(d.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()))}},this.onMouseDown=function(l){if(this.$dragEnabled){this.mousedownEvent=l;var d=this.editor,c=l.inSelection(),m=l.getButton(),h=l.domEvent.detail||1;if(h===1&&m===0&&c){if(l.editor.inMultiSelectMode&&(l.getAccelKey()||l.getShiftKey()))return;this.mousedownEvent.time=Date.now();var v=l.domEvent.target||l.domEvent.srcElement;if("unselectable"in v&&(v.unselectable="on"),d.getDragDelay()){if(g.isWebKit){this.cancelDrag=!0;var k=d.container;k.draggable=!0}this.setState("dragWait")}else this.startDrag();this.captureMouse(l,this.onMouseDrag.bind(this)),l.defaultPrevented=!0}}}}).call(i.prototype);function a(l,d,c,m){return Math.sqrt(Math.pow(c-l,2)+Math.pow(m-d,2))}t.DragdropHandler=i});ace.define("ace/mouse/touch_handler",["require","exports","module","ace/mouse/mouse_event","ace/lib/event","ace/lib/dom"],function(e,t,r){"use strict";var n=e("./mouse_event").MouseEvent,p=e("../lib/event"),g=e("../lib/dom");t.addTouchListeners=function(s,u){var o="scroll",i,a,l,d,c,m,h=0,v,k=0,x=0,T=0,S,f;function L(){var b=window.navigator&&window.navigator.clipboard,E=!1,_=function(){var I=u.getCopyText(),P=u.session.getUndoManager().hasUndo();f.replaceChild(g.buildDom(E?["span",!I&&R("selectall")&&["span",{class:"ace_mobile-button",action:"selectall"},"Select All"],I&&R("copy")&&["span",{class:"ace_mobile-button",action:"copy"},"Copy"],I&&R("cut")&&["span",{class:"ace_mobile-button",action:"cut"},"Cut"],b&&R("paste")&&["span",{class:"ace_mobile-button",action:"paste"},"Paste"],P&&R("undo")&&["span",{class:"ace_mobile-button",action:"undo"},"Undo"],R("find")&&["span",{class:"ace_mobile-button",action:"find"},"Find"],R("openCommandPalette")&&["span",{class:"ace_mobile-button",action:"openCommandPalette"},"Palette"]]:["span"]),f.firstChild)},R=function(I){return u.commands.canExecute(I,u)},M=function(I){var P=I.target.getAttribute("action");if(P=="more"||!E)return E=!E,_();P=="paste"?b.readText().then(function(O){u.execCommand(P,O)}):P&&((P=="cut"||P=="copy")&&(b?b.writeText(u.getCopyText()):document.execCommand("copy")),u.execCommand(P)),f.firstChild.style.display="none",E=!1,P!="openCommandPalette"&&u.focus()};f=g.buildDom(["div",{class:"ace_mobile-menu",ontouchstart:function(I){o="menu",I.stopPropagation(),I.preventDefault(),u.textInput.focus()},ontouchend:function(I){I.stopPropagation(),I.preventDefault(),M(I)},onclick:M},["span"],["span",{class:"ace_mobile-button",action:"more"},"..."]],u.container)}function $(){if(!u.getOption("enableMobileMenu")){f&&A();return}f||L();var b=u.selection.cursor,E=u.renderer.textToScreenCoordinates(b.row,b.column),_=u.renderer.textToScreenCoordinates(0,0).pageX,R=u.renderer.scrollLeft,M=u.container.getBoundingClientRect();f.style.top=E.pageY-M.top-3+"px",E.pageX-M.left<M.width-70?(f.style.left="",f.style.right="10px"):(f.style.right="",f.style.left=_+R-M.left+"px"),f.style.display="",f.firstChild.style.display="none",u.on("input",A)}function A(b){f&&(f.style.display="none"),u.off("input",A)}function C(){c=null,clearTimeout(c);var b=u.selection.getRange(),E=b.contains(v.row,v.column);(b.isEmpty()||!E)&&(u.selection.moveToPosition(v),u.selection.selectWord()),o="wait",$()}function w(){c=null,clearTimeout(c),u.selection.moveToPosition(v);var b=k>=2?u.selection.getLineRange(v.row):u.session.getBracketRange(v);b&&!b.isEmpty()?u.selection.setRange(b):u.selection.selectWord(),o="wait"}p.addListener(s,"contextmenu",function(b){if(S){var E=u.textInput.getElement();E.focus()}},u),p.addListener(s,"touchstart",function(b){var E=b.touches;if(c||E.length>1){clearTimeout(c),c=null,l=-1,o="zoom";return}S=u.$mouseHandler.isMousePressed=!0;var _=u.renderer.layerConfig.lineHeight,R=u.renderer.layerConfig.lineHeight,M=b.timeStamp;d=M;var I=E[0],P=I.clientX,O=I.clientY;Math.abs(i-P)+Math.abs(a-O)>_&&(l=-1),i=b.clientX=P,a=b.clientY=O,x=T=0;var F=new n(b,u);if(v=F.getDocumentPosition(),M-l<500&&E.length==1&&!h)k++,b.preventDefault(),b.button=0,w();else{k=0;var D=u.selection.cursor,z=u.selection.isEmpty()?D:u.selection.anchor,N=u.renderer.$cursorLayer.getPixelPosition(D,!0),W=u.renderer.$cursorLayer.getPixelPosition(z,!0),j=u.renderer.scroller.getBoundingClientRect(),X=u.renderer.layerConfig.offset,G=u.renderer.scrollLeft,J=function(vt,bt){return vt=vt/R,bt=bt/_-.75,vt*vt+bt*bt};if(b.clientX<j.left){o="zoom";return}var ot=J(b.clientX-j.left-N.left+G,b.clientY-j.top-N.top+X),et=J(b.clientX-j.left-W.left+G,b.clientY-j.top-W.top+X);ot<3.5&&et<3.5&&(o=ot>et?"cursor":"anchor"),et<3.5?o="anchor":ot<3.5?o="cursor":o="scroll",c=setTimeout(C,450)}l=M},u),p.addListener(s,"touchend",function(b){S=u.$mouseHandler.isMousePressed=!1,m&&clearInterval(m),o=="zoom"?(o="",h=0):c?(u.selection.moveToPosition(v),h=0,$()):o=="scroll"?(y(),A()):$(),clearTimeout(c),c=null},u),p.addListener(s,"touchmove",function(b){c&&(clearTimeout(c),c=null);var E=b.touches;if(!(E.length>1||o=="zoom")){var _=E[0],R=i-_.clientX,M=a-_.clientY;if(o=="wait")if(R*R+M*M>4)o="cursor";else return b.preventDefault();i=_.clientX,a=_.clientY,b.clientX=_.clientX,b.clientY=_.clientY;var I=b.timeStamp,P=I-d;if(d=I,o=="scroll"){var O=new n(b,u);O.speed=1,O.wheelX=R,O.wheelY=M,10*Math.abs(R)<Math.abs(M)&&(R=0),10*Math.abs(M)<Math.abs(R)&&(M=0),P!=0&&(x=R/P,T=M/P),u._emit("mousewheel",O),O.propagationStopped||(x=T=0)}else{var F=new n(b,u),D=F.getDocumentPosition();o=="cursor"?u.selection.moveCursorToPosition(D):o=="anchor"&&u.selection.setSelectionAnchor(D.row,D.column),u.renderer.scrollCursorIntoView(D),b.preventDefault()}}},u);function y(){h+=60,m=setInterval(function(){h--<=0&&(clearInterval(m),m=null),Math.abs(x)<.01&&(x=0),Math.abs(T)<.01&&(T=0),h<20&&(x=.9*x),h<20&&(T=.9*T);var b=u.session.getScrollTop();u.renderer.scrollBy(10*x,10*T),b==u.session.getScrollTop()&&(h=0)},10)}}});ace.define("ace/mouse/mouse_handler",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/mouse/default_handlers","ace/mouse/default_gutter_handler","ace/mouse/mouse_event","ace/mouse/dragdrop_handler","ace/mouse/touch_handler","ace/config"],function(e,t,r){"use strict";var n=e("../lib/event"),p=e("../lib/useragent"),g=e("./default_handlers").DefaultHandlers,s=e("./default_gutter_handler").GutterHandler,u=e("./mouse_event").MouseEvent,o=e("./dragdrop_handler").DragdropHandler,i=e("./touch_handler").addTouchListeners,a=e("../config"),l=function(){function d(c){this.$dragDelay,this.$dragEnabled,this.$mouseMoved,this.mouseEvent,this.$focusTimeout;var m=this;this.editor=c,new g(this),new s(this),new o(this);var h=function(x){var T=!document.hasFocus||!document.hasFocus()||!c.isFocused()&&document.activeElement==(c.textInput&&c.textInput.getElement());T&&window.focus(),c.focus(),setTimeout(function(){c.isFocused()||c.focus()})},v=c.renderer.getMouseEventTarget();n.addListener(v,"click",this.onMouseEvent.bind(this,"click"),c),n.addListener(v,"mousemove",this.onMouseMove.bind(this,"mousemove"),c),n.addMultiMouseDownListener([v,c.renderer.scrollBarV&&c.renderer.scrollBarV.inner,c.renderer.scrollBarH&&c.renderer.scrollBarH.inner,c.textInput&&c.textInput.getElement()].filter(Boolean),[400,300,250],this,"onMouseEvent",c),n.addMouseWheelListener(c.container,this.onMouseWheel.bind(this,"mousewheel"),c),i(c.container,c);var k=c.renderer.$gutter;n.addListener(k,"mousedown",this.onMouseEvent.bind(this,"guttermousedown"),c),n.addListener(k,"click",this.onMouseEvent.bind(this,"gutterclick"),c),n.addListener(k,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick"),c),n.addListener(k,"mousemove",this.onMouseEvent.bind(this,"guttermousemove"),c),n.addListener(v,"mousedown",h,c),n.addListener(k,"mousedown",h,c),p.isIE&&c.renderer.scrollBarV&&(n.addListener(c.renderer.scrollBarV.element,"mousedown",h,c),n.addListener(c.renderer.scrollBarH.element,"mousedown",h,c)),c.on("mousemove",function(x){if(!(m.state||m.$dragDelay||!m.$dragEnabled)){var T=c.renderer.screenToTextCoordinates(x.x,x.y),S=c.session.selection.getRange(),f=c.renderer;!S.isEmpty()&&S.insideStart(T.row,T.column)?f.setCursorStyle("default"):f.setCursorStyle("")}},c)}return d.prototype.onMouseEvent=function(c,m){this.editor.session&&this.editor._emit(c,new u(m,this.editor))},d.prototype.onMouseMove=function(c,m){var h=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;!h||!h.length||this.editor._emit(c,new u(m,this.editor))},d.prototype.onMouseWheel=function(c,m){var h=new u(m,this.editor);h.speed=this.$scrollSpeed*2,h.wheelX=m.wheelX,h.wheelY=m.wheelY,this.editor._emit(c,h)},d.prototype.setState=function(c){this.state=c},d.prototype.captureMouse=function(c,m){this.x=c.x,this.y=c.y,this.isMousePressed=!0;var h=this.editor,v=this.editor.renderer;v.$isMousePressed=!0;var k=this,x=function($){if($){if(p.isWebKit&&!$.which&&k.releaseMouse)return k.releaseMouse();k.x=$.clientX,k.y=$.clientY,m&&m($),k.mouseEvent=new u($,k.editor),k.$mouseMoved=!0}},T=function($){h.off("beforeEndOperation",f),clearInterval(L),h.session&&S(),k[k.state+"End"]&&k[k.state+"End"]($),k.state="",k.isMousePressed=v.$isMousePressed=!1,v.$keepTextAreaAtCursor&&v.$moveTextAreaToCursor(),k.$onCaptureMouseMove=k.releaseMouse=null,$&&k.onMouseEvent("mouseup",$),h.endOperation()},S=function(){k[k.state]&&k[k.state](),k.$mouseMoved=!1};if(p.isOldIE&&c.domEvent.type=="dblclick")return setTimeout(function(){T(c)});var f=function($){k.releaseMouse&&h.curOp.command.name&&h.curOp.selectionChanged&&(k[k.state+"End"]&&k[k.state+"End"](),k.state="",k.releaseMouse())};h.on("beforeEndOperation",f),h.startOperation({command:{name:"mouse"}}),k.$onCaptureMouseMove=x,k.releaseMouse=n.capture(this.editor.container,x,T);var L=setInterval(S,20)},d.prototype.cancelContextMenu=function(){var c=function(m){m&&m.domEvent&&m.domEvent.type!="contextmenu"||(this.editor.off("nativecontextmenu",c),m&&m.domEvent&&n.stopEvent(m.domEvent))}.bind(this);setTimeout(c,10),this.editor.on("nativecontextmenu",c)},d.prototype.destroy=function(){this.releaseMouse&&this.releaseMouse()},d}();l.prototype.releaseMouse=null,a.defineOptions(l.prototype,"mouseHandler",{scrollSpeed:{initialValue:2},dragDelay:{initialValue:p.isMac?150:0},dragEnabled:{initialValue:!0},focusTimeout:{initialValue:0},tooltipFollowsMouse:{initialValue:!0}}),t.MouseHandler=l});ace.define("ace/mouse/fold_handler",["require","exports","module","ace/lib/dom"],function(e,t,r){"use strict";var n=e("../lib/dom"),p=function(){function g(s){s.on("click",function(u){var o=u.getDocumentPosition(),i=s.session,a=i.getFoldAt(o.row,o.column,1);a&&(u.getAccelKey()?i.removeFold(a):i.expandFold(a),u.stop());var l=u.domEvent&&u.domEvent.target;l&&n.hasCssClass(l,"ace_inline_button")&&n.hasCssClass(l,"ace_toggle_wrap")&&(i.setOption("wrap",!i.getUseWrapMode()),s.renderer.scrollCursorIntoView())}),s.on("gutterclick",function(u){var o=s.renderer.$gutterLayer.getRegion(u);if(o=="foldWidgets"){var i=u.getDocumentPosition().row,a=s.session;a.foldWidgets&&a.foldWidgets[i]&&s.session.onFoldWidgetClick(i,u),s.isFocused()||s.focus(),u.stop()}}),s.on("gutterdblclick",function(u){var o=s.renderer.$gutterLayer.getRegion(u);if(o=="foldWidgets"){var i=u.getDocumentPosition().row,a=s.session,l=a.getParentFoldRangeData(i,!0),d=l.range||l.firstRange;if(d){i=d.start.row;var c=a.getFoldAt(i,a.getLine(i).length,1);c?a.removeFold(c):(a.addFold("...",d),s.renderer.scrollCursorIntoView({row:d.start.row,column:0}))}u.stop()}})}return g}();t.FoldHandler=p});ace.define("ace/keyboard/keybinding",["require","exports","module","ace/lib/keys","ace/lib/event"],function(e,t,r){"use strict";var n=e("../lib/keys"),p=e("../lib/event"),g=function(){function s(u){this.$editor=u,this.$data={editor:u},this.$handlers=[],this.setDefaultHandler(u.commands)}return s.prototype.setDefaultHandler=function(u){this.removeKeyboardHandler(this.$defaultHandler),this.$defaultHandler=u,this.addKeyboardHandler(u,0)},s.prototype.setKeyboardHandler=function(u){var o=this.$handlers;if(o[o.length-1]!=u){for(;o[o.length-1]&&o[o.length-1]!=this.$defaultHandler;)this.removeKeyboardHandler(o[o.length-1]);this.addKeyboardHandler(u,1)}},s.prototype.addKeyboardHandler=function(u,o){if(u){typeof u=="function"&&!u.handleKeyboard&&(u.handleKeyboard=u);var i=this.$handlers.indexOf(u);i!=-1&&this.$handlers.splice(i,1),o==null?this.$handlers.push(u):this.$handlers.splice(o,0,u),i==-1&&u.attach&&u.attach(this.$editor)}},s.prototype.removeKeyboardHandler=function(u){var o=this.$handlers.indexOf(u);return o==-1?!1:(this.$handlers.splice(o,1),u.detach&&u.detach(this.$editor),!0)},s.prototype.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]},s.prototype.getStatusText=function(){var u=this.$data,o=u.editor;return this.$handlers.map(function(i){return i.getStatusText&&i.getStatusText(o,u)||""}).filter(Boolean).join(" ")},s.prototype.$callKeyboardHandlers=function(u,o,i,a){for(var l,d=!1,c=this.$editor.commands,m=this.$handlers.length;m--&&(l=this.$handlers[m].handleKeyboard(this.$data,u,o,i,a),!(!(!l||!l.command)&&(l.command=="null"?d=!0:d=c.exec(l.command,this.$editor,l.args,a),d&&a&&u!=-1&&l.passEvent!=!0&&l.command.passEvent!=!0&&p.stopEvent(a),d))););return!d&&u==-1&&(l={command:"insertstring"},d=c.exec("insertstring",this.$editor,o)),d&&this.$editor._signal&&this.$editor._signal("keyboardActivity",l),d},s.prototype.onCommandKey=function(u,o,i){var a=n.keyCodeToString(i);return this.$callKeyboardHandlers(o,a,i,u)},s.prototype.onTextInput=function(u){return this.$callKeyboardHandlers(-1,u)},s}();t.KeyBinding=g});ace.define("ace/lib/bidiutil",["require","exports","module"],function(e,t,r){"use strict";var n=["\u0621","\u0641"],p=["\u063A","\u064A"],g=0,s=0,u=!1,o=!1,i=!1,a=!1,l=!1,d=!1,c=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],h=0,v=1,k=0,x=1,T=2,S=3,f=4,L=5,$=6,A=7,C=8,w=9,y=10,b=11,E=12,_=13,R=14,M=15,I=16,P=17,O=18,F=[O,O,O,O,O,O,O,O,O,$,L,$,C,L,O,O,O,O,O,O,O,O,O,O,O,O,O,O,L,L,L,$,C,f,f,b,b,b,f,f,f,f,f,y,w,y,w,w,T,T,T,T,T,T,T,T,T,T,w,f,f,f,f,f,f,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,f,f,f,f,f,f,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,f,f,f,f,O,O,O,O,O,O,L,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,w,f,b,b,b,b,f,f,f,f,k,f,f,O,f,f,b,b,T,T,f,k,f,f,f,T,k,f,f,f,f,f],D=[C,C,C,C,C,C,C,C,C,C,C,O,O,O,k,x,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,C,L,_,R,M,I,P,w,b,b,b,b,b,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,w,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,C];function z(G,J,ot,et){var vt=g?m:c,bt=null,ht=null,U=null,K=0,it=null,Q=null,st=-1,rt=null,nt=null,Lt=[];if(!et)for(rt=0,et=[];rt<ot;rt++)et[rt]=j(G[rt]);for(s=g,u=!1,o=!1,i=!1,a=!1,nt=0;nt<ot;nt++){if(bt=K,Lt[nt]=ht=W(G,et,Lt,nt),K=vt[bt][ht],it=K&240,K&=15,J[nt]=U=vt[K][5],it>0)if(it==16){for(rt=st;rt<nt;rt++)J[rt]=1;st=-1}else st=-1;if(Q=vt[K][6],Q)st==-1&&(st=nt);else if(st>-1){for(rt=st;rt<nt;rt++)J[rt]=U;st=-1}et[nt]==L&&(J[nt]=0),s|=U}if(a){for(rt=0;rt<ot;rt++)if(et[rt]==$){J[rt]=g;for(var ft=rt-1;ft>=0&&et[ft]==C;ft--)J[ft]=g}}}function N(G,J,ot){if(!(s<G)){if(G==1&&g==v&&!i){ot.reverse();return}for(var et=ot.length,vt=0,bt,ht,U,K;vt<et;){if(J[vt]>=G){for(bt=vt+1;bt<et&&J[bt]>=G;)bt++;for(ht=vt,U=bt-1;ht<U;ht++,U--)K=ot[ht],ot[ht]=ot[U],ot[U]=K;vt=bt}vt++}}}function W(G,J,ot,et){var vt=J[et],bt,ht,U,K;switch(vt){case k:case x:u=!1;case f:case S:return vt;case T:return u?S:T;case A:return u=!0,o=!0,x;case C:return f;case w:return et<1||et+1>=J.length||(bt=ot[et-1])!=T&&bt!=S||(ht=J[et+1])!=T&&ht!=S?f:(u&&(ht=S),ht==bt?ht:f);case y:return bt=et>0?ot[et-1]:L,bt==T&&et+1<J.length&&J[et+1]==T?T:f;case b:if(et>0&&ot[et-1]==T)return T;if(u)return f;for(K=et+1,U=J.length;K<U&&J[K]==b;)K++;return K<U&&J[K]==T?T:f;case E:for(U=J.length,K=et+1;K<U&&J[K]==E;)K++;if(K<U){var it=G[et],Q=it>=1425&&it<=2303||it==64286;if(bt=J[K],Q&&(bt==x||bt==A))return x}return et<1||(bt=J[et-1])==L?f:ot[et-1];case L:return u=!1,i=!0,g;case $:return a=!0,f;case _:case R:case I:case P:case M:u=!1;case O:return f}}function j(G){var J=G.charCodeAt(0),ot=J>>8;return ot==0?J>191?k:F[J]:ot==5?/[\u0591-\u05f4]/.test(G)?x:k:ot==6?/[\u0610-\u061a\u064b-\u065f\u06d6-\u06e4\u06e7-\u06ed]/.test(G)?E:/[\u0660-\u0669\u066b-\u066c]/.test(G)?S:J==1642?b:/[\u06f0-\u06f9]/.test(G)?T:A:ot==32&&J<=8287?D[J&255]:ot==254&&J>=65136?A:f}function X(G){return G>="\u064B"&&G<="\u0655"}t.L=k,t.R=x,t.EN=T,t.ON_R=3,t.AN=4,t.R_H=5,t.B=6,t.RLE=7,t.DOT="\xB7",t.doBidiReorder=function(G,J,ot){if(G.length<2)return{};var et=G.split(""),vt=new Array(et.length),bt=new Array(et.length),ht=[];g=ot?v:h,z(et,ht,et.length,J);for(var U=0;U<vt.length;vt[U]=U,U++);N(2,ht,vt),N(1,ht,vt);for(var U=0;U<vt.length-1;U++)J[U]===S?ht[U]=t.AN:ht[U]===x&&(J[U]>A&&J[U]<_||J[U]===f||J[U]===O)?ht[U]=t.ON_R:U>0&&et[U-1]==="\u0644"&&/\u0622|\u0623|\u0625|\u0627/.test(et[U])&&(ht[U-1]=ht[U]=t.R_H,U++);et[et.length-1]===t.DOT&&(ht[et.length-1]=t.B),et[0]==="\u202B"&&(ht[0]=t.RLE);for(var U=0;U<vt.length;U++)bt[U]=ht[vt[U]];return{logicalFromVisual:vt,bidiLevels:bt}},t.hasBidiCharacters=function(G,J){for(var ot=!1,et=0;et<G.length;et++)J[et]=j(G.charAt(et)),!ot&&(J[et]==x||J[et]==A||J[et]==S)&&(ot=!0);return ot},t.getVisualFromLogicalIdx=function(G,J){for(var ot=0;ot<J.logicalFromVisual.length;ot++)if(J.logicalFromVisual[ot]==G)return ot;return 0}});ace.define("ace/bidihandler",["require","exports","module","ace/lib/bidiutil","ace/lib/lang"],function(e,t,r){"use strict";var n=e("./lib/bidiutil"),p=e("./lib/lang"),g=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\u202B]/,s=function(){function u(o){this.session=o,this.bidiMap={},this.currentRow=null,this.bidiUtil=n,this.charWidths=[],this.EOL="\xAC",this.showInvisibles=!0,this.isRtlDir=!1,this.$isRtl=!1,this.line="",this.wrapIndent=0,this.EOF="\xB6",this.RLE="\u202B",this.contentWidth=0,this.fontMetrics=null,this.rtlLineOffset=0,this.wrapOffset=0,this.isMoveLeftOperation=!1,this.seenBidi=g.test(o.getValue())}return u.prototype.isBidiRow=function(o,i,a){return this.seenBidi?(o!==this.currentRow&&(this.currentRow=o,this.updateRowLine(i,a),this.updateBidiMap()),this.bidiMap.bidiLevels):!1},u.prototype.onChange=function(o){this.seenBidi?this.currentRow=null:o.action=="insert"&&g.test(o.lines.join(`
`))&&(this.seenBidi=!0,this.currentRow=null)},u.prototype.getDocumentRow=function(){var o=0,i=this.session.$screenRowCache;if(i.length){var a=this.session.$getRowCacheIndex(i,this.currentRow);a>=0&&(o=this.session.$docRowCache[a])}return o},u.prototype.getSplitIndex=function(){var o=0,i=this.session.$screenRowCache;if(i.length)for(var a,l=this.session.$getRowCacheIndex(i,this.currentRow);this.currentRow-o>0&&(a=this.session.$getRowCacheIndex(i,this.currentRow-o-1),a===l);)l=a,o++;else o=this.currentRow;return o},u.prototype.updateRowLine=function(o,i){o===void 0&&(o=this.getDocumentRow());var a=o===this.session.getLength()-1,l=a?this.EOF:this.EOL;if(this.wrapIndent=0,this.line=this.session.getLine(o),this.isRtlDir=this.$isRtl||this.line.charAt(0)===this.RLE,this.session.$useWrapMode){var d=this.session.$wrapData[o];d&&(i===void 0&&(i=this.getSplitIndex()),i>0&&d.length?(this.wrapIndent=d.indent,this.wrapOffset=this.wrapIndent*this.charWidths[n.L],this.line=i<d.length?this.line.substring(d[i-1],d[i]):this.line.substring(d[d.length-1])):this.line=this.line.substring(0,d[i]),i==d.length&&(this.line+=this.showInvisibles?l:n.DOT))}else this.line+=this.showInvisibles?l:n.DOT;var c=this.session,m=0,h;this.line=this.line.replace(/\t|[\u1100-\u2029, \u202F-\uFFE6]/g,function(v,k){return v==="	"||c.isFullWidth(v.charCodeAt(0))?(h=v==="	"?c.getScreenTabSize(k+m):2,m+=h-1,p.stringRepeat(n.DOT,h)):v}),this.isRtlDir&&(this.fontMetrics.$main.textContent=this.line.charAt(this.line.length-1)==n.DOT?this.line.substr(0,this.line.length-1):this.line,this.rtlLineOffset=this.contentWidth-this.fontMetrics.$main.getBoundingClientRect().width)},u.prototype.updateBidiMap=function(){var o=[];n.hasBidiCharacters(this.line,o)||this.isRtlDir?this.bidiMap=n.doBidiReorder(this.line,o,this.isRtlDir):this.bidiMap={}},u.prototype.markAsDirty=function(){this.currentRow=null},u.prototype.updateCharacterWidths=function(o){if(this.characterWidth!==o.$characterSize.width){this.fontMetrics=o;var i=this.characterWidth=o.$characterSize.width,a=o.$measureCharWidth("\u05D4");this.charWidths[n.L]=this.charWidths[n.EN]=this.charWidths[n.ON_R]=i,this.charWidths[n.R]=this.charWidths[n.AN]=a,this.charWidths[n.R_H]=a*.45,this.charWidths[n.B]=this.charWidths[n.RLE]=0,this.currentRow=null}},u.prototype.setShowInvisibles=function(o){this.showInvisibles=o,this.currentRow=null},u.prototype.setEolChar=function(o){this.EOL=o},u.prototype.setContentWidth=function(o){this.contentWidth=o},u.prototype.isRtlLine=function(o){return this.$isRtl?!0:o!=null?this.session.getLine(o).charAt(0)==this.RLE:this.isRtlDir},u.prototype.setRtlDirection=function(o,i){for(var a=o.getCursorPosition(),l=o.selection.getSelectionAnchor().row;l<=a.row;l++)!i&&o.session.getLine(l).charAt(0)===o.session.$bidiHandler.RLE?o.session.doc.removeInLine(l,0,1):i&&o.session.getLine(l).charAt(0)!==o.session.$bidiHandler.RLE&&o.session.doc.insert({column:0,row:l},o.session.$bidiHandler.RLE)},u.prototype.getPosLeft=function(o){o-=this.wrapIndent;var i=this.line.charAt(0)===this.RLE?1:0,a=o>i?this.session.getOverwrite()?o:o-1:i,l=n.getVisualFromLogicalIdx(a,this.bidiMap),d=this.bidiMap.bidiLevels,c=0;!this.session.getOverwrite()&&o<=i&&d[l]%2!==0&&l++;for(var m=0;m<l;m++)c+=this.charWidths[d[m]];return!this.session.getOverwrite()&&o>i&&d[l]%2===0&&(c+=this.charWidths[d[l]]),this.wrapIndent&&(c+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset),this.isRtlDir&&(c+=this.rtlLineOffset),c},u.prototype.getSelections=function(o,i){var a=this.bidiMap,l=a.bidiLevels,d,c=[],m=0,h=Math.min(o,i)-this.wrapIndent,v=Math.max(o,i)-this.wrapIndent,k=!1,x=!1,T=0;this.wrapIndent&&(m+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);for(var S,f=0;f<l.length;f++)S=a.logicalFromVisual[f],d=l[f],k=S>=h&&S<v,k&&!x?T=m:!k&&x&&c.push({left:T,width:m-T}),m+=this.charWidths[d],x=k;if(k&&f===l.length&&c.push({left:T,width:m-T}),this.isRtlDir)for(var L=0;L<c.length;L++)c[L].left+=this.rtlLineOffset;return c},u.prototype.offsetToCol=function(a){this.isRtlDir&&(a-=this.rtlLineOffset);var i=0,a=Math.max(a,0),l=0,d=0,c=this.bidiMap.bidiLevels,m=this.charWidths[c[d]];for(this.wrapIndent&&(a-=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);a>l+m/2;){if(l+=m,d===c.length-1){m=0;break}m=this.charWidths[c[++d]]}return d>0&&c[d-1]%2!==0&&c[d]%2===0?(a<l&&d--,i=this.bidiMap.logicalFromVisual[d]):d>0&&c[d-1]%2===0&&c[d]%2!==0?i=1+(a>l?this.bidiMap.logicalFromVisual[d]:this.bidiMap.logicalFromVisual[d-1]):this.isRtlDir&&d===c.length-1&&m===0&&c[d-1]%2===0||!this.isRtlDir&&d===0&&c[d]%2!==0?i=1+this.bidiMap.logicalFromVisual[d]:(d>0&&c[d-1]%2!==0&&m!==0&&d--,i=this.bidiMap.logicalFromVisual[d]),i===0&&this.isRtlDir&&i++,i+this.wrapIndent},u}();t.BidiHandler=s});ace.define("ace/selection",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/range"],function(e,t,r){"use strict";var n=e("./lib/oop"),p=e("./lib/lang"),g=e("./lib/event_emitter").EventEmitter,s=e("./range").Range,u=function(){function o(i){this.session=i,this.doc=i.getDocument(),this.clearSelection(),this.cursor=this.lead=this.doc.createAnchor(0,0),this.anchor=this.doc.createAnchor(0,0),this.$silent=!1;var a=this;this.cursor.on("change",function(l){a.$cursorChanged=!0,a.$silent||a._emit("changeCursor"),!a.$isEmpty&&!a.$silent&&a._emit("changeSelection"),!a.$keepDesiredColumnOnChange&&l.old.column!=l.value.column&&(a.$desiredColumn=null)}),this.anchor.on("change",function(){a.$anchorChanged=!0,!a.$isEmpty&&!a.$silent&&a._emit("changeSelection")})}return o.prototype.isEmpty=function(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column},o.prototype.isMultiLine=function(){return!this.$isEmpty&&this.anchor.row!=this.cursor.row},o.prototype.getCursor=function(){return this.lead.getPosition()},o.prototype.setAnchor=function(i,a){this.$isEmpty=!1,this.anchor.setPosition(i,a)},o.prototype.getAnchor=function(){return this.$isEmpty?this.getSelectionLead():this.anchor.getPosition()},o.prototype.getSelectionLead=function(){return this.lead.getPosition()},o.prototype.isBackwards=function(){var i=this.anchor,a=this.lead;return i.row>a.row||i.row==a.row&&i.column>a.column},o.prototype.getRange=function(){var i=this.anchor,a=this.lead;return this.$isEmpty?s.fromPoints(a,a):this.isBackwards()?s.fromPoints(a,i):s.fromPoints(i,a)},o.prototype.clearSelection=function(){this.$isEmpty||(this.$isEmpty=!0,this._emit("changeSelection"))},o.prototype.selectAll=function(){this.$setSelection(0,0,Number.MAX_VALUE,Number.MAX_VALUE)},o.prototype.setRange=function(i,a){var l=a?i.end:i.start,d=a?i.start:i.end;this.$setSelection(l.row,l.column,d.row,d.column)},o.prototype.$setSelection=function(i,a,l,d){if(!this.$silent){var c=this.$isEmpty,m=this.inMultiSelectMode;this.$silent=!0,this.$cursorChanged=this.$anchorChanged=!1,this.anchor.setPosition(i,a),this.cursor.setPosition(l,d),this.$isEmpty=!s.comparePoints(this.anchor,this.cursor),this.$silent=!1,this.$cursorChanged&&this._emit("changeCursor"),(this.$cursorChanged||this.$anchorChanged||c!=this.$isEmpty||m)&&this._emit("changeSelection")}},o.prototype.$moveSelection=function(i){var a=this.lead;this.$isEmpty&&this.setSelectionAnchor(a.row,a.column),i.call(this)},o.prototype.selectTo=function(i,a){this.$moveSelection(function(){this.moveCursorTo(i,a)})},o.prototype.selectToPosition=function(i){this.$moveSelection(function(){this.moveCursorToPosition(i)})},o.prototype.moveTo=function(i,a){this.clearSelection(),this.moveCursorTo(i,a)},o.prototype.moveToPosition=function(i){this.clearSelection(),this.moveCursorToPosition(i)},o.prototype.selectUp=function(){this.$moveSelection(this.moveCursorUp)},o.prototype.selectDown=function(){this.$moveSelection(this.moveCursorDown)},o.prototype.selectRight=function(){this.$moveSelection(this.moveCursorRight)},o.prototype.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)},o.prototype.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)},o.prototype.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)},o.prototype.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)},o.prototype.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)},o.prototype.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)},o.prototype.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)},o.prototype.getWordRange=function(i,a){if(typeof a>"u"){var l=i||this.lead;i=l.row,a=l.column}return this.session.getWordRange(i,a)},o.prototype.selectWord=function(){this.setSelectionRange(this.getWordRange())},o.prototype.selectAWord=function(){var i=this.getCursor(),a=this.session.getAWordRange(i.row,i.column);this.setSelectionRange(a)},o.prototype.getLineRange=function(i,a){var l=typeof i=="number"?i:this.lead.row,d,c=this.session.getFoldLine(l);return c?(l=c.start.row,d=c.end.row):d=l,a===!0?new s(l,0,d,this.session.getLine(d).length):new s(l,0,d+1,0)},o.prototype.selectLine=function(){this.setSelectionRange(this.getLineRange())},o.prototype.moveCursorUp=function(){this.moveCursorBy(-1,0)},o.prototype.moveCursorDown=function(){this.moveCursorBy(1,0)},o.prototype.wouldMoveIntoSoftTab=function(i,a,l){var d=i.column,c=i.column+a;return l<0&&(d=i.column-a,c=i.column),this.session.isTabStop(i)&&this.doc.getLine(i.row).slice(d,c).split(" ").length-1==a},o.prototype.moveCursorLeft=function(){var i=this.lead.getPosition(),a;if(a=this.session.getFoldAt(i.row,i.column,-1))this.moveCursorTo(a.start.row,a.start.column);else if(i.column===0)i.row>0&&this.moveCursorTo(i.row-1,this.doc.getLine(i.row-1).length);else{var l=this.session.getTabSize();this.wouldMoveIntoSoftTab(i,l,-1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,-l):this.moveCursorBy(0,-1)}},o.prototype.moveCursorRight=function(){var i=this.lead.getPosition(),a;if(a=this.session.getFoldAt(i.row,i.column,1))this.moveCursorTo(a.end.row,a.end.column);else if(this.lead.column==this.doc.getLine(this.lead.row).length)this.lead.row<this.doc.getLength()-1&&this.moveCursorTo(this.lead.row+1,0);else{var l=this.session.getTabSize(),i=this.lead;this.wouldMoveIntoSoftTab(i,l,1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,l):this.moveCursorBy(0,1)}},o.prototype.moveCursorLineStart=function(){var i=this.lead.row,a=this.lead.column,l=this.session.documentToScreenRow(i,a),d=this.session.screenToDocumentPosition(l,0),c=this.session.getDisplayLine(i,null,d.row,d.column),m=c.match(/^\s*/);m[0].length!=a&&!this.session.$useEmacsStyleLineStart&&(d.column+=m[0].length),this.moveCursorToPosition(d)},o.prototype.moveCursorLineEnd=function(){var i=this.lead,a=this.session.getDocumentLastRowColumnPosition(i.row,i.column);if(this.lead.column==a.column){var l=this.session.getLine(a.row);if(a.column==l.length){var d=l.search(/\s+$/);d>0&&(a.column=d)}}this.moveCursorTo(a.row,a.column)},o.prototype.moveCursorFileEnd=function(){var i=this.doc.getLength()-1,a=this.doc.getLine(i).length;this.moveCursorTo(i,a)},o.prototype.moveCursorFileStart=function(){this.moveCursorTo(0,0)},o.prototype.moveCursorLongWordRight=function(){var i=this.lead.row,a=this.lead.column,l=this.doc.getLine(i),d=l.substring(a);this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;var c=this.session.getFoldAt(i,a,1);if(c){this.moveCursorTo(c.end.row,c.end.column);return}if(this.session.nonTokenRe.exec(d)&&(a+=this.session.nonTokenRe.lastIndex,this.session.nonTokenRe.lastIndex=0,d=l.substring(a)),a>=l.length){this.moveCursorTo(i,l.length),this.moveCursorRight(),i<this.doc.getLength()-1&&this.moveCursorWordRight();return}this.session.tokenRe.exec(d)&&(a+=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(i,a)},o.prototype.moveCursorLongWordLeft=function(){var i=this.lead.row,a=this.lead.column,l;if(l=this.session.getFoldAt(i,a,-1)){this.moveCursorTo(l.start.row,l.start.column);return}var d=this.session.getFoldStringAt(i,a,-1);d==null&&(d=this.doc.getLine(i).substring(0,a));var c=p.stringReverse(d);if(this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0,this.session.nonTokenRe.exec(c)&&(a-=this.session.nonTokenRe.lastIndex,c=c.slice(this.session.nonTokenRe.lastIndex),this.session.nonTokenRe.lastIndex=0),a<=0){this.moveCursorTo(i,0),this.moveCursorLeft(),i>0&&this.moveCursorWordLeft();return}this.session.tokenRe.exec(c)&&(a-=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(i,a)},o.prototype.$shortWordEndIndex=function(i){var a=0,l,d=/\s/,c=this.session.tokenRe;if(c.lastIndex=0,this.session.tokenRe.exec(i))a=this.session.tokenRe.lastIndex;else{for(;(l=i[a])&&d.test(l);)a++;if(a<1){for(c.lastIndex=0;(l=i[a])&&!c.test(l);)if(c.lastIndex=0,a++,d.test(l))if(a>2){a--;break}else{for(;(l=i[a])&&d.test(l);)a++;if(a>2)break}}}return c.lastIndex=0,a},o.prototype.moveCursorShortWordRight=function(){var i=this.lead.row,a=this.lead.column,l=this.doc.getLine(i),d=l.substring(a),c=this.session.getFoldAt(i,a,1);if(c)return this.moveCursorTo(c.end.row,c.end.column);if(a==l.length){var m=this.doc.getLength();do i++,d=this.doc.getLine(i);while(i<m&&/^\s*$/.test(d));/^\s+/.test(d)||(d=""),a=0}var h=this.$shortWordEndIndex(d);this.moveCursorTo(i,a+h)},o.prototype.moveCursorShortWordLeft=function(){var i=this.lead.row,a=this.lead.column,l;if(l=this.session.getFoldAt(i,a,-1))return this.moveCursorTo(l.start.row,l.start.column);var d=this.session.getLine(i).substring(0,a);if(a===0){do i--,d=this.doc.getLine(i);while(i>0&&/^\s*$/.test(d));a=d.length,/\s+$/.test(d)||(d="")}var c=p.stringReverse(d),m=this.$shortWordEndIndex(c);return this.moveCursorTo(i,a-m)},o.prototype.moveCursorWordRight=function(){this.session.$selectLongWords?this.moveCursorLongWordRight():this.moveCursorShortWordRight()},o.prototype.moveCursorWordLeft=function(){this.session.$selectLongWords?this.moveCursorLongWordLeft():this.moveCursorShortWordLeft()},o.prototype.moveCursorBy=function(i,a){var l=this.session.documentToScreenPosition(this.lead.row,this.lead.column),d;if(a===0&&(i!==0&&(this.session.$bidiHandler.isBidiRow(l.row,this.lead.row)?(d=this.session.$bidiHandler.getPosLeft(l.column),l.column=Math.round(d/this.session.$bidiHandler.charWidths[0])):d=l.column*this.session.$bidiHandler.charWidths[0]),this.$desiredColumn?l.column=this.$desiredColumn:this.$desiredColumn=l.column),i!=0&&this.session.lineWidgets&&this.session.lineWidgets[this.lead.row]){var c=this.session.lineWidgets[this.lead.row];i<0?i-=c.rowsAbove||0:i>0&&(i+=c.rowCount-(c.rowsAbove||0))}var m=this.session.screenToDocumentPosition(l.row+i,l.column,d);i!==0&&a===0&&m.row===this.lead.row&&(m.column,this.lead.column),this.moveCursorTo(m.row,m.column+a,a===0)},o.prototype.moveCursorToPosition=function(i){this.moveCursorTo(i.row,i.column)},o.prototype.moveCursorTo=function(i,a,l){var d=this.session.getFoldAt(i,a,1);d&&(i=d.start.row,a=d.start.column),this.$keepDesiredColumnOnChange=!0;var c=this.session.getLine(i);/[\uDC00-\uDFFF]/.test(c.charAt(a))&&c.charAt(a-1)&&(this.lead.row==i&&this.lead.column==a+1?a=a-1:a=a+1),this.lead.setPosition(i,a),this.$keepDesiredColumnOnChange=!1,l||(this.$desiredColumn=null)},o.prototype.moveCursorToScreen=function(i,a,l){var d=this.session.screenToDocumentPosition(i,a);this.moveCursorTo(d.row,d.column,l)},o.prototype.detach=function(){this.lead.detach(),this.anchor.detach()},o.prototype.fromOrientedRange=function(i){this.setSelectionRange(i,i.cursor==i.start),this.$desiredColumn=i.desiredColumn||this.$desiredColumn},o.prototype.toOrientedRange=function(i){var a=this.getRange();return i?(i.start.column=a.start.column,i.start.row=a.start.row,i.end.column=a.end.column,i.end.row=a.end.row):i=a,i.cursor=this.isBackwards()?i.start:i.end,i.desiredColumn=this.$desiredColumn,i},o.prototype.getRangeOfMovements=function(i){var a=this.getCursor();try{i(this);var l=this.getCursor();return s.fromPoints(a,l)}catch{return s.fromPoints(a,a)}finally{this.moveCursorToPosition(a)}},o.prototype.toJSON=function(){if(this.rangeCount)var i=this.ranges.map(function(a){var l=a.clone();return l.isBackwards=a.cursor==a.start,l});else{var i=this.getRange();i.isBackwards=this.isBackwards()}return i},o.prototype.fromJSON=function(i){if(i.start==null)if(this.rangeList&&i.length>1){this.toSingleRange(i[0]);for(var a=i.length;a--;){var l=s.fromPoints(i[a].start,i[a].end);i[a].isBackwards&&(l.cursor=l.start),this.addRange(l,!0)}return}else i=i[0];this.rangeList&&this.toSingleRange(i),this.setSelectionRange(i,i.isBackwards)},o.prototype.isEqual=function(i){if((i.length||this.rangeCount)&&i.length!=this.rangeCount)return!1;if(!i.length||!this.ranges)return this.getRange().isEqual(i);for(var a=this.ranges.length;a--;)if(!this.ranges[a].isEqual(i[a]))return!1;return!0},o}();u.prototype.setSelectionAnchor=u.prototype.setAnchor,u.prototype.getSelectionAnchor=u.prototype.getAnchor,u.prototype.setSelectionRange=u.prototype.setRange,n.implement(u.prototype,g),t.Selection=u});ace.define("ace/tokenizer",["require","exports","module","ace/lib/report_error"],function(e,t,r){"use strict";var n=e("./lib/report_error").reportError,p=2e3,g=function(){function s(u){this.splitRegex,this.states=u,this.regExps={},this.matchMappings={};for(var o in this.states){for(var i=this.states[o],a=[],l=0,d=this.matchMappings[o]={defaultToken:"text"},c="g",m=[],h=0;h<i.length;h++){var v=i[h];if(v.defaultToken&&(d.defaultToken=v.defaultToken),v.caseInsensitive&&c.indexOf("i")===-1&&(c+="i"),v.unicode&&c.indexOf("u")===-1&&(c+="u"),v.regex!=null){v.regex instanceof RegExp&&(v.regex=v.regex.toString().slice(1,-1));var k=v.regex,x=new RegExp("(?:("+k+")|(.))").exec("a").length-2;Array.isArray(v.token)?v.token.length==1||x==1?v.token=v.token[0]:x-1!=v.token.length?(this.reportError("number of classes and regexp groups doesn't match",{rule:v,groupCount:x-1}),v.token=v.token[0]):(v.tokenArray=v.token,v.token=null,v.onMatch=this.$arrayTokens):typeof v.token=="function"&&!v.onMatch&&(x>1?v.onMatch=this.$applyToken:v.onMatch=v.token),x>1&&(/\\\d/.test(v.regex)?k=v.regex.replace(/\\([0-9]+)/g,function(T,S){return"\\"+(parseInt(S,10)+l+1)}):(x=1,k=this.removeCapturingGroups(v.regex)),!v.splitRegex&&typeof v.token!="string"&&m.push(v)),d[l]=h,l+=x,a.push(k),v.onMatch||(v.onMatch=null)}}a.length||(d[0]=0,a.push("$")),m.forEach(function(T){T.splitRegex=this.createSplitterRegexp(T.regex,c)},this),this.regExps[o]=new RegExp("("+a.join(")|(")+")|($)",c)}}return s.prototype.$setMaxTokenCount=function(u){p=u|0},s.prototype.$applyToken=function(u){var o=this.splitRegex.exec(u).slice(1),i=this.token.apply(this,o);if(typeof i=="string")return[{type:i,value:u}];for(var a=[],l=0,d=i.length;l<d;l++)o[l]&&(a[a.length]={type:i[l],value:o[l]});return a},s.prototype.$arrayTokens=function(u){if(!u)return[];var o=this.splitRegex.exec(u);if(!o)return"text";for(var i=[],a=this.tokenArray,l=0,d=a.length;l<d;l++)o[l+1]&&(i[i.length]={type:a[l],value:o[l+1]});return i},s.prototype.removeCapturingGroups=function(u){var o=u.replace(/\\.|\[(?:\\.|[^\\\]])*|\(\?[:=!<]|(\()/g,function(i,a){return a?"(?:":i});return o},s.prototype.createSplitterRegexp=function(u,o){if(u.indexOf("(?=")!=-1){var i=0,a=!1,l={};u.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g,function(d,c,m,h,v,k){return a?a=v!="]":v?a=!0:h?(i==l.stack&&(l.end=k+1,l.stack=-1),i--):m&&(i++,m.length!=1&&(l.stack=i,l.start=k)),d}),l.end!=null&&/^\)*$/.test(u.substr(l.end))&&(u=u.substring(0,l.start)+u.substr(l.end))}return u.charAt(0)!="^"&&(u="^"+u),u.charAt(u.length-1)!="$"&&(u+="$"),new RegExp(u,(o||"").replace("g",""))},s.prototype.getLineTokens=function(u,o){if(o&&typeof o!="string"){var i=o.slice(0);o=i[0],o==="#tmp"&&(i.shift(),o=i.shift())}else var i=[];var a=o||"start",l=this.states[a];l||(a="start",l=this.states[a]);var d=this.matchMappings[a],c=this.regExps[a];c.lastIndex=0;for(var m,h=[],v=0,k=0,x={type:null,value:""};m=c.exec(u);){var T=d.defaultToken,S=null,f=m[0],L=c.lastIndex;if(L-f.length>v){var $=u.substring(v,L-f.length);x.type==T?x.value+=$:(x.type&&h.push(x),x={type:T,value:$})}for(var A=0;A<m.length-2;A++)if(m[A+1]!==void 0){S=l[d[A]],S.onMatch?T=S.onMatch(f,a,i,u):T=S.token,S.next&&(typeof S.next=="string"?a=S.next:a=S.next(a,i),l=this.states[a],l||(this.reportError("state doesn't exist",a),a="start",l=this.states[a]),d=this.matchMappings[a],v=L,c=this.regExps[a],c.lastIndex=L),S.consumeLineEnd&&(v=L);break}if(f){if(typeof T=="string")(!S||S.merge!==!1)&&x.type===T?x.value+=f:(x.type&&h.push(x),x={type:T,value:f});else if(T){x.type&&h.push(x),x={type:null,value:""};for(var A=0;A<T.length;A++)h.push(T[A])}}if(v==u.length)break;if(v=L,k++>p){for(k>2*u.length&&this.reportError("infinite loop with in ace tokenizer",{startState:o,line:u});v<u.length;)x.type&&h.push(x),x={value:u.substring(v,v+=500),type:"overflow"};a="start",i=[];break}}return x.type&&h.push(x),i.length>1&&i[0]!==a&&i.unshift("#tmp",a),{tokens:h,state:i.length?i:a}},s}();g.prototype.reportError=n,t.Tokenizer=g});ace.define("ace/mode/text_highlight_rules",["require","exports","module","ace/lib/deep_copy"],function(e,t,r){"use strict";var n=e("../lib/deep_copy").deepCopy,p;p=function(){this.$rules={start:[{token:"empty_line",regex:"^$"},{defaultToken:"text"}]}},function(){this.addRules=function(u,o){if(!o){for(var i in u)this.$rules[i]=u[i];return}for(var i in u){for(var a=u[i],l=0;l<a.length;l++){var d=a[l];(d.next||d.onMatch)&&(typeof d.next=="string"&&d.next.indexOf(o)!==0&&(d.next=o+d.next),d.nextState&&d.nextState.indexOf(o)!==0&&(d.nextState=o+d.nextState))}this.$rules[o+i]=a}},this.getRules=function(){return this.$rules},this.embedRules=function(u,o,i,a,l){var d=typeof u=="function"?new u().getRules():u;if(a)for(var c=0;c<a.length;c++)a[c]=o+a[c];else{a=[];for(var m in d)a.push(o+m)}if(this.addRules(d,o),i)for(var h=Array.prototype[l?"push":"unshift"],c=0;c<a.length;c++)h.apply(this.$rules[a[c]],n(i));this.$embeds||(this.$embeds=[]),this.$embeds.push(o)},this.getEmbeds=function(){return this.$embeds};var g=function(u,o){return(u!="start"||o.length)&&o.unshift(this.nextState,u),this.nextState},s=function(u,o){return o.shift(),o.shift()||"start"};this.normalizeRules=function(){var u=0,o=this.$rules;function i(a){var l=o[a];l.processed=!0;for(var d=0;d<l.length;d++){var c=l[d],m=null;Array.isArray(c)&&(m=c,c={}),!c.regex&&c.start&&(c.regex=c.start,c.next||(c.next=[]),c.next.push({defaultToken:c.token},{token:c.token+".end",regex:c.end||c.start,next:"pop"}),c.token=c.token+".start",c.push=!0);var h=c.next||c.push;if(h&&Array.isArray(h)){var v=c.stateName;v||(v=c.token,typeof v!="string"&&(v=v[0]||""),o[v]&&(v+=u++)),o[v]=h,c.next=v,i(v)}else h=="pop"&&(c.next=s);if(c.push&&(c.nextState=c.next||c.push,c.next=g,delete c.push),c.rules)for(var k in c.rules)o[k]?o[k].push&&o[k].push.apply(o[k],c.rules[k]):o[k]=c.rules[k];var x=typeof c=="string"?c:c.include;if(x&&(x==="$self"&&(x="start"),Array.isArray(x)?m=x.map(function(S){return o[S]}):m=o[x]),m){var T=[d,1].concat(m);c.noEscape&&(T=T.filter(function(S){return!S.next})),l.splice.apply(l,T),d--}c.keywordMap&&(c.token=this.createKeywordMapper(c.keywordMap,c.defaultToken||"text",c.caseInsensitive),delete c.defaultToken)}}Object.keys(o).forEach(i,this)},this.createKeywordMapper=function(u,o,i,a){var l=Object.create(null);return this.$keywordList=[],Object.keys(u).forEach(function(d){for(var c=u[d],m=c.split(a||"|"),h=m.length;h--;){var v=m[h];this.$keywordList.push(v),i&&(v=v.toLowerCase()),l[v]=d}},this),u=null,i?function(d){return l[d.toLowerCase()]||o}:function(d){return l[d]||o}},this.getKeywords=function(){return this.$keywords}}.call(p.prototype),t.TextHighlightRules=p});ace.define("ace/mode/behaviour",["require","exports","module"],function(e,t,r){"use strict";var n;n=function(){this.$behaviours={}},function(){this.add=function(p,g,s){switch(void 0){case this.$behaviours:this.$behaviours={};case this.$behaviours[p]:this.$behaviours[p]={}}this.$behaviours[p][g]=s},this.addBehaviours=function(p){for(var g in p)for(var s in p[g])this.add(g,s,p[g][s])},this.remove=function(p){this.$behaviours&&this.$behaviours[p]&&delete this.$behaviours[p]},this.inherit=function(p,g){if(typeof p=="function")var s=new p().getBehaviours(g);else var s=p.getBehaviours(g);this.addBehaviours(s)},this.getBehaviours=function(p){if(p){for(var g={},s=0;s<p.length;s++)this.$behaviours[p[s]]&&(g[p[s]]=this.$behaviours[p[s]]);return g}else return this.$behaviours}}.call(n.prototype),t.Behaviour=n});ace.define("ace/token_iterator",["require","exports","module","ace/range"],function(e,t,r){"use strict";var n=e("./range").Range,p=function(){function g(s,u,o){this.$session=s,this.$row=u,this.$rowTokens=s.getTokens(u);var i=s.getTokenAt(u,o);this.$tokenIndex=i?i.index:-1}return g.prototype.stepBackward=function(){for(this.$tokenIndex-=1;this.$tokenIndex<0;){if(this.$row-=1,this.$row<0)return this.$row=0,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]},g.prototype.stepForward=function(){this.$tokenIndex+=1;for(var s;this.$tokenIndex>=this.$rowTokens.length;){if(this.$row+=1,s||(s=this.$session.getLength()),this.$row>=s)return this.$row=s-1,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]},g.prototype.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]},g.prototype.getCurrentTokenRow=function(){return this.$row},g.prototype.getCurrentTokenColumn=function(){var s=this.$rowTokens,u=this.$tokenIndex,o=s[u].start;if(o!==void 0)return o;for(o=0;u>0;)u-=1,o+=s[u].value.length;return o},g.prototype.getCurrentTokenPosition=function(){return{row:this.$row,column:this.getCurrentTokenColumn()}},g.prototype.getCurrentTokenRange=function(){var s=this.$rowTokens[this.$tokenIndex],u=this.getCurrentTokenColumn();return new n(this.$row,u,this.$row,u+s.value.length)},g}();t.TokenIterator=p});ace.define("ace/mode/behaviour/cstyle",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator","ace/lib/lang"],function(e,t,r){"use strict";var n=e("../../lib/oop"),p=e("../behaviour").Behaviour,g=e("../../token_iterator").TokenIterator,s=e("../../lib/lang"),u=["text","paren.rparen","rparen","paren","punctuation.operator"],o=["text","paren.rparen","rparen","paren","punctuation.operator","comment"],i,a={},l={'"':'"',"'":"'"},d=function(h){var v=-1;if(h.multiSelect&&(v=h.selection.index,a.rangeCount!=h.multiSelect.rangeCount&&(a={rangeCount:h.multiSelect.rangeCount})),a[v])return i=a[v];i=a[v]={autoInsertedBrackets:0,autoInsertedRow:-1,autoInsertedLineEnd:"",maybeInsertedBrackets:0,maybeInsertedRow:-1,maybeInsertedLineStart:"",maybeInsertedLineEnd:""}},c=function(h,v,k,x){var T=h.end.row-h.start.row;return{text:k+v+x,selection:[0,h.start.column+1,T,h.end.column+(T?0:1)]}},m;m=function(h){h=h||{},this.add("braces","insertion",function(v,k,x,T,S){var f=x.getCursorPosition(),L=T.doc.getLine(f.row);if(S=="{"){d(x);var $=x.getSelectionRange(),A=T.doc.getTextRange($),C=T.getTokenAt(f.row,f.column);if(A!==""&&A!=="{"&&x.getWrapBehavioursEnabled())return c($,A,"{","}");if(C&&/(?:string)\.quasi|\.xml/.test(C.type)){var w=[/tag\-(?:open|name)/,/attribute\-name/];return w.some(function(I){return I.test(C.type)})||/(string)\.quasi/.test(C.type)&&C.value[f.column-C.start-1]!=="$"?void 0:(m.recordAutoInsert(x,T,"}"),{text:"{}",selection:[1,1]})}else if(m.isSaneInsertion(x,T))return/[\]\}\)]/.test(L[f.column])||x.inMultiSelectMode||h.braces?(m.recordAutoInsert(x,T,"}"),{text:"{}",selection:[1,1]}):(m.recordMaybeInsert(x,T,"{"),{text:"{",selection:[1,1]})}else if(S=="}"){d(x);var y=L.substring(f.column,f.column+1);if(y=="}"){var b=T.$findOpeningBracket("}",{column:f.column+1,row:f.row});if(b!==null&&m.isAutoInsertedClosing(f,L,S))return m.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}else if(S==`
`||S==`\r
`){d(x);var E="";m.isMaybeInsertedClosing(f,L)&&(E=s.stringRepeat("}",i.maybeInsertedBrackets),m.clearMaybeInsertedClosing());var y=L.substring(f.column,f.column+1);if(y==="}"){var _=T.findMatchingBracket({row:f.row,column:f.column+1},"}");if(!_)return null;var R=this.$getIndent(T.getLine(_.row))}else if(E)var R=this.$getIndent(L);else{m.clearMaybeInsertedClosing();return}var M=R+T.getTabString();return{text:`
`+M+`
`+R+E,selection:[1,M.length,1,M.length]}}else m.clearMaybeInsertedClosing()}),this.add("braces","deletion",function(v,k,x,T,S){var f=T.doc.getTextRange(S);if(!S.isMultiLine()&&f=="{"){d(x);var L=T.doc.getLine(S.start.row),$=L.substring(S.end.column,S.end.column+1);if($=="}")return S.end.column++,S;i.maybeInsertedBrackets--}}),this.add("parens","insertion",function(v,k,x,T,S){if(S=="("){d(x);var f=x.getSelectionRange(),L=T.doc.getTextRange(f);if(L!==""&&x.getWrapBehavioursEnabled())return c(f,L,"(",")");if(m.isSaneInsertion(x,T))return m.recordAutoInsert(x,T,")"),{text:"()",selection:[1,1]}}else if(S==")"){d(x);var $=x.getCursorPosition(),A=T.doc.getLine($.row),C=A.substring($.column,$.column+1);if(C==")"){var w=T.$findOpeningBracket(")",{column:$.column+1,row:$.row});if(w!==null&&m.isAutoInsertedClosing($,A,S))return m.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("parens","deletion",function(v,k,x,T,S){var f=T.doc.getTextRange(S);if(!S.isMultiLine()&&f=="("){d(x);var L=T.doc.getLine(S.start.row),$=L.substring(S.start.column+1,S.start.column+2);if($==")")return S.end.column++,S}}),this.add("brackets","insertion",function(v,k,x,T,S){if(S=="["){d(x);var f=x.getSelectionRange(),L=T.doc.getTextRange(f);if(L!==""&&x.getWrapBehavioursEnabled())return c(f,L,"[","]");if(m.isSaneInsertion(x,T))return m.recordAutoInsert(x,T,"]"),{text:"[]",selection:[1,1]}}else if(S=="]"){d(x);var $=x.getCursorPosition(),A=T.doc.getLine($.row),C=A.substring($.column,$.column+1);if(C=="]"){var w=T.$findOpeningBracket("]",{column:$.column+1,row:$.row});if(w!==null&&m.isAutoInsertedClosing($,A,S))return m.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("brackets","deletion",function(v,k,x,T,S){var f=T.doc.getTextRange(S);if(!S.isMultiLine()&&f=="["){d(x);var L=T.doc.getLine(S.start.row),$=L.substring(S.start.column+1,S.start.column+2);if($=="]")return S.end.column++,S}}),this.add("string_dquotes","insertion",function(v,k,x,T,S){var f=T.$mode.$quotes||l;if(S.length==1&&f[S]){if(this.lineCommentStart&&this.lineCommentStart.indexOf(S)!=-1)return;d(x);var L=S,$=x.getSelectionRange(),A=T.doc.getTextRange($);if(A!==""&&(A.length!=1||!f[A])&&x.getWrapBehavioursEnabled())return c($,A,L,L);if(!A){var C=x.getCursorPosition(),w=T.doc.getLine(C.row),y=w.substring(C.column-1,C.column),b=w.substring(C.column,C.column+1),E=T.getTokenAt(C.row,C.column),_=T.getTokenAt(C.row,C.column+1);if(y=="\\"&&E&&/escape/.test(E.type))return null;var R=E&&/string|escape/.test(E.type),M=!_||/string|escape/.test(_.type),I;if(b==L)I=R!==M,I&&/string\.end/.test(_.type)&&(I=!1);else{if(R&&!M||R&&M)return null;var P=T.$mode.tokenRe;P.lastIndex=0;var O=P.test(y);P.lastIndex=0;var F=P.test(b),D=T.$mode.$pairQuotesAfter,z=D&&D[L]&&D[L].test(y);if(!z&&O||F||b&&!/[\s;,.})\]\\]/.test(b))return null;var N=w[C.column-2];if(y==L&&(N==L||P.test(N)))return null;I=!0}return{text:I?L+L:"",selection:[1,1]}}}}),this.add("string_dquotes","deletion",function(v,k,x,T,S){var f=T.$mode.$quotes||l,L=T.doc.getTextRange(S);if(!S.isMultiLine()&&f.hasOwnProperty(L)){d(x);var $=T.doc.getLine(S.start.row),A=$.substring(S.start.column+1,S.start.column+2);if(A==L)return S.end.column++,S}}),h.closeDocComment!==!1&&this.add("doc comment end","insertion",function(v,k,x,T,S){if(v==="doc-start"&&(S===`
`||S===`\r
`)&&x.selection.isEmpty()){var f=x.getCursorPosition();if(f.column===0)return;for(var L=T.doc.getLine(f.row),$=T.doc.getLine(f.row+1),A=T.getTokens(f.row),C=0,w=0;w<A.length;w++){C+=A[w].value.length;var y=A[w];if(C>=f.column){if(C===f.column){if(!/\.doc/.test(y.type))return;if(/\*\//.test(y.value)){var b=A[w+1];if(!b||!/\.doc/.test(b.type))return}}var E=f.column-(C-y.value.length),_=y.value.indexOf("*/"),R=y.value.indexOf("/**",_>-1?_+2:0);if(R!==-1&&E>R&&E<R+3||_!==-1&&R!==-1&&E>=_&&E<=R||!/\.doc/.test(y.type))return;break}}var M=this.$getIndent(L);if(/\s*\*/.test($))return/^\s*\*/.test(L)?{text:S+M+"* ",selection:[1,2+M.length,1,2+M.length]}:{text:S+M+" * ",selection:[1,3+M.length,1,3+M.length]};if(/\/\*\*/.test(L.substring(0,f.column)))return{text:S+M+" * "+S+" "+M+"*/",selection:[1,4+M.length,1,4+M.length]}}})},m.isSaneInsertion=function(h,v){var k=h.getCursorPosition(),x=new g(v,k.row,k.column);if(!this.$matchTokenType(x.getCurrentToken()||"text",u)){if(/[)}\]]/.test(h.session.getLine(k.row)[k.column]))return!0;var T=new g(v,k.row,k.column+1);if(!this.$matchTokenType(T.getCurrentToken()||"text",u))return!1}return x.stepForward(),x.getCurrentTokenRow()!==k.row||this.$matchTokenType(x.getCurrentToken()||"text",o)},m.$matchTokenType=function(h,v){return v.indexOf(h.type||h)>-1},m.recordAutoInsert=function(h,v,k){var x=h.getCursorPosition(),T=v.doc.getLine(x.row);this.isAutoInsertedClosing(x,T,i.autoInsertedLineEnd[0])||(i.autoInsertedBrackets=0),i.autoInsertedRow=x.row,i.autoInsertedLineEnd=k+T.substr(x.column),i.autoInsertedBrackets++},m.recordMaybeInsert=function(h,v,k){var x=h.getCursorPosition(),T=v.doc.getLine(x.row);this.isMaybeInsertedClosing(x,T)||(i.maybeInsertedBrackets=0),i.maybeInsertedRow=x.row,i.maybeInsertedLineStart=T.substr(0,x.column)+k,i.maybeInsertedLineEnd=T.substr(x.column),i.maybeInsertedBrackets++},m.isAutoInsertedClosing=function(h,v,k){return i.autoInsertedBrackets>0&&h.row===i.autoInsertedRow&&k===i.autoInsertedLineEnd[0]&&v.substr(h.column)===i.autoInsertedLineEnd},m.isMaybeInsertedClosing=function(h,v){return i.maybeInsertedBrackets>0&&h.row===i.maybeInsertedRow&&v.substr(h.column)===i.maybeInsertedLineEnd&&v.substr(0,h.column)==i.maybeInsertedLineStart},m.popAutoInsertedClosing=function(){i.autoInsertedLineEnd=i.autoInsertedLineEnd.substr(1),i.autoInsertedBrackets--},m.clearMaybeInsertedClosing=function(){i&&(i.maybeInsertedBrackets=0,i.maybeInsertedRow=-1)},n.inherits(m,p),t.CstyleBehaviour=m});ace.define("ace/unicode",["require","exports","module"],function(e,t,r){"use strict";for(var n=[48,9,8,25,5,0,2,25,48,0,11,0,5,0,6,22,2,30,2,457,5,11,15,4,8,0,2,0,18,116,2,1,3,3,9,0,2,2,2,0,2,19,2,82,2,138,2,4,3,155,12,37,3,0,8,38,10,44,2,0,2,1,2,1,2,0,9,26,6,2,30,10,7,61,2,9,5,101,2,7,3,9,2,18,3,0,17,58,3,100,15,53,5,0,6,45,211,57,3,18,2,5,3,11,3,9,2,1,7,6,2,2,2,7,3,1,3,21,2,6,2,0,4,3,3,8,3,1,3,3,9,0,5,1,2,4,3,11,16,2,2,5,5,1,3,21,2,6,2,1,2,1,2,1,3,0,2,4,5,1,3,2,4,0,8,3,2,0,8,15,12,2,2,8,2,2,2,21,2,6,2,1,2,4,3,9,2,2,2,2,3,0,16,3,3,9,18,2,2,7,3,1,3,21,2,6,2,1,2,4,3,8,3,1,3,2,9,1,5,1,2,4,3,9,2,0,17,1,2,5,4,2,2,3,4,1,2,0,2,1,4,1,4,2,4,11,5,4,4,2,2,3,3,0,7,0,15,9,18,2,2,7,2,2,2,22,2,9,2,4,4,7,2,2,2,3,8,1,2,1,7,3,3,9,19,1,2,7,2,2,2,22,2,9,2,4,3,8,2,2,2,3,8,1,8,0,2,3,3,9,19,1,2,7,2,2,2,22,2,15,4,7,2,2,2,3,10,0,9,3,3,9,11,5,3,1,2,17,4,23,2,8,2,0,3,6,4,0,5,5,2,0,2,7,19,1,14,57,6,14,2,9,40,1,2,0,3,1,2,0,3,0,7,3,2,6,2,2,2,0,2,0,3,1,2,12,2,2,3,4,2,0,2,5,3,9,3,1,35,0,24,1,7,9,12,0,2,0,2,0,5,9,2,35,5,19,2,5,5,7,2,35,10,0,58,73,7,77,3,37,11,42,2,0,4,328,2,3,3,6,2,0,2,3,3,40,2,3,3,32,2,3,3,6,2,0,2,3,3,14,2,56,2,3,3,66,5,0,33,15,17,84,13,619,3,16,2,25,6,74,22,12,2,6,12,20,12,19,13,12,2,2,2,1,13,51,3,29,4,0,5,1,3,9,34,2,3,9,7,87,9,42,6,69,11,28,4,11,5,11,11,39,3,4,12,43,5,25,7,10,38,27,5,62,2,28,3,10,7,9,14,0,89,75,5,9,18,8,13,42,4,11,71,55,9,9,4,48,83,2,2,30,14,230,23,280,3,5,3,37,3,5,3,7,2,0,2,0,2,0,2,30,3,52,2,6,2,0,4,2,2,6,4,3,3,5,5,12,6,2,2,6,67,1,20,0,29,0,14,0,17,4,60,12,5,0,4,11,18,0,5,0,3,9,2,0,4,4,7,0,2,0,2,0,2,3,2,10,3,3,6,4,5,0,53,1,2684,46,2,46,2,132,7,6,15,37,11,53,10,0,17,22,10,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,31,48,0,470,1,36,5,2,4,6,1,5,85,3,1,3,2,2,89,2,3,6,40,4,93,18,23,57,15,513,6581,75,20939,53,1164,68,45,3,268,4,27,21,31,3,13,13,1,2,24,9,69,11,1,38,8,3,102,3,1,111,44,25,51,13,68,12,9,7,23,4,0,5,45,3,35,13,28,4,64,15,10,39,54,10,13,3,9,7,22,4,1,5,66,25,2,227,42,2,1,3,9,7,11171,13,22,5,48,8453,301,3,61,3,105,39,6,13,4,6,11,2,12,2,4,2,0,2,1,2,1,2,107,34,362,19,63,3,53,41,11,5,15,17,6,13,1,25,2,33,4,2,134,20,9,8,25,5,0,2,25,12,88,4,5,3,5,3,5,3,2],p=0,g=[],s=0;s<n.length;s+=2)g.push(p+=n[s]),n[s+1]&&g.push(45,p+=n[s+1]);t.wordChars=String.fromCharCode.apply(null,g)});ace.define("ace/mode/text",["require","exports","module","ace/config","ace/tokenizer","ace/mode/text_highlight_rules","ace/mode/behaviour/cstyle","ace/unicode","ace/lib/lang","ace/token_iterator","ace/range"],function(e,t,r){"use strict";var n=e("../config"),p=e("../tokenizer").Tokenizer,g=e("./text_highlight_rules").TextHighlightRules,s=e("./behaviour/cstyle").CstyleBehaviour,u=e("../unicode"),o=e("../lib/lang"),i=e("../token_iterator").TokenIterator,a=e("../range").Range,l;l=function(){this.HighlightRules=g},function(){this.$defaultBehaviour=new s,this.tokenRe=new RegExp("^["+u.wordChars+"\\$_]+","g"),this.nonTokenRe=new RegExp("^(?:[^"+u.wordChars+"\\$_]|\\s])+","g"),this.getTokenizer=function(){return this.$tokenizer||(this.$highlightRules=this.$highlightRules||new this.HighlightRules(this.$highlightRuleConfig),this.$tokenizer=new p(this.$highlightRules.getRules())),this.$tokenizer},this.lineCommentStart="",this.blockComment="",this.toggleCommentLines=function(d,c,m,h){var v=c.doc,k=!0,x=!0,T=1/0,S=c.getTabSize(),f=!1;if(this.lineCommentStart){if(Array.isArray(this.lineCommentStart))var A=this.lineCommentStart.map(o.escapeRegExp).join("|"),L=this.lineCommentStart[0];else var A=o.escapeRegExp(this.lineCommentStart),L=this.lineCommentStart;A=new RegExp("^(\\s*)(?:"+A+") ?"),f=c.getUseSoftTabs();var y=function(F,D){var z=F.match(A);if(z){var N=z[1].length,W=z[0].length;!_(F,N,W)&&z[0][W-1]==" "&&W--,v.removeInLine(D,N,W)}},E=L+" ",w=function(F,D){(!k||/\S/.test(F))&&(_(F,T,T)?v.insertInLine({row:D,column:T},E):v.insertInLine({row:D,column:T},L))},b=function(F,D){return A.test(F)},_=function(F,D,z){for(var N=0;D--&&F.charAt(D)==" ";)N++;if(N%S!=0)return!1;for(var N=0;F.charAt(z++)==" ";)N++;return S>2?N%S!=S-1:N%S==0}}else{if(!this.blockComment)return!1;var L=this.blockComment.start,$=this.blockComment.end,A=new RegExp("^(\\s*)(?:"+o.escapeRegExp(L)+")"),C=new RegExp("(?:"+o.escapeRegExp($)+")\\s*$"),w=function(I,P){b(I,P)||(!k||/\S/.test(I))&&(v.insertInLine({row:P,column:I.length},$),v.insertInLine({row:P,column:T},L))},y=function(I,P){var O;(O=I.match(C))&&v.removeInLine(P,I.length-O[0].length,I.length),(O=I.match(A))&&v.removeInLine(P,O[1].length,O[0].length)},b=function(I,P){if(A.test(I))return!0;for(var O=c.getTokens(P),F=0;F<O.length;F++)if(O[F].type==="comment")return!0}}function R(I){for(var P=m;P<=h;P++)I(v.getLine(P),P)}var M=1/0;R(function(I,P){var O=I.search(/\S/);O!==-1?(O<T&&(T=O),x&&!b(I,P)&&(x=!1)):M>I.length&&(M=I.length)}),T==1/0&&(T=M,k=!1,x=!1),f&&T%S!=0&&(T=Math.floor(T/S)*S),R(x?y:w)},this.toggleBlockComment=function(d,c,m,h){var v=this.blockComment;if(v){!v.start&&v[0]&&(v=v[0]);var k=new i(c,h.row,h.column),x=k.getCurrentToken(),T=c.selection,S=c.selection.toOrientedRange(),f,L;if(x&&/comment/.test(x.type)){for(var $,A;x&&/comment/.test(x.type);){var C=x.value.indexOf(v.start);if(C!=-1){var w=k.getCurrentTokenRow(),y=k.getCurrentTokenColumn()+C;$=new a(w,y,w,y+v.start.length);break}x=k.stepBackward()}for(var k=new i(c,h.row,h.column),x=k.getCurrentToken();x&&/comment/.test(x.type);){var C=x.value.indexOf(v.end);if(C!=-1){var w=k.getCurrentTokenRow(),y=k.getCurrentTokenColumn()+C;A=new a(w,y,w,y+v.end.length);break}x=k.stepForward()}A&&c.remove(A),$&&(c.remove($),f=$.start.row,L=-v.start.length)}else L=v.start.length,f=m.start.row,c.insert(m.end,v.end),c.insert(m.start,v.start);S.start.row==f&&(S.start.column+=L),S.end.row==f&&(S.end.column+=L),c.selection.fromOrientedRange(S)}},this.getNextLineIndent=function(d,c,m){return this.$getIndent(c)},this.checkOutdent=function(d,c,m){return!1},this.autoOutdent=function(d,c,m){},this.$getIndent=function(d){return d.match(/^\s*/)[0]},this.createWorker=function(d){return null},this.createModeDelegates=function(d){this.$embeds=[],this.$modes={};for(var c in d)if(d[c]){var m=d[c],h=m.prototype.$id,v=n.$modes[h];v||(n.$modes[h]=v=new m),n.$modes[c]||(n.$modes[c]=v),this.$embeds.push(c),this.$modes[c]=v}for(var k=["toggleBlockComment","toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction","getCompletions"],x=function(S){(function(f){var L=k[S],$=f[L];f[k[S]]=function(){return this.$delegator(L,arguments,$)}})(T)},T=this,c=0;c<k.length;c++)x(c)},this.$delegator=function(d,c,m){var h=c[0]||"start";if(typeof h!="string"){if(Array.isArray(h[2])){var v=h[2][h[2].length-1],k=this.$modes[v];if(k)return k[d].apply(k,[h[1]].concat([].slice.call(c,1)))}h=h[0]||"start"}for(var x=0;x<this.$embeds.length;x++)if(this.$modes[this.$embeds[x]]){var T=h.split(this.$embeds[x]);if(!T[0]&&T[1]){c[0]=T[1];var k=this.$modes[this.$embeds[x]];return k[d].apply(k,c)}}var S=m.apply(this,c);return m?S:void 0},this.transformAction=function(d,c,m,h,v){if(this.$behaviour){var k=this.$behaviour.getBehaviours();for(var x in k)if(k[x][c]){var T=k[x][c].apply(this,arguments);if(T)return T}}},this.getKeywords=function(d){if(!this.completionKeywords){var c=this.$tokenizer.rules,m=[];for(var h in c)for(var v=c[h],k=0,x=v.length;k<x;k++)if(typeof v[k].token=="string")/keyword|support|storage/.test(v[k].token)&&m.push(v[k].regex);else if(typeof v[k].token=="object"){for(var T=0,S=v[k].token.length;T<S;T++)if(/keyword|support|storage/.test(v[k].token[T])){var h=v[k].regex.match(/\(.+?\)/g)[T];m.push(h.substr(1,h.length-2))}}this.completionKeywords=m}return d?m.concat(this.$keywordList||[]):this.$keywordList},this.$createKeywordList=function(){return this.$highlightRules||this.getTokenizer(),this.$keywordList=this.$highlightRules.$keywordList||[]},this.getCompletions=function(d,c,m,h){var v=this.$keywordList||this.$createKeywordList();return v.map(function(k){return{name:k,value:k,score:0,meta:"keyword"}})},this.$id="ace/mode/text"}.call(l.prototype),t.Mode=l});ace.define("ace/apply_delta",["require","exports","module"],function(e,t,r){"use strict";function n(s,u){throw console.log("Invalid Delta:",s),"Invalid Delta: "+u}function p(s,u){return u.row>=0&&u.row<s.length&&u.column>=0&&u.column<=s[u.row].length}function g(s,u){u.action!="insert"&&u.action!="remove"&&n(u,"delta.action must be 'insert' or 'remove'"),u.lines instanceof Array||n(u,"delta.lines must be an Array"),(!u.start||!u.end)&&n(u,"delta.start/end must be an present");var o=u.start;p(s,u.start)||n(u,"delta.start must be contained in document");var i=u.end;u.action=="remove"&&!p(s,i)&&n(u,"delta.end must contained in document for 'remove' actions");var a=i.row-o.row,l=i.column-(a==0?o.column:0);(a!=u.lines.length-1||u.lines[a].length!=l)&&n(u,"delta.range must match delta lines")}t.applyDelta=function(s,u,o){var i=u.start.row,a=u.start.column,l=s[i]||"";switch(u.action){case"insert":var d=u.lines;if(d.length===1)s[i]=l.substring(0,a)+u.lines[0]+l.substring(a);else{var c=[i,1].concat(u.lines);s.splice.apply(s,c),s[i]=l.substring(0,a)+s[i],s[i+u.lines.length-1]+=l.substring(a)}break;case"remove":var m=u.end.column,h=u.end.row;i===h?s[i]=l.substring(0,a)+l.substring(m):s.splice(i,h-i+1,l.substring(0,a)+s[h].substring(m));break}}});ace.define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t,r){"use strict";var n=e("./lib/oop"),p=e("./lib/event_emitter").EventEmitter,g=function(){function o(i,a,l){this.$onChange=this.onChange.bind(this),this.attach(i),typeof a!="number"?this.setPosition(a.row,a.column):this.setPosition(a,l)}return o.prototype.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},o.prototype.getDocument=function(){return this.document},o.prototype.onChange=function(i){if(!(i.start.row==i.end.row&&i.start.row!=this.row)&&!(i.start.row>this.row)){var a=u(i,{row:this.row,column:this.column},this.$insertRight);this.setPosition(a.row,a.column,!0)}},o.prototype.setPosition=function(i,a,l){var d;if(l?d={row:i,column:a}:d=this.$clipPositionToDocument(i,a),!(this.row==d.row&&this.column==d.column)){var c={row:this.row,column:this.column};this.row=d.row,this.column=d.column,this._signal("change",{old:c,value:d})}},o.prototype.detach=function(){this.document.off("change",this.$onChange)},o.prototype.attach=function(i){this.document=i||this.document,this.document.on("change",this.$onChange)},o.prototype.$clipPositionToDocument=function(i,a){var l={};return i>=this.document.getLength()?(l.row=Math.max(0,this.document.getLength()-1),l.column=this.document.getLine(l.row).length):i<0?(l.row=0,l.column=0):(l.row=i,l.column=Math.min(this.document.getLine(l.row).length,Math.max(0,a))),a<0&&(l.column=0),l},o}();g.prototype.$insertRight=!1,n.implement(g.prototype,p);function s(o,i,a){var l=a?o.column<=i.column:o.column<i.column;return o.row<i.row||o.row==i.row&&l}function u(o,i,a){var l=o.action=="insert",d=(l?1:-1)*(o.end.row-o.start.row),c=(l?1:-1)*(o.end.column-o.start.column),m=o.start,h=l?m:o.end;return s(i,m,a)?{row:i.row,column:i.column}:s(h,i,!a)?{row:i.row+d,column:i.column+(i.row==h.row?c:0)}:{row:m.row,column:m.column}}t.Anchor=g});ace.define("ace/document",["require","exports","module","ace/lib/oop","ace/apply_delta","ace/lib/event_emitter","ace/range","ace/anchor"],function(e,t,r){"use strict";var n=e("./lib/oop"),p=e("./apply_delta").applyDelta,g=e("./lib/event_emitter").EventEmitter,s=e("./range").Range,u=e("./anchor").Anchor,o=function(){function i(a){this.$lines=[""],a.length===0?this.$lines=[""]:Array.isArray(a)?this.insertMergedLines({row:0,column:0},a):this.insert({row:0,column:0},a)}return i.prototype.setValue=function(a){var l=this.getLength()-1;this.remove(new s(0,0,l,this.getLine(l).length)),this.insert({row:0,column:0},a||"")},i.prototype.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},i.prototype.createAnchor=function(a,l){return new u(this,a,l)},i.prototype.$detectNewLine=function(a){var l=a.match(/^.*?(\r\n|\r|\n)/m);this.$autoNewLine=l?l[1]:`
`,this._signal("changeNewLineMode")},i.prototype.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return`\r
`;case"unix":return`
`;default:return this.$autoNewLine||`
`}},i.prototype.setNewLineMode=function(a){this.$newLineMode!==a&&(this.$newLineMode=a,this._signal("changeNewLineMode"))},i.prototype.getNewLineMode=function(){return this.$newLineMode},i.prototype.isNewLine=function(a){return a==`\r
`||a=="\r"||a==`
`},i.prototype.getLine=function(a){return this.$lines[a]||""},i.prototype.getLines=function(a,l){return this.$lines.slice(a,l+1)},i.prototype.getAllLines=function(){return this.getLines(0,this.getLength())},i.prototype.getLength=function(){return this.$lines.length},i.prototype.getTextRange=function(a){return this.getLinesForRange(a).join(this.getNewLineCharacter())},i.prototype.getLinesForRange=function(a){var l;if(a.start.row===a.end.row)l=[this.getLine(a.start.row).substring(a.start.column,a.end.column)];else{l=this.getLines(a.start.row,a.end.row),l[0]=(l[0]||"").substring(a.start.column);var d=l.length-1;a.end.row-a.start.row==d&&(l[d]=l[d].substring(0,a.end.column))}return l},i.prototype.insertLines=function(a,l){return console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead."),this.insertFullLines(a,l)},i.prototype.removeLines=function(a,l){return console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead."),this.removeFullLines(a,l)},i.prototype.insertNewLine=function(a){return console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead."),this.insertMergedLines(a,["",""])},i.prototype.insert=function(a,l){return this.getLength()<=1&&this.$detectNewLine(l),this.insertMergedLines(a,this.$split(l))},i.prototype.insertInLine=function(a,l){var d=this.clippedPos(a.row,a.column),c=this.pos(a.row,a.column+l.length);return this.applyDelta({start:d,end:c,action:"insert",lines:[l]},!0),this.clonePos(c)},i.prototype.clippedPos=function(a,l){var d=this.getLength();a===void 0?a=d:a<0?a=0:a>=d&&(a=d-1,l=void 0);var c=this.getLine(a);return l==null&&(l=c.length),l=Math.min(Math.max(l,0),c.length),{row:a,column:l}},i.prototype.clonePos=function(a){return{row:a.row,column:a.column}},i.prototype.pos=function(a,l){return{row:a,column:l}},i.prototype.$clipPosition=function(a){var l=this.getLength();return a.row>=l?(a.row=Math.max(0,l-1),a.column=this.getLine(l-1).length):(a.row=Math.max(0,a.row),a.column=Math.min(Math.max(a.column,0),this.getLine(a.row).length)),a},i.prototype.insertFullLines=function(a,l){a=Math.min(Math.max(a,0),this.getLength());var d=0;a<this.getLength()?(l=l.concat([""]),d=0):(l=[""].concat(l),a--,d=this.$lines[a].length),this.insertMergedLines({row:a,column:d},l)},i.prototype.insertMergedLines=function(a,l){var d=this.clippedPos(a.row,a.column),c={row:d.row+l.length-1,column:(l.length==1?d.column:0)+l[l.length-1].length};return this.applyDelta({start:d,end:c,action:"insert",lines:l}),this.clonePos(c)},i.prototype.remove=function(a){var l=this.clippedPos(a.start.row,a.start.column),d=this.clippedPos(a.end.row,a.end.column);return this.applyDelta({start:l,end:d,action:"remove",lines:this.getLinesForRange({start:l,end:d})}),this.clonePos(l)},i.prototype.removeInLine=function(a,l,d){var c=this.clippedPos(a,l),m=this.clippedPos(a,d);return this.applyDelta({start:c,end:m,action:"remove",lines:this.getLinesForRange({start:c,end:m})},!0),this.clonePos(c)},i.prototype.removeFullLines=function(a,l){a=Math.min(Math.max(0,a),this.getLength()-1),l=Math.min(Math.max(0,l),this.getLength()-1);var d=l==this.getLength()-1&&a>0,c=l<this.getLength()-1,m=d?a-1:a,h=d?this.getLine(m).length:0,v=c?l+1:l,k=c?0:this.getLine(v).length,x=new s(m,h,v,k),T=this.$lines.slice(a,l+1);return this.applyDelta({start:x.start,end:x.end,action:"remove",lines:this.getLinesForRange(x)}),T},i.prototype.removeNewLine=function(a){a<this.getLength()-1&&a>=0&&this.applyDelta({start:this.pos(a,this.getLine(a).length),end:this.pos(a+1,0),action:"remove",lines:["",""]})},i.prototype.replace=function(a,l){if(a instanceof s||(a=s.fromPoints(a.start,a.end)),l.length===0&&a.isEmpty())return a.start;if(l==this.getTextRange(a))return a.end;this.remove(a);var d;return l?d=this.insert(a.start,l):d=a.start,d},i.prototype.applyDeltas=function(a){for(var l=0;l<a.length;l++)this.applyDelta(a[l])},i.prototype.revertDeltas=function(a){for(var l=a.length-1;l>=0;l--)this.revertDelta(a[l])},i.prototype.applyDelta=function(a,l){var d=a.action=="insert";(d?a.lines.length<=1&&!a.lines[0]:!s.comparePoints(a.start,a.end))||(d&&a.lines.length>2e4?this.$splitAndapplyLargeDelta(a,2e4):(p(this.$lines,a,l),this._signal("change",a)))},i.prototype.$safeApplyDelta=function(a){var l=this.$lines.length;(a.action=="remove"&&a.start.row<l&&a.end.row<l||a.action=="insert"&&a.start.row<=l)&&this.applyDelta(a)},i.prototype.$splitAndapplyLargeDelta=function(a,l){for(var d=a.lines,c=d.length-l+1,m=a.start.row,h=a.start.column,v=0,k=0;v<c;v=k){k+=l-1;var x=d.slice(v,k);x.push(""),this.applyDelta({start:this.pos(m+v,h),end:this.pos(m+k,h=0),action:a.action,lines:x},!0)}a.lines=d.slice(v),a.start.row=m+v,a.start.column=h,this.applyDelta(a,!0)},i.prototype.revertDelta=function(a){this.$safeApplyDelta({start:this.clonePos(a.start),end:this.clonePos(a.end),action:a.action=="insert"?"remove":"insert",lines:a.lines.slice()})},i.prototype.indexToPosition=function(a,l){for(var d=this.$lines||this.getAllLines(),c=this.getNewLineCharacter().length,m=l||0,h=d.length;m<h;m++)if(a-=d[m].length+c,a<0)return{row:m,column:a+d[m].length+c};return{row:h-1,column:a+d[h-1].length+c}},i.prototype.positionToIndex=function(a,l){for(var d=this.$lines||this.getAllLines(),c=this.getNewLineCharacter().length,m=0,h=Math.min(a.row,d.length),v=l||0;v<h;++v)m+=d[v].length+c;return m+a.column},i.prototype.$split=function(a){return a.split(/\r\n|\r|\n/)},i}();o.prototype.$autoNewLine="",o.prototype.$newLineMode="auto",n.implement(o.prototype,g),t.Document=o});ace.define("ace/background_tokenizer",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t,r){"use strict";var n=e("./lib/oop"),p=e("./lib/event_emitter").EventEmitter,g=function(){function s(u,o){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.tokenizer=u;var i=this;this.$worker=function(){if(i.running){for(var a=new Date,l=i.currentLine,d=-1,c=i.doc,m=l;i.lines[l];)l++;var h=c.getLength(),v=0;for(i.running=!1;l<h;){i.$tokenizeRow(l),d=l;do l++;while(i.lines[l]);if(v++,v%5===0&&new Date-a>20){i.running=setTimeout(i.$worker,20);break}}i.currentLine=l,d==-1&&(d=l),m<=d&&i.fireUpdateEvent(m,d)}}}return s.prototype.setTokenizer=function(u){this.tokenizer=u,this.lines=[],this.states=[],this.start(0)},s.prototype.setDocument=function(u){this.doc=u,this.lines=[],this.states=[],this.stop()},s.prototype.fireUpdateEvent=function(u,o){var i={first:u,last:o};this._signal("update",{data:i})},s.prototype.start=function(u){this.currentLine=Math.min(u||0,this.currentLine,this.doc.getLength()),this.lines.splice(this.currentLine,this.lines.length),this.states.splice(this.currentLine,this.states.length),this.stop(),this.running=setTimeout(this.$worker,700)},s.prototype.scheduleStart=function(){this.running||(this.running=setTimeout(this.$worker,700))},s.prototype.$updateOnChange=function(u){var o=u.start.row,i=u.end.row-o;if(i===0)this.lines[o]=null;else if(u.action=="remove")this.lines.splice(o,i+1,null),this.states.splice(o,i+1,null);else{var a=Array(i+1);a.unshift(o,1),this.lines.splice.apply(this.lines,a),this.states.splice.apply(this.states,a)}this.currentLine=Math.min(o,this.currentLine,this.doc.getLength()),this.stop()},s.prototype.stop=function(){this.running&&clearTimeout(this.running),this.running=!1},s.prototype.getTokens=function(u){return this.lines[u]||this.$tokenizeRow(u)},s.prototype.getState=function(u){return this.currentLine==u&&this.$tokenizeRow(u),this.states[u]||"start"},s.prototype.$tokenizeRow=function(u){var o=this.doc.getLine(u),i=this.states[u-1],a=this.tokenizer.getLineTokens(o,i,u);return this.states[u]+""!=a.state+""?(this.states[u]=a.state,this.lines[u+1]=null,this.currentLine>u+1&&(this.currentLine=u+1)):this.currentLine==u&&(this.currentLine=u+1),this.lines[u]=a.tokens},s.prototype.cleanup=function(){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.removeAllListeners()},s}();n.implement(g.prototype,p),t.BackgroundTokenizer=g});ace.define("ace/search_highlight",["require","exports","module","ace/lib/lang","ace/range"],function(e,t,r){"use strict";var n=e("./lib/lang"),p=e("./range").Range,g=function(){function s(u,o,i){i===void 0&&(i="text"),this.setRegexp(u),this.clazz=o,this.type=i}return s.prototype.setRegexp=function(u){this.regExp+""!=u+""&&(this.regExp=u,this.cache=[])},s.prototype.update=function(u,o,i,a){if(this.regExp)for(var l=a.firstRow,d=a.lastRow,c={},m=l;m<=d;m++){var h=this.cache[m];h==null&&(h=n.getMatchOffsets(i.getLine(m),this.regExp),h.length>this.MAX_RANGES&&(h=h.slice(0,this.MAX_RANGES)),h=h.map(function(T){return new p(m,T.offset,m,T.offset+T.length)}),this.cache[m]=h.length?h:"");for(var v=h.length;v--;){var k=h[v].toScreenRange(i),x=k.toString();c[x]||(c[x]=!0,o.drawSingleLineMarker(u,k,this.clazz,a))}}},s}();g.prototype.MAX_RANGES=500,t.SearchHighlight=g});ace.define("ace/undomanager",["require","exports","module","ace/range"],function(e,t,r){"use strict";var n=function(){function f(){this.$keepRedoStack,this.$maxRev=0,this.$fromUndo=!1,this.$undoDepth=1/0,this.reset()}return f.prototype.addSession=function(L){this.$session=L},f.prototype.add=function(L,$,A){if(!this.$fromUndo&&L!=this.$lastDelta){if(this.$keepRedoStack||(this.$redoStack.length=0),$===!1||!this.lastDeltas){this.lastDeltas=[];var C=this.$undoStack.length;C>this.$undoDepth-1&&this.$undoStack.splice(0,C-this.$undoDepth+1),this.$undoStack.push(this.lastDeltas),L.id=this.$rev=++this.$maxRev}(L.action=="remove"||L.action=="insert")&&(this.$lastDelta=L),this.lastDeltas.push(L)}},f.prototype.addSelection=function(L,$){this.selections.push({value:L,rev:$||this.$rev})},f.prototype.startNewGroup=function(){return this.lastDeltas=null,this.$rev},f.prototype.markIgnored=function(L,$){$==null&&($=this.$rev+1);for(var A=this.$undoStack,C=A.length;C--;){var w=A[C][0];if(w.id<=L)break;w.id<$&&(w.ignore=!0)}this.lastDeltas=null},f.prototype.getSelection=function(L,$){for(var A=this.selections,C=A.length;C--;){var w=A[C];if(w.rev<L)return $&&(w=A[C+1]),w}},f.prototype.getRevision=function(){return this.$rev},f.prototype.getDeltas=function(L,$){$==null&&($=this.$rev+1);for(var A=this.$undoStack,C=null,w=0,y=A.length;y--;){var b=A[y][0];if(b.id<$&&!C&&(C=y+1),b.id<=L){w=y+1;break}}return A.slice(w,C)},f.prototype.getChangedRanges=function(L,$){$==null&&($=this.$rev+1)},f.prototype.getChangedLines=function(L,$){$==null&&($=this.$rev+1)},f.prototype.undo=function(L,$){this.lastDeltas=null;var A=this.$undoStack;if(p(A,A.length)){L||(L=this.$session),this.$redoStackBaseRev!==this.$rev&&this.$redoStack.length&&(this.$redoStack=[]),this.$fromUndo=!0;var C=A.pop(),w=null;return C&&(w=L.undoChanges(C,$),this.$redoStack.push(C),this.$syncRev()),this.$fromUndo=!1,w}},f.prototype.redo=function(L,$){if(this.lastDeltas=null,L||(L=this.$session),this.$fromUndo=!0,this.$redoStackBaseRev!=this.$rev){var A=this.getDeltas(this.$redoStackBaseRev,this.$rev+1);S(this.$redoStack,A),this.$redoStackBaseRev=this.$rev,this.$redoStack.forEach(function(y){y[0].id=++this.$maxRev},this)}var C=this.$redoStack.pop(),w=null;return C&&(w=L.redoChanges(C,$),this.$undoStack.push(C),this.$syncRev()),this.$fromUndo=!1,w},f.prototype.$syncRev=function(){var L=this.$undoStack,$=L[L.length-1],A=$&&$[0].id||0;this.$redoStackBaseRev=A,this.$rev=A},f.prototype.reset=function(){this.lastDeltas=null,this.$lastDelta=null,this.$undoStack=[],this.$redoStack=[],this.$rev=0,this.mark=0,this.$redoStackBaseRev=this.$rev,this.selections=[]},f.prototype.canUndo=function(){return this.$undoStack.length>0},f.prototype.canRedo=function(){return this.$redoStack.length>0},f.prototype.bookmark=function(L){L==null&&(L=this.$rev),this.mark=L},f.prototype.isAtBookmark=function(){return this.$rev===this.mark},f.prototype.toJSON=function(){return{$redoStack:this.$redoStack,$undoStack:this.$undoStack}},f.prototype.fromJSON=function(L){this.reset(),this.$undoStack=L.$undoStack,this.$redoStack=L.$redoStack},f.prototype.$prettyPrint=function(L){return L?l(L):l(this.$undoStack)+`
---
`+l(this.$redoStack)},f}();n.prototype.hasUndo=n.prototype.canUndo,n.prototype.hasRedo=n.prototype.canRedo,n.prototype.isClean=n.prototype.isAtBookmark,n.prototype.markClean=n.prototype.bookmark;function p(f,L){for(var $=L;$--;){var A=f[$];if(A&&!A[0].ignore){for(;$<L-1;){var C=m(f[$],f[$+1]);f[$]=C[0],f[$+1]=C[1],$++}return!0}}}var g=e("./range").Range,s=g.comparePoints,u=g.comparePoints;function o(f){var L=f.action=="insert",$=f.start,A=f.end,C=(A.row-$.row)*(L?1:-1),w=(A.column-$.column)*(L?1:-1);L&&(A=$);for(var y in this.marks){var b=this.marks[y],E=u(b,$);if(!(E<0)){if(E===0&&L)if(b.bias==1)E=1;else{b.bias==-1;continue}var _=L?E:u(b,A);if(_>0){b.row+=C,b.column+=b.row==A.row?w:0;continue}!L&&_<=0&&(b.row=$.row,b.column=$.column,_===0&&(b.bias=1))}}}function i(f){return{row:f.row,column:f.column}}function a(f){return{start:i(f.start),end:i(f.end),action:f.action,lines:f.lines.slice()}}function l(f){if(f=f||this,Array.isArray(f))return f.map(l).join(`
`);var L="";return f.action?(L=f.action=="insert"?"+":"-",L+="["+f.lines+"]"):f.value&&(Array.isArray(f.value)?L=f.value.map(d).join(`
`):L=d(f.value)),f.start&&(L+=d(f)),(f.id||f.rev)&&(L+="	("+(f.id||f.rev)+")"),L}function d(f){return f.start.row+":"+f.start.column+"=>"+f.end.row+":"+f.end.column}function c(f,L){var $=f.action=="insert",A=L.action=="insert";if($&&A)if(s(L.start,f.end)>=0)v(L,f,-1);else if(s(L.start,f.start)<=0)v(f,L,1);else return null;else if($&&!A)if(s(L.start,f.end)>=0)v(L,f,-1);else if(s(L.end,f.start)<=0)v(f,L,-1);else return null;else if(!$&&A)if(s(L.start,f.start)>=0)v(L,f,1);else if(s(L.start,f.start)<=0)v(f,L,1);else return null;else if(!$&&!A)if(s(L.start,f.start)>=0)v(L,f,1);else if(s(L.end,f.start)<=0)v(f,L,-1);else return null;return[L,f]}function m(f,L){for(var $=f.length;$--;)for(var A=0;A<L.length;A++)if(!c(f[$],L[A])){for(;$<f.length;){for(;A--;)c(L[A],f[$]);A=L.length,$++}return[f,L]}return f.selectionBefore=L.selectionBefore=f.selectionAfter=L.selectionAfter=null,[L,f]}function h(f,L){var $=f.action=="insert",A=L.action=="insert";if($&&A)s(f.start,L.start)<0?v(L,f,1):v(f,L,1);else if($&&!A)s(f.start,L.end)>=0?v(f,L,-1):(s(f.start,L.start)<=0||v(f,g.fromPoints(L.start,f.start),-1),v(L,f,1));else if(!$&&A)s(L.start,f.end)>=0?v(L,f,-1):(s(L.start,f.start)<=0||v(L,g.fromPoints(f.start,L.start),-1),v(f,L,1));else if(!$&&!A)if(s(L.start,f.end)>=0)v(L,f,-1);else if(s(L.end,f.start)<=0)v(f,L,-1);else{var C,w;return s(f.start,L.start)<0&&(C=f,f=x(f,L.start)),s(f.end,L.end)>0&&(w=x(f,L.end)),k(L.end,f.start,f.end,-1),w&&!C&&(f.lines=w.lines,f.start=w.start,f.end=w.end,w=f),[L,C,w].filter(Boolean)}return[L,f]}function v(f,L,$){k(f.start,L.start,L.end,$),k(f.end,L.start,L.end,$)}function k(f,L,$,A){f.row==(A==1?L:$).row&&(f.column+=A*($.column-L.column)),f.row+=A*($.row-L.row)}function x(f,L){var $=f.lines,A=f.end;f.end=i(L);var C=f.end.row-f.start.row,w=$.splice(C,$.length),y=C?L.column:L.column-f.start.column;$.push(w[0].substring(0,y)),w[0]=w[0].substr(y);var b={start:i(L),end:A,lines:w,action:f.action};return b}function T(f,L){L=a(L);for(var $=f.length;$--;){for(var A=f[$],C=0;C<A.length;C++){var w=A[C],y=h(w,L);L=y[0],y.length!=2&&(y[2]?(A.splice(C+1,1,y[1],y[2]),C++):y[1]||(A.splice(C,1),C--))}A.length||f.splice($,1)}return f}function S(f,L){for(var $=0;$<L.length;$++)for(var A=L[$],C=0;C<A.length;C++)T(f,A[C])}t.UndoManager=n});ace.define("ace/edit_session/fold_line",["require","exports","module","ace/range"],function(e,t,r){"use strict";var n=e("../range").Range,p=function(){function g(s,u){this.foldData=s,Array.isArray(u)?this.folds=u:u=this.folds=[u];var o=u[u.length-1];this.range=new n(u[0].start.row,u[0].start.column,o.end.row,o.end.column),this.start=this.range.start,this.end=this.range.end,this.folds.forEach(function(i){i.setFoldLine(this)},this)}return g.prototype.shiftRow=function(s){this.start.row+=s,this.end.row+=s,this.folds.forEach(function(u){u.start.row+=s,u.end.row+=s})},g.prototype.addFold=function(s){if(s.sameRow){if(s.start.row<this.startRow||s.endRow>this.endRow)throw new Error("Can't add a fold to this FoldLine as it has no connection");this.folds.push(s),this.folds.sort(function(u,o){return-u.range.compareEnd(o.start.row,o.start.column)}),this.range.compareEnd(s.start.row,s.start.column)>0?(this.end.row=s.end.row,this.end.column=s.end.column):this.range.compareStart(s.end.row,s.end.column)<0&&(this.start.row=s.start.row,this.start.column=s.start.column)}else if(s.start.row==this.end.row)this.folds.push(s),this.end.row=s.end.row,this.end.column=s.end.column;else if(s.end.row==this.start.row)this.folds.unshift(s),this.start.row=s.start.row,this.start.column=s.start.column;else throw new Error("Trying to add fold to FoldRow that doesn't have a matching row");s.foldLine=this},g.prototype.containsRow=function(s){return s>=this.start.row&&s<=this.end.row},g.prototype.walk=function(s,u,o){var i=0,a=this.folds,l,d,c,m=!0;u==null&&(u=this.end.row,o=this.end.column);for(var h=0;h<a.length;h++){if(l=a[h],d=l.range.compareStart(u,o),d==-1){s(null,u,o,i,m);return}if(c=s(null,l.start.row,l.start.column,i,m),c=!c&&s(l.placeholder,l.start.row,l.start.column,i),c||d===0)return;m=!l.sameRow,i=l.end.column}s(null,u,o,i,m)},g.prototype.getNextFoldTo=function(s,u){for(var o,i,a=0;a<this.folds.length;a++){if(o=this.folds[a],i=o.range.compareEnd(s,u),i==-1)return{fold:o,kind:"after"};if(i===0)return{fold:o,kind:"inside"}}return null},g.prototype.addRemoveChars=function(s,u,o){var i=this.getNextFoldTo(s,u),a,l;if(i){if(a=i.fold,i.kind=="inside"&&a.start.column!=u&&a.start.row!=s)window.console&&window.console.log(s,u,a);else if(a.start.row==s){l=this.folds;var d=l.indexOf(a);for(d===0&&(this.start.column+=o),d;d<l.length;d++){if(a=l[d],a.start.column+=o,!a.sameRow)return;a.end.column+=o}this.end.column+=o}}},g.prototype.split=function(s,u){var o=this.getNextFoldTo(s,u);if(!o||o.kind=="inside")return null;var i=o.fold,a=this.folds,l=this.foldData,d=a.indexOf(i),c=a[d-1];this.end.row=c.end.row,this.end.column=c.end.column,a=a.splice(d,a.length-d);var m=new g(l,a);return l.splice(l.indexOf(this)+1,0,m),m},g.prototype.merge=function(s){for(var u=s.folds,o=0;o<u.length;o++)this.addFold(u[o]);var i=this.foldData;i.splice(i.indexOf(s),1)},g.prototype.toString=function(){var s=[this.range.toString()+": ["];return this.folds.forEach(function(u){s.push("  "+u.toString())}),s.push("]"),s.join(`
`)},g.prototype.idxToPosition=function(s){for(var u=0,o=0;o<this.folds.length;o++){var i=this.folds[o];if(s-=i.start.column-u,s<0)return{row:i.start.row,column:i.start.column+s};if(s-=i.placeholder.length,s<0)return i.start;u=i.end.column}return{row:this.end.row,column:this.end.column+s}},g}();t.FoldLine=p});ace.define("ace/range_list",["require","exports","module","ace/range"],function(e,t,r){"use strict";var n=e("./range").Range,p=n.comparePoints,g=function(){function s(){this.ranges=[],this.$bias=1}return s.prototype.pointIndex=function(u,o,i){for(var a=this.ranges,l=i||0;l<a.length;l++){var d=a[l],c=p(u,d.end);if(!(c>0)){var m=p(u,d.start);return c===0?o&&m!==0?-l-2:l:m>0||m===0&&!o?l:-l-1}}return-l-1},s.prototype.add=function(u){var o=!u.isEmpty(),i=this.pointIndex(u.start,o);i<0&&(i=-i-1);var a=this.pointIndex(u.end,o,i);return a<0?a=-a-1:a++,this.ranges.splice(i,a-i,u)},s.prototype.addList=function(u){for(var o=[],i=u.length;i--;)o.push.apply(o,this.add(u[i]));return o},s.prototype.substractPoint=function(u){var o=this.pointIndex(u);if(o>=0)return this.ranges.splice(o,1)},s.prototype.merge=function(){var u=[],o=this.ranges;o=o.sort(function(c,m){return p(c.start,m.start)});for(var i=o[0],a,l=1;l<o.length;l++){a=i,i=o[l];var d=p(a.end,i.start);d<0||d==0&&!a.isEmpty()&&!i.isEmpty()||(p(a.end,i.end)<0&&(a.end.row=i.end.row,a.end.column=i.end.column),o.splice(l,1),u.push(i),i=a,l--)}return this.ranges=o,u},s.prototype.contains=function(u,o){return this.pointIndex({row:u,column:o})>=0},s.prototype.containsPoint=function(u){return this.pointIndex(u)>=0},s.prototype.rangeAtPoint=function(u){var o=this.pointIndex(u);if(o>=0)return this.ranges[o]},s.prototype.clipRows=function(u,o){var i=this.ranges;if(i[0].start.row>o||i[i.length-1].start.row<u)return[];var a=this.pointIndex({row:u,column:0});a<0&&(a=-a-1);var l=this.pointIndex({row:o,column:0},a);l<0&&(l=-l-1);for(var d=[],c=a;c<l;c++)d.push(i[c]);return d},s.prototype.removeAll=function(){return this.ranges.splice(0,this.ranges.length)},s.prototype.attach=function(u){this.session&&this.detach(),this.session=u,this.onChange=this.$onChange.bind(this),this.session.on("change",this.onChange)},s.prototype.detach=function(){this.session&&(this.session.removeListener("change",this.onChange),this.session=null)},s.prototype.$onChange=function(u){for(var o=u.start,i=u.end,a=o.row,l=i.row,d=this.ranges,c=0,m=d.length;c<m;c++){var h=d[c];if(h.end.row>=a)break}if(u.action=="insert")for(var v=l-a,k=-o.column+i.column;c<m;c++){var h=d[c];if(h.start.row>a)break;if(h.start.row==a&&h.start.column>=o.column&&(h.start.column==o.column&&this.$bias<=0||(h.start.column+=k,h.start.row+=v)),h.end.row==a&&h.end.column>=o.column){if(h.end.column==o.column&&this.$bias<0)continue;h.end.column==o.column&&k>0&&c<m-1&&h.end.column>h.start.column&&h.end.column==d[c+1].start.column&&(h.end.column-=k),h.end.column+=k,h.end.row+=v}}else for(var v=a-l,k=o.column-i.column;c<m;c++){var h=d[c];if(h.start.row>l)break;h.end.row<l&&(a<h.end.row||a==h.end.row&&o.column<h.end.column)?(h.end.row=a,h.end.column=o.column):h.end.row==l?h.end.column<=i.column?(v||h.end.column>o.column)&&(h.end.column=o.column,h.end.row=o.row):(h.end.column+=k,h.end.row+=v):h.end.row>l&&(h.end.row+=v),h.start.row<l&&(a<h.start.row||a==h.start.row&&o.column<h.start.column)?(h.start.row=a,h.start.column=o.column):h.start.row==l?h.start.column<=i.column?(v||h.start.column>o.column)&&(h.start.column=o.column,h.start.row=o.row):(h.start.column+=k,h.start.row+=v):h.start.row>l&&(h.start.row+=v)}if(v!=0&&c<m)for(;c<m;c++){var h=d[c];h.start.row+=v,h.end.row+=v}},s}();g.prototype.comparePoints=p,t.RangeList=g});ace.define("ace/edit_session/fold",["require","exports","module","ace/range_list"],function(e,t,r){"use strict";var n=this&&this.__extends||function(){var a=function(l,d){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,m){c.__proto__=m}||function(c,m){for(var h in m)Object.prototype.hasOwnProperty.call(m,h)&&(c[h]=m[h])},a(l,d)};return function(l,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");a(l,d);function c(){this.constructor=l}l.prototype=d===null?Object.create(d):(c.prototype=d.prototype,new c)}}(),p=e("../range_list").RangeList,g=function(a){n(l,a);function l(d,c){var m=a.call(this)||this;return m.foldLine=null,m.placeholder=c,m.range=d,m.start=d.start,m.end=d.end,m.sameRow=d.start.row==d.end.row,m.subFolds=m.ranges=[],m}return l.prototype.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()},l.prototype.setFoldLine=function(d){this.foldLine=d,this.subFolds.forEach(function(c){c.setFoldLine(d)})},l.prototype.clone=function(){var d=this.range.clone(),c=new l(d,this.placeholder);return this.subFolds.forEach(function(m){c.subFolds.push(m.clone())}),c.collapseChildren=this.collapseChildren,c},l.prototype.addSubFold=function(d){if(!this.range.isEqual(d)){u(d,this.start);for(var k=d.start.row,x=d.start.column,c=0,m=-1;c<this.subFolds.length&&(m=this.subFolds[c].range.compare(k,x),m==1);c++);var h=this.subFolds[c],v=0;if(m==0){if(h.range.containsRange(d))return h.addSubFold(d);v=1}for(var k=d.range.end.row,x=d.range.end.column,T=c,m=-1;T<this.subFolds.length&&(m=this.subFolds[T].range.compare(k,x),m==1);T++);m==0&&T++;for(var S=this.subFolds.splice(c,T-c,d),f=m==0?S.length-1:S.length,L=v;L<f;L++)d.addSubFold(S[L]);return d.setFoldLine(this.foldLine),d}},l.prototype.restoreRange=function(d){return i(d,this.start)},l}(p);function s(a,l){a.row-=l.row,a.row==0&&(a.column-=l.column)}function u(a,l){s(a.start,l),s(a.end,l)}function o(a,l){a.row==0&&(a.column+=l.column),a.row+=l.row}function i(a,l){o(a.start,l),o(a.end,l)}t.Fold=g});ace.define("ace/edit_session/folding",["require","exports","module","ace/range","ace/edit_session/fold_line","ace/edit_session/fold","ace/token_iterator","ace/mouse/mouse_event"],function(e,t,r){"use strict";var n=e("../range").Range,p=e("./fold_line").FoldLine,g=e("./fold").Fold,s=e("../token_iterator").TokenIterator,u=e("../mouse/mouse_event").MouseEvent;function o(){this.getFoldAt=function(i,a,l){var d=this.getFoldLine(i);if(!d)return null;for(var c=d.folds,m=0;m<c.length;m++){var h=c[m].range;if(h.contains(i,a)){if(l==1&&h.isEnd(i,a)&&!h.isEmpty())continue;if(l==-1&&h.isStart(i,a)&&!h.isEmpty())continue;return c[m]}}},this.getFoldsInRange=function(i){var a=i.start,l=i.end,d=this.$foldData,c=[];a.column+=1,l.column-=1;for(var m=0;m<d.length;m++){var h=d[m].range.compareRange(i);if(h!=2){if(h==-2)break;for(var v=d[m].folds,k=0;k<v.length;k++){var x=v[k];if(h=x.range.compareRange(i),h==-2)break;if(h==2)continue;if(h==42)break;c.push(x)}}}return a.column-=1,l.column+=1,c},this.getFoldsInRangeList=function(i){if(Array.isArray(i)){var a=[];i.forEach(function(l){a=a.concat(this.getFoldsInRange(l))},this)}else var a=this.getFoldsInRange(i);return a},this.getAllFolds=function(){for(var i=[],a=this.$foldData,l=0;l<a.length;l++)for(var d=0;d<a[l].folds.length;d++)i.push(a[l].folds[d]);return i},this.getFoldStringAt=function(i,a,l,d){if(d=d||this.getFoldLine(i),!d)return null;for(var c={end:{column:0}},m,h,v=0;v<d.folds.length;v++){h=d.folds[v];var k=h.range.compareEnd(i,a);if(k==-1){m=this.getLine(h.start.row).substring(c.end.column,h.start.column);break}else if(k===0)return null;c=h}return m||(m=this.getLine(h.start.row).substring(c.end.column)),l==-1?m.substring(0,a-c.end.column):l==1?m.substring(a-c.end.column):m},this.getFoldLine=function(i,a){var l=this.$foldData,d=0;for(a&&(d=l.indexOf(a)),d==-1&&(d=0),d;d<l.length;d++){var c=l[d];if(c.start.row<=i&&c.end.row>=i)return c;if(c.end.row>i)return null}return null},this.getNextFoldLine=function(i,a){var l=this.$foldData,d=0;for(a&&(d=l.indexOf(a)),d==-1&&(d=0),d;d<l.length;d++){var c=l[d];if(c.end.row>=i)return c}return null},this.getFoldedRowCount=function(i,a){for(var l=this.$foldData,d=a-i+1,c=0;c<l.length;c++){var m=l[c],h=m.end.row,v=m.start.row;if(h>=a){v<a&&(v>=i?d-=a-v:d=0);break}else h>=i&&(v>=i?d-=h-v:d-=h-i+1)}return d},this.$addFoldLine=function(i){return this.$foldData.push(i),this.$foldData.sort(function(a,l){return a.start.row-l.start.row}),i},this.addFold=function(i,a){var l=this.$foldData,d=!1,c;i instanceof g?c=i:(c=new g(a,i),c.collapseChildren=a.collapseChildren),this.$clipRangeToDocument(c.range);var m=c.start.row,h=c.start.column,v=c.end.row,k=c.end.column,x=this.getFoldAt(m,h,1),T=this.getFoldAt(v,k,-1);if(x&&T==x)return x.addSubFold(c);x&&!x.range.isStart(m,h)&&this.removeFold(x),T&&!T.range.isEnd(v,k)&&this.removeFold(T);var S=this.getFoldsInRange(c.range);S.length>0&&(this.removeFolds(S),c.collapseChildren||S.forEach(function(A){c.addSubFold(A)}));for(var f=0;f<l.length;f++){var L=l[f];if(v==L.start.row){L.addFold(c),d=!0;break}else if(m==L.end.row){if(L.addFold(c),d=!0,!c.sameRow){var $=l[f+1];if($&&$.start.row==v){L.merge($);break}}break}else if(v<=L.start.row)break}return d||(L=this.$addFoldLine(new p(this.$foldData,c))),this.$useWrapMode?this.$updateWrapData(L.start.row,L.start.row):this.$updateRowLengthCache(L.start.row,L.start.row),this.$modified=!0,this._signal("changeFold",{data:c,action:"add"}),c},this.addFolds=function(i){i.forEach(function(a){this.addFold(a)},this)},this.removeFold=function(i){var a=i.foldLine,l=a.start.row,d=a.end.row,c=this.$foldData,m=a.folds;if(m.length==1)c.splice(c.indexOf(a),1);else if(a.range.isEnd(i.end.row,i.end.column))m.pop(),a.end.row=m[m.length-1].end.row,a.end.column=m[m.length-1].end.column;else if(a.range.isStart(i.start.row,i.start.column))m.shift(),a.start.row=m[0].start.row,a.start.column=m[0].start.column;else if(i.sameRow)m.splice(m.indexOf(i),1);else{var h=a.split(i.start.row,i.start.column);m=h.folds,m.shift(),h.start.row=m[0].start.row,h.start.column=m[0].start.column}this.$updating||(this.$useWrapMode?this.$updateWrapData(l,d):this.$updateRowLengthCache(l,d)),this.$modified=!0,this._signal("changeFold",{data:i,action:"remove"})},this.removeFolds=function(i){for(var a=[],l=0;l<i.length;l++)a.push(i[l]);a.forEach(function(d){this.removeFold(d)},this),this.$modified=!0},this.expandFold=function(i){this.removeFold(i),i.subFolds.forEach(function(a){i.restoreRange(a),this.addFold(a)},this),i.collapseChildren>0&&this.foldAll(i.start.row+1,i.end.row,i.collapseChildren-1),i.subFolds=[]},this.expandFolds=function(i){i.forEach(function(a){this.expandFold(a)},this)},this.unfold=function(i,a){var l,d;if(i==null)l=new n(0,0,this.getLength(),0),a==null&&(a=!0);else if(typeof i=="number")l=new n(i,0,i,this.getLine(i).length);else if("row"in i)l=n.fromPoints(i,i);else{if(Array.isArray(i))return d=[],i.forEach(function(m){d=d.concat(this.unfold(m))},this),d;l=i}d=this.getFoldsInRangeList(l);for(var c=d;d.length==1&&n.comparePoints(d[0].start,l.start)<0&&n.comparePoints(d[0].end,l.end)>0;)this.expandFolds(d),d=this.getFoldsInRangeList(l);if(a!=!1?this.removeFolds(d):this.expandFolds(d),c.length)return c},this.isRowFolded=function(i,a){return!!this.getFoldLine(i,a)},this.getRowFoldEnd=function(i,a){var l=this.getFoldLine(i,a);return l?l.end.row:i},this.getRowFoldStart=function(i,a){var l=this.getFoldLine(i,a);return l?l.start.row:i},this.getFoldDisplayLine=function(i,a,l,d,c){d==null&&(d=i.start.row),c==null&&(c=0),a==null&&(a=i.end.row),l==null&&(l=this.getLine(a).length);var m=this.doc,h="";return i.walk(function(v,k,x,T){if(!(k<d)){if(k==d){if(x<c)return;T=Math.max(c,T)}v!=null?h+=v:h+=m.getLine(k).substring(T,x)}},a,l),h},this.getDisplayLine=function(i,a,l,d){var c=this.getFoldLine(i);if(c)return this.getFoldDisplayLine(c,i,a,l,d);var m;return m=this.doc.getLine(i),m.substring(d||0,a||m.length)},this.$cloneFoldData=function(){var i=[];return i=this.$foldData.map(function(a){var l=a.folds.map(function(d){return d.clone()});return new p(i,l)}),i},this.toggleFold=function(i){var a=this.selection,l=a.getRange(),d,c;if(l.isEmpty()){var m=l.start;if(d=this.getFoldAt(m.row,m.column),d){this.expandFold(d);return}else(c=this.findMatchingBracket(m))?l.comparePoint(c)==1?l.end=c:(l.start=c,l.start.column++,l.end.column--):(c=this.findMatchingBracket({row:m.row,column:m.column+1}))?(l.comparePoint(c)==1?l.end=c:l.start=c,l.start.column++):l=this.getCommentFoldRange(m.row,m.column)||l}else{var h=this.getFoldsInRange(l);if(i&&h.length){this.expandFolds(h);return}else h.length==1&&(d=h[0])}if(d||(d=this.getFoldAt(l.start.row,l.start.column)),d&&d.range.toString()==l.toString()){this.expandFold(d);return}var v="...";if(!l.isMultiLine()){if(v=this.getTextRange(l),v.length<4)return;v=v.trim().substring(0,2)+".."}this.addFold(v,l)},this.getCommentFoldRange=function(i,a,l){var d=new s(this,i,a),c=d.getCurrentToken(),m=c&&c.type;if(c&&/^comment|string/.test(m)){m=m.match(/comment|string/)[0],m=="comment"&&(m+="|doc-start|\\.doc");var h=new RegExp(m),v=new n;if(l!=1){do c=d.stepBackward();while(c&&h.test(c.type));c=d.stepForward()}v.start.row=d.getCurrentTokenRow(),v.start.column=d.getCurrentTokenColumn()+c.value.length,d=new s(this,i,a);var k=this.getState(d.$row);if(l!=-1){var x=-1;do if(c=d.stepForward(),x==-1){var T=this.getState(d.$row);k.toString()!==T.toString()&&(x=d.$row)}else if(d.$row>x)break;while(c&&h.test(c.type));c=d.stepBackward()}else c=d.getCurrentToken();return v.end.row=d.getCurrentTokenRow(),v.end.column=d.getCurrentTokenColumn(),v}},this.foldAll=function(i,a,l,d){l==null&&(l=1e5);var c=this.foldWidgets;if(c){a=a||this.getLength(),i=i||0;for(var m=i;m<a;m++)if(c[m]==null&&(c[m]=this.getFoldWidget(m)),c[m]=="start"&&!(d&&!d(m))){var h=this.getFoldWidgetRange(m);h&&h.isMultiLine()&&h.end.row<=a&&h.start.row>=i&&(m=h.end.row,h.collapseChildren=l,this.addFold("...",h))}}},this.foldToLevel=function(i){for(this.foldAll();i-- >0;)this.unfold(null,!1)},this.foldAllComments=function(){var i=this;this.foldAll(null,null,null,function(a){for(var l=i.getTokens(a),d=0;d<l.length;d++){var c=l[d];if(!(c.type=="text"&&/^\s+$/.test(c.value)))return!!/comment/.test(c.type)}})},this.$foldStyles={manual:1,markbegin:1,markbeginend:1},this.$foldStyle="markbegin",this.setFoldStyle=function(i){if(!this.$foldStyles[i])throw new Error("invalid fold style: "+i+"["+Object.keys(this.$foldStyles).join(", ")+"]");if(this.$foldStyle!=i){this.$foldStyle=i,i=="manual"&&this.unfold();var a=this.$foldMode;this.$setFolding(null),this.$setFolding(a)}},this.$setFolding=function(i){if(this.$foldMode!=i){if(this.$foldMode=i,this.off("change",this.$updateFoldWidgets),this.off("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets),this._signal("changeAnnotation"),!i||this.$foldStyle=="manual"){this.foldWidgets=null;return}this.foldWidgets=[],this.getFoldWidget=i.getFoldWidget.bind(i,this,this.$foldStyle),this.getFoldWidgetRange=i.getFoldWidgetRange.bind(i,this,this.$foldStyle),this.$updateFoldWidgets=this.updateFoldWidgets.bind(this),this.$tokenizerUpdateFoldWidgets=this.tokenizerUpdateFoldWidgets.bind(this),this.on("change",this.$updateFoldWidgets),this.on("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets)}},this.getParentFoldRangeData=function(i,a){var l=this.foldWidgets;if(!l||a&&l[i])return{};for(var d=i-1,c;d>=0;){var m=l[d];if(m==null&&(m=l[d]=this.getFoldWidget(d)),m=="start"){var h=this.getFoldWidgetRange(d);if(c||(c=h),h&&h.end.row>=i)break}d--}return{range:d!==-1&&h,firstRange:c}},this.onFoldWidgetClick=function(i,a){a instanceof u&&(a=a.domEvent);var l={children:a.shiftKey,all:a.ctrlKey||a.metaKey,siblings:a.altKey},d=this.$toggleFoldWidget(i,l);if(!d){var c=a.target||a.srcElement;c&&/ace_fold-widget/.test(c.className)&&(c.className+=" ace_invalid")}},this.$toggleFoldWidget=function(i,a){if(this.getFoldWidget){var l=this.getFoldWidget(i),d=this.getLine(i),c=l==="end"?-1:1,m=this.getFoldAt(i,c===-1?0:d.length,c);if(m)return a.children||a.all?this.removeFold(m):this.expandFold(m),m;var h=this.getFoldWidgetRange(i,!0);if(h&&!h.isMultiLine()&&(m=this.getFoldAt(h.start.row,h.start.column,1),m&&h.isEqual(m.range)))return this.removeFold(m),m;if(a.siblings){var v=this.getParentFoldRangeData(i);if(v.range)var k=v.range.start.row+1,x=v.range.end.row;this.foldAll(k,x,a.all?1e4:0)}else a.children?(x=h?h.end.row:this.getLength(),this.foldAll(i+1,x,a.all?1e4:0)):h&&(a.all&&(h.collapseChildren=1e4),this.addFold("...",h));return h}},this.toggleFoldWidget=function(i){var a=this.selection.getCursor().row;a=this.getRowFoldStart(a);var l=this.$toggleFoldWidget(a,{});if(!l){var d=this.getParentFoldRangeData(a,!0);if(l=d.range||d.firstRange,l){a=l.start.row;var c=this.getFoldAt(a,this.getLine(a).length,1);c?this.removeFold(c):this.addFold("...",l)}}},this.updateFoldWidgets=function(i){var a=i.start.row,l=i.end.row-a;if(l===0)this.foldWidgets[a]=null;else if(i.action=="remove")this.foldWidgets.splice(a,l+1,null);else{var d=Array(l+1);d.unshift(a,1),this.foldWidgets.splice.apply(this.foldWidgets,d)}},this.tokenizerUpdateFoldWidgets=function(i){var a=i.data;a.first!=a.last&&this.foldWidgets.length>a.first&&this.foldWidgets.splice(a.first,this.foldWidgets.length)}}t.Folding=o});ace.define("ace/edit_session/bracket_match",["require","exports","module","ace/token_iterator","ace/range"],function(e,t,r){"use strict";var n=e("../token_iterator").TokenIterator,p=e("../range").Range;function g(){this.findMatchingBracket=function(s,u){if(s.column==0)return null;var o=u||this.getLine(s.row).charAt(s.column-1);if(o=="")return null;var i=o.match(/([\(\[\{])|([\)\]\}])/);return i?i[1]?this.$findClosingBracket(i[1],s):this.$findOpeningBracket(i[2],s):null},this.getBracketRange=function(s){var u=this.getLine(s.row),o=!0,i,a=u.charAt(s.column-1),l=a&&a.match(/([\(\[\{])|([\)\]\}])/);if(l||(a=u.charAt(s.column),s={row:s.row,column:s.column+1},l=a&&a.match(/([\(\[\{])|([\)\]\}])/),o=!1),!l)return null;if(l[1]){var d=this.$findClosingBracket(l[1],s);if(!d)return null;i=p.fromPoints(s,d),o||(i.end.column++,i.start.column--),i.cursor=i.end}else{var d=this.$findOpeningBracket(l[2],s);if(!d)return null;i=p.fromPoints(d,s),o||(i.start.column++,i.end.column--),i.cursor=i.start}return i},this.getMatchingBracketRanges=function(s,u){var o=this.getLine(s.row),i=/([\(\[\{])|([\)\]\}])/,a=!u&&o.charAt(s.column-1),l=a&&a.match(i);if(l||(a=(u===void 0||u)&&o.charAt(s.column),s={row:s.row,column:s.column+1},l=a&&a.match(i)),!l)return null;var d=new p(s.row,s.column-1,s.row,s.column),c=l[1]?this.$findClosingBracket(l[1],s):this.$findOpeningBracket(l[2],s);if(!c)return[d];var m=new p(c.row,c.column,c.row,c.column+1);return[d,m]},this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{","<":">",">":"<"},this.$findOpeningBracket=function(s,u,o){var i=this.$brackets[s],a=1,l=new n(this,u.row,u.column),d=l.getCurrentToken();if(d||(d=l.stepForward()),!!d){o||(o=new RegExp("(\\.?"+d.type.replace(".","\\.").replace("rparen",".paren").replace(/\b(?:end)\b/,"(?:start|begin|end)").replace(/-close\b/,"-(close|open)")+")+"));for(var c=u.column-l.getCurrentTokenColumn()-2,m=d.value;;){for(;c>=0;){var h=m.charAt(c);if(h==i){if(a-=1,a==0)return{row:l.getCurrentTokenRow(),column:c+l.getCurrentTokenColumn()}}else h==s&&(a+=1);c-=1}do d=l.stepBackward();while(d&&!o.test(d.type));if(d==null)break;m=d.value,c=m.length-1}return null}},this.$findClosingBracket=function(s,u,o){var i=this.$brackets[s],a=1,l=new n(this,u.row,u.column),d=l.getCurrentToken();if(d||(d=l.stepForward()),!!d){o||(o=new RegExp("(\\.?"+d.type.replace(".","\\.").replace("lparen",".paren").replace(/\b(?:start|begin)\b/,"(?:start|begin|end)").replace(/-open\b/,"-(close|open)")+")+"));for(var c=u.column-l.getCurrentTokenColumn();;){for(var m=d.value,h=m.length;c<h;){var v=m.charAt(c);if(v==i){if(a-=1,a==0)return{row:l.getCurrentTokenRow(),column:c+l.getCurrentTokenColumn()}}else v==s&&(a+=1);c+=1}do d=l.stepForward();while(d&&!o.test(d.type));if(d==null)break;c=0}return null}},this.getMatchingTags=function(s){var u=new n(this,s.row,s.column),o=this.$findTagName(u);if(o){var i=u.stepBackward();return i.value==="<"?this.$findClosingTag(u,o):this.$findOpeningTag(u,o)}},this.$findTagName=function(s){var u=s.getCurrentToken(),o=!1,i=!1;if(u&&u.type.indexOf("tag-name")===-1)do i?u=s.stepBackward():u=s.stepForward(),u&&(u.value==="/>"?i=!0:u.type.indexOf("tag-name")!==-1&&(o=!0));while(u&&!o);return u},this.$findClosingTag=function(s,u){var o,i=u.value,a=u.value,l=0,d=new p(s.getCurrentTokenRow(),s.getCurrentTokenColumn(),s.getCurrentTokenRow(),s.getCurrentTokenColumn()+1);u=s.stepForward();var c=new p(s.getCurrentTokenRow(),s.getCurrentTokenColumn(),s.getCurrentTokenRow(),s.getCurrentTokenColumn()+u.value.length),m=!1;do{if(o=u,o.type.indexOf("tag-close")!==-1&&!m){var h=new p(s.getCurrentTokenRow(),s.getCurrentTokenColumn(),s.getCurrentTokenRow(),s.getCurrentTokenColumn()+1);m=!0}if(u=s.stepForward(),u){if(u.value===">"&&!m){var h=new p(s.getCurrentTokenRow(),s.getCurrentTokenColumn(),s.getCurrentTokenRow(),s.getCurrentTokenColumn()+1);m=!0}if(u.type.indexOf("tag-name")!==-1){if(i=u.value,a===i){if(o.value==="<")l++;else if(o.value==="</"&&(l--,l<0)){s.stepBackward();var v=new p(s.getCurrentTokenRow(),s.getCurrentTokenColumn(),s.getCurrentTokenRow(),s.getCurrentTokenColumn()+2);u=s.stepForward();var k=new p(s.getCurrentTokenRow(),s.getCurrentTokenColumn(),s.getCurrentTokenRow(),s.getCurrentTokenColumn()+u.value.length);if(u.type.indexOf("tag-close")===-1&&(u=s.stepForward()),u&&u.value===">")var x=new p(s.getCurrentTokenRow(),s.getCurrentTokenColumn(),s.getCurrentTokenRow(),s.getCurrentTokenColumn()+1);else return}}}else if(a===i&&u.value==="/>"&&(l--,l<0))var v=new p(s.getCurrentTokenRow(),s.getCurrentTokenColumn(),s.getCurrentTokenRow(),s.getCurrentTokenColumn()+2),k=v,x=k,h=new p(c.end.row,c.end.column,c.end.row,c.end.column+1)}}while(u&&l>=0);if(d&&h&&v&&x&&c&&k)return{openTag:new p(d.start.row,d.start.column,h.end.row,h.end.column),closeTag:new p(v.start.row,v.start.column,x.end.row,x.end.column),openTagName:c,closeTagName:k}},this.$findOpeningTag=function(s,u){var o=s.getCurrentToken(),i=u.value,a=0,l=s.getCurrentTokenRow(),d=s.getCurrentTokenColumn(),c=d+2,m=new p(l,d,l,c);s.stepForward();var h=new p(s.getCurrentTokenRow(),s.getCurrentTokenColumn(),s.getCurrentTokenRow(),s.getCurrentTokenColumn()+u.value.length);if(u.type.indexOf("tag-close")===-1&&(u=s.stepForward()),!(!u||u.value!==">")){var v=new p(s.getCurrentTokenRow(),s.getCurrentTokenColumn(),s.getCurrentTokenRow(),s.getCurrentTokenColumn()+1);s.stepBackward(),s.stepBackward();do if(u=o,l=s.getCurrentTokenRow(),d=s.getCurrentTokenColumn(),c=d+u.value.length,o=s.stepBackward(),u){if(u.type.indexOf("tag-name")!==-1){if(i===u.value)if(o.value==="<"){if(a++,a>0){var k=new p(l,d,l,c),x=new p(s.getCurrentTokenRow(),s.getCurrentTokenColumn(),s.getCurrentTokenRow(),s.getCurrentTokenColumn()+1);do u=s.stepForward();while(u&&u.value!==">");var T=new p(s.getCurrentTokenRow(),s.getCurrentTokenColumn(),s.getCurrentTokenRow(),s.getCurrentTokenColumn()+1)}}else o.value==="</"&&a--}else if(u.value==="/>"){for(var S=0,f=o;f;){if(f.type.indexOf("tag-name")!==-1&&f.value===i){a--;break}else if(f.value==="<")break;f=s.stepBackward(),S++}for(var L=0;L<S;L++)s.stepForward()}}while(o&&a<=0);if(x&&T&&m&&v&&k&&h)return{openTag:new p(x.start.row,x.start.column,T.end.row,T.end.column),closeTag:new p(m.start.row,m.start.column,v.end.row,v.end.column),openTagName:k,closeTagName:h}}}}t.BracketMatch=g});ace.define("ace/edit_session",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/bidihandler","ace/config","ace/lib/event_emitter","ace/selection","ace/mode/text","ace/range","ace/document","ace/background_tokenizer","ace/search_highlight","ace/undomanager","ace/edit_session/folding","ace/edit_session/bracket_match"],function(e,t,r){"use strict";var n=e("./lib/oop"),p=e("./lib/lang"),g=e("./bidihandler").BidiHandler,s=e("./config"),u=e("./lib/event_emitter").EventEmitter,o=e("./selection").Selection,i=e("./mode/text").Mode,a=e("./range").Range,l=e("./document").Document,d=e("./background_tokenizer").BackgroundTokenizer,c=e("./search_highlight").SearchHighlight,m=e("./undomanager").UndoManager,h=function(){function C(w,y){this.doc,this.$breakpoints=[],this.$decorations=[],this.$frontMarkers={},this.$backMarkers={},this.$markerId=1,this.$undoSelect=!0,this.$foldData=[],this.id="session"+ ++C.$uid,this.$foldData.toString=function(){return this.join(`
`)},this.bgTokenizer=new d(new i().getTokenizer(),this);var b=this;this.bgTokenizer.on("update",function(E){b._signal("tokenizerUpdate",E)}),this.on("changeFold",this.onChangeFold.bind(this)),this.$onChange=this.onChange.bind(this),(typeof w!="object"||!w.getLine)&&(w=new l(w)),this.setDocument(w),this.selection=new o(this),this.$bidiHandler=new g(this),s.resetOptions(this),this.setMode(y),s._signal("session",this),this.destroyed=!1}return C.prototype.setDocument=function(w){this.doc&&this.doc.off("change",this.$onChange),this.doc=w,w.on("change",this.$onChange,!0),this.bgTokenizer.setDocument(this.getDocument()),this.resetCaches()},C.prototype.getDocument=function(){return this.doc},C.prototype.$resetRowCache=function(w){if(!w){this.$docRowCache=[],this.$screenRowCache=[];return}var y=this.$docRowCache.length,b=this.$getRowCacheIndex(this.$docRowCache,w)+1;y>b&&(this.$docRowCache.splice(b,y),this.$screenRowCache.splice(b,y))},C.prototype.$getRowCacheIndex=function(w,y){for(var b=0,E=w.length-1;b<=E;){var _=b+E>>1,R=w[_];if(y>R)b=_+1;else if(y<R)E=_-1;else return _}return b-1},C.prototype.resetCaches=function(){this.$modified=!0,this.$wrapData=[],this.$rowLengthCache=[],this.$resetRowCache(0),this.destroyed||this.bgTokenizer.start(0)},C.prototype.onChangeFold=function(w){var y=w.data;this.$resetRowCache(y.start.row)},C.prototype.onChange=function(w){this.$modified=!0,this.$bidiHandler.onChange(w),this.$resetRowCache(w.start.row);var y=this.$updateInternalDataOnChange(w);!this.$fromUndo&&this.$undoManager&&(y&&y.length&&(this.$undoManager.add({action:"removeFolds",folds:y},this.mergeUndoDeltas),this.mergeUndoDeltas=!0),this.$undoManager.add(w,this.mergeUndoDeltas),this.mergeUndoDeltas=!0,this.$informUndoManager.schedule()),this.bgTokenizer.$updateOnChange(w),this._signal("change",w)},C.prototype.setValue=function(w){this.doc.setValue(w),this.selection.moveTo(0,0),this.$resetRowCache(0),this.setUndoManager(this.$undoManager),this.getUndoManager().reset()},C.fromJSON=function(w){typeof w=="string"&&(w=JSON.parse(w));var y=new m;y.$undoStack=w.history.undo,y.$redoStack=w.history.redo,y.mark=w.history.mark,y.$rev=w.history.rev;var b=new C(w.value);return w.folds.forEach(function(E){b.addFold("...",a.fromPoints(E.start,E.end))}),b.setAnnotations(w.annotations),b.setBreakpoints(w.breakpoints),b.setMode(w.mode),b.setScrollLeft(w.scrollLeft),b.setScrollTop(w.scrollTop),b.setUndoManager(y),b.selection.fromJSON(w.selection),b},C.prototype.toJSON=function(){return{annotations:this.$annotations,breakpoints:this.$breakpoints,folds:this.getAllFolds().map(function(w){return w.range}),history:this.getUndoManager(),mode:this.$mode.$id,scrollLeft:this.$scrollLeft,scrollTop:this.$scrollTop,selection:this.selection.toJSON(),value:this.doc.getValue()}},C.prototype.toString=function(){return this.doc.getValue()},C.prototype.getSelection=function(){return this.selection},C.prototype.getState=function(w){return this.bgTokenizer.getState(w)},C.prototype.getTokens=function(w){return this.bgTokenizer.getTokens(w)},C.prototype.getTokenAt=function(w,y){var b=this.bgTokenizer.getTokens(w),E,_=0;if(y==null){var R=b.length-1;_=this.getLine(w).length}else for(var R=0;R<b.length&&(_+=b[R].value.length,!(_>=y));R++);return E=b[R],E?(E.index=R,E.start=_-E.value.length,E):null},C.prototype.setUndoManager=function(w){if(this.$undoManager=w,this.$informUndoManager&&this.$informUndoManager.cancel(),w){var y=this;w.addSession(this),this.$syncInformUndoManager=function(){y.$informUndoManager.cancel(),y.mergeUndoDeltas=!1},this.$informUndoManager=p.delayedCall(this.$syncInformUndoManager)}else this.$syncInformUndoManager=function(){}},C.prototype.markUndoGroup=function(){this.$syncInformUndoManager&&this.$syncInformUndoManager()},C.prototype.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager},C.prototype.getTabString=function(){return this.getUseSoftTabs()?p.stringRepeat(" ",this.getTabSize()):"	"},C.prototype.setUseSoftTabs=function(w){this.setOption("useSoftTabs",w)},C.prototype.getUseSoftTabs=function(){return this.$useSoftTabs&&!this.$mode.$indentWithTabs},C.prototype.setTabSize=function(w){this.setOption("tabSize",w)},C.prototype.getTabSize=function(){return this.$tabSize},C.prototype.isTabStop=function(w){return this.$useSoftTabs&&w.column%this.$tabSize===0},C.prototype.setNavigateWithinSoftTabs=function(w){this.setOption("navigateWithinSoftTabs",w)},C.prototype.getNavigateWithinSoftTabs=function(){return this.$navigateWithinSoftTabs},C.prototype.setOverwrite=function(w){this.setOption("overwrite",w)},C.prototype.getOverwrite=function(){return this.$overwrite},C.prototype.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)},C.prototype.addGutterDecoration=function(w,y){this.$decorations[w]||(this.$decorations[w]=""),this.$decorations[w]+=" "+y,this._signal("changeBreakpoint",{})},C.prototype.removeGutterDecoration=function(w,y){this.$decorations[w]=(this.$decorations[w]||"").replace(" "+y,""),this._signal("changeBreakpoint",{})},C.prototype.getBreakpoints=function(){return this.$breakpoints},C.prototype.setBreakpoints=function(w){this.$breakpoints=[];for(var y=0;y<w.length;y++)this.$breakpoints[w[y]]="ace_breakpoint";this._signal("changeBreakpoint",{})},C.prototype.clearBreakpoints=function(){this.$breakpoints=[],this._signal("changeBreakpoint",{})},C.prototype.setBreakpoint=function(w,y){y===void 0&&(y="ace_breakpoint"),y?this.$breakpoints[w]=y:delete this.$breakpoints[w],this._signal("changeBreakpoint",{})},C.prototype.clearBreakpoint=function(w){delete this.$breakpoints[w],this._signal("changeBreakpoint",{})},C.prototype.addMarker=function(w,y,b,E){var _=this.$markerId++,R={range:w,type:b||"line",renderer:typeof b=="function"?b:null,clazz:y,inFront:!!E,id:_};return E?(this.$frontMarkers[_]=R,this._signal("changeFrontMarker")):(this.$backMarkers[_]=R,this._signal("changeBackMarker")),_},C.prototype.addDynamicMarker=function(w,y){if(w.update){var b=this.$markerId++;return w.id=b,w.inFront=!!y,y?(this.$frontMarkers[b]=w,this._signal("changeFrontMarker")):(this.$backMarkers[b]=w,this._signal("changeBackMarker")),w}},C.prototype.removeMarker=function(w){var y=this.$frontMarkers[w]||this.$backMarkers[w];if(y){var b=y.inFront?this.$frontMarkers:this.$backMarkers;delete b[w],this._signal(y.inFront?"changeFrontMarker":"changeBackMarker")}},C.prototype.getMarkers=function(w){return w?this.$frontMarkers:this.$backMarkers},C.prototype.highlight=function(w){if(!this.$searchHighlight){var y=new c(null,"ace_selected-word","text");this.$searchHighlight=this.addDynamicMarker(y)}this.$searchHighlight.setRegexp(w)},C.prototype.highlightLines=function(w,y,b,E){typeof y!="number"&&(b=y,y=w),b||(b="ace_step");var _=new a(w,0,y,1/0);return _.id=this.addMarker(_,b,"fullLine",E),_},C.prototype.setAnnotations=function(w){this.$annotations=w,this._signal("changeAnnotation",{})},C.prototype.getAnnotations=function(){return this.$annotations||[]},C.prototype.clearAnnotations=function(){this.setAnnotations([])},C.prototype.$detectNewLine=function(w){var y=w.match(/^.*?(\r?\n)/m);y?this.$autoNewLine=y[1]:this.$autoNewLine=`
`},C.prototype.getWordRange=function(w,y){var b=this.getLine(w),E=!1;if(y>0&&(E=!!b.charAt(y-1).match(this.tokenRe)),E||(E=!!b.charAt(y).match(this.tokenRe)),E)var _=this.tokenRe;else if(/^\s+$/.test(b.slice(y-1,y+1)))var _=/\s/;else var _=this.nonTokenRe;var R=y;if(R>0){do R--;while(R>=0&&b.charAt(R).match(_));R++}for(var M=y;M<b.length&&b.charAt(M).match(_);)M++;return new a(w,R,w,M)},C.prototype.getAWordRange=function(w,y){for(var b=this.getWordRange(w,y),E=this.getLine(b.end.row);E.charAt(b.end.column).match(/[ \t]/);)b.end.column+=1;return b},C.prototype.setNewLineMode=function(w){this.doc.setNewLineMode(w)},C.prototype.getNewLineMode=function(){return this.doc.getNewLineMode()},C.prototype.setUseWorker=function(w){this.setOption("useWorker",w)},C.prototype.getUseWorker=function(){return this.$useWorker},C.prototype.onReloadTokenizer=function(w){var y=w.data;this.bgTokenizer.start(y.first),this._signal("tokenizerUpdate",w)},C.prototype.setMode=function(w,y){if(w&&typeof w=="object"){if(w.getTokenizer)return this.$onChangeMode(w);var b=w,E=b.path}else E=w||"ace/mode/text";if(this.$modes["ace/mode/text"]||(this.$modes["ace/mode/text"]=new i),this.$modes[E]&&!b){this.$onChangeMode(this.$modes[E]),y&&y();return}this.$modeId=E,s.loadModule(["mode",E],function(_){if(this.$modeId!==E)return y&&y();this.$modes[E]&&!b?this.$onChangeMode(this.$modes[E]):_&&_.Mode&&(_=new _.Mode(b),b||(this.$modes[E]=_,_.$id=E),this.$onChangeMode(_)),y&&y()}.bind(this)),this.$mode||this.$onChangeMode(this.$modes["ace/mode/text"],!0)},C.prototype.$onChangeMode=function(w,y){if(y||(this.$modeId=w.$id),this.$mode!==w){var b=this.$mode;this.$mode=w,this.$stopWorker(),this.$useWorker&&this.$startWorker();var E=w.getTokenizer();if(E.on!==void 0){var _=this.onReloadTokenizer.bind(this);E.on("update",_)}this.bgTokenizer.setTokenizer(E),this.bgTokenizer.setDocument(this.getDocument()),this.tokenRe=w.tokenRe,this.nonTokenRe=w.nonTokenRe,y||(w.attachToSession&&w.attachToSession(this),this.$options.wrapMethod.set.call(this,this.$wrapMethod),this.$setFolding(w.foldingRules),this.bgTokenizer.start(0),this._emit("changeMode",{oldMode:b,mode:w}))}},C.prototype.$stopWorker=function(){this.$worker&&(this.$worker.terminate(),this.$worker=null)},C.prototype.$startWorker=function(){try{this.$worker=this.$mode.createWorker(this)}catch(w){s.warn("Could not load worker",w),this.$worker=null}},C.prototype.getMode=function(){return this.$mode},C.prototype.setScrollTop=function(w){this.$scrollTop===w||isNaN(w)||(this.$scrollTop=w,this._signal("changeScrollTop",w))},C.prototype.getScrollTop=function(){return this.$scrollTop},C.prototype.setScrollLeft=function(w){this.$scrollLeft===w||isNaN(w)||(this.$scrollLeft=w,this._signal("changeScrollLeft",w))},C.prototype.getScrollLeft=function(){return this.$scrollLeft},C.prototype.getScreenWidth=function(){return this.$computeWidth(),this.lineWidgets?Math.max(this.getLineWidgetMaxWidth(),this.screenWidth):this.screenWidth},C.prototype.getLineWidgetMaxWidth=function(){if(this.lineWidgetsWidth!=null)return this.lineWidgetsWidth;var w=0;return this.lineWidgets.forEach(function(y){y&&y.screenWidth>w&&(w=y.screenWidth)}),this.lineWidgetWidth=w},C.prototype.$computeWidth=function(w){if(this.$modified||w){if(this.$modified=!1,this.$useWrapMode)return this.screenWidth=this.$wrapLimit;for(var y=this.doc.getAllLines(),b=this.$rowLengthCache,E=0,_=0,R=this.$foldData[_],M=R?R.start.row:1/0,I=y.length,P=0;P<I;P++){if(P>M){if(P=R.end.row+1,P>=I)break;R=this.$foldData[_++],M=R?R.start.row:1/0}b[P]==null&&(b[P]=this.$getStringScreenWidth(y[P])[0]),b[P]>E&&(E=b[P])}this.screenWidth=E}},C.prototype.getLine=function(w){return this.doc.getLine(w)},C.prototype.getLines=function(w,y){return this.doc.getLines(w,y)},C.prototype.getLength=function(){return this.doc.getLength()},C.prototype.getTextRange=function(w){return this.doc.getTextRange(w||this.selection.getRange())},C.prototype.insert=function(w,y){return this.doc.insert(w,y)},C.prototype.remove=function(w){return this.doc.remove(w)},C.prototype.removeFullLines=function(w,y){return this.doc.removeFullLines(w,y)},C.prototype.undoChanges=function(w,y){if(w.length){this.$fromUndo=!0;for(var b=w.length-1;b!=-1;b--){var E=w[b];E.action=="insert"||E.action=="remove"?this.doc.revertDelta(E):E.folds&&this.addFolds(E.folds)}!y&&this.$undoSelect&&(w.selectionBefore?this.selection.fromJSON(w.selectionBefore):this.selection.setRange(this.$getUndoSelection(w,!0))),this.$fromUndo=!1}},C.prototype.redoChanges=function(w,y){if(w.length){this.$fromUndo=!0;for(var b=0;b<w.length;b++){var E=w[b];(E.action=="insert"||E.action=="remove")&&this.doc.$safeApplyDelta(E)}!y&&this.$undoSelect&&(w.selectionAfter?this.selection.fromJSON(w.selectionAfter):this.selection.setRange(this.$getUndoSelection(w,!1))),this.$fromUndo=!1}},C.prototype.setUndoSelect=function(w){this.$undoSelect=w},C.prototype.$getUndoSelection=function(w,y){function b(I){return y?I.action!=="insert":I.action==="insert"}for(var E,_,R=0;R<w.length;R++){var M=w[R];if(M.start){if(!E){b(M)?E=a.fromPoints(M.start,M.end):E=a.fromPoints(M.start,M.start);continue}b(M)?(_=M.start,E.compare(_.row,_.column)==-1&&E.setStart(_),_=M.end,E.compare(_.row,_.column)==1&&E.setEnd(_)):(_=M.start,E.compare(_.row,_.column)==-1&&(E=a.fromPoints(M.start,M.start)))}}return E},C.prototype.replace=function(w,y){return this.doc.replace(w,y)},C.prototype.moveText=function(w,y,b){var E=this.getTextRange(w),_=this.getFoldsInRange(w),R=a.fromPoints(y,y);if(!b){this.remove(w);var M=w.start.row-w.end.row,I=M?-w.end.column:w.start.column-w.end.column;I&&(R.start.row==w.end.row&&R.start.column>w.end.column&&(R.start.column+=I),R.end.row==w.end.row&&R.end.column>w.end.column&&(R.end.column+=I)),M&&R.start.row>=w.end.row&&(R.start.row+=M,R.end.row+=M)}if(R.end=this.insert(R.start,E),_.length){var P=w.start,O=R.start,M=O.row-P.row,I=O.column-P.column;this.addFolds(_.map(function(z){return z=z.clone(),z.start.row==P.row&&(z.start.column+=I),z.end.row==P.row&&(z.end.column+=I),z.start.row+=M,z.end.row+=M,z}))}return R},C.prototype.indentRows=function(w,y,b){b=b.replace(/\t/g,this.getTabString());for(var E=w;E<=y;E++)this.doc.insertInLine({row:E,column:0},b)},C.prototype.outdentRows=function(w){for(var y=w.collapseRows(),b=new a(0,0,0,0),E=this.getTabSize(),_=y.start.row;_<=y.end.row;++_){var R=this.getLine(_);b.start.row=_,b.end.row=_;for(var M=0;M<E&&R.charAt(M)==" ";++M);M<E&&R.charAt(M)=="	"?(b.start.column=M,b.end.column=M+1):(b.start.column=0,b.end.column=M),this.remove(b)}},C.prototype.$moveLines=function(w,y,b){if(w=this.getRowFoldStart(w),y=this.getRowFoldEnd(y),b<0){var E=this.getRowFoldStart(w+b);if(E<0)return 0;var _=E-w}else if(b>0){var E=this.getRowFoldEnd(y+b);if(E>this.doc.getLength()-1)return 0;var _=E-y}else{w=this.$clipRowToDocument(w),y=this.$clipRowToDocument(y);var _=y-w+1}var R=new a(w,0,y,Number.MAX_VALUE),M=this.getFoldsInRange(R).map(function(P){return P=P.clone(),P.start.row+=_,P.end.row+=_,P}),I=b==0?this.doc.getLines(w,y):this.doc.removeFullLines(w,y);return this.doc.insertFullLines(w+_,I),M.length&&this.addFolds(M),_},C.prototype.moveLinesUp=function(w,y){return this.$moveLines(w,y,-1)},C.prototype.moveLinesDown=function(w,y){return this.$moveLines(w,y,1)},C.prototype.duplicateLines=function(w,y){return this.$moveLines(w,y,0)},C.prototype.$clipRowToDocument=function(w){return Math.max(0,Math.min(w,this.doc.getLength()-1))},C.prototype.$clipColumnToRow=function(w,y){return y<0?0:Math.min(this.doc.getLine(w).length,y)},C.prototype.$clipPositionToDocument=function(w,y){if(y=Math.max(0,y),w<0)w=0,y=0;else{var b=this.doc.getLength();w>=b?(w=b-1,y=this.doc.getLine(b-1).length):y=Math.min(this.doc.getLine(w).length,y)}return{row:w,column:y}},C.prototype.$clipRangeToDocument=function(w){w.start.row<0?(w.start.row=0,w.start.column=0):w.start.column=this.$clipColumnToRow(w.start.row,w.start.column);var y=this.doc.getLength()-1;return w.end.row>y?(w.end.row=y,w.end.column=this.doc.getLine(y).length):w.end.column=this.$clipColumnToRow(w.end.row,w.end.column),w},C.prototype.setUseWrapMode=function(w){if(w!=this.$useWrapMode){if(this.$useWrapMode=w,this.$modified=!0,this.$resetRowCache(0),w){var y=this.getLength();this.$wrapData=Array(y),this.$updateWrapData(0,y-1)}this._signal("changeWrapMode")}},C.prototype.getUseWrapMode=function(){return this.$useWrapMode},C.prototype.setWrapLimitRange=function(w,y){(this.$wrapLimitRange.min!==w||this.$wrapLimitRange.max!==y)&&(this.$wrapLimitRange={min:w,max:y},this.$modified=!0,this.$bidiHandler.markAsDirty(),this.$useWrapMode&&this._signal("changeWrapMode"))},C.prototype.adjustWrapLimit=function(w,y){var b=this.$wrapLimitRange;b.max<0&&(b={min:y,max:y});var E=this.$constrainWrapLimit(w,b.min,b.max);return E!=this.$wrapLimit&&E>1?(this.$wrapLimit=E,this.$modified=!0,this.$useWrapMode&&(this.$updateWrapData(0,this.getLength()-1),this.$resetRowCache(0),this._signal("changeWrapLimit")),!0):!1},C.prototype.$constrainWrapLimit=function(w,y,b){return y&&(w=Math.max(y,w)),b&&(w=Math.min(b,w)),w},C.prototype.getWrapLimit=function(){return this.$wrapLimit},C.prototype.setWrapLimit=function(w){this.setWrapLimitRange(w,w)},C.prototype.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}},C.prototype.$updateInternalDataOnChange=function(w){var y=this.$useWrapMode,b=w.action,E=w.start,_=w.end,R=E.row,M=_.row,I=M-R,P=null;if(this.$updating=!0,I!=0)if(b==="remove"){this[y?"$wrapData":"$rowLengthCache"].splice(R,I);var O=this.$foldData;P=this.getFoldsInRange(w),this.removeFolds(P);var F=this.getFoldLine(_.row),D=0;if(F){F.addRemoveChars(_.row,_.column,E.column-_.column),F.shiftRow(-I);var z=this.getFoldLine(R);z&&z!==F&&(z.merge(F),F=z),D=O.indexOf(F)+1}for(D;D<O.length;D++){var F=O[D];F.start.row>=_.row&&F.shiftRow(-I)}M=R}else{var N=Array(I);N.unshift(R,0);var W=y?this.$wrapData:this.$rowLengthCache;W.splice.apply(W,N);var O=this.$foldData,F=this.getFoldLine(R),D=0;if(F){var j=F.range.compareInside(E.row,E.column);j==0?(F=F.split(E.row,E.column),F&&(F.shiftRow(I),F.addRemoveChars(M,0,_.column-E.column))):j==-1&&(F.addRemoveChars(R,0,_.column-E.column),F.shiftRow(I)),D=O.indexOf(F)+1}for(D;D<O.length;D++){var F=O[D];F.start.row>=R&&F.shiftRow(I)}}else{I=Math.abs(w.start.column-w.end.column),b==="remove"&&(P=this.getFoldsInRange(w),this.removeFolds(P),I=-I);var F=this.getFoldLine(R);F&&F.addRemoveChars(R,E.column,I)}return y&&this.$wrapData.length!=this.doc.getLength()&&console.error("doc.getLength() and $wrapData.length have to be the same!"),this.$updating=!1,y?this.$updateWrapData(R,M):this.$updateRowLengthCache(R,M),P},C.prototype.$updateRowLengthCache=function(w,y){this.$rowLengthCache[w]=null,this.$rowLengthCache[y]=null},C.prototype.$updateWrapData=function(w,y){var b=this.doc.getAllLines(),E=this.getTabSize(),_=this.$wrapData,R=this.$wrapLimit,M,I,P=w;for(y=Math.min(y,b.length-1);P<=y;)I=this.getFoldLine(P,I),I?(M=[],I.walk(function(O,F,D,z){var N;if(O!=null){N=this.$getDisplayTokens(O,M.length),N[0]=x;for(var W=1;W<N.length;W++)N[W]=T}else N=this.$getDisplayTokens(b[F].substring(z,D),M.length);M=M.concat(N)}.bind(this),I.end.row,b[I.end.row].length+1),_[I.start.row]=this.$computeWrapSplits(M,R,E),P=I.end.row+1):(M=this.$getDisplayTokens(b[P]),_[P]=this.$computeWrapSplits(M,R,E),P++)},C.prototype.$computeWrapSplits=function(w,y,b){if(w.length==0)return[];var E=[],_=w.length,R=0,M=0,I=this.$wrapAsCode,P=this.$indentedSoftWrap,O=y<=Math.max(2*b,8)||P===!1?0:Math.floor(y/2);function F(){var j=0;if(O===0)return j;if(P)for(var X=0;X<w.length;X++){var G=w[X];if(G==f)j+=1;else if(G==L)j+=b;else{if(G==$)continue;break}}return I&&P!==!1&&(j+=b),Math.min(j,O)}function D(j){for(var X=j-R,G=R;G<j;G++){var J=w[G];(J===12||J===2)&&(X-=1)}E.length||(z=F(),E.indent=z),M+=X,E.push(M),R=j}for(var z=0;_-R>y-z;){var N=R+y-z;if(w[N-1]>=f&&w[N]>=f){D(N);continue}if(w[N]==x||w[N]==T){for(N;N!=R-1&&w[N]!=x;N--);if(N>R){D(N);continue}for(N=R+y,N;N<w.length&&w[N]==T;N++);if(N==w.length)break;D(N);continue}for(var W=Math.max(N-(y-(y>>2)),R-1);N>W&&w[N]<x;)N--;if(I){for(;N>W&&w[N]<x;)N--;for(;N>W&&w[N]==S;)N--}else for(;N>W&&w[N]<f;)N--;if(N>W){D(++N);continue}N=R+y,w[N]==k&&N--,D(N-z)}return E},C.prototype.$getDisplayTokens=function(w,y){var b=[],E;y=y||0;for(var _=0;_<w.length;_++){var R=w.charCodeAt(_);if(R==9){E=this.getScreenTabSize(b.length+y),b.push(L);for(var M=1;M<E;M++)b.push($)}else R==32?b.push(f):R>39&&R<48||R>57&&R<64?b.push(S):R>=4352&&A(R)?b.push(v,k):b.push(v)}return b},C.prototype.$getStringScreenWidth=function(w,y,b){if(y==0)return[0,0];y==null&&(y=1/0),b=b||0;var E,_;for(_=0;_<w.length&&(E=w.charCodeAt(_),E==9?b+=this.getScreenTabSize(b):E>=4352&&A(E)?b+=2:b+=1,!(b>y));_++);return[b,_]},C.prototype.getRowLength=function(w){var y=1;return this.lineWidgets&&(y+=this.lineWidgets[w]&&this.lineWidgets[w].rowCount||0),!this.$useWrapMode||!this.$wrapData[w]?y:this.$wrapData[w].length+y},C.prototype.getRowLineCount=function(w){return!this.$useWrapMode||!this.$wrapData[w]?1:this.$wrapData[w].length+1},C.prototype.getRowWrapIndent=function(w){if(this.$useWrapMode){var y=this.screenToDocumentPosition(w,Number.MAX_VALUE),b=this.$wrapData[y.row];return b.length&&b[0]<y.column?b.indent:0}else return 0},C.prototype.getScreenLastRowColumn=function(w){var y=this.screenToDocumentPosition(w,Number.MAX_VALUE);return this.documentToScreenColumn(y.row,y.column)},C.prototype.getDocumentLastRowColumn=function(w,y){var b=this.documentToScreenRow(w,y);return this.getScreenLastRowColumn(b)},C.prototype.getDocumentLastRowColumnPosition=function(w,y){var b=this.documentToScreenRow(w,y);return this.screenToDocumentPosition(b,Number.MAX_VALUE/10)},C.prototype.getRowSplitData=function(w){if(this.$useWrapMode)return this.$wrapData[w]},C.prototype.getScreenTabSize=function(w){return this.$tabSize-(w%this.$tabSize|0)},C.prototype.screenToDocumentRow=function(w,y){return this.screenToDocumentPosition(w,y).row},C.prototype.screenToDocumentColumn=function(w,y){return this.screenToDocumentPosition(w,y).column},C.prototype.screenToDocumentPosition=function(w,y,b){if(w<0)return{row:0,column:0};var E,_=0,R=0,M,I=0,P=0,O=this.$screenRowCache,F=this.$getRowCacheIndex(O,w),D=O.length;if(D&&F>=0)var I=O[F],_=this.$docRowCache[F],z=w>O[D-1];else var z=!D;for(var N=this.getLength()-1,W=this.getNextFoldLine(_),j=W?W.start.row:1/0;I<=w&&(P=this.getRowLength(_),!(I+P>w||_>=N));)I+=P,_++,_>j&&(_=W.end.row+1,W=this.getNextFoldLine(_,W),j=W?W.start.row:1/0),z&&(this.$docRowCache.push(_),this.$screenRowCache.push(I));if(W&&W.start.row<=_)E=this.getFoldDisplayLine(W),_=W.start.row;else{if(I+P<=w||_>N)return{row:N,column:this.getLine(N).length};E=this.getLine(_),W=null}var X=0,G=Math.floor(w-I);if(this.$useWrapMode){var J=this.$wrapData[_];J&&(M=J[G],G>0&&J.length&&(X=J.indent,R=J[G-1]||J[J.length-1],E=E.substring(R)))}return b!==void 0&&this.$bidiHandler.isBidiRow(I+G,_,G)&&(y=this.$bidiHandler.offsetToCol(b)),R+=this.$getStringScreenWidth(E,y-X)[1],this.$useWrapMode&&R>=M&&(R=M-1),W?W.idxToPosition(R):{row:_,column:R}},C.prototype.documentToScreenPosition=function(w,y){if(typeof y>"u")var b=this.$clipPositionToDocument(w.row,w.column);else b=this.$clipPositionToDocument(w,y);w=b.row,y=b.column;var E=0,_=null,R=null;R=this.getFoldAt(w,y,1),R&&(w=R.start.row,y=R.start.column);var M,I=0,P=this.$docRowCache,O=this.$getRowCacheIndex(P,w),F=P.length;if(F&&O>=0)var I=P[O],E=this.$screenRowCache[O],D=w>P[F-1];else var D=!F;for(var z=this.getNextFoldLine(I),N=z?z.start.row:1/0;I<w;){if(I>=N){if(M=z.end.row+1,M>w)break;z=this.getNextFoldLine(M,z),N=z?z.start.row:1/0}else M=I+1;E+=this.getRowLength(I),I=M,D&&(this.$docRowCache.push(I),this.$screenRowCache.push(E))}var W="";z&&I>=N?(W=this.getFoldDisplayLine(z,w,y),_=z.start.row):(W=this.getLine(w).substring(0,y),_=w);var j=0;if(this.$useWrapMode){var X=this.$wrapData[_];if(X){for(var G=0;W.length>=X[G];)E++,G++;W=W.substring(X[G-1]||0,W.length),j=G>0?X.indent:0}}return this.lineWidgets&&this.lineWidgets[I]&&this.lineWidgets[I].rowsAbove&&(E+=this.lineWidgets[I].rowsAbove),{row:E,column:j+this.$getStringScreenWidth(W)[0]}},C.prototype.documentToScreenColumn=function(w,y){return this.documentToScreenPosition(w,y).column},C.prototype.documentToScreenRow=function(w,y){return this.documentToScreenPosition(w,y).row},C.prototype.getScreenLength=function(){var w=0,y=null;if(this.$useWrapMode)for(var _=this.$wrapData.length,R=0,E=0,y=this.$foldData[E++],M=y?y.start.row:1/0;R<_;){var I=this.$wrapData[R];w+=I?I.length+1:1,R++,R>M&&(R=y.end.row+1,y=this.$foldData[E++],M=y?y.start.row:1/0)}else{w=this.getLength();for(var b=this.$foldData,E=0;E<b.length;E++)y=b[E],w-=y.end.row-y.start.row}return this.lineWidgets&&(w+=this.$getWidgetScreenLength()),w},C.prototype.$setFontMetrics=function(w){this.$enableVarChar&&(this.$getStringScreenWidth=function(y,b,E){if(b===0)return[0,0];b||(b=1/0),E=E||0;var _,R;for(R=0;R<y.length&&(_=y.charAt(R),_==="	"?E+=this.getScreenTabSize(E):E+=w.getCharacterWidth(_),!(E>b));R++);return[E,R]})},C.prototype.getPrecedingCharacter=function(){var w=this.selection.getCursor();if(w.column===0)return w.row===0?"":this.doc.getNewLineCharacter();var y=this.getLine(w.row);return y[w.column-1]},C.prototype.destroy=function(){this.destroyed||(this.bgTokenizer.setDocument(null),this.bgTokenizer.cleanup(),this.destroyed=!0),this.$stopWorker(),this.removeAllListeners(),this.doc&&this.doc.off("change",this.$onChange),this.selection.detach()},C}();h.$uid=0,h.prototype.$modes=s.$modes,h.prototype.getValue=h.prototype.toString,h.prototype.$defaultUndoManager={undo:function(){},redo:function(){},hasUndo:function(){},hasRedo:function(){},reset:function(){},add:function(){},addSelection:function(){},startNewGroup:function(){},addSession:function(){}},h.prototype.$overwrite=!1,h.prototype.$mode=null,h.prototype.$modeId=null,h.prototype.$scrollTop=0,h.prototype.$scrollLeft=0,h.prototype.$wrapLimit=80,h.prototype.$useWrapMode=!1,h.prototype.$wrapLimitRange={min:null,max:null},h.prototype.lineWidgets=null,h.prototype.isFullWidth=A,n.implement(h.prototype,u);var v=1,k=2,x=3,T=4,S=9,f=10,L=11,$=12;function A(C){return C<4352?!1:C>=4352&&C<=4447||C>=4515&&C<=4519||C>=4602&&C<=4607||C>=9001&&C<=9002||C>=11904&&C<=11929||C>=11931&&C<=12019||C>=12032&&C<=12245||C>=12272&&C<=12283||C>=12288&&C<=12350||C>=12353&&C<=12438||C>=12441&&C<=12543||C>=12549&&C<=12589||C>=12593&&C<=12686||C>=12688&&C<=12730||C>=12736&&C<=12771||C>=12784&&C<=12830||C>=12832&&C<=12871||C>=12880&&C<=13054||C>=13056&&C<=19903||C>=19968&&C<=42124||C>=42128&&C<=42182||C>=43360&&C<=43388||C>=44032&&C<=55203||C>=55216&&C<=55238||C>=55243&&C<=55291||C>=63744&&C<=64255||C>=65040&&C<=65049||C>=65072&&C<=65106||C>=65108&&C<=65126||C>=65128&&C<=65131||C>=65281&&C<=65376||C>=65504&&C<=65510}e("./edit_session/folding").Folding.call(h.prototype),e("./edit_session/bracket_match").BracketMatch.call(h.prototype),s.defineOptions(h.prototype,"session",{wrap:{set:function(C){if(!C||C=="off"?C=!1:C=="free"?C=!0:C=="printMargin"?C=-1:typeof C=="string"&&(C=parseInt(C,10)||!1),this.$wrap!=C)if(this.$wrap=C,!C)this.setUseWrapMode(!1);else{var w=typeof C=="number"?C:null;this.setWrapLimitRange(w,w),this.setUseWrapMode(!0)}},get:function(){return this.getUseWrapMode()?this.$wrap==-1?"printMargin":this.getWrapLimitRange().min?this.$wrap:"free":"off"},handlesSet:!0},wrapMethod:{set:function(C){C=C=="auto"?this.$mode.type!="text":C!="text",C!=this.$wrapAsCode&&(this.$wrapAsCode=C,this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0)))},initialValue:"auto"},indentedSoftWrap:{set:function(){this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0))},initialValue:!0},firstLineNumber:{set:function(){this._signal("changeBreakpoint")},initialValue:1},useWorker:{set:function(C){this.$useWorker=C,this.$stopWorker(),C&&this.$startWorker()},initialValue:!0},useSoftTabs:{initialValue:!0},tabSize:{set:function(C){C=parseInt(C),C>0&&this.$tabSize!==C&&(this.$modified=!0,this.$rowLengthCache=[],this.$tabSize=C,this._signal("changeTabSize"))},initialValue:4,handlesSet:!0},navigateWithinSoftTabs:{initialValue:!1},foldStyle:{set:function(C){this.setFoldStyle(C)},handlesSet:!0},overwrite:{set:function(C){this._signal("changeOverwrite")},initialValue:!1},newLineMode:{set:function(C){this.doc.setNewLineMode(C)},get:function(){return this.doc.getNewLineMode()},handlesSet:!0},mode:{set:function(C){this.setMode(C)},get:function(){return this.$modeId},handlesSet:!0}}),t.EditSession=h});ace.define("ace/search",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(e,t,r){"use strict";var n=e("./lib/lang"),p=e("./lib/oop"),g=e("./range").Range,s=function(){function o(){this.$options={}}return o.prototype.set=function(i){return p.mixin(this.$options,i),this},o.prototype.getOptions=function(){return n.copyObject(this.$options)},o.prototype.setOptions=function(i){this.$options=i},o.prototype.find=function(i){var a=this.$options,l=this.$matchIterator(i,a);if(!l)return!1;var d=null;return l.forEach(function(c,m,h,v){return d=new g(c,m,h,v),m==v&&a.start&&a.start.start&&a.skipCurrent!=!1&&d.isEqual(a.start)?(d=null,!1):!0}),d},o.prototype.findAll=function(i){var a=this.$options;if(!a.needle)return[];this.$assembleRegExp(a);var l=a.range,d=l?i.getLines(l.start.row,l.end.row):i.doc.getAllLines(),c=[],m=a.re;if(a.$isMultiLine){var h=m.length,v=d.length-h,k;t:for(var x=m.offset||0;x<=v;x++){for(var T=0;T<h;T++)if(d[x+T].search(m[T])==-1)continue t;var S=d[x],f=d[x+h-1],L=S.length-S.match(m[0])[0].length,$=f.match(m[h-1])[0].length;k&&k.end.row===x&&k.end.column>L||(c.push(k=new g(x,L,x+h-1,$)),h>2&&(x=x+h-2))}}else for(var A=0;A<d.length;A++)for(var C=n.getMatchOffsets(d[A],m),T=0;T<C.length;T++){var w=C[T];c.push(new g(A,w.offset,A,w.offset+w.length))}if(l){for(var y=l.start.column,b=l.end.column,A=0,T=c.length-1;A<T&&c[A].start.column<y&&c[A].start.row==0;)A++;for(var E=l.end.row-l.start.row;A<T&&c[T].end.column>b&&c[T].end.row==E;)T--;for(c=c.slice(A,T+1),A=0,T=c.length;A<T;A++)c[A].start.row+=l.start.row,c[A].end.row+=l.start.row}return c},o.prototype.replace=function(i,a){var l=this.$options,d=this.$assembleRegExp(l);if(l.$isMultiLine)return a;if(d){var c=d.exec(i);if(!c||c[0].length!=i.length)return null;if(l.regExp||(a=a.replace(/\$/g,"$$$$")),a=i.replace(d,a),l.preserveCase){a=a.split("");for(var m=Math.min(i.length,i.length);m--;){var h=i[m];h&&h.toLowerCase()!=h?a[m]=a[m].toUpperCase():a[m]=a[m].toLowerCase()}a=a.join("")}return a}},o.prototype.$assembleRegExp=function(i,a){if(i.needle instanceof RegExp)return i.re=i.needle;var l=i.needle;if(!i.needle)return i.re=!1;i.regExp||(l=n.escapeRegExp(l));var d=i.caseSensitive?"gm":"gmi";try{new RegExp(l,"u"),i.$supportsUnicodeFlag=!0,d+="u"}catch{i.$supportsUnicodeFlag=!1}if(i.wholeWord&&(l=u(l,i)),i.$isMultiLine=!a&&/[\n\r]/.test(l),i.$isMultiLine)return i.re=this.$assembleMultilineRegExp(l,d);try{var c=new RegExp(l,d)}catch{c=!1}return i.re=c},o.prototype.$assembleMultilineRegExp=function(i,a){for(var l=i.replace(/\r\n|\r|\n/g,`$
^`).split(`
`),d=[],c=0;c<l.length;c++)try{d.push(new RegExp(l[c],a))}catch{return!1}return d},o.prototype.$matchIterator=function(i,a){var l=this.$assembleRegExp(a);if(!l)return!1;var d=a.backwards==!0,c=a.skipCurrent!=!1,m=l.unicode,h=a.range,v=a.start;v||(v=h?h[d?"end":"start"]:i.selection.getRange()),v.start&&(v=v[c!=d?"end":"start"]);var k=h?h.start.row:0,x=h?h.end.row:i.getLength()-1;if(d)var T=function(L){var $=v.row;if(!f($,v.column,L)){for($--;$>=k;$--)if(f($,Number.MAX_VALUE,L))return;if(a.wrap!=!1){for($=x,k=v.row;$>=k;$--)if(f($,Number.MAX_VALUE,L))return}}};else var T=function($){var A=v.row;if(!f(A,v.column,$)){for(A=A+1;A<=x;A++)if(f(A,0,$))return;if(a.wrap!=!1){for(A=k,x=v.row;A<=x;A++)if(f(A,0,$))return}}};if(a.$isMultiLine)var S=l.length,f=function(L,$,A){var C=d?L-S+1:L;if(!(C<0||C+S>i.getLength())){var w=i.getLine(C),y=w.search(l[0]);if(!(!d&&y<$||y===-1)){for(var b=1;b<S;b++)if(w=i.getLine(C+b),w.search(l[b])==-1)return;var E=w.match(l[S-1])[0].length;if(!(d&&E>$)&&A(C,y,C+S-1,E))return!0}}};else if(d)var f=function($,A,C){var w=i.getLine($),y=[],b,E=0;for(l.lastIndex=0;b=l.exec(w);){var _=b[0].length;if(E=b.index,!_){if(E>=w.length)break;l.lastIndex=E+=n.skipEmptyMatch(w,E,m)}if(b.index+_>A)break;y.push(b.index,_)}for(var R=y.length-1;R>=0;R-=2){var M=y[R-1],_=y[R];if(C($,M,$,M+_))return!0}};else var f=function($,A,C){var w=i.getLine($),y,b;for(l.lastIndex=A;b=l.exec(w);){var E=b[0].length;if(y=b.index,C($,y,$,y+E))return!0;if(!E&&(l.lastIndex=y+=n.skipEmptyMatch(w,y,m),y>=w.length))return!1}};return{forEach:T}},o}();function u(o,i){var a=n.supportsLookbehind();function l(h,v){v===void 0&&(v=!0);var k=a&&i.$supportsUnicodeFlag?new RegExp("[\\p{L}\\p{N}_]","u"):new RegExp("\\w");return k.test(h)||i.regExp?a&&i.$supportsUnicodeFlag?v?"(?<=^|[^\\p{L}\\p{N}_])":"(?=[^\\p{L}\\p{N}_]|$)":"\\b":""}var d=Array.from(o),c=d[0],m=d[d.length-1];return l(c)+o+l(m,!1)}t.Search=s});ace.define("ace/keyboard/hash_handler",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(e,t,r){"use strict";var n=this&&this.__extends||function(){var a=function(l,d){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,m){c.__proto__=m}||function(c,m){for(var h in m)Object.prototype.hasOwnProperty.call(m,h)&&(c[h]=m[h])},a(l,d)};return function(l,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");a(l,d);function c(){this.constructor=l}l.prototype=d===null?Object.create(d):(c.prototype=d.prototype,new c)}}(),p=e("../lib/keys"),g=e("../lib/useragent"),s=p.KEY_MODS,u=function(){function a(l,d){this.$init(l,d,!1)}return a.prototype.$init=function(l,d,c){this.platform=d||(g.isMac?"mac":"win"),this.commands={},this.commandKeyBinding={},this.addCommands(l),this.$singleCommand=c},a.prototype.addCommand=function(l){this.commands[l.name]&&this.removeCommand(l),this.commands[l.name]=l,l.bindKey&&this._buildKeyHash(l)},a.prototype.removeCommand=function(l,d){var c=l&&(typeof l=="string"?l:l.name);l=this.commands[c],d||delete this.commands[c];var m=this.commandKeyBinding;for(var h in m){var v=m[h];if(v==l)delete m[h];else if(Array.isArray(v)){var k=v.indexOf(l);k!=-1&&(v.splice(k,1),v.length==1&&(m[h]=v[0]))}}},a.prototype.bindKey=function(l,d,c){if(typeof l=="object"&&l&&(c==null&&(c=l.position),l=l[this.platform]),!!l){if(typeof d=="function")return this.addCommand({exec:d,bindKey:l,name:d.name||l});l.split("|").forEach(function(m){var h="";if(m.indexOf(" ")!=-1){var v=m.split(/\s+/);m=v.pop(),v.forEach(function(T){var S=this.parseKeys(T),f=s[S.hashId]+S.key;h+=(h?" ":"")+f,this._addCommandToBinding(h,"chainKeys")},this),h+=" "}var k=this.parseKeys(m),x=s[k.hashId]+k.key;this._addCommandToBinding(h+x,d,c)},this)}},a.prototype._addCommandToBinding=function(l,d,c){var m=this.commandKeyBinding,h;if(!d)delete m[l];else if(!m[l]||this.$singleCommand)m[l]=d;else{Array.isArray(m[l])?(h=m[l].indexOf(d))!=-1&&m[l].splice(h,1):m[l]=[m[l]],typeof c!="number"&&(c=o(d));var v=m[l];for(h=0;h<v.length;h++){var k=v[h],x=o(k);if(x>c)break}v.splice(h,0,d)}},a.prototype.addCommands=function(l){l&&Object.keys(l).forEach(function(d){var c=l[d];if(c){if(typeof c=="string")return this.bindKey(c,d);typeof c=="function"&&(c={exec:c}),typeof c=="object"&&(c.name||(c.name=d),this.addCommand(c))}},this)},a.prototype.removeCommands=function(l){Object.keys(l).forEach(function(d){this.removeCommand(l[d])},this)},a.prototype.bindKeys=function(l){Object.keys(l).forEach(function(d){this.bindKey(d,l[d])},this)},a.prototype._buildKeyHash=function(l){this.bindKey(l.bindKey,l)},a.prototype.parseKeys=function(l){var d=l.toLowerCase().split(/[\-\+]([\-\+])?/).filter(function(x){return x}),c=d.pop(),m=p[c];if(p.FUNCTION_KEYS[m])c=p.FUNCTION_KEYS[m].toLowerCase();else if(d.length){if(d.length==1&&d[0]=="shift")return{key:c.toUpperCase(),hashId:-1}}else return{key:c,hashId:-1};for(var h=0,v=d.length;v--;){var k=p.KEY_MODS[d[v]];if(k==null)return typeof console<"u"&&console.error("invalid modifier "+d[v]+" in "+l),!1;h|=k}return{key:c,hashId:h}},a.prototype.findKeyCommand=function(l,d){var c=s[l]+d;return this.commandKeyBinding[c]},a.prototype.handleKeyboard=function(l,d,c,m){if(!(m<0)){var h=s[d]+c,v=this.commandKeyBinding[h];return l.$keyChain&&(l.$keyChain+=" "+h,v=this.commandKeyBinding[l.$keyChain]||v),v&&(v=="chainKeys"||v[v.length-1]=="chainKeys")?(l.$keyChain=l.$keyChain||h,{command:"null"}):(l.$keyChain&&((!d||d==4)&&c.length==1?l.$keyChain=l.$keyChain.slice(0,-h.length-1):(d==-1||m>0)&&(l.$keyChain="")),{command:v})}},a.prototype.getStatusText=function(l,d){return d.$keyChain||""},a}();function o(a){return typeof a=="object"&&a.bindKey&&a.bindKey.position||(a.isDefault?-100:0)}var i=function(a){n(l,a);function l(d,c){var m=a.call(this,d,c)||this;return m.$singleCommand=!0,m}return l}(u);i.call=function(a,l,d){u.prototype.$init.call(a,l,d,!0)},u.call=function(a,l,d){u.prototype.$init.call(a,l,d,!1)},t.HashHandler=i,t.MultiHashHandler=u});ace.define("ace/commands/command_manager",["require","exports","module","ace/lib/oop","ace/keyboard/hash_handler","ace/lib/event_emitter"],function(e,t,r){"use strict";var n=this&&this.__extends||function(){var o=function(i,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,d){l.__proto__=d}||function(l,d){for(var c in d)Object.prototype.hasOwnProperty.call(d,c)&&(l[c]=d[c])},o(i,a)};return function(i,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");o(i,a);function l(){this.constructor=i}i.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)}}(),p=e("../lib/oop"),g=e("../keyboard/hash_handler").MultiHashHandler,s=e("../lib/event_emitter").EventEmitter,u=function(o){n(i,o);function i(a,l){var d=o.call(this,l,a)||this;return d.byName=d.commands,d.setDefaultHandler("exec",function(c){return c.args?c.command.exec(c.editor,c.args,c.event,!1):c.command.exec(c.editor,{},c.event,!0)}),d}return i.prototype.exec=function(a,l,d){if(Array.isArray(a)){for(var c=a.length;c--;)if(this.exec(a[c],l,d))return!0;return!1}if(typeof a=="string"&&(a=this.commands[a]),!this.canExecute(a,l))return!1;var m={editor:l,command:a,args:d};return m.returnValue=this._emit("exec",m),this._signal("afterExec",m),m.returnValue!==!1},i.prototype.canExecute=function(a,l){return typeof a=="string"&&(a=this.commands[a]),!(!a||l&&l.$readOnly&&!a.readOnly||this.$checkCommandState!=!1&&a.isAvailable&&!a.isAvailable(l))},i.prototype.toggleRecording=function(a){if(!this.$inReplay)return a&&a._emit("changeStatus"),this.recording?(this.macro.pop(),this.off("exec",this.$addCommandToMacro),this.macro.length||(this.macro=this.oldMacro),this.recording=!1):(this.$addCommandToMacro||(this.$addCommandToMacro=function(l){this.macro.push([l.command,l.args])}.bind(this)),this.oldMacro=this.macro,this.macro=[],this.on("exec",this.$addCommandToMacro),this.recording=!0)},i.prototype.replay=function(a){if(!(this.$inReplay||!this.macro)){if(this.recording)return this.toggleRecording(a);try{this.$inReplay=!0,this.macro.forEach(function(l){typeof l=="string"?this.exec(l,a):this.exec(l[0],a,l[1])},this)}finally{this.$inReplay=!1}}},i.prototype.trimMacro=function(a){return a.map(function(l){return typeof l[0]!="string"&&(l[0]=l[0].name),l[1]||(l=l[0]),l})},i}(g);p.implement(u.prototype,s),t.CommandManager=u});ace.define("ace/commands/default_commands",["require","exports","module","ace/lib/lang","ace/config","ace/range"],function(e,t,r){"use strict";var n=e("../lib/lang"),p=e("../config"),g=e("../range").Range;function s(o,i){return{win:o,mac:i}}t.commands=[{name:"showSettingsMenu",description:"Show settings menu",bindKey:s("Ctrl-,","Command-,"),exec:function(o){p.loadModule("ace/ext/settings_menu",function(i){i.init(o),o.showSettingsMenu()})},readOnly:!0},{name:"goToNextError",description:"Go to next error",bindKey:s("Alt-E","F4"),exec:function(o){p.loadModule("ace/ext/error_marker",function(i){i.showErrorMarker(o,1)})},scrollIntoView:"animate",readOnly:!0},{name:"goToPreviousError",description:"Go to previous error",bindKey:s("Alt-Shift-E","Shift-F4"),exec:function(o){p.loadModule("ace/ext/error_marker",function(i){i.showErrorMarker(o,-1)})},scrollIntoView:"animate",readOnly:!0},{name:"selectall",description:"Select all",bindKey:s("Ctrl-A","Command-A"),exec:function(o){o.selectAll()},readOnly:!0},{name:"centerselection",description:"Center selection",bindKey:s(null,"Ctrl-L"),exec:function(o){o.centerSelection()},readOnly:!0},{name:"gotoline",description:"Go to line...",bindKey:s("Ctrl-L","Command-L"),exec:function(o,i){typeof i=="number"&&!isNaN(i)&&o.gotoLine(i),o.prompt({$type:"gotoLine"})},readOnly:!0},{name:"fold",bindKey:s("Alt-L|Ctrl-F1","Command-Alt-L|Command-F1"),exec:function(o){o.session.toggleFold(!1)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"unfold",bindKey:s("Alt-Shift-L|Ctrl-Shift-F1","Command-Alt-Shift-L|Command-Shift-F1"),exec:function(o){o.session.toggleFold(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleFoldWidget",description:"Toggle fold widget",bindKey:s("F2","F2"),exec:function(o){o.session.toggleFoldWidget()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleParentFoldWidget",description:"Toggle parent fold widget",bindKey:s("Alt-F2","Alt-F2"),exec:function(o){o.session.toggleFoldWidget(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"foldall",description:"Fold all",bindKey:s(null,"Ctrl-Command-Option-0"),exec:function(o){o.session.foldAll()},scrollIntoView:"center",readOnly:!0},{name:"foldAllComments",description:"Fold all comments",bindKey:s(null,"Ctrl-Command-Option-0"),exec:function(o){o.session.foldAllComments()},scrollIntoView:"center",readOnly:!0},{name:"foldOther",description:"Fold other",bindKey:s("Alt-0","Command-Option-0"),exec:function(o){o.session.foldAll(),o.session.unfold(o.selection.getAllRanges())},scrollIntoView:"center",readOnly:!0},{name:"unfoldall",description:"Unfold all",bindKey:s("Alt-Shift-0","Command-Option-Shift-0"),exec:function(o){o.session.unfold()},scrollIntoView:"center",readOnly:!0},{name:"findnext",description:"Find next",bindKey:s("Ctrl-K","Command-G"),exec:function(o){o.findNext()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"findprevious",description:"Find previous",bindKey:s("Ctrl-Shift-K","Command-Shift-G"),exec:function(o){o.findPrevious()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"selectOrFindNext",description:"Select or find next",bindKey:s("Alt-K","Ctrl-G"),exec:function(o){o.selection.isEmpty()?o.selection.selectWord():o.findNext()},readOnly:!0},{name:"selectOrFindPrevious",description:"Select or find previous",bindKey:s("Alt-Shift-K","Ctrl-Shift-G"),exec:function(o){o.selection.isEmpty()?o.selection.selectWord():o.findPrevious()},readOnly:!0},{name:"find",description:"Find",bindKey:s("Ctrl-F","Command-F"),exec:function(o){p.loadModule("ace/ext/searchbox",function(i){i.Search(o)})},readOnly:!0},{name:"overwrite",description:"Overwrite",bindKey:"Insert",exec:function(o){o.toggleOverwrite()},readOnly:!0},{name:"selecttostart",description:"Select to start",bindKey:s("Ctrl-Shift-Home","Command-Shift-Home|Command-Shift-Up"),exec:function(o){o.getSelection().selectFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotostart",description:"Go to start",bindKey:s("Ctrl-Home","Command-Home|Command-Up"),exec:function(o){o.navigateFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectup",description:"Select up",bindKey:s("Shift-Up","Shift-Up|Ctrl-Shift-P"),exec:function(o){o.getSelection().selectUp()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golineup",description:"Go line up",bindKey:s("Up","Up|Ctrl-P"),exec:function(o,i){o.navigateUp(i.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttoend",description:"Select to end",bindKey:s("Ctrl-Shift-End","Command-Shift-End|Command-Shift-Down"),exec:function(o){o.getSelection().selectFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotoend",description:"Go to end",bindKey:s("Ctrl-End","Command-End|Command-Down"),exec:function(o){o.navigateFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectdown",description:"Select down",bindKey:s("Shift-Down","Shift-Down|Ctrl-Shift-N"),exec:function(o){o.getSelection().selectDown()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golinedown",description:"Go line down",bindKey:s("Down","Down|Ctrl-N"),exec:function(o,i){o.navigateDown(i.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordleft",description:"Select word left",bindKey:s("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(o){o.getSelection().selectWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordleft",description:"Go to word left",bindKey:s("Ctrl-Left","Option-Left"),exec:function(o){o.navigateWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolinestart",description:"Select to line start",bindKey:s("Alt-Shift-Left","Command-Shift-Left|Ctrl-Shift-A"),exec:function(o){o.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolinestart",description:"Go to line start",bindKey:s("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(o){o.navigateLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectleft",description:"Select left",bindKey:s("Shift-Left","Shift-Left|Ctrl-Shift-B"),exec:function(o){o.getSelection().selectLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoleft",description:"Go to left",bindKey:s("Left","Left|Ctrl-B"),exec:function(o,i){o.navigateLeft(i.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordright",description:"Select word right",bindKey:s("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(o){o.getSelection().selectWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordright",description:"Go to word right",bindKey:s("Ctrl-Right","Option-Right"),exec:function(o){o.navigateWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolineend",description:"Select to line end",bindKey:s("Alt-Shift-Right","Command-Shift-Right|Shift-End|Ctrl-Shift-E"),exec:function(o){o.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolineend",description:"Go to line end",bindKey:s("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(o){o.navigateLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectright",description:"Select right",bindKey:s("Shift-Right","Shift-Right"),exec:function(o){o.getSelection().selectRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoright",description:"Go to right",bindKey:s("Right","Right|Ctrl-F"),exec:function(o,i){o.navigateRight(i.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectpagedown",description:"Select page down",bindKey:"Shift-PageDown",exec:function(o){o.selectPageDown()},readOnly:!0},{name:"pagedown",description:"Page down",bindKey:s(null,"Option-PageDown"),exec:function(o){o.scrollPageDown()},readOnly:!0},{name:"gotopagedown",description:"Go to page down",bindKey:s("PageDown","PageDown|Ctrl-V"),exec:function(o){o.gotoPageDown()},readOnly:!0},{name:"selectpageup",description:"Select page up",bindKey:"Shift-PageUp",exec:function(o){o.selectPageUp()},readOnly:!0},{name:"pageup",description:"Page up",bindKey:s(null,"Option-PageUp"),exec:function(o){o.scrollPageUp()},readOnly:!0},{name:"gotopageup",description:"Go to page up",bindKey:"PageUp",exec:function(o){o.gotoPageUp()},readOnly:!0},{name:"scrollup",description:"Scroll up",bindKey:s("Ctrl-Up",null),exec:function(o){o.renderer.scrollBy(0,-2*o.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"scrolldown",description:"Scroll down",bindKey:s("Ctrl-Down",null),exec:function(o){o.renderer.scrollBy(0,2*o.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"selectlinestart",description:"Select line start",bindKey:"Shift-Home",exec:function(o){o.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectlineend",description:"Select line end",bindKey:"Shift-End",exec:function(o){o.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"togglerecording",description:"Toggle recording",bindKey:s("Ctrl-Alt-E","Command-Option-E"),exec:function(o){o.commands.toggleRecording(o)},readOnly:!0},{name:"replaymacro",description:"Replay macro",bindKey:s("Ctrl-Shift-E","Command-Shift-E"),exec:function(o){o.commands.replay(o)},readOnly:!0},{name:"jumptomatching",description:"Jump to matching",bindKey:s("Ctrl-\\|Ctrl-P","Command-\\"),exec:function(o){o.jumpToMatching()},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"selecttomatching",description:"Select to matching",bindKey:s("Ctrl-Shift-\\|Ctrl-Shift-P","Command-Shift-\\"),exec:function(o){o.jumpToMatching(!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"expandToMatching",description:"Expand to matching",bindKey:s("Ctrl-Shift-M","Ctrl-Shift-M"),exec:function(o){o.jumpToMatching(!0,!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"passKeysToBrowser",description:"Pass keys to browser",bindKey:s(null,null),exec:function(){},passEvent:!0,readOnly:!0},{name:"copy",description:"Copy",exec:function(o){},readOnly:!0},{name:"cut",description:"Cut",exec:function(o){var i=o.$copyWithEmptySelection&&o.selection.isEmpty(),a=i?o.selection.getLineRange():o.selection.getRange();o._emit("cut",a),a.isEmpty()||o.session.remove(a),o.clearSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"paste",description:"Paste",exec:function(o,i){o.$handlePaste(i)},scrollIntoView:"cursor"},{name:"removeline",description:"Remove line",bindKey:s("Ctrl-D","Command-D"),exec:function(o){o.removeLines()},scrollIntoView:"cursor",multiSelectAction:"forEachLine"},{name:"duplicateSelection",description:"Duplicate selection",bindKey:s("Ctrl-Shift-D","Command-Shift-D"),exec:function(o){o.duplicateSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"sortlines",description:"Sort lines",bindKey:s("Ctrl-Alt-S","Command-Alt-S"),exec:function(o){o.sortLines()},scrollIntoView:"selection",multiSelectAction:"forEachLine"},{name:"togglecomment",description:"Toggle comment",bindKey:s("Ctrl-/","Command-/"),exec:function(o){o.toggleCommentLines()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"toggleBlockComment",description:"Toggle block comment",bindKey:s("Ctrl-Shift-/","Command-Shift-/"),exec:function(o){o.toggleBlockComment()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"modifyNumberUp",description:"Modify number up",bindKey:s("Ctrl-Shift-Up","Alt-Shift-Up"),exec:function(o){o.modifyNumber(1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"modifyNumberDown",description:"Modify number down",bindKey:s("Ctrl-Shift-Down","Alt-Shift-Down"),exec:function(o){o.modifyNumber(-1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"replace",description:"Replace",bindKey:s("Ctrl-H","Command-Option-F"),exec:function(o){p.loadModule("ace/ext/searchbox",function(i){i.Search(o,!0)})}},{name:"undo",description:"Undo",bindKey:s("Ctrl-Z","Command-Z"),exec:function(o){o.undo()}},{name:"redo",description:"Redo",bindKey:s("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(o){o.redo()}},{name:"copylinesup",description:"Copy lines up",bindKey:s("Alt-Shift-Up","Command-Option-Up"),exec:function(o){o.copyLinesUp()},scrollIntoView:"cursor"},{name:"movelinesup",description:"Move lines up",bindKey:s("Alt-Up","Option-Up"),exec:function(o){o.moveLinesUp()},scrollIntoView:"cursor"},{name:"copylinesdown",description:"Copy lines down",bindKey:s("Alt-Shift-Down","Command-Option-Down"),exec:function(o){o.copyLinesDown()},scrollIntoView:"cursor"},{name:"movelinesdown",description:"Move lines down",bindKey:s("Alt-Down","Option-Down"),exec:function(o){o.moveLinesDown()},scrollIntoView:"cursor"},{name:"del",description:"Delete",bindKey:s("Delete","Delete|Ctrl-D|Shift-Delete"),exec:function(o){o.remove("right")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"backspace",description:"Backspace",bindKey:s("Shift-Backspace|Backspace","Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(o){o.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"cut_or_delete",description:"Cut or delete",bindKey:s("Shift-Delete",null),exec:function(o){if(o.selection.isEmpty())o.remove("left");else return!1},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestart",description:"Remove to line start",bindKey:s("Alt-Backspace","Command-Backspace"),exec:function(o){o.removeToLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineend",description:"Remove to line end",bindKey:s("Alt-Delete","Ctrl-K|Command-Delete"),exec:function(o){o.removeToLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestarthard",description:"Remove to line start hard",bindKey:s("Ctrl-Shift-Backspace",null),exec:function(o){var i=o.selection.getRange();i.start.column=0,o.session.remove(i)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineendhard",description:"Remove to line end hard",bindKey:s("Ctrl-Shift-Delete",null),exec:function(o){var i=o.selection.getRange();i.end.column=Number.MAX_VALUE,o.session.remove(i)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordleft",description:"Remove word left",bindKey:s("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(o){o.removeWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordright",description:"Remove word right",bindKey:s("Ctrl-Delete","Alt-Delete"),exec:function(o){o.removeWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"outdent",description:"Outdent",bindKey:s("Shift-Tab","Shift-Tab"),exec:function(o){o.blockOutdent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"indent",description:"Indent",bindKey:s("Tab","Tab"),exec:function(o){o.indent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"blockoutdent",description:"Block outdent",bindKey:s("Ctrl-[","Ctrl-["),exec:function(o){o.blockOutdent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"blockindent",description:"Block indent",bindKey:s("Ctrl-]","Ctrl-]"),exec:function(o){o.blockIndent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"insertstring",description:"Insert string",exec:function(o,i){o.insert(i)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"inserttext",description:"Insert text",exec:function(o,i){o.insert(n.stringRepeat(i.text||"",i.times||1))},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"splitline",description:"Split line",bindKey:s(null,"Ctrl-O"),exec:function(o){o.splitLine()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"transposeletters",description:"Transpose letters",bindKey:s("Alt-Shift-X","Ctrl-T"),exec:function(o){o.transposeLetters()},multiSelectAction:function(o){o.transposeSelections(1)},scrollIntoView:"cursor"},{name:"touppercase",description:"To uppercase",bindKey:s("Ctrl-U","Ctrl-U"),exec:function(o){o.toUpperCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"tolowercase",description:"To lowercase",bindKey:s("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(o){o.toLowerCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"autoindent",description:"Auto Indent",bindKey:s(null,null),exec:function(o){o.autoIndent()},scrollIntoView:"animate"},{name:"expandtoline",description:"Expand to line",bindKey:s("Ctrl-Shift-L","Command-Shift-L"),exec:function(o){var i=o.selection.getRange();i.start.column=i.end.column=0,i.end.row++,o.selection.setRange(i,!1)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"openlink",bindKey:s("Ctrl+F3","F3"),exec:function(o){o.openLink()}},{name:"joinlines",description:"Join lines",bindKey:s(null,null),exec:function(o){for(var i=o.selection.isBackwards(),a=i?o.selection.getSelectionLead():o.selection.getSelectionAnchor(),l=i?o.selection.getSelectionAnchor():o.selection.getSelectionLead(),d=o.session.doc.getLine(a.row).length,c=o.session.doc.getTextRange(o.selection.getRange()),m=c.replace(/\n\s*/," ").length,h=o.session.doc.getLine(a.row),v=a.row+1;v<=l.row+1;v++){var k=n.stringTrimLeft(n.stringTrimRight(o.session.doc.getLine(v)));k.length!==0&&(k=" "+k),h+=k}l.row+1<o.session.doc.getLength()-1&&(h+=o.session.doc.getNewLineCharacter()),o.clearSelection(),o.session.doc.replace(new g(a.row,0,l.row+2,0),h),m>0?(o.selection.moveCursorTo(a.row,a.column),o.selection.selectTo(a.row,a.column+m)):(d=o.session.doc.getLine(a.row).length>d?d+1:d,o.selection.moveCursorTo(a.row,d))},multiSelectAction:"forEach",readOnly:!0},{name:"invertSelection",description:"Invert selection",bindKey:s(null,null),exec:function(o){var i=o.session.doc.getLength()-1,a=o.session.doc.getLine(i).length,l=o.selection.rangeList.ranges,d=[];l.length<1&&(l=[o.selection.getRange()]);for(var c=0;c<l.length;c++)c==l.length-1&&(l[c].end.row===i&&l[c].end.column===a||d.push(new g(l[c].end.row,l[c].end.column,i,a))),c===0?l[c].start.row===0&&l[c].start.column===0||d.push(new g(0,0,l[c].start.row,l[c].start.column)):d.push(new g(l[c-1].end.row,l[c-1].end.column,l[c].start.row,l[c].start.column));o.exitMultiSelectMode(),o.clearSelection();for(var c=0;c<d.length;c++)o.selection.addRange(d[c],!1)},readOnly:!0,scrollIntoView:"none"},{name:"addLineAfter",description:"Add new line after the current line",exec:function(o){o.selection.clearSelection(),o.navigateLineEnd(),o.insert(`
`)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"addLineBefore",description:"Add new line before the current line",exec:function(o){o.selection.clearSelection();var i=o.getCursorPosition();o.selection.moveTo(i.row-1,Number.MAX_VALUE),o.insert(`
`),i.row===0&&o.navigateUp()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"openCommandPallete",exec:function(o){console.warn("This is an obsolete command. Please use `openCommandPalette` instead."),o.prompt({$type:"commands"})},readOnly:!0},{name:"openCommandPalette",description:"Open command palette",bindKey:s("F1","F1"),exec:function(o){o.prompt({$type:"commands"})},readOnly:!0},{name:"modeSelect",description:"Change language mode...",bindKey:s(null,null),exec:function(o){o.prompt({$type:"modes"})},readOnly:!0}];for(var u=1;u<9;u++)t.commands.push({name:"foldToLevel"+u,description:"Fold To Level "+u,level:u,exec:function(o){o.session.foldToLevel(this.level)},scrollIntoView:"center",readOnly:!0})});ace.define("ace/line_widgets",["require","exports","module","ace/lib/dom"],function(e,t,r){"use strict";var n=e("./lib/dom"),p=function(){function g(s){this.session=s,this.session.widgetManager=this,this.session.getRowLength=this.getRowLength,this.session.$getWidgetScreenLength=this.$getWidgetScreenLength,this.updateOnChange=this.updateOnChange.bind(this),this.renderWidgets=this.renderWidgets.bind(this),this.measureWidgets=this.measureWidgets.bind(this),this.session._changedWidgets=[],this.$onChangeEditor=this.$onChangeEditor.bind(this),this.session.on("change",this.updateOnChange),this.session.on("changeFold",this.updateOnFold),this.session.on("changeEditor",this.$onChangeEditor)}return g.prototype.getRowLength=function(s){var u;return this.lineWidgets?u=this.lineWidgets[s]&&this.lineWidgets[s].rowCount||0:u=0,!this.$useWrapMode||!this.$wrapData[s]?1+u:this.$wrapData[s].length+1+u},g.prototype.$getWidgetScreenLength=function(){var s=0;return this.lineWidgets.forEach(function(u){u&&u.rowCount&&!u.hidden&&(s+=u.rowCount)}),s},g.prototype.$onChangeEditor=function(s){this.attach(s.editor)},g.prototype.attach=function(s){s&&s.widgetManager&&s.widgetManager!=this&&s.widgetManager.detach(),this.editor!=s&&(this.detach(),this.editor=s,s&&(s.widgetManager=this,s.renderer.on("beforeRender",this.measureWidgets),s.renderer.on("afterRender",this.renderWidgets)))},g.prototype.detach=function(s){var u=this.editor;if(u){this.editor=null,u.widgetManager=null,u.renderer.off("beforeRender",this.measureWidgets),u.renderer.off("afterRender",this.renderWidgets);var o=this.session.lineWidgets;o&&o.forEach(function(i){i&&i.el&&i.el.parentNode&&(i._inDocument=!1,i.el.parentNode.removeChild(i.el))})}},g.prototype.updateOnFold=function(s,u){var o=u.lineWidgets;if(!(!o||!s.action)){for(var i=s.data,a=i.start.row,l=i.end.row,d=s.action=="add",c=a+1;c<l;c++)o[c]&&(o[c].hidden=d);o[l]&&(d?o[a]?o[l].hidden=d:o[a]=o[l]:(o[a]==o[l]&&(o[a]=void 0),o[l].hidden=d))}},g.prototype.updateOnChange=function(s){var u=this.session.lineWidgets;if(u){var o=s.start.row,i=s.end.row-o;if(i!==0)if(s.action=="remove"){var a=u.splice(o+1,i);!u[o]&&a[a.length-1]&&(u[o]=a.pop()),a.forEach(function(d){d&&this.removeLineWidget(d)},this),this.$updateRows()}else{var l=new Array(i);u[o]&&u[o].column!=null&&s.start.column>u[o].column&&o++,l.unshift(o,0),u.splice.apply(u,l),this.$updateRows()}}},g.prototype.$updateRows=function(){var s=this.session.lineWidgets;if(s){var u=!0;s.forEach(function(o,i){if(o)for(u=!1,o.row=i;o.$oldWidget;)o.$oldWidget.row=i,o=o.$oldWidget}),u&&(this.session.lineWidgets=null)}},g.prototype.$registerLineWidget=function(s){this.session.lineWidgets||(this.session.lineWidgets=new Array(this.session.getLength()));var u=this.session.lineWidgets[s.row];return u&&(s.$oldWidget=u,u.el&&u.el.parentNode&&(u.el.parentNode.removeChild(u.el),u._inDocument=!1)),this.session.lineWidgets[s.row]=s,s},g.prototype.addLineWidget=function(s){if(this.$registerLineWidget(s),s.session=this.session,!this.editor)return s;var u=this.editor.renderer;s.html&&!s.el&&(s.el=n.createElement("div"),s.el.innerHTML=s.html),s.text&&!s.el&&(s.el=n.createElement("div"),s.el.textContent=s.text),s.el&&(n.addCssClass(s.el,"ace_lineWidgetContainer"),s.className&&n.addCssClass(s.el,s.className),s.el.style.position="absolute",s.el.style.zIndex="5",u.container.appendChild(s.el),s._inDocument=!0,s.coverGutter||(s.el.style.zIndex="3"),s.pixelHeight==null&&(s.pixelHeight=s.el.offsetHeight)),s.rowCount==null&&(s.rowCount=s.pixelHeight/u.layerConfig.lineHeight);var o=this.session.getFoldAt(s.row,0);if(s.$fold=o,o){var i=this.session.lineWidgets;s.row==o.end.row&&!i[o.start.row]?i[o.start.row]=s:s.hidden=!0}return this.session._emit("changeFold",{data:{start:{row:s.row}}}),this.$updateRows(),this.renderWidgets(null,u),this.onWidgetChanged(s),s},g.prototype.removeLineWidget=function(s){if(s._inDocument=!1,s.session=null,s.el&&s.el.parentNode&&s.el.parentNode.removeChild(s.el),s.editor&&s.editor.destroy)try{s.editor.destroy()}catch{}if(this.session.lineWidgets){var u=this.session.lineWidgets[s.row];if(u==s)this.session.lineWidgets[s.row]=s.$oldWidget,s.$oldWidget&&this.onWidgetChanged(s.$oldWidget);else for(;u;){if(u.$oldWidget==s){u.$oldWidget=s.$oldWidget;break}u=u.$oldWidget}}this.session._emit("changeFold",{data:{start:{row:s.row}}}),this.$updateRows()},g.prototype.getWidgetsAtRow=function(s){for(var u=this.session.lineWidgets,o=u&&u[s],i=[];o;)i.push(o),o=o.$oldWidget;return i},g.prototype.onWidgetChanged=function(s){this.session._changedWidgets.push(s),this.editor&&this.editor.renderer.updateFull()},g.prototype.measureWidgets=function(s,u){var o=this.session._changedWidgets,i=u.layerConfig;if(!(!o||!o.length)){for(var a=1/0,l=0;l<o.length;l++){var d=o[l];if(!(!d||!d.el)&&d.session==this.session){if(!d._inDocument){if(this.session.lineWidgets[d.row]!=d)continue;d._inDocument=!0,u.container.appendChild(d.el)}d.h=d.el.offsetHeight,d.fixedWidth||(d.w=d.el.offsetWidth,d.screenWidth=Math.ceil(d.w/i.characterWidth));var c=d.h/i.lineHeight;d.coverLine&&(c-=this.session.getRowLineCount(d.row),c<0&&(c=0)),d.rowCount!=c&&(d.rowCount=c,d.row<a&&(a=d.row))}}a!=1/0&&(this.session._emit("changeFold",{data:{start:{row:a}}}),this.session.lineWidgetWidth=null),this.session._changedWidgets=[]}},g.prototype.renderWidgets=function(s,u){var o=u.layerConfig,i=this.session.lineWidgets;if(i){for(var a=Math.min(this.firstRow,o.firstRow),l=Math.max(this.lastRow,o.lastRow,i.length);a>0&&!i[a];)a--;this.firstRow=o.firstRow,this.lastRow=o.lastRow,u.$cursorLayer.config=o;for(var d=a;d<=l;d++){var c=i[d];if(!(!c||!c.el)){if(c.hidden){c.el.style.top=-100-(c.pixelHeight||0)+"px";continue}c._inDocument||(c._inDocument=!0,u.container.appendChild(c.el));var m=u.$cursorLayer.getPixelPosition({row:d,column:0},!0).top;c.coverLine||(m+=o.lineHeight*this.session.getRowLineCount(c.row)),c.el.style.top=m-o.offset+"px";var h=c.coverGutter?0:u.gutterWidth;c.fixedWidth||(h-=u.scrollLeft),c.el.style.left=h+"px",c.fullWidth&&c.screenWidth&&(c.el.style.minWidth=o.width+2*o.padding+"px"),c.fixedWidth?c.el.style.right=u.scrollBar.getWidth()+"px":c.el.style.right=""}}}},g}();t.LineWidgets=p});ace.define("ace/keyboard/gutter_handler",["require","exports","module","ace/lib/keys","ace/mouse/default_gutter_handler"],function(e,t,r){"use strict";var n=e("../lib/keys"),p=e("../mouse/default_gutter_handler").GutterTooltip,g=function(){function u(o){this.editor=o,this.gutterLayer=o.renderer.$gutterLayer,this.element=o.renderer.$gutter,this.lines=o.renderer.$gutterLayer.$lines,this.activeRowIndex=null,this.activeLane=null,this.annotationTooltip=new p(this.editor)}return u.prototype.addListener=function(){this.element.addEventListener("keydown",this.$onGutterKeyDown.bind(this)),this.element.addEventListener("focusout",this.$blurGutter.bind(this)),this.editor.on("mousewheel",this.$blurGutter.bind(this))},u.prototype.removeListener=function(){this.element.removeEventListener("keydown",this.$onGutterKeyDown.bind(this)),this.element.removeEventListener("focusout",this.$blurGutter.bind(this)),this.editor.off("mousewheel",this.$blurGutter.bind(this))},u.prototype.$onGutterKeyDown=function(o){if(this.annotationTooltip.isOpen){o.preventDefault(),o.keyCode===n.escape&&this.annotationTooltip.hideTooltip();return}if(o.target===this.element){if(o.keyCode!=n.enter)return;o.preventDefault();var i=this.editor.getCursorPosition().row;this.editor.isRowVisible(i)||this.editor.scrollToLine(i,!0,!0),setTimeout(function(){var a=this.$rowToRowIndex(this.gutterLayer.$cursorCell.row),l=this.$findNearestFoldWidget(a),d=this.$findNearestAnnotation(a);if(!(l===null&&d===null)){if(l===null&&d!==null){this.activeRowIndex=d,this.activeLane="annotation",this.$focusAnnotation(this.activeRowIndex);return}if(l!==null&&d===null){this.activeRowIndex=l,this.activeLane="fold",this.$focusFoldWidget(this.activeRowIndex);return}if(Math.abs(d-a)<Math.abs(l-a)){this.activeRowIndex=d,this.activeLane="annotation",this.$focusAnnotation(this.activeRowIndex);return}else{this.activeRowIndex=l,this.activeLane="fold",this.$focusFoldWidget(this.activeRowIndex);return}}}.bind(this),10);return}this.$handleGutterKeyboardInteraction(o),setTimeout(function(){this.editor._signal("gutterkeydown",new s(o,this))}.bind(this),10)},u.prototype.$handleGutterKeyboardInteraction=function(o){if(o.keyCode===n.tab){o.preventDefault();return}if(o.keyCode===n.escape){o.preventDefault(),this.$blurGutter(),this.element.focus(),this.lane=null;return}if(o.keyCode===n.up){switch(o.preventDefault(),this.activeLane){case"fold":this.$moveFoldWidgetUp();break;case"annotation":this.$moveAnnotationUp();break}return}if(o.keyCode===n.down){switch(o.preventDefault(),this.activeLane){case"fold":this.$moveFoldWidgetDown();break;case"annotation":this.$moveAnnotationDown();break}return}if(o.keyCode===n.left){o.preventDefault(),this.$switchLane("annotation");return}if(o.keyCode===n.right){o.preventDefault(),this.$switchLane("fold");return}if(o.keyCode===n.enter||o.keyCode===n.space){switch(o.preventDefault(),this.activeLane){case"fold":if(this.gutterLayer.session.foldWidgets[this.$rowIndexToRow(this.activeRowIndex)]==="start"){var i=this.$rowIndexToRow(this.activeRowIndex);this.editor.session.onFoldWidgetClick(this.$rowIndexToRow(this.activeRowIndex),o),setTimeout(function(){this.$rowIndexToRow(this.activeRowIndex)!==i&&(this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=this.$rowToRowIndex(i),this.$focusFoldWidget(this.activeRowIndex))}.bind(this),10);break}else if(this.gutterLayer.session.foldWidgets[this.$rowIndexToRow(this.activeRowIndex)]==="end")break;return;case"annotation":var a=this.lines.cells[this.activeRowIndex].element.childNodes[2],l=a.getBoundingClientRect(),d=this.annotationTooltip.getElement().style;d.left=l.right+"px",d.top=l.bottom+"px",this.annotationTooltip.showTooltip(this.$rowIndexToRow(this.activeRowIndex));break}return}},u.prototype.$blurGutter=function(){if(this.activeRowIndex!==null)switch(this.activeLane){case"fold":this.$blurFoldWidget(this.activeRowIndex);break;case"annotation":this.$blurAnnotation(this.activeRowIndex);break}this.annotationTooltip.isOpen&&this.annotationTooltip.hideTooltip()},u.prototype.$isFoldWidgetVisible=function(o){var i=this.editor.isRowFullyVisible(this.$rowIndexToRow(o)),a=this.$getFoldWidget(o).style.display!=="none";return i&&a},u.prototype.$isAnnotationVisible=function(o){var i=this.editor.isRowFullyVisible(this.$rowIndexToRow(o)),a=this.$getAnnotation(o).style.display!=="none";return i&&a},u.prototype.$getFoldWidget=function(o){var i=this.lines.get(o),a=i.element;return a.childNodes[1]},u.prototype.$getAnnotation=function(o){var i=this.lines.get(o),a=i.element;return a.childNodes[2]},u.prototype.$findNearestFoldWidget=function(o){if(this.$isFoldWidgetVisible(o))return o;for(var i=0;o-i>0||o+i<this.lines.getLength()-1;){if(i++,o-i>=0&&this.$isFoldWidgetVisible(o-i))return o-i;if(o+i<=this.lines.getLength()-1&&this.$isFoldWidgetVisible(o+i))return o+i}return null},u.prototype.$findNearestAnnotation=function(o){if(this.$isAnnotationVisible(o))return o;for(var i=0;o-i>0||o+i<this.lines.getLength()-1;){if(i++,o-i>=0&&this.$isAnnotationVisible(o-i))return o-i;if(o+i<=this.lines.getLength()-1&&this.$isAnnotationVisible(o+i))return o+i}return null},u.prototype.$focusFoldWidget=function(o){if(o!=null){var i=this.$getFoldWidget(o);i.classList.add(this.editor.renderer.keyboardFocusClassName),i.focus()}},u.prototype.$focusAnnotation=function(o){if(o!=null){var i=this.$getAnnotation(o);i.classList.add(this.editor.renderer.keyboardFocusClassName),i.focus()}},u.prototype.$blurFoldWidget=function(o){var i=this.$getFoldWidget(o);i.classList.remove(this.editor.renderer.keyboardFocusClassName),i.blur()},u.prototype.$blurAnnotation=function(o){var i=this.$getAnnotation(o);i.classList.remove(this.editor.renderer.keyboardFocusClassName),i.blur()},u.prototype.$moveFoldWidgetUp=function(){for(var o=this.activeRowIndex;o>0;)if(o--,this.$isFoldWidgetVisible(o)){this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=o,this.$focusFoldWidget(this.activeRowIndex);return}},u.prototype.$moveFoldWidgetDown=function(){for(var o=this.activeRowIndex;o<this.lines.getLength()-1;)if(o++,this.$isFoldWidgetVisible(o)){this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=o,this.$focusFoldWidget(this.activeRowIndex);return}},u.prototype.$moveAnnotationUp=function(){for(var o=this.activeRowIndex;o>0;)if(o--,this.$isAnnotationVisible(o)){this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=o,this.$focusAnnotation(this.activeRowIndex);return}},u.prototype.$moveAnnotationDown=function(){for(var o=this.activeRowIndex;o<this.lines.getLength()-1;)if(o++,this.$isAnnotationVisible(o)){this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=o,this.$focusAnnotation(this.activeRowIndex);return}},u.prototype.$switchLane=function(o){switch(o){case"annotation":if(this.activeLane==="annotation")break;var i=this.$findNearestAnnotation(this.activeRowIndex);if(i==null)break;this.activeLane="annotation",this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=i,this.$focusAnnotation(this.activeRowIndex);break;case"fold":if(this.activeLane==="fold")break;var a=this.$findNearestFoldWidget(this.activeRowIndex);if(a==null)break;this.activeLane="fold",this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=a,this.$focusFoldWidget(this.activeRowIndex);break}},u.prototype.$rowIndexToRow=function(o){var i=this.lines.get(o);return i?i.row:null},u.prototype.$rowToRowIndex=function(o){for(var i=0;i<this.lines.getLength();i++){var a=this.lines.get(i);if(a.row==o)return i}return null},u}();t.GutterKeyboardHandler=g;var s=function(){function u(o,i){this.gutterKeyboardHandler=i,this.domEvent=o}return u.prototype.getKey=function(){return n.keyCodeToString(this.domEvent.keyCode)},u.prototype.getRow=function(){return this.gutterKeyboardHandler.$rowIndexToRow(this.gutterKeyboardHandler.activeRowIndex)},u.prototype.isInAnnotationLane=function(){return this.gutterKeyboardHandler.activeLane==="annotation"},u.prototype.isInFoldLane=function(){return this.gutterKeyboardHandler.activeLane==="fold"},u}();t.GutterKeyboardEvent=s});ace.define("ace/editor",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/keyboard/textinput","ace/mouse/mouse_handler","ace/mouse/fold_handler","ace/keyboard/keybinding","ace/edit_session","ace/search","ace/range","ace/lib/event_emitter","ace/commands/command_manager","ace/commands/default_commands","ace/config","ace/token_iterator","ace/line_widgets","ace/keyboard/gutter_handler","ace/config","ace/clipboard","ace/lib/keys"],function(e,t,r){"use strict";var n=this&&this.__values||function(y){var b=typeof Symbol=="function"&&Symbol.iterator,E=b&&y[b],_=0;if(E)return E.call(y);if(y&&typeof y.length=="number")return{next:function(){return y&&_>=y.length&&(y=void 0),{value:y&&y[_++],done:!y}}};throw new TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")},p=e("./lib/oop"),g=e("./lib/dom"),s=e("./lib/lang"),u=e("./lib/useragent"),o=e("./keyboard/textinput").TextInput,i=e("./mouse/mouse_handler").MouseHandler,a=e("./mouse/fold_handler").FoldHandler,l=e("./keyboard/keybinding").KeyBinding,d=e("./edit_session").EditSession,c=e("./search").Search,m=e("./range").Range,h=e("./lib/event_emitter").EventEmitter,v=e("./commands/command_manager").CommandManager,k=e("./commands/default_commands").commands,x=e("./config"),T=e("./token_iterator").TokenIterator,S=e("./line_widgets").LineWidgets,f=e("./keyboard/gutter_handler").GutterKeyboardHandler,L=e("./config").nls,$=e("./clipboard"),A=e("./lib/keys"),C=function(){function y(b,E,_){this.session,this.$toDestroy=[];var R=b.getContainerElement();this.container=R,this.renderer=b,this.id="editor"+ ++y.$uid,this.commands=new v(u.isMac?"mac":"win",k),typeof document=="object"&&(this.textInput=new o(b.getTextAreaContainer(),this),this.renderer.textarea=this.textInput.getElement(),this.$mouseHandler=new i(this),new a(this)),this.keyBinding=new l(this),this.$search=new c().set({wrap:!0}),this.$historyTracker=this.$historyTracker.bind(this),this.commands.on("exec",this.$historyTracker),this.$initOperationListeners(),this._$emitInputEvent=s.delayedCall(function(){this._signal("input",{}),this.session&&!this.session.destroyed&&this.session.bgTokenizer.scheduleStart()}.bind(this)),this.on("change",function(M,I){I._$emitInputEvent.schedule(31)}),this.setSession(E||_&&_.session||new d("")),x.resetOptions(this),_&&this.setOptions(_),x._signal("editor",this)}return y.prototype.$initOperationListeners=function(){this.commands.on("exec",this.startOperation.bind(this),!0),this.commands.on("afterExec",this.endOperation.bind(this),!0),this.$opResetTimer=s.delayedCall(this.endOperation.bind(this,!0)),this.on("change",function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.docChanged=!0}.bind(this),!0),this.on("changeSelection",function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.selectionChanged=!0}.bind(this),!0)},y.prototype.startOperation=function(b){if(this.curOp){if(!b||this.curOp.command)return;this.prevOp=this.curOp}b||(this.previousCommand=null,b={}),this.$opResetTimer.schedule(),this.curOp=this.session.curOp={command:b.command||{},args:b.args,scrollTop:this.renderer.scrollTop},this.curOp.selectionBefore=this.selection.toJSON()},y.prototype.endOperation=function(b){if(this.curOp&&this.session){if(b&&b.returnValue===!1||!this.session)return this.curOp=null;if(b==!0&&this.curOp.command&&this.curOp.command.name=="mouse"||(this._signal("beforeEndOperation"),!this.curOp))return;var E=this.curOp.command,_=E&&E.scrollIntoView;if(_){switch(_){case"center-animate":_="animate";case"center":this.renderer.scrollCursorIntoView(null,.5);break;case"animate":case"cursor":this.renderer.scrollCursorIntoView();break;case"selectionPart":var R=this.selection.getRange(),M=this.renderer.layerConfig;(R.start.row>=M.lastRow||R.end.row<=M.firstRow)&&this.renderer.scrollSelectionIntoView(this.selection.anchor,this.selection.lead);break;default:break}_=="animate"&&this.renderer.animateScrolling(this.curOp.scrollTop)}var I=this.selection.toJSON();this.curOp.selectionAfter=I,this.$lastSel=this.selection.toJSON(),this.session.getUndoManager().addSelection(I),this.prevOp=this.curOp,this.curOp=null}},y.prototype.$historyTracker=function(b){if(this.$mergeUndoDeltas){var E=this.prevOp,_=this.$mergeableCommands,R=E.command&&b.command.name==E.command.name;if(b.command.name=="insertstring"){var M=b.args;this.mergeNextCommand===void 0&&(this.mergeNextCommand=!0),R=R&&this.mergeNextCommand&&(!/\s/.test(M)||/\s/.test(E.args)),this.mergeNextCommand=!0}else R=R&&_.indexOf(b.command.name)!==-1;this.$mergeUndoDeltas!="always"&&Date.now()-this.sequenceStartTime>2e3&&(R=!1),R?this.session.mergeUndoDeltas=!0:_.indexOf(b.command.name)!==-1&&(this.sequenceStartTime=Date.now())}},y.prototype.setKeyboardHandler=function(b,E){if(b&&typeof b=="string"&&b!="ace"){this.$keybindingId=b;var _=this;x.loadModule(["keybinding",b],function(R){_.$keybindingId==b&&_.keyBinding.setKeyboardHandler(R&&R.handler),E&&E()})}else this.$keybindingId=null,this.keyBinding.setKeyboardHandler(b),E&&E()},y.prototype.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()},y.prototype.setSession=function(b){if(this.session!=b){this.curOp&&this.endOperation(),this.curOp={};var E=this.session;if(E){this.session.off("change",this.$onDocumentChange),this.session.off("changeMode",this.$onChangeMode),this.session.off("tokenizerUpdate",this.$onTokenizerUpdate),this.session.off("changeTabSize",this.$onChangeTabSize),this.session.off("changeWrapLimit",this.$onChangeWrapLimit),this.session.off("changeWrapMode",this.$onChangeWrapMode),this.session.off("changeFold",this.$onChangeFold),this.session.off("changeFrontMarker",this.$onChangeFrontMarker),this.session.off("changeBackMarker",this.$onChangeBackMarker),this.session.off("changeBreakpoint",this.$onChangeBreakpoint),this.session.off("changeAnnotation",this.$onChangeAnnotation),this.session.off("changeOverwrite",this.$onCursorChange),this.session.off("changeScrollTop",this.$onScrollTopChange),this.session.off("changeScrollLeft",this.$onScrollLeftChange);var _=this.session.getSelection();_.off("changeCursor",this.$onCursorChange),_.off("changeSelection",this.$onSelectionChange)}this.session=b,b?(this.$onDocumentChange=this.onDocumentChange.bind(this),b.on("change",this.$onDocumentChange),this.renderer.setSession(b),this.$onChangeMode=this.onChangeMode.bind(this),b.on("changeMode",this.$onChangeMode),this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this),b.on("tokenizerUpdate",this.$onTokenizerUpdate),this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer),b.on("changeTabSize",this.$onChangeTabSize),this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this),b.on("changeWrapLimit",this.$onChangeWrapLimit),this.$onChangeWrapMode=this.onChangeWrapMode.bind(this),b.on("changeWrapMode",this.$onChangeWrapMode),this.$onChangeFold=this.onChangeFold.bind(this),b.on("changeFold",this.$onChangeFold),this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this),this.session.on("changeFrontMarker",this.$onChangeFrontMarker),this.$onChangeBackMarker=this.onChangeBackMarker.bind(this),this.session.on("changeBackMarker",this.$onChangeBackMarker),this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this),this.session.on("changeBreakpoint",this.$onChangeBreakpoint),this.$onChangeAnnotation=this.onChangeAnnotation.bind(this),this.session.on("changeAnnotation",this.$onChangeAnnotation),this.$onCursorChange=this.onCursorChange.bind(this),this.session.on("changeOverwrite",this.$onCursorChange),this.$onScrollTopChange=this.onScrollTopChange.bind(this),this.session.on("changeScrollTop",this.$onScrollTopChange),this.$onScrollLeftChange=this.onScrollLeftChange.bind(this),this.session.on("changeScrollLeft",this.$onScrollLeftChange),this.selection=b.getSelection(),this.selection.on("changeCursor",this.$onCursorChange),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.on("changeSelection",this.$onSelectionChange),this.onChangeMode(),this.onCursorChange(),this.onScrollTopChange(),this.onScrollLeftChange(),this.onSelectionChange(),this.onChangeFrontMarker(),this.onChangeBackMarker(),this.onChangeBreakpoint(),this.onChangeAnnotation(),this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit(),this.renderer.updateFull()):(this.selection=null,this.renderer.setSession(b)),this._signal("changeSession",{session:b,oldSession:E}),this.curOp=null,E&&E._signal("changeEditor",{oldEditor:this}),b&&b._signal("changeEditor",{editor:this}),b&&!b.destroyed&&b.bgTokenizer.scheduleStart()}},y.prototype.getSession=function(){return this.session},y.prototype.setValue=function(b,E){return this.session.doc.setValue(b),E?E==1?this.navigateFileEnd():E==-1&&this.navigateFileStart():this.selectAll(),b},y.prototype.getValue=function(){return this.session.getValue()},y.prototype.getSelection=function(){return this.selection},y.prototype.resize=function(b){this.renderer.onResize(b)},y.prototype.setTheme=function(b,E){this.renderer.setTheme(b,E)},y.prototype.getTheme=function(){return this.renderer.getTheme()},y.prototype.setStyle=function(b){this.renderer.setStyle(b)},y.prototype.unsetStyle=function(b){this.renderer.unsetStyle(b)},y.prototype.getFontSize=function(){return this.getOption("fontSize")||g.computedStyle(this.container).fontSize},y.prototype.setFontSize=function(b){this.setOption("fontSize",b)},y.prototype.$highlightBrackets=function(){if(!this.$highlightPending){var b=this;this.$highlightPending=!0,setTimeout(function(){b.$highlightPending=!1;var E=b.session;if(!(!E||E.destroyed)){E.$bracketHighlight&&(E.$bracketHighlight.markerIds.forEach(function(z){E.removeMarker(z)}),E.$bracketHighlight=null);var _=b.getCursorPosition(),R=b.getKeyboardHandler(),M=R&&R.$getDirectionForHighlight&&R.$getDirectionForHighlight(b),I=E.getMatchingBracketRanges(_,M);if(!I){var P=new T(E,_.row,_.column),O=P.getCurrentToken();if(O&&/\b(?:tag-open|tag-name)/.test(O.type)){var F=E.getMatchingTags(_);F&&(I=[F.openTagName.isEmpty()?F.openTag:F.openTagName,F.closeTagName.isEmpty()?F.closeTag:F.closeTagName])}}if(!I&&E.$mode.getMatching&&(I=E.$mode.getMatching(b.session)),!I){b.getHighlightIndentGuides()&&b.renderer.$textLayer.$highlightIndentGuide();return}var D="ace_bracket";Array.isArray(I)?I.length==1&&(D="ace_error_bracket"):I=[I],I.length==2&&(m.comparePoints(I[0].end,I[1].start)==0?I=[m.fromPoints(I[0].start,I[1].end)]:m.comparePoints(I[0].start,I[1].end)==0&&(I=[m.fromPoints(I[1].start,I[0].end)])),E.$bracketHighlight={ranges:I,markerIds:I.map(function(z){return E.addMarker(z,D,"text")})},b.getHighlightIndentGuides()&&b.renderer.$textLayer.$highlightIndentGuide()}},50)}},y.prototype.focus=function(){this.textInput.focus()},y.prototype.isFocused=function(){return this.textInput.isFocused()},y.prototype.blur=function(){this.textInput.blur()},y.prototype.onFocus=function(b){this.$isFocused||(this.$isFocused=!0,this.renderer.showCursor(),this.renderer.visualizeFocus(),this._emit("focus",b))},y.prototype.onBlur=function(b){this.$isFocused&&(this.$isFocused=!1,this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._emit("blur",b))},y.prototype.$cursorChange=function(){this.renderer.updateCursor(),this.$highlightBrackets(),this.$updateHighlightActiveLine()},y.prototype.onDocumentChange=function(b){var E=this.session.$useWrapMode,_=b.start.row==b.end.row?b.end.row:1/0;this.renderer.updateLines(b.start.row,_,E),this._signal("change",b),this.$cursorChange()},y.prototype.onTokenizerUpdate=function(b){var E=b.data;this.renderer.updateLines(E.first,E.last)},y.prototype.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())},y.prototype.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())},y.prototype.onCursorChange=function(){this.$cursorChange(),this._signal("changeSelection")},y.prototype.$updateHighlightActiveLine=function(){var b=this.getSession(),E;if(this.$highlightActiveLine&&((this.$selectionStyle!="line"||!this.selection.isMultiLine())&&(E=this.getCursorPosition()),this.renderer.theme&&this.renderer.theme.$selectionColorConflict&&!this.selection.isEmpty()&&(E=!1),this.renderer.$maxLines&&this.session.getLength()===1&&!(this.renderer.$minLines>1)&&(E=!1)),b.$highlightLineMarker&&!E)b.removeMarker(b.$highlightLineMarker.id),b.$highlightLineMarker=null;else if(!b.$highlightLineMarker&&E){var _=new m(E.row,E.column,E.row,1/0);_.id=b.addMarker(_,"ace_active-line","screenLine"),b.$highlightLineMarker=_}else E&&(b.$highlightLineMarker.start.row=E.row,b.$highlightLineMarker.end.row=E.row,b.$highlightLineMarker.start.column=E.column,b._signal("changeBackMarker"))},y.prototype.onSelectionChange=function(b){var E=this.session;if(E.$selectionMarker&&E.removeMarker(E.$selectionMarker),E.$selectionMarker=null,this.selection.isEmpty())this.$updateHighlightActiveLine();else{var _=this.selection.getRange(),R=this.getSelectionStyle();E.$selectionMarker=E.addMarker(_,"ace_selection",R)}var M=this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp();this.session.highlight(M),this._signal("changeSelection")},y.prototype.$getSelectionHighLightRegexp=function(){var b=this.session,E=this.getSelectionRange();if(!(E.isEmpty()||E.isMultiLine())){var _=E.start.column,R=E.end.column,M=b.getLine(E.start.row),I=M.substring(_,R);if(!(I.length>5e3||!/[\w\d]/.test(I))){var P=this.$search.$assembleRegExp({wholeWord:!0,caseSensitive:!0,needle:I}),O=M.substring(_-1,R+1);if(P.test(O))return P}}},y.prototype.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()},y.prototype.onChangeBackMarker=function(){this.renderer.updateBackMarkers()},y.prototype.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()},y.prototype.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())},y.prototype.onChangeMode=function(b){this.renderer.updateText(),this._emit("changeMode",b)},y.prototype.onChangeWrapLimit=function(){this.renderer.updateFull()},y.prototype.onChangeWrapMode=function(){this.renderer.onResize(!0)},y.prototype.onChangeFold=function(){this.$updateHighlightActiveLine(),this.renderer.updateFull()},y.prototype.getSelectedText=function(){return this.session.getTextRange(this.getSelectionRange())},y.prototype.getCopyText=function(){var b=this.getSelectedText(),E=this.session.doc.getNewLineCharacter(),_=!1;if(!b&&this.$copyWithEmptySelection){_=!0;for(var R=this.selection.getAllRanges(),M=0;M<R.length;M++){var I=R[M];M&&R[M-1].start.row==I.start.row||(b+=this.session.getLine(I.start.row)+E)}}var P={text:b};return this._signal("copy",P),$.lineMode=_?P.text:!1,P.text},y.prototype.onCopy=function(){this.commands.exec("copy",this)},y.prototype.onCut=function(){this.commands.exec("cut",this)},y.prototype.onPaste=function(b,E){var _={text:b,event:E};this.commands.exec("paste",this,_)},y.prototype.$handlePaste=function(b){typeof b=="string"&&(b={text:b}),this._signal("paste",b);var E=b.text,_=E===$.lineMode,R=this.session;if(!this.inMultiSelectMode||this.inVirtualSelectionMode)_?R.insert({row:this.selection.lead.row,column:0},E):this.insert(E);else if(_)this.selection.rangeList.ranges.forEach(function(D){R.insert({row:D.start.row,column:0},E)});else{var M=E.split(/\r\n|\r|\n/),I=this.selection.rangeList.ranges,P=M.length==2&&(!M[0]||!M[1]);if(M.length!=I.length||P)return this.commands.exec("insertstring",this,E);for(var O=I.length;O--;){var F=I[O];F.isEmpty()||R.remove(F),R.insert(F.start,M[O])}}},y.prototype.execCommand=function(b,E){return this.commands.exec(b,this,E)},y.prototype.insert=function(b,E){var _=this.session,R=_.getMode(),M=this.getCursorPosition();if(this.getBehavioursEnabled()&&!E){var I=R.transformAction(_.getState(M.row),"insertion",this,_,b);I&&(b!==I.text&&(this.inVirtualSelectionMode||(this.session.mergeUndoDeltas=!1,this.mergeNextCommand=!1)),b=I.text)}if(b=="	"&&(b=this.session.getTabString()),this.selection.isEmpty()){if(this.session.getOverwrite()&&b.indexOf(`
`)==-1){var P=m.fromPoints(M,M);P.end.column+=b.length,this.session.remove(P)}}else{var P=this.getSelectionRange();M=this.session.remove(P),this.clearSelection()}if(b==`
`||b==`\r
`){var z=_.getLine(M.row);if(M.column>z.search(/\S|$/)){var O=z.substr(M.column).search(/\S|$/);_.doc.removeInLine(M.row,M.column,M.column+O)}}this.clearSelection();var F=M.column,D=_.getState(M.row),z=_.getLine(M.row),N=R.checkOutdent(D,z,b);if(_.insert(M,b),I&&I.selection&&(I.selection.length==2?this.selection.setSelectionRange(new m(M.row,F+I.selection[0],M.row,F+I.selection[1])):this.selection.setSelectionRange(new m(M.row+I.selection[0],I.selection[1],M.row+I.selection[2],I.selection[3]))),this.$enableAutoIndent){if(_.getDocument().isNewLine(b)){var W=R.getNextLineIndent(D,z.slice(0,M.column),_.getTabString());_.insert({row:M.row+1,column:0},W)}N&&R.autoOutdent(D,_,M.row)}},y.prototype.autoIndent=function(){for(var b=this.session,E=b.getMode(),_=this.selection.isEmpty()?[new m(0,0,b.doc.getLength()-1,0)]:this.selection.getAllRanges(),R="",M="",I="",P=b.getTabString(),O=0;O<_.length;O++)for(var F=_[O].start.row,D=_[O].end.row,z=F;z<=D;z++){z>0&&(R=b.getState(z-1),M=b.getLine(z-1),I=E.getNextLineIndent(R,M,P));var N=b.getLine(z),W=E.$getIndent(N);if(I!==W){if(W.length>0){var j=new m(z,0,z,W.length);b.remove(j)}I.length>0&&b.insert({row:z,column:0},I)}E.autoOutdent(R,b,z)}},y.prototype.onTextInput=function(b,E){if(!E)return this.keyBinding.onTextInput(b);this.startOperation({command:{name:"insertstring"}});var _=this.applyComposition.bind(this,b,E);this.selection.rangeCount?this.forEachSelection(_):_(),this.endOperation()},y.prototype.applyComposition=function(b,E){if(E.extendLeft||E.extendRight){var _=this.selection.getRange();_.start.column-=E.extendLeft,_.end.column+=E.extendRight,_.start.column<0&&(_.start.row--,_.start.column+=this.session.getLine(_.start.row).length+1),this.selection.setRange(_),!b&&!_.isEmpty()&&this.remove()}if((b||!this.selection.isEmpty())&&this.insert(b,!0),E.restoreStart||E.restoreEnd){var _=this.selection.getRange();_.start.column-=E.restoreStart,_.end.column-=E.restoreEnd,this.selection.setRange(_)}},y.prototype.onCommandKey=function(b,E,_){return this.keyBinding.onCommandKey(b,E,_)},y.prototype.setOverwrite=function(b){this.session.setOverwrite(b)},y.prototype.getOverwrite=function(){return this.session.getOverwrite()},y.prototype.toggleOverwrite=function(){this.session.toggleOverwrite()},y.prototype.setScrollSpeed=function(b){this.setOption("scrollSpeed",b)},y.prototype.getScrollSpeed=function(){return this.getOption("scrollSpeed")},y.prototype.setDragDelay=function(b){this.setOption("dragDelay",b)},y.prototype.getDragDelay=function(){return this.getOption("dragDelay")},y.prototype.setSelectionStyle=function(b){this.setOption("selectionStyle",b)},y.prototype.getSelectionStyle=function(){return this.getOption("selectionStyle")},y.prototype.setHighlightActiveLine=function(b){this.setOption("highlightActiveLine",b)},y.prototype.getHighlightActiveLine=function(){return this.getOption("highlightActiveLine")},y.prototype.setHighlightGutterLine=function(b){this.setOption("highlightGutterLine",b)},y.prototype.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},y.prototype.setHighlightSelectedWord=function(b){this.setOption("highlightSelectedWord",b)},y.prototype.getHighlightSelectedWord=function(){return this.$highlightSelectedWord},y.prototype.setAnimatedScroll=function(b){this.renderer.setAnimatedScroll(b)},y.prototype.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()},y.prototype.setShowInvisibles=function(b){this.renderer.setShowInvisibles(b)},y.prototype.getShowInvisibles=function(){return this.renderer.getShowInvisibles()},y.prototype.setDisplayIndentGuides=function(b){this.renderer.setDisplayIndentGuides(b)},y.prototype.getDisplayIndentGuides=function(){return this.renderer.getDisplayIndentGuides()},y.prototype.setHighlightIndentGuides=function(b){this.renderer.setHighlightIndentGuides(b)},y.prototype.getHighlightIndentGuides=function(){return this.renderer.getHighlightIndentGuides()},y.prototype.setShowPrintMargin=function(b){this.renderer.setShowPrintMargin(b)},y.prototype.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()},y.prototype.setPrintMarginColumn=function(b){this.renderer.setPrintMarginColumn(b)},y.prototype.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()},y.prototype.setReadOnly=function(b){this.setOption("readOnly",b)},y.prototype.getReadOnly=function(){return this.getOption("readOnly")},y.prototype.setBehavioursEnabled=function(b){this.setOption("behavioursEnabled",b)},y.prototype.getBehavioursEnabled=function(){return this.getOption("behavioursEnabled")},y.prototype.setWrapBehavioursEnabled=function(b){this.setOption("wrapBehavioursEnabled",b)},y.prototype.getWrapBehavioursEnabled=function(){return this.getOption("wrapBehavioursEnabled")},y.prototype.setShowFoldWidgets=function(b){this.setOption("showFoldWidgets",b)},y.prototype.getShowFoldWidgets=function(){return this.getOption("showFoldWidgets")},y.prototype.setFadeFoldWidgets=function(b){this.setOption("fadeFoldWidgets",b)},y.prototype.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},y.prototype.remove=function(b){this.selection.isEmpty()&&(b=="left"?this.selection.selectLeft():this.selection.selectRight());var E=this.getSelectionRange();if(this.getBehavioursEnabled()){var _=this.session,R=_.getState(E.start.row),M=_.getMode().transformAction(R,"deletion",this,_,E);if(E.end.column===0){var I=_.getTextRange(E);if(I[I.length-1]==`
`){var P=_.getLine(E.end.row);/^\s+$/.test(P)&&(E.end.column=P.length)}}M&&(E=M)}this.session.remove(E),this.clearSelection()},y.prototype.removeWordRight=function(){this.selection.isEmpty()&&this.selection.selectWordRight(),this.session.remove(this.getSelectionRange()),this.clearSelection()},y.prototype.removeWordLeft=function(){this.selection.isEmpty()&&this.selection.selectWordLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},y.prototype.removeToLineStart=function(){this.selection.isEmpty()&&this.selection.selectLineStart(),this.selection.isEmpty()&&this.selection.selectLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},y.prototype.removeToLineEnd=function(){this.selection.isEmpty()&&this.selection.selectLineEnd();var b=this.getSelectionRange();b.start.column==b.end.column&&b.start.row==b.end.row&&(b.end.column=0,b.end.row++),this.session.remove(b),this.clearSelection()},y.prototype.splitLine=function(){this.selection.isEmpty()||(this.session.remove(this.getSelectionRange()),this.clearSelection());var b=this.getCursorPosition();this.insert(`
`),this.moveCursorToPosition(b)},y.prototype.setGhostText=function(b,E){this.session.widgetManager||(this.session.widgetManager=new S(this.session),this.session.widgetManager.attach(this)),this.renderer.setGhostText(b,E)},y.prototype.removeGhostText=function(){this.session.widgetManager&&this.renderer.removeGhostText()},y.prototype.transposeLetters=function(){if(this.selection.isEmpty()){var b=this.getCursorPosition(),E=b.column;if(E!==0){var _=this.session.getLine(b.row),R,M;E<_.length?(R=_.charAt(E)+_.charAt(E-1),M=new m(b.row,E-1,b.row,E+1)):(R=_.charAt(E-1)+_.charAt(E-2),M=new m(b.row,E-2,b.row,E)),this.session.replace(M,R),this.session.selection.moveToPosition(M.end)}}},y.prototype.toLowerCase=function(){var b=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var E=this.getSelectionRange(),_=this.session.getTextRange(E);this.session.replace(E,_.toLowerCase()),this.selection.setSelectionRange(b)},y.prototype.toUpperCase=function(){var b=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var E=this.getSelectionRange(),_=this.session.getTextRange(E);this.session.replace(E,_.toUpperCase()),this.selection.setSelectionRange(b)},y.prototype.indent=function(){var b=this.session,E=this.getSelectionRange();if(E.start.row<E.end.row){var _=this.$getSelectedRows();b.indentRows(_.first,_.last,"	");return}else if(E.start.column<E.end.column){var R=b.getTextRange(E);if(!/^\s+$/.test(R)){var _=this.$getSelectedRows();b.indentRows(_.first,_.last,"	");return}}var M=b.getLine(E.start.row),I=E.start,P=b.getTabSize(),O=b.documentToScreenColumn(I.row,I.column);if(this.session.getUseSoftTabs())var F=P-O%P,D=s.stringRepeat(" ",F);else{for(var F=O%P;M[E.start.column-1]==" "&&F;)E.start.column--,F--;this.selection.setSelectionRange(E),D="	"}return this.insert(D)},y.prototype.blockIndent=function(){var b=this.$getSelectedRows();this.session.indentRows(b.first,b.last,"	")},y.prototype.blockOutdent=function(){var b=this.session.getSelection();this.session.outdentRows(b.getRange())},y.prototype.sortLines=function(){for(var b=this.$getSelectedRows(),E=this.session,_=[],R=b.first;R<=b.last;R++)_.push(E.getLine(R));_.sort(function(P,O){return P.toLowerCase()<O.toLowerCase()?-1:P.toLowerCase()>O.toLowerCase()?1:0});for(var M=new m(0,0,0,0),R=b.first;R<=b.last;R++){var I=E.getLine(R);M.start.row=R,M.end.row=R,M.end.column=I.length,E.replace(M,_[R-b.first])}},y.prototype.toggleCommentLines=function(){var b=this.session.getState(this.getCursorPosition().row),E=this.$getSelectedRows();this.session.getMode().toggleCommentLines(b,this.session,E.first,E.last)},y.prototype.toggleBlockComment=function(){var b=this.getCursorPosition(),E=this.session.getState(b.row),_=this.getSelectionRange();this.session.getMode().toggleBlockComment(E,this.session,_,b)},y.prototype.getNumberAt=function(b,E){var _=/[\-]?[0-9]+(?:\.[0-9]+)?/g;_.lastIndex=0;for(var R=this.session.getLine(b);_.lastIndex<E;){var M=_.exec(R);if(M.index<=E&&M.index+M[0].length>=E){var I={value:M[0],start:M.index,end:M.index+M[0].length};return I}}return null},y.prototype.modifyNumber=function(b){var E=this.selection.getCursor().row,_=this.selection.getCursor().column,R=new m(E,_-1,E,_),M=this.session.getTextRange(R);if(!isNaN(parseFloat(M))&&isFinite(M)){var I=this.getNumberAt(E,_);if(I){var P=I.value.indexOf(".")>=0?I.start+I.value.indexOf(".")+1:I.end,O=I.start+I.value.length-P,F=parseFloat(I.value);F*=Math.pow(10,O),P!==I.end&&_<P?b*=Math.pow(10,I.end-_-1):b*=Math.pow(10,I.end-_),F+=b,F/=Math.pow(10,O);var D=F.toFixed(O),z=new m(E,I.start,E,I.end);this.session.replace(z,D),this.moveCursorTo(E,Math.max(I.start+1,_+D.length-I.value.length))}}else this.toggleWord()},y.prototype.toggleWord=function(){var b=this.selection.getCursor().row,E=this.selection.getCursor().column;this.selection.selectWord();var _=this.getSelectedText(),R=this.selection.getWordRange().start.column,M=_.replace(/([a-z]+|[A-Z]+)(?=[A-Z_]|$)/g,"$1 ").split(/\s/),I=E-R-1;I<0&&(I=0);var P=0,O=0,F=this;_.match(/[A-Za-z0-9_]+/)&&M.forEach(function(ot,et){O=P+ot.length,I>=P&&I<=O&&(_=ot,F.selection.clearSelection(),F.moveCursorTo(b,P+R),F.selection.selectTo(b,O+R)),P=O});for(var D=this.$toggleWordPairs,z,N=0;N<D.length;N++)for(var W=D[N],j=0;j<=1;j++){var X=+!j,G=_.match(new RegExp("^\\s?_?("+s.escapeRegExp(W[j])+")\\s?$","i"));if(G){var J=_.match(new RegExp("([_]|^|\\s)("+s.escapeRegExp(G[1])+")($|\\s)","g"));J&&(z=_.replace(new RegExp(s.escapeRegExp(W[j]),"i"),function(ot){var et=W[X];return ot.toUpperCase()==ot?et=et.toUpperCase():ot.charAt(0).toUpperCase()==ot.charAt(0)&&(et=et.substr(0,0)+W[X].charAt(0).toUpperCase()+et.substr(1)),et}),this.insert(z),z="")}}},y.prototype.findLinkAt=function(b,E){var _,R,M=this.session.getLine(b),I=M.split(/((?:https?|ftp):\/\/[\S]+)/),P=E;P<0&&(P=0);var O=0,F=0,D;try{for(var z=n(I),N=z.next();!N.done;N=z.next()){var W=N.value;if(F=O+W.length,P>=O&&P<=F&&W.match(/((?:https?|ftp):\/\/[\S]+)/)){D=W.replace(/[\s:.,'";}\]]+$/,"");break}O=F}}catch(j){_={error:j}}finally{try{N&&!N.done&&(R=z.return)&&R.call(z)}finally{if(_)throw _.error}}return D},y.prototype.openLink=function(){var b=this.selection.getCursor(),E=this.findLinkAt(b.row,b.column);return E&&window.open(E,"_blank"),E!=null},y.prototype.removeLines=function(){var b=this.$getSelectedRows();this.session.removeFullLines(b.first,b.last),this.clearSelection()},y.prototype.duplicateSelection=function(){var b=this.selection,E=this.session,_=b.getRange(),R=b.isBackwards();if(_.isEmpty()){var M=_.start.row;E.duplicateLines(M,M)}else{var I=R?_.start:_.end,P=E.insert(I,E.getTextRange(_));_.start=I,_.end=P,b.setSelectionRange(_,R)}},y.prototype.moveLinesDown=function(){this.$moveLines(1,!1)},y.prototype.moveLinesUp=function(){this.$moveLines(-1,!1)},y.prototype.moveText=function(b,E,_){return this.session.moveText(b,E,_)},y.prototype.copyLinesUp=function(){this.$moveLines(-1,!0)},y.prototype.copyLinesDown=function(){this.$moveLines(1,!0)},y.prototype.$moveLines=function(b,E){var _,R,M=this.selection;if(!M.inMultiSelectMode||this.inVirtualSelectionMode){var I=M.toOrientedRange();_=this.$getSelectedRows(I),R=this.session.$moveLines(_.first,_.last,E?0:b),E&&b==-1&&(R=0),I.moveBy(R,0),M.fromOrientedRange(I)}else{var P=M.rangeList.ranges;M.rangeList.detach(this.session),this.inVirtualSelectionMode=!0;for(var O=0,F=0,D=P.length,z=0;z<D;z++){var N=z;P[z].moveBy(O,0),_=this.$getSelectedRows(P[z]);for(var W=_.first,j=_.last;++z<D;){F&&P[z].moveBy(F,0);var X=this.$getSelectedRows(P[z]);if(E&&X.first!=j)break;if(!E&&X.first>j+1)break;j=X.last}for(z--,O=this.session.$moveLines(W,j,E?0:b),E&&b==-1&&(N=z+1);N<=z;)P[N].moveBy(O,0),N++;E||(O=0),F+=O}M.fromOrientedRange(M.ranges[0]),M.rangeList.attach(this.session),this.inVirtualSelectionMode=!1}},y.prototype.$getSelectedRows=function(b){return b=(b||this.getSelectionRange()).collapseRows(),{first:this.session.getRowFoldStart(b.start.row),last:this.session.getRowFoldEnd(b.end.row)}},y.prototype.onCompositionStart=function(b){this.renderer.showComposition(b)},y.prototype.onCompositionUpdate=function(b){this.renderer.setCompositionText(b)},y.prototype.onCompositionEnd=function(){this.renderer.hideComposition()},y.prototype.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()},y.prototype.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()},y.prototype.isRowVisible=function(b){return b>=this.getFirstVisibleRow()&&b<=this.getLastVisibleRow()},y.prototype.isRowFullyVisible=function(b){return b>=this.renderer.getFirstFullyVisibleRow()&&b<=this.renderer.getLastFullyVisibleRow()},y.prototype.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1},y.prototype.$moveByPage=function(b,E){var _=this.renderer,R=this.renderer.layerConfig,M=b*Math.floor(R.height/R.lineHeight);E===!0?this.selection.$moveSelection(function(){this.moveCursorBy(M,0)}):E===!1&&(this.selection.moveCursorBy(M,0),this.selection.clearSelection());var I=_.scrollTop;_.scrollBy(0,M*R.lineHeight),E!=null&&_.scrollCursorIntoView(null,.5),_.animateScrolling(I)},y.prototype.selectPageDown=function(){this.$moveByPage(1,!0)},y.prototype.selectPageUp=function(){this.$moveByPage(-1,!0)},y.prototype.gotoPageDown=function(){this.$moveByPage(1,!1)},y.prototype.gotoPageUp=function(){this.$moveByPage(-1,!1)},y.prototype.scrollPageDown=function(){this.$moveByPage(1)},y.prototype.scrollPageUp=function(){this.$moveByPage(-1)},y.prototype.scrollToRow=function(b){this.renderer.scrollToRow(b)},y.prototype.scrollToLine=function(b,E,_,R){this.renderer.scrollToLine(b,E,_,R)},y.prototype.centerSelection=function(){var b=this.getSelectionRange(),E={row:Math.floor(b.start.row+(b.end.row-b.start.row)/2),column:Math.floor(b.start.column+(b.end.column-b.start.column)/2)};this.renderer.alignCursor(E,.5)},y.prototype.getCursorPosition=function(){return this.selection.getCursor()},y.prototype.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())},y.prototype.getSelectionRange=function(){return this.selection.getRange()},y.prototype.selectAll=function(){this.selection.selectAll()},y.prototype.clearSelection=function(){this.selection.clearSelection()},y.prototype.moveCursorTo=function(b,E){this.selection.moveCursorTo(b,E)},y.prototype.moveCursorToPosition=function(b){this.selection.moveCursorToPosition(b)},y.prototype.jumpToMatching=function(b,E){var _=this.getCursorPosition(),R=new T(this.session,_.row,_.column),M=R.getCurrentToken(),I=0;M&&M.type.indexOf("tag-name")!==-1&&(M=R.stepBackward());var P=M||R.stepForward();if(P){var O,F=!1,D={},z=_.column-P.start,N,W={")":"(","(":"(","]":"[","[":"[","{":"{","}":"{"};do{if(P.value.match(/[{}()\[\]]/g)){for(;z<P.value.length&&!F;z++)if(W[P.value[z]])switch(N=W[P.value[z]]+"."+P.type.replace("rparen","lparen"),isNaN(D[N])&&(D[N]=0),P.value[z]){case"(":case"[":case"{":D[N]++;break;case")":case"]":case"}":D[N]--,D[N]===-1&&(O="bracket",F=!0);break}}else P.type.indexOf("tag-name")!==-1&&(isNaN(D[P.value])&&(D[P.value]=0),M.value==="<"&&I>1?D[P.value]++:M.value==="</"&&D[P.value]--,D[P.value]===-1&&(O="tag",F=!0));F||(M=P,I++,P=R.stepForward(),z=0)}while(P&&!F);if(O){var j,X;if(O==="bracket")j=this.session.getBracketRange(_),j||(j=new m(R.getCurrentTokenRow(),R.getCurrentTokenColumn()+z-1,R.getCurrentTokenRow(),R.getCurrentTokenColumn()+z-1),X=j.start,(E||X.row===_.row&&Math.abs(X.column-_.column)<2)&&(j=this.session.getBracketRange(X)));else if(O==="tag"){if(!P||P.type.indexOf("tag-name")===-1)return;if(j=new m(R.getCurrentTokenRow(),R.getCurrentTokenColumn()-2,R.getCurrentTokenRow(),R.getCurrentTokenColumn()-2),j.compare(_.row,_.column)===0){var G=this.session.getMatchingTags(_);G&&(G.openTag.contains(_.row,_.column)?(j=G.closeTag,X=j.start):(j=G.openTag,G.closeTag.start.row===_.row&&G.closeTag.start.column===_.column?X=j.end:X=j.start))}X=X||j.start}X=j&&j.cursor||X,X&&(b?j&&E?this.selection.setRange(j):j&&j.isEqual(this.getSelectionRange())?this.clearSelection():this.selection.selectTo(X.row,X.column):this.selection.moveTo(X.row,X.column))}}},y.prototype.gotoLine=function(b,E,_){this.selection.clearSelection(),this.session.unfold({row:b-1,column:E||0}),this.exitMultiSelectMode&&this.exitMultiSelectMode(),this.moveCursorTo(b-1,E||0),this.isRowFullyVisible(b-1)||this.scrollToLine(b-1,!0,_)},y.prototype.navigateTo=function(b,E){this.selection.moveTo(b,E)},y.prototype.navigateUp=function(b){if(this.selection.isMultiLine()&&!this.selection.isBackwards()){var E=this.selection.anchor.getPosition();return this.moveCursorToPosition(E)}this.selection.clearSelection(),this.selection.moveCursorBy(-b||-1,0)},y.prototype.navigateDown=function(b){if(this.selection.isMultiLine()&&this.selection.isBackwards()){var E=this.selection.anchor.getPosition();return this.moveCursorToPosition(E)}this.selection.clearSelection(),this.selection.moveCursorBy(b||1,0)},y.prototype.navigateLeft=function(b){if(this.selection.isEmpty())for(b=b||1;b--;)this.selection.moveCursorLeft();else{var E=this.getSelectionRange().start;this.moveCursorToPosition(E)}this.clearSelection()},y.prototype.navigateRight=function(b){if(this.selection.isEmpty())for(b=b||1;b--;)this.selection.moveCursorRight();else{var E=this.getSelectionRange().end;this.moveCursorToPosition(E)}this.clearSelection()},y.prototype.navigateLineStart=function(){this.selection.moveCursorLineStart(),this.clearSelection()},y.prototype.navigateLineEnd=function(){this.selection.moveCursorLineEnd(),this.clearSelection()},y.prototype.navigateFileEnd=function(){this.selection.moveCursorFileEnd(),this.clearSelection()},y.prototype.navigateFileStart=function(){this.selection.moveCursorFileStart(),this.clearSelection()},y.prototype.navigateWordRight=function(){this.selection.moveCursorWordRight(),this.clearSelection()},y.prototype.navigateWordLeft=function(){this.selection.moveCursorWordLeft(),this.clearSelection()},y.prototype.replace=function(b,E){E&&this.$search.set(E);var _=this.$search.find(this.session),R=0;return _&&(this.$tryReplace(_,b)&&(R=1),this.selection.setSelectionRange(_),this.renderer.scrollSelectionIntoView(_.start,_.end)),R},y.prototype.replaceAll=function(b,E){E&&this.$search.set(E);var _=this.$search.findAll(this.session),R=0;if(!_.length)return R;var M=this.getSelectionRange();this.selection.moveTo(0,0);for(var I=_.length-1;I>=0;--I)this.$tryReplace(_[I],b)&&R++;return this.selection.setSelectionRange(M),R},y.prototype.$tryReplace=function(b,E){var _=this.session.getTextRange(b);return E=this.$search.replace(_,E),E!==null?(b.end=this.session.replace(b,E),b):null},y.prototype.getLastSearchOptions=function(){return this.$search.getOptions()},y.prototype.find=function(b,E,_){E||(E={}),typeof b=="string"||b instanceof RegExp?E.needle=b:typeof b=="object"&&p.mixin(E,b);var R=this.selection.getRange();E.needle==null&&(b=this.session.getTextRange(R)||this.$search.$options.needle,b||(R=this.session.getWordRange(R.start.row,R.start.column),b=this.session.getTextRange(R)),this.$search.set({needle:b})),this.$search.set(E),E.start||this.$search.set({start:R});var M=this.$search.find(this.session);if(E.preventScroll)return M;if(M)return this.revealRange(M,_),M;E.backwards?R.start=R.end:R.end=R.start,this.selection.setRange(R)},y.prototype.findNext=function(b,E){this.find({skipCurrent:!0,backwards:!1},b,E)},y.prototype.findPrevious=function(b,E){this.find(b,{skipCurrent:!0,backwards:!0},E)},y.prototype.revealRange=function(b,E){this.session.unfold(b),this.selection.setSelectionRange(b);var _=this.renderer.scrollTop;this.renderer.scrollSelectionIntoView(b.start,b.end,.5),E!==!1&&this.renderer.animateScrolling(_)},y.prototype.undo=function(){this.session.getUndoManager().undo(this.session),this.renderer.scrollCursorIntoView(null,.5)},y.prototype.redo=function(){this.session.getUndoManager().redo(this.session),this.renderer.scrollCursorIntoView(null,.5)},y.prototype.destroy=function(){this.$toDestroy&&(this.$toDestroy.forEach(function(b){b.destroy()}),this.$toDestroy=null),this.$mouseHandler&&this.$mouseHandler.destroy(),this.renderer.destroy(),this._signal("destroy",this),this.session&&this.session.destroy(),this._$emitInputEvent&&this._$emitInputEvent.cancel(),this.removeAllListeners()},y.prototype.setAutoScrollEditorIntoView=function(b){if(b){var E,_=this,R=!1;this.$scrollAnchor||(this.$scrollAnchor=document.createElement("div"));var M=this.$scrollAnchor;M.style.cssText="position:absolute",this.container.insertBefore(M,this.container.firstChild);var I=this.on("changeSelection",function(){R=!0}),P=this.renderer.on("beforeRender",function(){R&&(E=_.renderer.container.getBoundingClientRect())}),O=this.renderer.on("afterRender",function(){if(R&&E&&(_.isFocused()||_.searchBox&&_.searchBox.isFocused())){var F=_.renderer,D=F.$cursorLayer.$pixelPos,z=F.layerConfig,N=D.top-z.offset;D.top>=0&&N+E.top<0?R=!0:D.top<z.height&&D.top+E.top+z.lineHeight>window.innerHeight?R=!1:R=null,R!=null&&(M.style.top=N+"px",M.style.left=D.left+"px",M.style.height=z.lineHeight+"px",M.scrollIntoView(R)),R=E=null}});this.setAutoScrollEditorIntoView=function(F){F||(delete this.setAutoScrollEditorIntoView,this.off("changeSelection",I),this.renderer.off("afterRender",O),this.renderer.off("beforeRender",P))}}},y.prototype.$resetCursorStyle=function(){var b=this.$cursorStyle||"ace",E=this.renderer.$cursorLayer;E&&(E.setSmoothBlinking(/smooth/.test(b)),E.isBlinking=!this.$readOnly&&b!="wide",g.setCssClass(E.element,"ace_slim-cursors",/slim/.test(b)))},y.prototype.prompt=function(b,E,_){var R=this;x.loadModule("ace/ext/prompt",function(M){M.prompt(R,b,E,_)})},y}();C.$uid=0,C.prototype.curOp=null,C.prototype.prevOp={},C.prototype.$mergeableCommands=["backspace","del","insertstring"],C.prototype.$toggleWordPairs=[["first","last"],["true","false"],["yes","no"],["width","height"],["top","bottom"],["right","left"],["on","off"],["x","y"],["get","set"],["max","min"],["horizontal","vertical"],["show","hide"],["add","remove"],["up","down"],["before","after"],["even","odd"],["in","out"],["inside","outside"],["next","previous"],["increase","decrease"],["attach","detach"],["&&","||"],["==","!="]],p.implement(C.prototype,h),x.defineOptions(C.prototype,"editor",{selectionStyle:{set:function(y){this.onSelectionChange(),this._signal("changeSelectionStyle",{data:y})},initialValue:"line"},highlightActiveLine:{set:function(){this.$updateHighlightActiveLine()},initialValue:!0},highlightSelectedWord:{set:function(y){this.$onSelectionChange()},initialValue:!0},readOnly:{set:function(y){this.textInput.setReadOnly(y),this.$resetCursorStyle()},initialValue:!1},copyWithEmptySelection:{set:function(y){this.textInput.setCopyWithEmptySelection(y)},initialValue:!1},cursorStyle:{set:function(y){this.$resetCursorStyle()},values:["ace","slim","smooth","wide"],initialValue:"ace"},mergeUndoDeltas:{values:[!1,!0,"always"],initialValue:!0},behavioursEnabled:{initialValue:!0},wrapBehavioursEnabled:{initialValue:!0},enableAutoIndent:{initialValue:!0},autoScrollEditorIntoView:{set:function(y){this.setAutoScrollEditorIntoView(y)}},keyboardHandler:{set:function(y){this.setKeyboardHandler(y)},get:function(){return this.$keybindingId},handlesSet:!0},value:{set:function(y){this.session.setValue(y)},get:function(){return this.getValue()},handlesSet:!0,hidden:!0},session:{set:function(y){this.setSession(y)},get:function(){return this.session},handlesSet:!0,hidden:!0},showLineNumbers:{set:function(y){this.renderer.$gutterLayer.setShowLineNumbers(y),this.renderer.$loop.schedule(this.renderer.CHANGE_GUTTER),y&&this.$relativeLineNumbers?w.attach(this):w.detach(this)},initialValue:!0},relativeLineNumbers:{set:function(y){this.$showLineNumbers&&y?w.attach(this):w.detach(this)}},placeholder:{set:function(y){this.$updatePlaceholder||(this.$updatePlaceholder=function(){var b=this.session&&(this.renderer.$composition||this.session.getLength()>1||this.session.getLine(0).length>0);if(b&&this.renderer.placeholderNode)this.renderer.off("afterRender",this.$updatePlaceholder),g.removeCssClass(this.container,"ace_hasPlaceholder"),this.renderer.placeholderNode.remove(),this.renderer.placeholderNode=null;else if(!b&&!this.renderer.placeholderNode){this.renderer.on("afterRender",this.$updatePlaceholder),g.addCssClass(this.container,"ace_hasPlaceholder");var E=g.createElement("div");E.className="ace_placeholder",E.textContent=this.$placeholder||"",this.renderer.placeholderNode=E,this.renderer.content.appendChild(this.renderer.placeholderNode)}else!b&&this.renderer.placeholderNode&&(this.renderer.placeholderNode.textContent=this.$placeholder||"")}.bind(this),this.on("input",this.$updatePlaceholder)),this.$updatePlaceholder()}},enableKeyboardAccessibility:{set:function(y){var b={name:"blurTextInput",description:"Set focus to the editor content div to allow tabbing through the page",bindKey:"Esc",exec:function(R){R.blur(),R.renderer.scroller.focus()},readOnly:!0},E=function(R){if(R.target==this.renderer.scroller&&R.keyCode===A.enter){R.preventDefault();var M=this.getCursorPosition().row;this.isRowVisible(M)||this.scrollToLine(M,!0,!0),this.focus()}},_;y?(this.renderer.enableKeyboardAccessibility=!0,this.renderer.keyboardFocusClassName="ace_keyboard-focus",this.textInput.getElement().setAttribute("tabindex",-1),this.textInput.setNumberOfExtraLines(u.isWin?3:0),this.renderer.scroller.setAttribute("tabindex",0),this.renderer.scroller.setAttribute("role","group"),this.renderer.scroller.setAttribute("aria-roledescription",L("editor.scroller.aria-roledescription","editor")),this.renderer.scroller.classList.add(this.renderer.keyboardFocusClassName),this.renderer.scroller.setAttribute("aria-label",L("editor.scroller.aria-label","Editor content, press Enter to start editing, press Escape to exit")),this.renderer.scroller.addEventListener("keyup",E.bind(this)),this.commands.addCommand(b),this.renderer.$gutter.setAttribute("tabindex",0),this.renderer.$gutter.setAttribute("aria-hidden",!1),this.renderer.$gutter.setAttribute("role","group"),this.renderer.$gutter.setAttribute("aria-roledescription",L("editor.gutter.aria-roledescription","editor")),this.renderer.$gutter.setAttribute("aria-label",L("editor.gutter.aria-label","Editor gutter, press Enter to interact with controls using arrow keys, press Escape to exit")),this.renderer.$gutter.classList.add(this.renderer.keyboardFocusClassName),this.renderer.content.setAttribute("aria-hidden",!0),_||(_=new f(this)),_.addListener(),this.textInput.setAriaOptions({setLabel:!0})):(this.renderer.enableKeyboardAccessibility=!1,this.textInput.getElement().setAttribute("tabindex",0),this.textInput.setNumberOfExtraLines(0),this.renderer.scroller.setAttribute("tabindex",-1),this.renderer.scroller.removeAttribute("role"),this.renderer.scroller.removeAttribute("aria-roledescription"),this.renderer.scroller.classList.remove(this.renderer.keyboardFocusClassName),this.renderer.scroller.removeAttribute("aria-label"),this.renderer.scroller.removeEventListener("keyup",E.bind(this)),this.commands.removeCommand(b),this.renderer.content.removeAttribute("aria-hidden"),this.renderer.$gutter.setAttribute("tabindex",-1),this.renderer.$gutter.setAttribute("aria-hidden",!0),this.renderer.$gutter.removeAttribute("role"),this.renderer.$gutter.removeAttribute("aria-roledescription"),this.renderer.$gutter.removeAttribute("aria-label"),this.renderer.$gutter.classList.remove(this.renderer.keyboardFocusClassName),_&&_.removeListener())},initialValue:!1},textInputAriaLabel:{set:function(y){this.$textInputAriaLabel=y},initialValue:""},enableMobileMenu:{set:function(y){this.$enableMobileMenu=y},initialValue:!0},customScrollbar:"renderer",hScrollBarAlwaysVisible:"renderer",vScrollBarAlwaysVisible:"renderer",highlightGutterLine:"renderer",animatedScroll:"renderer",showInvisibles:"renderer",showPrintMargin:"renderer",printMarginColumn:"renderer",printMargin:"renderer",fadeFoldWidgets:"renderer",showFoldWidgets:"renderer",displayIndentGuides:"renderer",highlightIndentGuides:"renderer",showGutter:"renderer",fontSize:"renderer",fontFamily:"renderer",maxLines:"renderer",minLines:"renderer",scrollPastEnd:"renderer",fixedWidthGutter:"renderer",theme:"renderer",hasCssTransforms:"renderer",maxPixelHeight:"renderer",useTextareaForIME:"renderer",useResizeObserver:"renderer",useSvgGutterIcons:"renderer",showFoldedAnnotations:"renderer",scrollSpeed:"$mouseHandler",dragDelay:"$mouseHandler",dragEnabled:"$mouseHandler",focusTimeout:"$mouseHandler",tooltipFollowsMouse:"$mouseHandler",firstLineNumber:"session",overwrite:"session",newLineMode:"session",useWorker:"session",useSoftTabs:"session",navigateWithinSoftTabs:"session",tabSize:"session",wrap:"session",indentedSoftWrap:"session",foldStyle:"session",mode:"session"});var w={getText:function(y,b){return(Math.abs(y.selection.lead.row-b)||b+1+(b<9?"\xB7":""))+""},getWidth:function(y,b,E){return Math.max(b.toString().length,(E.lastRow+1).toString().length,2)*E.characterWidth},update:function(y,b){b.renderer.$loop.schedule(b.renderer.CHANGE_GUTTER)},attach:function(y){y.renderer.$gutterLayer.$renderer=this,y.on("changeSelection",this.update),this.update(null,y)},detach:function(y){y.renderer.$gutterLayer.$renderer==this&&(y.renderer.$gutterLayer.$renderer=null),y.off("changeSelection",this.update),this.update(null,y)}};t.Editor=C});ace.define("ace/layer/lines",["require","exports","module","ace/lib/dom"],function(e,t,r){"use strict";var n=e("../lib/dom"),p=function(){function g(s,u){this.element=s,this.canvasHeight=u||5e5,this.element.style.height=this.canvasHeight*2+"px",this.cells=[],this.cellCache=[],this.$offsetCoefficient=0}return g.prototype.moveContainer=function(s){n.translate(this.element,0,-(s.firstRowScreen*s.lineHeight%this.canvasHeight)-s.offset*this.$offsetCoefficient)},g.prototype.pageChanged=function(s,u){return Math.floor(s.firstRowScreen*s.lineHeight/this.canvasHeight)!==Math.floor(u.firstRowScreen*u.lineHeight/this.canvasHeight)},g.prototype.computeLineTop=function(s,u,o){var i=u.firstRowScreen*u.lineHeight,a=Math.floor(i/this.canvasHeight),l=o.documentToScreenRow(s,0)*u.lineHeight;return l-a*this.canvasHeight},g.prototype.computeLineHeight=function(s,u,o){return u.lineHeight*o.getRowLineCount(s)},g.prototype.getLength=function(){return this.cells.length},g.prototype.get=function(s){return this.cells[s]},g.prototype.shift=function(){this.$cacheCell(this.cells.shift())},g.prototype.pop=function(){this.$cacheCell(this.cells.pop())},g.prototype.push=function(s){if(Array.isArray(s)){this.cells.push.apply(this.cells,s);for(var u=n.createFragment(this.element),o=0;o<s.length;o++)u.appendChild(s[o].element);this.element.appendChild(u)}else this.cells.push(s),this.element.appendChild(s.element)},g.prototype.unshift=function(s){if(Array.isArray(s)){this.cells.unshift.apply(this.cells,s);for(var u=n.createFragment(this.element),o=0;o<s.length;o++)u.appendChild(s[o].element);this.element.firstChild?this.element.insertBefore(u,this.element.firstChild):this.element.appendChild(u)}else this.cells.unshift(s),this.element.insertAdjacentElement("afterbegin",s.element)},g.prototype.last=function(){return this.cells.length?this.cells[this.cells.length-1]:null},g.prototype.$cacheCell=function(s){s&&(s.element.remove(),this.cellCache.push(s))},g.prototype.createCell=function(s,u,o,i){var a=this.cellCache.pop();if(!a){var l=n.createElement("div");i&&i(l),this.element.appendChild(l),a={element:l,text:"",row:s}}return a.row=s,a},g}();t.Lines=p});ace.define("ace/layer/gutter",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/layer/lines","ace/config"],function(e,t,r){"use strict";var n=e("../lib/dom"),p=e("../lib/oop"),g=e("../lib/lang"),s=e("../lib/event_emitter").EventEmitter,u=e("./lines").Lines,o=e("../config").nls,i=function(){function l(d){this.element=n.createElement("div"),this.element.className="ace_layer ace_gutter-layer",d.appendChild(this.element),this.setShowFoldWidgets(this.$showFoldWidgets),this.gutterWidth=0,this.$annotations=[],this.$updateAnnotations=this.$updateAnnotations.bind(this),this.$lines=new u(this.element),this.$lines.$offsetCoefficient=1}return l.prototype.setSession=function(d){this.session&&this.session.off("change",this.$updateAnnotations),this.session=d,d&&d.on("change",this.$updateAnnotations)},l.prototype.addGutterDecoration=function(d,c){window.console&&console.warn&&console.warn("deprecated use session.addGutterDecoration"),this.session.addGutterDecoration(d,c)},l.prototype.removeGutterDecoration=function(d,c){window.console&&console.warn&&console.warn("deprecated use session.removeGutterDecoration"),this.session.removeGutterDecoration(d,c)},l.prototype.setAnnotations=function(d){this.$annotations=[];for(var c=0;c<d.length;c++){var m=d[c],h=m.row,v=this.$annotations[h];v||(v=this.$annotations[h]={text:[],type:[],displayText:[]});var k=m.text,x=m.text,T=m.type;k=k?g.escapeHTML(k):m.html||"",x=x||m.html||"",v.text.indexOf(k)===-1&&(v.text.push(k),v.type.push(T),v.displayText.push(x));var S=m.className;S?v.className=S:T=="error"?v.className=" ace_error":T=="warning"&&v.className!=" ace_error"?v.className=" ace_warning":T=="info"&&!v.className&&(v.className=" ace_info")}},l.prototype.$updateAnnotations=function(d){if(this.$annotations.length){var c=d.start.row,m=d.end.row-c;if(m!==0)if(d.action=="remove")this.$annotations.splice(c,m+1,null);else{var h=new Array(m+1);h.unshift(c,1),this.$annotations.splice.apply(this.$annotations,h)}}},l.prototype.update=function(d){this.config=d;var c=this.session,m=d.firstRow,h=Math.min(d.lastRow+d.gutterOffset,c.getLength()-1);this.oldLastRow=h,this.config=d,this.$lines.moveContainer(d),this.$updateCursorRow();for(var v=c.getNextFoldLine(m),k=v?v.start.row:1/0,x=null,T=-1,S=m;;){if(S>k&&(S=v.end.row+1,v=c.getNextFoldLine(S,v),k=v?v.start.row:1/0),S>h){for(;this.$lines.getLength()>T+1;)this.$lines.pop();break}x=this.$lines.get(++T),x?x.row=S:(x=this.$lines.createCell(S,d,this.session,a),this.$lines.push(x)),this.$renderCell(x,d,v,S),S++}this._signal("afterRender"),this.$updateGutterWidth(d)},l.prototype.$updateGutterWidth=function(d){var c=this.session,m=c.gutterRenderer||this.$renderer,h=c.$firstLineNumber,v=this.$lines.last()?this.$lines.last().text:"";(this.$fixedWidth||c.$useWrapMode)&&(v=c.getLength()+h-1);var k=m?m.getWidth(c,v,d):v.toString().length*d.characterWidth,x=this.$padding||this.$computePadding();k+=x.left+x.right,k!==this.gutterWidth&&!isNaN(k)&&(this.gutterWidth=k,this.element.parentNode.style.width=this.element.style.width=Math.ceil(this.gutterWidth)+"px",this._signal("changeGutterWidth",k))},l.prototype.$updateCursorRow=function(){if(this.$highlightGutterLine){var d=this.session.selection.getCursor();this.$cursorRow!==d.row&&(this.$cursorRow=d.row)}},l.prototype.updateLineHighlight=function(){if(this.$highlightGutterLine){var d=this.session.selection.cursor.row;if(this.$cursorRow=d,!(this.$cursorCell&&this.$cursorCell.row==d)){this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ",""));var c=this.$lines.cells;this.$cursorCell=null;for(var m=0;m<c.length;m++){var h=c[m];if(h.row>=this.$cursorRow){if(h.row>this.$cursorRow){var v=this.session.getFoldLine(this.$cursorRow);if(m>0&&v&&v.start.row==c[m-1].row)h=c[m-1];else break}h.element.className="ace_gutter-active-line "+h.element.className,this.$cursorCell=h;break}}}}},l.prototype.scrollLines=function(d){var c=this.config;if(this.config=d,this.$updateCursorRow(),this.$lines.pageChanged(c,d))return this.update(d);this.$lines.moveContainer(d);var m=Math.min(d.lastRow+d.gutterOffset,this.session.getLength()-1),h=this.oldLastRow;if(this.oldLastRow=m,!c||h<d.firstRow)return this.update(d);if(m<c.firstRow)return this.update(d);if(c.firstRow<d.firstRow)for(var v=this.session.getFoldedRowCount(c.firstRow,d.firstRow-1);v>0;v--)this.$lines.shift();if(h>m)for(var v=this.session.getFoldedRowCount(m+1,h);v>0;v--)this.$lines.pop();d.firstRow<c.firstRow&&this.$lines.unshift(this.$renderLines(d,d.firstRow,c.firstRow-1)),m>h&&this.$lines.push(this.$renderLines(d,h+1,m)),this.updateLineHighlight(),this._signal("afterRender"),this.$updateGutterWidth(d)},l.prototype.$renderLines=function(d,c,m){for(var h=[],v=c,k=this.session.getNextFoldLine(v),x=k?k.start.row:1/0;v>x&&(v=k.end.row+1,k=this.session.getNextFoldLine(v,k),x=k?k.start.row:1/0),!(v>m);){var T=this.$lines.createCell(v,d,this.session,a);this.$renderCell(T,d,k,v),h.push(T),v++}return h},l.prototype.$renderCell=function(d,c,m,h){var v=d.element,k=this.session,x=v.childNodes[0],T=v.childNodes[1],S=v.childNodes[2],f=S.firstChild,L=k.$firstLineNumber,$=k.$breakpoints,A=k.$decorations,C=k.gutterRenderer||this.$renderer,w=this.$showFoldWidgets&&k.foldWidgets,y=m?m.start.row:Number.MAX_VALUE,b=c.lineHeight+"px",E=this.$useSvgGutterIcons?"ace_gutter-cell_svg-icons ":"ace_gutter-cell ",_=this.$useSvgGutterIcons?"ace_icon_svg":"ace_icon",R=(C?C.getText(k,h):h+L).toString();if(this.$highlightGutterLine&&(h==this.$cursorRow||m&&h<this.$cursorRow&&h>=y&&this.$cursorRow<=m.end.row)&&(E+="ace_gutter-active-line ",this.$cursorCell!=d&&(this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ","")),this.$cursorCell=d)),$[h]&&(E+=$[h]),A[h]&&(E+=A[h]),this.$annotations[h]&&h!==y&&(E+=this.$annotations[h].className),w){var M=w[h];M==null&&(M=w[h]=k.getFoldWidget(h))}if(M){var I="ace_fold-widget ace_"+M,P=M=="start"&&h==y&&h<m.end.row;if(P){I+=" ace_closed";for(var O="",F=!1,D=h+1;D<=m.end.row;D++)if(this.$annotations[D]){if(this.$annotations[D].className===" ace_error"){F=!0,O=" ace_error_fold";break}if(this.$annotations[D].className===" ace_warning"){F=!0,O=" ace_warning_fold";continue}}E+=O}else I+=" ace_open";T.className!=I&&(T.className=I),n.setStyle(T.style,"height",b),n.setStyle(T.style,"display","inline-block"),T.setAttribute("role","button"),T.setAttribute("tabindex","-1");var z=k.getFoldWidgetRange(h);z?T.setAttribute("aria-label",o("gutter.code-folding.range.aria-label","Toggle code folding, rows $0 through $1",[z.start.row+1,z.end.row+1])):m?T.setAttribute("aria-label",o("gutter.code-folding.closed.aria-label","Toggle code folding, rows $0 through $1",[m.start.row+1,m.end.row+1])):T.setAttribute("aria-label",o("gutter.code-folding.open.aria-label","Toggle code folding, row $0",[h+1])),P?(T.setAttribute("aria-expanded","false"),T.setAttribute("title",o("gutter.code-folding.closed.title","Unfold code"))):(T.setAttribute("aria-expanded","true"),T.setAttribute("title",o("gutter.code-folding.open.title","Fold code")))}else T&&(n.setStyle(T.style,"display","none"),T.setAttribute("tabindex","0"),T.removeAttribute("role"),T.removeAttribute("aria-label"));if(F&&this.$showFoldedAnnotations){S.className="ace_gutter_annotation",f.className=_,f.className+=O,n.setStyle(f.style,"height",b),n.setStyle(S.style,"display","block"),n.setStyle(S.style,"height",b);var N;switch(O){case" ace_error_fold":N=o("gutter.annotation.aria-label.error","Read annotations row $0",[R]);break;case" ace_warning_fold":N=o("gutter.annotation.aria-label.warning","Read annotations row $0",[R]);break}S.setAttribute("aria-label",N),S.setAttribute("tabindex","-1"),S.setAttribute("role","button")}else if(this.$annotations[h]){S.className="ace_gutter_annotation",f.className=_,this.$useSvgGutterIcons?f.className+=this.$annotations[h].className:v.classList.add(this.$annotations[h].className.replace(" ","")),n.setStyle(f.style,"height",b),n.setStyle(S.style,"display","block"),n.setStyle(S.style,"height",b);var N;switch(this.$annotations[h].className){case" ace_error":N=o("gutter.annotation.aria-label.error","Read annotations row $0",[R]);break;case" ace_warning":N=o("gutter.annotation.aria-label.warning","Read annotations row $0",[R]);break;case" ace_info":N=o("gutter.annotation.aria-label.info","Read annotations row $0",[R]);break}S.setAttribute("aria-label",N),S.setAttribute("tabindex","-1"),S.setAttribute("role","button")}else n.setStyle(S.style,"display","none"),S.removeAttribute("aria-label"),S.removeAttribute("role"),S.setAttribute("tabindex","0");return R!==x.data&&(x.data=R),v.className!=E&&(v.className=E),n.setStyle(d.element.style,"height",this.$lines.computeLineHeight(h,c,k)+"px"),n.setStyle(d.element.style,"top",this.$lines.computeLineTop(h,c,k)+"px"),d.text=R,S.style.display==="none"&&T.style.display==="none"?d.element.setAttribute("aria-hidden",!0):d.element.setAttribute("aria-hidden",!1),d},l.prototype.setHighlightGutterLine=function(d){this.$highlightGutterLine=d},l.prototype.setShowLineNumbers=function(d){this.$renderer=!d&&{getWidth:function(){return 0},getText:function(){return""}}},l.prototype.getShowLineNumbers=function(){return this.$showLineNumbers},l.prototype.setShowFoldWidgets=function(d){d?n.addCssClass(this.element,"ace_folding-enabled"):n.removeCssClass(this.element,"ace_folding-enabled"),this.$showFoldWidgets=d,this.$padding=null},l.prototype.getShowFoldWidgets=function(){return this.$showFoldWidgets},l.prototype.$computePadding=function(){if(!this.element.firstChild)return{left:0,right:0};var d=n.computedStyle(this.element.firstChild);return this.$padding={},this.$padding.left=(parseInt(d.borderLeftWidth)||0)+(parseInt(d.paddingLeft)||0)+1,this.$padding.right=(parseInt(d.borderRightWidth)||0)+(parseInt(d.paddingRight)||0),this.$padding},l.prototype.getRegion=function(d){var c=this.$padding||this.$computePadding(),m=this.element.getBoundingClientRect();if(d.x<c.left+m.left)return"markers";if(this.$showFoldWidgets&&d.x>m.right-c.right)return"foldWidgets"},l}();i.prototype.$fixedWidth=!1,i.prototype.$highlightGutterLine=!0,i.prototype.$renderer="",i.prototype.$showLineNumbers=!0,i.prototype.$showFoldWidgets=!0,p.implement(i.prototype,s);function a(l){var d=document.createTextNode("");l.appendChild(d);var c=n.createElement("span");l.appendChild(c);var m=n.createElement("span");l.appendChild(m);var h=n.createElement("span");return m.appendChild(h),l}t.Gutter=i});ace.define("ace/layer/marker",["require","exports","module","ace/range","ace/lib/dom"],function(e,t,r){"use strict";var n=e("../range").Range,p=e("../lib/dom"),g=function(){function u(o){this.element=p.createElement("div"),this.element.className="ace_layer ace_marker-layer",o.appendChild(this.element)}return u.prototype.setPadding=function(o){this.$padding=o},u.prototype.setSession=function(o){this.session=o},u.prototype.setMarkers=function(o){this.markers=o},u.prototype.elt=function(o,i){var a=this.i!=-1&&this.element.childNodes[this.i];a?this.i++:(a=document.createElement("div"),this.element.appendChild(a),this.i=-1),a.style.cssText=i,a.className=o},u.prototype.update=function(o){if(o){this.config=o,this.i=0;var i;for(var a in this.markers){var l=this.markers[a];if(!l.range){l.update(i,this,this.session,o);continue}var d=l.range.clipRows(o.firstRow,o.lastRow);if(!d.isEmpty())if(d=d.toScreenRange(this.session),l.renderer){var c=this.$getTop(d.start.row,o),m=this.$padding+d.start.column*o.characterWidth;l.renderer(i,d,m,c,o)}else l.type=="fullLine"?this.drawFullLineMarker(i,d,l.clazz,o):l.type=="screenLine"?this.drawScreenLineMarker(i,d,l.clazz,o):d.isMultiLine()?l.type=="text"?this.drawTextMarker(i,d,l.clazz,o):this.drawMultiLineMarker(i,d,l.clazz,o):this.drawSingleLineMarker(i,d,l.clazz+" ace_start ace_br15",o)}if(this.i!=-1)for(;this.i<this.element.childElementCount;)this.element.removeChild(this.element.lastChild)}},u.prototype.$getTop=function(o,i){return(o-i.firstRowScreen)*i.lineHeight},u.prototype.drawTextMarker=function(o,i,a,l,d){for(var c=this.session,m=i.start.row,h=i.end.row,v=m,k=0,x=0,T=c.getScreenLastRowColumn(v),S=new n(v,i.start.column,v,x);v<=h;v++)S.start.row=S.end.row=v,S.start.column=v==m?i.start.column:c.getRowWrapIndent(v),S.end.column=T,k=x,x=T,T=v+1<h?c.getScreenLastRowColumn(v+1):v==h?0:i.end.column,this.drawSingleLineMarker(o,S,a+(v==m?" ace_start":"")+" ace_br"+s(v==m||v==m+1&&i.start.column,k<x,x>T,v==h),l,v==h?0:1,d)},u.prototype.drawMultiLineMarker=function(o,i,a,l,d){var c=this.$padding,m=l.lineHeight,h=this.$getTop(i.start.row,l),v=c+i.start.column*l.characterWidth;if(d=d||"",this.session.$bidiHandler.isBidiRow(i.start.row)){var k=i.clone();k.end.row=k.start.row,k.end.column=this.session.getLine(k.start.row).length,this.drawBidiSingleLineMarker(o,k,a+" ace_br1 ace_start",l,null,d)}else this.elt(a+" ace_br1 ace_start","height:"+m+"px;right:0;top:"+h+"px;left:"+v+"px;"+(d||""));if(this.session.$bidiHandler.isBidiRow(i.end.row)){var k=i.clone();k.start.row=k.end.row,k.start.column=0,this.drawBidiSingleLineMarker(o,k,a+" ace_br12",l,null,d)}else{h=this.$getTop(i.end.row,l);var x=i.end.column*l.characterWidth;this.elt(a+" ace_br12","height:"+m+"px;width:"+x+"px;top:"+h+"px;left:"+c+"px;"+(d||""))}if(m=(i.end.row-i.start.row-1)*l.lineHeight,!(m<=0)){h=this.$getTop(i.start.row+1,l);var T=(i.start.column?1:0)|(i.end.column?0:8);this.elt(a+(T?" ace_br"+T:""),"height:"+m+"px;right:0;top:"+h+"px;left:"+c+"px;"+(d||""))}},u.prototype.drawSingleLineMarker=function(o,i,a,l,d,c){if(this.session.$bidiHandler.isBidiRow(i.start.row))return this.drawBidiSingleLineMarker(o,i,a,l,d,c);var m=l.lineHeight,h=(i.end.column+(d||0)-i.start.column)*l.characterWidth,v=this.$getTop(i.start.row,l),k=this.$padding+i.start.column*l.characterWidth;this.elt(a,"height:"+m+"px;width:"+h+"px;top:"+v+"px;left:"+k+"px;"+(c||""))},u.prototype.drawBidiSingleLineMarker=function(o,i,a,l,d,c){var m=l.lineHeight,h=this.$getTop(i.start.row,l),v=this.$padding,k=this.session.$bidiHandler.getSelections(i.start.column,i.end.column);k.forEach(function(x){this.elt(a,"height:"+m+"px;width:"+(x.width+(d||0))+"px;top:"+h+"px;left:"+(v+x.left)+"px;"+(c||""))},this)},u.prototype.drawFullLineMarker=function(o,i,a,l,d){var c=this.$getTop(i.start.row,l),m=l.lineHeight;i.start.row!=i.end.row&&(m+=this.$getTop(i.end.row,l)-c),this.elt(a,"height:"+m+"px;top:"+c+"px;left:0;right:0;"+(d||""))},u.prototype.drawScreenLineMarker=function(o,i,a,l,d){var c=this.$getTop(i.start.row,l),m=l.lineHeight;this.elt(a,"height:"+m+"px;top:"+c+"px;left:0;right:0;"+(d||""))},u}();g.prototype.$padding=0;function s(u,o,i,a){return(u?1:0)|(o?2:0)|(i?4:0)|(a?8:0)}t.Marker=g});ace.define("ace/layer/text_util",["require","exports","module"],function(e,t,r){var n=new Set(["text","rparen","lparen"]);t.isTextToken=function(p){return n.has(p)}});ace.define("ace/layer/text",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/layer/lines","ace/lib/event_emitter","ace/config","ace/layer/text_util"],function(e,t,r){"use strict";var n=e("../lib/oop"),p=e("../lib/dom"),g=e("../lib/lang"),s=e("./lines").Lines,u=e("../lib/event_emitter").EventEmitter,o=e("../config").nls,i=e("./text_util").isTextToken,a=function(){function l(d){this.dom=p,this.element=this.dom.createElement("div"),this.element.className="ace_layer ace_text-layer",d.appendChild(this.element),this.$updateEolChar=this.$updateEolChar.bind(this),this.$lines=new s(this.element)}return l.prototype.$updateEolChar=function(){var d=this.session.doc,c=d.getNewLineCharacter()==`
`&&d.getNewLineMode()!="windows",m=c?this.EOL_CHAR_LF:this.EOL_CHAR_CRLF;if(this.EOL_CHAR!=m)return this.EOL_CHAR=m,!0},l.prototype.setPadding=function(d){this.$padding=d,this.element.style.margin="0 "+d+"px"},l.prototype.getLineHeight=function(){return this.$fontMetrics.$characterSize.height||0},l.prototype.getCharacterWidth=function(){return this.$fontMetrics.$characterSize.width||0},l.prototype.$setFontMetrics=function(d){this.$fontMetrics=d,this.$fontMetrics.on("changeCharacterSize",function(c){this._signal("changeCharacterSize",c)}.bind(this)),this.$pollSizeChanges()},l.prototype.checkForSizeChanges=function(){this.$fontMetrics.checkForSizeChanges()},l.prototype.$pollSizeChanges=function(){return this.$pollSizeChangesTimer=this.$fontMetrics.$pollSizeChanges()},l.prototype.setSession=function(d){this.session=d,d&&this.$computeTabString()},l.prototype.setShowInvisibles=function(d){return this.showInvisibles==d?!1:(this.showInvisibles=d,typeof d=="string"?(this.showSpaces=/tab/i.test(d),this.showTabs=/space/i.test(d),this.showEOL=/eol/i.test(d)):this.showSpaces=this.showTabs=this.showEOL=d,this.$computeTabString(),!0)},l.prototype.setDisplayIndentGuides=function(d){return this.displayIndentGuides==d?!1:(this.displayIndentGuides=d,this.$computeTabString(),!0)},l.prototype.setHighlightIndentGuides=function(d){return this.$highlightIndentGuides===d?!1:(this.$highlightIndentGuides=d,d)},l.prototype.$computeTabString=function(){var d=this.session.getTabSize();this.tabSize=d;for(var c=this.$tabStrings=[0],m=1;m<d+1;m++)if(this.showTabs){var h=this.dom.createElement("span");h.className="ace_invisible ace_invisible_tab",h.textContent=g.stringRepeat(this.TAB_CHAR,m),c.push(h)}else c.push(this.dom.createTextNode(g.stringRepeat(" ",m),this.element));if(this.displayIndentGuides){this.$indentGuideRe=/\s\S| \t|\t |\s$/;var v="ace_indent-guide",k=this.showSpaces?" ace_invisible ace_invisible_space":"",x=this.showSpaces?g.stringRepeat(this.SPACE_CHAR,this.tabSize):g.stringRepeat(" ",this.tabSize),T=this.showTabs?" ace_invisible ace_invisible_tab":"",S=this.showTabs?g.stringRepeat(this.TAB_CHAR,this.tabSize):x,h=this.dom.createElement("span");h.className=v+k,h.textContent=x,this.$tabStrings[" "]=h;var h=this.dom.createElement("span");h.className=v+T,h.textContent=S,this.$tabStrings["	"]=h}},l.prototype.updateLines=function(d,c,m){if(this.config.lastRow!=d.lastRow||this.config.firstRow!=d.firstRow)return this.update(d);this.config=d;for(var h=Math.max(c,d.firstRow),v=Math.min(m,d.lastRow),k=this.element.childNodes,x=0,S=d.firstRow;S<h;S++){var f=this.session.getFoldLine(S);if(f)if(f.containsRow(h)){h=f.start.row;break}else S=f.end.row;x++}for(var T=!1,S=h,f=this.session.getNextFoldLine(S),L=f?f.start.row:1/0;S>L&&(S=f.end.row+1,f=this.session.getNextFoldLine(S,f),L=f?f.start.row:1/0),!(S>v);){var $=k[x++];if($){this.dom.removeChildren($),this.$renderLine($,S,S==L?f:!1),T&&($.style.top=this.$lines.computeLineTop(S,d,this.session)+"px");var A=d.lineHeight*this.session.getRowLength(S)+"px";$.style.height!=A&&(T=!0,$.style.height=A)}S++}if(T)for(;x<this.$lines.cells.length;){var C=this.$lines.cells[x++];C.element.style.top=this.$lines.computeLineTop(C.row,d,this.session)+"px"}},l.prototype.scrollLines=function(d){var c=this.config;if(this.config=d,this.$lines.pageChanged(c,d))return this.update(d);this.$lines.moveContainer(d);var m=d.lastRow,h=c?c.lastRow:-1;if(!c||h<d.firstRow)return this.update(d);if(m<c.firstRow)return this.update(d);if(!c||c.lastRow<d.firstRow)return this.update(d);if(d.lastRow<c.firstRow)return this.update(d);if(c.firstRow<d.firstRow)for(var v=this.session.getFoldedRowCount(c.firstRow,d.firstRow-1);v>0;v--)this.$lines.shift();if(c.lastRow>d.lastRow)for(var v=this.session.getFoldedRowCount(d.lastRow+1,c.lastRow);v>0;v--)this.$lines.pop();d.firstRow<c.firstRow&&this.$lines.unshift(this.$renderLinesFragment(d,d.firstRow,c.firstRow-1)),d.lastRow>c.lastRow&&this.$lines.push(this.$renderLinesFragment(d,c.lastRow+1,d.lastRow)),this.$highlightIndentGuide()},l.prototype.$renderLinesFragment=function(d,c,m){for(var h=[],v=c,k=this.session.getNextFoldLine(v),x=k?k.start.row:1/0;v>x&&(v=k.end.row+1,k=this.session.getNextFoldLine(v,k),x=k?k.start.row:1/0),!(v>m);){var T=this.$lines.createCell(v,d,this.session),S=T.element;this.dom.removeChildren(S),p.setStyle(S.style,"height",this.$lines.computeLineHeight(v,d,this.session)+"px"),p.setStyle(S.style,"top",this.$lines.computeLineTop(v,d,this.session)+"px"),this.$renderLine(S,v,v==x?k:!1),this.$useLineGroups()?S.className="ace_line_group":S.className="ace_line",h.push(T),v++}return h},l.prototype.update=function(d){this.$lines.moveContainer(d),this.config=d;for(var c=d.firstRow,m=d.lastRow,h=this.$lines;h.getLength();)h.pop();h.push(this.$renderLinesFragment(d,c,m))},l.prototype.$renderToken=function(d,c,m,h){for(var v=this,k=/(\t)|( +)|([\x00-\x1f\x80-\xa0\xad\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\uFEFF\uFFF9-\uFFFC\u2066\u2067\u2068\u202A\u202B\u202D\u202E\u202C\u2069]+)|(\u3000)|([\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3001-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]|[\uD800-\uDBFF][\uDC00-\uDFFF])/g,x=this.dom.createFragment(this.element),T,S=0;T=k.exec(h);){var f=T[1],L=T[2],$=T[3],A=T[4],C=T[5];if(!(!v.showSpaces&&L)){var w=S!=T.index?h.slice(S,T.index):"";if(S=T.index+T[0].length,w&&x.appendChild(this.dom.createTextNode(w,this.element)),f){var y=v.session.getScreenTabSize(c+T.index);x.appendChild(v.$tabStrings[y].cloneNode(!0)),c+=y-1}else if(L)if(v.showSpaces){var b=this.dom.createElement("span");b.className="ace_invisible ace_invisible_space",b.textContent=g.stringRepeat(v.SPACE_CHAR,L.length),x.appendChild(b)}else x.appendChild(this.dom.createTextNode(L,this.element));else if($){var b=this.dom.createElement("span");b.className="ace_invisible ace_invisible_space ace_invalid",b.textContent=g.stringRepeat(v.SPACE_CHAR,$.length),x.appendChild(b)}else if(A){c+=1;var b=this.dom.createElement("span");b.style.width=v.config.characterWidth*2+"px",b.className=v.showSpaces?"ace_cjk ace_invisible ace_invisible_space":"ace_cjk",b.textContent=v.showSpaces?v.SPACE_CHAR:A,x.appendChild(b)}else if(C){c+=1;var b=this.dom.createElement("span");b.style.width=v.config.characterWidth*2+"px",b.className="ace_cjk",b.textContent=C,x.appendChild(b)}}}if(x.appendChild(this.dom.createTextNode(S?h.slice(S):h,this.element)),i(m.type))d.appendChild(x);else{var E="ace_"+m.type.replace(/\./g," ace_"),b=this.dom.createElement("span");m.type=="fold"&&(b.style.width=m.value.length*this.config.characterWidth+"px",b.setAttribute("title",o("inline-fold.closed.title","Unfold code"))),b.className=E,b.appendChild(x),d.appendChild(b)}return c+h.length},l.prototype.renderIndentGuide=function(d,c,m){var h=c.search(this.$indentGuideRe);if(h<=0||h>=m)return c;if(c[0]==" "){h-=h%this.tabSize;for(var v=h/this.tabSize,k=0;k<v;k++)d.appendChild(this.$tabStrings[" "].cloneNode(!0));return this.$highlightIndentGuide(),c.substr(h)}else if(c[0]=="	"){for(var k=0;k<h;k++)d.appendChild(this.$tabStrings["	"].cloneNode(!0));return this.$highlightIndentGuide(),c.substr(h)}return this.$highlightIndentGuide(),c},l.prototype.$highlightIndentGuide=function(){if(!(!this.$highlightIndentGuides||!this.displayIndentGuides)){this.$highlightIndentGuideMarker={indentLevel:void 0,start:void 0,end:void 0,dir:void 0};var d=this.session.doc.$lines;if(d){var c=this.session.selection.getCursor(),m=/^\s*/.exec(this.session.doc.getLine(c.row))[0].length,h=Math.floor(m/this.tabSize);this.$highlightIndentGuideMarker={indentLevel:h,start:c.row};var v=this.session.$bracketHighlight;if(v){for(var k=this.session.$bracketHighlight.ranges,x=0;x<k.length;x++)if(c.row!==k[x].start.row){this.$highlightIndentGuideMarker.end=k[x].start.row,c.row>k[x].start.row?this.$highlightIndentGuideMarker.dir=-1:this.$highlightIndentGuideMarker.dir=1;break}}if(!this.$highlightIndentGuideMarker.end&&d[c.row]!==""&&c.column===d[c.row].length){this.$highlightIndentGuideMarker.dir=1;for(var x=c.row+1;x<d.length;x++){var T=d[x],S=/^\s*/.exec(T)[0].length;if(T!==""&&(this.$highlightIndentGuideMarker.end=x,S<=m))break}}this.$renderHighlightIndentGuide()}}},l.prototype.$clearActiveIndentGuide=function(){for(var d=this.$lines.cells,c=0;c<d.length;c++){var m=d[c],h=m.element.childNodes;if(h.length>0){for(var v=0;v<h.length;v++)if(h[v].classList&&h[v].classList.contains("ace_indent-guide-active")){h[v].classList.remove("ace_indent-guide-active");break}}}},l.prototype.$setIndentGuideActive=function(d,c){var m=this.session.doc.getLine(d.row);if(m!==""){var h=d.element.childNodes;if(h){var v=h[c-1];v&&v.classList&&v.classList.contains("ace_indent-guide")&&v.classList.add("ace_indent-guide-active")}}},l.prototype.$renderHighlightIndentGuide=function(){if(this.$lines){var d=this.$lines.cells;this.$clearActiveIndentGuide();var c=this.$highlightIndentGuideMarker.indentLevel;if(c!==0)if(this.$highlightIndentGuideMarker.dir===1)for(var m=0;m<d.length;m++){var h=d[m];if(this.$highlightIndentGuideMarker.end&&h.row>=this.$highlightIndentGuideMarker.start+1){if(h.row>=this.$highlightIndentGuideMarker.end)break;this.$setIndentGuideActive(h,c)}}else for(var m=d.length-1;m>=0;m--){var h=d[m];if(this.$highlightIndentGuideMarker.end&&h.row<this.$highlightIndentGuideMarker.start){if(h.row<=this.$highlightIndentGuideMarker.end)break;this.$setIndentGuideActive(h,c)}}}},l.prototype.$createLineElement=function(d){var c=this.dom.createElement("div");return c.className="ace_line",c.style.height=this.config.lineHeight+"px",c},l.prototype.$renderWrappedLine=function(d,c,m){var h=0,v=0,k=m[0],x=0,T=this.$createLineElement();d.appendChild(T);for(var S=0;S<c.length;S++){var f=c[S],L=f.value;if(S==0&&this.displayIndentGuides){if(h=L.length,L=this.renderIndentGuide(T,L,k),!L)continue;h-=L.length}if(h+L.length<k)x=this.$renderToken(T,x,f,L),h+=L.length;else{for(;h+L.length>=k;)x=this.$renderToken(T,x,f,L.substring(0,k-h)),L=L.substring(k-h),h=k,T=this.$createLineElement(),d.appendChild(T),T.appendChild(this.dom.createTextNode(g.stringRepeat("\xA0",m.indent),this.element)),v++,x=0,k=m[v]||Number.MAX_VALUE;L.length!=0&&(h+=L.length,x=this.$renderToken(T,x,f,L))}}m[m.length-1]>this.MAX_LINE_LENGTH&&this.$renderOverflowMessage(T,x,null,"",!0)},l.prototype.$renderSimpleLine=function(d,c){for(var m=0,h=0;h<c.length;h++){var v=c[h],k=v.value;if(!(h==0&&this.displayIndentGuides&&(k=this.renderIndentGuide(d,k),!k))){if(m+k.length>this.MAX_LINE_LENGTH)return this.$renderOverflowMessage(d,m,v,k);m=this.$renderToken(d,m,v,k)}}},l.prototype.$renderOverflowMessage=function(d,c,m,h,v){m&&this.$renderToken(d,c,m,h.slice(0,this.MAX_LINE_LENGTH-c));var k=this.dom.createElement("span");k.className="ace_inline_button ace_keyword ace_toggle_wrap",k.textContent=v?"<hide>":"<click to see more...>",d.appendChild(k)},l.prototype.$renderLine=function(d,c,m){if(!m&&m!=!1&&(m=this.session.getFoldLine(c)),m)var h=this.$getFoldLineTokens(c,m);else var h=this.session.getTokens(c);var v=d;if(h.length){var k=this.session.getRowSplitData(c);if(k&&k.length){this.$renderWrappedLine(d,h,k);var v=d.lastChild}else{var v=d;this.$useLineGroups()&&(v=this.$createLineElement(),d.appendChild(v)),this.$renderSimpleLine(v,h)}}else this.$useLineGroups()&&(v=this.$createLineElement(),d.appendChild(v));if(this.showEOL&&v){m&&(c=m.end.row);var x=this.dom.createElement("span");x.className="ace_invisible ace_invisible_eol",x.textContent=c==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,v.appendChild(x)}},l.prototype.$getFoldLineTokens=function(d,c){var m=this.session,h=[];function v(x,T,S){for(var f=0,L=0;L+x[f].value.length<T;)if(L+=x[f].value.length,f++,f==x.length)return;if(L!=T){var $=x[f].value.substring(T-L);$.length>S-T&&($=$.substring(0,S-T)),h.push({type:x[f].type,value:$}),L=T+$.length,f+=1}for(;L<S&&f<x.length;){var $=x[f].value;$.length+L>S?h.push({type:x[f].type,value:$.substring(0,S-L)}):h.push(x[f]),L+=$.length,f+=1}}var k=m.getTokens(d);return c.walk(function(x,T,S,f,L){x!=null?h.push({type:"fold",value:x}):(L&&(k=m.getTokens(T)),k.length&&v(k,f,S))},c.end.row,this.session.getLine(c.end.row).length),h},l.prototype.$useLineGroups=function(){return this.session.getUseWrapMode()},l}();a.prototype.EOF_CHAR="\xB6",a.prototype.EOL_CHAR_LF="\xAC",a.prototype.EOL_CHAR_CRLF="\xA4",a.prototype.EOL_CHAR=a.prototype.EOL_CHAR_LF,a.prototype.TAB_CHAR="\u2014",a.prototype.SPACE_CHAR="\xB7",a.prototype.$padding=0,a.prototype.MAX_LINE_LENGTH=1e4,a.prototype.showInvisibles=!1,a.prototype.showSpaces=!1,a.prototype.showTabs=!1,a.prototype.showEOL=!1,a.prototype.displayIndentGuides=!0,a.prototype.$highlightIndentGuides=!0,a.prototype.$tabStrings=[],a.prototype.destroy={},a.prototype.onChangeTabSize=a.prototype.$computeTabString,n.implement(a.prototype,u),t.Text=a});ace.define("ace/layer/cursor",["require","exports","module","ace/lib/dom"],function(e,t,r){"use strict";var n=e("../lib/dom"),p=function(){function g(s){this.element=n.createElement("div"),this.element.className="ace_layer ace_cursor-layer",s.appendChild(this.element),this.isVisible=!1,this.isBlinking=!0,this.blinkInterval=1e3,this.smoothBlinking=!1,this.cursors=[],this.cursor=this.addCursor(),n.addCssClass(this.element,"ace_hidden-cursors"),this.$updateCursors=this.$updateOpacity.bind(this)}return g.prototype.$updateOpacity=function(s){for(var u=this.cursors,o=u.length;o--;)n.setStyle(u[o].style,"opacity",s?"":"0")},g.prototype.$startCssAnimation=function(){for(var s=this.cursors,u=s.length;u--;)s[u].style.animationDuration=this.blinkInterval+"ms";this.$isAnimating=!0,setTimeout(function(){this.$isAnimating&&n.addCssClass(this.element,"ace_animate-blinking")}.bind(this))},g.prototype.$stopCssAnimation=function(){this.$isAnimating=!1,n.removeCssClass(this.element,"ace_animate-blinking")},g.prototype.setPadding=function(s){this.$padding=s},g.prototype.setSession=function(s){this.session=s},g.prototype.setBlinking=function(s){s!=this.isBlinking&&(this.isBlinking=s,this.restartTimer())},g.prototype.setBlinkInterval=function(s){s!=this.blinkInterval&&(this.blinkInterval=s,this.restartTimer())},g.prototype.setSmoothBlinking=function(s){s!=this.smoothBlinking&&(this.smoothBlinking=s,n.setCssClass(this.element,"ace_smooth-blinking",s),this.$updateCursors(!0),this.restartTimer())},g.prototype.addCursor=function(){var s=n.createElement("div");return s.className="ace_cursor",this.element.appendChild(s),this.cursors.push(s),s},g.prototype.removeCursor=function(){if(this.cursors.length>1){var s=this.cursors.pop();return s.parentNode.removeChild(s),s}},g.prototype.hideCursor=function(){this.isVisible=!1,n.addCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},g.prototype.showCursor=function(){this.isVisible=!0,n.removeCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},g.prototype.restartTimer=function(){var s=this.$updateCursors;if(clearInterval(this.intervalId),clearTimeout(this.timeoutId),this.$stopCssAnimation(),this.smoothBlinking&&(this.$isSmoothBlinking=!1,n.removeCssClass(this.element,"ace_smooth-blinking")),s(!0),!this.isBlinking||!this.blinkInterval||!this.isVisible){this.$stopCssAnimation();return}if(this.smoothBlinking&&(this.$isSmoothBlinking=!0,setTimeout(function(){this.$isSmoothBlinking&&n.addCssClass(this.element,"ace_smooth-blinking")}.bind(this))),n.HAS_CSS_ANIMATION)this.$startCssAnimation();else{var u=function(){this.timeoutId=setTimeout(function(){s(!1)},.6*this.blinkInterval)}.bind(this);this.intervalId=setInterval(function(){s(!0),u()},this.blinkInterval),u()}},g.prototype.getPixelPosition=function(s,u){if(!this.config||!this.session)return{left:0,top:0};s||(s=this.session.selection.getCursor());var o=this.session.documentToScreenPosition(s),i=this.$padding+(this.session.$bidiHandler.isBidiRow(o.row,s.row)?this.session.$bidiHandler.getPosLeft(o.column):o.column*this.config.characterWidth),a=(o.row-(u?this.config.firstRowScreen:0))*this.config.lineHeight;return{left:i,top:a}},g.prototype.isCursorInView=function(s,u){return s.top>=0&&s.top<u.maxHeight},g.prototype.update=function(s){this.config=s;var u=this.session.$selectionMarkers,o=0,i=0;(u===void 0||u.length===0)&&(u=[{cursor:null}]);for(var o=0,a=u.length;o<a;o++){var l=this.getPixelPosition(u[o].cursor,!0);if(!((l.top>s.height+s.offset||l.top<0)&&o>1)){var d=this.cursors[i++]||this.addCursor(),c=d.style;this.drawCursor?this.drawCursor(d,l,s,u[o],this.session):this.isCursorInView(l,s)?(n.setStyle(c,"display","block"),n.translate(d,l.left,l.top),n.setStyle(c,"width",Math.round(s.characterWidth)+"px"),n.setStyle(c,"height",s.lineHeight+"px")):n.setStyle(c,"display","none")}}for(;this.cursors.length>i;)this.removeCursor();var m=this.session.getOverwrite();this.$setOverwrite(m),this.$pixelPos=l,this.restartTimer()},g.prototype.$setOverwrite=function(s){s!=this.overwrite&&(this.overwrite=s,s?n.addCssClass(this.element,"ace_overwrite-cursors"):n.removeCssClass(this.element,"ace_overwrite-cursors"))},g.prototype.destroy=function(){clearInterval(this.intervalId),clearTimeout(this.timeoutId)},g}();p.prototype.$padding=0,p.prototype.drawCursor=null,t.Cursor=p});ace.define("ace/scrollbar",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(e,t,r){"use strict";var n=this&&this.__extends||function(){var d=function(c,m){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,v){h.__proto__=v}||function(h,v){for(var k in v)Object.prototype.hasOwnProperty.call(v,k)&&(h[k]=v[k])},d(c,m)};return function(c,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");d(c,m);function h(){this.constructor=c}c.prototype=m===null?Object.create(m):(h.prototype=m.prototype,new h)}}(),p=e("./lib/oop"),g=e("./lib/dom"),s=e("./lib/event"),u=e("./lib/event_emitter").EventEmitter,o=32768,i=function(){function d(c,m){this.element=g.createElement("div"),this.element.className="ace_scrollbar ace_scrollbar"+m,this.inner=g.createElement("div"),this.inner.className="ace_scrollbar-inner",this.inner.textContent="\xA0",this.element.appendChild(this.inner),c.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,s.addListener(this.element,"scroll",this.onScroll.bind(this)),s.addListener(this.element,"mousedown",s.preventDefault)}return d.prototype.setVisible=function(c){this.element.style.display=c?"":"none",this.isVisible=c,this.coeff=1},d}();p.implement(i.prototype,u);var a=function(d){n(c,d);function c(m,h){var v=d.call(this,m,"-v")||this;return v.scrollTop=0,v.scrollHeight=0,h.$scrollbarWidth=v.width=g.scrollbarWidth(m.ownerDocument),v.inner.style.width=v.element.style.width=(v.width||15)+5+"px",v.$minWidth=0,v}return c.prototype.onScroll=function(){if(!this.skipEvent){if(this.scrollTop=this.element.scrollTop,this.coeff!=1){var m=this.element.clientHeight/this.scrollHeight;this.scrollTop=this.scrollTop*(1-m)/(this.coeff-m)}this._emit("scroll",{data:this.scrollTop})}this.skipEvent=!1},c.prototype.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},c.prototype.setHeight=function(m){this.element.style.height=m+"px"},c.prototype.setScrollHeight=function(m){this.scrollHeight=m,m>o?(this.coeff=o/m,m=o):this.coeff!=1&&(this.coeff=1),this.inner.style.height=m+"px"},c.prototype.setScrollTop=function(m){this.scrollTop!=m&&(this.skipEvent=!0,this.scrollTop=m,this.element.scrollTop=m*this.coeff)},c}(i);a.prototype.setInnerHeight=a.prototype.setScrollHeight;var l=function(d){n(c,d);function c(m,h){var v=d.call(this,m,"-h")||this;return v.scrollLeft=0,v.height=h.$scrollbarWidth,v.inner.style.height=v.element.style.height=(v.height||15)+5+"px",v}return c.prototype.onScroll=function(){this.skipEvent||(this.scrollLeft=this.element.scrollLeft,this._emit("scroll",{data:this.scrollLeft})),this.skipEvent=!1},c.prototype.getHeight=function(){return this.isVisible?this.height:0},c.prototype.setWidth=function(m){this.element.style.width=m+"px"},c.prototype.setInnerWidth=function(m){this.inner.style.width=m+"px"},c.prototype.setScrollWidth=function(m){this.inner.style.width=m+"px"},c.prototype.setScrollLeft=function(m){this.scrollLeft!=m&&(this.skipEvent=!0,this.scrollLeft=this.element.scrollLeft=m)},c}(i);t.ScrollBar=a,t.ScrollBarV=a,t.ScrollBarH=l,t.VScrollBar=a,t.HScrollBar=l});ace.define("ace/scrollbar_custom",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(e,t,r){"use strict";var n=this&&this.__extends||function(){var l=function(d,c){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,h){m.__proto__=h}||function(m,h){for(var v in h)Object.prototype.hasOwnProperty.call(h,v)&&(m[v]=h[v])},l(d,c)};return function(d,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");l(d,c);function m(){this.constructor=d}d.prototype=c===null?Object.create(c):(m.prototype=c.prototype,new m)}}(),p=e("./lib/oop"),g=e("./lib/dom"),s=e("./lib/event"),u=e("./lib/event_emitter").EventEmitter;g.importCssString(`.ace_editor>.ace_sb-v div, .ace_editor>.ace_sb-h div{
  position: absolute;
  background: rgba(128, 128, 128, 0.6);
  -moz-box-sizing: border-box;
  box-sizing: border-box;
  border: 1px solid #bbb;
  border-radius: 2px;
  z-index: 8;
}
.ace_editor>.ace_sb-v, .ace_editor>.ace_sb-h {
  position: absolute;
  z-index: 6;
  background: none;
  overflow: hidden!important;
}
.ace_editor>.ace_sb-v {
  z-index: 6;
  right: 0;
  top: 0;
  width: 12px;
}
.ace_editor>.ace_sb-v div {
  z-index: 8;
  right: 0;
  width: 100%;
}
.ace_editor>.ace_sb-h {
  bottom: 0;
  left: 0;
  height: 12px;
}
.ace_editor>.ace_sb-h div {
  bottom: 0;
  height: 100%;
}
.ace_editor>.ace_sb_grabbed {
  z-index: 8;
  background: #000;
}`,"ace_scrollbar.css",!1);var o=function(){function l(d,c){this.element=g.createElement("div"),this.element.className="ace_sb"+c,this.inner=g.createElement("div"),this.inner.className="",this.element.appendChild(this.inner),this.VScrollWidth=12,this.HScrollHeight=12,d.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,s.addMultiMouseDownListener(this.element,[500,300,300],this,"onMouseDown")}return l.prototype.setVisible=function(d){this.element.style.display=d?"":"none",this.isVisible=d,this.coeff=1},l}();p.implement(o.prototype,u);var i=function(l){n(d,l);function d(c,m){var h=l.call(this,c,"-v")||this;return h.scrollTop=0,h.scrollHeight=0,h.parent=c,h.width=h.VScrollWidth,h.renderer=m,h.inner.style.width=h.element.style.width=(h.width||15)+"px",h.$minWidth=0,h}return d.prototype.onMouseDown=function(c,m){if(c==="mousedown"&&!(s.getButton(m)!==0||m.detail===2)){if(m.target===this.inner){var h=this,v=m.clientY,k=function(A){v=A.clientY},x=function(){clearInterval(L)},T=m.clientY,S=this.thumbTop,f=function(){if(v!==void 0){var A=h.scrollTopFromThumbTop(S+v-T);A!==h.scrollTop&&h._emit("scroll",{data:A})}};s.capture(this.inner,k,x);var L=setInterval(f,20);return s.preventDefault(m)}var $=m.clientY-this.element.getBoundingClientRect().top-this.thumbHeight/2;return this._emit("scroll",{data:this.scrollTopFromThumbTop($)}),s.preventDefault(m)}},d.prototype.getHeight=function(){return this.height},d.prototype.scrollTopFromThumbTop=function(c){var m=c*(this.pageHeight-this.viewHeight)/(this.slideHeight-this.thumbHeight);return m=m>>0,m<0?m=0:m>this.pageHeight-this.viewHeight&&(m=this.pageHeight-this.viewHeight),m},d.prototype.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},d.prototype.setHeight=function(c){this.height=Math.max(0,c),this.slideHeight=this.height,this.viewHeight=this.height,this.setScrollHeight(this.pageHeight,!0)},d.prototype.setScrollHeight=function(c,m){this.pageHeight===c&&!m||(this.pageHeight=c,this.thumbHeight=this.slideHeight*this.viewHeight/this.pageHeight,this.thumbHeight>this.slideHeight&&(this.thumbHeight=this.slideHeight),this.thumbHeight<15&&(this.thumbHeight=15),this.inner.style.height=this.thumbHeight+"px",this.scrollTop>this.pageHeight-this.viewHeight&&(this.scrollTop=this.pageHeight-this.viewHeight,this.scrollTop<0&&(this.scrollTop=0),this._emit("scroll",{data:this.scrollTop})))},d.prototype.setScrollTop=function(c){this.scrollTop=c,c<0&&(c=0),this.thumbTop=c*(this.slideHeight-this.thumbHeight)/(this.pageHeight-this.viewHeight),this.inner.style.top=this.thumbTop+"px"},d}(o);i.prototype.setInnerHeight=i.prototype.setScrollHeight;var a=function(l){n(d,l);function d(c,m){var h=l.call(this,c,"-h")||this;return h.scrollLeft=0,h.scrollWidth=0,h.height=h.HScrollHeight,h.inner.style.height=h.element.style.height=(h.height||12)+"px",h.renderer=m,h}return d.prototype.onMouseDown=function(c,m){if(c==="mousedown"&&!(s.getButton(m)!==0||m.detail===2)){if(m.target===this.inner){var h=this,v=m.clientX,k=function(A){v=A.clientX},x=function(){clearInterval(L)},T=m.clientX,S=this.thumbLeft,f=function(){if(v!==void 0){var A=h.scrollLeftFromThumbLeft(S+v-T);A!==h.scrollLeft&&h._emit("scroll",{data:A})}};s.capture(this.inner,k,x);var L=setInterval(f,20);return s.preventDefault(m)}var $=m.clientX-this.element.getBoundingClientRect().left-this.thumbWidth/2;return this._emit("scroll",{data:this.scrollLeftFromThumbLeft($)}),s.preventDefault(m)}},d.prototype.getHeight=function(){return this.isVisible?this.height:0},d.prototype.scrollLeftFromThumbLeft=function(c){var m=c*(this.pageWidth-this.viewWidth)/(this.slideWidth-this.thumbWidth);return m=m>>0,m<0?m=0:m>this.pageWidth-this.viewWidth&&(m=this.pageWidth-this.viewWidth),m},d.prototype.setWidth=function(c){this.width=Math.max(0,c),this.element.style.width=this.width+"px",this.slideWidth=this.width,this.viewWidth=this.width,this.setScrollWidth(this.pageWidth,!0)},d.prototype.setScrollWidth=function(c,m){this.pageWidth===c&&!m||(this.pageWidth=c,this.thumbWidth=this.slideWidth*this.viewWidth/this.pageWidth,this.thumbWidth>this.slideWidth&&(this.thumbWidth=this.slideWidth),this.thumbWidth<15&&(this.thumbWidth=15),this.inner.style.width=this.thumbWidth+"px",this.scrollLeft>this.pageWidth-this.viewWidth&&(this.scrollLeft=this.pageWidth-this.viewWidth,this.scrollLeft<0&&(this.scrollLeft=0),this._emit("scroll",{data:this.scrollLeft})))},d.prototype.setScrollLeft=function(c){this.scrollLeft=c,c<0&&(c=0),this.thumbLeft=c*(this.slideWidth-this.thumbWidth)/(this.pageWidth-this.viewWidth),this.inner.style.left=this.thumbLeft+"px"},d}(o);a.prototype.setInnerWidth=a.prototype.setScrollWidth,t.ScrollBar=i,t.ScrollBarV=i,t.ScrollBarH=a,t.VScrollBar=i,t.HScrollBar=a});ace.define("ace/renderloop",["require","exports","module","ace/lib/event"],function(e,t,r){"use strict";var n=e("./lib/event"),p=function(){function g(s,u){this.onRender=s,this.pending=!1,this.changes=0,this.$recursionLimit=2,this.window=u||window;var o=this;this._flush=function(i){o.pending=!1;var a=o.changes;if(a&&(n.blockIdle(100),o.changes=0,o.onRender(a)),o.changes){if(o.$recursionLimit--<0)return;o.schedule()}else o.$recursionLimit=2}}return g.prototype.schedule=function(s){this.changes=this.changes|s,this.changes&&!this.pending&&(n.nextFrame(this._flush),this.pending=!0)},g.prototype.clear=function(s){var u=this.changes;return this.changes=0,u},g}();t.RenderLoop=p});ace.define("ace/layer/font_metrics",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/event","ace/lib/useragent","ace/lib/event_emitter"],function(e,t,r){var n=e("../lib/oop"),p=e("../lib/dom"),g=e("../lib/lang"),s=e("../lib/event"),u=e("../lib/useragent"),o=e("../lib/event_emitter").EventEmitter,i=512,a=typeof ResizeObserver=="function",l=200,d=function(){function c(m){this.el=p.createElement("div"),this.$setMeasureNodeStyles(this.el.style,!0),this.$main=p.createElement("div"),this.$setMeasureNodeStyles(this.$main.style),this.$measureNode=p.createElement("div"),this.$setMeasureNodeStyles(this.$measureNode.style),this.el.appendChild(this.$main),this.el.appendChild(this.$measureNode),m.appendChild(this.el),this.$measureNode.textContent=g.stringRepeat("X",i),this.$characterSize={width:0,height:0},a?this.$addObserver():this.checkForSizeChanges()}return c.prototype.$setMeasureNodeStyles=function(m,h){m.width=m.height="auto",m.left=m.top="0px",m.visibility="hidden",m.position="absolute",m.whiteSpace="pre",u.isIE<8?m["font-family"]="inherit":m.font="inherit",m.overflow=h?"hidden":"visible"},c.prototype.checkForSizeChanges=function(m){if(m===void 0&&(m=this.$measureSizes()),m&&(this.$characterSize.width!==m.width||this.$characterSize.height!==m.height)){this.$measureNode.style.fontWeight="bold";var h=this.$measureSizes();this.$measureNode.style.fontWeight="",this.$characterSize=m,this.charSizes=Object.create(null),this.allowBoldFonts=h&&h.width===m.width&&h.height===m.height,this._emit("changeCharacterSize",{data:m})}},c.prototype.$addObserver=function(){var m=this;this.$observer=new window.ResizeObserver(function(h){m.checkForSizeChanges()}),this.$observer.observe(this.$measureNode)},c.prototype.$pollSizeChanges=function(){if(this.$pollSizeChangesTimer||this.$observer)return this.$pollSizeChangesTimer;var m=this;return this.$pollSizeChangesTimer=s.onIdle(function h(){m.checkForSizeChanges(),s.onIdle(h,500)},500)},c.prototype.setPolling=function(m){m?this.$pollSizeChanges():this.$pollSizeChangesTimer&&(clearInterval(this.$pollSizeChangesTimer),this.$pollSizeChangesTimer=0)},c.prototype.$measureSizes=function(m){var h={height:(m||this.$measureNode).clientHeight,width:(m||this.$measureNode).clientWidth/i};return h.width===0||h.height===0?null:h},c.prototype.$measureCharWidth=function(m){this.$main.textContent=g.stringRepeat(m,i);var h=this.$main.getBoundingClientRect();return h.width/i},c.prototype.getCharacterWidth=function(m){var h=this.charSizes[m];return h===void 0&&(h=this.charSizes[m]=this.$measureCharWidth(m)/this.$characterSize.width),h},c.prototype.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.$observer&&this.$observer.disconnect(),this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)},c.prototype.$getZoom=function(m){return!m||!m.parentElement?1:(Number(window.getComputedStyle(m).zoom)||1)*this.$getZoom(m.parentElement)},c.prototype.$initTransformMeasureNodes=function(){var m=function(h,v){return["div",{style:"position: absolute;top:"+h+"px;left:"+v+"px;"}]};this.els=p.buildDom([m(0,0),m(l,0),m(0,l),m(l,l)],this.el)},c.prototype.transformCoordinates=function(m,h){if(m){var v=this.$getZoom(this.el);m=S(1/v,m)}function k(P,O,F){var D=P[1]*O[0]-P[0]*O[1];return[(-O[1]*F[0]+O[0]*F[1])/D,(+P[1]*F[0]-P[0]*F[1])/D]}function x(P,O){return[P[0]-O[0],P[1]-O[1]]}function T(P,O){return[P[0]+O[0],P[1]+O[1]]}function S(P,O){return[P*O[0],P*O[1]]}this.els||this.$initTransformMeasureNodes();function f(P){var O=P.getBoundingClientRect();return[O.left,O.top]}var L=f(this.els[0]),$=f(this.els[1]),A=f(this.els[2]),C=f(this.els[3]),w=k(x(C,$),x(C,A),x(T($,A),T(C,L))),y=S(1+w[0],x($,L)),b=S(1+w[1],x(A,L));if(h){var E=h,_=w[0]*E[0]/l+w[1]*E[1]/l+1,R=T(S(E[0],y),S(E[1],b));return T(S(1/_/l,R),L)}var M=x(m,L),I=k(x(y,S(w[0],M)),x(b,S(w[1],M)),M);return S(l,I)},c}();d.prototype.$characterSize={width:0,height:0},n.implement(d.prototype,o),t.FontMetrics=d});ace.define("ace/css/editor-css",["require","exports","module"],function(e,t,r){r.exports=`
.ace_br1 {border-top-left-radius    : 3px;}
.ace_br2 {border-top-right-radius   : 3px;}
.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}
.ace_br4 {border-bottom-right-radius: 3px;}
.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}
.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}
.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}
.ace_br8 {border-bottom-left-radius : 3px;}
.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}
.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}
.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}
.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}


.ace_editor {
    position: relative;
    overflow: hidden;
    padding: 0;
    font: 12px/normal 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'Source Code Pro', 'source-code-pro', monospace;
    direction: ltr;
    text-align: left;
    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
}

.ace_scroller {
    position: absolute;
    overflow: hidden;
    top: 0;
    bottom: 0;
    background-color: inherit;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    cursor: text;
}

.ace_content {
    position: absolute;
    box-sizing: border-box;
    min-width: 100%;
    contain: style size layout;
    font-variant-ligatures: no-common-ligatures;
}

.ace_keyboard-focus:focus {
    box-shadow: inset 0 0 0 2px #5E9ED6;
    outline: none;
}

.ace_dragging .ace_scroller:before{
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    content: '';
    background: rgba(250, 250, 250, 0.01);
    z-index: 1000;
}
.ace_dragging.ace_dark .ace_scroller:before{
    background: rgba(0, 0, 0, 0.01);
}

.ace_gutter {
    position: absolute;
    overflow : hidden;
    width: auto;
    top: 0;
    bottom: 0;
    left: 0;
    cursor: default;
    z-index: 4;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    contain: style size layout;
}

.ace_gutter-active-line {
    position: absolute;
    left: 0;
    right: 0;
}

.ace_scroller.ace_scroll-left:after {
    content: "";
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;
    pointer-events: none;
}

.ace_gutter-cell, .ace_gutter-cell_svg-icons {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    padding-left: 19px;
    padding-right: 6px;
    background-repeat: no-repeat;
}

.ace_gutter-cell_svg-icons .ace_gutter_annotation {
    margin-left: -14px;
    float: left;
}

.ace_gutter-cell .ace_gutter_annotation {
    margin-left: -19px;
    float: left;
}

.ace_gutter-cell.ace_error, .ace_icon.ace_error, .ace_icon.ace_error_fold {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: 2px center;
}

.ace_gutter-cell.ace_warning, .ace_icon.ace_warning, .ace_icon.ace_warning_fold {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: 2px center;
}

.ace_gutter-cell.ace_info, .ace_icon.ace_info {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");
    background-repeat: no-repeat;
    background-position: 2px center;
}
.ace_dark .ace_gutter-cell.ace_info, .ace_dark .ace_icon.ace_info {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");
}

.ace_icon_svg.ace_error {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJyZWQiIHNoYXBlLXJlbmRlcmluZz0iZ2VvbWV0cmljUHJlY2lzaW9uIj4KPGNpcmNsZSBmaWxsPSJub25lIiBjeD0iOCIgY3k9IjgiIHI9IjciIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4KPGxpbmUgeDE9IjExIiB5MT0iNSIgeDI9IjUiIHkyPSIxMSIvPgo8bGluZSB4MT0iMTEiIHkxPSIxMSIgeDI9IjUiIHkyPSI1Ii8+CjwvZz4KPC9zdmc+");
    background-color: crimson;
}
.ace_icon_svg.ace_warning {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJkYXJrb3JhbmdlIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiI+Cjxwb2x5Z29uIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGZpbGw9Im5vbmUiIHBvaW50cz0iOCAxIDE1IDE1IDEgMTUgOCAxIi8+CjxyZWN0IHg9IjgiIHk9IjEyIiB3aWR0aD0iMC4wMSIgaGVpZ2h0PSIwLjAxIi8+CjxsaW5lIHgxPSI4IiB5MT0iNiIgeDI9IjgiIHkyPSIxMCIvPgo8L2c+Cjwvc3ZnPg==");
    background-color: darkorange;
}
.ace_icon_svg.ace_info {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJibHVlIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiI+CjxjaXJjbGUgZmlsbD0ibm9uZSIgY3g9IjgiIGN5PSI4IiByPSI3IiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+Cjxwb2x5bGluZSBwb2ludHM9IjggMTEgOCA4Ii8+Cjxwb2x5bGluZSBwb2ludHM9IjkgOCA2IDgiLz4KPGxpbmUgeDE9IjEwIiB5MT0iMTEiIHgyPSI2IiB5Mj0iMTEiLz4KPHJlY3QgeD0iOCIgeT0iNSIgd2lkdGg9IjAuMDEiIGhlaWdodD0iMC4wMSIvPgo8L2c+Cjwvc3ZnPg==");
    background-color: royalblue;
}

.ace_icon_svg.ace_error_fold {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiIgZmlsbD0ibm9uZSI+CiAgPHBhdGggZD0ibSAxOC45Mjk4NTEsNy44Mjk4MDc2IGMgMC4xNDYzNTMsNi4zMzc0NjA0IC02LjMyMzE0Nyw3Ljc3Nzg0NDQgLTcuNDc3OTEyLDcuNzc3ODQ0NCAtMi4xMDcyNzI2LC0wLjEyODc1IDUuMTE3Njc4LDAuMzU2MjQ5IDUuMDUxNjk4LC03Ljg3MDA2MTggLTAuNjA0NjcyLC04LjAwMzk3MzQ5IC03LjA3NzI3MDYsLTcuNTYzMTE4OSAtNC44NTczLC03LjQzMDM5NTU2IDEuNjA2LC0wLjExNTE0MjI1IDYuODk3NDg1LDEuMjYyNTQ1OTYgNy4yODM1MTQsNy41MjI2MTI5NiB6IiBmaWxsPSJjcmltc29uIiBzdHJva2Utd2lkdGg9IjIiLz4KICA8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0ibSA4LjExNDc1NjIsMi4wNTI5ODI4IGMgMy4zNDkxNjk4LDAgNi4wNjQxMzI4LDIuNjc2ODYyNyA2LjA2NDEzMjgsNS45Nzg5NTMgMCwzLjMwMjExMjIgLTIuNzE0OTYzLDUuOTc4OTIwMiAtNi4wNjQxMzI4LDUuOTc4OTIwMiAtMy4zNDkxNDczLDAgLTYuMDY0MTc3MiwtMi42NzY4MDggLTYuMDY0MTc3MiwtNS45Nzg5MjAyIDAuMDA1MzksLTMuMjk5ODg2MSAyLjcxNzI2NTYsLTUuOTczNjQwOCA2LjA2NDE3NzIsLTUuOTc4OTUzIHogbSAwLC0xLjczNTgyNzE5IGMgLTQuMzIxNDgzNiwwIC03LjgyNDc0MDM4LDMuNDU0MDE4NDkgLTcuODI0NzQwMzgsNy43MTQ3ODAxOSAwLDQuMjYwNzI4MiAzLjUwMzI1Njc4LDcuNzE0NzQ1MiA3LjgyNDc0MDM4LDcuNzE0NzQ1MiA0LjMyMTQ0OTgsMCA3LjgyNDY5OTgsLTMuNDU0MDE3IDcuODI0Njk5OCwtNy43MTQ3NDUyIDAsLTIuMDQ2MDkxNCAtMC44MjQzOTIsLTQuMDA4MzY3MiAtMi4yOTE3NTYsLTUuNDU1MTc0NiBDIDEyLjE4MDIyNSwxLjEyOTk2NDggMTAuMTkwMDEzLDAuMzE3MTU1NjEgOC4xMTQ3NTYyLDAuMzE3MTU1NjEgWiBNIDYuOTM3NDU2Myw4LjI0MDU5ODUgNC42NzE4Njg1LDEwLjQ4NTg1MiA2LjAwODY4MTQsMTEuODc2NzI4IDguMzE3MDAzNSw5LjYwMDc5MTEgMTAuNjI1MzM3LDExLjg3NjcyOCAxMS45NjIxMzgsMTAuNDg1ODUyIDkuNjk2NTUwOCw4LjI0MDU5ODUgMTEuOTYyMTM4LDYuMDA2ODA2NiAxMC41NzMyNDYsNC42Mzc0MzM1IDguMzE3MDAzNSw2Ljg3MzQyOTcgNi4wNjA3NjA3LDQuNjM3NDMzNSA0LjY3MTg2ODUsNi4wMDY4MDY2IFoiIGZpbGw9ImNyaW1zb24iIHN0cm9rZS13aWR0aD0iMiIvPgo8L3N2Zz4=");
    background-color: crimson;
}
.ace_icon_svg.ace_warning_fold {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAyMCAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNC43NzY5IDE0LjczMzdMOC42NTE5MiAyLjQ4MzY5QzguMzI5NDYgMS44Mzg3NyA3LjQwOTEzIDEuODM4NzcgNy4wODY2NyAyLjQ4MzY5TDAuOTYxNjY5IDE0LjczMzdDMC42NzA3NzUgMTUuMzE1NSAxLjA5MzgzIDE2IDEuNzQ0MjkgMTZIMTMuOTk0M0MxNC42NDQ4IDE2IDE1LjA2NzggMTUuMzE1NSAxNC43NzY5IDE0LjczMzdaTTMuMTYwMDcgMTQuMjVMNy44NjkyOSA0LjgzMTU2TDEyLjU3ODUgMTQuMjVIMy4xNjAwN1pNOC43NDQyOSAxMS42MjVWMTMuMzc1SDYuOTk0MjlWMTEuNjI1SDguNzQ0MjlaTTYuOTk0MjkgMTAuNzVWNy4yNUg4Ljc0NDI5VjEwLjc1SDYuOTk0MjlaIiBmaWxsPSIjRUM3MjExIi8+CjxwYXRoIGQ9Ik0xMS4xOTkxIDIuOTUyMzhDMTAuODgwOSAyLjMxNDY3IDEwLjM1MzcgMS44MDUyNiA5LjcwNTUgMS41MDlMMTEuMDQxIDEuMDY5NzhDMTEuNjg4MyAwLjk0OTgxNCAxMi4zMzcgMS4yNzI2MyAxMi42MzE3IDEuODYxNDFMMTcuNjEzNiAxMS44MTYxQzE4LjM1MjcgMTMuMjkyOSAxNy41OTM4IDE1LjA4MDQgMTYuMDE4IDE1LjU3NDVDMTYuNDA0NCAxNC40NTA3IDE2LjMyMzEgMTMuMjE4OCAxNS43OTI0IDEyLjE1NTVMMTEuMTk5MSAyLjk1MjM4WiIgZmlsbD0iI0VDNzIxMSIvPgo8L3N2Zz4=");
    background-color: darkorange;
}

.ace_scrollbar {
    contain: strict;
    position: absolute;
    right: 0;
    bottom: 0;
    z-index: 6;
}

.ace_scrollbar-inner {
    position: absolute;
    cursor: text;
    left: 0;
    top: 0;
}

.ace_scrollbar-v{
    overflow-x: hidden;
    overflow-y: scroll;
    top: 0;
}

.ace_scrollbar-h {
    overflow-x: scroll;
    overflow-y: hidden;
    left: 0;
}

.ace_print-margin {
    position: absolute;
    height: 100%;
}

.ace_text-input {
    position: absolute;
    z-index: 0;
    width: 0.5em;
    height: 1em;
    opacity: 0;
    background: transparent;
    -moz-appearance: none;
    appearance: none;
    border: none;
    resize: none;
    outline: none;
    overflow: hidden;
    font: inherit;
    padding: 0 1px;
    margin: 0 -1px;
    contain: strict;
    -ms-user-select: text;
    -moz-user-select: text;
    -webkit-user-select: text;
    user-select: text;
    /*with \`pre-line\` chrome inserts &nbsp; instead of space*/
    white-space: pre!important;
}
.ace_text-input.ace_composition {
    background: transparent;
    color: inherit;
    z-index: 1000;
    opacity: 1;
}
.ace_composition_placeholder { color: transparent }
.ace_composition_marker { 
    border-bottom: 1px solid;
    position: absolute;
    border-radius: 0;
    margin-top: 1px;
}

[ace_nocontext=true] {
    transform: none!important;
    filter: none!important;
    clip-path: none!important;
    mask : none!important;
    contain: none!important;
    perspective: none!important;
    mix-blend-mode: initial!important;
    z-index: auto;
}

.ace_layer {
    z-index: 1;
    position: absolute;
    overflow: hidden;
    /* workaround for chrome bug https://github.com/ajaxorg/ace/issues/2312*/
    word-wrap: normal;
    white-space: pre;
    height: 100%;
    width: 100%;
    box-sizing: border-box;
    /* setting pointer-events: auto; on node under the mouse, which changes
        during scroll, will break mouse wheel scrolling in Safari */
    pointer-events: none;
}

.ace_gutter-layer {
    position: relative;
    width: auto;
    text-align: right;
    pointer-events: auto;
    height: 1000000px;
    contain: style size layout;
}

.ace_text-layer {
    font: inherit !important;
    position: absolute;
    height: 1000000px;
    width: 1000000px;
    contain: style size layout;
}

.ace_text-layer > .ace_line, .ace_text-layer > .ace_line_group {
    contain: style size layout;
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
}

.ace_hidpi .ace_text-layer,
.ace_hidpi .ace_gutter-layer,
.ace_hidpi .ace_content,
.ace_hidpi .ace_gutter {
    contain: strict;
}
.ace_hidpi .ace_text-layer > .ace_line, 
.ace_hidpi .ace_text-layer > .ace_line_group {
    contain: strict;
}

.ace_cjk {
    display: inline-block;
    text-align: center;
}

.ace_cursor-layer {
    z-index: 4;
}

.ace_cursor {
    z-index: 4;
    position: absolute;
    box-sizing: border-box;
    border-left: 2px solid;
    /* workaround for smooth cursor repaintng whole screen in chrome */
    transform: translatez(0);
}

.ace_multiselect .ace_cursor {
    border-left-width: 1px;
}

.ace_slim-cursors .ace_cursor {
    border-left-width: 1px;
}

.ace_overwrite-cursors .ace_cursor {
    border-left-width: 0;
    border-bottom: 1px solid;
}

.ace_hidden-cursors .ace_cursor {
    opacity: 0.2;
}

.ace_hasPlaceholder .ace_hidden-cursors .ace_cursor {
    opacity: 0;
}

.ace_smooth-blinking .ace_cursor {
    transition: opacity 0.18s;
}

.ace_animate-blinking .ace_cursor {
    animation-duration: 1000ms;
    animation-timing-function: step-end;
    animation-name: blink-ace-animate;
    animation-iteration-count: infinite;
}

.ace_animate-blinking.ace_smooth-blinking .ace_cursor {
    animation-duration: 1000ms;
    animation-timing-function: ease-in-out;
    animation-name: blink-ace-animate-smooth;
}
    
@keyframes blink-ace-animate {
    from, to { opacity: 1; }
    60% { opacity: 0; }
}

@keyframes blink-ace-animate-smooth {
    from, to { opacity: 1; }
    45% { opacity: 1; }
    60% { opacity: 0; }
    85% { opacity: 0; }
}

.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {
    position: absolute;
    z-index: 3;
}

.ace_marker-layer .ace_selection {
    position: absolute;
    z-index: 5;
}

.ace_marker-layer .ace_bracket {
    position: absolute;
    z-index: 6;
}

.ace_marker-layer .ace_error_bracket {
    position: absolute;
    border-bottom: 1px solid #DE5555;
    border-radius: 0;
}

.ace_marker-layer .ace_active-line {
    position: absolute;
    z-index: 2;
}

.ace_marker-layer .ace_selected-word {
    position: absolute;
    z-index: 4;
    box-sizing: border-box;
}

.ace_line .ace_fold {
    box-sizing: border-box;

    display: inline-block;
    height: 11px;
    margin-top: -2px;
    vertical-align: middle;

    background-image:
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");
    background-repeat: no-repeat, repeat-x;
    background-position: center center, top left;
    color: transparent;

    border: 1px solid black;
    border-radius: 2px;

    cursor: pointer;
    pointer-events: auto;
}

.ace_dark .ace_fold {
}

.ace_fold:hover{
    background-image:
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");
}

.ace_tooltip {
    background-color: #f5f5f5;
    border: 1px solid gray;
    border-radius: 1px;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
    color: black;
    max-width: 100%;
    padding: 3px 4px;
    position: fixed;
    z-index: 999999;
    box-sizing: border-box;
    cursor: default;
    white-space: pre-wrap;
    word-wrap: break-word;
    line-height: normal;
    font-style: normal;
    font-weight: normal;
    letter-spacing: normal;
    pointer-events: none;
    overflow: auto;
    max-width: min(60em, 66vw);
    overscroll-behavior: contain;
}
.ace_tooltip pre {
    white-space: pre-wrap;
}

.ace_tooltip.ace_dark {
    background-color: #636363;
    color: #fff;
}

.ace_tooltip:focus {
    outline: 1px solid #5E9ED6;
}

.ace_icon {
    display: inline-block;
    width: 18px;
    vertical-align: top;
}

.ace_icon_svg {
    display: inline-block;
    width: 12px;
    vertical-align: top;
    -webkit-mask-repeat: no-repeat;
    -webkit-mask-size: 12px;
    -webkit-mask-position: center;
}

.ace_folding-enabled > .ace_gutter-cell, .ace_folding-enabled > .ace_gutter-cell_svg-icons {
    padding-right: 13px;
}

.ace_fold-widget {
    box-sizing: border-box;

    margin: 0 -12px 0 1px;
    display: none;
    width: 11px;
    vertical-align: top;

    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: center;

    border-radius: 3px;
    
    border: 1px solid transparent;
    cursor: pointer;
}

.ace_folding-enabled .ace_fold-widget {
    display: inline-block;   
}

.ace_fold-widget.ace_end {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");
}

.ace_fold-widget.ace_closed {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");
}

.ace_fold-widget:hover {
    border: 1px solid rgba(0, 0, 0, 0.3);
    background-color: rgba(255, 255, 255, 0.2);
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);
}

.ace_fold-widget:active {
    border: 1px solid rgba(0, 0, 0, 0.4);
    background-color: rgba(0, 0, 0, 0.05);
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);
}
/**
 * Dark version for fold widgets
 */
.ace_dark .ace_fold-widget {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");
}
.ace_dark .ace_fold-widget.ace_end {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");
}
.ace_dark .ace_fold-widget.ace_closed {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");
}
.ace_dark .ace_fold-widget:hover {
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);
    background-color: rgba(255, 255, 255, 0.1);
}
.ace_dark .ace_fold-widget:active {
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);
}

.ace_inline_button {
    border: 1px solid lightgray;
    display: inline-block;
    margin: -1px 8px;
    padding: 0 5px;
    pointer-events: auto;
    cursor: pointer;
}
.ace_inline_button:hover {
    border-color: gray;
    background: rgba(200,200,200,0.2);
    display: inline-block;
    pointer-events: auto;
}

.ace_fold-widget.ace_invalid {
    background-color: #FFB4B4;
    border-color: #DE5555;
}

.ace_fade-fold-widgets .ace_fold-widget {
    transition: opacity 0.4s ease 0.05s;
    opacity: 0;
}

.ace_fade-fold-widgets:hover .ace_fold-widget {
    transition: opacity 0.05s ease 0.05s;
    opacity:1;
}

.ace_underline {
    text-decoration: underline;
}

.ace_bold {
    font-weight: bold;
}

.ace_nobold .ace_bold {
    font-weight: normal;
}

.ace_italic {
    font-style: italic;
}


.ace_error-marker {
    background-color: rgba(255, 0, 0,0.2);
    position: absolute;
    z-index: 9;
}

.ace_highlight-marker {
    background-color: rgba(255, 255, 0,0.2);
    position: absolute;
    z-index: 8;
}

.ace_mobile-menu {
    position: absolute;
    line-height: 1.5;
    border-radius: 4px;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    background: white;
    box-shadow: 1px 3px 2px grey;
    border: 1px solid #dcdcdc;
    color: black;
}
.ace_dark > .ace_mobile-menu {
    background: #333;
    color: #ccc;
    box-shadow: 1px 3px 2px grey;
    border: 1px solid #444;

}
.ace_mobile-button {
    padding: 2px;
    cursor: pointer;
    overflow: hidden;
}
.ace_mobile-button:hover {
    background-color: #eee;
    opacity:1;
}
.ace_mobile-button:active {
    background-color: #ddd;
}

.ace_placeholder {
    position: relative;
    font-family: arial;
    transform: scale(0.9);
    transform-origin: left;
    white-space: pre;
    opacity: 0.7;
    margin: 0 10px;
    z-index: 1;
}

.ace_ghost_text {
    opacity: 0.5;
    font-style: italic;
}

.ace_ghost_text_container > div {
    white-space: pre;
}

.ghost_text_line_wrapped::after {
    content: "\u21A9";
    position: absolute;
}

.ace_lineWidgetContainer.ace_ghost_text {
    margin: 0px 4px
}

.ace_screenreader-only {
    position:absolute;
    left:-10000px;
    top:auto;
    width:1px;
    height:1px;
    overflow:hidden;
}

.ace_hidden_token {
    display: none;
}`});ace.define("ace/layer/decorators",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event_emitter"],function(e,t,r){"use strict";var n=e("../lib/dom"),p=e("../lib/oop"),g=e("../lib/event_emitter").EventEmitter,s=function(){function u(o,i){this.canvas=n.createElement("canvas"),this.renderer=i,this.pixelRatio=1,this.maxHeight=i.layerConfig.maxHeight,this.lineHeight=i.layerConfig.lineHeight,this.canvasHeight=o.parent.scrollHeight,this.heightRatio=this.canvasHeight/this.maxHeight,this.canvasWidth=o.width,this.minDecorationHeight=2*this.pixelRatio|0,this.halfMinDecorationHeight=this.minDecorationHeight/2|0,this.canvas.width=this.canvasWidth,this.canvas.height=this.canvasHeight,this.canvas.style.top="0px",this.canvas.style.right="0px",this.canvas.style.zIndex="7px",this.canvas.style.position="absolute",this.colors={},this.colors.dark={error:"rgba(255, 18, 18, 1)",warning:"rgba(18, 136, 18, 1)",info:"rgba(18, 18, 136, 1)"},this.colors.light={error:"rgb(255,51,51)",warning:"rgb(32,133,72)",info:"rgb(35,68,138)"},o.element.appendChild(this.canvas)}return u.prototype.$updateDecorators=function(o){var i=this.renderer.theme.isDark===!0?this.colors.dark:this.colors.light;if(o){this.maxHeight=o.maxHeight,this.lineHeight=o.lineHeight,this.canvasHeight=o.height;var a=(o.lastRow+1)*this.lineHeight;a<this.canvasHeight?this.heightRatio=1:this.heightRatio=this.canvasHeight/this.maxHeight}var l=this.canvas.getContext("2d");function d(C,w){return C.priority<w.priority?-1:C.priority>w.priority?1:0}var c=this.renderer.session.$annotations;if(l.clearRect(0,0,this.canvas.width,this.canvas.height),c){var m={info:1,warning:2,error:3};c.forEach(function(C){C.priority=m[C.type]||null}),c=c.sort(d);for(var h=this.renderer.session.$foldData,v=0;v<c.length;v++){var k=c[v].row,x=this.compensateFoldRows(k,h),T=Math.round((k-x)*this.lineHeight*this.heightRatio),S=Math.round((k-x)*this.lineHeight*this.heightRatio),f=Math.round(((k-x)*this.lineHeight+this.lineHeight)*this.heightRatio),L=f-S;if(L<this.minDecorationHeight){var $=(S+f)/2|0;$<this.halfMinDecorationHeight?$=this.halfMinDecorationHeight:$+this.halfMinDecorationHeight>this.canvasHeight&&($=this.canvasHeight-this.halfMinDecorationHeight),S=Math.round($-this.halfMinDecorationHeight),f=Math.round($+this.halfMinDecorationHeight)}l.fillStyle=i[c[v].type]||null,l.fillRect(0,T,this.canvasWidth,f-S)}}var A=this.renderer.session.selection.getCursor();if(A){var x=this.compensateFoldRows(A.row,h),T=Math.round((A.row-x)*this.lineHeight*this.heightRatio);l.fillStyle="rgba(0, 0, 0, 0.5)",l.fillRect(0,T,this.canvasWidth,2)}},u.prototype.compensateFoldRows=function(o,i){var a=0;if(i&&i.length>0)for(var l=0;l<i.length;l++)o>i[l].start.row&&o<i[l].end.row?a+=o-i[l].start.row:o>=i[l].end.row&&(a+=i[l].end.row-i[l].start.row);return a},u}();p.implement(s.prototype,g),t.Decorator=s});ace.define("ace/virtual_renderer",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/config","ace/layer/gutter","ace/layer/marker","ace/layer/text","ace/layer/cursor","ace/scrollbar","ace/scrollbar","ace/scrollbar_custom","ace/scrollbar_custom","ace/renderloop","ace/layer/font_metrics","ace/lib/event_emitter","ace/css/editor-css","ace/layer/decorators","ace/lib/useragent","ace/layer/text_util"],function(e,t,r){"use strict";var n=e("./lib/oop"),p=e("./lib/dom"),g=e("./lib/lang"),s=e("./config"),u=e("./layer/gutter").Gutter,o=e("./layer/marker").Marker,i=e("./layer/text").Text,a=e("./layer/cursor").Cursor,l=e("./scrollbar").HScrollBar,d=e("./scrollbar").VScrollBar,c=e("./scrollbar_custom").HScrollBar,m=e("./scrollbar_custom").VScrollBar,h=e("./renderloop").RenderLoop,v=e("./layer/font_metrics").FontMetrics,k=e("./lib/event_emitter").EventEmitter,x=e("./css/editor-css"),T=e("./layer/decorators").Decorator,S=e("./lib/useragent"),f=e("./layer/text_util").isTextToken;p.importCssString(x,"ace_editor.css",!1);var L=function(){function $(A,C){var w=this;this.container=A||p.createElement("div"),p.addCssClass(this.container,"ace_editor"),p.HI_DPI&&p.addCssClass(this.container,"ace_hidpi"),this.setTheme(C),s.get("useStrictCSP")==null&&s.set("useStrictCSP",!1),this.$gutter=p.createElement("div"),this.$gutter.className="ace_gutter",this.container.appendChild(this.$gutter),this.$gutter.setAttribute("aria-hidden","true"),this.scroller=p.createElement("div"),this.scroller.className="ace_scroller",this.container.appendChild(this.scroller),this.content=p.createElement("div"),this.content.className="ace_content",this.scroller.appendChild(this.content),this.$gutterLayer=new u(this.$gutter),this.$gutterLayer.on("changeGutterWidth",this.onGutterResize.bind(this)),this.$markerBack=new o(this.content);var y=this.$textLayer=new i(this.content);this.canvas=y.element,this.$markerFront=new o(this.content),this.$cursorLayer=new a(this.content),this.$horizScroll=!1,this.$vScroll=!1,this.scrollBar=this.scrollBarV=new d(this.container,this),this.scrollBarH=new l(this.container,this),this.scrollBarV.on("scroll",function(b){w.$scrollAnimation||w.session.setScrollTop(b.data-w.scrollMargin.top)}),this.scrollBarH.on("scroll",function(b){w.$scrollAnimation||w.session.setScrollLeft(b.data-w.scrollMargin.left)}),this.scrollTop=0,this.scrollLeft=0,this.cursorPos={row:0,column:0},this.$fontMetrics=new v(this.container),this.$textLayer.$setFontMetrics(this.$fontMetrics),this.$textLayer.on("changeCharacterSize",function(b){w.updateCharacterSize(),w.onResize(!0,w.gutterWidth,w.$size.width,w.$size.height),w._signal("changeCharacterSize",b)}),this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0,$dirty:!0},this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:0,characterWidth:0,minHeight:1,maxHeight:1,offset:0,height:1,gutterOffset:1},this.scrollMargin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.margin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.$keepTextAreaAtCursor=!S.isIOS,this.$loop=new h(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView),this.$loop.schedule(this.CHANGE_FULL),this.updateCharacterSize(),this.setPadding(4),this.$addResizeObserver(),s.resetOptions(this),s._signal("renderer",this)}return $.prototype.updateCharacterSize=function(){this.$textLayer.allowBoldFonts!=this.$allowBoldFonts&&(this.$allowBoldFonts=this.$textLayer.allowBoldFonts,this.setStyle("ace_nobold",!this.$allowBoldFonts)),this.layerConfig.characterWidth=this.characterWidth=this.$textLayer.getCharacterWidth(),this.layerConfig.lineHeight=this.lineHeight=this.$textLayer.getLineHeight(),this.$updatePrintMargin(),p.setStyle(this.scroller.style,"line-height",this.lineHeight+"px")},$.prototype.setSession=function(A){this.session&&this.session.doc.off("changeNewLineMode",this.onChangeNewLineMode),this.session=A,A&&this.scrollMargin.top&&A.getScrollTop()<=0&&A.setScrollTop(-this.scrollMargin.top),this.$cursorLayer.setSession(A),this.$markerBack.setSession(A),this.$markerFront.setSession(A),this.$gutterLayer.setSession(A),this.$textLayer.setSession(A),A&&(this.$loop.schedule(this.CHANGE_FULL),this.session.$setFontMetrics(this.$fontMetrics),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.onChangeNewLineMode=this.onChangeNewLineMode.bind(this),this.onChangeNewLineMode(),this.session.doc.on("changeNewLineMode",this.onChangeNewLineMode))},$.prototype.updateLines=function(A,C,w){if(C===void 0&&(C=1/0),this.$changedLines?(this.$changedLines.firstRow>A&&(this.$changedLines.firstRow=A),this.$changedLines.lastRow<C&&(this.$changedLines.lastRow=C)):this.$changedLines={firstRow:A,lastRow:C},this.$changedLines.lastRow<this.layerConfig.firstRow)if(w)this.$changedLines.lastRow=this.layerConfig.lastRow;else return;this.$changedLines.firstRow>this.layerConfig.lastRow||this.$loop.schedule(this.CHANGE_LINES)},$.prototype.onChangeNewLineMode=function(){this.$loop.schedule(this.CHANGE_TEXT),this.$textLayer.$updateEolChar(),this.session.$bidiHandler.setEolChar(this.$textLayer.EOL_CHAR)},$.prototype.onChangeTabSize=function(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER),this.$textLayer.onChangeTabSize()},$.prototype.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)},$.prototype.updateFull=function(A){A?this.$renderChanges(this.CHANGE_FULL,!0):this.$loop.schedule(this.CHANGE_FULL)},$.prototype.updateFontSize=function(){this.$textLayer.checkForSizeChanges()},$.prototype.$updateSizeAsync=function(){this.$loop.pending?this.$size.$dirty=!0:this.onResize()},$.prototype.onResize=function(A,C,w,y){if(!(this.resizing>2)){this.resizing>0?this.resizing++:this.resizing=A?1:0;var b=this.container;y||(y=b.clientHeight||b.scrollHeight),!y&&this.$maxLines&&this.lineHeight>1&&(!b.style.height||b.style.height=="0px")&&(b.style.height="1px",y=b.clientHeight||b.scrollHeight),w||(w=b.clientWidth||b.scrollWidth);var E=this.$updateCachedSize(A,C,w,y);if(this.$resizeTimer&&this.$resizeTimer.cancel(),!this.$size.scrollerHeight||!w&&!y)return this.resizing=0;A&&(this.$gutterLayer.$padding=null),A?this.$renderChanges(E|this.$changes,!0):this.$loop.schedule(E|this.$changes),this.resizing&&(this.resizing=0),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.$customScrollbar&&this.$updateCustomScrollbar(!0)}},$.prototype.$updateCachedSize=function(A,C,w,y){y-=this.$extraHeight||0;var b=0,E=this.$size,_={width:E.width,height:E.height,scrollerHeight:E.scrollerHeight,scrollerWidth:E.scrollerWidth};if(y&&(A||E.height!=y)&&(E.height=y,b|=this.CHANGE_SIZE,E.scrollerHeight=E.height,this.$horizScroll&&(E.scrollerHeight-=this.scrollBarH.getHeight()),this.scrollBarV.setHeight(E.scrollerHeight),this.scrollBarV.element.style.bottom=this.scrollBarH.getHeight()+"px",b=b|this.CHANGE_SCROLL),w&&(A||E.width!=w)){b|=this.CHANGE_SIZE,E.width=w,C==null&&(C=this.$showGutter?this.$gutter.offsetWidth:0),this.gutterWidth=C,p.setStyle(this.scrollBarH.element.style,"left",C+"px"),p.setStyle(this.scroller.style,"left",C+this.margin.left+"px"),E.scrollerWidth=Math.max(0,w-C-this.scrollBarV.getWidth()-this.margin.h),p.setStyle(this.$gutter.style,"left",this.margin.left+"px");var R=this.scrollBarV.getWidth()+"px";p.setStyle(this.scrollBarH.element.style,"right",R),p.setStyle(this.scroller.style,"right",R),p.setStyle(this.scroller.style,"bottom",this.scrollBarH.getHeight()),this.scrollBarH.setWidth(E.scrollerWidth),(this.session&&this.session.getUseWrapMode()&&this.adjustWrapLimit()||A)&&(b|=this.CHANGE_FULL)}return E.$dirty=!w||!y,b&&this._signal("resize",_),b},$.prototype.onGutterResize=function(A){var C=this.$showGutter?A:0;C!=this.gutterWidth&&(this.$changes|=this.$updateCachedSize(!0,C,this.$size.width,this.$size.height)),this.session.getUseWrapMode()&&this.adjustWrapLimit()?this.$loop.schedule(this.CHANGE_FULL):this.$size.$dirty?this.$loop.schedule(this.CHANGE_FULL):this.$computeLayerConfig()},$.prototype.adjustWrapLimit=function(){var A=this.$size.scrollerWidth-this.$padding*2,C=Math.floor(A/this.characterWidth);return this.session.adjustWrapLimit(C,this.$showPrintMargin&&this.$printMarginColumn)},$.prototype.setAnimatedScroll=function(A){this.setOption("animatedScroll",A)},$.prototype.getAnimatedScroll=function(){return this.$animatedScroll},$.prototype.setShowInvisibles=function(A){this.setOption("showInvisibles",A),this.session.$bidiHandler.setShowInvisibles(A)},$.prototype.getShowInvisibles=function(){return this.getOption("showInvisibles")},$.prototype.getDisplayIndentGuides=function(){return this.getOption("displayIndentGuides")},$.prototype.setDisplayIndentGuides=function(A){this.setOption("displayIndentGuides",A)},$.prototype.getHighlightIndentGuides=function(){return this.getOption("highlightIndentGuides")},$.prototype.setHighlightIndentGuides=function(A){this.setOption("highlightIndentGuides",A)},$.prototype.setShowPrintMargin=function(A){this.setOption("showPrintMargin",A)},$.prototype.getShowPrintMargin=function(){return this.getOption("showPrintMargin")},$.prototype.setPrintMarginColumn=function(A){this.setOption("printMarginColumn",A)},$.prototype.getPrintMarginColumn=function(){return this.getOption("printMarginColumn")},$.prototype.getShowGutter=function(){return this.getOption("showGutter")},$.prototype.setShowGutter=function(A){return this.setOption("showGutter",A)},$.prototype.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},$.prototype.setFadeFoldWidgets=function(A){this.setOption("fadeFoldWidgets",A)},$.prototype.setHighlightGutterLine=function(A){this.setOption("highlightGutterLine",A)},$.prototype.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},$.prototype.$updatePrintMargin=function(){if(!(!this.$showPrintMargin&&!this.$printMarginEl)){if(!this.$printMarginEl){var A=p.createElement("div");A.className="ace_layer ace_print-margin-layer",this.$printMarginEl=p.createElement("div"),this.$printMarginEl.className="ace_print-margin",A.appendChild(this.$printMarginEl),this.content.insertBefore(A,this.content.firstChild)}var C=this.$printMarginEl.style;C.left=Math.round(this.characterWidth*this.$printMarginColumn+this.$padding)+"px",C.visibility=this.$showPrintMargin?"visible":"hidden",this.session&&this.session.$wrap==-1&&this.adjustWrapLimit()}},$.prototype.getContainerElement=function(){return this.container},$.prototype.getMouseEventTarget=function(){return this.scroller},$.prototype.getTextAreaContainer=function(){return this.container},$.prototype.$moveTextAreaToCursor=function(){if(!this.$isMousePressed){var A=this.textarea.style,C=this.$composition;if(!this.$keepTextAreaAtCursor&&!C){p.translate(this.textarea,-100,0);return}var w=this.$cursorLayer.$pixelPos;if(w){C&&C.markerRange&&(w=this.$cursorLayer.getPixelPosition(C.markerRange.start,!0));var y=this.layerConfig,b=w.top,E=w.left;b-=y.offset;var _=C&&C.useTextareaForIME||S.isMobile?this.lineHeight:1;if(b<0||b>y.height-_){p.translate(this.textarea,0,0);return}var R=1,M=this.$size.height-_;if(!C)b+=this.lineHeight;else if(C.useTextareaForIME){var I=this.textarea.value;R=this.characterWidth*this.session.$getStringScreenWidth(I)[0]}else b+=this.lineHeight+2;E-=this.scrollLeft,E>this.$size.scrollerWidth-R&&(E=this.$size.scrollerWidth-R),E+=this.gutterWidth+this.margin.left,p.setStyle(A,"height",_+"px"),p.setStyle(A,"width",R+"px"),p.translate(this.textarea,Math.min(E,this.$size.scrollerWidth-R),Math.min(b,M))}}},$.prototype.getFirstVisibleRow=function(){return this.layerConfig.firstRow},$.prototype.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(this.layerConfig.offset===0?0:1)},$.prototype.getLastFullyVisibleRow=function(){var A=this.layerConfig,C=A.lastRow,w=this.session.documentToScreenRow(C,0)*A.lineHeight;return w-this.session.getScrollTop()>A.height-A.lineHeight?C-1:C},$.prototype.getLastVisibleRow=function(){return this.layerConfig.lastRow},$.prototype.setPadding=function(A){this.$padding=A,this.$textLayer.setPadding(A),this.$cursorLayer.setPadding(A),this.$markerFront.setPadding(A),this.$markerBack.setPadding(A),this.$loop.schedule(this.CHANGE_FULL),this.$updatePrintMargin()},$.prototype.setScrollMargin=function(A,C,w,y){var b=this.scrollMargin;b.top=A|0,b.bottom=C|0,b.right=y|0,b.left=w|0,b.v=b.top+b.bottom,b.h=b.left+b.right,b.top&&this.scrollTop<=0&&this.session&&this.session.setScrollTop(-b.top),this.updateFull()},$.prototype.setMargin=function(A,C,w,y){var b=this.margin;b.top=A|0,b.bottom=C|0,b.right=y|0,b.left=w|0,b.v=b.top+b.bottom,b.h=b.left+b.right,this.$updateCachedSize(!0,this.gutterWidth,this.$size.width,this.$size.height),this.updateFull()},$.prototype.getHScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},$.prototype.setHScrollBarAlwaysVisible=function(A){this.setOption("hScrollBarAlwaysVisible",A)},$.prototype.getVScrollBarAlwaysVisible=function(){return this.$vScrollBarAlwaysVisible},$.prototype.setVScrollBarAlwaysVisible=function(A){this.setOption("vScrollBarAlwaysVisible",A)},$.prototype.$updateScrollBarV=function(){var A=this.layerConfig.maxHeight,C=this.$size.scrollerHeight;!this.$maxLines&&this.$scrollPastEnd&&(A-=(C-this.lineHeight)*this.$scrollPastEnd,this.scrollTop>A-C&&(A=this.scrollTop+C,this.scrollBarV.scrollTop=null)),this.scrollBarV.setScrollHeight(A+this.scrollMargin.v),this.scrollBarV.setScrollTop(this.scrollTop+this.scrollMargin.top)},$.prototype.$updateScrollBarH=function(){this.scrollBarH.setScrollWidth(this.layerConfig.width+2*this.$padding+this.scrollMargin.h),this.scrollBarH.setScrollLeft(this.scrollLeft+this.scrollMargin.left)},$.prototype.freeze=function(){this.$frozen=!0},$.prototype.unfreeze=function(){this.$frozen=!1},$.prototype.$renderChanges=function(A,C){if(this.$changes&&(A|=this.$changes,this.$changes=0),!this.session||!this.container.offsetWidth||this.$frozen||!A&&!C){this.$changes|=A;return}if(this.$size.$dirty)return this.$changes|=A,this.onResize(!0);this.lineHeight||this.$textLayer.checkForSizeChanges(),this._signal("beforeRender",A),this.session&&this.session.$bidiHandler&&this.session.$bidiHandler.updateCharacterWidths(this.$fontMetrics);var w=this.layerConfig;if(A&this.CHANGE_FULL||A&this.CHANGE_SIZE||A&this.CHANGE_TEXT||A&this.CHANGE_LINES||A&this.CHANGE_SCROLL||A&this.CHANGE_H_SCROLL){if(A|=this.$computeLayerConfig()|this.$loop.clear(),w.firstRow!=this.layerConfig.firstRow&&w.firstRowScreen==this.layerConfig.firstRowScreen){var y=this.scrollTop+(w.firstRow-Math.max(this.layerConfig.firstRow,0))*this.lineHeight;y>0&&(this.scrollTop=y,A=A|this.CHANGE_SCROLL,A|=this.$computeLayerConfig()|this.$loop.clear())}w=this.layerConfig,this.$updateScrollBarV(),A&this.CHANGE_H_SCROLL&&this.$updateScrollBarH(),p.translate(this.content,-this.scrollLeft,-w.offset);var b=w.width+2*this.$padding+"px",E=w.minHeight+"px";p.setStyle(this.content.style,"width",b),p.setStyle(this.content.style,"height",E)}if(A&this.CHANGE_H_SCROLL&&(p.translate(this.content,-this.scrollLeft,-w.offset),this.scroller.className=this.scrollLeft<=0?"ace_scroller ":"ace_scroller ace_scroll-left ",this.enableKeyboardAccessibility&&(this.scroller.className+=this.keyboardFocusClassName)),A&this.CHANGE_FULL){this.$changedLines=null,this.$textLayer.update(w),this.$showGutter&&this.$gutterLayer.update(w),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(w),this.$markerBack.update(w),this.$markerFront.update(w),this.$cursorLayer.update(w),this.$moveTextAreaToCursor(),this._signal("afterRender",A);return}if(A&this.CHANGE_SCROLL){this.$changedLines=null,A&this.CHANGE_TEXT||A&this.CHANGE_LINES?this.$textLayer.update(w):this.$textLayer.scrollLines(w),this.$showGutter&&(A&this.CHANGE_GUTTER||A&this.CHANGE_LINES?this.$gutterLayer.update(w):this.$gutterLayer.scrollLines(w)),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(w),this.$markerBack.update(w),this.$markerFront.update(w),this.$cursorLayer.update(w),this.$moveTextAreaToCursor(),this._signal("afterRender",A);return}A&this.CHANGE_TEXT?(this.$changedLines=null,this.$textLayer.update(w),this.$showGutter&&this.$gutterLayer.update(w),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(w)):A&this.CHANGE_LINES?((this.$updateLines()||A&this.CHANGE_GUTTER&&this.$showGutter)&&this.$gutterLayer.update(w),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(w)):A&this.CHANGE_TEXT||A&this.CHANGE_GUTTER?(this.$showGutter&&this.$gutterLayer.update(w),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(w)):A&this.CHANGE_CURSOR&&(this.$highlightGutterLine&&this.$gutterLayer.updateLineHighlight(w),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(w)),A&this.CHANGE_CURSOR&&(this.$cursorLayer.update(w),this.$moveTextAreaToCursor()),A&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)&&this.$markerFront.update(w),A&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)&&this.$markerBack.update(w),this._signal("afterRender",A)},$.prototype.$autosize=function(){var A=this.session.getScreenLength()*this.lineHeight,C=this.$maxLines*this.lineHeight,w=Math.min(C,Math.max((this.$minLines||1)*this.lineHeight,A))+this.scrollMargin.v+(this.$extraHeight||0);this.$horizScroll&&(w+=this.scrollBarH.getHeight()),this.$maxPixelHeight&&w>this.$maxPixelHeight&&(w=this.$maxPixelHeight);var y=w<=2*this.lineHeight,b=!y&&A>C;if(w!=this.desiredHeight||this.$size.height!=this.desiredHeight||b!=this.$vScroll){b!=this.$vScroll&&(this.$vScroll=b,this.scrollBarV.setVisible(b));var E=this.container.clientWidth;this.container.style.height=w+"px",this.$updateCachedSize(!0,this.$gutterWidth,E,w),this.desiredHeight=w,this._signal("autosize")}},$.prototype.$computeLayerConfig=function(){var A=this.session,C=this.$size,w=C.height<=2*this.lineHeight,y=this.session.getScreenLength(),b=y*this.lineHeight,E=this.$getLongestLine(),_=!w&&(this.$hScrollBarAlwaysVisible||C.scrollerWidth-E-2*this.$padding<0),R=this.$horizScroll!==_;R&&(this.$horizScroll=_,this.scrollBarH.setVisible(_));var M=this.$vScroll;this.$maxLines&&this.lineHeight>1&&this.$autosize();var I=C.scrollerHeight+this.lineHeight,P=!this.$maxLines&&this.$scrollPastEnd?(C.scrollerHeight-this.lineHeight)*this.$scrollPastEnd:0;b+=P;var O=this.scrollMargin;this.session.setScrollTop(Math.max(-O.top,Math.min(this.scrollTop,b-C.scrollerHeight+O.bottom))),this.session.setScrollLeft(Math.max(-O.left,Math.min(this.scrollLeft,E+2*this.$padding-C.scrollerWidth+O.right)));var F=!w&&(this.$vScrollBarAlwaysVisible||C.scrollerHeight-b+P<0||this.scrollTop>O.top),D=M!==F;D&&(this.$vScroll=F,this.scrollBarV.setVisible(F));var z=this.scrollTop%this.lineHeight,N=Math.ceil(I/this.lineHeight)-1,W=Math.max(0,Math.round((this.scrollTop-z)/this.lineHeight)),j=W+N,X,G,J=this.lineHeight;W=A.screenToDocumentRow(W,0);var ot=A.getFoldLine(W);ot&&(W=ot.start.row),X=A.documentToScreenRow(W,0),G=A.getRowLength(W)*J,j=Math.min(A.screenToDocumentRow(j,0),A.getLength()-1),I=C.scrollerHeight+A.getRowLength(j)*J+G,z=this.scrollTop-X*J;var et=0;return(this.layerConfig.width!=E||R)&&(et=this.CHANGE_H_SCROLL),(R||D)&&(et|=this.$updateCachedSize(!0,this.gutterWidth,C.width,C.height),this._signal("scrollbarVisibilityChanged"),D&&(E=this.$getLongestLine())),this.layerConfig={width:E,padding:this.$padding,firstRow:W,firstRowScreen:X,lastRow:j,lineHeight:J,characterWidth:this.characterWidth,minHeight:I,maxHeight:b,offset:z,gutterOffset:J?Math.max(0,Math.ceil((z+C.height-C.scrollerHeight)/J)):0,height:this.$size.scrollerHeight},this.session.$bidiHandler&&this.session.$bidiHandler.setContentWidth(E-this.$padding),et},$.prototype.$updateLines=function(){if(this.$changedLines){var A=this.$changedLines.firstRow,C=this.$changedLines.lastRow;this.$changedLines=null;var w=this.layerConfig;if(!(A>w.lastRow+1)&&!(C<w.firstRow)){if(C===1/0){this.$showGutter&&this.$gutterLayer.update(w),this.$textLayer.update(w);return}return this.$textLayer.updateLines(w,A,C),!0}}},$.prototype.$getLongestLine=function(){var A=this.session.getScreenWidth();return this.showInvisibles&&!this.session.$useWrapMode&&(A+=1),this.$textLayer&&A>this.$textLayer.MAX_LINE_LENGTH&&(A=this.$textLayer.MAX_LINE_LENGTH+30),Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(A*this.characterWidth))},$.prototype.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(!0)),this.$loop.schedule(this.CHANGE_MARKER_FRONT)},$.prototype.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers()),this.$loop.schedule(this.CHANGE_MARKER_BACK)},$.prototype.addGutterDecoration=function(A,C){this.$gutterLayer.addGutterDecoration(A,C)},$.prototype.removeGutterDecoration=function(A,C){this.$gutterLayer.removeGutterDecoration(A,C)},$.prototype.updateBreakpoints=function(A){this._rows=A,this.$loop.schedule(this.CHANGE_GUTTER)},$.prototype.setAnnotations=function(A){this.$gutterLayer.setAnnotations(A),this.$loop.schedule(this.CHANGE_GUTTER)},$.prototype.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)},$.prototype.hideCursor=function(){this.$cursorLayer.hideCursor()},$.prototype.showCursor=function(){this.$cursorLayer.showCursor()},$.prototype.scrollSelectionIntoView=function(A,C,w){this.scrollCursorIntoView(A,w),this.scrollCursorIntoView(C,w)},$.prototype.scrollCursorIntoView=function(A,C,w){if(this.$size.scrollerHeight!==0){var y=this.$cursorLayer.getPixelPosition(A),b=y.left,E=y.top,_=w&&w.top||0,R=w&&w.bottom||0;this.$scrollAnimation&&(this.$stopAnimation=!0);var M=this.$scrollAnimation?this.session.getScrollTop():this.scrollTop;M+_>E?(C&&M+_>E+this.lineHeight&&(E-=C*this.$size.scrollerHeight),E===0&&(E=-this.scrollMargin.top),this.session.setScrollTop(E)):M+this.$size.scrollerHeight-R<E+this.lineHeight&&(C&&M+this.$size.scrollerHeight-R<E-this.lineHeight&&(E+=C*this.$size.scrollerHeight),this.session.setScrollTop(E+this.lineHeight+R-this.$size.scrollerHeight));var I=this.scrollLeft,P=2*this.layerConfig.characterWidth;b-P<I?(b-=P,b<this.$padding+P&&(b=-this.scrollMargin.left),this.session.setScrollLeft(b)):(b+=P,I+this.$size.scrollerWidth<b+this.characterWidth?this.session.setScrollLeft(Math.round(b+this.characterWidth-this.$size.scrollerWidth)):I<=this.$padding&&b-I<this.characterWidth&&this.session.setScrollLeft(0))}},$.prototype.getScrollTop=function(){return this.session.getScrollTop()},$.prototype.getScrollLeft=function(){return this.session.getScrollLeft()},$.prototype.getScrollTopRow=function(){return this.scrollTop/this.lineHeight},$.prototype.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)},$.prototype.scrollToRow=function(A){this.session.setScrollTop(A*this.lineHeight)},$.prototype.alignCursor=function(A,C){typeof A=="number"&&(A={row:A,column:0});var w=this.$cursorLayer.getPixelPosition(A),y=this.$size.scrollerHeight-this.lineHeight,b=w.top-y*(C||0);return this.session.setScrollTop(b),b},$.prototype.$calcSteps=function(A,C){var w=0,y=this.STEPS,b=[],E=function(_,R,M){return M*(Math.pow(_-1,3)+1)+R};for(w=0;w<y;++w)b.push(E(w/this.STEPS,A,C-A));return b},$.prototype.scrollToLine=function(A,C,w,y){var b=this.$cursorLayer.getPixelPosition({row:A,column:0}),E=b.top;C&&(E-=this.$size.scrollerHeight/2);var _=this.scrollTop;this.session.setScrollTop(E),w!==!1&&this.animateScrolling(_,y)},$.prototype.animateScrolling=function(A,C){var w=this.scrollTop;if(!this.$animatedScroll)return;var y=this;if(A==w)return;if(this.$scrollAnimation){var b=this.$scrollAnimation.steps;if(b.length&&(A=b[0],A==w))return}var E=y.$calcSteps(A,w);this.$scrollAnimation={from:A,to:w,steps:E},clearInterval(this.$timer),y.session.setScrollTop(E.shift()),y.session.$scrollTop=w;function _(){y.$timer=clearInterval(y.$timer),y.$scrollAnimation=null,y.$stopAnimation=!1,C&&C()}this.$timer=setInterval(function(){if(y.$stopAnimation){_();return}if(!y.session)return clearInterval(y.$timer);E.length?(y.session.setScrollTop(E.shift()),y.session.$scrollTop=w):w!=null?(y.session.$scrollTop=-1,y.session.setScrollTop(w),w=null):_()},10)},$.prototype.scrollToY=function(A){this.scrollTop!==A&&(this.$loop.schedule(this.CHANGE_SCROLL),this.scrollTop=A)},$.prototype.scrollToX=function(A){this.scrollLeft!==A&&(this.scrollLeft=A),this.$loop.schedule(this.CHANGE_H_SCROLL)},$.prototype.scrollTo=function(A,C){this.session.setScrollTop(C),this.session.setScrollLeft(A)},$.prototype.scrollBy=function(A,C){C&&this.session.setScrollTop(this.session.getScrollTop()+C),A&&this.session.setScrollLeft(this.session.getScrollLeft()+A)},$.prototype.isScrollableBy=function(A,C){if(C<0&&this.session.getScrollTop()>=1-this.scrollMargin.top||C>0&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight<-1+this.scrollMargin.bottom||A<0&&this.session.getScrollLeft()>=1-this.scrollMargin.left||A>0&&this.session.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.width<-1+this.scrollMargin.right)return!0},$.prototype.pixelToScreenCoordinates=function(A,C){var w;if(this.$hasCssTransforms){w={top:0,left:0};var y=this.$fontMetrics.transformCoordinates([A,C]);A=y[1]-this.gutterWidth-this.margin.left,C=y[0]}else w=this.scroller.getBoundingClientRect();var b=A+this.scrollLeft-w.left-this.$padding,E=b/this.characterWidth,_=Math.floor((C+this.scrollTop-w.top)/this.lineHeight),R=this.$blockCursor?Math.floor(E):Math.round(E);return{row:_,column:R,side:E-R>0?1:-1,offsetX:b}},$.prototype.screenToTextCoordinates=function(A,C){var w;if(this.$hasCssTransforms){w={top:0,left:0};var y=this.$fontMetrics.transformCoordinates([A,C]);A=y[1]-this.gutterWidth-this.margin.left,C=y[0]}else w=this.scroller.getBoundingClientRect();var b=A+this.scrollLeft-w.left-this.$padding,E=b/this.characterWidth,_=this.$blockCursor?Math.floor(E):Math.round(E),R=Math.floor((C+this.scrollTop-w.top)/this.lineHeight);return this.session.screenToDocumentPosition(R,Math.max(_,0),b)},$.prototype.textToScreenCoordinates=function(A,C){var w=this.scroller.getBoundingClientRect(),y=this.session.documentToScreenPosition(A,C),b=this.$padding+(this.session.$bidiHandler.isBidiRow(y.row,A)?this.session.$bidiHandler.getPosLeft(y.column):Math.round(y.column*this.characterWidth)),E=y.row*this.lineHeight;return{pageX:w.left+b-this.scrollLeft,pageY:w.top+E-this.scrollTop}},$.prototype.visualizeFocus=function(){p.addCssClass(this.container,"ace_focus")},$.prototype.visualizeBlur=function(){p.removeCssClass(this.container,"ace_focus")},$.prototype.showComposition=function(A){this.$composition=A,A.cssText||(A.cssText=this.textarea.style.cssText),A.useTextareaForIME==null&&(A.useTextareaForIME=this.$useTextareaForIME),this.$useTextareaForIME?(p.addCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText="",this.$moveTextAreaToCursor(),this.$cursorLayer.element.style.display="none"):A.markerId=this.session.addMarker(A.markerRange,"ace_composition_marker","text")},$.prototype.setCompositionText=function(A){var C=this.session.selection.cursor;this.addToken(A,"composition_placeholder",C.row,C.column),this.$moveTextAreaToCursor()},$.prototype.hideComposition=function(){if(this.$composition){this.$composition.markerId&&this.session.removeMarker(this.$composition.markerId),p.removeCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText=this.$composition.cssText;var A=this.session.selection.cursor;this.removeExtraToken(A.row,A.column),this.$composition=null,this.$cursorLayer.element.style.display=""}},$.prototype.setGhostText=function(A,C){var w=this.session.selection.cursor,y=C||{row:w.row,column:w.column};this.removeGhostText();var b=this.$calculateWrappedTextChunks(A,y);this.addToken(b[0].text,"ghost_text",y.row,y.column),this.$ghostText={text:A,position:{row:y.row,column:y.column}};var E=p.createElement("div");if(b.length>1){var _=this.hideTokensAfterPosition(y.row,y.column),R;b.slice(1).forEach(function(D){var z=p.createElement("div"),N=p.createElement("span");N.className="ace_ghost_text",D.wrapped&&(z.className="ghost_text_line_wrapped"),D.text.length===0&&(D.text=" "),N.appendChild(p.createTextNode(D.text)),z.appendChild(N),E.appendChild(z),R=z}),_.forEach(function(D){var z=p.createElement("span");f(D.type)||(z.className="ace_"+D.type.replace(/\./g," ace_")),z.appendChild(p.createTextNode(D.value)),R.appendChild(z)}),this.$ghostTextWidget={el:E,row:y.row,column:y.column,className:"ace_ghost_text_container"},this.session.widgetManager.addLineWidget(this.$ghostTextWidget);var M=this.$cursorLayer.getPixelPosition(y,!0),I=this.container,P=I.getBoundingClientRect().height,O=b.length*this.lineHeight,F=O<P-M.top;if(F)return;O<P?this.scrollBy(0,(b.length-1)*this.lineHeight):this.scrollToRow(y.row)}},$.prototype.$calculateWrappedTextChunks=function(A,C){var w=this.$size.scrollerWidth-this.$padding*2,y=Math.floor(w/this.characterWidth)-2;y=y<=0?60:y;for(var b=A.split(/\r?\n/),E=[],_=0;_<b.length;_++){var R=this.session.$getDisplayTokens(b[_],C.column),M=this.session.$computeWrapSplits(R,y,this.session.$tabSize);if(M.length>0){var I=0;M.push(b[_].length);for(var P=0;P<M.length;P++){var O=b[_].slice(I,M[P]);E.push({text:O,wrapped:!0}),I=M[P]}}else E.push({text:b[_],wrapped:!1})}return E},$.prototype.removeGhostText=function(){if(this.$ghostText){var A=this.$ghostText.position;this.removeExtraToken(A.row,A.column),this.$ghostTextWidget&&(this.session.widgetManager.removeLineWidget(this.$ghostTextWidget),this.$ghostTextWidget=null),this.$ghostText=null}},$.prototype.addToken=function(A,C,w,y){var b=this.session;b.bgTokenizer.lines[w]=null;var E={type:C,value:A},_=b.getTokens(w);if(y==null||!_.length)_.push(E);else for(var R=0,M=0;M<_.length;M++){var I=_[M];if(R+=I.value.length,y<=R){var P=I.value.length-(R-y),O=I.value.slice(0,P),F=I.value.slice(P);_.splice(M,1,{type:I.type,value:O},E,{type:I.type,value:F});break}}this.updateLines(w,w)},$.prototype.hideTokensAfterPosition=function(A,C){for(var w=this.session.getTokens(A),y=0,b=!1,E=[],_=0;_<w.length;_++){var R=w[_];if(y+=R.value.length,R.type!=="ghost_text"){if(b){E.push({type:R.type,value:R.value}),R.type="hidden_token";continue}y===C&&(b=!0)}}return this.updateLines(A,A),E},$.prototype.removeExtraToken=function(A,C){this.session.bgTokenizer.lines[A]=null,this.updateLines(A,A)},$.prototype.setTheme=function(A,C){var w=this;if(this.$themeId=A,w._dispatchEvent("themeChange",{theme:A}),!A||typeof A=="string"){var y=A||this.$options.theme.initialValue;s.loadModule(["theme",y],b)}else b(A);function b(E){if(w.$themeId!=A)return C&&C();if(!E||!E.cssClass)throw new Error("couldn't load module "+A+" or it didn't call define");E.$id&&(w.$themeId=E.$id),p.importCssString(E.cssText,E.cssClass,w.container),w.theme&&p.removeCssClass(w.container,w.theme.cssClass);var _="padding"in E?E.padding:"padding"in(w.theme||{})?4:w.$padding;w.$padding&&_!=w.$padding&&w.setPadding(_),w.$theme=E.cssClass,w.theme=E,p.addCssClass(w.container,E.cssClass),p.setCssClass(w.container,"ace_dark",E.isDark),w.$size&&(w.$size.width=0,w.$updateSizeAsync()),w._dispatchEvent("themeLoaded",{theme:E}),C&&C(),S.isSafari&&w.scroller&&(w.scroller.style.background="red",w.scroller.style.background="")}},$.prototype.getTheme=function(){return this.$themeId},$.prototype.setStyle=function(A,C){p.setCssClass(this.container,A,C!==!1)},$.prototype.unsetStyle=function(A){p.removeCssClass(this.container,A)},$.prototype.setCursorStyle=function(A){p.setStyle(this.scroller.style,"cursor",A)},$.prototype.setMouseCursor=function(A){p.setStyle(this.scroller.style,"cursor",A)},$.prototype.attachToShadowRoot=function(){p.importCssString(x,"ace_editor.css",this.container)},$.prototype.destroy=function(){this.freeze(),this.$fontMetrics.destroy(),this.$cursorLayer.destroy(),this.removeAllListeners(),this.container.textContent="",this.setOption("useResizeObserver",!1)},$.prototype.$updateCustomScrollbar=function(A){var C=this;this.$horizScroll=this.$vScroll=null,this.scrollBarV.element.remove(),this.scrollBarH.element.remove(),this.$scrollDecorator&&delete this.$scrollDecorator,A===!0?(this.scrollBarV=new m(this.container,this),this.scrollBarH=new c(this.container,this),this.scrollBarV.setHeight(this.$size.scrollerHeight),this.scrollBarH.setWidth(this.$size.scrollerWidth),this.scrollBarV.addEventListener("scroll",function(w){C.$scrollAnimation||C.session.setScrollTop(w.data-C.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function(w){C.$scrollAnimation||C.session.setScrollLeft(w.data-C.scrollMargin.left)}),this.$scrollDecorator=new T(this.scrollBarV,this),this.$scrollDecorator.$updateDecorators()):(this.scrollBarV=new d(this.container,this),this.scrollBarH=new l(this.container,this),this.scrollBarV.addEventListener("scroll",function(w){C.$scrollAnimation||C.session.setScrollTop(w.data-C.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function(w){C.$scrollAnimation||C.session.setScrollLeft(w.data-C.scrollMargin.left)}))},$.prototype.$addResizeObserver=function(){if(!(!window.ResizeObserver||this.$resizeObserver)){var A=this;this.$resizeTimer=g.delayedCall(function(){A.destroyed||A.onResize()},50),this.$resizeObserver=new window.ResizeObserver(function(C){var w=C[0].contentRect.width,y=C[0].contentRect.height;Math.abs(A.$size.width-w)>1||Math.abs(A.$size.height-y)>1?A.$resizeTimer.delay():A.$resizeTimer.cancel()}),this.$resizeObserver.observe(this.container)}},$}();L.prototype.CHANGE_CURSOR=1,L.prototype.CHANGE_MARKER=2,L.prototype.CHANGE_GUTTER=4,L.prototype.CHANGE_SCROLL=8,L.prototype.CHANGE_LINES=16,L.prototype.CHANGE_TEXT=32,L.prototype.CHANGE_SIZE=64,L.prototype.CHANGE_MARKER_BACK=128,L.prototype.CHANGE_MARKER_FRONT=256,L.prototype.CHANGE_FULL=512,L.prototype.CHANGE_H_SCROLL=1024,L.prototype.$changes=0,L.prototype.$padding=null,L.prototype.$frozen=!1,L.prototype.STEPS=8,n.implement(L.prototype,k),s.defineOptions(L.prototype,"renderer",{useResizeObserver:{set:function($){!$&&this.$resizeObserver?(this.$resizeObserver.disconnect(),this.$resizeTimer.cancel(),this.$resizeTimer=this.$resizeObserver=null):$&&!this.$resizeObserver&&this.$addResizeObserver()}},animatedScroll:{initialValue:!1},showInvisibles:{set:function($){this.$textLayer.setShowInvisibles($)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!1},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:!0},printMarginColumn:{set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function($){typeof $=="number"&&(this.$printMarginColumn=$),this.$showPrintMargin=!!$,this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&this.$printMarginColumn}},showGutter:{set:function($){this.$gutter.style.display=$?"block":"none",this.$loop.schedule(this.CHANGE_FULL),this.onGutterResize()},initialValue:!0},useSvgGutterIcons:{set:function($){this.$gutterLayer.$useSvgGutterIcons=$},initialValue:!1},showFoldedAnnotations:{set:function($){this.$gutterLayer.$showFoldedAnnotations=$},initialValue:!1},fadeFoldWidgets:{set:function($){p.setCssClass(this.$gutter,"ace_fade-fold-widgets",$)},initialValue:!1},showFoldWidgets:{set:function($){this.$gutterLayer.setShowFoldWidgets($),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},displayIndentGuides:{set:function($){this.$textLayer.setDisplayIndentGuides($)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!0},highlightIndentGuides:{set:function($){this.$textLayer.setHighlightIndentGuides($)==!0?this.$textLayer.$highlightIndentGuide():this.$textLayer.$clearActiveIndentGuide(this.$textLayer.$lines.cells)},initialValue:!0},highlightGutterLine:{set:function($){this.$gutterLayer.setHighlightGutterLine($),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},hScrollBarAlwaysVisible:{set:function($){(!this.$hScrollBarAlwaysVisible||!this.$horizScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},vScrollBarAlwaysVisible:{set:function($){(!this.$vScrollBarAlwaysVisible||!this.$vScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},fontSize:{set:function($){typeof $=="number"&&($=$+"px"),this.container.style.fontSize=$,this.updateFontSize()},initialValue:12},fontFamily:{set:function($){this.container.style.fontFamily=$,this.updateFontSize()}},maxLines:{set:function($){this.updateFull()}},minLines:{set:function($){this.$minLines<562949953421311||(this.$minLines=0),this.updateFull()}},maxPixelHeight:{set:function($){this.updateFull()},initialValue:0},scrollPastEnd:{set:function($){$=+$||0,this.$scrollPastEnd!=$&&(this.$scrollPastEnd=$,this.$loop.schedule(this.CHANGE_SCROLL))},initialValue:0,handlesSet:!0},fixedWidthGutter:{set:function($){this.$gutterLayer.$fixedWidth=!!$,this.$loop.schedule(this.CHANGE_GUTTER)}},customScrollbar:{set:function($){this.$updateCustomScrollbar($)},initialValue:!1},theme:{set:function($){this.setTheme($)},get:function(){return this.$themeId||this.theme},initialValue:"./theme/textmate",handlesSet:!0},hasCssTransforms:{},useTextareaForIME:{initialValue:!S.isMobile&&!S.isIE}}),t.VirtualRenderer=L});ace.define("ace/worker/worker_client",["require","exports","module","ace/lib/oop","ace/lib/net","ace/lib/event_emitter","ace/config"],function(e,t,r){"use strict";var n=e("../lib/oop"),p=e("../lib/net"),g=e("../lib/event_emitter").EventEmitter,s=e("../config");function u(l){var d="importScripts('"+p.qualifyURL(l)+"');";try{return new Blob([d],{type:"application/javascript"})}catch{var c=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,m=new c;return m.append(d),m.getBlob("application/javascript")}}function o(l){if(typeof Worker>"u")return{postMessage:function(){},terminate:function(){}};if(s.get("loadWorkerFromBlob")){var d=u(l),c=window.URL||window.webkitURL,m=c.createObjectURL(d);return new Worker(m)}return new Worker(l)}var i=function(l){l.postMessage||(l=this.$createWorkerFromOldConfig.apply(this,arguments)),this.$worker=l,this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.onMessage=this.onMessage.bind(this),this.callbackId=1,this.callbacks={},this.$worker.onmessage=this.onMessage};(function(){n.implement(this,g),this.$createWorkerFromOldConfig=function(l,d,c,m,h){if(e.nameToUrl&&!e.toUrl&&(e.toUrl=e.nameToUrl),s.get("packaged")||!e.toUrl)m=m||s.moduleUrl(d,"worker");else{var v=this.$normalizePath;m=m||v(e.toUrl("ace/worker/worker.js",null,"_"));var k={};l.forEach(function(x){k[x]=v(e.toUrl(x,null,"_").replace(/(\.js)?(\?.*)?$/,""))})}return this.$worker=o(m),h&&this.send("importScripts",h),this.$worker.postMessage({init:!0,tlns:k,module:d,classname:c}),this.$worker},this.onMessage=function(l){var d=l.data;switch(d.type){case"event":this._signal(d.name,{data:d.data});break;case"call":var c=this.callbacks[d.id];c&&(c(d.data),delete this.callbacks[d.id]);break;case"error":this.reportError(d.data);break;case"log":window.console&&console.log&&console.log.apply(console,d.data);break}},this.reportError=function(l){window.console&&console.error&&console.error(l)},this.$normalizePath=function(l){return p.qualifyURL(l)},this.terminate=function(){this._signal("terminate",{}),this.deltaQueue=null,this.$worker.terminate(),this.$worker.onerror=function(l){l.preventDefault()},this.$worker=null,this.$doc&&this.$doc.off("change",this.changeListener),this.$doc=null},this.send=function(l,d){this.$worker.postMessage({command:l,args:d})},this.call=function(l,d,c){if(c){var m=this.callbackId++;this.callbacks[m]=c,d.push(m)}this.send(l,d)},this.emit=function(l,d){try{d.data&&d.data.err&&(d.data.err={message:d.data.err.message,stack:d.data.err.stack,code:d.data.err.code}),this.$worker&&this.$worker.postMessage({event:l,data:{data:d.data}})}catch(c){console.error(c.stack)}},this.attachToDocument=function(l){this.$doc&&this.terminate(),this.$doc=l,this.call("setValue",[l.getValue()]),l.on("change",this.changeListener,!0)},this.changeListener=function(l){this.deltaQueue||(this.deltaQueue=[],setTimeout(this.$sendDeltaQueue,0)),l.action=="insert"?this.deltaQueue.push(l.start,l.lines):this.deltaQueue.push(l.start,l.end)},this.$sendDeltaQueue=function(){var l=this.deltaQueue;l&&(this.deltaQueue=null,l.length>50&&l.length>this.$doc.getLength()>>1?this.call("setValue",[this.$doc.getValue()]):this.emit("change",{data:l}))}}).call(i.prototype);var a=function(l,d,c){var m=null,h=!1,v=Object.create(g),k=[],x=new i({messageBuffer:k,terminate:function(){},postMessage:function(S){k.push(S),m&&(h?setTimeout(T):T())}});x.setEmitSync=function(S){h=S};var T=function(){var S=k.shift();S.command?m[S.command].apply(m,S.args):S.event&&v._signal(S.event,S.data)};return v.postMessage=function(S){x.onMessage({data:S})},v.callback=function(S,f){this.postMessage({type:"call",id:f,data:S})},v.emit=function(S,f){this.postMessage({type:"event",name:S,data:f})},s.loadModule(["worker",d],function(S){for(m=new S[c](v);k.length;)T()}),x};t.UIWorkerClient=a,t.WorkerClient=i,t.createWorker=o});ace.define("ace/placeholder",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/oop"],function(e,t,r){"use strict";var n=e("./range").Range,p=e("./lib/event_emitter").EventEmitter,g=e("./lib/oop"),s=function(){function u(o,i,a,l,d,c){var m=this;this.length=i,this.session=o,this.doc=o.getDocument(),this.mainClass=d,this.othersClass=c,this.$onUpdate=this.onUpdate.bind(this),this.doc.on("change",this.$onUpdate,!0),this.$others=l,this.$onCursorChange=function(){setTimeout(function(){m.onCursorChange()})},this.$pos=a;var h=o.getUndoManager().$undoStack||o.getUndoManager().$undostack||{length:-1};this.$undoStackDepth=h.length,this.setup(),o.selection.on("changeCursor",this.$onCursorChange)}return u.prototype.setup=function(){var o=this,i=this.doc,a=this.session;this.selectionBefore=a.selection.toJSON(),a.selection.inMultiSelectMode&&a.selection.toSingleRange(),this.pos=i.createAnchor(this.$pos.row,this.$pos.column);var l=this.pos;l.$insertRight=!0,l.detach(),l.markerId=a.addMarker(new n(l.row,l.column,l.row,l.column+this.length),this.mainClass,null,!1),this.others=[],this.$others.forEach(function(d){var c=i.createAnchor(d.row,d.column);c.$insertRight=!0,c.detach(),o.others.push(c)}),a.setUndoSelect(!1)},u.prototype.showOtherMarkers=function(){if(!this.othersActive){var o=this.session,i=this;this.othersActive=!0,this.others.forEach(function(a){a.markerId=o.addMarker(new n(a.row,a.column,a.row,a.column+i.length),i.othersClass,null,!1)})}},u.prototype.hideOtherMarkers=function(){if(this.othersActive){this.othersActive=!1;for(var o=0;o<this.others.length;o++)this.session.removeMarker(this.others[o].markerId)}},u.prototype.onUpdate=function(o){if(this.$updating)return this.updateAnchors(o);var i=o;if(i.start.row===i.end.row&&i.start.row===this.pos.row){this.$updating=!0;var a=o.action==="insert"?i.end.column-i.start.column:i.start.column-i.end.column,l=i.start.column>=this.pos.column&&i.start.column<=this.pos.column+this.length+1,d=i.start.column-this.pos.column;if(this.updateAnchors(o),l&&(this.length+=a),l&&!this.session.$fromUndo){if(o.action==="insert")for(var c=this.others.length-1;c>=0;c--){var m=this.others[c],h={row:m.row,column:m.column+d};this.doc.insertMergedLines(h,o.lines)}else if(o.action==="remove")for(var c=this.others.length-1;c>=0;c--){var m=this.others[c],h={row:m.row,column:m.column+d};this.doc.remove(new n(h.row,h.column,h.row,h.column-a))}}this.$updating=!1,this.updateMarkers()}},u.prototype.updateAnchors=function(o){this.pos.onChange(o);for(var i=this.others.length;i--;)this.others[i].onChange(o);this.updateMarkers()},u.prototype.updateMarkers=function(){if(!this.$updating){var o=this,i=this.session,a=function(d,c){i.removeMarker(d.markerId),d.markerId=i.addMarker(new n(d.row,d.column,d.row,d.column+o.length),c,null,!1)};a(this.pos,this.mainClass);for(var l=this.others.length;l--;)a(this.others[l],this.othersClass)}},u.prototype.onCursorChange=function(o){if(!(this.$updating||!this.session)){var i=this.session.selection.getCursor();i.row===this.pos.row&&i.column>=this.pos.column&&i.column<=this.pos.column+this.length?(this.showOtherMarkers(),this._emit("cursorEnter",o)):(this.hideOtherMarkers(),this._emit("cursorLeave",o))}},u.prototype.detach=function(){this.session.removeMarker(this.pos&&this.pos.markerId),this.hideOtherMarkers(),this.doc.off("change",this.$onUpdate),this.session.selection.off("changeCursor",this.$onCursorChange),this.session.setUndoSelect(!0),this.session=null},u.prototype.cancel=function(){if(this.$undoStackDepth!==-1){for(var o=this.session.getUndoManager(),i=(o.$undoStack||o.$undostack).length-this.$undoStackDepth,a=0;a<i;a++)o.undo(this.session,!0);this.selectionBefore&&this.session.selection.fromJSON(this.selectionBefore)}},u}();g.implement(s.prototype,p),t.PlaceHolder=s});ace.define("ace/mouse/multi_select_handler",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(e,t,r){var n=e("../lib/event"),p=e("../lib/useragent");function g(u,o){return u.row==o.row&&u.column==o.column}function s(u){var o=u.domEvent,i=o.altKey,a=o.shiftKey,l=o.ctrlKey,d=u.getAccelKey(),c=u.getButton();if(l&&p.isMac&&(c=o.button),u.editor.inMultiSelectMode&&c==2){u.editor.textInput.onContextMenu(u.domEvent);return}if(!l&&!i&&!d){c===0&&u.editor.inMultiSelectMode&&u.editor.exitMultiSelectMode();return}if(c===0){var m=u.editor,h=m.selection,v=m.inMultiSelectMode,k=u.getDocumentPosition(),x=h.getCursor(),T=u.inSelection()||h.isEmpty()&&g(k,x),S=u.x,f=u.y,L=function(O){S=O.clientX,f=O.clientY},$=m.session,A=m.renderer.pixelToScreenCoordinates(S,f),C=A,w;if(m.$mouseHandler.$enableJumpToDef)l&&i||d&&i?w=a?"block":"add":i&&m.$blockSelectEnabled&&(w="block");else if(d&&!i){if(w="add",!v&&a)return}else i&&m.$blockSelectEnabled&&(w="block");if(w&&p.isMac&&o.ctrlKey&&m.$mouseHandler.cancelContextMenu(),w=="add"){if(!v&&T)return;if(!v){var y=h.toOrientedRange();m.addSelectionMarker(y)}var b=h.rangeList.rangeAtPoint(k);m.inVirtualSelectionMode=!0,a&&(b=null,y=h.ranges[0]||y,m.removeSelectionMarker(y)),m.once("mouseup",function(){var O=h.toOrientedRange();b&&O.isEmpty()&&g(b.cursor,O.cursor)?h.substractPoint(O.cursor):(a?h.substractPoint(y.cursor):y&&(m.removeSelectionMarker(y),h.addRange(y)),h.addRange(O)),m.inVirtualSelectionMode=!1})}else if(w=="block"){u.stop(),m.inVirtualSelectionMode=!0;var E,_=[],R=function(){var O=m.renderer.pixelToScreenCoordinates(S,f),F=$.screenToDocumentPosition(O.row,O.column,O.offsetX);g(C,O)&&g(F,h.lead)||(C=O,m.selection.moveToPosition(F),m.renderer.scrollCursorIntoView(),m.removeSelectionMarkers(_),_=h.rectangularRangeBlock(C,A),m.$mouseHandler.$clickSelection&&_.length==1&&_[0].isEmpty()&&(_[0]=m.$mouseHandler.$clickSelection.clone()),_.forEach(m.addSelectionMarker,m),m.updateSelectionMarkers())};v&&!d?h.toSingleRange():!v&&d&&(E=h.toOrientedRange(),m.addSelectionMarker(E)),a?A=$.documentToScreenPosition(h.lead):h.moveToPosition(k),C={row:-1,column:-1};var M=function(O){R(),clearInterval(P),m.removeSelectionMarkers(_),_.length||(_=[h.toOrientedRange()]),E&&(m.removeSelectionMarker(E),h.toSingleRange(E));for(var F=0;F<_.length;F++)h.addRange(_[F]);m.inVirtualSelectionMode=!1,m.$mouseHandler.$clickSelection=null},I=R;n.capture(m.container,L,M);var P=setInterval(function(){I()},20);return u.preventDefault()}}}t.onMouseDown=s});ace.define("ace/commands/multi_select_commands",["require","exports","module","ace/keyboard/hash_handler"],function(e,t,r){t.defaultCommands=[{name:"addCursorAbove",description:"Add cursor above",exec:function(p){p.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelow",description:"Add cursor below",exec:function(p){p.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorAboveSkipCurrent",description:"Add cursor above (skip current)",exec:function(p){p.selectMoreLines(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelowSkipCurrent",description:"Add cursor below (skip current)",exec:function(p){p.selectMoreLines(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreBefore",description:"Select more before",exec:function(p){p.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreAfter",description:"Select more after",exec:function(p){p.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextBefore",description:"Select next before",exec:function(p){p.selectMore(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Left",mac:"Ctrl-Alt-Shift-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextAfter",description:"Select next after",exec:function(p){p.selectMore(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"toggleSplitSelectionIntoLines",description:"Split selection into lines",exec:function(p){p.multiSelect.rangeCount>1?p.multiSelect.joinSelections():p.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Alt-L",mac:"Ctrl-Alt-L"},readOnly:!0},{name:"splitSelectionIntoLines",description:"Split into lines",exec:function(p){p.multiSelect.splitIntoLines()},readOnly:!0},{name:"alignCursors",description:"Align cursors",exec:function(p){p.alignCursors()},bindKey:{win:"Ctrl-Alt-A",mac:"Ctrl-Alt-A"},scrollIntoView:"cursor"},{name:"findAll",description:"Find all",exec:function(p){p.findAll()},bindKey:{win:"Ctrl-Alt-K",mac:"Ctrl-Alt-G"},scrollIntoView:"cursor",readOnly:!0}],t.multiSelectCommands=[{name:"singleSelection",description:"Single selection",bindKey:"esc",exec:function(p){p.exitMultiSelectMode()},scrollIntoView:"cursor",readOnly:!0,isAvailable:function(p){return p&&p.inMultiSelectMode}}];var n=e("../keyboard/hash_handler").HashHandler;t.keyboardHandler=new n(t.multiSelectCommands)});ace.define("ace/multi_select",["require","exports","module","ace/range_list","ace/range","ace/selection","ace/mouse/multi_select_handler","ace/lib/event","ace/lib/lang","ace/commands/multi_select_commands","ace/search","ace/edit_session","ace/editor","ace/config"],function(e,t,r){var n=e("./range_list").RangeList,p=e("./range").Range,g=e("./selection").Selection,s=e("./mouse/multi_select_handler").onMouseDown,u=e("./lib/event"),o=e("./lib/lang"),i=e("./commands/multi_select_commands");t.commands=i.defaultCommands.concat(i.multiSelectCommands);var a=e("./search").Search,l=new a;function d(x,T,S){return l.$options.wrap=!0,l.$options.needle=T,l.$options.backwards=S==-1,l.find(x)}var c=e("./edit_session").EditSession;(function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}).call(c.prototype),function(){this.ranges=null,this.rangeList=null,this.addRange=function(x,T){if(x){if(!this.inMultiSelectMode&&this.rangeCount===0){var S=this.toOrientedRange();if(this.rangeList.add(S),this.rangeList.add(x),this.rangeList.ranges.length!=2)return this.rangeList.removeAll(),T||this.fromOrientedRange(x);this.rangeList.removeAll(),this.rangeList.add(S),this.$onAddRange(S)}x.cursor||(x.cursor=x.end);var f=this.rangeList.add(x);return this.$onAddRange(x),f.length&&this.$onRemoveRange(f),this.rangeCount>1&&!this.inMultiSelectMode&&(this._signal("multiSelect"),this.inMultiSelectMode=!0,this.session.$undoSelect=!1,this.rangeList.attach(this.session)),T||this.fromOrientedRange(x)}},this.toSingleRange=function(x){x=x||this.ranges[0];var T=this.rangeList.removeAll();T.length&&this.$onRemoveRange(T),x&&this.fromOrientedRange(x)},this.substractPoint=function(x){var T=this.rangeList.substractPoint(x);if(T)return this.$onRemoveRange(T),T[0]},this.mergeOverlappingRanges=function(){var x=this.rangeList.merge();x.length&&this.$onRemoveRange(x)},this.$onAddRange=function(x){this.rangeCount=this.rangeList.ranges.length,this.ranges.unshift(x),this._signal("addRange",{range:x})},this.$onRemoveRange=function(x){if(this.rangeCount=this.rangeList.ranges.length,this.rangeCount==1&&this.inMultiSelectMode){var T=this.rangeList.ranges.pop();x.push(T),this.rangeCount=0}for(var S=x.length;S--;){var f=this.ranges.indexOf(x[S]);this.ranges.splice(f,1)}this._signal("removeRange",{ranges:x}),this.rangeCount===0&&this.inMultiSelectMode&&(this.inMultiSelectMode=!1,this._signal("singleSelect"),this.session.$undoSelect=!0,this.rangeList.detach(this.session)),T=T||this.ranges[0],T&&!T.isEqual(this.getRange())&&this.fromOrientedRange(T)},this.$initRangeList=function(){this.rangeList||(this.rangeList=new n,this.ranges=[],this.rangeCount=0)},this.getAllRanges=function(){return this.rangeCount?this.rangeList.ranges.concat():[this.getRange()]},this.splitIntoLines=function(){for(var x=this.ranges.length?this.ranges:[this.getRange()],T=[],S=0;S<x.length;S++){var f=x[S],L=f.start.row,$=f.end.row;if(L===$)T.push(f.clone());else{for(T.push(new p(L,f.start.column,L,this.session.getLine(L).length));++L<$;)T.push(this.getLineRange(L,!0));T.push(new p($,0,$,f.end.column))}S==0&&!this.isBackwards()&&(T=T.reverse())}this.toSingleRange();for(var S=T.length;S--;)this.addRange(T[S])},this.joinSelections=function(){var x=this.rangeList.ranges,T=x[x.length-1],S=p.fromPoints(x[0].start,T.end);this.toSingleRange(),this.setSelectionRange(S,T.cursor==T.start)},this.toggleBlockSelection=function(){if(this.rangeCount>1){var x=this.rangeList.ranges,T=x[x.length-1],S=p.fromPoints(x[0].start,T.end);this.toSingleRange(),this.setSelectionRange(S,T.cursor==T.start)}else{var f=this.session.documentToScreenPosition(this.cursor),L=this.session.documentToScreenPosition(this.anchor),$=this.rectangularRangeBlock(f,L);$.forEach(this.addRange,this)}},this.rectangularRangeBlock=function(x,T,S){var f=[],L=x.column<T.column;if(L)var $=x.column,A=T.column,C=x.offsetX,w=T.offsetX;else var $=T.column,A=x.column,C=T.offsetX,w=x.offsetX;var y=x.row<T.row;if(y)var b=x.row,E=T.row;else var b=T.row,E=x.row;$<0&&($=0),b<0&&(b=0),b==E&&(S=!0);for(var _,R=b;R<=E;R++){var M=p.fromPoints(this.session.screenToDocumentPosition(R,$,C),this.session.screenToDocumentPosition(R,A,w));if(M.isEmpty()){if(_&&h(M.end,_))break;_=M.end}M.cursor=L?M.start:M.end,f.push(M)}if(y&&f.reverse(),!S){for(var I=f.length-1;f[I].isEmpty()&&I>0;)I--;if(I>0)for(var P=0;f[P].isEmpty();)P++;for(var O=I;O>=P;O--)f[O].isEmpty()&&f.splice(O,1)}return f}}.call(g.prototype);var m=e("./editor").Editor;(function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.addSelectionMarker=function(x){x.cursor||(x.cursor=x.end);var T=this.getSelectionStyle();return x.marker=this.session.addMarker(x,"ace_selection",T),this.session.$selectionMarkers.push(x),this.session.selectionMarkerCount=this.session.$selectionMarkers.length,x},this.removeSelectionMarker=function(x){if(x.marker){this.session.removeMarker(x.marker);var T=this.session.$selectionMarkers.indexOf(x);T!=-1&&this.session.$selectionMarkers.splice(T,1),this.session.selectionMarkerCount=this.session.$selectionMarkers.length}},this.removeSelectionMarkers=function(x){for(var T=this.session.$selectionMarkers,S=x.length;S--;){var f=x[S];if(f.marker){this.session.removeMarker(f.marker);var L=T.indexOf(f);L!=-1&&T.splice(L,1)}}this.session.selectionMarkerCount=T.length},this.$onAddRange=function(x){this.addSelectionMarker(x.range),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onRemoveRange=function(x){this.removeSelectionMarkers(x.ranges),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onMultiSelect=function(x){this.inMultiSelectMode||(this.inMultiSelectMode=!0,this.setStyle("ace_multiselect"),this.keyBinding.addKeyboardHandler(i.keyboardHandler),this.commands.setDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers())},this.$onSingleSelect=function(x){this.session.multiSelect.inVirtualMode||(this.inMultiSelectMode=!1,this.unsetStyle("ace_multiselect"),this.keyBinding.removeKeyboardHandler(i.keyboardHandler),this.commands.removeDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers(),this._emit("changeSelection"))},this.$onMultiSelectExec=function(x){var T=x.command,S=x.editor;if(S.multiSelect){if(T.multiSelectAction)T.multiSelectAction=="forEach"?f=S.forEachSelection(T,x.args):T.multiSelectAction=="forEachLine"?f=S.forEachSelection(T,x.args,!0):T.multiSelectAction=="single"?(S.exitMultiSelectMode(),f=T.exec(S,x.args||{})):f=T.multiSelectAction(S,x.args||{});else{var f=T.exec(S,x.args||{});S.multiSelect.addRange(S.multiSelect.toOrientedRange()),S.multiSelect.mergeOverlappingRanges()}return f}},this.forEachSelection=function(x,T,S){if(!this.inVirtualSelectionMode){var f=S&&S.keepOrder,L=S==!0||S&&S.$byLines,$=this.session,A=this.selection,C=A.rangeList,w=(f?A:C).ranges,y;if(!w.length)return x.exec?x.exec(this,T||{}):x(this,T||{});var b=A._eventRegistry;A._eventRegistry={};var E=new g($);this.inVirtualSelectionMode=!0;for(var _=w.length;_--;){if(L)for(;_>0&&w[_].start.row==w[_-1].end.row;)_--;E.fromOrientedRange(w[_]),E.index=_,this.selection=$.selection=E;var R=x.exec?x.exec(this,T||{}):x(this,T||{});!y&&R!==void 0&&(y=R),E.toOrientedRange(w[_])}E.detach(),this.selection=$.selection=A,this.inVirtualSelectionMode=!1,A._eventRegistry=b,A.mergeOverlappingRanges(),A.ranges[0]&&A.fromOrientedRange(A.ranges[0]);var M=this.renderer.$scrollAnimation;return this.onCursorChange(),this.onSelectionChange(),M&&M.from==M.to&&this.renderer.animateScrolling(M.from),y}},this.exitMultiSelectMode=function(){!this.inMultiSelectMode||this.inVirtualSelectionMode||this.multiSelect.toSingleRange()},this.getSelectedText=function(){var x="";if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){for(var T=this.multiSelect.rangeList.ranges,S=[],f=0;f<T.length;f++)S.push(this.session.getTextRange(T[f]));var L=this.session.getDocument().getNewLineCharacter();x=S.join(L),x.length==(S.length-1)*L.length&&(x="")}else this.selection.isEmpty()||(x=this.session.getTextRange(this.getSelectionRange()));return x},this.$checkMultiselectChange=function(x,T){if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){var S=this.multiSelect.ranges[0];if(this.multiSelect.isEmpty()&&T==this.multiSelect.anchor)return;var f=T==this.multiSelect.anchor?S.cursor==S.start?S.end:S.start:S.cursor;f.row!=T.row||this.session.$clipPositionToDocument(f.row,f.column).column!=T.column?this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange()):this.multiSelect.mergeOverlappingRanges()}},this.findAll=function(x,T,S){if(T=T||{},T.needle=x||T.needle,T.needle==null){var f=this.selection.isEmpty()?this.selection.getWordRange():this.selection.getRange();T.needle=this.session.getTextRange(f)}this.$search.set(T);var L=this.$search.findAll(this.session);if(!L.length)return 0;var $=this.multiSelect;S||$.toSingleRange(L[0]);for(var A=L.length;A--;)$.addRange(L[A],!0);return f&&$.rangeList.rangeAtPoint(f.start)&&$.addRange(f,!0),L.length},this.selectMoreLines=function(x,T){var S=this.selection.toOrientedRange(),f=S.cursor==S.end,L=this.session.documentToScreenPosition(S.cursor);this.selection.$desiredColumn&&(L.column=this.selection.$desiredColumn);var $=this.session.screenToDocumentPosition(L.row+x,L.column);if(S.isEmpty())var C=$;else var A=this.session.documentToScreenPosition(f?S.end:S.start),C=this.session.screenToDocumentPosition(A.row+x,A.column);if(f){var w=p.fromPoints($,C);w.cursor=w.start}else{var w=p.fromPoints(C,$);w.cursor=w.end}if(w.desiredColumn=L.column,!this.selection.inMultiSelectMode)this.selection.addRange(S);else if(T)var y=S.cursor;this.selection.addRange(w),y&&this.selection.substractPoint(y)},this.transposeSelections=function(x){for(var T=this.session,S=T.multiSelect,f=S.ranges,L=f.length;L--;){var $=f[L];if($.isEmpty()){var A=T.getWordRange($.start.row,$.start.column);$.start.row=A.start.row,$.start.column=A.start.column,$.end.row=A.end.row,$.end.column=A.end.column}}S.mergeOverlappingRanges();for(var C=[],L=f.length;L--;){var $=f[L];C.unshift(T.getTextRange($))}x<0?C.unshift(C.pop()):C.push(C.shift());for(var L=f.length;L--;){var $=f[L],w=$.clone();T.replace($,C[L]),$.start.row=w.start.row,$.start.column=w.start.column}S.fromOrientedRange(S.ranges[0])},this.selectMore=function(x,T,S){var f=this.session,L=f.multiSelect,$=L.toOrientedRange();if(!($.isEmpty()&&($=f.getWordRange($.start.row,$.start.column),$.cursor=x==-1?$.start:$.end,this.multiSelect.addRange($),S))){var A=f.getTextRange($),C=d(f,A,x);C&&(C.cursor=x==-1?C.start:C.end,this.session.unfold(C),this.multiSelect.addRange(C),this.renderer.scrollCursorIntoView(null,.5)),T&&this.multiSelect.substractPoint($.cursor)}},this.alignCursors=function(){var x=this.session,T=x.multiSelect,S=T.ranges,f=-1,L=S.filter(function(I){if(I.cursor.row==f)return!0;f=I.cursor.row});if(!S.length||L.length==S.length-1){var $=this.selection.getRange(),A=$.start.row,C=$.end.row,w=A==C;if(w){var y=this.session.getLength(),b;do b=this.session.getLine(C);while(/[=:]/.test(b)&&++C<y);do b=this.session.getLine(A);while(/[=:]/.test(b)&&--A>0);A<0&&(A=0),C>=y&&(C=y-1)}var E=this.session.removeFullLines(A,C);E=this.$reAlignText(E,w),this.session.insert({row:A,column:0},E.join(`
`)+`
`),w||($.start.column=0,$.end.column=E[E.length-1].length),this.selection.setRange($)}else{L.forEach(function(I){T.substractPoint(I.cursor)});var _=0,R=1/0,M=S.map(function(I){var P=I.cursor,O=x.getLine(P.row),F=O.substr(P.column).search(/\S/g);return F==-1&&(F=0),P.column>_&&(_=P.column),F<R&&(R=F),F});S.forEach(function(I,P){var O=I.cursor,F=_-O.column,D=M[P]-R;F>D?x.insert(O,o.stringRepeat(" ",F-D)):x.remove(new p(O.row,O.column,O.row,O.column-F+D)),I.start.column=I.end.column=_,I.start.row=I.end.row=O.row,I.cursor=I.end}),T.fromOrientedRange(S[0]),this.renderer.updateCursor(),this.renderer.updateBackMarkers()}},this.$reAlignText=function(x,T){var S=!0,f=!0,L,$,A;return x.map(function(E){var _=E.match(/(\s*)(.*?)(\s*)([=:].*)/);return _?L==null?(L=_[1].length,$=_[2].length,A=_[3].length,_):(L+$+A!=_[1].length+_[2].length+_[3].length&&(f=!1),L!=_[1].length&&(S=!1),L>_[1].length&&(L=_[1].length),$<_[2].length&&($=_[2].length),A>_[3].length&&(A=_[3].length),_):[E]}).map(T?w:S?f?y:w:b);function C(E){return o.stringRepeat(" ",E)}function w(E){return E[2]?C(L)+E[2]+C($-E[2].length+A)+E[4].replace(/^([=:])\s+/,"$1 "):E[0]}function y(E){return E[2]?C(L+$-E[2].length)+E[2]+C(A)+E[4].replace(/^([=:])\s+/,"$1 "):E[0]}function b(E){return E[2]?C(L)+E[2]+C(A)+E[4].replace(/^([=:])\s+/,"$1 "):E[0]}}}).call(m.prototype);function h(x,T){return x.row==T.row&&x.column==T.column}t.onSessionChange=function(x){var T=x.session;T&&!T.multiSelect&&(T.$selectionMarkers=[],T.selection.$initRangeList(),T.multiSelect=T.selection),this.multiSelect=T&&T.multiSelect;var S=x.oldSession;S&&(S.multiSelect.off("addRange",this.$onAddRange),S.multiSelect.off("removeRange",this.$onRemoveRange),S.multiSelect.off("multiSelect",this.$onMultiSelect),S.multiSelect.off("singleSelect",this.$onSingleSelect),S.multiSelect.lead.off("change",this.$checkMultiselectChange),S.multiSelect.anchor.off("change",this.$checkMultiselectChange)),T&&(T.multiSelect.on("addRange",this.$onAddRange),T.multiSelect.on("removeRange",this.$onRemoveRange),T.multiSelect.on("multiSelect",this.$onMultiSelect),T.multiSelect.on("singleSelect",this.$onSingleSelect),T.multiSelect.lead.on("change",this.$checkMultiselectChange),T.multiSelect.anchor.on("change",this.$checkMultiselectChange)),T&&this.inMultiSelectMode!=T.selection.inMultiSelectMode&&(T.selection.inMultiSelectMode?this.$onMultiSelect():this.$onSingleSelect())};function v(x){x.$multiselectOnSessionChange||(x.$onAddRange=x.$onAddRange.bind(x),x.$onRemoveRange=x.$onRemoveRange.bind(x),x.$onMultiSelect=x.$onMultiSelect.bind(x),x.$onSingleSelect=x.$onSingleSelect.bind(x),x.$multiselectOnSessionChange=t.onSessionChange.bind(x),x.$checkMultiselectChange=x.$checkMultiselectChange.bind(x),x.$multiselectOnSessionChange(x),x.on("changeSession",x.$multiselectOnSessionChange),x.on("mousedown",s),x.commands.addCommands(i.defaultCommands),k(x))}function k(x){if(!x.textInput)return;var T=x.textInput.getElement(),S=!1;u.addListener(T,"keydown",function(L){var $=L.keyCode==18&&!(L.ctrlKey||L.shiftKey||L.metaKey);x.$blockSelectEnabled&&$?S||(x.renderer.setMouseCursor("crosshair"),S=!0):S&&f()},x),u.addListener(T,"keyup",f,x),u.addListener(T,"blur",f,x);function f(L){S&&(x.renderer.setMouseCursor(""),S=!1)}}t.MultiSelect=v,e("./config").defineOptions(m.prototype,"editor",{enableMultiselect:{set:function(x){v(this),x?this.on("mousedown",s):this.off("mousedown",s)},value:!0},enableBlockSelect:{set:function(x){this.$blockSelectEnabled=x},value:!0}})});ace.define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"],function(e,t,r){"use strict";var n=e("../../range").Range,p=t.FoldMode=function(){};(function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(g,s,u){var o=g.getLine(u);return this.foldingStartMarker.test(o)?"start":s=="markbeginend"&&this.foldingStopMarker&&this.foldingStopMarker.test(o)?"end":""},this.getFoldWidgetRange=function(g,s,u){return null},this.indentationBlock=function(g,s,u){var o=/\S/,i=g.getLine(s),a=i.search(o);if(a!=-1){for(var l=u||i.length,d=g.getLength(),c=s,m=s;++s<d;){var h=g.getLine(s).search(o);if(h!=-1){if(h<=a){var v=g.getTokenAt(s,0);if(!v||v.type!=="string")break}m=s}}if(m>c){var k=g.getLine(m).length;return new n(c,l,m,k)}}},this.openingBracketBlock=function(g,s,u,o,i){var a={row:u,column:o+1},l=g.$findClosingBracket(s,a,i);if(l){var d=g.foldWidgets[l.row];return d==null&&(d=g.getFoldWidget(l.row)),d=="start"&&l.row>a.row&&(l.row--,l.column=g.getLine(l.row).length),n.fromPoints(a,l)}},this.closingBracketBlock=function(g,s,u,o,i){var a={row:u,column:o},l=g.$findOpeningBracket(s,a);if(l)return l.column++,a.column--,n.fromPoints(l,a)}}).call(p.prototype)});ace.define("ace/ext/error_marker",["require","exports","module","ace/line_widgets","ace/lib/dom","ace/range","ace/config"],function(e,t,r){"use strict";var n=e("../line_widgets").LineWidgets,p=e("../lib/dom"),g=e("../range").Range,s=e("../config").nls;function u(i,a,l){for(var d=0,c=i.length-1;d<=c;){var m=d+c>>1,h=l(a,i[m]);if(h>0)d=m+1;else if(h<0)c=m-1;else return m}return-(d+1)}function o(i,a,l){var d=i.getAnnotations().sort(g.comparePoints);if(d.length){var c=u(d,{row:a,column:-1},g.comparePoints);c<0&&(c=-c-1),c>=d.length?c=l>0?0:d.length-1:c===0&&l<0&&(c=d.length-1);var m=d[c];if(!(!m||!l)){if(m.row===a){do m=d[c+=l];while(m&&m.row===a);if(!m)return d.slice()}var h=[];a=m.row;do h[l<0?"unshift":"push"](m),m=d[c+=l];while(m&&m.row==a);return h.length&&h}}}t.showErrorMarker=function(i,a){var l=i.session;l.widgetManager||(l.widgetManager=new n(l),l.widgetManager.attach(i));var d=i.getCursorPosition(),c=d.row,m=l.widgetManager.getWidgetsAtRow(c).filter(function($){return $.type=="errorMarker"})[0];m?m.destroy():c-=a;var h=o(l,c,a),v;if(h){var k=h[0];d.column=(k.pos&&typeof k.column!="number"?k.pos.sc:k.column)||0,d.row=k.row,v=i.renderer.$gutterLayer.$annotations[d.row]}else{if(m)return;v={displayText:[s("error-marker.good-state","Looks good!")],className:"ace_ok"}}i.session.unfold(d.row),i.selection.moveToPosition(d);var x={row:d.row,fixedWidth:!0,coverGutter:!0,el:p.createElement("div"),type:"errorMarker"},T=x.el.appendChild(p.createElement("div")),S=x.el.appendChild(p.createElement("div"));S.className="error_widget_arrow "+v.className;var f=i.renderer.$cursorLayer.getPixelPosition(d).left;S.style.left=f+i.renderer.gutterWidth-5+"px",x.el.className="error_widget_wrapper",T.className="error_widget "+v.className,v.displayText.forEach(function($,A){T.appendChild(p.createTextNode($)),A<v.displayText.length-1&&T.appendChild(p.createElement("br"))}),T.appendChild(p.createElement("div"));var L=function($,A,C){if(A===0&&(C==="esc"||C==="return"))return x.destroy(),{command:"null"}};x.destroy=function(){i.$mouseHandler.isMousePressed||(i.keyBinding.removeKeyboardHandler(L),l.widgetManager.removeLineWidget(x),i.off("changeSelection",x.destroy),i.off("changeSession",x.destroy),i.off("mouseup",x.destroy),i.off("change",x.destroy))},i.keyBinding.addKeyboardHandler(L),i.on("changeSelection",x.destroy),i.on("changeSession",x.destroy),i.on("mouseup",x.destroy),i.on("change",x.destroy),i.session.widgetManager.addLineWidget(x),x.el.onmousedown=i.focus.bind(i),i.renderer.scrollCursorIntoView(null,.5,{bottom:x.el.offsetHeight})},p.importCssString(`
    .error_widget_wrapper {
        background: inherit;
        color: inherit;
        border:none
    }
    .error_widget {
        border-top: solid 2px;
        border-bottom: solid 2px;
        margin: 5px 0;
        padding: 10px 40px;
        white-space: pre-wrap;
    }
    .error_widget.ace_error, .error_widget_arrow.ace_error{
        border-color: #ff5a5a
    }
    .error_widget.ace_warning, .error_widget_arrow.ace_warning{
        border-color: #F1D817
    }
    .error_widget.ace_info, .error_widget_arrow.ace_info{
        border-color: #5a5a5a
    }
    .error_widget.ace_ok, .error_widget_arrow.ace_ok{
        border-color: #5aaa5a
    }
    .error_widget_arrow {
        position: absolute;
        border: solid 5px;
        border-top-color: transparent!important;
        border-right-color: transparent!important;
        border-left-color: transparent!important;
        top: -5px;
    }
`,"error_marker.css",!1)});ace.define("ace/ace",["require","exports","module","ace/lib/dom","ace/range","ace/editor","ace/edit_session","ace/undomanager","ace/virtual_renderer","ace/worker/worker_client","ace/keyboard/hash_handler","ace/placeholder","ace/multi_select","ace/mode/folding/fold_mode","ace/theme/textmate","ace/ext/error_marker","ace/config","ace/loader_build"],function(e,t,r){"use strict";e("./loader_build")(t);var n=e("./lib/dom"),p=e("./range").Range,g=e("./editor").Editor,s=e("./edit_session").EditSession,u=e("./undomanager").UndoManager,o=e("./virtual_renderer").VirtualRenderer;e("./worker/worker_client"),e("./keyboard/hash_handler"),e("./placeholder"),e("./multi_select"),e("./mode/folding/fold_mode"),e("./theme/textmate"),e("./ext/error_marker"),t.config=e("./config"),t.edit=function(i,a){if(typeof i=="string"){var l=i;if(i=document.getElementById(l),!i)throw new Error("ace.edit can't find div #"+l)}if(i&&i.env&&i.env.editor instanceof g)return i.env.editor;var d="";if(i&&/input|textarea/i.test(i.tagName)){var c=i;d=c.value,i=n.createElement("pre"),c.parentNode.replaceChild(i,c)}else i&&(d=i.textContent,i.innerHTML="");var m=t.createEditSession(d),h=new g(new o(i),m,a),v={document:m,editor:h,onResize:h.resize.bind(h,null)};return c&&(v.textarea=c),h.on("destroy",function(){v.editor.container.env=null}),h.container.env=h.env=v,h},t.createEditSession=function(i,a){var l=new s(i,a);return l.setUndoManager(new u),l},t.Range=p,t.Editor=g,t.EditSession=s,t.UndoManager=u,t.VirtualRenderer=o,t.version=t.config.version});(function(){ace.require(["ace/ace"],function(e){e&&(e.config.init(!0),e.define=ace.define);var t=function(){return this}();!t&&typeof window<"u"&&(t=window),!t&&typeof self<"u"&&(t=self),t.ace||(t.ace=e);for(var r in e)e.hasOwnProperty(r)&&(t.ace[r]=e[r]);t.ace.default=t.ace,typeof na=="object"&&typeof jc=="object"&&na&&(na.exports=t.ace)})})()});var On={};Sm(On,{afterMain:()=>ld,afterRead:()=>nd,afterWrite:()=>pd,applyStyles:()=>ni,arrow:()=>Cn,auto:()=>Fi,basePlacements:()=>jr,beforeMain:()=>ad,beforeRead:()=>od,beforeWrite:()=>dd,bottom:()=>fe,clippingParents:()=>Na,computeStyles:()=>si,createPopper:()=>Ki,createPopperBase:()=>yd,createPopperLite:()=>xd,detectOverflow:()=>ze,end:()=>lo,eventListeners:()=>li,flip:()=>$n,hide:()=>Rn,left:()=>se,main:()=>sd,modifierPhases:()=>za,offset:()=>Mn,placements:()=>Bi,popper:()=>Ao,popperGenerator:()=>Do,popperOffsets:()=>pi,preventOverflow:()=>In,read:()=>id,reference:()=>Fa,right:()=>ce,start:()=>Rr,top:()=>ie,variationPlacements:()=>Sn,viewport:()=>zi,write:()=>cd});var ie="top",fe="bottom",ce="right",se="left",Fi="auto",jr=[ie,fe,ce,se],Rr="start",lo="end",Na="clippingParents",zi="viewport",Ao="popper",Fa="reference",Sn=jr.reduce(function(e,t){return e.concat([t+"-"+Rr,t+"-"+lo])},[]),Bi=[].concat(jr,[Fi]).reduce(function(e,t){return e.concat([t,t+"-"+Rr,t+"-"+lo])},[]),od="beforeRead",id="read",nd="afterRead",ad="beforeMain",sd="main",ld="afterMain",dd="beforeWrite",cd="write",pd="afterWrite",za=[od,id,nd,ad,sd,ld,dd,cd,pd];function xe(e){return e?(e.nodeName||"").toLowerCase():null}function re(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function ir(e){var t=re(e).Element;return e instanceof t||e instanceof Element}function we(e){var t=re(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function ii(e){if(typeof ShadowRoot>"u")return!1;var t=re(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function Tm(e){var t=e.state;Object.keys(t.elements).forEach(function(r){var n=t.styles[r]||{},p=t.attributes[r]||{},g=t.elements[r];!we(g)||!xe(g)||(Object.assign(g.style,n),Object.keys(p).forEach(function(s){var u=p[s];u===!1?g.removeAttribute(s):g.setAttribute(s,u===!0?"":u)}))})}function Am(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow),function(){Object.keys(t.elements).forEach(function(n){var p=t.elements[n],g=t.attributes[n]||{},s=Object.keys(t.styles.hasOwnProperty(n)?t.styles[n]:r[n]),u=s.reduce(function(o,i){return o[i]="",o},{});!we(p)||!xe(p)||(Object.assign(p.style,u),Object.keys(g).forEach(function(o){p.removeAttribute(o)}))})}}var ni={name:"applyStyles",enabled:!0,phase:"write",fn:Tm,effect:Am,requires:["computeStyles"]};function ke(e){return e.split("-")[0]}var fr=Math.max,Lo=Math.min,Wr=Math.round;function ai(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function Ui(){return!/^((?!chrome|android).)*safari/i.test(ai())}function nr(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var n=e.getBoundingClientRect(),p=1,g=1;t&&we(e)&&(p=e.offsetWidth>0&&Wr(n.width)/e.offsetWidth||1,g=e.offsetHeight>0&&Wr(n.height)/e.offsetHeight||1);var s=ir(e)?re(e):window,u=s.visualViewport,o=!Ui()&&r,i=(n.left+(o&&u?u.offsetLeft:0))/p,a=(n.top+(o&&u?u.offsetTop:0))/g,l=n.width/p,d=n.height/g;return{width:l,height:d,top:a,right:i+l,bottom:a+d,left:i,x:i,y:a}}function $o(e){var t=nr(e),r=e.offsetWidth,n=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-n)<=1&&(n=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:n}}function Hi(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&ii(r)){var n=t;do{if(n&&e.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function Fe(e){return re(e).getComputedStyle(e)}function Ba(e){return["table","td","th"].indexOf(xe(e))>=0}function Ae(e){return((ir(e)?e.ownerDocument:e.document)||window.document).documentElement}function Vr(e){return xe(e)==="html"?e:e.assignedSlot||e.parentNode||(ii(e)?e.host:null)||Ae(e)}function ud(e){return!we(e)||Fe(e).position==="fixed"?null:e.offsetParent}function Lm(e){var t=/firefox/i.test(ai()),r=/Trident/i.test(ai());if(r&&we(e)){var n=Fe(e);if(n.position==="fixed")return null}var p=Vr(e);for(ii(p)&&(p=p.host);we(p)&&["html","body"].indexOf(xe(p))<0;){var g=Fe(p);if(g.transform!=="none"||g.perspective!=="none"||g.contain==="paint"||["transform","perspective"].indexOf(g.willChange)!==-1||t&&g.willChange==="filter"||t&&g.filter&&g.filter!=="none")return p;p=p.parentNode}return null}function vr(e){for(var t=re(e),r=ud(e);r&&Ba(r)&&Fe(r).position==="static";)r=ud(r);return r&&(xe(r)==="html"||xe(r)==="body"&&Fe(r).position==="static")?t:r||Lm(e)||t}function Ro(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Mo(e,t,r){return fr(e,Lo(t,r))}function md(e,t,r){var n=Mo(e,t,r);return n>r?r:n}function ji(){return{top:0,right:0,bottom:0,left:0}}function Wi(e){return Object.assign({},ji(),e)}function Vi(e,t){return t.reduce(function(r,n){return r[n]=e,r},{})}var $m=function(t,r){return t=typeof t=="function"?t(Object.assign({},r.rects,{placement:r.placement})):t,Wi(typeof t!="number"?t:Vi(t,jr))};function Rm(e){var t,r=e.state,n=e.name,p=e.options,g=r.elements.arrow,s=r.modifiersData.popperOffsets,u=ke(r.placement),o=Ro(u),i=[se,ce].indexOf(u)>=0,a=i?"height":"width";if(!(!g||!s)){var l=$m(p.padding,r),d=$o(g),c=o==="y"?ie:se,m=o==="y"?fe:ce,h=r.rects.reference[a]+r.rects.reference[o]-s[o]-r.rects.popper[a],v=s[o]-r.rects.reference[o],k=vr(g),x=k?o==="y"?k.clientHeight||0:k.clientWidth||0:0,T=h/2-v/2,S=l[c],f=x-d[a]-l[m],L=x/2-d[a]/2+T,$=Mo(S,L,f),A=o;r.modifiersData[n]=(t={},t[A]=$,t.centerOffset=$-L,t)}}function Mm(e){var t=e.state,r=e.options,n=r.element,p=n===void 0?"[data-popper-arrow]":n;p!=null&&(typeof p=="string"&&(p=t.elements.popper.querySelector(p),!p)||Hi(t.elements.popper,p)&&(t.elements.arrow=p))}var Cn={name:"arrow",enabled:!0,phase:"main",fn:Rm,effect:Mm,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ar(e){return e.split("-")[1]}var Im={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Om(e,t){var r=e.x,n=e.y,p=t.devicePixelRatio||1;return{x:Wr(r*p)/p||0,y:Wr(n*p)/p||0}}function gd(e){var t,r=e.popper,n=e.popperRect,p=e.placement,g=e.variation,s=e.offsets,u=e.position,o=e.gpuAcceleration,i=e.adaptive,a=e.roundOffsets,l=e.isFixed,d=s.x,c=d===void 0?0:d,m=s.y,h=m===void 0?0:m,v=typeof a=="function"?a({x:c,y:h}):{x:c,y:h};c=v.x,h=v.y;var k=s.hasOwnProperty("x"),x=s.hasOwnProperty("y"),T=se,S=ie,f=window;if(i){var L=vr(r),$="clientHeight",A="clientWidth";if(L===re(r)&&(L=Ae(r),Fe(L).position!=="static"&&u==="absolute"&&($="scrollHeight",A="scrollWidth")),L=L,p===ie||(p===se||p===ce)&&g===lo){S=fe;var C=l&&L===f&&f.visualViewport?f.visualViewport.height:L[$];h-=C-n.height,h*=o?1:-1}if(p===se||(p===ie||p===fe)&&g===lo){T=ce;var w=l&&L===f&&f.visualViewport?f.visualViewport.width:L[A];c-=w-n.width,c*=o?1:-1}}var y=Object.assign({position:u},i&&Im),b=a===!0?Om({x:c,y:h},re(r)):{x:c,y:h};if(c=b.x,h=b.y,o){var E;return Object.assign({},y,(E={},E[S]=x?"0":"",E[T]=k?"0":"",E.transform=(f.devicePixelRatio||1)<=1?"translate("+c+"px, "+h+"px)":"translate3d("+c+"px, "+h+"px, 0)",E))}return Object.assign({},y,(t={},t[S]=x?h+"px":"",t[T]=k?c+"px":"",t.transform="",t))}function Pm(e){var t=e.state,r=e.options,n=r.gpuAcceleration,p=n===void 0?!0:n,g=r.adaptive,s=g===void 0?!0:g,u=r.roundOffsets,o=u===void 0?!0:u,i={placement:ke(t.placement),variation:ar(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:p,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,gd(Object.assign({},i,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:s,roundOffsets:o})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,gd(Object.assign({},i,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:o})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}var si={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Pm,data:{}};var Tn={passive:!0};function Dm(e){var t=e.state,r=e.instance,n=e.options,p=n.scroll,g=p===void 0?!0:p,s=n.resize,u=s===void 0?!0:s,o=re(t.elements.popper),i=[].concat(t.scrollParents.reference,t.scrollParents.popper);return g&&i.forEach(function(a){a.addEventListener("scroll",r.update,Tn)}),u&&o.addEventListener("resize",r.update,Tn),function(){g&&i.forEach(function(a){a.removeEventListener("scroll",r.update,Tn)}),u&&o.removeEventListener("resize",r.update,Tn)}}var li={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Dm,data:{}};var Nm={left:"right",right:"left",bottom:"top",top:"bottom"};function di(e){return e.replace(/left|right|bottom|top/g,function(t){return Nm[t]})}var Fm={start:"end",end:"start"};function An(e){return e.replace(/start|end/g,function(t){return Fm[t]})}function Io(e){var t=re(e),r=t.pageXOffset,n=t.pageYOffset;return{scrollLeft:r,scrollTop:n}}function Oo(e){return nr(Ae(e)).left+Io(e).scrollLeft}function Ua(e,t){var r=re(e),n=Ae(e),p=r.visualViewport,g=n.clientWidth,s=n.clientHeight,u=0,o=0;if(p){g=p.width,s=p.height;var i=Ui();(i||!i&&t==="fixed")&&(u=p.offsetLeft,o=p.offsetTop)}return{width:g,height:s,x:u+Oo(e),y:o}}function Ha(e){var t,r=Ae(e),n=Io(e),p=(t=e.ownerDocument)==null?void 0:t.body,g=fr(r.scrollWidth,r.clientWidth,p?p.scrollWidth:0,p?p.clientWidth:0),s=fr(r.scrollHeight,r.clientHeight,p?p.scrollHeight:0,p?p.clientHeight:0),u=-n.scrollLeft+Oo(e),o=-n.scrollTop;return Fe(p||r).direction==="rtl"&&(u+=fr(r.clientWidth,p?p.clientWidth:0)-g),{width:g,height:s,x:u,y:o}}function Po(e){var t=Fe(e),r=t.overflow,n=t.overflowX,p=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+p+n)}function Ln(e){return["html","body","#document"].indexOf(xe(e))>=0?e.ownerDocument.body:we(e)&&Po(e)?e:Ln(Vr(e))}function co(e,t){var r;t===void 0&&(t=[]);var n=Ln(e),p=n===((r=e.ownerDocument)==null?void 0:r.body),g=re(n),s=p?[g].concat(g.visualViewport||[],Po(n)?n:[]):n,u=t.concat(s);return p?u:u.concat(co(Vr(s)))}function ci(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function zm(e,t){var r=nr(e,!1,t==="fixed");return r.top=r.top+e.clientTop,r.left=r.left+e.clientLeft,r.bottom=r.top+e.clientHeight,r.right=r.left+e.clientWidth,r.width=e.clientWidth,r.height=e.clientHeight,r.x=r.left,r.y=r.top,r}function hd(e,t,r){return t===zi?ci(Ua(e,r)):ir(t)?zm(t,r):ci(Ha(Ae(e)))}function Bm(e){var t=co(Vr(e)),r=["absolute","fixed"].indexOf(Fe(e).position)>=0,n=r&&we(e)?vr(e):e;return ir(n)?t.filter(function(p){return ir(p)&&Hi(p,n)&&xe(p)!=="body"}):[]}function ja(e,t,r,n){var p=t==="clippingParents"?Bm(e):[].concat(t),g=[].concat(p,[r]),s=g[0],u=g.reduce(function(o,i){var a=hd(e,i,n);return o.top=fr(a.top,o.top),o.right=Lo(a.right,o.right),o.bottom=Lo(a.bottom,o.bottom),o.left=fr(a.left,o.left),o},hd(e,s,n));return u.width=u.right-u.left,u.height=u.bottom-u.top,u.x=u.left,u.y=u.top,u}function Gi(e){var t=e.reference,r=e.element,n=e.placement,p=n?ke(n):null,g=n?ar(n):null,s=t.x+t.width/2-r.width/2,u=t.y+t.height/2-r.height/2,o;switch(p){case ie:o={x:s,y:t.y-r.height};break;case fe:o={x:s,y:t.y+t.height};break;case ce:o={x:t.x+t.width,y:u};break;case se:o={x:t.x-r.width,y:u};break;default:o={x:t.x,y:t.y}}var i=p?Ro(p):null;if(i!=null){var a=i==="y"?"height":"width";switch(g){case Rr:o[i]=o[i]-(t[a]/2-r[a]/2);break;case lo:o[i]=o[i]+(t[a]/2-r[a]/2);break;default:}}return o}function ze(e,t){t===void 0&&(t={});var r=t,n=r.placement,p=n===void 0?e.placement:n,g=r.strategy,s=g===void 0?e.strategy:g,u=r.boundary,o=u===void 0?Na:u,i=r.rootBoundary,a=i===void 0?zi:i,l=r.elementContext,d=l===void 0?Ao:l,c=r.altBoundary,m=c===void 0?!1:c,h=r.padding,v=h===void 0?0:h,k=Wi(typeof v!="number"?v:Vi(v,jr)),x=d===Ao?Fa:Ao,T=e.rects.popper,S=e.elements[m?x:d],f=ja(ir(S)?S:S.contextElement||Ae(e.elements.popper),o,a,s),L=nr(e.elements.reference),$=Gi({reference:L,element:T,strategy:"absolute",placement:p}),A=ci(Object.assign({},T,$)),C=d===Ao?A:L,w={top:f.top-C.top+k.top,bottom:C.bottom-f.bottom+k.bottom,left:f.left-C.left+k.left,right:C.right-f.right+k.right},y=e.modifiersData.offset;if(d===Ao&&y){var b=y[p];Object.keys(w).forEach(function(E){var _=[ce,fe].indexOf(E)>=0?1:-1,R=[ie,fe].indexOf(E)>=0?"y":"x";w[E]+=b[R]*_})}return w}function Wa(e,t){t===void 0&&(t={});var r=t,n=r.placement,p=r.boundary,g=r.rootBoundary,s=r.padding,u=r.flipVariations,o=r.allowedAutoPlacements,i=o===void 0?Bi:o,a=ar(n),l=a?u?Sn:Sn.filter(function(m){return ar(m)===a}):jr,d=l.filter(function(m){return i.indexOf(m)>=0});d.length===0&&(d=l);var c=d.reduce(function(m,h){return m[h]=ze(e,{placement:h,boundary:p,rootBoundary:g,padding:s})[ke(h)],m},{});return Object.keys(c).sort(function(m,h){return c[m]-c[h]})}function Um(e){if(ke(e)===Fi)return[];var t=di(e);return[An(e),t,An(t)]}function Hm(e){var t=e.state,r=e.options,n=e.name;if(!t.modifiersData[n]._skip){for(var p=r.mainAxis,g=p===void 0?!0:p,s=r.altAxis,u=s===void 0?!0:s,o=r.fallbackPlacements,i=r.padding,a=r.boundary,l=r.rootBoundary,d=r.altBoundary,c=r.flipVariations,m=c===void 0?!0:c,h=r.allowedAutoPlacements,v=t.options.placement,k=ke(v),x=k===v,T=o||(x||!m?[di(v)]:Um(v)),S=[v].concat(T).reduce(function(W,j){return W.concat(ke(j)===Fi?Wa(t,{placement:j,boundary:a,rootBoundary:l,padding:i,flipVariations:m,allowedAutoPlacements:h}):j)},[]),f=t.rects.reference,L=t.rects.popper,$=new Map,A=!0,C=S[0],w=0;w<S.length;w++){var y=S[w],b=ke(y),E=ar(y)===Rr,_=[ie,fe].indexOf(b)>=0,R=_?"width":"height",M=ze(t,{placement:y,boundary:a,rootBoundary:l,altBoundary:d,padding:i}),I=_?E?ce:se:E?fe:ie;f[R]>L[R]&&(I=di(I));var P=di(I),O=[];if(g&&O.push(M[b]<=0),u&&O.push(M[I]<=0,M[P]<=0),O.every(function(W){return W})){C=y,A=!1;break}$.set(y,O)}if(A)for(var F=m?3:1,D=function(j){var X=S.find(function(G){var J=$.get(G);if(J)return J.slice(0,j).every(function(ot){return ot})});if(X)return C=X,"break"},z=F;z>0;z--){var N=D(z);if(N==="break")break}t.placement!==C&&(t.modifiersData[n]._skip=!0,t.placement=C,t.reset=!0)}}var $n={name:"flip",enabled:!0,phase:"main",fn:Hm,requiresIfExists:["offset"],data:{_skip:!1}};function bd(e,t,r){return r===void 0&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function fd(e){return[ie,ce,fe,se].some(function(t){return e[t]>=0})}function jm(e){var t=e.state,r=e.name,n=t.rects.reference,p=t.rects.popper,g=t.modifiersData.preventOverflow,s=ze(t,{elementContext:"reference"}),u=ze(t,{altBoundary:!0}),o=bd(s,n),i=bd(u,p,g),a=fd(o),l=fd(i);t.modifiersData[r]={referenceClippingOffsets:o,popperEscapeOffsets:i,isReferenceHidden:a,hasPopperEscaped:l},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":a,"data-popper-escaped":l})}var Rn={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:jm};function Wm(e,t,r){var n=ke(e),p=[se,ie].indexOf(n)>=0?-1:1,g=typeof r=="function"?r(Object.assign({},t,{placement:e})):r,s=g[0],u=g[1];return s=s||0,u=(u||0)*p,[se,ce].indexOf(n)>=0?{x:u,y:s}:{x:s,y:u}}function Vm(e){var t=e.state,r=e.options,n=e.name,p=r.offset,g=p===void 0?[0,0]:p,s=Bi.reduce(function(a,l){return a[l]=Wm(l,t.rects,g),a},{}),u=s[t.placement],o=u.x,i=u.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=o,t.modifiersData.popperOffsets.y+=i),t.modifiersData[n]=s}var Mn={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Vm};function Gm(e){var t=e.state,r=e.name;t.modifiersData[r]=Gi({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}var pi={name:"popperOffsets",enabled:!0,phase:"read",fn:Gm,data:{}};function Va(e){return e==="x"?"y":"x"}function Km(e){var t=e.state,r=e.options,n=e.name,p=r.mainAxis,g=p===void 0?!0:p,s=r.altAxis,u=s===void 0?!1:s,o=r.boundary,i=r.rootBoundary,a=r.altBoundary,l=r.padding,d=r.tether,c=d===void 0?!0:d,m=r.tetherOffset,h=m===void 0?0:m,v=ze(t,{boundary:o,rootBoundary:i,padding:l,altBoundary:a}),k=ke(t.placement),x=ar(t.placement),T=!x,S=Ro(k),f=Va(S),L=t.modifiersData.popperOffsets,$=t.rects.reference,A=t.rects.popper,C=typeof h=="function"?h(Object.assign({},t.rects,{placement:t.placement})):h,w=typeof C=="number"?{mainAxis:C,altAxis:C}:Object.assign({mainAxis:0,altAxis:0},C),y=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,b={x:0,y:0};if(L){if(g){var E,_=S==="y"?ie:se,R=S==="y"?fe:ce,M=S==="y"?"height":"width",I=L[S],P=I+v[_],O=I-v[R],F=c?-A[M]/2:0,D=x===Rr?$[M]:A[M],z=x===Rr?-A[M]:-$[M],N=t.elements.arrow,W=c&&N?$o(N):{width:0,height:0},j=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:ji(),X=j[_],G=j[R],J=Mo(0,$[M],W[M]),ot=T?$[M]/2-F-J-X-w.mainAxis:D-J-X-w.mainAxis,et=T?-$[M]/2+F+J+G+w.mainAxis:z+J+G+w.mainAxis,vt=t.elements.arrow&&vr(t.elements.arrow),bt=vt?S==="y"?vt.clientTop||0:vt.clientLeft||0:0,ht=(E=y?.[S])!=null?E:0,U=I+ot-ht-bt,K=I+et-ht,it=Mo(c?Lo(P,U):P,I,c?fr(O,K):O);L[S]=it,b[S]=it-I}if(u){var Q,st=S==="x"?ie:se,rt=S==="x"?fe:ce,nt=L[f],Lt=f==="y"?"height":"width",ft=nt+v[st],It=nt-v[rt],H=[ie,se].indexOf(k)!==-1,V=(Q=y?.[f])!=null?Q:0,tt=H?ft:nt-$[Lt]-A[Lt]-V+w.altAxis,gt=H?nt+$[Lt]+A[Lt]-V-w.altAxis:It,_t=c&&H?md(tt,nt,gt):Mo(c?tt:ft,nt,c?gt:It);L[f]=_t,b[f]=_t-nt}t.modifiersData[n]=b}}var In={name:"preventOverflow",enabled:!0,phase:"main",fn:Km,requiresIfExists:["offset"]};function Ga(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function Ka(e){return e===re(e)||!we(e)?Io(e):Ga(e)}function Ym(e){var t=e.getBoundingClientRect(),r=Wr(t.width)/e.offsetWidth||1,n=Wr(t.height)/e.offsetHeight||1;return r!==1||n!==1}function Ya(e,t,r){r===void 0&&(r=!1);var n=we(t),p=we(t)&&Ym(t),g=Ae(t),s=nr(e,p,r),u={scrollLeft:0,scrollTop:0},o={x:0,y:0};return(n||!n&&!r)&&((xe(t)!=="body"||Po(g))&&(u=Ka(t)),we(t)?(o=nr(t,!0),o.x+=t.clientLeft,o.y+=t.clientTop):g&&(o.x=Oo(g))),{x:s.left+u.scrollLeft-o.x,y:s.top+u.scrollTop-o.y,width:s.width,height:s.height}}function Xm(e){var t=new Map,r=new Set,n=[];e.forEach(function(g){t.set(g.name,g)});function p(g){r.add(g.name);var s=[].concat(g.requires||[],g.requiresIfExists||[]);s.forEach(function(u){if(!r.has(u)){var o=t.get(u);o&&p(o)}}),n.push(g)}return e.forEach(function(g){r.has(g.name)||p(g)}),n}function Xa(e){var t=Xm(e);return za.reduce(function(r,n){return r.concat(t.filter(function(p){return p.phase===n}))},[])}function Ja(e){var t;return function(){return t||(t=new Promise(function(r){Promise.resolve().then(function(){t=void 0,r(e())})})),t}}function qa(e){var t=e.reduce(function(r,n){var p=r[n.name];return r[n.name]=p?Object.assign({},p,n,{options:Object.assign({},p.options,n.options),data:Object.assign({},p.data,n.data)}):n,r},{});return Object.keys(t).map(function(r){return t[r]})}var vd={placement:"bottom",modifiers:[],strategy:"absolute"};function wd(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function Do(e){e===void 0&&(e={});var t=e,r=t.defaultModifiers,n=r===void 0?[]:r,p=t.defaultOptions,g=p===void 0?vd:p;return function(u,o,i){i===void 0&&(i=g);var a={placement:"bottom",orderedModifiers:[],options:Object.assign({},vd,g),modifiersData:{},elements:{reference:u,popper:o},attributes:{},styles:{}},l=[],d=!1,c={state:a,setOptions:function(k){var x=typeof k=="function"?k(a.options):k;h(),a.options=Object.assign({},g,a.options,x),a.scrollParents={reference:ir(u)?co(u):u.contextElement?co(u.contextElement):[],popper:co(o)};var T=Xa(qa([].concat(n,a.options.modifiers)));return a.orderedModifiers=T.filter(function(S){return S.enabled}),m(),c.update()},forceUpdate:function(){if(!d){var k=a.elements,x=k.reference,T=k.popper;if(wd(x,T)){a.rects={reference:Ya(x,vr(T),a.options.strategy==="fixed"),popper:$o(T)},a.reset=!1,a.placement=a.options.placement,a.orderedModifiers.forEach(function(w){return a.modifiersData[w.name]=Object.assign({},w.data)});for(var S=0;S<a.orderedModifiers.length;S++){if(a.reset===!0){a.reset=!1,S=-1;continue}var f=a.orderedModifiers[S],L=f.fn,$=f.options,A=$===void 0?{}:$,C=f.name;typeof L=="function"&&(a=L({state:a,options:A,name:C,instance:c})||a)}}}},update:Ja(function(){return new Promise(function(v){c.forceUpdate(),v(a)})}),destroy:function(){h(),d=!0}};if(!wd(u,o))return c;c.setOptions(i).then(function(v){!d&&i.onFirstUpdate&&i.onFirstUpdate(v)});function m(){a.orderedModifiers.forEach(function(v){var k=v.name,x=v.options,T=x===void 0?{}:x,S=v.effect;if(typeof S=="function"){var f=S({state:a,name:k,instance:c,options:T}),L=function(){};l.push(f||L)}})}function h(){l.forEach(function(v){return v()}),l=[]}return c}}var yd=Do();var Jm=[li,pi,si,ni],xd=Do({defaultModifiers:Jm});var qm=[li,pi,si,ni,Mn,$n,In,Cn,Rn],Ki=Do({defaultModifiers:qm});var po=new Map,Qa={set(e,t,r){po.has(e)||po.set(e,new Map);let n=po.get(e);if(!n.has(t)&&n.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(n.keys())[0]}.`);return}n.set(t,r)},get(e,t){return po.has(e)&&po.get(e).get(t)||null},remove(e,t){if(!po.has(e))return;let r=po.get(e);r.delete(t),r.size===0&&po.delete(e)}},Qm=1e6,Zm=1e3,ms="transitionend",Jd=e=>(e&&window.CSS&&window.CSS.escape&&(e=e.replace(/#([^\s"#']+)/g,(t,r)=>`#${CSS.escape(r)}`)),e),tg=e=>e==null?`${e}`:Object.prototype.toString.call(e).match(/\s([a-z]+)/i)[1].toLowerCase(),eg=e=>{do e+=Math.floor(Math.random()*Qm);while(document.getElementById(e));return e},rg=e=>{if(!e)return 0;let{transitionDuration:t,transitionDelay:r}=window.getComputedStyle(e),n=Number.parseFloat(t),p=Number.parseFloat(r);return!n&&!p?0:(t=t.split(",")[0],r=r.split(",")[0],(Number.parseFloat(t)+Number.parseFloat(r))*Zm)},qd=e=>{e.dispatchEvent(new Event(ms))},Gr=e=>!e||typeof e!="object"?!1:(typeof e.jquery<"u"&&(e=e[0]),typeof e.nodeType<"u"),uo=e=>Gr(e)?e.jquery?e[0]:e:typeof e=="string"&&e.length>0?document.querySelector(Jd(e)):null,vi=e=>{if(!Gr(e)||e.getClientRects().length===0)return!1;let t=getComputedStyle(e).getPropertyValue("visibility")==="visible",r=e.closest("details:not([open])");if(!r)return t;if(r!==e){let n=e.closest("summary");if(n&&n.parentNode!==r||n===null)return!1}return t},mo=e=>!e||e.nodeType!==Node.ELEMENT_NODE||e.classList.contains("disabled")?!0:typeof e.disabled<"u"?e.disabled:e.hasAttribute("disabled")&&e.getAttribute("disabled")!=="false",Qd=e=>{if(!document.documentElement.attachShadow)return null;if(typeof e.getRootNode=="function"){let t=e.getRootNode();return t instanceof ShadowRoot?t:null}return e instanceof ShadowRoot?e:e.parentNode?Qd(e.parentNode):null},jn=()=>{},Zi=e=>{e.offsetHeight},Zd=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,Za=[],og=e=>{document.readyState==="loading"?(Za.length||document.addEventListener("DOMContentLoaded",()=>{for(let t of Za)t()}),Za.push(e)):e()},sr=()=>document.documentElement.dir==="rtl",dr=e=>{og(()=>{let t=Zd();if(t){let r=e.NAME,n=t.fn[r];t.fn[r]=e.jQueryInterface,t.fn[r].Constructor=e,t.fn[r].noConflict=()=>(t.fn[r]=n,e.jQueryInterface)}})},Ve=(e,t=[],r=e)=>typeof e=="function"?e(...t):r,tc=(e,t,r=!0)=>{if(!r){Ve(e);return}let p=rg(t)+5,g=!1,s=({target:u})=>{u===t&&(g=!0,t.removeEventListener(ms,s),Ve(e))};t.addEventListener(ms,s),setTimeout(()=>{g||qd(t)},p)},vs=(e,t,r,n)=>{let p=e.length,g=e.indexOf(t);return g===-1?!r&&n?e[p-1]:e[0]:(g+=r?1:-1,n&&(g=(g+p)%p),e[Math.max(0,Math.min(g,p-1))])},ig=/[^.]*(?=\..*)\.|.*/,ng=/\..*/,ag=/::\d+$/,ts={},kd=1,ec={mouseenter:"mouseover",mouseleave:"mouseout"},sg=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function rc(e,t){return t&&`${t}::${kd++}`||e.uidEvent||kd++}function oc(e){let t=rc(e);return e.uidEvent=t,ts[t]=ts[t]||{},ts[t]}function lg(e,t){return function r(n){return ws(n,{delegateTarget:e}),r.oneOff&&Y.off(e,n.type,t),t.apply(e,[n])}}function dg(e,t,r){return function n(p){let g=e.querySelectorAll(t);for(let{target:s}=p;s&&s!==this;s=s.parentNode)for(let u of g)if(u===s)return ws(p,{delegateTarget:s}),n.oneOff&&Y.off(e,p.type,t,r),r.apply(s,[p])}}function ic(e,t,r=null){return Object.values(e).find(n=>n.callable===t&&n.delegationSelector===r)}function nc(e,t,r){let n=typeof t=="string",p=n?r:t||r,g=ac(e);return sg.has(g)||(g=e),[n,p,g]}function Ed(e,t,r,n,p){if(typeof t!="string"||!e)return;let[g,s,u]=nc(t,r,n);t in ec&&(s=(m=>function(h){if(!h.relatedTarget||h.relatedTarget!==h.delegateTarget&&!h.delegateTarget.contains(h.relatedTarget))return m.call(this,h)})(s));let o=oc(e),i=o[u]||(o[u]={}),a=ic(i,s,g?r:null);if(a){a.oneOff=a.oneOff&&p;return}let l=rc(s,t.replace(ig,"")),d=g?dg(e,r,s):lg(e,s);d.delegationSelector=g?r:null,d.callable=s,d.oneOff=p,d.uidEvent=l,i[l]=d,e.addEventListener(u,d,g)}function gs(e,t,r,n,p){let g=ic(t[r],n,p);g&&(e.removeEventListener(r,g,!!p),delete t[r][g.uidEvent])}function cg(e,t,r,n){let p=t[r]||{};for(let[g,s]of Object.entries(p))g.includes(n)&&gs(e,t,r,s.callable,s.delegationSelector)}function ac(e){return e=e.replace(ng,""),ec[e]||e}var Y={on(e,t,r,n){Ed(e,t,r,n,!1)},one(e,t,r,n){Ed(e,t,r,n,!0)},off(e,t,r,n){if(typeof t!="string"||!e)return;let[p,g,s]=nc(t,r,n),u=s!==t,o=oc(e),i=o[s]||{},a=t.startsWith(".");if(typeof g<"u"){if(!Object.keys(i).length)return;gs(e,o,s,g,p?r:null);return}if(a)for(let l of Object.keys(o))cg(e,o,l,t.slice(1));for(let[l,d]of Object.entries(i)){let c=l.replace(ag,"");(!u||t.includes(c))&&gs(e,o,s,d.callable,d.delegationSelector)}},trigger(e,t,r){if(typeof t!="string"||!e)return null;let n=Zd(),p=ac(t),g=t!==p,s=null,u=!0,o=!0,i=!1;g&&n&&(s=n.Event(t,r),n(e).trigger(s),u=!s.isPropagationStopped(),o=!s.isImmediatePropagationStopped(),i=s.isDefaultPrevented());let a=ws(new Event(t,{bubbles:u,cancelable:!0}),r);return i&&a.preventDefault(),o&&e.dispatchEvent(a),a.defaultPrevented&&s&&s.preventDefault(),a}};function ws(e,t={}){for(let[r,n]of Object.entries(t))try{e[r]=n}catch{Object.defineProperty(e,r,{configurable:!0,get(){return n}})}return e}function _d(e){if(e==="true")return!0;if(e==="false")return!1;if(e===Number(e).toString())return Number(e);if(e===""||e==="null")return null;if(typeof e!="string")return e;try{return JSON.parse(decodeURIComponent(e))}catch{return e}}function es(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}var Kr={setDataAttribute(e,t,r){e.setAttribute(`data-bs-${es(t)}`,r)},removeDataAttribute(e,t){e.removeAttribute(`data-bs-${es(t)}`)},getDataAttributes(e){if(!e)return{};let t={},r=Object.keys(e.dataset).filter(n=>n.startsWith("bs")&&!n.startsWith("bsConfig"));for(let n of r){let p=n.replace(/^bs/,"");p=p.charAt(0).toLowerCase()+p.slice(1,p.length),t[p]=_d(e.dataset[n])}return t},getDataAttribute(e,t){return _d(e.getAttribute(`data-bs-${es(t)}`))}},zo=class{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(t){return t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t}_mergeConfigObj(t,r){let n=Gr(r)?Kr.getDataAttribute(r,"config"):{};return{...this.constructor.Default,...typeof n=="object"?n:{},...Gr(r)?Kr.getDataAttributes(r):{},...typeof t=="object"?t:{}}}_typeCheckConfig(t,r=this.constructor.DefaultType){for(let[n,p]of Object.entries(r)){let g=t[n],s=Gr(g)?"element":tg(g);if(!new RegExp(p).test(s))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${n}" provided type "${s}" but expected type "${p}".`)}}},pg="5.3.3",qe=class extends zo{constructor(t,r){super(),t=uo(t),t&&(this._element=t,this._config=this._getConfig(r),Qa.set(this._element,this.constructor.DATA_KEY,this))}dispose(){Qa.remove(this._element,this.constructor.DATA_KEY),Y.off(this._element,this.constructor.EVENT_KEY);for(let t of Object.getOwnPropertyNames(this))this[t]=null}_queueCallback(t,r,n=!0){tc(t,r,n)}_getConfig(t){return t=this._mergeConfigObj(t,this._element),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}static getInstance(t){return Qa.get(uo(t),this.DATA_KEY)}static getOrCreateInstance(t,r={}){return this.getInstance(t)||new this(t,typeof r=="object"?r:null)}static get VERSION(){return pg}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(t){return`${t}${this.EVENT_KEY}`}},rs=e=>{let t=e.getAttribute("data-bs-target");if(!t||t==="#"){let r=e.getAttribute("href");if(!r||!r.includes("#")&&!r.startsWith("."))return null;r.includes("#")&&!r.startsWith("#")&&(r=`#${r.split("#")[1]}`),t=r&&r!=="#"?r.trim():null}return t?t.split(",").map(r=>Jd(r)).join(","):null},ut={find(e,t=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(t,e))},findOne(e,t=document.documentElement){return Element.prototype.querySelector.call(t,e)},children(e,t){return[].concat(...e.children).filter(r=>r.matches(t))},parents(e,t){let r=[],n=e.parentNode.closest(t);for(;n;)r.push(n),n=n.parentNode.closest(t);return r},prev(e,t){let r=e.previousElementSibling;for(;r;){if(r.matches(t))return[r];r=r.previousElementSibling}return[]},next(e,t){let r=e.nextElementSibling;for(;r;){if(r.matches(t))return[r];r=r.nextElementSibling}return[]},focusableChildren(e){let t=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(r=>`${r}:not([tabindex^="-"])`).join(",");return this.find(t,e).filter(r=>!mo(r)&&vi(r))},getSelectorFromElement(e){let t=rs(e);return t&&ut.findOne(t)?t:null},getElementFromSelector(e){let t=rs(e);return t?ut.findOne(t):null},getMultipleElementsFromSelector(e){let t=rs(e);return t?ut.find(t):[]}},Qn=(e,t="hide")=>{let r=`click.dismiss${e.EVENT_KEY}`,n=e.NAME;Y.on(document,r,`[data-bs-dismiss="${n}"]`,function(p){if(["A","AREA"].includes(this.tagName)&&p.preventDefault(),mo(this))return;let g=ut.getElementFromSelector(this)||this.closest(`.${n}`);e.getOrCreateInstance(g)[t]()})},ug="alert",mg="bs.alert",sc=`.${mg}`,gg=`close${sc}`,hg=`closed${sc}`,bg="fade",fg="show",Wn=class e extends qe{static get NAME(){return ug}close(){if(Y.trigger(this._element,gg).defaultPrevented)return;this._element.classList.remove(fg);let r=this._element.classList.contains(bg);this._queueCallback(()=>this._destroyElement(),this._element,r)}_destroyElement(){this._element.remove(),Y.trigger(this._element,hg),this.dispose()}static jQueryInterface(t){return this.each(function(){let r=e.getOrCreateInstance(this);if(typeof t=="string"){if(r[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);r[t](this)}})}};Qn(Wn,"close");dr(Wn);var vg="button",wg="bs.button",yg=`.${wg}`,xg=".data-api",kg="active",Sd='[data-bs-toggle="button"]',Eg=`click${yg}${xg}`,Vn=class e extends qe{static get NAME(){return vg}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(kg))}static jQueryInterface(t){return this.each(function(){let r=e.getOrCreateInstance(this);t==="toggle"&&r[t]()})}};Y.on(document,Eg,Sd,e=>{e.preventDefault();let t=e.target.closest(Sd);Vn.getOrCreateInstance(t).toggle()});dr(Vn);var _g="swipe",wi=".bs.swipe",Sg=`touchstart${wi}`,Cg=`touchmove${wi}`,Tg=`touchend${wi}`,Ag=`pointerdown${wi}`,Lg=`pointerup${wi}`,$g="touch",Rg="pen",Mg="pointer-event",Ig=40,Og={endCallback:null,leftCallback:null,rightCallback:null},Pg={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"},Gn=class e extends zo{constructor(t,r){super(),this._element=t,!(!t||!e.isSupported())&&(this._config=this._getConfig(r),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return Og}static get DefaultType(){return Pg}static get NAME(){return _g}dispose(){Y.off(this._element,wi)}_start(t){if(!this._supportPointerEvents){this._deltaX=t.touches[0].clientX;return}this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX)}_end(t){this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX-this._deltaX),this._handleSwipe(),Ve(this._config.endCallback)}_move(t){this._deltaX=t.touches&&t.touches.length>1?0:t.touches[0].clientX-this._deltaX}_handleSwipe(){let t=Math.abs(this._deltaX);if(t<=Ig)return;let r=t/this._deltaX;this._deltaX=0,r&&Ve(r>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(Y.on(this._element,Ag,t=>this._start(t)),Y.on(this._element,Lg,t=>this._end(t)),this._element.classList.add(Mg)):(Y.on(this._element,Sg,t=>this._start(t)),Y.on(this._element,Cg,t=>this._move(t)),Y.on(this._element,Tg,t=>this._end(t)))}_eventIsPointerPenTouch(t){return this._supportPointerEvents&&(t.pointerType===Rg||t.pointerType===$g)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}},Dg="carousel",Ng="bs.carousel",ho=`.${Ng}`,lc=".data-api",Fg="ArrowLeft",zg="ArrowRight",Bg=500,Yi="next",ui="prev",gi="left",Un="right",Ug=`slide${ho}`,os=`slid${ho}`,Hg=`keydown${ho}`,jg=`mouseenter${ho}`,Wg=`mouseleave${ho}`,Vg=`dragstart${ho}`,Gg=`load${ho}${lc}`,Kg=`click${ho}${lc}`,dc="carousel",Pn="active",Yg="slide",Xg="carousel-item-end",Jg="carousel-item-start",qg="carousel-item-next",Qg="carousel-item-prev",cc=".active",pc=".carousel-item",Zg=cc+pc,th=".carousel-item img",eh=".carousel-indicators",rh="[data-bs-slide], [data-bs-slide-to]",oh='[data-bs-ride="carousel"]',ih={[Fg]:Un,[zg]:gi},nh={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},ah={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"},Ji=class e extends qe{constructor(t,r){super(t,r),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=ut.findOne(eh,this._element),this._addEventListeners(),this._config.ride===dc&&this.cycle()}static get Default(){return nh}static get DefaultType(){return ah}static get NAME(){return Dg}next(){this._slide(Yi)}nextWhenVisible(){!document.hidden&&vi(this._element)&&this.next()}prev(){this._slide(ui)}pause(){this._isSliding&&qd(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){Y.one(this._element,os,()=>this.cycle());return}this.cycle()}}to(t){let r=this._getItems();if(t>r.length-1||t<0)return;if(this._isSliding){Y.one(this._element,os,()=>this.to(t));return}let n=this._getItemIndex(this._getActive());if(n===t)return;let p=t>n?Yi:ui;this._slide(p,r[t])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(t){return t.defaultInterval=t.interval,t}_addEventListeners(){this._config.keyboard&&Y.on(this._element,Hg,t=>this._keydown(t)),this._config.pause==="hover"&&(Y.on(this._element,jg,()=>this.pause()),Y.on(this._element,Wg,()=>this._maybeEnableCycle())),this._config.touch&&Gn.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(let n of ut.find(th,this._element))Y.on(n,Vg,p=>p.preventDefault());let r={leftCallback:()=>this._slide(this._directionToOrder(gi)),rightCallback:()=>this._slide(this._directionToOrder(Un)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),Bg+this._config.interval))}};this._swipeHelper=new Gn(this._element,r)}_keydown(t){if(/input|textarea/i.test(t.target.tagName))return;let r=ih[t.key];r&&(t.preventDefault(),this._slide(this._directionToOrder(r)))}_getItemIndex(t){return this._getItems().indexOf(t)}_setActiveIndicatorElement(t){if(!this._indicatorsElement)return;let r=ut.findOne(cc,this._indicatorsElement);r.classList.remove(Pn),r.removeAttribute("aria-current");let n=ut.findOne(`[data-bs-slide-to="${t}"]`,this._indicatorsElement);n&&(n.classList.add(Pn),n.setAttribute("aria-current","true"))}_updateInterval(){let t=this._activeElement||this._getActive();if(!t)return;let r=Number.parseInt(t.getAttribute("data-bs-interval"),10);this._config.interval=r||this._config.defaultInterval}_slide(t,r=null){if(this._isSliding)return;let n=this._getActive(),p=t===Yi,g=r||vs(this._getItems(),n,p,this._config.wrap);if(g===n)return;let s=this._getItemIndex(g),u=c=>Y.trigger(this._element,c,{relatedTarget:g,direction:this._orderToDirection(t),from:this._getItemIndex(n),to:s});if(u(Ug).defaultPrevented||!n||!g)return;let i=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(s),this._activeElement=g;let a=p?Jg:Xg,l=p?qg:Qg;g.classList.add(l),Zi(g),n.classList.add(a),g.classList.add(a);let d=()=>{g.classList.remove(a,l),g.classList.add(Pn),n.classList.remove(Pn,l,a),this._isSliding=!1,u(os)};this._queueCallback(d,n,this._isAnimated()),i&&this.cycle()}_isAnimated(){return this._element.classList.contains(Yg)}_getActive(){return ut.findOne(Zg,this._element)}_getItems(){return ut.find(pc,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(t){return sr()?t===gi?ui:Yi:t===gi?Yi:ui}_orderToDirection(t){return sr()?t===ui?gi:Un:t===ui?Un:gi}static jQueryInterface(t){return this.each(function(){let r=e.getOrCreateInstance(this,t);if(typeof t=="number"){r.to(t);return}if(typeof t=="string"){if(r[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);r[t]()}})}};Y.on(document,Kg,rh,function(e){let t=ut.getElementFromSelector(this);if(!t||!t.classList.contains(dc))return;e.preventDefault();let r=Ji.getOrCreateInstance(t),n=this.getAttribute("data-bs-slide-to");if(n){r.to(n),r._maybeEnableCycle();return}if(Kr.getDataAttribute(this,"slide")==="next"){r.next(),r._maybeEnableCycle();return}r.prev(),r._maybeEnableCycle()});Y.on(window,Gg,()=>{let e=ut.find(oh);for(let t of e)Ji.getOrCreateInstance(t)});dr(Ji);var sh="collapse",lh="bs.collapse",tn=`.${lh}`,dh=".data-api",ch=`show${tn}`,ph=`shown${tn}`,uh=`hide${tn}`,mh=`hidden${tn}`,gh=`click${tn}${dh}`,is="show",bi="collapse",Dn="collapsing",hh="collapsed",bh=`:scope .${bi} .${bi}`,fh="collapse-horizontal",vh="width",wh="height",yh=".collapse.show, .collapse.collapsing",hs='[data-bs-toggle="collapse"]',xh={parent:null,toggle:!0},kh={parent:"(null|element)",toggle:"boolean"},Kn=class e extends qe{constructor(t,r){super(t,r),this._isTransitioning=!1,this._triggerArray=[];let n=ut.find(hs);for(let p of n){let g=ut.getSelectorFromElement(p),s=ut.find(g).filter(u=>u===this._element);g!==null&&s.length&&this._triggerArray.push(p)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return xh}static get DefaultType(){return kh}static get NAME(){return sh}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let t=[];if(this._config.parent&&(t=this._getFirstLevelChildren(yh).filter(u=>u!==this._element).map(u=>e.getOrCreateInstance(u,{toggle:!1}))),t.length&&t[0]._isTransitioning||Y.trigger(this._element,ch).defaultPrevented)return;for(let u of t)u.hide();let n=this._getDimension();this._element.classList.remove(bi),this._element.classList.add(Dn),this._element.style[n]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;let p=()=>{this._isTransitioning=!1,this._element.classList.remove(Dn),this._element.classList.add(bi,is),this._element.style[n]="",Y.trigger(this._element,ph)},s=`scroll${n[0].toUpperCase()+n.slice(1)}`;this._queueCallback(p,this._element,!0),this._element.style[n]=`${this._element[s]}px`}hide(){if(this._isTransitioning||!this._isShown()||Y.trigger(this._element,uh).defaultPrevented)return;let r=this._getDimension();this._element.style[r]=`${this._element.getBoundingClientRect()[r]}px`,Zi(this._element),this._element.classList.add(Dn),this._element.classList.remove(bi,is);for(let p of this._triggerArray){let g=ut.getElementFromSelector(p);g&&!this._isShown(g)&&this._addAriaAndCollapsedClass([p],!1)}this._isTransitioning=!0;let n=()=>{this._isTransitioning=!1,this._element.classList.remove(Dn),this._element.classList.add(bi),Y.trigger(this._element,mh)};this._element.style[r]="",this._queueCallback(n,this._element,!0)}_isShown(t=this._element){return t.classList.contains(is)}_configAfterMerge(t){return t.toggle=!!t.toggle,t.parent=uo(t.parent),t}_getDimension(){return this._element.classList.contains(fh)?vh:wh}_initializeChildren(){if(!this._config.parent)return;let t=this._getFirstLevelChildren(hs);for(let r of t){let n=ut.getElementFromSelector(r);n&&this._addAriaAndCollapsedClass([r],this._isShown(n))}}_getFirstLevelChildren(t){let r=ut.find(bh,this._config.parent);return ut.find(t,this._config.parent).filter(n=>!r.includes(n))}_addAriaAndCollapsedClass(t,r){if(t.length)for(let n of t)n.classList.toggle(hh,!r),n.setAttribute("aria-expanded",r)}static jQueryInterface(t){let r={};return typeof t=="string"&&/show|hide/.test(t)&&(r.toggle=!1),this.each(function(){let n=e.getOrCreateInstance(this,r);if(typeof t=="string"){if(typeof n[t]>"u")throw new TypeError(`No method named "${t}"`);n[t]()}})}};Y.on(document,gh,hs,function(e){(e.target.tagName==="A"||e.delegateTarget&&e.delegateTarget.tagName==="A")&&e.preventDefault();for(let t of ut.getMultipleElementsFromSelector(this))Kn.getOrCreateInstance(t,{toggle:!1}).toggle()});dr(Kn);var Cd="dropdown",Eh="bs.dropdown",Uo=`.${Eh}`,ys=".data-api",_h="Escape",Td="Tab",Sh="ArrowUp",Ad="ArrowDown",Ch=2,Th=`hide${Uo}`,Ah=`hidden${Uo}`,Lh=`show${Uo}`,$h=`shown${Uo}`,uc=`click${Uo}${ys}`,mc=`keydown${Uo}${ys}`,Rh=`keyup${Uo}${ys}`,hi="show",Mh="dropup",Ih="dropend",Oh="dropstart",Ph="dropup-center",Dh="dropdown-center",No='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',Nh=`${No}.${hi}`,Hn=".dropdown-menu",Fh=".navbar",zh=".navbar-nav",Bh=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",Uh=sr()?"top-end":"top-start",Hh=sr()?"top-start":"top-end",jh=sr()?"bottom-end":"bottom-start",Wh=sr()?"bottom-start":"bottom-end",Vh=sr()?"left-start":"right-start",Gh=sr()?"right-start":"left-start",Kh="top",Yh="bottom",Xh={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Jh={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"},Mr=class e extends qe{constructor(t,r){super(t,r),this._popper=null,this._parent=this._element.parentNode,this._menu=ut.next(this._element,Hn)[0]||ut.prev(this._element,Hn)[0]||ut.findOne(Hn,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Xh}static get DefaultType(){return Jh}static get NAME(){return Cd}toggle(){return this._isShown()?this.hide():this.show()}show(){if(mo(this._element)||this._isShown())return;let t={relatedTarget:this._element};if(!Y.trigger(this._element,Lh,t).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(zh))for(let n of[].concat(...document.body.children))Y.on(n,"mouseover",jn);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(hi),this._element.classList.add(hi),Y.trigger(this._element,$h,t)}}hide(){if(mo(this._element)||!this._isShown())return;let t={relatedTarget:this._element};this._completeHide(t)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(t){if(!Y.trigger(this._element,Th,t).defaultPrevented){if("ontouchstart"in document.documentElement)for(let n of[].concat(...document.body.children))Y.off(n,"mouseover",jn);this._popper&&this._popper.destroy(),this._menu.classList.remove(hi),this._element.classList.remove(hi),this._element.setAttribute("aria-expanded","false"),Kr.removeDataAttribute(this._menu,"popper"),Y.trigger(this._element,Ah,t)}}_getConfig(t){if(t=super._getConfig(t),typeof t.reference=="object"&&!Gr(t.reference)&&typeof t.reference.getBoundingClientRect!="function")throw new TypeError(`${Cd.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return t}_createPopper(){if(typeof On>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let t=this._element;this._config.reference==="parent"?t=this._parent:Gr(this._config.reference)?t=uo(this._config.reference):typeof this._config.reference=="object"&&(t=this._config.reference);let r=this._getPopperConfig();this._popper=Ki(t,this._menu,r)}_isShown(){return this._menu.classList.contains(hi)}_getPlacement(){let t=this._parent;if(t.classList.contains(Ih))return Vh;if(t.classList.contains(Oh))return Gh;if(t.classList.contains(Ph))return Kh;if(t.classList.contains(Dh))return Yh;let r=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return t.classList.contains(Mh)?r?Hh:Uh:r?Wh:jh}_detectNavbar(){return this._element.closest(Fh)!==null}_getOffset(){let{offset:t}=this._config;return typeof t=="string"?t.split(",").map(r=>Number.parseInt(r,10)):typeof t=="function"?r=>t(r,this._element):t}_getPopperConfig(){let t={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(Kr.setDataAttribute(this._menu,"popper","static"),t.modifiers=[{name:"applyStyles",enabled:!1}]),{...t,...Ve(this._config.popperConfig,[t])}}_selectMenuItem({key:t,target:r}){let n=ut.find(Bh,this._menu).filter(p=>vi(p));n.length&&vs(n,r,t===Ad,!n.includes(r)).focus()}static jQueryInterface(t){return this.each(function(){let r=e.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof r[t]>"u")throw new TypeError(`No method named "${t}"`);r[t]()}})}static clearMenus(t){if(t.button===Ch||t.type==="keyup"&&t.key!==Td)return;let r=ut.find(Nh);for(let n of r){let p=e.getInstance(n);if(!p||p._config.autoClose===!1)continue;let g=t.composedPath(),s=g.includes(p._menu);if(g.includes(p._element)||p._config.autoClose==="inside"&&!s||p._config.autoClose==="outside"&&s||p._menu.contains(t.target)&&(t.type==="keyup"&&t.key===Td||/input|select|option|textarea|form/i.test(t.target.tagName)))continue;let u={relatedTarget:p._element};t.type==="click"&&(u.clickEvent=t),p._completeHide(u)}}static dataApiKeydownHandler(t){let r=/input|textarea/i.test(t.target.tagName),n=t.key===_h,p=[Sh,Ad].includes(t.key);if(!p&&!n||r&&!n)return;t.preventDefault();let g=this.matches(No)?this:ut.prev(this,No)[0]||ut.next(this,No)[0]||ut.findOne(No,t.delegateTarget.parentNode),s=e.getOrCreateInstance(g);if(p){t.stopPropagation(),s.show(),s._selectMenuItem(t);return}s._isShown()&&(t.stopPropagation(),s.hide(),g.focus())}};Y.on(document,mc,No,Mr.dataApiKeydownHandler);Y.on(document,mc,Hn,Mr.dataApiKeydownHandler);Y.on(document,uc,Mr.clearMenus);Y.on(document,Rh,Mr.clearMenus);Y.on(document,uc,No,function(e){e.preventDefault(),Mr.getOrCreateInstance(this).toggle()});dr(Mr);var gc="backdrop",qh="fade",Ld="show",$d=`mousedown.bs.${gc}`,Qh={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Zh={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"},Yn=class extends zo{constructor(t){super(),this._config=this._getConfig(t),this._isAppended=!1,this._element=null}static get Default(){return Qh}static get DefaultType(){return Zh}static get NAME(){return gc}show(t){if(!this._config.isVisible){Ve(t);return}this._append();let r=this._getElement();this._config.isAnimated&&Zi(r),r.classList.add(Ld),this._emulateAnimation(()=>{Ve(t)})}hide(t){if(!this._config.isVisible){Ve(t);return}this._getElement().classList.remove(Ld),this._emulateAnimation(()=>{this.dispose(),Ve(t)})}dispose(){this._isAppended&&(Y.off(this._element,$d),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){let t=document.createElement("div");t.className=this._config.className,this._config.isAnimated&&t.classList.add(qh),this._element=t}return this._element}_configAfterMerge(t){return t.rootElement=uo(t.rootElement),t}_append(){if(this._isAppended)return;let t=this._getElement();this._config.rootElement.append(t),Y.on(t,$d,()=>{Ve(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(t){tc(t,this._getElement(),this._config.isAnimated)}},tb="focustrap",eb="bs.focustrap",Xn=`.${eb}`,rb=`focusin${Xn}`,ob=`keydown.tab${Xn}`,ib="Tab",nb="forward",Rd="backward",ab={autofocus:!0,trapElement:null},sb={autofocus:"boolean",trapElement:"element"},Jn=class extends zo{constructor(t){super(),this._config=this._getConfig(t),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return ab}static get DefaultType(){return sb}static get NAME(){return tb}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),Y.off(document,Xn),Y.on(document,rb,t=>this._handleFocusin(t)),Y.on(document,ob,t=>this._handleKeydown(t)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,Y.off(document,Xn))}_handleFocusin(t){let{trapElement:r}=this._config;if(t.target===document||t.target===r||r.contains(t.target))return;let n=ut.focusableChildren(r);n.length===0?r.focus():this._lastTabNavDirection===Rd?n[n.length-1].focus():n[0].focus()}_handleKeydown(t){t.key===ib&&(this._lastTabNavDirection=t.shiftKey?Rd:nb)}},Md=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Id=".sticky-top",Nn="padding-right",Od="margin-right",qi=class{constructor(){this._element=document.body}getWidth(){let t=document.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}hide(){let t=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Nn,r=>r+t),this._setElementAttributes(Md,Nn,r=>r+t),this._setElementAttributes(Id,Od,r=>r-t)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Nn),this._resetElementAttributes(Md,Nn),this._resetElementAttributes(Id,Od)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(t,r,n){let p=this.getWidth(),g=s=>{if(s!==this._element&&window.innerWidth>s.clientWidth+p)return;this._saveInitialAttribute(s,r);let u=window.getComputedStyle(s).getPropertyValue(r);s.style.setProperty(r,`${n(Number.parseFloat(u))}px`)};this._applyManipulationCallback(t,g)}_saveInitialAttribute(t,r){let n=t.style.getPropertyValue(r);n&&Kr.setDataAttribute(t,r,n)}_resetElementAttributes(t,r){let n=p=>{let g=Kr.getDataAttribute(p,r);if(g===null){p.style.removeProperty(r);return}Kr.removeDataAttribute(p,r),p.style.setProperty(r,g)};this._applyManipulationCallback(t,n)}_applyManipulationCallback(t,r){if(Gr(t)){r(t);return}for(let n of ut.find(t,this._element))r(n)}},lb="modal",db="bs.modal",lr=`.${db}`,cb=".data-api",pb="Escape",ub=`hide${lr}`,mb=`hidePrevented${lr}`,hc=`hidden${lr}`,bc=`show${lr}`,gb=`shown${lr}`,hb=`resize${lr}`,bb=`click.dismiss${lr}`,fb=`mousedown.dismiss${lr}`,vb=`keydown.dismiss${lr}`,wb=`click${lr}${cb}`,Pd="modal-open",yb="fade",Dd="show",ns="modal-static",xb=".modal.show",kb=".modal-dialog",Eb=".modal-body",_b='[data-bs-toggle="modal"]',Sb={backdrop:!0,focus:!0,keyboard:!0},Cb={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"},Ir=class e extends qe{constructor(t,r){super(t,r),this._dialog=ut.findOne(kb,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new qi,this._addEventListeners()}static get Default(){return Sb}static get DefaultType(){return Cb}static get NAME(){return lb}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||this._isTransitioning||Y.trigger(this._element,bc,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Pd),this._adjustDialog(),this._backdrop.show(()=>this._showElement(t)))}hide(){!this._isShown||this._isTransitioning||Y.trigger(this._element,ub).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Dd),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){Y.off(window,lr),Y.off(this._dialog,lr),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Yn({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Jn({trapElement:this._element})}_showElement(t){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;let r=ut.findOne(Eb,this._dialog);r&&(r.scrollTop=0),Zi(this._element),this._element.classList.add(Dd);let n=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,Y.trigger(this._element,gb,{relatedTarget:t})};this._queueCallback(n,this._dialog,this._isAnimated())}_addEventListeners(){Y.on(this._element,vb,t=>{if(t.key===pb){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),Y.on(window,hb,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),Y.on(this._element,fb,t=>{Y.one(this._element,bb,r=>{if(!(this._element!==t.target||this._element!==r.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Pd),this._resetAdjustments(),this._scrollBar.reset(),Y.trigger(this._element,hc)})}_isAnimated(){return this._element.classList.contains(yb)}_triggerBackdropTransition(){if(Y.trigger(this._element,mb).defaultPrevented)return;let r=this._element.scrollHeight>document.documentElement.clientHeight,n=this._element.style.overflowY;n==="hidden"||this._element.classList.contains(ns)||(r||(this._element.style.overflowY="hidden"),this._element.classList.add(ns),this._queueCallback(()=>{this._element.classList.remove(ns),this._queueCallback(()=>{this._element.style.overflowY=n},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){let t=this._element.scrollHeight>document.documentElement.clientHeight,r=this._scrollBar.getWidth(),n=r>0;if(n&&!t){let p=sr()?"paddingLeft":"paddingRight";this._element.style[p]=`${r}px`}if(!n&&t){let p=sr()?"paddingRight":"paddingLeft";this._element.style[p]=`${r}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(t,r){return this.each(function(){let n=e.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof n[t]>"u")throw new TypeError(`No method named "${t}"`);n[t](r)}})}};Y.on(document,wb,_b,function(e){let t=ut.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&e.preventDefault(),Y.one(t,bc,p=>{p.defaultPrevented||Y.one(t,hc,()=>{vi(this)&&this.focus()})});let r=ut.findOne(xb);r&&Ir.getInstance(r).hide(),Ir.getOrCreateInstance(t).toggle(this)});Qn(Ir);dr(Ir);var Tb="offcanvas",Ab="bs.offcanvas",Yr=`.${Ab}`,fc=".data-api",Lb=`load${Yr}${fc}`,$b="Escape",Nd="show",Fd="showing",zd="hiding",Rb="offcanvas-backdrop",vc=".offcanvas.show",Mb=`show${Yr}`,Ib=`shown${Yr}`,Ob=`hide${Yr}`,Bd=`hidePrevented${Yr}`,wc=`hidden${Yr}`,Pb=`resize${Yr}`,Db=`click${Yr}${fc}`,Nb=`keydown.dismiss${Yr}`,Fb='[data-bs-toggle="offcanvas"]',zb={backdrop:!0,keyboard:!0,scroll:!1},Bb={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"},go=class e extends qe{constructor(t,r){super(t,r),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return zb}static get DefaultType(){return Bb}static get NAME(){return Tb}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){if(this._isShown||Y.trigger(this._element,Mb,{relatedTarget:t}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new qi().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Fd);let n=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(Nd),this._element.classList.remove(Fd),Y.trigger(this._element,Ib,{relatedTarget:t})};this._queueCallback(n,this._element,!0)}hide(){if(!this._isShown||Y.trigger(this._element,Ob).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(zd),this._backdrop.hide();let r=()=>{this._element.classList.remove(Nd,zd),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new qi().reset(),Y.trigger(this._element,wc)};this._queueCallback(r,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){let t=()=>{if(this._config.backdrop==="static"){Y.trigger(this._element,Bd);return}this.hide()},r=!!this._config.backdrop;return new Yn({className:Rb,isVisible:r,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:r?t:null})}_initializeFocusTrap(){return new Jn({trapElement:this._element})}_addEventListeners(){Y.on(this._element,Nb,t=>{if(t.key===$b){if(this._config.keyboard){this.hide();return}Y.trigger(this._element,Bd)}})}static jQueryInterface(t){return this.each(function(){let r=e.getOrCreateInstance(this,t);if(typeof t=="string"){if(r[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);r[t](this)}})}};Y.on(document,Db,Fb,function(e){let t=ut.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&e.preventDefault(),mo(this))return;Y.one(t,wc,()=>{vi(this)&&this.focus()});let r=ut.findOne(vc);r&&r!==t&&go.getInstance(r).hide(),go.getOrCreateInstance(t).toggle(this)});Y.on(window,Lb,()=>{for(let e of ut.find(vc))go.getOrCreateInstance(e).show()});Y.on(window,Pb,()=>{for(let e of ut.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(e).position!=="fixed"&&go.getOrCreateInstance(e).hide()});Qn(go);dr(go);var Ub=/^aria-[\w-]*$/i,yc={"*":["class","dir","id","lang","role",Ub],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Hb=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),jb=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,Wb=(e,t)=>{let r=e.nodeName.toLowerCase();return t.includes(r)?Hb.has(r)?!!jb.test(e.nodeValue):!0:t.filter(n=>n instanceof RegExp).some(n=>n.test(r))};function Vb(e,t,r){if(!e.length)return e;if(r&&typeof r=="function")return r(e);let p=new window.DOMParser().parseFromString(e,"text/html"),g=[].concat(...p.body.querySelectorAll("*"));for(let s of g){let u=s.nodeName.toLowerCase();if(!Object.keys(t).includes(u)){s.remove();continue}let o=[].concat(...s.attributes),i=[].concat(t["*"]||[],t[u]||[]);for(let a of o)Wb(a,i)||s.removeAttribute(a.nodeName)}return p.body.innerHTML}var Gb="TemplateFactory",Kb={allowList:yc,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Yb={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Xb={entry:"(string|element|function|null)",selector:"(string|element)"},bs=class extends zo{constructor(t){super(),this._config=this._getConfig(t)}static get Default(){return Kb}static get DefaultType(){return Yb}static get NAME(){return Gb}getContent(){return Object.values(this._config.content).map(t=>this._resolvePossibleFunction(t)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(t){return this._checkContent(t),this._config.content={...this._config.content,...t},this}toHtml(){let t=document.createElement("div");t.innerHTML=this._maybeSanitize(this._config.template);for(let[p,g]of Object.entries(this._config.content))this._setContent(t,g,p);let r=t.children[0],n=this._resolvePossibleFunction(this._config.extraClass);return n&&r.classList.add(...n.split(" ")),r}_typeCheckConfig(t){super._typeCheckConfig(t),this._checkContent(t.content)}_checkContent(t){for(let[r,n]of Object.entries(t))super._typeCheckConfig({selector:r,entry:n},Xb)}_setContent(t,r,n){let p=ut.findOne(n,t);if(p){if(r=this._resolvePossibleFunction(r),!r){p.remove();return}if(Gr(r)){this._putElementInTemplate(uo(r),p);return}if(this._config.html){p.innerHTML=this._maybeSanitize(r);return}p.textContent=r}}_maybeSanitize(t){return this._config.sanitize?Vb(t,this._config.allowList,this._config.sanitizeFn):t}_resolvePossibleFunction(t){return Ve(t,[this])}_putElementInTemplate(t,r){if(this._config.html){r.innerHTML="",r.append(t);return}r.textContent=t.textContent}},Jb="tooltip",qb=new Set(["sanitize","allowList","sanitizeFn"]),as="fade",Qb="modal",Fn="show",Zb=".tooltip-inner",Ud=`.${Qb}`,Hd="hide.bs.modal",Xi="hover",ss="focus",tf="click",ef="manual",rf="hide",of="hidden",nf="show",af="shown",sf="inserted",lf="click",df="focusin",cf="focusout",pf="mouseenter",uf="mouseleave",mf={AUTO:"auto",TOP:"top",RIGHT:sr()?"left":"right",BOTTOM:"bottom",LEFT:sr()?"right":"left"},gf={allowList:yc,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},hf={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"},fi=class e extends qe{constructor(t,r){if(typeof On>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(t,r),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return gf}static get DefaultType(){return hf}static get NAME(){return Jb}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),Y.off(this._element.closest(Ud),Hd,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;let t=Y.trigger(this._element,this.constructor.eventName(nf)),n=(Qd(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(t.defaultPrevented||!n)return;this._disposePopper();let p=this._getTipElement();this._element.setAttribute("aria-describedby",p.getAttribute("id"));let{container:g}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(g.append(p),Y.trigger(this._element,this.constructor.eventName(sf))),this._popper=this._createPopper(p),p.classList.add(Fn),"ontouchstart"in document.documentElement)for(let u of[].concat(...document.body.children))Y.on(u,"mouseover",jn);let s=()=>{Y.trigger(this._element,this.constructor.eventName(af)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(s,this.tip,this._isAnimated())}hide(){if(!this._isShown()||Y.trigger(this._element,this.constructor.eventName(rf)).defaultPrevented)return;if(this._getTipElement().classList.remove(Fn),"ontouchstart"in document.documentElement)for(let p of[].concat(...document.body.children))Y.off(p,"mouseover",jn);this._activeTrigger[tf]=!1,this._activeTrigger[ss]=!1,this._activeTrigger[Xi]=!1,this._isHovered=null;let n=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),Y.trigger(this._element,this.constructor.eventName(of)))};this._queueCallback(n,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(t){let r=this._getTemplateFactory(t).toHtml();if(!r)return null;r.classList.remove(as,Fn),r.classList.add(`bs-${this.constructor.NAME}-auto`);let n=eg(this.constructor.NAME).toString();return r.setAttribute("id",n),this._isAnimated()&&r.classList.add(as),r}setContent(t){this._newContent=t,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(t){return this._templateFactory?this._templateFactory.changeContent(t):this._templateFactory=new bs({...this._config,content:t,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[Zb]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(t){return this.constructor.getOrCreateInstance(t.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(as)}_isShown(){return this.tip&&this.tip.classList.contains(Fn)}_createPopper(t){let r=Ve(this._config.placement,[this,t,this._element]),n=mf[r.toUpperCase()];return Ki(this._element,t,this._getPopperConfig(n))}_getOffset(){let{offset:t}=this._config;return typeof t=="string"?t.split(",").map(r=>Number.parseInt(r,10)):typeof t=="function"?r=>t(r,this._element):t}_resolvePossibleFunction(t){return Ve(t,[this._element])}_getPopperConfig(t){let r={placement:t,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:n=>{this._getTipElement().setAttribute("data-popper-placement",n.state.placement)}}]};return{...r,...Ve(this._config.popperConfig,[r])}}_setListeners(){let t=this._config.trigger.split(" ");for(let r of t)if(r==="click")Y.on(this._element,this.constructor.eventName(lf),this._config.selector,n=>{this._initializeOnDelegatedTarget(n).toggle()});else if(r!==ef){let n=r===Xi?this.constructor.eventName(pf):this.constructor.eventName(df),p=r===Xi?this.constructor.eventName(uf):this.constructor.eventName(cf);Y.on(this._element,n,this._config.selector,g=>{let s=this._initializeOnDelegatedTarget(g);s._activeTrigger[g.type==="focusin"?ss:Xi]=!0,s._enter()}),Y.on(this._element,p,this._config.selector,g=>{let s=this._initializeOnDelegatedTarget(g);s._activeTrigger[g.type==="focusout"?ss:Xi]=s._element.contains(g.relatedTarget),s._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},Y.on(this._element.closest(Ud),Hd,this._hideModalHandler)}_fixTitle(){let t=this._element.getAttribute("title");t&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",t),this._element.setAttribute("data-bs-original-title",t),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(t,r){clearTimeout(this._timeout),this._timeout=setTimeout(t,r)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(t){let r=Kr.getDataAttributes(this._element);for(let n of Object.keys(r))qb.has(n)&&delete r[n];return t={...r,...typeof t=="object"&&t?t:{}},t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t.container=t.container===!1?document.body:uo(t.container),typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),typeof t.title=="number"&&(t.title=t.title.toString()),typeof t.content=="number"&&(t.content=t.content.toString()),t}_getDelegateConfig(){let t={};for(let[r,n]of Object.entries(this._config))this.constructor.Default[r]!==n&&(t[r]=n);return t.selector=!1,t.trigger="manual",t}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(t){return this.each(function(){let r=e.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof r[t]>"u")throw new TypeError(`No method named "${t}"`);r[t]()}})}};dr(fi);var bf="popover",ff=".popover-header",vf=".popover-body",wf={...fi.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},yf={...fi.DefaultType,content:"(null|string|element|function)"},fs=class e extends fi{static get Default(){return wf}static get DefaultType(){return yf}static get NAME(){return bf}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[ff]:this._getTitle(),[vf]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(t){return this.each(function(){let r=e.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof r[t]>"u")throw new TypeError(`No method named "${t}"`);r[t]()}})}};dr(fs);var xf="scrollspy",kf="bs.scrollspy",xs=`.${kf}`,Ef=".data-api",_f=`activate${xs}`,jd=`click${xs}`,Sf=`load${xs}${Ef}`,Cf="dropdown-item",mi="active",Tf='[data-bs-spy="scroll"]',ls="[href]",Af=".nav, .list-group",Wd=".nav-link",Lf=".nav-item",$f=".list-group-item",Rf=`${Wd}, ${Lf} > ${Wd}, ${$f}`,Mf=".dropdown",If=".dropdown-toggle",Of={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},Pf={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"},qn=class e extends qe{constructor(t,r){super(t,r),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return Of}static get DefaultType(){return Pf}static get NAME(){return xf}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(let t of this._observableSections.values())this._observer.observe(t)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(t){return t.target=uo(t.target)||document.body,t.rootMargin=t.offset?`${t.offset}px 0px -30%`:t.rootMargin,typeof t.threshold=="string"&&(t.threshold=t.threshold.split(",").map(r=>Number.parseFloat(r))),t}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(Y.off(this._config.target,jd),Y.on(this._config.target,jd,ls,t=>{let r=this._observableSections.get(t.target.hash);if(r){t.preventDefault();let n=this._rootElement||window,p=r.offsetTop-this._element.offsetTop;if(n.scrollTo){n.scrollTo({top:p,behavior:"smooth"});return}n.scrollTop=p}}))}_getNewObserver(){let t={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(r=>this._observerCallback(r),t)}_observerCallback(t){let r=s=>this._targetLinks.get(`#${s.target.id}`),n=s=>{this._previousScrollData.visibleEntryTop=s.target.offsetTop,this._process(r(s))},p=(this._rootElement||document.documentElement).scrollTop,g=p>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=p;for(let s of t){if(!s.isIntersecting){this._activeTarget=null,this._clearActiveClass(r(s));continue}let u=s.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(g&&u){if(n(s),!p)return;continue}!g&&!u&&n(s)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;let t=ut.find(ls,this._config.target);for(let r of t){if(!r.hash||mo(r))continue;let n=ut.findOne(decodeURI(r.hash),this._element);vi(n)&&(this._targetLinks.set(decodeURI(r.hash),r),this._observableSections.set(r.hash,n))}}_process(t){this._activeTarget!==t&&(this._clearActiveClass(this._config.target),this._activeTarget=t,t.classList.add(mi),this._activateParents(t),Y.trigger(this._element,_f,{relatedTarget:t}))}_activateParents(t){if(t.classList.contains(Cf)){ut.findOne(If,t.closest(Mf)).classList.add(mi);return}for(let r of ut.parents(t,Af))for(let n of ut.prev(r,Rf))n.classList.add(mi)}_clearActiveClass(t){t.classList.remove(mi);let r=ut.find(`${ls}.${mi}`,t);for(let n of r)n.classList.remove(mi)}static jQueryInterface(t){return this.each(function(){let r=e.getOrCreateInstance(this,t);if(typeof t=="string"){if(r[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);r[t]()}})}};Y.on(window,Sf,()=>{for(let e of ut.find(Tf))qn.getOrCreateInstance(e)});dr(qn);var Df="tab",Nf="bs.tab",Ho=`.${Nf}`,Ff=`hide${Ho}`,zf=`hidden${Ho}`,Bf=`show${Ho}`,Uf=`shown${Ho}`,Hf=`click${Ho}`,jf=`keydown${Ho}`,Wf=`load${Ho}`,Vf="ArrowLeft",Vd="ArrowRight",Gf="ArrowUp",Gd="ArrowDown",ds="Home",Kd="End",Fo="active",Yd="fade",cs="show",Kf="dropdown",xc=".dropdown-toggle",Yf=".dropdown-menu",ps=`:not(${xc})`,Xf='.list-group, .nav, [role="tablist"]',Jf=".nav-item, .list-group-item",qf=`.nav-link${ps}, .list-group-item${ps}, [role="tab"]${ps}`,kc='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',us=`${qf}, ${kc}`,Qf=`.${Fo}[data-bs-toggle="tab"], .${Fo}[data-bs-toggle="pill"], .${Fo}[data-bs-toggle="list"]`,Qi=class e extends qe{constructor(t){super(t),this._parent=this._element.closest(Xf),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),Y.on(this._element,jf,r=>this._keydown(r)))}static get NAME(){return Df}show(){let t=this._element;if(this._elemIsActive(t))return;let r=this._getActiveElem(),n=r?Y.trigger(r,Ff,{relatedTarget:t}):null;Y.trigger(t,Bf,{relatedTarget:r}).defaultPrevented||n&&n.defaultPrevented||(this._deactivate(r,t),this._activate(t,r))}_activate(t,r){if(!t)return;t.classList.add(Fo),this._activate(ut.getElementFromSelector(t));let n=()=>{if(t.getAttribute("role")!=="tab"){t.classList.add(cs);return}t.removeAttribute("tabindex"),t.setAttribute("aria-selected",!0),this._toggleDropDown(t,!0),Y.trigger(t,Uf,{relatedTarget:r})};this._queueCallback(n,t,t.classList.contains(Yd))}_deactivate(t,r){if(!t)return;t.classList.remove(Fo),t.blur(),this._deactivate(ut.getElementFromSelector(t));let n=()=>{if(t.getAttribute("role")!=="tab"){t.classList.remove(cs);return}t.setAttribute("aria-selected",!1),t.setAttribute("tabindex","-1"),this._toggleDropDown(t,!1),Y.trigger(t,zf,{relatedTarget:r})};this._queueCallback(n,t,t.classList.contains(Yd))}_keydown(t){if(![Vf,Vd,Gf,Gd,ds,Kd].includes(t.key))return;t.stopPropagation(),t.preventDefault();let r=this._getChildren().filter(p=>!mo(p)),n;if([ds,Kd].includes(t.key))n=r[t.key===ds?0:r.length-1];else{let p=[Vd,Gd].includes(t.key);n=vs(r,t.target,p,!0)}n&&(n.focus({preventScroll:!0}),e.getOrCreateInstance(n).show())}_getChildren(){return ut.find(us,this._parent)}_getActiveElem(){return this._getChildren().find(t=>this._elemIsActive(t))||null}_setInitialAttributes(t,r){this._setAttributeIfNotExists(t,"role","tablist");for(let n of r)this._setInitialAttributesOnChild(n)}_setInitialAttributesOnChild(t){t=this._getInnerElement(t);let r=this._elemIsActive(t),n=this._getOuterElement(t);t.setAttribute("aria-selected",r),n!==t&&this._setAttributeIfNotExists(n,"role","presentation"),r||t.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(t,"role","tab"),this._setInitialAttributesOnTargetPanel(t)}_setInitialAttributesOnTargetPanel(t){let r=ut.getElementFromSelector(t);r&&(this._setAttributeIfNotExists(r,"role","tabpanel"),t.id&&this._setAttributeIfNotExists(r,"aria-labelledby",`${t.id}`))}_toggleDropDown(t,r){let n=this._getOuterElement(t);if(!n.classList.contains(Kf))return;let p=(g,s)=>{let u=ut.findOne(g,n);u&&u.classList.toggle(s,r)};p(xc,Fo),p(Yf,cs),n.setAttribute("aria-expanded",r)}_setAttributeIfNotExists(t,r,n){t.hasAttribute(r)||t.setAttribute(r,n)}_elemIsActive(t){return t.classList.contains(Fo)}_getInnerElement(t){return t.matches(us)?t:ut.findOne(us,t)}_getOuterElement(t){return t.closest(Jf)||t}static jQueryInterface(t){return this.each(function(){let r=e.getOrCreateInstance(this);if(typeof t=="string"){if(r[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);r[t]()}})}};Y.on(document,Hf,kc,function(e){["A","AREA"].includes(this.tagName)&&e.preventDefault(),!mo(this)&&Qi.getOrCreateInstance(this).show()});Y.on(window,Wf,()=>{for(let e of ut.find(Qf))Qi.getOrCreateInstance(e)});dr(Qi);var Zf="toast",tv="bs.toast",bo=`.${tv}`,ev=`mouseover${bo}`,rv=`mouseout${bo}`,ov=`focusin${bo}`,iv=`focusout${bo}`,nv=`hide${bo}`,av=`hidden${bo}`,sv=`show${bo}`,lv=`shown${bo}`,dv="fade",Xd="hide",zn="show",Bn="showing",cv={animation:"boolean",autohide:"boolean",delay:"number"},pv={animation:!0,autohide:!0,delay:5e3},Bo=class e extends qe{constructor(t,r){super(t,r),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return pv}static get DefaultType(){return cv}static get NAME(){return Zf}show(){if(Y.trigger(this._element,sv).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(dv);let r=()=>{this._element.classList.remove(Bn),Y.trigger(this._element,lv),this._maybeScheduleHide()};this._element.classList.remove(Xd),Zi(this._element),this._element.classList.add(zn,Bn),this._queueCallback(r,this._element,this._config.animation)}hide(){if(!this.isShown()||Y.trigger(this._element,nv).defaultPrevented)return;let r=()=>{this._element.classList.add(Xd),this._element.classList.remove(Bn,zn),Y.trigger(this._element,av)};this._element.classList.add(Bn),this._queueCallback(r,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(zn),super.dispose()}isShown(){return this._element.classList.contains(zn)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(t,r){switch(t.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=r;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=r;break}}if(r){this._clearTimeout();return}let n=t.relatedTarget;this._element===n||this._element.contains(n)||this._maybeScheduleHide()}_setListeners(){Y.on(this._element,ev,t=>this._onInteraction(t,!0)),Y.on(this._element,rv,t=>this._onInteraction(t,!1)),Y.on(this._element,ov,t=>this._onInteraction(t,!0)),Y.on(this._element,iv,t=>this._onInteraction(t,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(t){return this.each(function(){let r=e.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof r[t]>"u")throw new TypeError(`No method named "${t}"`);r[t](this)}})}};Qn(Bo);dr(Bo);var iu=Da(Ec());var jo=class extends Error{};jo.prototype.name="InvalidTokenError";function uv(e){return decodeURIComponent(atob(e).replace(/(.)/g,(t,r)=>{let n=r.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n}))}function mv(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return uv(t)}catch{return atob(t)}}function _c(e,t){if(typeof e!="string")throw new jo("Invalid token specified: must be a string");t||(t={});let r=t.header===!0?0:1,n=e.split(".")[r];if(typeof n!="string")throw new jo(`Invalid token specified: missing part #${r+1}`);let p;try{p=mv(n)}catch(g){throw new jo(`Invalid token specified: invalid base64 for part #${r+1} (${g.message})`)}try{return JSON.parse(p)}catch(g){throw new jo(`Invalid token specified: invalid json for part #${r+1} (${g.message})`)}}var gv={debug:()=>{},info:()=>{},warn:()=>{},error:()=>{}},Pr,Dr,ea=(e=>(e[e.NONE=0]="NONE",e[e.ERROR=1]="ERROR",e[e.WARN=2]="WARN",e[e.INFO=3]="INFO",e[e.DEBUG=4]="DEBUG",e))(ea||{});(e=>{function t(){Pr=3,Dr=gv}e.reset=t;function r(p){if(!(0<=p&&p<=4))throw new Error("Invalid log level");Pr=p}e.setLevel=r;function n(p){Dr=p}e.setLogger=n})(ea||(ea={}));var Ut=class Or{constructor(t){this._name=t}debug(...t){Pr>=4&&Dr.debug(Or._format(this._name,this._method),...t)}info(...t){Pr>=3&&Dr.info(Or._format(this._name,this._method),...t)}warn(...t){Pr>=2&&Dr.warn(Or._format(this._name,this._method),...t)}error(...t){Pr>=1&&Dr.error(Or._format(this._name,this._method),...t)}throw(t){throw this.error(t),t}create(t){let r=Object.create(this);return r._method=t,r.debug("begin"),r}static createStatic(t,r){let n=new Or(`${t}.${r}`);return n.debug("begin"),n}static _format(t,r){let n=`[${t}]`;return r?`${n} ${r}:`:n}static debug(t,...r){Pr>=4&&Dr.debug(Or._format(t),...r)}static info(t,...r){Pr>=3&&Dr.info(Or._format(t),...r)}static warn(t,...r){Pr>=2&&Dr.warn(Or._format(t),...r)}static error(t,...r){Pr>=1&&Dr.error(Or._format(t),...r)}};ea.reset();var hv="10000000-1000-4000-8000-100000000000",Sc=e=>btoa([...new Uint8Array(e)].map(t=>String.fromCharCode(t)).join("")),yi=class en{static _randomWord(){let t=new Uint32Array(1);return crypto.getRandomValues(t),t[0]}static generateUUIDv4(){return hv.replace(/[018]/g,r=>(+r^en._randomWord()&15>>+r/4).toString(16)).replace(/-/g,"")}static generateCodeVerifier(){return en.generateUUIDv4()+en.generateUUIDv4()+en.generateUUIDv4()}static async generateCodeChallenge(t){if(!crypto.subtle)throw new Error("Crypto.subtle is available only in secure contexts (HTTPS).");try{let n=new TextEncoder().encode(t),p=await crypto.subtle.digest("SHA-256",n);return Sc(p).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}catch(r){throw Ut.error("CryptoUtils.generateCodeChallenge",r),r}}static generateBasicAuth(t,r){let p=new TextEncoder().encode([t,r].join(":"));return Sc(p)}},fo=class{constructor(e){this._name=e,this._logger=new Ut(`Event('${this._name}')`),this._callbacks=[]}addHandler(e){return this._callbacks.push(e),()=>this.removeHandler(e)}removeHandler(e){let t=this._callbacks.lastIndexOf(e);t>=0&&this._callbacks.splice(t,1)}async raise(...e){this._logger.debug("raise:",...e);for(let t of this._callbacks)await t(...e)}},Ss=class{static decode(e){try{return _c(e)}catch(t){throw Ut.error("JwtUtils.decode",t),t}}},Cc=class{static center({...e}){var t,r,n;return e.width==null&&(e.width=(t=[800,720,600,480].find(p=>p<=window.outerWidth/1.618))!=null?t:360),(r=e.left)!=null||(e.left=Math.max(0,Math.round(window.screenX+(window.outerWidth-e.width)/2))),e.height!=null&&((n=e.top)!=null||(e.top=Math.max(0,Math.round(window.screenY+(window.outerHeight-e.height)/2)))),e}static serialize(e){return Object.entries(e).filter(([,t])=>t!=null).map(([t,r])=>`${t}=${typeof r!="boolean"?r:r?"yes":"no"}`).join(",")}},Xr=class ta extends fo{constructor(){super(...arguments),this._logger=new Ut(`Timer('${this._name}')`),this._timerHandle=null,this._expiration=0,this._callback=()=>{let t=this._expiration-ta.getEpochTime();this._logger.debug("timer completes in",t),this._expiration<=ta.getEpochTime()&&(this.cancel(),super.raise())}}static getEpochTime(){return Math.floor(Date.now()/1e3)}init(t){let r=this._logger.create("init");t=Math.max(Math.floor(t),1);let n=ta.getEpochTime()+t;if(this.expiration===n&&this._timerHandle){r.debug("skipping since already initialized for expiration at",this.expiration);return}this.cancel(),r.debug("using duration",t),this._expiration=n;let p=Math.min(t,5);this._timerHandle=setInterval(this._callback,p*1e3)}get expiration(){return this._expiration}cancel(){this._logger.create("cancel"),this._timerHandle&&(clearInterval(this._timerHandle),this._timerHandle=null)}},Cs=class{static readParams(e,t="query"){if(!e)throw new TypeError("Invalid URL");let n=new URL(e,"http://127.0.0.1")[t==="fragment"?"hash":"search"];return new URLSearchParams(n.slice(1))}},Ts=";",Wo=class extends Error{constructor(e,t){var r,n,p;if(super(e.error_description||e.error||""),this.form=t,this.name="ErrorResponse",!e.error)throw Ut.error("ErrorResponse","No error passed"),new Error("No error passed");this.error=e.error,this.error_description=(r=e.error_description)!=null?r:null,this.error_uri=(n=e.error_uri)!=null?n:null,this.state=e.userState,this.session_state=(p=e.session_state)!=null?p:null,this.url_state=e.url_state}},Rs=class extends Error{constructor(e){super(e),this.name="ErrorTimeout"}},bv=class{constructor(e){this._logger=new Ut("AccessTokenEvents"),this._expiringTimer=new Xr("Access token expiring"),this._expiredTimer=new Xr("Access token expired"),this._expiringNotificationTimeInSeconds=e.expiringNotificationTimeInSeconds}load(e){let t=this._logger.create("load");if(e.access_token&&e.expires_in!==void 0){let r=e.expires_in;if(t.debug("access token present, remaining duration:",r),r>0){let p=r-this._expiringNotificationTimeInSeconds;p<=0&&(p=1),t.debug("registering expiring timer, raising in",p,"seconds"),this._expiringTimer.init(p)}else t.debug("canceling existing expiring timer because we're past expiration."),this._expiringTimer.cancel();let n=r+1;t.debug("registering expired timer, raising in",n,"seconds"),this._expiredTimer.init(n)}else this._expiringTimer.cancel(),this._expiredTimer.cancel()}unload(){this._logger.debug("unload: canceling existing access token timers"),this._expiringTimer.cancel(),this._expiredTimer.cancel()}addAccessTokenExpiring(e){return this._expiringTimer.addHandler(e)}removeAccessTokenExpiring(e){this._expiringTimer.removeHandler(e)}addAccessTokenExpired(e){return this._expiredTimer.addHandler(e)}removeAccessTokenExpired(e){this._expiredTimer.removeHandler(e)}},fv=class{constructor(e,t,r,n,p){this._callback=e,this._client_id=t,this._intervalInSeconds=n,this._stopOnError=p,this._logger=new Ut("CheckSessionIFrame"),this._timer=null,this._session_state=null,this._message=s=>{s.origin===this._frame_origin&&s.source===this._frame.contentWindow&&(s.data==="error"?(this._logger.error("error message from check session op iframe"),this._stopOnError&&this.stop()):s.data==="changed"?(this._logger.debug("changed message from check session op iframe"),this.stop(),this._callback()):this._logger.debug(s.data+" message from check session op iframe"))};let g=new URL(r);this._frame_origin=g.origin,this._frame=window.document.createElement("iframe"),this._frame.style.visibility="hidden",this._frame.style.position="fixed",this._frame.style.left="-1000px",this._frame.style.top="0",this._frame.width="0",this._frame.height="0",this._frame.src=g.href}load(){return new Promise(e=>{this._frame.onload=()=>{e()},window.document.body.appendChild(this._frame),window.addEventListener("message",this._message,!1)})}start(e){if(this._session_state===e)return;this._logger.create("start"),this.stop(),this._session_state=e;let t=()=>{!this._frame.contentWindow||!this._session_state||this._frame.contentWindow.postMessage(this._client_id+" "+this._session_state,this._frame_origin)};t(),this._timer=setInterval(t,this._intervalInSeconds*1e3)}stop(){this._logger.create("stop"),this._session_state=null,this._timer&&(clearInterval(this._timer),this._timer=null)}},$c=class{constructor(){this._logger=new Ut("InMemoryWebStorage"),this._data={}}clear(){this._logger.create("clear"),this._data={}}getItem(e){return this._logger.create(`getItem('${e}')`),this._data[e]}setItem(e,t){this._logger.create(`setItem('${e}')`),this._data[e]=t}removeItem(e){this._logger.create(`removeItem('${e}')`),delete this._data[e]}get length(){return Object.getOwnPropertyNames(this._data).length}key(e){return Object.getOwnPropertyNames(this._data)[e]}},Ms=class{constructor(e=[],t=null,r={}){this._jwtHandler=t,this._extraHeaders=r,this._logger=new Ut("JsonService"),this._contentTypes=[],this._contentTypes.push(...e,"application/json"),t&&this._contentTypes.push("application/jwt")}async fetchWithTimeout(e,t={}){let{timeoutInSeconds:r,...n}=t;if(!r)return await fetch(e,n);let p=new AbortController,g=setTimeout(()=>p.abort(),r*1e3);try{return await fetch(e,{...t,signal:p.signal})}catch(s){throw s instanceof DOMException&&s.name==="AbortError"?new Rs("Network timed out"):s}finally{clearTimeout(g)}}async getJson(e,{token:t,credentials:r}={}){let n=this._logger.create("getJson"),p={Accept:this._contentTypes.join(", ")};t&&(n.debug("token passed, setting Authorization header"),p.Authorization="Bearer "+t),this.appendExtraHeaders(p);let g;try{n.debug("url:",e),g=await this.fetchWithTimeout(e,{method:"GET",headers:p,credentials:r})}catch(o){throw n.error("Network Error"),o}n.debug("HTTP response received, status",g.status);let s=g.headers.get("Content-Type");if(s&&!this._contentTypes.find(o=>s.startsWith(o))&&n.throw(new Error(`Invalid response Content-Type: ${s??"undefined"}, from URL: ${e}`)),g.ok&&this._jwtHandler&&s?.startsWith("application/jwt"))return await this._jwtHandler(await g.text());let u;try{u=await g.json()}catch(o){throw n.error("Error parsing JSON response",o),g.ok?o:new Error(`${g.statusText} (${g.status})`)}if(!g.ok)throw n.error("Error from server:",u),u.error?new Wo(u):new Error(`${g.statusText} (${g.status}): ${JSON.stringify(u)}`);return u}async postForm(e,{body:t,basicAuth:r,timeoutInSeconds:n,initCredentials:p}){let g=this._logger.create("postForm"),s={Accept:this._contentTypes.join(", "),"Content-Type":"application/x-www-form-urlencoded"};r!==void 0&&(s.Authorization="Basic "+r),this.appendExtraHeaders(s);let u;try{g.debug("url:",e),u=await this.fetchWithTimeout(e,{method:"POST",headers:s,body:t,timeoutInSeconds:n,credentials:p})}catch(l){throw g.error("Network error"),l}g.debug("HTTP response received, status",u.status);let o=u.headers.get("Content-Type");if(o&&!this._contentTypes.find(l=>o.startsWith(l)))throw new Error(`Invalid response Content-Type: ${o??"undefined"}, from URL: ${e}`);let i=await u.text(),a={};if(i)try{a=JSON.parse(i)}catch(l){throw g.error("Error parsing JSON response",l),u.ok?l:new Error(`${u.statusText} (${u.status})`)}if(!u.ok)throw g.error("Error from server:",a),a.error?new Wo(a,t):new Error(`${u.statusText} (${u.status}): ${JSON.stringify(a)}`);return a}appendExtraHeaders(e){let t=this._logger.create("appendExtraHeaders"),r=Object.keys(this._extraHeaders),n=["authorization","accept","content-type"];r.length!==0&&r.forEach(p=>{if(n.includes(p.toLocaleLowerCase())){t.warn("Protected header could not be overridden",p,n);return}let g=typeof this._extraHeaders[p]=="function"?this._extraHeaders[p]():this._extraHeaders[p];g&&g!==""&&(e[p]=g)})}},vv=class{constructor(e){this._settings=e,this._logger=new Ut("MetadataService"),this._signingKeys=null,this._metadata=null,this._metadataUrl=this._settings.metadataUrl,this._jsonService=new Ms(["application/jwk-set+json"],null,this._settings.extraHeaders),this._settings.signingKeys&&(this._logger.debug("using signingKeys from settings"),this._signingKeys=this._settings.signingKeys),this._settings.metadata&&(this._logger.debug("using metadata from settings"),this._metadata=this._settings.metadata),this._settings.fetchRequestCredentials&&(this._logger.debug("using fetchRequestCredentials from settings"),this._fetchRequestCredentials=this._settings.fetchRequestCredentials)}resetSigningKeys(){this._signingKeys=null}async getMetadata(){let e=this._logger.create("getMetadata");if(this._metadata)return e.debug("using cached values"),this._metadata;if(!this._metadataUrl)throw e.throw(new Error("No authority or metadataUrl configured on settings")),null;e.debug("getting metadata from",this._metadataUrl);let t=await this._jsonService.getJson(this._metadataUrl,{credentials:this._fetchRequestCredentials});return e.debug("merging remote JSON with seed metadata"),this._metadata=Object.assign({},this._settings.metadataSeed,t),this._metadata}getIssuer(){return this._getMetadataProperty("issuer")}getAuthorizationEndpoint(){return this._getMetadataProperty("authorization_endpoint")}getUserInfoEndpoint(){return this._getMetadataProperty("userinfo_endpoint")}getTokenEndpoint(e=!0){return this._getMetadataProperty("token_endpoint",e)}getCheckSessionIframe(){return this._getMetadataProperty("check_session_iframe",!0)}getEndSessionEndpoint(){return this._getMetadataProperty("end_session_endpoint",!0)}getRevocationEndpoint(e=!0){return this._getMetadataProperty("revocation_endpoint",e)}getKeysEndpoint(e=!0){return this._getMetadataProperty("jwks_uri",e)}async _getMetadataProperty(e,t=!1){let r=this._logger.create(`_getMetadataProperty('${e}')`),n=await this.getMetadata();if(r.debug("resolved"),n[e]===void 0){if(t===!0){r.warn("Metadata does not contain optional property");return}r.throw(new Error("Metadata does not contain property "+e))}return n[e]}async getSigningKeys(){let e=this._logger.create("getSigningKeys");if(this._signingKeys)return e.debug("returning signingKeys from cache"),this._signingKeys;let t=await this.getKeysEndpoint(!1);e.debug("got jwks_uri",t);let r=await this._jsonService.getJson(t);if(e.debug("got key set",r),!Array.isArray(r.keys))throw e.throw(new Error("Missing keys on keyset")),null;return this._signingKeys=r.keys,this._signingKeys}},Rc=class{constructor({prefix:e="oidc.",store:t=localStorage}={}){this._logger=new Ut("WebStorageStateStore"),this._store=t,this._prefix=e}async set(e,t){this._logger.create(`set('${e}')`),e=this._prefix+e,await this._store.setItem(e,t)}async get(e){return this._logger.create(`get('${e}')`),e=this._prefix+e,await this._store.getItem(e)}async remove(e){this._logger.create(`remove('${e}')`),e=this._prefix+e;let t=await this._store.getItem(e);return await this._store.removeItem(e),t}async getAllKeys(){this._logger.create("getAllKeys");let e=await this._store.length,t=[];for(let r=0;r<e;r++){let n=await this._store.key(r);n&&n.indexOf(this._prefix)===0&&t.push(n.substr(this._prefix.length))}return t}},wv="code",yv="openid",xv="client_secret_post",kv=60*15,As=class{constructor({authority:e,metadataUrl:t,metadata:r,signingKeys:n,metadataSeed:p,client_id:g,client_secret:s,response_type:u=wv,scope:o=yv,redirect_uri:i,post_logout_redirect_uri:a,client_authentication:l=xv,prompt:d,display:c,max_age:m,ui_locales:h,acr_values:v,resource:k,response_mode:x,filterProtocolClaims:T=!0,loadUserInfo:S=!1,staleStateAgeInSeconds:f=kv,mergeClaimsStrategy:L={array:"replace"},disablePKCE:$=!1,stateStore:A,revokeTokenAdditionalContentTypes:C,fetchRequestCredentials:w,refreshTokenAllowedScope:y,extraQueryParams:b={},extraTokenParams:E={},extraHeaders:_={}}){if(this.authority=e,t?this.metadataUrl=t:(this.metadataUrl=e,e&&(this.metadataUrl.endsWith("/")||(this.metadataUrl+="/"),this.metadataUrl+=".well-known/openid-configuration")),this.metadata=r,this.metadataSeed=p,this.signingKeys=n,this.client_id=g,this.client_secret=s,this.response_type=u,this.scope=o,this.redirect_uri=i,this.post_logout_redirect_uri=a,this.client_authentication=l,this.prompt=d,this.display=c,this.max_age=m,this.ui_locales=h,this.acr_values=v,this.resource=k,this.response_mode=x,this.filterProtocolClaims=T??!0,this.loadUserInfo=!!S,this.staleStateAgeInSeconds=f,this.mergeClaimsStrategy=L,this.disablePKCE=!!$,this.revokeTokenAdditionalContentTypes=C,this.fetchRequestCredentials=w||"same-origin",A)this.stateStore=A;else{let R=typeof window<"u"?window.localStorage:new $c;this.stateStore=new Rc({store:R})}this.refreshTokenAllowedScope=y,this.extraQueryParams=b,this.extraTokenParams=E,this.extraHeaders=_}},Ev=class{constructor(e,t){this._settings=e,this._metadataService=t,this._logger=new Ut("UserInfoService"),this._getClaimsFromJwt=async r=>{let n=this._logger.create("_getClaimsFromJwt");try{let p=Ss.decode(r);return n.debug("JWT decoding successful"),p}catch(p){throw n.error("Error parsing JWT response"),p}},this._jsonService=new Ms(void 0,this._getClaimsFromJwt,this._settings.extraHeaders)}async getClaims(e){let t=this._logger.create("getClaims");e||this._logger.throw(new Error("No token passed"));let r=await this._metadataService.getUserInfoEndpoint();t.debug("got userinfo url",r);let n=await this._jsonService.getJson(r,{token:e,credentials:this._settings.fetchRequestCredentials});return t.debug("got claims",n),n}},Mc=class{constructor(e,t){this._settings=e,this._metadataService=t,this._logger=new Ut("TokenClient"),this._jsonService=new Ms(this._settings.revokeTokenAdditionalContentTypes,null,this._settings.extraHeaders)}async exchangeCode({grant_type:e="authorization_code",redirect_uri:t=this._settings.redirect_uri,client_id:r=this._settings.client_id,client_secret:n=this._settings.client_secret,...p}){let g=this._logger.create("exchangeCode");r||g.throw(new Error("A client_id is required")),t||g.throw(new Error("A redirect_uri is required")),p.code||g.throw(new Error("A code is required"));let s=new URLSearchParams({grant_type:e,redirect_uri:t});for(let[a,l]of Object.entries(p))l!=null&&s.set(a,l);let u;switch(this._settings.client_authentication){case"client_secret_basic":if(!n)throw g.throw(new Error("A client_secret is required")),null;u=yi.generateBasicAuth(r,n);break;case"client_secret_post":s.append("client_id",r),n&&s.append("client_secret",n);break}let o=await this._metadataService.getTokenEndpoint(!1);g.debug("got token endpoint");let i=await this._jsonService.postForm(o,{body:s,basicAuth:u,initCredentials:this._settings.fetchRequestCredentials});return g.debug("got response"),i}async exchangeCredentials({grant_type:e="password",client_id:t=this._settings.client_id,client_secret:r=this._settings.client_secret,scope:n=this._settings.scope,...p}){let g=this._logger.create("exchangeCredentials");t||g.throw(new Error("A client_id is required"));let s=new URLSearchParams({grant_type:e,scope:n});for(let[a,l]of Object.entries(p))l!=null&&s.set(a,l);let u;switch(this._settings.client_authentication){case"client_secret_basic":if(!r)throw g.throw(new Error("A client_secret is required")),null;u=yi.generateBasicAuth(t,r);break;case"client_secret_post":s.append("client_id",t),r&&s.append("client_secret",r);break}let o=await this._metadataService.getTokenEndpoint(!1);g.debug("got token endpoint");let i=await this._jsonService.postForm(o,{body:s,basicAuth:u,initCredentials:this._settings.fetchRequestCredentials});return g.debug("got response"),i}async exchangeRefreshToken({grant_type:e="refresh_token",client_id:t=this._settings.client_id,client_secret:r=this._settings.client_secret,timeoutInSeconds:n,...p}){let g=this._logger.create("exchangeRefreshToken");t||g.throw(new Error("A client_id is required")),p.refresh_token||g.throw(new Error("A refresh_token is required"));let s=new URLSearchParams({grant_type:e});for(let[a,l]of Object.entries(p))Array.isArray(l)?l.forEach(d=>s.append(a,d)):l!=null&&s.set(a,l);let u;switch(this._settings.client_authentication){case"client_secret_basic":if(!r)throw g.throw(new Error("A client_secret is required")),null;u=yi.generateBasicAuth(t,r);break;case"client_secret_post":s.append("client_id",t),r&&s.append("client_secret",r);break}let o=await this._metadataService.getTokenEndpoint(!1);g.debug("got token endpoint");let i=await this._jsonService.postForm(o,{body:s,basicAuth:u,timeoutInSeconds:n,initCredentials:this._settings.fetchRequestCredentials});return g.debug("got response"),i}async revoke(e){var t;let r=this._logger.create("revoke");e.token||r.throw(new Error("A token is required"));let n=await this._metadataService.getRevocationEndpoint(!1);r.debug(`got revocation endpoint, revoking ${(t=e.token_type_hint)!=null?t:"default token type"}`);let p=new URLSearchParams;for(let[g,s]of Object.entries(e))s!=null&&p.set(g,s);p.set("client_id",this._settings.client_id),this._settings.client_secret&&p.set("client_secret",this._settings.client_secret),await this._jsonService.postForm(n,{body:p}),r.debug("got response")}},_v=class{constructor(e,t,r){this._settings=e,this._metadataService=t,this._claimsService=r,this._logger=new Ut("ResponseValidator"),this._userInfoService=new Ev(this._settings,this._metadataService),this._tokenClient=new Mc(this._settings,this._metadataService)}async validateSigninResponse(e,t){let r=this._logger.create("validateSigninResponse");this._processSigninState(e,t),r.debug("state processed"),await this._processCode(e,t),r.debug("code processed"),e.isOpenId&&this._validateIdTokenAttributes(e),r.debug("tokens validated"),await this._processClaims(e,t?.skipUserInfo,e.isOpenId),r.debug("claims processed")}async validateCredentialsResponse(e,t){let r=this._logger.create("validateCredentialsResponse");e.isOpenId&&e.id_token&&this._validateIdTokenAttributes(e),r.debug("tokens validated"),await this._processClaims(e,t,e.isOpenId),r.debug("claims processed")}async validateRefreshResponse(e,t){var r,n;let p=this._logger.create("validateRefreshResponse");e.userState=t.data,(r=e.session_state)!=null||(e.session_state=t.session_state),(n=e.scope)!=null||(e.scope=t.scope),e.isOpenId&&e.id_token&&(this._validateIdTokenAttributes(e,t.id_token),p.debug("ID Token validated")),e.id_token||(e.id_token=t.id_token,e.profile=t.profile);let g=e.isOpenId&&!!e.id_token;await this._processClaims(e,!1,g),p.debug("claims processed")}validateSignoutResponse(e,t){let r=this._logger.create("validateSignoutResponse");if(t.id!==e.state&&r.throw(new Error("State does not match")),r.debug("state validated"),e.userState=t.data,e.error)throw r.warn("Response was error",e.error),new Wo(e)}_processSigninState(e,t){var r;let n=this._logger.create("_processSigninState");if(t.id!==e.state&&n.throw(new Error("State does not match")),t.client_id||n.throw(new Error("No client_id on state")),t.authority||n.throw(new Error("No authority on state")),this._settings.authority!==t.authority&&n.throw(new Error("authority mismatch on settings vs. signin state")),this._settings.client_id&&this._settings.client_id!==t.client_id&&n.throw(new Error("client_id mismatch on settings vs. signin state")),n.debug("state validated"),e.userState=t.data,e.url_state=t.url_state,(r=e.scope)!=null||(e.scope=t.scope),e.error)throw n.warn("Response was error",e.error),new Wo(e);t.code_verifier&&!e.code&&n.throw(new Error("Expected code in response"))}async _processClaims(e,t=!1,r=!0){let n=this._logger.create("_processClaims");if(e.profile=this._claimsService.filterProtocolClaims(e.profile),t||!this._settings.loadUserInfo||!e.access_token){n.debug("not loading user info");return}n.debug("loading user info");let p=await this._userInfoService.getClaims(e.access_token);n.debug("user info claims received from user info endpoint"),r&&p.sub!==e.profile.sub&&n.throw(new Error("subject from UserInfo response does not match subject in ID Token")),e.profile=this._claimsService.mergeClaims(e.profile,this._claimsService.filterProtocolClaims(p)),n.debug("user info claims received, updated profile:",e.profile)}async _processCode(e,t){let r=this._logger.create("_processCode");if(e.code){r.debug("Validating code");let n=await this._tokenClient.exchangeCode({client_id:t.client_id,client_secret:t.client_secret,code:e.code,redirect_uri:t.redirect_uri,code_verifier:t.code_verifier,...t.extraTokenParams});Object.assign(e,n)}else r.debug("No code to process")}_validateIdTokenAttributes(e,t){var r;let n=this._logger.create("_validateIdTokenAttributes");n.debug("decoding ID Token JWT");let p=Ss.decode((r=e.id_token)!=null?r:"");if(p.sub||n.throw(new Error("ID Token is missing a subject claim")),t){let g=Ss.decode(t);p.sub!==g.sub&&n.throw(new Error("sub in id_token does not match current sub")),p.auth_time&&p.auth_time!==g.auth_time&&n.throw(new Error("auth_time in id_token does not match original auth_time")),p.azp&&p.azp!==g.azp&&n.throw(new Error("azp in id_token does not match original azp")),!p.azp&&g.azp&&n.throw(new Error("azp not in id_token, but present in original id_token"))}e.profile=p}},ra=class Ls{constructor(t){this.id=t.id||yi.generateUUIDv4(),this.data=t.data,t.created&&t.created>0?this.created=t.created:this.created=Xr.getEpochTime(),this.request_type=t.request_type,this.url_state=t.url_state}toStorageString(){return new Ut("State").create("toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type,url_state:this.url_state})}static fromStorageString(t){return Ut.createStatic("State","fromStorageString"),Promise.resolve(new Ls(JSON.parse(t)))}static async clearStaleState(t,r){let n=Ut.createStatic("State","clearStaleState"),p=Xr.getEpochTime()-r,g=await t.getAllKeys();n.debug("got keys",g);for(let s=0;s<g.length;s++){let u=g[s],o=await t.get(u),i=!1;if(o)try{let a=await Ls.fromStorageString(o);n.debug("got item from key:",u,a.created),a.created<=p&&(i=!0)}catch(a){n.error("Error parsing state for key:",u,a),i=!0}else n.debug("no item in storage for key:",u),i=!0;i&&(n.debug("removed item for key:",u),t.remove(u))}}},Ic=class $s extends ra{constructor(t){super(t),this.code_verifier=t.code_verifier,this.code_challenge=t.code_challenge,this.authority=t.authority,this.client_id=t.client_id,this.redirect_uri=t.redirect_uri,this.scope=t.scope,this.client_secret=t.client_secret,this.extraTokenParams=t.extraTokenParams,this.response_mode=t.response_mode,this.skipUserInfo=t.skipUserInfo}static async create(t){let r=t.code_verifier===!0?yi.generateCodeVerifier():t.code_verifier||void 0,n=r?await yi.generateCodeChallenge(r):void 0;return new $s({...t,code_verifier:r,code_challenge:n})}toStorageString(){return new Ut("SigninState").create("toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type,url_state:this.url_state,code_verifier:this.code_verifier,authority:this.authority,client_id:this.client_id,redirect_uri:this.redirect_uri,scope:this.scope,client_secret:this.client_secret,extraTokenParams:this.extraTokenParams,response_mode:this.response_mode,skipUserInfo:this.skipUserInfo})}static fromStorageString(t){Ut.createStatic("SigninState","fromStorageString");let r=JSON.parse(t);return $s.create(r)}},Oc=class Pc{constructor(t){this.url=t.url,this.state=t.state}static async create({url:t,authority:r,client_id:n,redirect_uri:p,response_type:g,scope:s,state_data:u,response_mode:o,request_type:i,client_secret:a,nonce:l,url_state:d,resource:c,skipUserInfo:m,extraQueryParams:h,extraTokenParams:v,disablePKCE:k,...x}){if(!t)throw this._logger.error("create: No url passed"),new Error("url");if(!n)throw this._logger.error("create: No client_id passed"),new Error("client_id");if(!p)throw this._logger.error("create: No redirect_uri passed"),new Error("redirect_uri");if(!g)throw this._logger.error("create: No response_type passed"),new Error("response_type");if(!s)throw this._logger.error("create: No scope passed"),new Error("scope");if(!r)throw this._logger.error("create: No authority passed"),new Error("authority");let T=await Ic.create({data:u,request_type:i,url_state:d,code_verifier:!k,client_id:n,authority:r,redirect_uri:p,response_mode:o,client_secret:a,scope:s,extraTokenParams:v,skipUserInfo:m}),S=new URL(t);S.searchParams.append("client_id",n),S.searchParams.append("redirect_uri",p),S.searchParams.append("response_type",g),S.searchParams.append("scope",s),l&&S.searchParams.append("nonce",l);let f=T.id;d&&(f=`${f}${Ts}${d}`),S.searchParams.append("state",f),T.code_challenge&&(S.searchParams.append("code_challenge",T.code_challenge),S.searchParams.append("code_challenge_method","S256")),c&&(Array.isArray(c)?c:[c]).forEach($=>S.searchParams.append("resource",$));for(let[L,$]of Object.entries({response_mode:o,...x,...h}))$!=null&&S.searchParams.append(L,$.toString());return new Pc({url:S.href,state:T})}};Oc._logger=new Ut("SigninRequest");var Sv=Oc,Cv="openid",Es=class{constructor(e){if(this.access_token="",this.token_type="",this.profile={},this.state=e.get("state"),this.session_state=e.get("session_state"),this.state){let t=decodeURIComponent(this.state).split(Ts);this.state=t[0],t.length>1&&(this.url_state=t.slice(1).join(Ts))}this.error=e.get("error"),this.error_description=e.get("error_description"),this.error_uri=e.get("error_uri"),this.code=e.get("code")}get expires_in(){if(this.expires_at!==void 0)return this.expires_at-Xr.getEpochTime()}set expires_in(e){typeof e=="string"&&(e=Number(e)),e!==void 0&&e>=0&&(this.expires_at=Math.floor(e)+Xr.getEpochTime())}get isOpenId(){var e;return((e=this.scope)==null?void 0:e.split(" ").includes(Cv))||!!this.id_token}},Tv=class{constructor({url:e,state_data:t,id_token_hint:r,post_logout_redirect_uri:n,extraQueryParams:p,request_type:g,client_id:s}){if(this._logger=new Ut("SignoutRequest"),!e)throw this._logger.error("ctor: No url passed"),new Error("url");let u=new URL(e);r&&u.searchParams.append("id_token_hint",r),s&&u.searchParams.append("client_id",s),n&&(u.searchParams.append("post_logout_redirect_uri",n),t&&(this.state=new ra({data:t,request_type:g}),u.searchParams.append("state",this.state.id)));for(let[o,i]of Object.entries({...p}))i!=null&&u.searchParams.append(o,i.toString());this.url=u.href}},Av=class{constructor(e){this.state=e.get("state"),this.error=e.get("error"),this.error_description=e.get("error_description"),this.error_uri=e.get("error_uri")}},Lv=["nbf","jti","auth_time","nonce","acr","amr","azp","at_hash"],$v=["sub","iss","aud","exp","iat"],Rv=class{constructor(e){this._settings=e,this._logger=new Ut("ClaimsService")}filterProtocolClaims(e){let t={...e};if(this._settings.filterProtocolClaims){let r;Array.isArray(this._settings.filterProtocolClaims)?r=this._settings.filterProtocolClaims:r=Lv;for(let n of r)$v.includes(n)||delete t[n]}return t}mergeClaims(e,t){let r={...e};for(let[n,p]of Object.entries(t))if(r[n]!==p)if(Array.isArray(r[n])||Array.isArray(p))if(this._settings.mergeClaimsStrategy.array=="replace")r[n]=p;else{let g=Array.isArray(r[n])?r[n]:[r[n]];for(let s of Array.isArray(p)?p:[p])g.includes(s)||g.push(s);r[n]=g}else typeof r[n]=="object"&&typeof p=="object"?r[n]=this.mergeClaims(r[n],p):r[n]=p;return r}},Mv=class{constructor(e,t){this._logger=new Ut("OidcClient"),this.settings=e instanceof As?e:new As(e),this.metadataService=t??new vv(this.settings),this._claimsService=new Rv(this.settings),this._validator=new _v(this.settings,this.metadataService,this._claimsService),this._tokenClient=new Mc(this.settings,this.metadataService)}async createSigninRequest({state:e,request:t,request_uri:r,request_type:n,id_token_hint:p,login_hint:g,skipUserInfo:s,nonce:u,url_state:o,response_type:i=this.settings.response_type,scope:a=this.settings.scope,redirect_uri:l=this.settings.redirect_uri,prompt:d=this.settings.prompt,display:c=this.settings.display,max_age:m=this.settings.max_age,ui_locales:h=this.settings.ui_locales,acr_values:v=this.settings.acr_values,resource:k=this.settings.resource,response_mode:x=this.settings.response_mode,extraQueryParams:T=this.settings.extraQueryParams,extraTokenParams:S=this.settings.extraTokenParams}){let f=this._logger.create("createSigninRequest");if(i!=="code")throw new Error("Only the Authorization Code flow (with PKCE) is supported");let L=await this.metadataService.getAuthorizationEndpoint();f.debug("Received authorization endpoint",L);let $=await Sv.create({url:L,authority:this.settings.authority,client_id:this.settings.client_id,redirect_uri:l,response_type:i,scope:a,state_data:e,url_state:o,prompt:d,display:c,max_age:m,ui_locales:h,id_token_hint:p,login_hint:g,acr_values:v,resource:k,request:t,request_uri:r,extraQueryParams:T,extraTokenParams:S,request_type:n,response_mode:x,client_secret:this.settings.client_secret,skipUserInfo:s,nonce:u,disablePKCE:this.settings.disablePKCE});await this.clearStaleState();let A=$.state;return await this.settings.stateStore.set(A.id,A.toStorageString()),$}async readSigninResponseState(e,t=!1){let r=this._logger.create("readSigninResponseState"),n=new Es(Cs.readParams(e,this.settings.response_mode));if(!n.state)throw r.throw(new Error("No state in response")),null;let p=await this.settings.stateStore[t?"remove":"get"](n.state);if(!p)throw r.throw(new Error("No matching state found in storage")),null;return{state:await Ic.fromStorageString(p),response:n}}async processSigninResponse(e){let t=this._logger.create("processSigninResponse"),{state:r,response:n}=await this.readSigninResponseState(e,!0);return t.debug("received state from storage; validating response"),await this._validator.validateSigninResponse(n,r),n}async processResourceOwnerPasswordCredentials({username:e,password:t,skipUserInfo:r=!1,extraTokenParams:n={}}){let p=await this._tokenClient.exchangeCredentials({username:e,password:t,...n}),g=new Es(new URLSearchParams);return Object.assign(g,p),await this._validator.validateCredentialsResponse(g,r),g}async useRefreshToken({state:e,redirect_uri:t,resource:r,timeoutInSeconds:n,extraTokenParams:p}){var g;let s=this._logger.create("useRefreshToken"),u;if(this.settings.refreshTokenAllowedScope===void 0)u=e.scope;else{let a=this.settings.refreshTokenAllowedScope.split(" ");u=(((g=e.scope)==null?void 0:g.split(" "))||[]).filter(d=>a.includes(d)).join(" ")}let o=await this._tokenClient.exchangeRefreshToken({refresh_token:e.refresh_token,scope:u,redirect_uri:t,resource:r,timeoutInSeconds:n,...p}),i=new Es(new URLSearchParams);return Object.assign(i,o),s.debug("validating response",i),await this._validator.validateRefreshResponse(i,{...e,scope:u}),i}async createSignoutRequest({state:e,id_token_hint:t,client_id:r,request_type:n,post_logout_redirect_uri:p=this.settings.post_logout_redirect_uri,extraQueryParams:g=this.settings.extraQueryParams}={}){let s=this._logger.create("createSignoutRequest"),u=await this.metadataService.getEndSessionEndpoint();if(!u)throw s.throw(new Error("No end session endpoint")),null;s.debug("Received end session endpoint",u),!r&&p&&!t&&(r=this.settings.client_id);let o=new Tv({url:u,id_token_hint:t,client_id:r,post_logout_redirect_uri:p,state_data:e,extraQueryParams:g,request_type:n});await this.clearStaleState();let i=o.state;return i&&(s.debug("Signout request has state to persist"),await this.settings.stateStore.set(i.id,i.toStorageString())),o}async readSignoutResponseState(e,t=!1){let r=this._logger.create("readSignoutResponseState"),n=new Av(Cs.readParams(e,this.settings.response_mode));if(!n.state){if(r.debug("No state in response"),n.error)throw r.warn("Response was error:",n.error),new Wo(n);return{state:void 0,response:n}}let p=await this.settings.stateStore[t?"remove":"get"](n.state);if(!p)throw r.throw(new Error("No matching state found in storage")),null;return{state:await ra.fromStorageString(p),response:n}}async processSignoutResponse(e){let t=this._logger.create("processSignoutResponse"),{state:r,response:n}=await this.readSignoutResponseState(e,!0);return r?(t.debug("Received state from storage; validating response"),this._validator.validateSignoutResponse(n,r)):t.debug("No state from storage; skipping response validation"),n}clearStaleState(){return this._logger.create("clearStaleState"),ra.clearStaleState(this.settings.stateStore,this.settings.staleStateAgeInSeconds)}async revokeToken(e,t){return this._logger.create("revokeToken"),await this._tokenClient.revoke({token:e,token_type_hint:t})}},Iv=class{constructor(e){this._userManager=e,this._logger=new Ut("SessionMonitor"),this._start=async t=>{let r=t.session_state;if(!r)return;let n=this._logger.create("_start");if(t.profile?(this._sub=t.profile.sub,n.debug("session_state",r,", sub",this._sub)):(this._sub=void 0,n.debug("session_state",r,", anonymous user")),this._checkSessionIFrame){this._checkSessionIFrame.start(r);return}try{let p=await this._userManager.metadataService.getCheckSessionIframe();if(p){n.debug("initializing check session iframe");let g=this._userManager.settings.client_id,s=this._userManager.settings.checkSessionIntervalInSeconds,u=this._userManager.settings.stopCheckSessionOnError,o=new fv(this._callback,g,p,s,u);await o.load(),this._checkSessionIFrame=o,o.start(r)}else n.warn("no check session iframe found in the metadata")}catch(p){n.error("Error from getCheckSessionIframe:",p instanceof Error?p.message:p)}},this._stop=()=>{let t=this._logger.create("_stop");if(this._sub=void 0,this._checkSessionIFrame&&this._checkSessionIFrame.stop(),this._userManager.settings.monitorAnonymousSession){let r=setInterval(async()=>{clearInterval(r);try{let n=await this._userManager.querySessionStatus();if(n){let p={session_state:n.session_state,profile:n.sub?{sub:n.sub}:null};this._start(p)}}catch(n){t.error("error from querySessionStatus",n instanceof Error?n.message:n)}},1e3)}},this._callback=async()=>{let t=this._logger.create("_callback");try{let r=await this._userManager.querySessionStatus(),n=!0;r&&this._checkSessionIFrame?r.sub===this._sub?(n=!1,this._checkSessionIFrame.start(r.session_state),t.debug("same sub still logged in at OP, session state has changed, restarting check session iframe; session_state",r.session_state),await this._userManager.events._raiseUserSessionChanged()):t.debug("different subject signed into OP",r.sub):t.debug("subject no longer signed into OP"),n?this._sub?await this._userManager.events._raiseUserSignedOut():await this._userManager.events._raiseUserSignedIn():t.debug("no change in session detected, no event to raise")}catch(r){this._sub&&(t.debug("Error calling queryCurrentSigninSession; raising signed out event",r),await this._userManager.events._raiseUserSignedOut())}},e||this._logger.throw(new Error("No user manager passed")),this._userManager.events.addUserLoaded(this._start),this._userManager.events.addUserUnloaded(this._stop),this._init().catch(t=>{this._logger.error(t)})}async _init(){this._logger.create("_init");let e=await this._userManager.getUser();if(e)this._start(e);else if(this._userManager.settings.monitorAnonymousSession){let t=await this._userManager.querySessionStatus();if(t){let r={session_state:t.session_state,profile:t.sub?{sub:t.sub}:null};this._start(r)}}}},_s=class Dc{constructor(t){var r;this.id_token=t.id_token,this.session_state=(r=t.session_state)!=null?r:null,this.access_token=t.access_token,this.refresh_token=t.refresh_token,this.token_type=t.token_type,this.scope=t.scope,this.profile=t.profile,this.expires_at=t.expires_at,this.state=t.userState,this.url_state=t.url_state}get expires_in(){if(this.expires_at!==void 0)return this.expires_at-Xr.getEpochTime()}set expires_in(t){t!==void 0&&(this.expires_at=Math.floor(t)+Xr.getEpochTime())}get expired(){let t=this.expires_in;if(t!==void 0)return t<=0}get scopes(){var t,r;return(r=(t=this.scope)==null?void 0:t.split(" "))!=null?r:[]}toStorageString(){return new Ut("User").create("toStorageString"),JSON.stringify({id_token:this.id_token,session_state:this.session_state,access_token:this.access_token,refresh_token:this.refresh_token,token_type:this.token_type,scope:this.scope,profile:this.profile,expires_at:this.expires_at})}static fromStorageString(t){return Ut.createStatic("User","fromStorageString"),new Dc(JSON.parse(t))}},Tc="oidc-client",Nc=class{constructor(){this._abort=new fo("Window navigation aborted"),this._disposeHandlers=new Set,this._window=null}async navigate(e){let t=this._logger.create("navigate");if(!this._window)throw new Error("Attempted to navigate on a disposed window");t.debug("setting URL in window"),this._window.location.replace(e.url);let{url:r,keepOpen:n}=await new Promise((p,g)=>{let s=u=>{var o;let i=u.data,a=(o=e.scriptOrigin)!=null?o:window.location.origin;if(!(u.origin!==a||i?.source!==Tc)){try{let l=Cs.readParams(i.url,e.response_mode).get("state");if(l||t.warn("no state found in response url"),u.source!==this._window&&l!==e.state)return}catch{this._dispose(),g(new Error("Invalid response from window"))}p(i)}};window.addEventListener("message",s,!1),this._disposeHandlers.add(()=>window.removeEventListener("message",s,!1)),this._disposeHandlers.add(this._abort.addHandler(u=>{this._dispose(),g(u)}))});return t.debug("got response from window"),this._dispose(),n||this.close(),{url:r}}_dispose(){this._logger.create("_dispose");for(let e of this._disposeHandlers)e();this._disposeHandlers.clear()}static _notifyParent(e,t,r=!1,n=window.location.origin){e.postMessage({source:Tc,url:t,keepOpen:r},n)}},Fc={location:!1,toolbar:!1,height:640,closePopupWindowAfterInSeconds:-1},zc="_blank",Ov=60,Pv=2,Bc=10,Dv=class extends As{constructor(e){let{popup_redirect_uri:t=e.redirect_uri,popup_post_logout_redirect_uri:r=e.post_logout_redirect_uri,popupWindowFeatures:n=Fc,popupWindowTarget:p=zc,redirectMethod:g="assign",redirectTarget:s="self",iframeNotifyParentOrigin:u=e.iframeNotifyParentOrigin,iframeScriptOrigin:o=e.iframeScriptOrigin,silent_redirect_uri:i=e.redirect_uri,silentRequestTimeoutInSeconds:a=Bc,automaticSilentRenew:l=!0,validateSubOnSilentRenew:d=!0,includeIdTokenInSilentRenew:c=!1,monitorSession:m=!1,monitorAnonymousSession:h=!1,checkSessionIntervalInSeconds:v=Pv,query_status_response_type:k="code",stopCheckSessionOnError:x=!0,revokeTokenTypes:T=["access_token","refresh_token"],revokeTokensOnSignout:S=!1,includeIdTokenInSilentSignout:f=!1,accessTokenExpiringNotificationTimeInSeconds:L=Ov,userStore:$}=e;if(super(e),this.popup_redirect_uri=t,this.popup_post_logout_redirect_uri=r,this.popupWindowFeatures=n,this.popupWindowTarget=p,this.redirectMethod=g,this.redirectTarget=s,this.iframeNotifyParentOrigin=u,this.iframeScriptOrigin=o,this.silent_redirect_uri=i,this.silentRequestTimeoutInSeconds=a,this.automaticSilentRenew=l,this.validateSubOnSilentRenew=d,this.includeIdTokenInSilentRenew=c,this.monitorSession=m,this.monitorAnonymousSession=h,this.checkSessionIntervalInSeconds=v,this.stopCheckSessionOnError=x,this.query_status_response_type=k,this.revokeTokenTypes=T,this.revokeTokensOnSignout=S,this.includeIdTokenInSilentSignout=f,this.accessTokenExpiringNotificationTimeInSeconds=L,$)this.userStore=$;else{let A=typeof window<"u"?window.sessionStorage:new $c;this.userStore=new Rc({store:A})}}},Ac=class Uc extends Nc{constructor({silentRequestTimeoutInSeconds:t=Bc}){super(),this._logger=new Ut("IFrameWindow"),this._timeoutInSeconds=t,this._frame=Uc.createHiddenIframe(),this._window=this._frame.contentWindow}static createHiddenIframe(){let t=window.document.createElement("iframe");return t.style.visibility="hidden",t.style.position="fixed",t.style.left="-1000px",t.style.top="0",t.width="0",t.height="0",window.document.body.appendChild(t),t}async navigate(t){this._logger.debug("navigate: Using timeout of:",this._timeoutInSeconds);let r=setTimeout(()=>void this._abort.raise(new Rs("IFrame timed out without a response")),this._timeoutInSeconds*1e3);return this._disposeHandlers.add(()=>clearTimeout(r)),await super.navigate(t)}close(){var t;this._frame&&(this._frame.parentNode&&(this._frame.addEventListener("load",r=>{var n;let p=r.target;(n=p.parentNode)==null||n.removeChild(p),this._abort.raise(new Error("IFrame removed from DOM"))},!0),(t=this._frame.contentWindow)==null||t.location.replace("about:blank")),this._frame=null),this._window=null}static notifyParent(t,r){return super._notifyParent(window.parent,t,!1,r)}},Nv=class{constructor(e){this._settings=e,this._logger=new Ut("IFrameNavigator")}async prepare({silentRequestTimeoutInSeconds:e=this._settings.silentRequestTimeoutInSeconds}){return new Ac({silentRequestTimeoutInSeconds:e})}async callback(e){this._logger.create("callback"),Ac.notifyParent(e,this._settings.iframeNotifyParentOrigin)}},Fv=500,zv=1e3,Lc=class extends Nc{constructor({popupWindowTarget:e=zc,popupWindowFeatures:t={}}){super(),this._logger=new Ut("PopupWindow");let r=Cc.center({...Fc,...t});this._window=window.open(void 0,e,Cc.serialize(r)),t.closePopupWindowAfterInSeconds&&t.closePopupWindowAfterInSeconds>0&&setTimeout(()=>{if(!this._window||typeof this._window.closed!="boolean"||this._window.closed){this._abort.raise(new Error("Popup blocked by user"));return}this.close()},t.closePopupWindowAfterInSeconds*zv)}async navigate(e){var t;(t=this._window)==null||t.focus();let r=setInterval(()=>{(!this._window||this._window.closed)&&this._abort.raise(new Error("Popup closed by user"))},Fv);return this._disposeHandlers.add(()=>clearInterval(r)),await super.navigate(e)}close(){this._window&&(this._window.closed||(this._window.close(),this._abort.raise(new Error("Popup closed")))),this._window=null}static notifyOpener(e,t){if(!window.opener)throw new Error("No window.opener. Can't complete notification.");return super._notifyParent(window.opener,e,t)}},Bv=class{constructor(e){this._settings=e,this._logger=new Ut("PopupNavigator")}async prepare({popupWindowFeatures:e=this._settings.popupWindowFeatures,popupWindowTarget:t=this._settings.popupWindowTarget}){return new Lc({popupWindowFeatures:e,popupWindowTarget:t})}async callback(e,{keepOpen:t=!1}){this._logger.create("callback"),Lc.notifyOpener(e,t)}},Uv=class{constructor(e){this._settings=e,this._logger=new Ut("RedirectNavigator")}async prepare({redirectMethod:e=this._settings.redirectMethod,redirectTarget:t=this._settings.redirectTarget}){var r;this._logger.create("prepare");let n=window.self;t==="top"&&(n=(r=window.top)!=null?r:window.self);let p=n.location[e].bind(n.location),g;return{navigate:async s=>{this._logger.create("navigate");let u=new Promise((o,i)=>{g=i});return p(s.url),await u},close:()=>{this._logger.create("close"),g?.(new Error("Redirect aborted")),n.stop()}}}async callback(){}},Hv=class extends bv{constructor(e){super({expiringNotificationTimeInSeconds:e.accessTokenExpiringNotificationTimeInSeconds}),this._logger=new Ut("UserManagerEvents"),this._userLoaded=new fo("User loaded"),this._userUnloaded=new fo("User unloaded"),this._silentRenewError=new fo("Silent renew error"),this._userSignedIn=new fo("User signed in"),this._userSignedOut=new fo("User signed out"),this._userSessionChanged=new fo("User session changed")}async load(e,t=!0){super.load(e),t&&await this._userLoaded.raise(e)}async unload(){super.unload(),await this._userUnloaded.raise()}addUserLoaded(e){return this._userLoaded.addHandler(e)}removeUserLoaded(e){return this._userLoaded.removeHandler(e)}addUserUnloaded(e){return this._userUnloaded.addHandler(e)}removeUserUnloaded(e){return this._userUnloaded.removeHandler(e)}addSilentRenewError(e){return this._silentRenewError.addHandler(e)}removeSilentRenewError(e){return this._silentRenewError.removeHandler(e)}async _raiseSilentRenewError(e){await this._silentRenewError.raise(e)}addUserSignedIn(e){return this._userSignedIn.addHandler(e)}removeUserSignedIn(e){this._userSignedIn.removeHandler(e)}async _raiseUserSignedIn(){await this._userSignedIn.raise()}addUserSignedOut(e){return this._userSignedOut.addHandler(e)}removeUserSignedOut(e){this._userSignedOut.removeHandler(e)}async _raiseUserSignedOut(){await this._userSignedOut.raise()}addUserSessionChanged(e){return this._userSessionChanged.addHandler(e)}removeUserSessionChanged(e){this._userSessionChanged.removeHandler(e)}async _raiseUserSessionChanged(){await this._userSessionChanged.raise()}},jv=class{constructor(e){this._userManager=e,this._logger=new Ut("SilentRenewService"),this._isStarted=!1,this._retryTimer=new Xr("Retry Silent Renew"),this._tokenExpiring=async()=>{let t=this._logger.create("_tokenExpiring");try{await this._userManager.signinSilent(),t.debug("silent token renewal successful")}catch(r){if(r instanceof Rs){t.warn("ErrorTimeout from signinSilent:",r,"retry in 5s"),this._retryTimer.init(5);return}t.error("Error from signinSilent:",r),await this._userManager.events._raiseSilentRenewError(r)}}}async start(){let e=this._logger.create("start");if(!this._isStarted){this._isStarted=!0,this._userManager.events.addAccessTokenExpiring(this._tokenExpiring),this._retryTimer.addHandler(this._tokenExpiring);try{await this._userManager.getUser()}catch(t){e.error("getUser error",t)}}}stop(){this._isStarted&&(this._retryTimer.cancel(),this._retryTimer.removeHandler(this._tokenExpiring),this._userManager.events.removeAccessTokenExpiring(this._tokenExpiring),this._isStarted=!1)}},Wv=class{constructor(e){this.refresh_token=e.refresh_token,this.id_token=e.id_token,this.session_state=e.session_state,this.scope=e.scope,this.profile=e.profile,this.data=e.state}},oa=class{constructor(e,t,r,n){this._logger=new Ut("UserManager"),this.settings=new Dv(e),this._client=new Mv(e),this._redirectNavigator=t??new Uv(this.settings),this._popupNavigator=r??new Bv(this.settings),this._iframeNavigator=n??new Nv(this.settings),this._events=new Hv(this.settings),this._silentRenewService=new jv(this),this.settings.automaticSilentRenew&&this.startSilentRenew(),this._sessionMonitor=null,this.settings.monitorSession&&(this._sessionMonitor=new Iv(this))}get events(){return this._events}get metadataService(){return this._client.metadataService}async getUser(){let e=this._logger.create("getUser"),t=await this._loadUser();return t?(e.info("user loaded"),await this._events.load(t,!1),t):(e.info("user not found in storage"),null)}async removeUser(){let e=this._logger.create("removeUser");await this.storeUser(null),e.info("user removed from storage"),await this._events.unload()}async signinRedirect(e={}){this._logger.create("signinRedirect");let{redirectMethod:t,...r}=e,n=await this._redirectNavigator.prepare({redirectMethod:t});await this._signinStart({request_type:"si:r",...r},n)}async signinRedirectCallback(e=window.location.href){let t=this._logger.create("signinRedirectCallback"),r=await this._signinEnd(e);return r.profile&&r.profile.sub?t.info("success, signed in subject",r.profile.sub):t.info("no subject"),r}async signinResourceOwnerCredentials({username:e,password:t,skipUserInfo:r=!1}){let n=this._logger.create("signinResourceOwnerCredential"),p=await this._client.processResourceOwnerPasswordCredentials({username:e,password:t,skipUserInfo:r,extraTokenParams:this.settings.extraTokenParams});n.debug("got signin response");let g=await this._buildUser(p);return g.profile&&g.profile.sub?n.info("success, signed in subject",g.profile.sub):n.info("no subject"),g}async signinPopup(e={}){let t=this._logger.create("signinPopup"),{popupWindowFeatures:r,popupWindowTarget:n,...p}=e,g=this.settings.popup_redirect_uri;g||t.throw(new Error("No popup_redirect_uri configured"));let s=await this._popupNavigator.prepare({popupWindowFeatures:r,popupWindowTarget:n}),u=await this._signin({request_type:"si:p",redirect_uri:g,display:"popup",...p},s);return u&&(u.profile&&u.profile.sub?t.info("success, signed in subject",u.profile.sub):t.info("no subject")),u}async signinPopupCallback(e=window.location.href,t=!1){let r=this._logger.create("signinPopupCallback");await this._popupNavigator.callback(e,{keepOpen:t}),r.info("success")}async signinSilent(e={}){var t;let r=this._logger.create("signinSilent"),{silentRequestTimeoutInSeconds:n,...p}=e,g=await this._loadUser();if(g?.refresh_token){r.debug("using refresh token");let i=new Wv(g);return await this._useRefreshToken({state:i,redirect_uri:p.redirect_uri,resource:p.resource,extraTokenParams:p.extraTokenParams,timeoutInSeconds:n})}let s=this.settings.silent_redirect_uri;s||r.throw(new Error("No silent_redirect_uri configured"));let u;g&&this.settings.validateSubOnSilentRenew&&(r.debug("subject prior to silent renew:",g.profile.sub),u=g.profile.sub);let o=await this._iframeNavigator.prepare({silentRequestTimeoutInSeconds:n});return g=await this._signin({request_type:"si:s",redirect_uri:s,prompt:"none",id_token_hint:this.settings.includeIdTokenInSilentRenew?g?.id_token:void 0,...p},o,u),g&&((t=g.profile)!=null&&t.sub?r.info("success, signed in subject",g.profile.sub):r.info("no subject")),g}async _useRefreshToken(e){let t=await this._client.useRefreshToken({...e,timeoutInSeconds:this.settings.silentRequestTimeoutInSeconds}),r=new _s({...e.state,...t});return await this.storeUser(r),await this._events.load(r),r}async signinSilentCallback(e=window.location.href){let t=this._logger.create("signinSilentCallback");await this._iframeNavigator.callback(e),t.info("success")}async signinCallback(e=window.location.href){let{state:t}=await this._client.readSigninResponseState(e);switch(t.request_type){case"si:r":return await this.signinRedirectCallback(e);case"si:p":return await this.signinPopupCallback(e);case"si:s":return await this.signinSilentCallback(e);default:throw new Error("invalid response_type in state")}}async signoutCallback(e=window.location.href,t=!1){let{state:r}=await this._client.readSignoutResponseState(e);if(r)switch(r.request_type){case"so:r":await this.signoutRedirectCallback(e);break;case"so:p":await this.signoutPopupCallback(e,t);break;case"so:s":await this.signoutSilentCallback(e);break;default:throw new Error("invalid response_type in state")}}async querySessionStatus(e={}){let t=this._logger.create("querySessionStatus"),{silentRequestTimeoutInSeconds:r,...n}=e,p=this.settings.silent_redirect_uri;p||t.throw(new Error("No silent_redirect_uri configured"));let g=await this._loadUser(),s=await this._iframeNavigator.prepare({silentRequestTimeoutInSeconds:r}),u=await this._signinStart({request_type:"si:s",redirect_uri:p,prompt:"none",id_token_hint:this.settings.includeIdTokenInSilentRenew?g?.id_token:void 0,response_type:this.settings.query_status_response_type,scope:"openid",skipUserInfo:!0,...n},s);try{let o=await this._client.processSigninResponse(u.url);return t.debug("got signin response"),o.session_state&&o.profile.sub?(t.info("success for subject",o.profile.sub),{session_state:o.session_state,sub:o.profile.sub}):(t.info("success, user not authenticated"),null)}catch(o){if(this.settings.monitorAnonymousSession&&o instanceof Wo)switch(o.error){case"login_required":case"consent_required":case"interaction_required":case"account_selection_required":return t.info("success for anonymous user"),{session_state:o.session_state}}throw o}}async _signin(e,t,r){let n=await this._signinStart(e,t);return await this._signinEnd(n.url,r)}async _signinStart(e,t){let r=this._logger.create("_signinStart");try{let n=await this._client.createSigninRequest(e);return r.debug("got signin request"),await t.navigate({url:n.url,state:n.state.id,response_mode:n.state.response_mode,scriptOrigin:this.settings.iframeScriptOrigin})}catch(n){throw r.debug("error after preparing navigator, closing navigator window"),t.close(),n}}async _signinEnd(e,t){let r=this._logger.create("_signinEnd"),n=await this._client.processSigninResponse(e);return r.debug("got signin response"),await this._buildUser(n,t)}async _buildUser(e,t){let r=this._logger.create("_buildUser"),n=new _s(e);if(t){if(t!==n.profile.sub)throw r.debug("current user does not match user returned from signin. sub from signin:",n.profile.sub),new Wo({...e,error:"login_required"});r.debug("current user matches user returned from signin")}return await this.storeUser(n),r.debug("user stored"),await this._events.load(n),n}async signoutRedirect(e={}){let t=this._logger.create("signoutRedirect"),{redirectMethod:r,...n}=e,p=await this._redirectNavigator.prepare({redirectMethod:r});await this._signoutStart({request_type:"so:r",post_logout_redirect_uri:this.settings.post_logout_redirect_uri,...n},p),t.info("success")}async signoutRedirectCallback(e=window.location.href){let t=this._logger.create("signoutRedirectCallback"),r=await this._signoutEnd(e);return t.info("success"),r}async signoutPopup(e={}){let t=this._logger.create("signoutPopup"),{popupWindowFeatures:r,popupWindowTarget:n,...p}=e,g=this.settings.popup_post_logout_redirect_uri,s=await this._popupNavigator.prepare({popupWindowFeatures:r,popupWindowTarget:n});await this._signout({request_type:"so:p",post_logout_redirect_uri:g,state:g==null?void 0:{},...p},s),t.info("success")}async signoutPopupCallback(e=window.location.href,t=!1){let r=this._logger.create("signoutPopupCallback");await this._popupNavigator.callback(e,{keepOpen:t}),r.info("success")}async _signout(e,t){let r=await this._signoutStart(e,t);return await this._signoutEnd(r.url)}async _signoutStart(e={},t){var r;let n=this._logger.create("_signoutStart");try{let p=await this._loadUser();n.debug("loaded current user from storage"),this.settings.revokeTokensOnSignout&&await this._revokeInternal(p);let g=e.id_token_hint||p&&p.id_token;g&&(n.debug("setting id_token_hint in signout request"),e.id_token_hint=g),await this.removeUser(),n.debug("user removed, creating signout request");let s=await this._client.createSignoutRequest(e);return n.debug("got signout request"),await t.navigate({url:s.url,state:(r=s.state)==null?void 0:r.id,scriptOrigin:this.settings.iframeScriptOrigin})}catch(p){throw n.debug("error after preparing navigator, closing navigator window"),t.close(),p}}async _signoutEnd(e){let t=this._logger.create("_signoutEnd"),r=await this._client.processSignoutResponse(e);return t.debug("got signout response"),r}async signoutSilent(e={}){var t;let r=this._logger.create("signoutSilent"),{silentRequestTimeoutInSeconds:n,...p}=e,g=this.settings.includeIdTokenInSilentSignout?(t=await this._loadUser())==null?void 0:t.id_token:void 0,s=this.settings.popup_post_logout_redirect_uri,u=await this._iframeNavigator.prepare({silentRequestTimeoutInSeconds:n});await this._signout({request_type:"so:s",post_logout_redirect_uri:s,id_token_hint:g,...p},u),r.info("success")}async signoutSilentCallback(e=window.location.href){let t=this._logger.create("signoutSilentCallback");await this._iframeNavigator.callback(e),t.info("success")}async revokeTokens(e){let t=await this._loadUser();await this._revokeInternal(t,e)}async _revokeInternal(e,t=this.settings.revokeTokenTypes){let r=this._logger.create("_revokeInternal");if(!e)return;let n=t.filter(p=>typeof e[p]=="string");if(!n.length){r.debug("no need to revoke due to no token(s)");return}for(let p of n)await this._client.revokeToken(e[p],p),r.info(`${p} revoked successfully`),p!=="access_token"&&(e[p]=null);await this.storeUser(e),r.debug("user stored"),await this._events.load(e)}startSilentRenew(){this._logger.create("startSilentRenew"),this._silentRenewService.start()}stopSilentRenew(){this._silentRenewService.stop()}get _userStoreKey(){return`user:${this.settings.authority}:${this.settings.client_id}`}async _loadUser(){let e=this._logger.create("_loadUser"),t=await this.settings.userStore.get(this._userStoreKey);return t?(e.debug("user storageString loaded"),_s.fromStorageString(t)):(e.debug("no user storageString"),null)}async storeUser(e){let t=this._logger.create("storeUser");if(e){t.debug("storing user");let r=e.toStorageString();await this.settings.userStore.set(this._userStoreKey,r)}else this._logger.debug("removing user"),await this.settings.userStore.remove(this._userStoreKey)}async clearStaleState(){await this._client.clearStaleState()}};var sp=Da(Hc()),lp=Da(Wc());var{entries:tp,setPrototypeOf:Vc,isFrozen:Vv,getPrototypeOf:Gv,getOwnPropertyDescriptor:Kv}=Object,{freeze:Ue,seal:cr,create:ep}=Object,{apply:Us,construct:Hs}=typeof Reflect<"u"&&Reflect;Ue||(Ue=function(t){return t});cr||(cr=function(t){return t});Us||(Us=function(t,r,n){return t.apply(r,n)});Hs||(Hs=function(t,r){return new t(...r)});var aa=He(Array.prototype.forEach),Yv=He(Array.prototype.lastIndexOf),Gc=He(Array.prototype.pop),rn=He(Array.prototype.push),Xv=He(Array.prototype.splice),la=He(String.prototype.toLowerCase),Ds=He(String.prototype.toString),Kc=He(String.prototype.match),on=He(String.prototype.replace),Jv=He(String.prototype.indexOf),qv=He(String.prototype.trim),wr=He(Object.prototype.hasOwnProperty),Be=He(RegExp.prototype.test),nn=Qv(TypeError);function He(e){return function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),p=1;p<r;p++)n[p-1]=arguments[p];return Us(e,t,n)}}function Qv(e){return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Hs(e,r)}}function Dt(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:la;Vc&&Vc(e,null);let n=t.length;for(;n--;){let p=t[n];if(typeof p=="string"){let g=r(p);g!==p&&(Vv(t)||(t[n]=g),p=g)}e[p]=!0}return e}function Zv(e){for(let t=0;t<e.length;t++)wr(e,t)||(e[t]=null);return e}function Vo(e){let t=ep(null);for(let[r,n]of tp(e))wr(e,r)&&(Array.isArray(n)?t[r]=Zv(n):n&&typeof n=="object"&&n.constructor===Object?t[r]=Vo(n):t[r]=n);return t}function an(e,t){for(;e!==null;){let n=Kv(e,t);if(n){if(n.get)return He(n.get);if(typeof n.value=="function")return He(n.value)}e=Gv(e)}function r(){return null}return r}var Yc=Ue(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Ns=Ue(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Fs=Ue(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),tw=Ue(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),zs=Ue(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),ew=Ue(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Xc=Ue(["#text"]),Jc=Ue(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Bs=Ue(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),qc=Ue(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),sa=Ue(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),rw=cr(/\{\{[\w\W]*|[\w\W]*\}\}/gm),ow=cr(/<%[\w\W]*|[\w\W]*%>/gm),iw=cr(/\$\{[\w\W]*/gm),nw=cr(/^data-[\-\w.\u00B7-\uFFFF]+$/),aw=cr(/^aria-[\-\w]+$/),rp=cr(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),sw=cr(/^(?:\w+script|data):/i),lw=cr(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),op=cr(/^html$/i),dw=cr(/^[a-z][.\w]*(-[.\w]+)+$/i),Qc=Object.freeze({__proto__:null,ARIA_ATTR:aw,ATTR_WHITESPACE:lw,CUSTOM_ELEMENT:dw,DATA_ATTR:nw,DOCTYPE_NAME:op,ERB_EXPR:ow,IS_ALLOWED_URI:rp,IS_SCRIPT_OR_DATA:sw,MUSTACHE_EXPR:rw,TMPLIT_EXPR:iw}),sn={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},cw=function(){return typeof window>"u"?null:window},pw=function(t,r){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let n=null,p="data-tt-policy-suffix";r&&r.hasAttribute(p)&&(n=r.getAttribute(p));let g="dompurify"+(n?"#"+n:"");try{return t.createPolicy(g,{createHTML(s){return s},createScriptURL(s){return s}})}catch{return console.warn("TrustedTypes policy "+g+" could not be created."),null}},Zc=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function ip(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:cw(),t=ct=>ip(ct);if(t.version="3.2.4",t.removed=[],!e||!e.document||e.document.nodeType!==sn.document||!e.Element)return t.isSupported=!1,t;let{document:r}=e,n=r,p=n.currentScript,{DocumentFragment:g,HTMLTemplateElement:s,Node:u,Element:o,NodeFilter:i,NamedNodeMap:a=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:l,DOMParser:d,trustedTypes:c}=e,m=o.prototype,h=an(m,"cloneNode"),v=an(m,"remove"),k=an(m,"nextSibling"),x=an(m,"childNodes"),T=an(m,"parentNode");if(typeof s=="function"){let ct=r.createElement("template");ct.content&&ct.content.ownerDocument&&(r=ct.content.ownerDocument)}let S,f="",{implementation:L,createNodeIterator:$,createDocumentFragment:A,getElementsByTagName:C}=r,{importNode:w}=n,y=Zc();t.isSupported=typeof tp=="function"&&typeof T=="function"&&L&&L.createHTMLDocument!==void 0;let{MUSTACHE_EXPR:b,ERB_EXPR:E,TMPLIT_EXPR:_,DATA_ATTR:R,ARIA_ATTR:M,IS_SCRIPT_OR_DATA:I,ATTR_WHITESPACE:P,CUSTOM_ELEMENT:O}=Qc,{IS_ALLOWED_URI:F}=Qc,D=null,z=Dt({},[...Yc,...Ns,...Fs,...zs,...Xc]),N=null,W=Dt({},[...Jc,...Bs,...qc,...sa]),j=Object.seal(ep(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),X=null,G=null,J=!0,ot=!0,et=!1,vt=!0,bt=!1,ht=!0,U=!1,K=!1,it=!1,Q=!1,st=!1,rt=!1,nt=!0,Lt=!1,ft="user-content-",It=!0,H=!1,V={},tt=null,gt=Dt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),_t=null,$t=Dt({},["audio","video","img","source","image","track"]),Tt=null,Pt=Dt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ft="http://www.w3.org/1998/Math/MathML",Rt="http://www.w3.org/2000/svg",Bt="http://www.w3.org/1999/xhtml",Ce=Bt,ae=!1,Co=null,Br=Dt({},[Ft,Rt,Bt],Ds),ri=Dt({},["mi","mo","mn","ms","mtext"]),oi=Dt({},["annotation-xml"]),En=Dt({},["title","style","font","a","script"]),Ur=null,To=["application/xhtml+xml","text/html"],he="text/html",Ot=null,be=null,De=r.createElement("form"),ye=function(B){return B instanceof RegExp||B instanceof Function},de=function(){let B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(be&&be===B)){if((!B||typeof B!="object")&&(B={}),B=Vo(B),Ur=To.indexOf(B.PARSER_MEDIA_TYPE)===-1?he:B.PARSER_MEDIA_TYPE,Ot=Ur==="application/xhtml+xml"?Ds:la,D=wr(B,"ALLOWED_TAGS")?Dt({},B.ALLOWED_TAGS,Ot):z,N=wr(B,"ALLOWED_ATTR")?Dt({},B.ALLOWED_ATTR,Ot):W,Co=wr(B,"ALLOWED_NAMESPACES")?Dt({},B.ALLOWED_NAMESPACES,Ds):Br,Tt=wr(B,"ADD_URI_SAFE_ATTR")?Dt(Vo(Pt),B.ADD_URI_SAFE_ATTR,Ot):Pt,_t=wr(B,"ADD_DATA_URI_TAGS")?Dt(Vo($t),B.ADD_DATA_URI_TAGS,Ot):$t,tt=wr(B,"FORBID_CONTENTS")?Dt({},B.FORBID_CONTENTS,Ot):gt,X=wr(B,"FORBID_TAGS")?Dt({},B.FORBID_TAGS,Ot):{},G=wr(B,"FORBID_ATTR")?Dt({},B.FORBID_ATTR,Ot):{},V=wr(B,"USE_PROFILES")?B.USE_PROFILES:!1,J=B.ALLOW_ARIA_ATTR!==!1,ot=B.ALLOW_DATA_ATTR!==!1,et=B.ALLOW_UNKNOWN_PROTOCOLS||!1,vt=B.ALLOW_SELF_CLOSE_IN_ATTR!==!1,bt=B.SAFE_FOR_TEMPLATES||!1,ht=B.SAFE_FOR_XML!==!1,U=B.WHOLE_DOCUMENT||!1,Q=B.RETURN_DOM||!1,st=B.RETURN_DOM_FRAGMENT||!1,rt=B.RETURN_TRUSTED_TYPE||!1,it=B.FORCE_BODY||!1,nt=B.SANITIZE_DOM!==!1,Lt=B.SANITIZE_NAMED_PROPS||!1,It=B.KEEP_CONTENT!==!1,H=B.IN_PLACE||!1,F=B.ALLOWED_URI_REGEXP||rp,Ce=B.NAMESPACE||Bt,ri=B.MATHML_TEXT_INTEGRATION_POINTS||ri,oi=B.HTML_INTEGRATION_POINTS||oi,j=B.CUSTOM_ELEMENT_HANDLING||{},B.CUSTOM_ELEMENT_HANDLING&&ye(B.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(j.tagNameCheck=B.CUSTOM_ELEMENT_HANDLING.tagNameCheck),B.CUSTOM_ELEMENT_HANDLING&&ye(B.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(j.attributeNameCheck=B.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),B.CUSTOM_ELEMENT_HANDLING&&typeof B.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(j.allowCustomizedBuiltInElements=B.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),bt&&(ot=!1),st&&(Q=!0),V&&(D=Dt({},Xc),N=[],V.html===!0&&(Dt(D,Yc),Dt(N,Jc)),V.svg===!0&&(Dt(D,Ns),Dt(N,Bs),Dt(N,sa)),V.svgFilters===!0&&(Dt(D,Fs),Dt(N,Bs),Dt(N,sa)),V.mathMl===!0&&(Dt(D,zs),Dt(N,qc),Dt(N,sa))),B.ADD_TAGS&&(D===z&&(D=Vo(D)),Dt(D,B.ADD_TAGS,Ot)),B.ADD_ATTR&&(N===W&&(N=Vo(N)),Dt(N,B.ADD_ATTR,Ot)),B.ADD_URI_SAFE_ATTR&&Dt(Tt,B.ADD_URI_SAFE_ATTR,Ot),B.FORBID_CONTENTS&&(tt===gt&&(tt=Vo(tt)),Dt(tt,B.FORBID_CONTENTS,Ot)),It&&(D["#text"]=!0),U&&Dt(D,["html","head","body"]),D.table&&(Dt(D,["tbody"]),delete X.tbody),B.TRUSTED_TYPES_POLICY){if(typeof B.TRUSTED_TYPES_POLICY.createHTML!="function")throw nn('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof B.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw nn('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');S=B.TRUSTED_TYPES_POLICY,f=S.createHTML("")}else S===void 0&&(S=pw(c,p)),S!==null&&typeof f=="string"&&(f=S.createHTML(""));Ue&&Ue(B),be=B}},rr=Dt({},[...Ns,...Fs,...tw]),or=Dt({},[...zs,...ew]),so=function(B){let Z=T(B);(!Z||!Z.tagName)&&(Z={namespaceURI:Ce,tagName:"template"});let lt=la(B.tagName),ee=la(Z.tagName);return Co[B.namespaceURI]?B.namespaceURI===Rt?Z.namespaceURI===Bt?lt==="svg":Z.namespaceURI===Ft?lt==="svg"&&(ee==="annotation-xml"||ri[ee]):!!rr[lt]:B.namespaceURI===Ft?Z.namespaceURI===Bt?lt==="math":Z.namespaceURI===Rt?lt==="math"&&oi[ee]:!!or[lt]:B.namespaceURI===Bt?Z.namespaceURI===Rt&&!oi[ee]||Z.namespaceURI===Ft&&!ri[ee]?!1:!or[lt]&&(En[lt]||!rr[lt]):!!(Ur==="application/xhtml+xml"&&Co[B.namespaceURI]):!1},Lr=function(B){rn(t.removed,{element:B});try{T(B).removeChild(B)}catch{v(B)}},_n=function(B,Z){try{rn(t.removed,{attribute:Z.getAttributeNode(B),from:Z})}catch{rn(t.removed,{attribute:null,from:Z})}if(Z.removeAttribute(B),B==="is")if(Q||st)try{Lr(Z)}catch{}else try{Z.setAttribute(B,"")}catch{}},Yl=function(B){let Z=null,lt=null;if(it)B="<remove></remove>"+B;else{let Te=Kc(B,/^[\r\n\t ]+/);lt=Te&&Te[0]}Ur==="application/xhtml+xml"&&Ce===Bt&&(B='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+B+"</body></html>");let ee=S?S.createHTML(B):B;if(Ce===Bt)try{Z=new d().parseFromString(ee,Ur)}catch{}if(!Z||!Z.documentElement){Z=L.createDocument(Ce,"template",null);try{Z.documentElement.innerHTML=ae?f:ee}catch{}}let $e=Z.body||Z.documentElement;return B&&lt&&$e.insertBefore(r.createTextNode(lt),$e.childNodes[0]||null),Ce===Bt?C.call(Z,U?"html":"body")[0]:U?Z.documentElement:$e},Xl=function(B){return $.call(B.ownerDocument||B,B,i.SHOW_ELEMENT|i.SHOW_COMMENT|i.SHOW_TEXT|i.SHOW_PROCESSING_INSTRUCTION|i.SHOW_CDATA_SECTION,null)},Ia=function(B){return B instanceof l&&(typeof B.nodeName!="string"||typeof B.textContent!="string"||typeof B.removeChild!="function"||!(B.attributes instanceof a)||typeof B.removeAttribute!="function"||typeof B.setAttribute!="function"||typeof B.namespaceURI!="string"||typeof B.insertBefore!="function"||typeof B.hasChildNodes!="function")},Jl=function(B){return typeof u=="function"&&B instanceof u};function Hr(ct,B,Z){aa(ct,lt=>{lt.call(t,B,Z,be)})}let ql=function(B){let Z=null;if(Hr(y.beforeSanitizeElements,B,null),Ia(B))return Lr(B),!0;let lt=Ot(B.nodeName);if(Hr(y.uponSanitizeElement,B,{tagName:lt,allowedTags:D}),B.hasChildNodes()&&!Jl(B.firstElementChild)&&Be(/<[/\w]/g,B.innerHTML)&&Be(/<[/\w]/g,B.textContent)||B.nodeType===sn.progressingInstruction||ht&&B.nodeType===sn.comment&&Be(/<[/\w]/g,B.data))return Lr(B),!0;if(!D[lt]||X[lt]){if(!X[lt]&&Zl(lt)&&(j.tagNameCheck instanceof RegExp&&Be(j.tagNameCheck,lt)||j.tagNameCheck instanceof Function&&j.tagNameCheck(lt)))return!1;if(It&&!tt[lt]){let ee=T(B)||B.parentNode,$e=x(B)||B.childNodes;if($e&&ee){let Te=$e.length;for(let We=Te-1;We>=0;--We){let $r=h($e[We],!0);$r.__removalCount=(B.__removalCount||0)+1,ee.insertBefore($r,k(B))}}}return Lr(B),!0}return B instanceof o&&!so(B)||(lt==="noscript"||lt==="noembed"||lt==="noframes")&&Be(/<\/no(script|embed|frames)/i,B.innerHTML)?(Lr(B),!0):(bt&&B.nodeType===sn.text&&(Z=B.textContent,aa([b,E,_],ee=>{Z=on(Z,ee," ")}),B.textContent!==Z&&(rn(t.removed,{element:B.cloneNode()}),B.textContent=Z)),Hr(y.afterSanitizeElements,B,null),!1)},Ql=function(B,Z,lt){if(nt&&(Z==="id"||Z==="name")&&(lt in r||lt in De))return!1;if(!(ot&&!G[Z]&&Be(R,Z))){if(!(J&&Be(M,Z))){if(!N[Z]||G[Z]){if(!(Zl(B)&&(j.tagNameCheck instanceof RegExp&&Be(j.tagNameCheck,B)||j.tagNameCheck instanceof Function&&j.tagNameCheck(B))&&(j.attributeNameCheck instanceof RegExp&&Be(j.attributeNameCheck,Z)||j.attributeNameCheck instanceof Function&&j.attributeNameCheck(Z))||Z==="is"&&j.allowCustomizedBuiltInElements&&(j.tagNameCheck instanceof RegExp&&Be(j.tagNameCheck,lt)||j.tagNameCheck instanceof Function&&j.tagNameCheck(lt))))return!1}else if(!Tt[Z]){if(!Be(F,on(lt,P,""))){if(!((Z==="src"||Z==="xlink:href"||Z==="href")&&B!=="script"&&Jv(lt,"data:")===0&&_t[B])){if(!(et&&!Be(I,on(lt,P,"")))){if(lt)return!1}}}}}}return!0},Zl=function(B){return B!=="annotation-xml"&&Kc(B,O)},td=function(B){Hr(y.beforeSanitizeAttributes,B,null);let{attributes:Z}=B;if(!Z||Ia(B))return;let lt={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:N,forceKeepAttr:void 0},ee=Z.length;for(;ee--;){let $e=Z[ee],{name:Te,namespaceURI:We,value:$r}=$e,Ni=Ot(Te),Ne=Te==="value"?$r:qv($r);if(lt.attrName=Ni,lt.attrValue=Ne,lt.keepAttr=!0,lt.forceKeepAttr=void 0,Hr(y.uponSanitizeAttribute,B,lt),Ne=lt.attrValue,Lt&&(Ni==="id"||Ni==="name")&&(_n(Te,B),Ne=ft+Ne),ht&&Be(/((--!?|])>)|<\/(style|title)/i,Ne)){_n(Te,B);continue}if(lt.forceKeepAttr||(_n(Te,B),!lt.keepAttr))continue;if(!vt&&Be(/\/>/i,Ne)){_n(Te,B);continue}bt&&aa([b,E,_],rd=>{Ne=on(Ne,rd," ")});let ed=Ot(B.nodeName);if(Ql(ed,Ni,Ne)){if(S&&typeof c=="object"&&typeof c.getAttributeType=="function"&&!We)switch(c.getAttributeType(ed,Ni)){case"TrustedHTML":{Ne=S.createHTML(Ne);break}case"TrustedScriptURL":{Ne=S.createScriptURL(Ne);break}}try{We?B.setAttributeNS(We,Te,Ne):B.setAttribute(Te,Ne),Ia(B)?Lr(B):Gc(t.removed)}catch{}}}Hr(y.afterSanitizeAttributes,B,null)},wm=function ct(B){let Z=null,lt=Xl(B);for(Hr(y.beforeSanitizeShadowDOM,B,null);Z=lt.nextNode();)Hr(y.uponSanitizeShadowNode,Z,null),ql(Z),td(Z),Z.content instanceof g&&ct(Z.content);Hr(y.afterSanitizeShadowDOM,B,null)};return t.sanitize=function(ct){let B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Z=null,lt=null,ee=null,$e=null;if(ae=!ct,ae&&(ct="<!-->"),typeof ct!="string"&&!Jl(ct))if(typeof ct.toString=="function"){if(ct=ct.toString(),typeof ct!="string")throw nn("dirty is not a string, aborting")}else throw nn("toString is not a function");if(!t.isSupported)return ct;if(K||de(B),t.removed=[],typeof ct=="string"&&(H=!1),H){if(ct.nodeName){let $r=Ot(ct.nodeName);if(!D[$r]||X[$r])throw nn("root node is forbidden and cannot be sanitized in-place")}}else if(ct instanceof u)Z=Yl("<!---->"),lt=Z.ownerDocument.importNode(ct,!0),lt.nodeType===sn.element&&lt.nodeName==="BODY"||lt.nodeName==="HTML"?Z=lt:Z.appendChild(lt);else{if(!Q&&!bt&&!U&&ct.indexOf("<")===-1)return S&&rt?S.createHTML(ct):ct;if(Z=Yl(ct),!Z)return Q?null:rt?f:""}Z&&it&&Lr(Z.firstChild);let Te=Xl(H?ct:Z);for(;ee=Te.nextNode();)ql(ee),td(ee),ee.content instanceof g&&wm(ee.content);if(H)return ct;if(Q){if(st)for($e=A.call(Z.ownerDocument);Z.firstChild;)$e.appendChild(Z.firstChild);else $e=Z;return(N.shadowroot||N.shadowrootmode)&&($e=w.call(n,$e,!0)),$e}let We=U?Z.outerHTML:Z.innerHTML;return U&&D["!doctype"]&&Z.ownerDocument&&Z.ownerDocument.doctype&&Z.ownerDocument.doctype.name&&Be(op,Z.ownerDocument.doctype.name)&&(We="<!DOCTYPE "+Z.ownerDocument.doctype.name+`>
`+We),bt&&aa([b,E,_],$r=>{We=on(We,$r," ")}),S&&rt?S.createHTML(We):We},t.setConfig=function(){let ct=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};de(ct),K=!0},t.clearConfig=function(){be=null,K=!1},t.isValidAttribute=function(ct,B,Z){be||de({});let lt=Ot(ct),ee=Ot(B);return Ql(lt,ee,Z)},t.addHook=function(ct,B){typeof B=="function"&&rn(y[ct],B)},t.removeHook=function(ct,B){if(B!==void 0){let Z=Yv(y[ct],B);return Z===-1?void 0:Xv(y[ct],Z,1)[0]}return Gc(y[ct])},t.removeHooks=function(ct){y[ct]=[]},t.removeAllHooks=function(){y=Zc()},t}var np=ip();var xi={modalBodyConfirm:null,buttonConfirmed:null,toastContainer:null};function dp(){mt(xi)}var Wt=function(e,t,r,n,...p){let g=e.insertRow();g.id=t,vo(g,t,t,0);let s=t;return p.forEach(u=>{vo(g,u),s=u}),r&&g.classList.add("table-active"),n&&Ws(g,ap,mw(ap,uw,n),"Copy to clipboard"),g};function ki(e,t,r,n=!1,p=null){let g=e.insertCell(0);g.style.verticalAlign="middle",g.style.width="25px";let s=document.createElement("input");return s.classList.add("form-check-input"),s.type="checkbox",s.id=t,s.checked=r,s.disabled=n,p&&(s.onchange=p),g.append(s),s}function vo(e,t,r=null,n=-1){let p=e.insertCell(n);return p.textContent=t,p.setAttribute("data-bs-toggle","tooltip"),p.title=r??t,p}function Ws(e,t,r,n){let p=e.insertCell();p.classList.add("table-action-column");let g=document.createElement("button");g.classList.add("btn"),g.style.padding="0",g.innerHTML=`<i class="bi ${t}"></i>`,n&&(g.title=n),g.onclick=r,p.appendChild(g)}var ap="bi-copy",uw="bi-check-lg";function mw(e,t,r){return n=>{navigator.clipboard.writeText(r);let p=n.currentTarget.querySelector(".bi");p.classList.replace(e,t),setTimeout(()=>p.classList.replace(t,e),500)}}function da(e,t){let r=document.createElement("th");r.textContent=t,e.appendChild(r)}function Ge(e,t){e.textContent="",t.forEach(r=>{let n=document.createElement("option");n.text=r,e.appendChild(n)})}function Vs(e,t){e.textContent="",t.forEach(r=>{let n=document.createElement("option");n.value=r.key,n.text=r.text,e.appendChild(n)})}function wo(e,t){t.forEach(r=>{Go(e,r)})}function Go(e,t,r=!1,n){let p=document.createElement("li");p.innerHTML=r?`<h6 class="dropdown-header" data-value='${n}'>${Jr(t)}</h6>`:`<a class="dropdown-item" data-value='${n}'>${Jr(t)}</a>`,e.appendChild(p)}function Ei(e,t,r,n,p=null){let g="tab"+Math.random().toString(36).replace("0.",""),s=document.createElement("li");s.classList.add("nav-item"),p&&(s.setAttribute("data-bs-toggle","tooltip"),s.setAttribute("title",p)),s.innerHTML=`<a class="nav-link" data-bs-toggle="tab" data-bs-target="#${g}">${r}</a>`,e.appendChild(s);let u=document.createElement("template");return u.innerHTML=n,u.content.firstElementChild.id=g,t.appendChild(u.content.firstElementChild),g}function mt(e,t=null){Object.keys(e).forEach(r=>{if(e[r]=(t??document).getElementById(r),!e[r])throw new Error(`Element ${r} not found.`)})}function Jr(e){return np.sanitize(e)}function Gs(e,t="Info"){let r=document.createElement("div");r.classList.add("toast"),r.innerHTML=`<div class="toast-header toast-header-info">
  <i class="bi me-2 bi-info-circle-fill"></i>
  <strong class="me-auto">${Jr(t)}</strong>
  <small>${status}</small>
  <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
  </div>
  <div class="toast-body">${Jr(e)}</div>`,xi.toastContainer.appendChild(r),r.addEventListener("hidden.bs.toast",()=>{r.remove()}),new Bo(r).show()}function le(e,t="Error",r=""){let n=document.createElement("div");n.classList.add("toast"),n.innerHTML=`<div class="toast-header toast-header-warn alert-danger">
  <i class="bi me-2 bi-exclamation-triangle-fill"></i>
  <strong class="me-auto">${Jr(t)}</strong>
  <small>${r}</small>
  <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
  </div>
  <div class="toast-body">${Jr(e)}</div>`,xi.toastContainer.appendChild(n),n.addEventListener("hidden.bs.toast",()=>{n.remove()}),new Bo(n).show()}function gw(e){this.message=e,this.name="UserException"}function at(e,t,r=null){if(r&&r.classList.remove("is-invalid"),!e)throw r?(r.parentNode.getElementsByClassName("invalid-feedback")[0].textContent=t,r.classList.add("is-invalid")):le(t,"Error"),new gw(t)}function ln(e,t=!1){return t?e.replace("T"," ").replace("Z","").replace("."," "):e.split(".")[0].replace("T"," ")}var js;function Ke(e,t,r){js=js??new Ir("#modalConfirm"),xi.modalBodyConfirm.textContent=e,xi.buttonConfirmed.innerText=t,xi.buttonConfirmed.onclick=r,js.show()}function zt(e,t,r=!1,n=!1){let p=lp.edit(e);return p.setOption("wrap",n),p.setOption("useWorker",!1),p.session.setMode(t),r&&(p.setReadOnly(!0),p.renderer.setShowGutter(!1)),p}function cp(e,t,r){return new sp.default({selector:e,data:{src:t,keys:["label","group"]},placeHolder:r,resultsList:{class:"dropdown-menu show",maxResults:30},resultItem:{class:"dropdown-item",highlight:!0,element:(n,p)=>{n.style="display: flex;",n.innerHTML=`<span style="flex-grow: 1;" >${Jr(p.key==="label"?p.match:p.value.label)}</span>
            <span style="color: 3a8c9a;" class="fw-light fst-italic ms-1">
              ${p.key==="group"?p.match:p.value.group}</span>`}},events:{input:{results:()=>{Array.from(document.getElementsByClassName("resizable_pane")).forEach(n=>{n.style.overflow="unset"})},close:()=>{Array.from(document.getElementsByClassName("resizable_pane")).forEach(n=>{n.style.overflow="auto"})}}}})}function pr(e,t){e.addEventListener("click",()=>{t.classList.remove("is-invalid")})}function pp(e,t){Array.from(e.rows).forEach(r=>{t(r)?r.classList.add("table-active"):r.classList.remove("table-active")})}function St(e){return JSON.stringify(e,null,2)}function up(e,t){let r=e.value.indexOf(t);return r>=0?(e.focus(),e.setSelectionRange(r,r+t.length),!0):!1}function dn(e,t,r){!r||r.length===t.length?e.textContent=t.length>0?t.length.toString():"":e.textContent=`${r.length}/${t.length}`}var mp=`<!--
  ~ Copyright (c) 2022 Contributors to the Eclipse Foundation
  ~
  ~ See the NOTICE file(s) distributed with this work for additional
  ~ information regarding copyright ownership.
  ~
  ~ This program and the accompanying materials are made available under the
  ~ terms of the Eclipse Public License 2.0 which is available at
  ~ http://www.eclipse.org/legal/epl-2.0
  ~
  ~ SPDX-License-Identifier: EPL-2.0
  -->
<div class="row resizable_pane" style="height: 80vh">
    <div class="col-md-4 resizable_flex_column">
        <div class="input-group has-validation">
            <input class="form-control" id="tableValidationEnvironments" hidden="true"></input>
            <div class="invalid-feedback"></div>
        </div>
        <div class="table-wrap">
            <table class="table table-striped table-hover table-sm">
                <tbody id="tbodyEnvironments"></tbody>
            </table>
        </div>
    </div>
    <div class="col-md-8 resizable_flex_column">
        <ul class="nav nav-tabs nav-fill">
            <li class="nav-item">
                <a class="nav-link active" data-bs-toggle="tab" data-bs-target="#tabEnvDetails">Manage</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-bs-toggle="tab" data-bs-target="#tabEnvJson">JSON</a>
            </li>
        </ul>
        <div class="tab-content" style="flex-grow: 1; overflow: hidden;">
            <div class="tab-pane container active no-margin" id="tabEnvDetails">
                <crud-toolbar label="Name" id="crudEnvironmentFields" allowIdChange>
                    <div class="input-group input-group-sm mt-1">
                        <label class="input-group-text" data-bs-toggle="tooltip"
                            title="URI including protocol, host and port (e.g. http://localhost:8080)">API URI</label>
                        <input type="text" class="form-control form-control-sm" id="inputApiUri" disabled></input>
                    </div>
                    <div class="input-group input-group-sm mt-1">
                        <label class="input-group-text" data-bs-toggle="tooltip"
                            title="A comma-separated list of namespaces (e.g. com.example.namespace). The given namespaces are used as a parameter for the Things search">Search Namespaces</label>
                        <input type="text" class="form-control form-control-sm" spellcheck="false" id="inputSearchNamespaces" disabled></input>
                    </div>
                    <div class="input-group input-group-sm mt-1 mb-3">
                        <label class="input-group-text">Ditto Version</label>
                        <select class="form-select form-select-sm" id="selectDittoVersion" disabled>
                            <option selected value="3">3</option>
                            <option value="2">2</option>
                        </select>
                    </div>    
                    <label class="form-label">Optional Tabs</label>
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" role="switch" id="inputTabPolicies" disabled>
                        <label class="form-check-label" for="inputTabPolicies">Policies</label>
                      </div>
                      <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" role="switch" id="inputTabConnections" disabled>
                        <label class="form-check-label" for="inputTabConnections">Connections</label>
                      </div>
                      <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" role="switch" id="inputTabOperations" disabled>
                        <label class="form-check-label" for="inputTabOperations">Operations</label>
                      </div>
            </crud-toolbar>
            </div>
            <div class="tab-pane container no-margin" id="tabEnvJson">
                <crud-toolbar label="Name" id="crudEnvironmentJson" allowIdChange>
                    <div class="ace_container" style="flex-grow: 1;">
                        <div>
                            <div class="script_editor" id="settingsEditor"></div>
                        </div>
                    </div>
                </crud-toolbar>
            </div>
        </div>
    </div>
</div>`;var gp={local_ditto:{api_uri:"http://localhost:8080",ditto_version:3,disablePolicies:!1,disableConnections:!1,disableOperations:!1,authSettings:{main:{method:"basic",oidc:{enabled:!1},basic:{enabled:!0,defaultUsernamePassword:"ditto:ditto"},bearer:{enabled:!0},pre:{enabled:!1,defaultDittoPreAuthenticatedUsername:null}},devops:{method:"basic",oidc:{enabled:!1},basic:{enabled:!0,defaultUsernamePassword:"devops:foobar"},bearer:{enabled:!0}},oidc:{}}},local_ditto_ide:{api_uri:"http://localhost:8080",ditto_version:3,disablePolicies:!1,disableConnections:!1,disableOperations:!1,authSettings:{main:{method:"pre",oidc:{enabled:!1},basic:{enabled:!0,defaultUsernamePassword:null},bearer:{enabled:!0},pre:{enabled:!1,defaultDittoPreAuthenticatedUsername:"pre:ditto"}},devops:{method:"basic",oidc:{enabled:!1},basic:{enabled:!0,defaultUsernamePassword:"devops:foobar"},bearer:{enabled:!0}},oidc:{}}},ditto_sandbox:{api_uri:"https://ditto.eclipseprojects.io",ditto_version:3,disablePolicies:!1,disableConnections:!0,disableOperations:!0,authSettings:{main:{method:"basic",oidc:{enabled:!0,defaultProvider:"fake"},basic:{enabled:!0,defaultUsernamePassword:"ditto:ditto"},bearer:{enabled:!0},pre:{enabled:!1,defaultDittoPreAuthenticatedUsername:null}},devops:{method:"basic",oidc:{enabled:!1,defaultProvider:null},basic:{enabled:!1,defaultUsernamePassword:null},bearer:{enabled:!1}},oidc:{}}},oidc_example:{api_uri:"http://localhost:8080",ditto_version:3,disablePolicies:!1,disableConnections:!1,disableOperations:!1,authSettings:{main:{method:"oidc",oidc:{enabled:!0,defaultProvider:"fake",autoSso:!0},basic:{enabled:!1,defaultUsernamePassword:null},bearer:{enabled:!0},pre:{enabled:!1,defaultDittoPreAuthenticatedUsername:null}},devops:{method:"oidc",oidc:{enabled:!0,defaultProvider:"fake",autoSso:!0},basic:{enabled:!1,defaultUsernamePassword:null},bearer:{enabled:!0}},oidc:{providers:{fake:{displayName:"Fake IDP to test",extractBearerTokenFrom:"access_token",authority:"http://localhost:9900/fake",client_id:"some-client-id",redirect_uri:"http://localhost:8000",response_type:"code",scope:"openid"}}}}}};var fw="state",_i="primaryEnvironmentName",ca="oidcProvider",vw="environmentsURL",wp="ditto-ui-env",Ko=(p=>(p.oidc="oidc",p.basic="basic",p.bearer="bearer",p.pre="pre",p))(Ko||{}),ww={main:{method:"basic",oidc:{enabled:!1,defaultProvider:null,autoSso:!1},basic:{enabled:!0,defaultUsernamePassword:"ditto:ditto"},bearer:{enabled:!0},pre:{enabled:!1,defaultDittoPreAuthenticatedUsername:null}},devops:{method:"basic",oidc:{enabled:!1,defaultProvider:null,autoSso:!1},basic:{enabled:!0,defaultUsernamePassword:"devops:foobar"},bearer:{enabled:!1}},oidc:{}},Qt,oe,yo,pt={environmentSelector:null,tbodyEnvironments:null,tableValidationEnvironments:null,crudEnvironmentFields:null,crudEnvironmentJson:null,inputApiUri:null,inputSearchNamespaces:null,selectDittoVersion:null,inputTabPolicies:null,inputTabConnections:null,inputTabOperations:null},yp=[];document.getElementById("environmentsHTML").innerHTML=mp;function Ks(e){Object.assign(this,e),this.authSettings||(this.authSettings=ww),this.authSettings.main.oidc.provider=e.authSettings?.main?.oidc?.defaultProvider,Ep(e.authSettings?.main?.basic?.defaultUsernamePassword),this.authSettings.main.pre.dittoPreAuthenticatedUsername=e.authSettings?.main?.pre?.defaultDittoPreAuthenticatedUsername,this.authSettings.devops.oidc.provider=e.authSettings?.devops?.oidc?.defaultProvider,_p(e.authSettings?.devops?.basic?.defaultUsernamePassword)}function cn(){return pt.environmentSelector.value}function q(){return Qt[cn()]}function Ye(e){yp.push(e)}async function xp(e,t=null){await Sp(e),yp.forEach(r=>r.call(null,t))}async function kp(){mt(pt),pr(pt.tbodyEnvironments,pt.tableValidationEnvironments),Qt=await kw(),yo=zt("settingsEditor","ace/mode/json",!0),pt.tbodyEnvironments.addEventListener("click",xw),pt.crudEnvironmentJson.addEventListener("onCreateClick",bp),pt.crudEnvironmentJson.addEventListener("onUpdateClick",fp),pt.crudEnvironmentJson.addEventListener("onDeleteClick",hp),pt.crudEnvironmentJson.addEventListener("onEditToggle",vp),pt.crudEnvironmentFields.addEventListener("onCreateClick",bp),pt.crudEnvironmentFields.addEventListener("onUpdateClick",fp),pt.crudEnvironmentFields.addEventListener("onDeleteClick",hp),pt.crudEnvironmentFields.addEventListener("onEditToggle",vp),pt.environmentSelector.onchange=yw,document.querySelector('a[data-bs-target="#tabEnvJson"]').addEventListener("shown.bs.tab",()=>{yo.renderer.updateFull()}),await ne(!0)}async function yw(){let e=new URLSearchParams(window.location.search);e.set(_i,cn()),window.history.replaceState(null,null,`${window.location.pathname}?${e}`),await xp(!1)}async function hp(){at(oe,"No environment selected",pt.tableValidationEnvironments),at(Object.keys(Qt).length>=2,"At least one environment is required",pt.tableValidationEnvironments),delete Qt[oe],oe=null,await ne(!1)}async function bp(e){at(e.target.idValue,"Environment name must not be empty",e.target.validationElement),at(!Qt[e.target.idValue],"Environment name already used",e.target.validationElement),e.target===pt.crudEnvironmentFields?Qt[e.target.idValue]=new Ks({api_uri:pt.inputApiUri.value??"",searchNamespaces:pt.inputSearchNamespaces.value??"",ditto_version:pt.selectDittoVersion.value?pt.selectDittoVersion.value:"3"}):Qt[e.target.idValue]=new Ks(JSON.parse(yo.getValue())),oe=e.target.idValue,e.target.toggleEdit(),await ne(!1)}function xw(e){e.target&&e.target.tagName==="TD"&&(oe&&oe===e.target.parentNode.id?oe=null:oe=e.target.parentNode.id,Ys())}async function fp(e){oe!==e.target.idValue&&t(),e.target===pt.crudEnvironmentFields?(Qt[oe].api_uri=pt.inputApiUri.value,Qt[oe].ditto_version=pt.selectDittoVersion.value,Qt[oe].searchNamespaces=pt.inputSearchNamespaces.value,Qt[oe].disablePolicies=!pt.inputTabPolicies.checked,Qt[oe].disableConnections=!pt.inputTabConnections.checked,Qt[oe].disableOperations=!pt.inputTabOperations.checked):Qt[oe]=JSON.parse(yo.getValue()),e.target.toggleEdit(),await ne(!1);function t(){Qt[e.target.idValue]=Qt[oe],delete Qt[oe],oe=e.target.idValue}}function Yo(){Qt&&localStorage.setItem(wp,JSON.stringify(Qt))}async function ne(e,t=null){r(),Yo(),Ys(),n(),await xp(e,t);function r(){let p=pt.environmentSelector.value,g=new URLSearchParams(window.location.search);p||(p=g.get(_i));let s=g.get(fw);if(!p&&s!==null){let u=s.split(";");if(u.length>1){let o=atob(u[1]),i=new URLSearchParams(o),a=i.get(_i),l=i.get(ca);p=a,l&&(Qt[p].authSettings.main.oidc.provider=l)}}(!p||!Qt[p])&&(p=Object.keys(Qt)[0]),Ge(pt.environmentSelector,Object.keys(Qt)),pt.environmentSelector.value=p}function n(){pt.tbodyEnvironments.textContent="",Object.keys(Qt).forEach(p=>{Wt(pt.tbodyEnvironments,p,p===oe)})}}function Ys(){if(oe){let e=Qt[oe];pt.crudEnvironmentFields.idValue=oe,pt.crudEnvironmentJson.idValue=oe,yo.setValue(St(e),-1),pt.inputApiUri.value=e.api_uri,pt.inputSearchNamespaces.value=e.searchNamespaces??"",pt.selectDittoVersion.value=e.ditto_version?e.ditto_version:"3",pt.inputTabPolicies.checked=!e.disablePolicies,pt.inputTabConnections.checked=!e.disableConnections,pt.inputTabOperations.checked=!e.disableOperations}else pt.crudEnvironmentFields.idValue=null,pt.crudEnvironmentJson.idValue=null,yo.setValue(""),pt.inputApiUri.value=null,pt.inputSearchNamespaces.value=null,pt.selectDittoVersion.value=3,pt.inputTabPolicies.checked=!0,pt.inputTabConnections.checked=!0,pt.inputTabOperations.checked=!0}async function kw(){let e,t,n=new URLSearchParams(window.location.search).get(vw);if(n)try{let o=await fetch(n);if(!o.ok)throw new Error(`URL ${n} can not be loaded`);e=await o.json(),s(e)}catch(o){e=null,le(o.message,"Error loading environments from URL")}let p=localStorage.getItem(wp);p&&(t=JSON.parse(p));let g;return e?t?g=u(e,t):g=e:t?g=t:g=gp,Object.keys(g).forEach(o=>{g[o]=new Ks(g[o])}),g;function s(o){Object.keys(o).forEach(i=>{if(!o[i].hasOwnProperty("api_uri"))throw new SyntaxError("Environments json invalid")})}function u(o,i){let a={};return Object.keys(o).forEach(l=>{a[l]={...i[l],...o[l]}}),{...i,...a}}}function vp(e){pt.inputApiUri.disabled=!e.detail.isEditing,pt.inputSearchNamespaces.disabled=!e.detail.isEditing,pt.selectDittoVersion.disabled=!e.detail.isEditing,pt.inputTabPolicies.disabled=!e.detail.isEditing,pt.inputTabConnections.disabled=!e.detail.isEditing,pt.inputTabOperations.disabled=!e.detail.isEditing,yo.setReadOnly(!e.detail.isEditing),yo.renderer.setShowGutter(e.detail.isEditing),e.detail.isEditing||Ys()}var qs=class{add(t,r,n){if(typeof arguments[0]!="string")for(let p in arguments[0])this.add(p,arguments[0][p],arguments[1]);else(Array.isArray(t)?t:[t]).forEach(function(p){this[p]=this[p]||[],r&&this[p][n?"unshift":"push"](r)},this)}run(t,r){this[t]=this[t]||[],this[t].forEach(function(n){n.call(r&&r.context?r.context:r,r)})}},Qs=class{constructor(t){this.jsep=t,this.registered={}}register(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];r.forEach(p=>{if(typeof p!="object"||!p.name||!p.init)throw new Error("Invalid JSEP plugin format");this.registered[p.name]||(p.init(this.jsep),this.registered[p.name]=p)})}},Xe=class e{static get version(){return"1.4.0"}static toString(){return"JavaScript Expression Parser (JSEP) v"+e.version}static addUnaryOp(t){return e.max_unop_len=Math.max(t.length,e.max_unop_len),e.unary_ops[t]=1,e}static addBinaryOp(t,r,n){return e.max_binop_len=Math.max(t.length,e.max_binop_len),e.binary_ops[t]=r,n?e.right_associative.add(t):e.right_associative.delete(t),e}static addIdentifierChar(t){return e.additional_identifier_chars.add(t),e}static addLiteral(t,r){return e.literals[t]=r,e}static removeUnaryOp(t){return delete e.unary_ops[t],t.length===e.max_unop_len&&(e.max_unop_len=e.getMaxKeyLen(e.unary_ops)),e}static removeAllUnaryOps(){return e.unary_ops={},e.max_unop_len=0,e}static removeIdentifierChar(t){return e.additional_identifier_chars.delete(t),e}static removeBinaryOp(t){return delete e.binary_ops[t],t.length===e.max_binop_len&&(e.max_binop_len=e.getMaxKeyLen(e.binary_ops)),e.right_associative.delete(t),e}static removeAllBinaryOps(){return e.binary_ops={},e.max_binop_len=0,e}static removeLiteral(t){return delete e.literals[t],e}static removeAllLiterals(){return e.literals={},e}get char(){return this.expr.charAt(this.index)}get code(){return this.expr.charCodeAt(this.index)}constructor(t){this.expr=t,this.index=0}static parse(t){return new e(t).parse()}static getMaxKeyLen(t){return Math.max(0,...Object.keys(t).map(r=>r.length))}static isDecimalDigit(t){return t>=48&&t<=57}static binaryPrecedence(t){return e.binary_ops[t]||0}static isIdentifierStart(t){return t>=65&&t<=90||t>=97&&t<=122||t>=128&&!e.binary_ops[String.fromCharCode(t)]||e.additional_identifier_chars.has(String.fromCharCode(t))}static isIdentifierPart(t){return e.isIdentifierStart(t)||e.isDecimalDigit(t)}throwError(t){let r=new Error(t+" at character "+this.index);throw r.index=this.index,r.description=t,r}runHook(t,r){if(e.hooks[t]){let n={context:this,node:r};return e.hooks.run(t,n),n.node}return r}searchHook(t){if(e.hooks[t]){let r={context:this};return e.hooks[t].find(function(n){return n.call(r.context,r),r.node}),r.node}}gobbleSpaces(){let t=this.code;for(;t===e.SPACE_CODE||t===e.TAB_CODE||t===e.LF_CODE||t===e.CR_CODE;)t=this.expr.charCodeAt(++this.index);this.runHook("gobble-spaces")}parse(){this.runHook("before-all");let t=this.gobbleExpressions(),r=t.length===1?t[0]:{type:e.COMPOUND,body:t};return this.runHook("after-all",r)}gobbleExpressions(t){let r=[],n,p;for(;this.index<this.expr.length;)if(n=this.code,n===e.SEMCOL_CODE||n===e.COMMA_CODE)this.index++;else if(p=this.gobbleExpression())r.push(p);else if(this.index<this.expr.length){if(n===t)break;this.throwError('Unexpected "'+this.char+'"')}return r}gobbleExpression(){let t=this.searchHook("gobble-expression")||this.gobbleBinaryExpression();return this.gobbleSpaces(),this.runHook("after-expression",t)}gobbleBinaryOp(){this.gobbleSpaces();let t=this.expr.substr(this.index,e.max_binop_len),r=t.length;for(;r>0;){if(e.binary_ops.hasOwnProperty(t)&&(!e.isIdentifierStart(this.code)||this.index+t.length<this.expr.length&&!e.isIdentifierPart(this.expr.charCodeAt(this.index+t.length))))return this.index+=r,t;t=t.substr(0,--r)}return!1}gobbleBinaryExpression(){let t,r,n,p,g,s,u,o,i;if(s=this.gobbleToken(),!s||(r=this.gobbleBinaryOp(),!r))return s;for(g={value:r,prec:e.binaryPrecedence(r),right_a:e.right_associative.has(r)},u=this.gobbleToken(),u||this.throwError("Expected expression after "+r),p=[s,g,u];r=this.gobbleBinaryOp();){if(n=e.binaryPrecedence(r),n===0){this.index-=r.length;break}g={value:r,prec:n,right_a:e.right_associative.has(r)},i=r;let a=l=>g.right_a&&l.right_a?n>l.prec:n<=l.prec;for(;p.length>2&&a(p[p.length-2]);)u=p.pop(),r=p.pop().value,s=p.pop(),t={type:e.BINARY_EXP,operator:r,left:s,right:u},p.push(t);t=this.gobbleToken(),t||this.throwError("Expected expression after "+i),p.push(g,t)}for(o=p.length-1,t=p[o];o>1;)t={type:e.BINARY_EXP,operator:p[o-1].value,left:p[o-2],right:t},o-=2;return t}gobbleToken(){let t,r,n,p;if(this.gobbleSpaces(),p=this.searchHook("gobble-token"),p)return this.runHook("after-token",p);if(t=this.code,e.isDecimalDigit(t)||t===e.PERIOD_CODE)return this.gobbleNumericLiteral();if(t===e.SQUOTE_CODE||t===e.DQUOTE_CODE)p=this.gobbleStringLiteral();else if(t===e.OBRACK_CODE)p=this.gobbleArray();else{for(r=this.expr.substr(this.index,e.max_unop_len),n=r.length;n>0;){if(e.unary_ops.hasOwnProperty(r)&&(!e.isIdentifierStart(this.code)||this.index+r.length<this.expr.length&&!e.isIdentifierPart(this.expr.charCodeAt(this.index+r.length)))){this.index+=n;let g=this.gobbleToken();return g||this.throwError("missing unaryOp argument"),this.runHook("after-token",{type:e.UNARY_EXP,operator:r,argument:g,prefix:!0})}r=r.substr(0,--n)}e.isIdentifierStart(t)?(p=this.gobbleIdentifier(),e.literals.hasOwnProperty(p.name)?p={type:e.LITERAL,value:e.literals[p.name],raw:p.name}:p.name===e.this_str&&(p={type:e.THIS_EXP})):t===e.OPAREN_CODE&&(p=this.gobbleGroup())}return p?(p=this.gobbleTokenProperty(p),this.runHook("after-token",p)):this.runHook("after-token",!1)}gobbleTokenProperty(t){this.gobbleSpaces();let r=this.code;for(;r===e.PERIOD_CODE||r===e.OBRACK_CODE||r===e.OPAREN_CODE||r===e.QUMARK_CODE;){let n;if(r===e.QUMARK_CODE){if(this.expr.charCodeAt(this.index+1)!==e.PERIOD_CODE)break;n=!0,this.index+=2,this.gobbleSpaces(),r=this.code}this.index++,r===e.OBRACK_CODE?(t={type:e.MEMBER_EXP,computed:!0,object:t,property:this.gobbleExpression()},t.property||this.throwError('Unexpected "'+this.char+'"'),this.gobbleSpaces(),r=this.code,r!==e.CBRACK_CODE&&this.throwError("Unclosed ["),this.index++):r===e.OPAREN_CODE?t={type:e.CALL_EXP,arguments:this.gobbleArguments(e.CPAREN_CODE),callee:t}:(r===e.PERIOD_CODE||n)&&(n&&this.index--,this.gobbleSpaces(),t={type:e.MEMBER_EXP,computed:!1,object:t,property:this.gobbleIdentifier()}),n&&(t.optional=!0),this.gobbleSpaces(),r=this.code}return t}gobbleNumericLiteral(){let t="",r,n;for(;e.isDecimalDigit(this.code);)t+=this.expr.charAt(this.index++);if(this.code===e.PERIOD_CODE)for(t+=this.expr.charAt(this.index++);e.isDecimalDigit(this.code);)t+=this.expr.charAt(this.index++);if(r=this.char,r==="e"||r==="E"){for(t+=this.expr.charAt(this.index++),r=this.char,(r==="+"||r==="-")&&(t+=this.expr.charAt(this.index++));e.isDecimalDigit(this.code);)t+=this.expr.charAt(this.index++);e.isDecimalDigit(this.expr.charCodeAt(this.index-1))||this.throwError("Expected exponent ("+t+this.char+")")}return n=this.code,e.isIdentifierStart(n)?this.throwError("Variable names cannot start with a number ("+t+this.char+")"):(n===e.PERIOD_CODE||t.length===1&&t.charCodeAt(0)===e.PERIOD_CODE)&&this.throwError("Unexpected period"),{type:e.LITERAL,value:parseFloat(t),raw:t}}gobbleStringLiteral(){let t="",r=this.index,n=this.expr.charAt(this.index++),p=!1;for(;this.index<this.expr.length;){let g=this.expr.charAt(this.index++);if(g===n){p=!0;break}else if(g==="\\")switch(g=this.expr.charAt(this.index++),g){case"n":t+=`
`;break;case"r":t+="\r";break;case"t":t+="	";break;case"b":t+="\b";break;case"f":t+="\f";break;case"v":t+="\v";break;default:t+=g}else t+=g}return p||this.throwError('Unclosed quote after "'+t+'"'),{type:e.LITERAL,value:t,raw:this.expr.substring(r,this.index)}}gobbleIdentifier(){let t=this.code,r=this.index;for(e.isIdentifierStart(t)?this.index++:this.throwError("Unexpected "+this.char);this.index<this.expr.length&&(t=this.code,e.isIdentifierPart(t));)this.index++;return{type:e.IDENTIFIER,name:this.expr.slice(r,this.index)}}gobbleArguments(t){let r=[],n=!1,p=0;for(;this.index<this.expr.length;){this.gobbleSpaces();let g=this.code;if(g===t){n=!0,this.index++,t===e.CPAREN_CODE&&p&&p>=r.length&&this.throwError("Unexpected token "+String.fromCharCode(t));break}else if(g===e.COMMA_CODE){if(this.index++,p++,p!==r.length){if(t===e.CPAREN_CODE)this.throwError("Unexpected token ,");else if(t===e.CBRACK_CODE)for(let s=r.length;s<p;s++)r.push(null)}}else if(r.length!==p&&p!==0)this.throwError("Expected comma");else{let s=this.gobbleExpression();(!s||s.type===e.COMPOUND)&&this.throwError("Expected comma"),r.push(s)}}return n||this.throwError("Expected "+String.fromCharCode(t)),r}gobbleGroup(){this.index++;let t=this.gobbleExpressions(e.CPAREN_CODE);if(this.code===e.CPAREN_CODE)return this.index++,t.length===1?t[0]:t.length?{type:e.SEQUENCE_EXP,expressions:t}:!1;this.throwError("Unclosed (")}gobbleArray(){return this.index++,{type:e.ARRAY_EXP,elements:this.gobbleArguments(e.CBRACK_CODE)}}},Ew=new qs;Object.assign(Xe,{hooks:Ew,plugins:new Qs(Xe),COMPOUND:"Compound",SEQUENCE_EXP:"SequenceExpression",IDENTIFIER:"Identifier",MEMBER_EXP:"MemberExpression",LITERAL:"Literal",THIS_EXP:"ThisExpression",CALL_EXP:"CallExpression",UNARY_EXP:"UnaryExpression",BINARY_EXP:"BinaryExpression",ARRAY_EXP:"ArrayExpression",TAB_CODE:9,LF_CODE:10,CR_CODE:13,SPACE_CODE:32,PERIOD_CODE:46,COMMA_CODE:44,SQUOTE_CODE:39,DQUOTE_CODE:34,OPAREN_CODE:40,CPAREN_CODE:41,OBRACK_CODE:91,CBRACK_CODE:93,QUMARK_CODE:63,SEMCOL_CODE:59,COLON_CODE:58,unary_ops:{"-":1,"!":1,"~":1,"+":1},binary_ops:{"||":1,"??":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10,"**":11},right_associative:new Set(["**"]),additional_identifier_chars:new Set(["$","_"]),literals:{true:!0,false:!1,null:null},this_str:"this"});Xe.max_unop_len=Xe.getMaxKeyLen(Xe.unary_ops);Xe.max_binop_len=Xe.getMaxKeyLen(Xe.binary_ops);var qr=e=>new Xe(e).parse(),_w=Object.getOwnPropertyNames(class{});Object.getOwnPropertyNames(Xe).filter(e=>!_w.includes(e)&&qr[e]===void 0).forEach(e=>{qr[e]=Xe[e]});qr.Jsep=Xe;var Sw="ConditionalExpression",Cw={name:"ternary",init(e){e.hooks.add("after-expression",function(r){if(r.node&&this.code===e.QUMARK_CODE){this.index++;let n=r.node,p=this.gobbleExpression();if(p||this.throwError("Expected expression"),this.gobbleSpaces(),this.code===e.COLON_CODE){this.index++;let g=this.gobbleExpression();if(g||this.throwError("Expected expression"),r.node={type:Sw,test:n,consequent:p,alternate:g},n.operator&&e.binary_ops[n.operator]<=.9){let s=n;for(;s.right.operator&&e.binary_ops[s.right.operator]<=.9;)s=s.right;r.node.test=s.right,s.right=r.node,r.node=n}}else this.throwError("Expected :")}})}};qr.plugins.register(Cw);var Cp=47,Tw=92,Aw={name:"regex",init(e){e.hooks.add("gobble-token",function(r){if(this.code===Cp){let n=++this.index,p=!1;for(;this.index<this.expr.length;){if(this.code===Cp&&!p){let g=this.expr.slice(n,this.index),s="";for(;++this.index<this.expr.length;){let o=this.code;if(o>=97&&o<=122||o>=65&&o<=90||o>=48&&o<=57)s+=this.char;else break}let u;try{u=new RegExp(g,s)}catch(o){this.throwError(o.message)}return r.node={type:e.LITERAL,value:u,raw:this.expr.slice(n-1,this.index)},r.node=this.gobbleTokenProperty(r.node),r.node}this.code===e.OBRACK_CODE?p=!0:p&&this.code===e.CBRACK_CODE&&(p=!1),this.index+=this.code===Tw?2:1}this.throwError("Unclosed Regex")}})}},Js=43,Lw=45,Si={name:"assignment",assignmentOperators:new Set(["=","*=","**=","/=","%=","+=","-=","<<=",">>=",">>>=","&=","^=","|=","||=","&&=","??="]),updateOperators:[Js,Lw],assignmentPrecedence:.9,init(e){let t=[e.IDENTIFIER,e.MEMBER_EXP];Si.assignmentOperators.forEach(n=>e.addBinaryOp(n,Si.assignmentPrecedence,!0)),e.hooks.add("gobble-token",function(p){let g=this.code;Si.updateOperators.some(s=>s===g&&s===this.expr.charCodeAt(this.index+1))&&(this.index+=2,p.node={type:"UpdateExpression",operator:g===Js?"++":"--",argument:this.gobbleTokenProperty(this.gobbleIdentifier()),prefix:!0},(!p.node.argument||!t.includes(p.node.argument.type))&&this.throwError(`Unexpected ${p.node.operator}`))}),e.hooks.add("after-token",function(p){if(p.node){let g=this.code;Si.updateOperators.some(s=>s===g&&s===this.expr.charCodeAt(this.index+1))&&(t.includes(p.node.type)||this.throwError(`Unexpected ${p.node.operator}`),this.index+=2,p.node={type:"UpdateExpression",operator:g===Js?"++":"--",argument:p.node,prefix:!1})}}),e.hooks.add("after-expression",function(p){p.node&&r(p.node)});function r(n){Si.assignmentOperators.has(n.operator)?(n.type="AssignmentExpression",r(n.left),r(n.right)):n.operator||Object.values(n).forEach(p=>{p&&typeof p=="object"&&r(p)})}}};qr.plugins.register(Aw,Si);qr.addUnaryOp("typeof");qr.addLiteral("null",null);qr.addLiteral("undefined",void 0);var $w=new Set(["constructor","__proto__","__defineGetter__","__defineSetter__"]),Yt={evalAst(e,t){switch(e.type){case"BinaryExpression":case"LogicalExpression":return Yt.evalBinaryExpression(e,t);case"Compound":return Yt.evalCompound(e,t);case"ConditionalExpression":return Yt.evalConditionalExpression(e,t);case"Identifier":return Yt.evalIdentifier(e,t);case"Literal":return Yt.evalLiteral(e,t);case"MemberExpression":return Yt.evalMemberExpression(e,t);case"UnaryExpression":return Yt.evalUnaryExpression(e,t);case"ArrayExpression":return Yt.evalArrayExpression(e,t);case"CallExpression":return Yt.evalCallExpression(e,t);case"AssignmentExpression":return Yt.evalAssignmentExpression(e,t);default:throw SyntaxError("Unexpected expression",e)}},evalBinaryExpression(e,t){return{"||":(n,p)=>n||p(),"&&":(n,p)=>n&&p(),"|":(n,p)=>n|p(),"^":(n,p)=>n^p(),"&":(n,p)=>n&p(),"==":(n,p)=>n==p(),"!=":(n,p)=>n!=p(),"===":(n,p)=>n===p(),"!==":(n,p)=>n!==p(),"<":(n,p)=>n<p(),">":(n,p)=>n>p(),"<=":(n,p)=>n<=p(),">=":(n,p)=>n>=p(),"<<":(n,p)=>n<<p(),">>":(n,p)=>n>>p(),">>>":(n,p)=>n>>>p(),"+":(n,p)=>n+p(),"-":(n,p)=>n-p(),"*":(n,p)=>n*p(),"/":(n,p)=>n/p(),"%":(n,p)=>n%p()}[e.operator](Yt.evalAst(e.left,t),()=>Yt.evalAst(e.right,t))},evalCompound(e,t){let r;for(let n=0;n<e.body.length;n++){e.body[n].type==="Identifier"&&["var","let","const"].includes(e.body[n].name)&&e.body[n+1]&&e.body[n+1].type==="AssignmentExpression"&&(n+=1);let p=e.body[n];r=Yt.evalAst(p,t)}return r},evalConditionalExpression(e,t){return Yt.evalAst(e.test,t)?Yt.evalAst(e.consequent,t):Yt.evalAst(e.alternate,t)},evalIdentifier(e,t){if(Object.hasOwn(t,e.name))return t[e.name];throw ReferenceError(`${e.name} is not defined`)},evalLiteral(e){return e.value},evalMemberExpression(e,t){let r=String(e.computed?Yt.evalAst(e.property):e.property.name),n=Yt.evalAst(e.object,t);if(n==null)throw TypeError(`Cannot read properties of ${n} (reading '${r}')`);if(!Object.hasOwn(n,r)&&$w.has(r))throw TypeError(`Cannot read properties of ${n} (reading '${r}')`);let p=n[r];return typeof p=="function"?p.bind(n):p},evalUnaryExpression(e,t){return{"-":n=>-Yt.evalAst(n,t),"!":n=>!Yt.evalAst(n,t),"~":n=>~Yt.evalAst(n,t),"+":n=>+Yt.evalAst(n,t),typeof:n=>typeof Yt.evalAst(n,t)}[e.operator](e.argument)},evalArrayExpression(e,t){return e.elements.map(r=>Yt.evalAst(r,t))},evalCallExpression(e,t){let r=e.arguments.map(p=>Yt.evalAst(p,t));return Yt.evalAst(e.callee,t)(...r)},evalAssignmentExpression(e,t){if(e.left.type!=="Identifier")throw SyntaxError("Invalid left-hand side in assignment");let r=e.left.name,n=Yt.evalAst(e.right,t);return t[r]=n,t[r]}},Zs=class{constructor(t){this.code=t,this.ast=qr(this.code)}runInNewContext(t){let r=Object.assign(Object.create(null),t);return Yt.evalAst(this.ast,r)}};function xo(e,t){return e=e.slice(),e.push(t),e}function tl(e,t){return t=t.slice(),t.unshift(e),t}var el=class extends Error{constructor(t){super('JSONPath should not be called with "new" (it prevents return of (unwrapped) scalar values)'),this.avoidNew=!0,this.value=t,this.name="NewError"}};function Mt(e,t,r,n,p){if(!(this instanceof Mt))try{return new Mt(e,t,r,n,p)}catch(s){if(!s.avoidNew)throw s;return s.value}typeof e=="string"&&(p=n,n=r,r=t,t=e,e=null);let g=e&&typeof e=="object";if(e=e||{},this.json=e.json||r,this.path=e.path||t,this.resultType=e.resultType||"value",this.flatten=e.flatten||!1,this.wrap=Object.hasOwn(e,"wrap")?e.wrap:!0,this.sandbox=e.sandbox||{},this.eval=e.eval===void 0?"safe":e.eval,this.ignoreEvalErrors=typeof e.ignoreEvalErrors>"u"?!1:e.ignoreEvalErrors,this.parent=e.parent||null,this.parentProperty=e.parentProperty||null,this.callback=e.callback||n||null,this.otherTypeCallback=e.otherTypeCallback||p||function(){throw new TypeError("You must supply an otherTypeCallback callback option with the @other() operator.")},e.autostart!==!1){let s={path:g?e.path:t};g?"json"in e&&(s.json=e.json):s.json=r;let u=this.evaluate(s);if(!u||typeof u!="object")throw new el(u);return u}}Mt.prototype.evaluate=function(e,t,r,n){let p=this.parent,g=this.parentProperty,{flatten:s,wrap:u}=this;if(this.currResultType=this.resultType,this.currEval=this.eval,this.currSandbox=this.sandbox,r=r||this.callback,this.currOtherTypeCallback=n||this.otherTypeCallback,t=t||this.json,e=e||this.path,e&&typeof e=="object"&&!Array.isArray(e)){if(!e.path&&e.path!=="")throw new TypeError('You must supply a "path" property when providing an object argument to JSONPath.evaluate().');if(!Object.hasOwn(e,"json"))throw new TypeError('You must supply a "json" property when providing an object argument to JSONPath.evaluate().');({json:t}=e),s=Object.hasOwn(e,"flatten")?e.flatten:s,this.currResultType=Object.hasOwn(e,"resultType")?e.resultType:this.currResultType,this.currSandbox=Object.hasOwn(e,"sandbox")?e.sandbox:this.currSandbox,u=Object.hasOwn(e,"wrap")?e.wrap:u,this.currEval=Object.hasOwn(e,"eval")?e.eval:this.currEval,r=Object.hasOwn(e,"callback")?e.callback:r,this.currOtherTypeCallback=Object.hasOwn(e,"otherTypeCallback")?e.otherTypeCallback:this.currOtherTypeCallback,p=Object.hasOwn(e,"parent")?e.parent:p,g=Object.hasOwn(e,"parentProperty")?e.parentProperty:g,e=e.path}if(p=p||null,g=g||null,Array.isArray(e)&&(e=Mt.toPathString(e)),!e&&e!==""||!t)return;let o=Mt.toPathArray(e);o[0]==="$"&&o.length>1&&o.shift(),this._hasParentSelector=null;let i=this._trace(o,t,["$"],p,g,r).filter(function(a){return a&&!a.isParentSelector});return i.length?!u&&i.length===1&&!i[0].hasArrExpr?this._getPreferredOutput(i[0]):i.reduce((a,l)=>{let d=this._getPreferredOutput(l);return s&&Array.isArray(d)?a=a.concat(d):a.push(d),a},[]):u?[]:void 0};Mt.prototype._getPreferredOutput=function(e){let t=this.currResultType;switch(t){case"all":{let r=Array.isArray(e.path)?e.path:Mt.toPathArray(e.path);return e.pointer=Mt.toPointer(r),e.path=typeof e.path=="string"?e.path:Mt.toPathString(e.path),e}case"value":case"parent":case"parentProperty":return e[t];case"path":return Mt.toPathString(e[t]);case"pointer":return Mt.toPointer(e.path);default:throw new TypeError("Unknown result type")}};Mt.prototype._handleCallback=function(e,t,r){if(t){let n=this._getPreferredOutput(e);e.path=typeof e.path=="string"?e.path:Mt.toPathString(e.path),t(n,r,e)}};Mt.prototype._trace=function(e,t,r,n,p,g,s,u){let o;if(!e.length)return o={path:r,value:t,parent:n,parentProperty:p,hasArrExpr:s},this._handleCallback(o,g,"value"),o;let i=e[0],a=e.slice(1),l=[];function d(c){Array.isArray(c)?c.forEach(m=>{l.push(m)}):l.push(c)}if((typeof i!="string"||u)&&t&&Object.hasOwn(t,i))d(this._trace(a,t[i],xo(r,i),t,i,g,s));else if(i==="*")this._walk(t,c=>{d(this._trace(a,t[c],xo(r,c),t,c,g,!0,!0))});else if(i==="..")d(this._trace(a,t,r,n,p,g,s)),this._walk(t,c=>{typeof t[c]=="object"&&d(this._trace(e.slice(),t[c],xo(r,c),t,c,g,!0))});else{if(i==="^")return this._hasParentSelector=!0,{path:r.slice(0,-1),expr:a,isParentSelector:!0};if(i==="~")return o={path:xo(r,i),value:p,parent:n,parentProperty:null},this._handleCallback(o,g,"property"),o;if(i==="$")d(this._trace(a,t,r,null,null,g,s));else if(/^(-?\d*):(-?\d*):?(\d*)$/u.test(i))d(this._slice(i,a,t,r,n,p,g));else if(i.indexOf("?(")===0){if(this.currEval===!1)throw new Error("Eval [?(expr)] prevented in JSONPath expression.");let c=i.replace(/^\?\((.*?)\)$/u,"$1"),m=/@.?([^?]*)[['](\??\(.*?\))(?!.\)\])[\]']/gu.exec(c);m?this._walk(t,h=>{let v=[m[2]],k=m[1]?t[h][m[1]]:t[h];this._trace(v,k,r,n,p,g,!0).length>0&&d(this._trace(a,t[h],xo(r,h),t,h,g,!0))}):this._walk(t,h=>{this._eval(c,t[h],h,r,n,p)&&d(this._trace(a,t[h],xo(r,h),t,h,g,!0))})}else if(i[0]==="("){if(this.currEval===!1)throw new Error("Eval [(expr)] prevented in JSONPath expression.");d(this._trace(tl(this._eval(i,t,r.at(-1),r.slice(0,-1),n,p),a),t,r,n,p,g,s))}else if(i[0]==="@"){let c=!1,m=i.slice(1,-2);switch(m){case"scalar":(!t||!["object","function"].includes(typeof t))&&(c=!0);break;case"boolean":case"string":case"undefined":case"function":typeof t===m&&(c=!0);break;case"integer":Number.isFinite(t)&&!(t%1)&&(c=!0);break;case"number":Number.isFinite(t)&&(c=!0);break;case"nonFinite":typeof t=="number"&&!Number.isFinite(t)&&(c=!0);break;case"object":t&&typeof t===m&&(c=!0);break;case"array":Array.isArray(t)&&(c=!0);break;case"other":c=this.currOtherTypeCallback(t,r,n,p);break;case"null":t===null&&(c=!0);break;default:throw new TypeError("Unknown value type "+m)}if(c)return o={path:r,value:t,parent:n,parentProperty:p},this._handleCallback(o,g,"value"),o}else if(i[0]==="`"&&t&&Object.hasOwn(t,i.slice(1))){let c=i.slice(1);d(this._trace(a,t[c],xo(r,c),t,c,g,s,!0))}else if(i.includes(",")){let c=i.split(",");for(let m of c)d(this._trace(tl(m,a),t,r,n,p,g,!0))}else!u&&t&&Object.hasOwn(t,i)&&d(this._trace(a,t[i],xo(r,i),t,i,g,s,!0))}if(this._hasParentSelector)for(let c=0;c<l.length;c++){let m=l[c];if(m&&m.isParentSelector){let h=this._trace(m.expr,t,m.path,n,p,g,s);if(Array.isArray(h)){l[c]=h[0];let v=h.length;for(let k=1;k<v;k++)c++,l.splice(c,0,h[k])}else l[c]=h}}return l};Mt.prototype._walk=function(e,t){if(Array.isArray(e)){let r=e.length;for(let n=0;n<r;n++)t(n)}else e&&typeof e=="object"&&Object.keys(e).forEach(r=>{t(r)})};Mt.prototype._slice=function(e,t,r,n,p,g,s){if(!Array.isArray(r))return;let u=r.length,o=e.split(":"),i=o[2]&&Number.parseInt(o[2])||1,a=o[0]&&Number.parseInt(o[0])||0,l=o[1]&&Number.parseInt(o[1])||u;a=a<0?Math.max(0,a+u):Math.min(u,a),l=l<0?Math.max(0,l+u):Math.min(u,l);let d=[];for(let c=a;c<l;c+=i)this._trace(tl(c,t),r,n,p,g,s,!0).forEach(h=>{d.push(h)});return d};Mt.prototype._eval=function(e,t,r,n,p,g){this.currSandbox._$_parentProperty=g,this.currSandbox._$_parent=p,this.currSandbox._$_property=r,this.currSandbox._$_root=this.json,this.currSandbox._$_v=t;let s=e.includes("@path");s&&(this.currSandbox._$_path=Mt.toPathString(n.concat([r])));let u=this.currEval+"Script:"+e;if(!Mt.cache[u]){let o=e.replaceAll("@parentProperty","_$_parentProperty").replaceAll("@parent","_$_parent").replaceAll("@property","_$_property").replaceAll("@root","_$_root").replaceAll(/@([.\s)[])/gu,"_$_v$1");if(s&&(o=o.replaceAll("@path","_$_path")),this.currEval==="safe"||this.currEval===!0||this.currEval===void 0)Mt.cache[u]=new this.safeVm.Script(o);else if(this.currEval==="native")Mt.cache[u]=new this.vm.Script(o);else if(typeof this.currEval=="function"&&this.currEval.prototype&&Object.hasOwn(this.currEval.prototype,"runInNewContext")){let i=this.currEval;Mt.cache[u]=new i(o)}else if(typeof this.currEval=="function")Mt.cache[u]={runInNewContext:i=>this.currEval(o,i)};else throw new TypeError(`Unknown "eval" property "${this.currEval}"`)}try{return Mt.cache[u].runInNewContext(this.currSandbox)}catch(o){if(this.ignoreEvalErrors)return!1;throw new Error("jsonPath: "+o.message+": "+e)}};Mt.cache={};Mt.toPathString=function(e){let t=e,r=t.length,n="$";for(let p=1;p<r;p++)/^(~|\^|@.*?\(\))$/u.test(t[p])||(n+=/^[0-9*]+$/u.test(t[p])?"["+t[p]+"]":"['"+t[p]+"']");return n};Mt.toPointer=function(e){let t=e,r=t.length,n="";for(let p=1;p<r;p++)/^(~|\^|@.*?\(\))$/u.test(t[p])||(n+="/"+t[p].toString().replaceAll("~","~0").replaceAll("/","~1"));return n};Mt.toPathArray=function(e){let{cache:t}=Mt;if(t[e])return t[e].concat();let r=[],p=e.replaceAll(/@(?:null|boolean|number|string|integer|undefined|nonFinite|scalar|array|object|function|other)\(\)/gu,";$&;").replaceAll(/[['](\??\(.*?\))[\]'](?!.\])/gu,function(g,s){return"[#"+(r.push(s)-1)+"]"}).replaceAll(/\[['"]([^'\]]*)['"]\]/gu,function(g,s){return"['"+s.replaceAll(".","%@%").replaceAll("~","%%@@%%")+"']"}).replaceAll("~",";~;").replaceAll(/['"]?\.['"]?(?![^[]*\])|\[['"]?/gu,";").replaceAll("%@%",".").replaceAll("%%@@%%","~").replaceAll(/(?:;)?(\^+)(?:;)?/gu,function(g,s){return";"+s.split("").join(";")+";"}).replaceAll(/;;;|;;/gu,";..;").replaceAll(/;$|'?\]|'$/gu,"").split(";").map(function(g){let s=g.match(/#(\d+)/u);return!s||!s[1]?g:r[s[1]]});return t[e]=p,t[e].concat()};Mt.prototype.safeVm={Script:Zs};var Rw=function(e,t,r){let n=e.length;for(let p=0;p<n;p++){let g=e[p];r(g)&&t.push(e.splice(p--,1)[0])}},rl=class{constructor(t){this.code=t}runInNewContext(t){let r=this.code,n=Object.keys(t),p=[];Rw(n,p,i=>typeof t[i]=="function");let g=n.map(i=>t[i]);r=p.reduce((i,a)=>{let l=t[a].toString();return/function/u.test(l)||(l="function "+l),"var "+a+"="+l+";"+i},"")+r,!/(['"])use strict\1/u.test(r)&&!n.includes("arguments")&&(r="var arguments = undefined;"+r),r=r.replace(/;\s*$/u,"");let u=r.lastIndexOf(";"),o=u!==-1?r.slice(0,u+1)+" return "+r.slice(u+1):" return "+r;return new Function(...n,o)(...g)}};Mt.prototype.vm={Script:rl};var Tp=`<!--
  ~ Copyright (c) 2022 Contributors to the Eclipse Foundation
  ~
  ~ See the NOTICE file(s) distributed with this work for additional
  ~ information regarding copyright ownership.
  ~
  ~ This program and the accompanying materials are made available under the
  ~ terms of the Eclipse Public License 2.0 which is available at
  ~ http://www.eclipse.org/legal/epl-2.0
  ~
  ~ SPDX-License-Identifier: EPL-2.0
  -->
<!-- Scrollable modal -->
<div id="fieldsModal" class="modal fade" tabindex="-1">
    <div class="modal-dialog modal-dialog-scrollable modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                Adjust fields for things table
                <button type="button" class="btn-close btn-sm" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <div class="input-group input-group-sm mb-1 mt-1">
                    <div class="form-control-sm" style="flex-grow: 1;"></div>
                    <button class="btn btn-outline-secondary btn-sm" id="fieldUp">
                        <i class="bi bi-chevron-up"></i>
                    </button>
                    <button class="btn btn-outline-secondary btn-sm" id="fieldDown">
                        <i class="bi bi-chevron-down"></i>
                    </button>
                </div>

                <table class="table table-striped table-hover table-sm has-validation">
                    <tbody id="fieldList"></tbody>
                </table>
                <h6>Field Details</h6>
                <div class="input-group input-group-sm mb-1 mt-1 has-validation">
                    <label class="input-group-text">Field Path</label>
                    <input type="text" class="form-control" id="fieldPath"></input>
                    <button class="btn btn-outline-secondary btn-sm" id="fieldCreate" data-bs-toggle="tooltip"
                        title="Add a new field with the given path">
                        <i class="bi bi-plus-circle"></i>
                    </button>
                    <button class="btn btn-outline-secondary btn-sm" id="fieldUpdate" data-bs-toggle="tooltip"
                        title="Save selected field details">
                        <i class="bi bi-save"></i>
                    </button>
                    <button class="btn btn-outline-secondary btn-sm" id="fieldDelete" data-bs-toggle="tooltip"
                        title="Delete selected field">
                        <i class="bi bi-trash3"></i>
                    </button>
                    <div class="invalid-feedback"></div>
                </div>
                <div class="input-group input-group-sm mb-1">
                    <label class="input-group-text">Field Label</label>
                    <input type="text" class="form-control form-control-sm" id="fieldLabel"></input>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline-secondary btn-sm" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>`;var Zt=-1,Xt={fieldPath:null,fieldLabel:null,fieldList:null,fieldsModal:null};document.getElementById("fieldsHTML").innerHTML=Tp;function il(){q().fieldList||(q().fieldList=[]);let e=q().fieldList.filter(t=>t.active).map(t=>t.path);return"fields=thingId"+(e.length>0?","+e:"")}var ol=null;function Ap(e){Xt.fieldPath.value=e,Xt.fieldLabel.value=null,ol||(ol=new Ir(Xt.fieldsModal)),ol.show()}async function Lp(){Ye(Ow),mt(Xt),Xt.fieldList.addEventListener("click",e=>{e.target&&e.target.tagName==="TD"&&Iw(e.target.parentNode.rowIndex)}),Xt.fieldsModal.addEventListener("hide.bs.modal",async()=>{await ne(!1)}),document.getElementById("fieldUpdate").onclick=()=>{at(Zt>=0,"No field selected");let e=q().fieldList[Zt],n=q().fieldList.filter((p,g)=>g!=Zt).map(p=>p.path).includes(e.path);at(!q().fieldList.filter((p,g)=>g!=Zt).map(p=>p.path).includes(Xt.fieldPath.value),"Changed field path already exists",Xt.fieldPath),e.path=Xt.fieldPath.value,e.label=Xt.fieldLabel.value,Xo()},document.getElementById("fieldCreate").onclick=()=>{at(Xt.fieldPath.value,"Field path must not be empty",Xt.fieldPath),at(!q().fieldList.map(e=>e.path).includes(Xt.fieldPath.value),"Field path already exists",Xt.fieldPath),q().fieldList.push({active:!0,path:Xt.fieldPath.value,label:Xt.fieldLabel.value?Xt.fieldLabel.value:Xt.fieldPath.value.split("/").slice(-1)[0]}),Xo()},document.getElementById("fieldDelete").onclick=()=>{at(Zt>=0,"No field selected"),q().fieldList.splice(Zt,1),Xo(),Zt=-1},document.getElementById("fieldUp").onclick=()=>{if(Zt<=0)return;let e=q().fieldList[Zt];q().fieldList.splice(Zt,1),Zt--,q().fieldList.splice(Zt,0,e),Xo()},document.getElementById("fieldDown").onclick=()=>{if(Zt<0||Zt===q().fieldList.length-1)return;let e=q().fieldList[Zt];q().fieldList.splice(Zt,1),Zt++,q().fieldList.splice(Zt,0,e),Xo()}}function Iw(e){if(Zt===e)Zt=-1,Xt.fieldPath.value=null,Xt.fieldLabel.value=null;else{Zt=e;let t=q().fieldList[Zt];Xt.fieldPath.value=t.path,Xt.fieldLabel.value=t.label?t.label:null}}function Ow(){q().fieldList||(q().fieldList=[]),Xo()}function Xo(){Xt.fieldList.textContent="",Zt=-1,q().fieldList.forEach((e,t)=>{let r=Xt.fieldPath.value===e.path,n=Xt.fieldList.insertRow();ki(n,String(t),e.active,!1,Pw),n.insertCell(-1).textContent=e.path,n.insertCell(-1).textContent=e.label?e.label:null,r&&(Zt=t,n.classList.add("table-active"),Xt.fieldLabel.value=e.label)}),Zt<0&&(Xt.fieldPath.value=null,Xt.fieldLabel.value=null)}function Pw(e){q().fieldList[e.target.id].active=e.target.checked,Xo()}function Nr(e,t,r,n=null){let p=e,g=t,s=r,u=n,o=!1;return p.addEventListener("click",i),Ye(a),{set viewDirty(l){o=l}};function i(){$p(p.dataset.auth==="devOps"),o&&(s.call(null,!1),o=!1)}function a(l){p.toggleAttribute("hidden",q()[u]??!1),["pinnedThings","filterList","messageTemplates","recentPolicyIds"].includes(l)||(g.classList.contains("show")?s.call(null,!0):o=!0)}}var Rp=`<!--
  ~ Copyright (c) 2022 Contributors to the Eclipse Foundation
  ~
  ~ See the NOTICE file(s) distributed with this work for additional
  ~ information regarding copyright ownership.
  ~
  ~ This program and the accompanying materials are made available under the
  ~ terms of the Eclipse Public License 2.0 which is available at
  ~ http://www.eclipse.org/legal/epl-2.0
  ~
  ~ SPDX-License-Identifier: EPL-2.0
  -->
<div>
    <div>
        <div class="row resizable_pane" style="height: 40vh;">
            <div class="col-md-7 resizable_flex_column">
                <form class="input-group input-group-sm mb-1 mt-1" autocomplete="off">
                    <div class="btn-group dropend">
                        <button id="searchFavorite" class="btn btn-outline-secondary btn-sm" data-bs-toggle="tooltip"
                            title="Toggle favorite for search filter">
                            <i id="favIcon" class="bi bi-star"></i>
                        </button>
                    </div>
                    <input autocomplete="false" name="hidden" type="text" style="display:none;">
                    <input type="search" class="form-control form-control-sm" id="searchFilterEdit" name="search"
                           spellcheck=false autocomplete="off" />
                    <span class="input-group-text" id="searchFilterCount" data-bs-toggle="tooltip"
                          title="Amount of things matching the filter">
                    </span>
                    <button type="button" id="searchThings" class="btn btn-outline-primary btn-sm" data-bs-toggle="tooltip"
                        title="Search things by thingId or valid ditto search filter">
                        search
                    </button>
                    <button type="button" id="pinnedThings" class="btn btn-outline-secondary btn-sm me-3 button_round_right"
                        data-bs-toggle="tooltip" title="Pinned things: get the list of all individually pinned things">
                        pinned
                    </button>
                    <button type="button" id="tableSettings" class="btn btn-outline-secondary btn-sm button_round_both"
                        data-bs-toggle="modal" data-bs-target="#fieldsModal">
                        <span data-bs-toggle="tooltip" title="Adjust fields for things table">
                            <i class="bi bi-gear"></i>
                        </span>
                    </button>
                </form>
                <div class="table-wrap">
                    <table class="table table-striped table-hover table-sm">
                        <thead>
                            <tr id="thingsTableHead"></tr>
                        </thead>
                        <tbody id="thingsTableBody"></tbody>
                    </table>
                </div>
            </div>
            <div class="col-md-5 resizable_flex_column" style="height: auto" id="details">
                <ul id="tabItemsThing" class="nav nav-tabs nav-fill">
                    <li class="nav-item">
                        <a class="nav-link active" data-bs-toggle="tab" data-bs-target="#tabThingDetails">Details</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" data-bs-toggle="tab" data-bs-target="#tabModifyThing">Manage</a>
                        </li>
                    </ul>
                    <div id="tabContentThing" class="tab-content" style="flex-grow:1; overflow:hidden;">
                        <div class="tab-pane fade show active container no-margin" id="tabThingDetails">
                            <div class="table-wrap">
                                <table class="table table-striped table-hover table-sm">
                                    <tbody id="tbodyThingDetails"></tbody>
                                </table>
                            </div>
                    </div>
                    <div class="tab-pane fade container no-margin" id="tabModifyThing">
                        <crud-toolbar id="crudThings" label="Thing ID">
                            <div class="input-group input-group-sm mb-1">
                                <label class="input-group-text" id="labelX">Definition</label>
                                <div class="btn-group dropend">
                                    <button class="btn btn-outline-secondary btn-sm dropdown-toggle"
                                    data-bs-toggle="dropdown" disabled id="buttonThingDefinitions"></button>
                                    <ul id="ulThingDefinitions" class="dropdown-menu" style="position: fixed; top: auto;"></ul>                                    
                                </div>
                                <input type="text" class="form-control" id="inputThingDefinition" disabled></input>
                            </div>
                            <div class="ace_container mb-1" style="flex-grow: 1;">
                                <div class="script_editor" id="thingJsonEditor"></div>
                            </div>
                        </crud-toolbar>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<h5 data-bs-toggle="collapse" data-bs-target="#collapseAttributes">Attributes <span class="badge rounded-pill bg-info"
        id="badgeAttributeCount"></span></h5>
<hr />
<div class="collapse" id="collapseAttributes">
    <div class="row resizable_pane" style="height: 20vh;">
        <div class="col-md-7 resizable_flex_column" style="overflow-y:scroll;">
            <table class="table table-striped table-hover table-sm">
                <tbody id="tbodyAttributes"></tbody>
            </table>
        </div>
        <div class="col-md-5 resizable_flex_column" style="height: auto">
            <ul class="nav nav-tabs nav-fill" id="tabItemsAttribute">
                <li class="nav-item">
                    <a class="nav-link active" data-bs-toggle="tab" data-bs-target="#tabCrudAttribute">Manage</a>
                </li>
            </ul>
            <div class="tab-content" style="flex-grow: 1;" id="tabContentAttribute">
                <div class="tab-pane container active no-margin" id="tabCrudAttribute">
                    <crud-toolbar id="crudAttribute" label="Attribute key">
                        <div class="ace_container mb-1" style="flex-grow: 1;">
                            <div class="script_editor" id="attributeEditor"></div>
                        </div>
                    </crud-toolbar>
                </div>
            </div>
        </div>
    </div>
</div>
`;var kt,Mp=[],al={collapseThings:null,tabThings:null};document.getElementById("thingsHTML").innerHTML=Rp;function Ee(e){Mp.push(e)}async function Ip(){mt(al),Nr(al.tabThings,al.collapseThings,Nw)}function yr(e,t=null){console.assert(e&&e!=="","thingId expected"),yt("GET",`/things/${e}?fields=thingId%2CpolicyId%2Cdefinition%2Cattributes%2Cfeatures%2C_created%2C_modified%2C_revision%2C_metadata`).then(r=>{Fr(r),t&&t()}).catch(()=>Fr(null))}function Fr(e){let t=e&&(!kt||kt.thingId!==e.thingId);kt=e,Mp.forEach(r=>r.call(null,kt,t))}function Nw(){pa()}var Ci,ua;async function Op(){Ee(Bw),Dp(zw),Ye(Uw)}var Pp=[];function ga(e){Pp.push(e)}function Fw(e){Pp.forEach(t=>t.call(null,e))}function zw(e,t){ma(ua),e&&e.length>0&&(ua=dl(e,t),ua.onmessage=jw)}function Bw(e,t){e?t&&(Ci&&Ci.close(),Ci=dl(e.thingId,"fields=thingId,policyId,definition,attributes,features,_revision,_created,_modified,_metadata,_context/topic,_context/path,_context/value&extraFields=thingId,policyId,definition,attributes,features,_revision,_created,_modified,_metadata"),Ci.onmessage=Hw):ma(Ci)}function ma(e){e&&e.close()}function Uw(e){["pinnedThings","filterList","messageTemplates","recentPolicyIds"].includes(e)||(ma(Ci),ma(ua))}function Hw(e){if(e.data&&e.data!==""){let t=JSON.parse(e.data);Fr(t),Fw(JSON.parse(e.data))}}function jw(e){e.data&&e.data!==""&&ll(JSON.parse(e.data))}var ko=class{static{this.lastSearch=""}},ha,ue={searchFilterCount:null,thingsTableHead:null,thingsTableBody:null,searchFilterEdit:null,favIcon:null},Np=[];function Dp(e){Np.push(e)}function Ti(e=null,t=null){Np.forEach(r=>r.call(null,e,t))}async function Fp(){Ee(Kw),ga(ll),mt(ue),ue.thingsTableBody.addEventListener("click",Ww)}function Ww(e){if(e.target&&e.target.nodeName==="TD"){let t=e.target.parentNode;t.id==="searchThingsMore"?(t.style.pointerEvents="none",e.stopImmediatePropagation(),zp(ue.searchFilterEdit.value,!0)):kt&&kt.thingId===t.id?(e.stopImmediatePropagation(),Fr(null)):yr(t.id,null)}}function un(e,t){ko.lastSearch=e,e===""||/^(eq\(|ne\(|gt\(|ge\(|lt\(|le\(|in\(|like\(|ilike\(|exists\(|and\(|or\(|not\().*/.test(e)?(zp(e),t()):mn([e]);let n=new URLSearchParams(window.location.search);n.get("filter")!==e&&(n.set("filter",e),window.history.replaceState(null,null,`${window.location.pathname}?${n}`))}function cl(){ko.lastSearch="pinned",ue.searchFilterEdit.value=null,ue.favIcon.classList.replace("bi-star-fill","bi-star"),mn(q().pinnedThings)}function pa(){ko.lastSearch==="pinned"?cl():un(ko.lastSearch,()=>null)}function mn(e){ue.searchFilterCount.textContent="",ue.thingsTableBody.textContent="";let t=il();e.length>0?yt("GET",`/things?${t}&ids=${e}&option=sort(%2BthingId)`).then(r=>{Bp(r),ue.searchFilterCount.textContent="#: "+r.length,Ti(e,t)}).catch(r=>{ba(),Ti()}):(ba(),Ti())}function ba(e=!1){ha=null,ue.searchFilterCount.textContent="",ue.thingsTableHead.textContent="",ue.thingsTableBody.textContent="",e||Fr(null)}function Vw(e){ue.searchFilterCount.textContent="";let t=q().searchNamespaces;yt("GET","/search/things/count"+(e&&e!==""?"?filter="+encodeURIComponent(e):"")+(t&&t!==""?"&namespaces="+t:""),null,null).then(r=>{ue.searchFilterCount.textContent="#: "+r}).catch(r=>{Ti()})}function zp(e,t=!1){document.body.style.cursor="progress";let r=q().searchNamespaces,n=il();yt("GET","/search/things?"+n+(e&&e!==""?"&filter="+encodeURIComponent(e):"")+(r&&r!==""?"&namespaces="+r:"")+"&option=sort(%2BthingId)"+(t?",cursor("+ha+")":""),null,null).then(s=>{t?pl():(Vw(e),ba(!0)),Bp(s.items),p(s),t||Ti(s.items.map(u=>u.thingId),n)}).catch(s=>{ba(),Ti()}).finally(()=>{document.body.style.cursor="default"});function p(s){s.cursor?(g(),ha=s.cursor):ha=null}function g(){let s=ue.thingsTableBody.insertRow().insertCell(-1);s.textContent="load more...",s.colSpan=ue.thingsTableBody.rows[0].childElementCount,s.style.textAlign="center",s.style.cursor="pointer",s.disabled=!0,s.style.color="#3a8c9a",s.parentNode.id="searchThingsMore"}}function pl(){let e=document.getElementById("searchThingsMore");e&&e.parentNode.removeChild(e)}function Bp(e){let t=q().fieldList.filter(s=>s.active);n();let r=!1;e.forEach((s,u)=>{let o=ue.thingsTableBody.insertRow();p(o,s)}),r||Fr(null);function n(){ue.thingsTableHead.textContent="",da(ue.thingsTableHead,""),da(ue.thingsTableHead,"Thing ID"),t.forEach(s=>{da(ue.thingsTableHead,s.label?s.label:s.path)})}function p(s,u){s.id=u.thingId,kt&&u.thingId===kt.thingId&&(r=!0,s.classList.add("table-active")),ki(s,u.thingId,q().pinnedThings.includes(u.thingId),!1,Gw),vo(s,g(u.thingId),u.thingId),t.forEach(o=>{let i=o.path.replace(/\//g,".");i.charAt(0)!=="."&&(i="$."+i);let a=Mt({json:u,path:i});vo(s,a.length!==0?a[0]:"").setAttribute("jsonPath",i)})}function g(s){let u=/([0-9a-f]{7})[0-9a-f]-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}/g,o=s;return q().shortenUUID&&(o=o.replace(u,"$1")),q().defaultNamespace&&(o=o.replace(q().defaultNamespace,"dn")),o}}async function Gw(e){if(e.target.checked)q().pinnedThings.push(this.id);else{let t=q().pinnedThings.indexOf(this.id);t>-1&&q().pinnedThings.splice(t,1)}await ne(!1,"pinnedThings")}function Kw(e){e||pp(ue.thingsTableBody,()=>!1)}function ll(e){let t=document.getElementById(e.thingId);console.assert(t!==null,"Unexpected thingId for table update. thingId was not loaded before"),Array.from(t.cells).forEach(r=>{let n=r.getAttribute("jsonPath");if(n){let p=Mt({json:e,path:n});p.length!==0&&(r.innerHTML=Jr(p[0]))}})}var Yw=['eq(attributes/location,"kitchen")','ge(thingId,"myThing1")','gt(_created,"2020-08-05T12:17")',"exists(features/featureId)",'and(eq(attributes/location,"kitchen"),eq(attributes/color,"red"))','or(eq(attributes/location,"kitchen"),eq(attributes/location,"living-room"))','like(attributes/key1,"known-chars-at-start*")'],ul=[],Up,zr="...",Hp,me={favIcon:null,searchFilterEdit:null,searchThings:null,searchFavorite:null,tabThings:null,pinnedThings:null};async function Wp(){Ye(Xw),mt(me),me.pinnedThings.onclick=cl,Hp=cp("#searchFilterEdit",qw,"Search for Things..."),Hp.input.addEventListener("selection",e=>{let t=e.detail.selection.value;Jw(t.rql)}),me.searchThings.onclick=()=>{un(me.searchFilterEdit.value,()=>jp(me.searchFilterEdit.value))},me.searchFavorite.onclick=async e=>{e.preventDefault(),await Qw(me.searchFilterEdit.value)&&(me.favIcon.classList.toggle("bi-star"),me.favIcon.classList.toggle("bi-star-fill"))},me.searchFilterEdit.onkeyup=e=>{(e.key==="Enter"||e.code===13)&&me.searchFilterEdit.value.indexOf(zr)<0?un(me.searchFilterEdit.value,()=>jp(me.searchFilterEdit.value)):(clearTimeout(Up),Up=setTimeout(Vp,1e3))},me.searchFilterEdit.onchange=()=>{pl()},me.searchFilterEdit.focus()}function Xw(){q().filterList||(q().filterList=[]),q().pinnedThings||(q().pinnedThings=[])}function ml(e){me.searchFilterEdit.value=e}function Jw(e){ml(e),Vp(),up(me.searchFilterEdit,zr)||un(me.searchFilterEdit.value,()=>null)}async function qw(e){let t=new Date,r=new Date,n=new Date;return t.setDate(t.getDate()-1),r.setHours(r.getHours()-1),n.setMinutes(n.getMinutes()-1),[{label:"Created since 1m",rql:`gt(_created,"${n.toISOString()}")`,group:"Time"},{label:"Created since 1h",rql:`gt(_created,"${r.toISOString()}")`,group:"Time"},{label:"Created since 24h",rql:`gt(_created,"${t.toISOString()}")`,group:"Time"},{label:"Modified since 1m",rql:`gt(_modified,"${n.toISOString()}")`,group:"Time"},{label:"Modified since 1h",rql:`gt(_modified,"${r.toISOString()}")`,group:"Time"},{label:"Modified since 24h",rql:`gt(_modified,"${t.toISOString()}")`,group:"Time"},{label:`thingId = ${zr}`,rql:`eq(thingId,"${zr}")`,group:"ThingId"},{label:`thingId ~ ${zr}`,rql:`like(thingId,"${zr}*")`,group:"ThingId"},...(q().filterList??[]).map(p=>({label:p,rql:p,group:"Favorite"})),...(q().fieldList??[]).map(p=>({label:`${p.label} = ${zr}`,rql:`eq(${p.path},"${zr}")`,group:"Field"})),...(q().fieldList??[]).map(p=>({label:`${p.label} ~ ${zr}`,rql:`like(${p.path},"*${zr}*")`,group:"Field"})),...ul.map(p=>({label:p,rql:p,group:"Recent"})),...Yw.map(p=>({label:p,rql:p,group:"Example"}))]}async function Qw(e){if(!e||e==="")return!1;let t=q().filterList.indexOf(e);return t>=0?q().filterList.splice(t,1):q().filterList.push(e),await ne(!1,"filterList"),!0}function Vp(){q().filterList.indexOf(me.searchFilterEdit.value)>=0?me.favIcon.classList.replace("bi-star","bi-star-fill"):me.favIcon.classList.replace("bi-star-fill","bi-star")}function jp(e){ul.includes(e)||ul.unshift(e)}var Gp=`<!--
  ~ Copyright (c) 2022 Contributors to the Eclipse Foundation
  ~
  ~ See the NOTICE file(s) distributed with this work for additional
  ~ information regarding copyright ownership.
  ~
  ~ This program and the accompanying materials are made available under the
  ~ terms of the Eclipse Public License 2.0 which is available at
  ~ http://www.eclipse.org/legal/epl-2.0
  ~
  ~ SPDX-License-Identifier: EPL-2.0
  -->
<div id="authorizationModal" class="modal fade" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                Authorize
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <form class="modal-body">
                <div class="row">
                    <h5>Main authentication</h5>
                    <hr />
                    <div class="row" id="mainOidcSection">
                      <div class="col-md-5">
                        <input type="radio" id="main-oidc" name="main-auth-method" value="oidc">
                        <label for="main-oidc">Single-Sign-On</label>
                      </div>
                      <div class="col-md-7">
                        <div class="input-group">
                          <label for="oidcProvider" class="input-group-text"><small>SSO provider</small></label>
                          <select class="form-select form-select-sm me-2" id="oidcProvider"></select>
                          <input type="hidden" class="form-control form-control-sm" id="oidcBearer" name="oidcBearer" />
                          <button type="button" class="btn btn-outline-secondary btn-sm" id="main-oidc-login" data-bs-dismiss="modal">Login</button>
                          <button type="button" class="btn btn-outline-secondary btn-sm" id="main-oidc-logout" data-bs-dismiss="modal">Logout</button>
                        </div>
                      </div>
                    </div>
                    <div class="row pt-2" id="mainBasicSection">
                        <div class="col-md-5">
                            <input type="radio" id="main-userpass" name="main-auth-method" value="basic" />
                            <label for="main-userpass">Basic</label>
                        </div>
                        <div class="col-md-7">
                            <div class="input-group input-group-sm mb-1">
                                <label for="userName" class="input-group-text">Username</label>
                                <input type="text" class="form-control form-control-sm" id="userName" name="username" />
                            </div>
                            <div class="input-group input-group-sm mb-1">
                                <label for="password" class="input-group-text">Password</label>
                                <input type="password" class="form-control form-control-sm" id="password" name="password" />
                            </div>
                        </div>
                    </div>
                    <div class="row pt-2" id="mainBearerSection">
                        <div class="col-md-5">
                            <input type="radio" id="main-bearer" name="main-auth-method" value="bearer">
                            <label for="main-bearer">Bearer<br /><small>(JWT OAuth2.0 Bearer token)</small></label>
                        </div>
                        <div class="col-md-7">
                            <div class="input-group input-group-sm mb-1">
                                <label for="bearer" class="input-group-text">Bearer</label>
                                <input type="password" class="form-control form-control-sm" id="bearer" name="bearer" />
                            </div>
                        </div>
                    </div>
                    <div class="row pt-2" id="mainPreAuthenticatedSection">
                        <div class="col-md-5">
                            <input type="radio" id="main-pre" name="main-auth-method" value="pre" />
                            <label for="main-pre">Pre authenticated<br />
                                <small>(via HTTP header 'x-ditto-pre-authenticated', must take the form
                                    <code>prefix:suffix</code>)</small>
                            </label>
                        </div>
                        <div class="col-md-7">
                            <div class="input-group input-group-sm mb-1">
                                <label for="dittoPreAuthenticatedUsername" class="input-group-text">prefix:suffix</label>
                                <input type="text" class="form-control form-control-sm" id="dittoPreAuthenticatedUsername" name="pre-authenticated-username"  />
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row mt-3">
                    <h5>DevOps authentication</h5>
                    <small>(for Connections and administrative tasks, optional)</small>
                    <hr />
                    <div class="row" id="devOpsOidcSection">
                      <div class="col-md-5">
                        <input type="radio" id="devops-oidc" name="devops-auth-method" value="oidc" />
                        <label for="devops-oidc">Single-Sign-On</label>
                      </div>
                      <div class="col-md-7">
                        <div class="input-group">
                          <label for="devOpsOidcProvider" class="input-group-text"><small>SSO provider</small></label>
                          <select class="form-select form-select-sm me-2" id="devOpsOidcProvider"></select>
                          <input type="hidden" class="form-control form-control-sm" id="oidcBearerDevOps" name="oidcBearerDevOps" />
                          <button type="button" class="btn btn-outline-secondary btn-sm" id="devops-oidc-login" data-bs-dismiss="modal">Login</button>
                          <button type="button" class="btn btn-outline-secondary btn-sm" id="devops-oidc-logout" data-bs-dismiss="modal">Logout</button>
                        </div>
                      </div>
                    </div>
                    <div class="row pt-2" id="devOpsBasicSection">
                        <div class="col-md-5">
                            <input type="radio" id="devops-userpass" name="devops-auth-method" value="basic" />
                            <label for="devops-userpass">Basic<br /></label>
                        </div>
                        <div class="col-md-7">
                            <div class="input-group input-group-sm mb-1">
                                <label for="devOpsUserName" class="input-group-text">DevOps Username</label>
                                <input type="text" class="form-control form-control-sm" id="devOpsUserName" name="username" />
                            </div>
                            <div class="input-group input-group-sm mb-1">
                                <label for="devOpsPassword" class="input-group-text">DevOps Password</label>
                                <input type="password" class="form-control form-control-sm" id="devOpsPassword" name="password" />
                            </div>
                        </div>
                    </div>
                    <div class="row pt-2" id="devOpsBearerSection">
                        <div class="col-md-5">
                            <input type="radio" id="devops-bearer" name="devops-auth-method" value="bearer" />
                            <label for="devops-bearer">Bearer<br /><small>(JWT OAuth2.0 Bearer token)</small></label>
                        </div>
                        <div class="col-md-7">
                            <div class="input-group input-group-sm mb-1">
                                <label for="bearerDevOps" class="input-group-text">DevOps Bearer</label>
                                <input type="password" class="form-control form-control-sm" id="bearerDevOps" name="devops-bearer" />
                            </div>
                        </div>
                    </div>
                </div>
                <div class="input-group input-group-sm" style="flex-direction: row-reverse;">
                    <button class="btn btn-outline-secondary btn-sm" data-bs-dismiss="modal"
                        id="authorizeSubmit">Authorize</button>
                </div>
            </form>
        </div>
    </div>
</div>
`;var wt={mainBearerSection:null,oidcBearer:null,bearer:null,mainBasicSection:null,userName:null,password:null,devOpsBearerSection:null,oidcBearerDevOps:null,bearerDevOps:null,devOpsBasicSection:null,devOpsUserName:null,devOpsPassword:null,mainPreAuthenticatedSection:null,dittoPreAuthenticatedUsername:null,mainOidcSection:null,oidcProvider:null,devOpsOidcSection:null,devOpsOidcProvider:null,collapseConnections:null};function e0(e){Object.assign(this,e)}var gl=!1;document.getElementById("authorizationHTML").innerHTML=Gp;function $p(e){gl=e,hl(gl)}function Yp(){return wt.userName.value+":"+wt.password.value}function Xp(){return wt.bearer.value}function Jp(){return wt.oidcBearer.value}function qp(){return wt.devOpsUserName.value+":"+wt.devOpsPassword.value}function Qp(){return wt.bearerDevOps.value}function Zp(){return wt.oidcBearerDevOps.value}function Ep(e){e&&e.length>0&&(wt.userName.value=e.split(":")[0],wt.password.value=e.split(":")[1])}function _p(e){e&&e.length>0&&(wt.devOpsUserName.value=e.split(":")[0],wt.devOpsPassword.value=e.split(":")[1])}function fa(e){wt.oidcBearer.value=e}function tu(e){wt.oidcBearerDevOps.value=e}function eu(){mt(wt),document.getElementById("authorize").onclick=()=>{let e=q(),t=e.authSettings?.main?.method,r=e.authSettings?.devops?.method;t||(wt.dittoPreAuthenticatedUsername.value&&wt.dittoPreAuthenticatedUsername.value.length>0?t="pre":wt.bearer.value&&wt.bearer.value.length>0?t="bearer":wt.userName.value&&wt.userName.value.length>0&&(t="basic")),r||(wt.bearerDevOps.value&&wt.bearerDevOps.value.length>0?r="bearer":wt.devOpsUserName.value&&wt.devOpsUserName.value.length>0&&(r="basic")),Array.from(document.querySelectorAll('input[name="main-auth-method"]')).forEach(n=>{n.checked=Ko[n.value]===t}),Array.from(document.querySelectorAll('input[name="devops-auth-method"]')).forEach(n=>{n.checked=Ko[n.value]===r})},document.getElementById("authorizeSubmit").onclick=async e=>{e.preventDefault();let t=document.querySelector('input[name="main-auth-method"]:checked'),r=t?t.value:void 0,n=document.querySelector('input[name="devops-auth-method"]:checked'),p=n?n.value:void 0,g=q();g.authSettings.main.method=Ko[r],g.authSettings.devops.method=Ko[p],g.authSettings.main.pre.dittoPreAuthenticatedUsername=wt.dittoPreAuthenticatedUsername.value,g.authSettings.main.oidc.defaultProvider=wt.oidcProvider.value,g.authSettings.devops.oidc.defaultProvider=wt.devOpsOidcProvider.value,await ne(!1)},document.getElementById("main-oidc-login").onclick=async e=>{e.preventDefault();let t=q();t.authSettings.main.oidc.provider=wt.oidcProvider.value,Yo(),await va(!0)&&(t.authSettings.main.method="oidc",Gs("You are already logged in")),await ne(!1)},document.getElementById("main-oidc-logout").onclick=async e=>{e.preventDefault();let t=q();t.authSettings.main.oidc.provider=wt.oidcProvider.value,await Kp(t.authSettings.main.oidc)},document.getElementById("devops-oidc-login").onclick=async e=>{e.preventDefault();let t=q();t.authSettings.devops.oidc.provider=wt.devOpsOidcProvider.value,Yo(),await va(!1)&&(t.authSettings.devops.method="oidc",Gs("You are already logged in")),await ne(!1)},document.getElementById("devops-oidc-logout").onclick=async e=>{e.preventDefault();let t=q();t.authSettings.devops.oidc.provider=wt.devOpsOidcProvider.value,await Kp(t.authSettings.devops.oidc)}}function ru(e){e===void 0&&(e=new URLSearchParams(window.location.search));let t=e.get("code")!==null,r=e.get("state")!==null;return t&&r}async function ou(e){let t=q(),r=e.get(ca)||t.authSettings?.main?.oidc.provider,n=t.authSettings.oidc.providers[r],p=n;if(p!=null){let g=new oa(p);try{let s=await g.signinCallback(window.location.href);if(s){let u=s.state;u.mainAuth&&(t.authSettings.main.method="oidc",fa(s[n.extractBearerTokenFrom])),u.devopsAuth&&(t.authSettings.devops.method="oidc",tu(s[n.extractBearerTokenFrom])),window.history.replaceState(null,null,`${p.redirect_uri}?${atob(s.url_state)}`),await ne(!1)}}catch(s){console.error(`Could not login due to: ${s}`)}}}async function va(e){let t=q(),r;e?r=t.authSettings?.main?.oidc:r=t.authSettings?.devops?.oidc;let n=t.authSettings?.main?.oidc.provider==t.authSettings?.devops?.oidc.provider,p=t.authSettings.oidc.providers[r.provider],g=p;if(g!=null){let s=new URLSearchParams(window.location.search),u=new oa(g);if(ru(s))return await ou(s),!1;{let o=await u.getUser();if(o!==null&&o[p.extractBearerTokenFrom]!==void 0&&o.expired!==!0)return n?(fa(o[p.extractBearerTokenFrom]),tu(o[p.extractBearerTokenFrom])):fa(o[p.extractBearerTokenFrom]),!0;s.set(_i,cn()),s.set(ca,r.provider);try{await u.signinRedirect({state:new e0({mainAuth:e||n,devopsAuth:!e||n}),url_state:btoa(s.toString())})}catch(i){return le(i),!1}}}}async function Kp(e){let r=q().authSettings.oidc.providers[e.provider];if(r!=null){let n=new oa(r);try{let p=new URLSearchParams(window.location.search);p.set(_i,cn());let g;r.post_logout_redirect_uri?g=r.post_logout_redirect_uri:g=`${r.redirect_uri}?${p.toString()}`,await n.signoutRedirect({post_logout_redirect_uri:g})}catch(p){le(p)}finally{fa(void 0),Yo()}}}function Qr(e,t){!e&&t?t.style.display="none":e&&(t.style.display=null)}async function Sp(e){let t=q();if(wt.dittoPreAuthenticatedUsername.value=t.authSettings?.main?.pre?.dittoPreAuthenticatedUsername?t.authSettings?.main?.pre?.dittoPreAuthenticatedUsername:"",t.authSettings?.oidc?.providers){let s=Object.keys(t.authSettings.oidc.providers).map(u=>({key:u,text:t.authSettings.oidc.providers[u].displayName}));Vs(wt.oidcProvider,s),Vs(wt.devOpsOidcProvider,s),wt.oidcProvider.value=t.authSettings.main.oidc.provider,wt.devOpsOidcProvider.value=t.authSettings.devops.oidc.provider}Qr(t.authSettings.main.oidc.enabled,wt.mainOidcSection),Qr(t.authSettings.main.basic.enabled,wt.mainBasicSection),Qr(t.authSettings.main.bearer.enabled,wt.mainBearerSection),Qr(t.authSettings.main.pre.enabled,wt.mainPreAuthenticatedSection);let r=t.authSettings.main.oidc.enabled||t.authSettings.main.basic.enabled||t.authSettings.main.bearer.enabled||t.authSettings.main.pre.enabled;Qr(r,wt.mainBasicSection.parentElement),Qr(t.authSettings.devops.oidc.enabled,wt.devOpsOidcSection),Qr(t.authSettings.devops.basic.enabled,wt.devOpsBasicSection),Qr(t.authSettings.devops.bearer.enabled,wt.devOpsBearerSection);let n=t.authSettings.devops.oidc.enabled||t.authSettings.devops.basic.enabled||t.authSettings.devops.bearer.enabled;Qr(n,wt.devOpsBasicSection.parentElement);let p=new URLSearchParams(window.location.search);e&&t.authSettings?.main?.method==="oidc"&&t.authSettings?.main?.oidc?.autoSso===!0?(await va(!0),Yo()):e&&t.authSettings?.devops?.method==="oidc"&&t.authSettings?.devops?.oidc?.autoSso===!0?(await va(!1),Yo()):ru(p)&&await ou(p),hl(gl);let g=p.get("filter");g&&(ko.lastSearch=g,ml(g))}var r0={things:{listConnections:{path:"/api/2/solutions/{{solutionId}}/connections",method:"GET",body:null,unwrapJsonPath:null},retrieveConnection:{path:"/api/2/solutions/{{solutionId}}/connections/{{connectionId}}",method:"GET",body:null,unwrapJsonPath:null},createConnection:{path:"/api/2/solutions/{{solutionId}}/connections",method:"POST",body:null,unwrapJsonPath:null},modifyConnection:{path:"/api/2/solutions/{{solutionId}}/connections/{{connectionId}}",method:"PUT",body:null,unwrapJsonPath:null},deleteConnection:{path:"/api/2/solutions/{{solutionId}}/connections/{{connectionId}}",method:"DELETE",body:null,unwrapJsonPath:null},retrieveStatus:{path:"/api/2/solutions/{{solutionId}}/connections/{{connectionId}}/status",method:"GET",body:null,unwrapJsonPath:null},retrieveConnectionLogs:{path:"/api/2/solutions/{{solutionId}}/connections/{{connectionId}}/logs",method:"GET",body:null,unwrapJsonPath:null},retrieveConnectionMetrics:{path:"/api/2/solutions/{{solutionId}}/connections/{{connectionId}}/metrics",method:"GET",body:null,unwrapJsonPath:null},connectionCommand:{path:"/api/2/solutions/{{solutionId}}/connections/{{connectionId}}/command",method:"POST",body:null,unwrapJsonPath:null}},ditto_3:{listConnections:{path:"/api/2/connections",method:"GET",body:null,unwrapJsonPath:null},retrieveConnection:{path:"/api/2/connections/{{connectionId}}",method:"GET",body:null,unwrapJsonPath:null},createConnection:{path:"/api/2/connections",method:"POST",body:null,unwrapJsonPath:null},modifyConnection:{path:"/api/2/connections/{{connectionId}}",method:"PUT",body:null,unwrapJsonPath:null},deleteConnection:{path:"/api/2/connections/{{connectionId}}",method:"DELETE",body:null,unwrapJsonPath:null},retrieveStatus:{path:"/api/2/connections/{{connectionId}}/status",method:"GET",body:null,unwrapJsonPath:null},retrieveConnectionLogs:{path:"/api/2/connections/{{connectionId}}/logs",method:"GET",body:null,unwrapJsonPath:null},retrieveConnectionMetrics:{path:"/api/2/connections/{{connectionId}}/metrics",method:"GET",body:null,unwrapJsonPath:null},connectionCommand:{path:"/api/2/connections/{{connectionId}}/command",method:"POST",body:null,unwrapJsonPath:null}},ditto_2:{listConnections:{path:"/devops/piggyback/connectivity",method:"POST",body:{targetActorSelection:"/user/connectivityRoot/connectionIdsRetrieval/singleton",headers:{aggregate:!1},piggybackCommand:{type:"connectivity.commands:retrieveAllConnectionIds"}},unwrapJsonPath:"?.?.connectionIds"},retrieveConnection:{path:"/devops/piggyback/connectivity",method:"POST",body:{targetActorSelection:"/system/sharding/connection",headers:{aggregate:!1},piggybackCommand:{type:"connectivity.commands:retrieveConnection",connectionId:"{{connectionId}}"}},unwrapJsonPath:"?.?.connection"},createConnection:{path:"/devops/piggyback/connectivity",method:"POST",body:{targetActorSelection:"/system/sharding/connection",headers:{aggregate:!1},piggybackCommand:{type:"connectivity.commands:createConnection",connection:"{{connectionJson}}"}},unwrapJsonPath:"?.?.connection"},modifyConnection:{path:"/devops/piggyback/connectivity",method:"POST",body:{targetActorSelection:"/system/sharding/connection",headers:{aggregate:!1},piggybackCommand:{type:"connectivity.commands:modifyConnection",connection:"{{connectionJson}}"}},unwrapJsonPath:null},deleteConnection:{path:"/devops/piggyback/connectivity",method:"POST",body:{targetActorSelection:"/system/sharding/connection",headers:{aggregate:!1},piggybackCommand:{type:"connectivity.commands:deleteConnection",connectionId:"{{connectionId}}"}},unwrapJsonPath:null},retrieveStatus:{path:"/devops/piggyback/connectivity",method:"POST",body:{targetActorSelection:"/system/sharding/connection",headers:{aggregate:!1},piggybackCommand:{type:"connectivity.commands:retrieveConnectionStatus",connectionId:"{{connectionId}}"}},unwrapJsonPath:"?.?"},retrieveConnectionLogs:{path:"/devops/piggyback/connectivity",method:"POST",body:{targetActorSelection:"/system/sharding/connection",headers:{aggregate:!1,"is-group-topic":!0},piggybackCommand:{type:"connectivity.commands:retrieveConnectionLogs",connectionId:"{{connectionId}}"}},unwrapJsonPath:"?.?"},retrieveConnectionMetrics:{path:"/devops/piggyback/connectivity",method:"POST",body:{targetActorSelection:"/system/sharding/connection",headers:{aggregate:!1,"is-group-topic":!0},piggybackCommand:{type:"connectivity.commands:retrieveConnectionMetrics",connectionId:"{{connectionId}}"}},unwrapJsonPath:"?.?"},connectionCommand:{path:"/devops/piggyback/connectivity",method:"POST",body:{targetActorSelection:"/system/sharding/connection",headers:{aggregate:!1,"is-group-topic":!0},piggybackCommand:{type:"{{command}}",connectionId:"{{connectionId}}"}},unwrapJsonPath:null}}},mr,Re;function hl(e){Re=void 0;let t=q();if(e){let r=t.authSettings?.devops?.method;if(r==="basic"){let n=qp();n?(mr="Authorization",Re="Basic "+window.btoa(n)):(le("DevOps Username/password missing"),document.getElementById("authorize").click())}else if(r==="bearer"){let n=Qp();n?(mr="Authorization",Re="Bearer "+n):(le("DevOps Bearer token missing"),document.getElementById("authorize").click())}else if(r==="oidc"){let n=Zp();n?(mr="Authorization",Re="Bearer "+n):(le("DevOps SSO (Bearer) token missing"),document.getElementById("authorize").click())}else mr="Authorization",Re="Basic"}else{let r=t.authSettings?.main?.method;if(r==="basic"){let n=Yp();n?(mr="Authorization",Re="Basic "+window.btoa(n)):(le("Username/password missing"),document.getElementById("authorize").click())}else if(r==="pre")t.authSettings.main.pre.dittoPreAuthenticatedUsername?(mr="x-ditto-pre-authenticated",Re=t.authSettings.main.pre.dittoPreAuthenticatedUsername):(le("Pre-Authenticated username missing"),document.getElementById("authorize").click());else if(r==="bearer"){let n=Xp();n?(mr="Authorization",Re="Bearer "+n):(le("Bearer token missing"),document.getElementById("authorize").click())}else if(r==="oidc"){let n=Jp();n?(mr="Authorization",Re="Bearer "+n):(le("SSO (Bearer) token missing"),document.getElementById("authorize").click())}else mr="Authorization",Re="Basic"}}function o0(e){return e.status===400&&e.error==="jwt:invalid"||e.status===401}function wa(e,t){e.status&&e.message?(le(e.description+`
(${e.error})`,e.message,e.status),o0(e)&&document.getElementById("authorize").click()):le(JSON.stringify(e),"Error",t.status)}async function yt(e,t,r=null,n=null,p=!1,g=!1,s=!1){if(Re){let u,o=e==="PATCH"?"application/merge-patch+json":"application/json";try{u=await fetch(q().api_uri+(g?"":"/api/2")+t,{method:e,headers:{"Content-Type":o,[mr]:Re,...n},...e!=="GET"&&e!=="DELETE"&&r!==void 0&&{body:JSON.stringify(r)}})}catch(i){throw le(i),i}if(!u.ok){if(s)return p?u:u.json().then(i=>(wa(i,u),i));throw u.json().then(i=>{wa(i,u)}).catch(i=>{le("No error details from Ditto",u.statusText,u.status)}),new Error("An error occurred: "+u.status)}return u.status!==204?p?u:u.json():null}else throw new Error("Authentication missing")}function dl(e,t){if(Re)return new iu.EventSourcePolyfill(`${q().api_uri}/api/2/things?ids=${e}${t?"&"+t:""}`,{headers:{[mr]:Re}});throw new Error("Authentication missing")}async function Me(e,t,r="",n=null,p=null){let g=r0[Ai()][e],s,u;if(g.body?u=JSON.stringify(g.body).replace("{{connectionId}}",r).replace('"{{connectionJson}}"',JSON.stringify(n)).replace("{{command}}",p):n?u=JSON.stringify(n):u=p,Re)try{s=await fetch(q().api_uri+g.path.replace("{{connectionId}}",r),{method:g.method,headers:{"Content-Type":e==="connectionCommand"?"text/plain":"application/json",[mr]:Re},...u&&{body:u}})}catch(o){throw le(o),o}else throw new Error("Authentication missing");if(!s.ok)throw s.json().then(o=>{wa(o,s)}).catch(o=>{le("No error details from Ditto",s.statusText,s.status)}),new Error("An error occured: "+s.status);e!=="connectionCommand"&&s.status!==204?(document.body.style.cursor="progress",s.json().then(o=>{if(o&&o["?"]&&o["?"]["?"].status>=400){let i=o["?"]["?"].payload;wa(i,s)}else g.unwrapJsonPath&&g.unwrapJsonPath.split(".").forEach(function(i){i==="?"&&(i=Object.keys(o)[0]),o=o[i]}),t(o)}).catch(o=>{throw le("Error calling connections API",o),o}).finally(()=>{document.body.style.cursor="default"})):t&&t()}function Ai(){return q().ditto_version===2?"ditto_2":"ditto_3"}var nu=`<!--
  ~ Copyright (c) 2022 Contributors to the Eclipse Foundation
  ~
  ~ See the NOTICE file(s) distributed with this work for additional
  ~ information regarding copyright ownership.
  ~
  ~ This program and the accompanying materials are made available under the
  ~ terms of the Eclipse Public License 2.0 which is available at
  ~ http://www.eclipse.org/legal/epl-2.0
  ~
  ~ SPDX-License-Identifier: EPL-2.0
  -->
<h5 data-bs-toggle="collapse" data-bs-target="#connectionsEdit">
    Manage Connections
</h5>
<hr />
<div class="collapse show" id="connectionsEdit">
    <div class="row resizable_pane" style="height: 80vh;">
        <div class="col-md-4 resizable_flex_column">
            <div class="input-group input-group-sm mt-1 mb-1" role="group">
                <div style="flex-grow: 1;"></div>
                <button class="btn btn-outline-secondary btn-sm button_round_left" id="buttonLoadConnections">
                    <i class="bi bi-arrow-clockwise"></i>
                    Refresh
                </button>
            </div>
            <div class="input-group has-validation">
                <input class="form-control" id="tableValidationConnections" hidden="true"></input>
                <div class="invalid-feedback"></div>
            </div>
            <div class="table-wrap mb-1">
                <table class="table table-striped table-hover table-sm">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Live Status</th>
                            <th>Recovery Status</th>
                        </tr>
                    </thead>
                    <tbody id="tbodyConnections"></tbody>
                </table>
            </div>
        </div>
        <div class="col-md-8 resizable_flex_column">
            <h6>CRUD Connection</h6>
            <crud-toolbar label="Connection Id" id="crudConnection" style="flex-grow: 1;">
                <div class="input-group input-group-sm mb-1">
                    <label class="input-group-text">Template</label>
                    <div class="btn-group dropend">
                        <button class="btn btn-outline-secondary btn-sm dropdown-toggle"
                        data-bs-toggle="dropdown" id="buttonConnectionTemplates" disabled></button>
                        <ul id="ulConnectionTemplates" class="dropdown-menu" style="position: fixed; top: auto;"></ul>                                    
                    </div>
                    <input type="text" class="form-control form-control-sm" id="inputConnectionTemplate" disabled></input>
                </div>
                <div class="input-group has-validation">
                    <input class="form-control" id="editorValidationConnection" hidden="true"></input>
                    <div class="invalid-feedback"></div>
                </div>
                <div class="row mb-1" style="flex-grow: 1;">
                    <div class="col-md-6 resizable_flex_column">
                        <div class="ace_container" style="flex-grow: 1;">
                            <div class="script_editor" id="connectionEditor"></div>
                        </div>        
                    </div>
                    <div class="col-md-6 resizable_flex_column">
                        <h6>Incoming JavaScript Mapping</h6>
                        <div class="ace_container mb-3" style="flex-grow: 1;">
                            <div class="script_editor" id="connectionIncomingScript"></div>
                        </div>
                        <h6>Outgoing JavaScript Mapping</h6>
                        <div class="ace_container" style="flex-grow: 1;">
                            <div class="script_editor" id="connectionOutgoingScript"></div>
                        </div>        
                    </div>
                </div>
            </crud-toolbar>
        </div>
    </div>
</div>
<h5 data-bs-toggle="collapse" data-bs-target="#tabConnectionHelper">
    Connection Status, Metrics and Logs
</h5>
<hr />
<div class="collapse show" id="tabConnectionHelper">
    <div class="row resizable_pane" style="height: 80vh;">
        <div class="col-md-4 resizable_flex_column">
            <ul class="nav nav-tabs nav-fill">
                <li class="nav-item">
                    <a class="nav-link active" data-bs-toggle="tab" data-bs-target="#tabConnectionMetrics">Metrics</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-bs-toggle="tab" data-bs-target="#tabConnectionStatus">Status</a>
                </li>
            </ul>
            <div class="tab-content" style="flex-grow: 1; overflow: hidden">
                <div class="tab-pane container active no-margin" id="tabConnectionMetrics">
                    <div class="resizable_flex_column">
                        <div class="input-group input-group-sm mb-1 mt-1">
                            <button class="btn btn-outline-secondary btn-sm button_round_both"
                                id="buttonResetConnectionMetrics" data-bs-toggle="tooltip"
                                title="Reset connection metrics for the selected connection">
                                <i class="bi bi-x-circle"></i>
                                Reset
                            </button>
                            <div class="form-control-sm" style="flex-grow: 1;"></div>
                            <button class="btn btn-outline-secondary btn-sm button_round_both"
                                id="buttonRetrieveConnectionMetrics" data-bs-toggle="tooltip"
                                title="Refresh connection metrics for the selected connection">
                                <i class="bi bi-arrow-clockwise"></i>
                                Refresh
                            </button>
                        </div>
                        <div class="table-wrap">
                            <table class="table table-striped table-hover table-sm">
                                <thead>
                                    <tr>
                                        <th>Direction</th>
                                        <th>Type</th>
                                        <th>Level</th>
                                        <th>1m</th>
                                        <th>1h</th>
                                        <th>24h</th>
                                    </tr>
                                </thead>
                                <tbody id="tbodyConnectionMetrics"></tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="tab-pane container fade no-margin" id="tabConnectionStatus">
                    <div class="resizable_flex_column">
                        <div class="input-group input-group-sm mb-1 mt-1">
                            <div class="form-control-sm" style="flex-grow: 1;"></div>
                            <button class="btn btn-outline-secondary btn-sm button_round_both"
                                id="buttonRetrieveConnectionStatus" data-bs-toggle="tooltip"
                                title="Refresh connection status">
                                <i class="bi bi-arrow-clockwise"></i>
                                Refresh
                            </button>
                        </div>
                        <div class="ace_container" style="flex-grow: 1;">
                            <div class="script_editor" id="connectionStatusDetail"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-4 resizable_flex_column">
            <h6>Connection Logs <span class="badge rounded-pill bg-info" id="badgeConnectionLogsCount"></span></h6>
            <div class="input-group input-group-sm mb-1">
                <button class="btn btn-outline-secondary btn-sm button_round_left" id="buttonEnableConnectionLogs"
                    data-bs-toggle="tooltip" title="Click to enable connection logs for the selected connection">
                    <i class="bi bi-toggle-off"></i>
                    <span>Enable</span>
                </button>
                <button class="btn btn-outline-secondary btn-sm button_round_right" id="buttonResetConnectionLogs"
                    data-bs-toggle="tooltip" title="Reset connection logs for the selected connection">
                    <i class="bi bi-x-circle"></i>
                    Reset
                </button>
                <div class="form-control-sm" style="flex-grow: 1;"></div>
                <button class="btn btn-outline-secondary btn-sm button_round_both" id="buttonRetrieveConnectionLogs"
                    data-bs-toggle="tooltip" title="Refresh connection logs for the selected connection">
                    <i class="bi bi-arrow-clockwise"></i>
                    Refresh
                </button>
            </div>
            <table-filter id="tableFilterConnectionLogs"></table-filter>
            <div class="table-wrap">
                <table class="table table-striped table-hover table-sm" style="table-layout: fixed;">
                    <thead>
                        <tr>
                            <th>Timestamp</th>
                            <th>Category</th>
                            <th>Type</th>
                            <th>Level</th>
                        </tr>
                    </thead>
                    <tbody id="tbodyConnectionLogs"></tbody>
                </table>
            </div>
        </div>
        <div class="col-md-4 resizable_flex_column">
            <h6>Connection Log Detail</h6>
            <div class="ace_container" style="flex-grow: 1;">
                <div class="script_editor" id="connectionLogDetail"></div>
            </div>
        </div>
    </div>
</div>`;var au=[];document.getElementById("connectionsHTML").innerHTML=nu;function ya(e){au.push(e)}function n0(e,t){au.forEach(r=>r.call(null,e,t))}var Zr={tbodyConnections:null,buttonLoadConnections:null,tabConnections:null,collapseConnections:null,tableValidationConnections:null},Eo;function su(){mt(Zr),Nr(Zr.tabConnections,Zr.collapseConnections,s0,"disableConnections"),pr(Zr.tbodyConnections,Zr.tableValidationConnections),Zr.buttonLoadConnections.onclick=Li,Zr.tbodyConnections.addEventListener("click",a0)}function Jo(e,t=!1){Eo=e?e.id:null,n0(e,t)}function Li(){Zr.tbodyConnections.textContent="";let e=!1;Me("listConnections",t=>{t.forEach(r=>{let n=Ai()==="ditto_2"?r:r.id,p=Zr.tbodyConnections.insertRow();p.id=n,Ai()==="ditto_2"?Me("retrieveConnection",g=>{p.insertCell(0).textContent=g.name},n):p.insertCell(0).textContent=r.name?r.name:n,Me("retrieveStatus",g=>{p.insertCell(-1).textContent=g.liveStatus,p.insertCell(-1).textContent=g.recoveryStatus},n),n===Eo&&(p.classList.add("table-active"),e=!0)}),e||(Eo=null,Jo(null))})}function a0(e){e.target&&e.target.tagName==="TD"&&(Eo===e.target.parentNode.id?(Eo=null,Jo(null)):(Eo=e.target.parentNode.id,Me("retrieveConnection",Jo,Eo)))}function s0(e){e&&(Eo=null,Jo(null)),Li()}var fl={"AMQP 0.9.1":{name:"AMQP 0.9.1",connectionType:"amqp-091",connectionStatus:"closed",failoverEnabled:!0,uri:"amqp://user:password@localhost:5672/vhost",sources:[{addresses:["queueName"],authorizationContext:["ditto:inbound-auth-subject"]}],targets:[{address:"exchangeName/routingKey",topics:["_/_/things/twin/events","_/_/things/live/messages"],authorizationContext:["ditto:outbound-auth-subject"]}]},"AMQP 1.0":{name:"AMQP 1.0",connectionType:"amqp-10",connectionStatus:"closed",failoverEnabled:!0,uri:"amqps://user:password@hono.eclipseprojects.io:5671",sources:[{addresses:["telemetry/FOO"],authorizationContext:["ditto:inbound-auth-subject"]}],targets:[{address:"events/twin",topics:["_/_/things/twin/events"],authorizationContext:["ditto:outbound-auth-subject"]}]},"MQTT 3.1.1":{name:"MQTT 3.1.1",connectionType:"mqtt",connectionStatus:"closed",failoverEnabled:!0,uri:"tcp://test.mosquitto.org:1883",sources:[{addresses:["eclipse-ditto-sandbox/#"],authorizationContext:["ditto:inbound-auth-subject"],qos:0}],targets:[{address:"eclipse-ditto-sandbox/{{ thing:id }}",topics:["_/_/things/twin/events"],authorizationContext:["ditto:outbound-auth-subject"],qos:0}]},"MQTT 5":{name:"MQTT 5",connectionType:"mqtt-5",connectionStatus:"closed",failoverEnabled:!0,uri:"tcp://test.mosquitto.org:1883",sources:[{addresses:["eclipse-ditto-sandbox/#"],authorizationContext:["ditto:inbound-auth-subject"],qos:0}],targets:[{address:"eclipse-ditto-sandbox/{{ thing:id }}",topics:["_/_/things/twin/events"],authorizationContext:["ditto:outbound-auth-subject"],qos:0}]},"MQTT 5 with JS mapping":{name:"MQTT 5 with JS mapping",connectionType:"mqtt-5",connectionStatus:"closed",failoverEnabled:!0,uri:"tcp://test.mosquitto.org:1883",sources:[{addresses:["eclipse-ditto-sandbox/#"],authorizationContext:["ditto:inbound-auth-subject"],qos:0,enforcement:{input:"{{ source:address }}",filters:["eclipse-ditto-sandbox/{{ thing:name }}/update"]},replyTarget:{enabled:!1},payloadMapping:["javascript"]}],targets:[{address:"eclipse-ditto-sandbox/{{ thing:id }}",topics:["_/_/things/twin/events"],authorizationContext:["ditto:outbound-auth-subject"],qos:0,payloadMapping:["javascript"]}],mappingDefinitions:{javascript:{mappingEngine:"JavaScript",options:{incomingScript:`/**
 * Maps the passed parameters to a Ditto Protocol message.
 * @param {Object.<string, string>} headers - The headers Object containing all received header values
 * @param {string} [textPayload] - The String to be mapped
 * @param {ArrayBuffer} [bytePayload] - The bytes to be mapped as ArrayBuffer
 * @param {string} [contentType] - The received Content-Type, e.g. "application/json"
 * @returns {(DittoProtocolMessage|Array<DittoProtocolMessage>)} dittoProtocolMessage(s) -
 *  The mapped Ditto Protocol message,
 *  an array of Ditto Protocol messages or
 *  <code>null</code> if the message could/should not be mapped
 */
function mapToDittoProtocolMsg(
  headers,
  textPayload,
  bytePayload,
  contentType
) {

  // ### Insert/adapt your mapping logic here.
  // Use helper function Ditto.buildDittoProtocolMsg to build Ditto protocol message
  // based on incoming payload.
  // See https://www.eclipse.dev/ditto/connectivity-mapping.html#helper-functions for details.

  // ### example code assuming the Ditto protocol content type for incoming messages.
  if (contentType === 'application/vnd.eclipse.ditto+json') {
    // Message is sent as Ditto protocol text payload and can be used directly
    return JSON.parse(textPayload);
  } else if (contentType === 'application/octet-stream') {
    // Message is sent as binary payload; assume Ditto protocol message (JSON).
    try {
      return JSON.parse(Ditto.arrayBufferToString(bytePayload));
    } catch (e) {
      // parsing failed (no JSON document); return null to drop the message
      return null;
    }
  }

  // no mapping logic matched; return null to drop the message
  return null;
}`,outgoingScript:`/**
 * Maps the passed parameters which originated from a Ditto Protocol message to an external message.
 * @param {string} namespace - The namespace of the entity in java package notation, e.g.: "org.eclipse.ditto". Or "_"
 * (underscore) for connection announcements.
 * @param {string} name - The name of the entity, e.g.: "device".
 * @param {string} group - The affected group/entity: "things"|"policies"|"connections".
 * @param {string} channel - The channel for the signal: "twin"|"live"|"none"
 * @param {string} criterion - The criterion to apply: "commands"|"events"|"search"|"messages"|"announcements"|"errors".
 * @param {string} action - The action to perform: "create"|"retrieve"|"modify"|"delete". Or the announcement name:
 * "opened"|"closed"|"subjectDeletion". Or the subject of the message.
 * @param {string} path - The path which is affected by the message (e.g.: "/attributes"), or the destination
 * of a message (e.g.: "inbox"|"outbox").
 * @param {Object.<string, string>} dittoHeaders - The headers Object containing all Ditto Protocol header values.
 * @param {*} [value] - The value to apply / which was applied (e.g. in a "modify" action).
 * @param {number} [status] - The status code that indicates the result of the command. When this field is set,
 * it indicates that the Ditto Protocol Message contains a response.
 * @param {Object} [extra] - The enriched extra fields when selected via "extraFields" option.
 * @returns {(ExternalMessage|Array<ExternalMessage>)} externalMessage - The mapped external message, an array of
 * external messages or <code>null</code> if the message could/should not be mapped.
 */
function mapFromDittoProtocolMsg(
  namespace,
  name,
  group,
  channel,
  criterion,
  action,
  path,
  dittoHeaders,
  value,
  status,
  extra
) {

  // ###
  // Insert your mapping logic here

  // ### example code using the Ditto protocol content type.
  let headers = dittoHeaders;
  let textPayload = JSON.stringify(Ditto.buildDittoProtocolMsg(namespace, name, group, channel, criterion, action,
                                                               path, dittoHeaders, value, status, extra));
  let bytePayload = null;
  let contentType = 'application/vnd.eclipse.ditto+json';

  return Ditto.buildExternalMsg(
      headers, // The external headers Object containing header values
      textPayload, // The external mapped String
      bytePayload, // The external mapped byte[]
      contentType // The returned Content-Type
  );
}`,loadBytebufferJS:"false",loadLongJS:"false"}}}},"HTTP 1.1":{name:"HTTP 1.1",connectionType:"http-push",connectionStatus:"closed",failoverEnabled:!0,uri:"https://webhook.site:443/<YOUR-WEBHOOK-ID>",specificConfig:{parallelism:"1"},sources:[],targets:[{address:"POST:/ditto-event/{{ thing:id }}",topics:["_/_/things/twin/events"],authorizationContext:["ditto:outbound-auth-subject"],headerMapping:{"content-type":"{{ header:content-type }}","api-key":"this-is-a-secret-api-key-to-send-along"}}]},"Kafka 2.x":{name:"Kafka 2.x",connectionType:"kafka",connectionStatus:"closed",failoverEnabled:!0,uri:"tcp://user:password@localhost:9092",specificConfig:{bootstrapServers:"localhost:9092,other.host:9092",saslMechanism:"plain"},sources:[{addresses:["theTopic"],consumerCount:1,qos:1,authorizationContext:["ditto:inbound-auth-subject"],enforcement:{input:"{{ header:device_id }}",filters:["{{ entity:id }}"]},headerMapping:{},payloadMapping:["Ditto"],replyTarget:{enabled:!0,address:"theReplyTopic",headerMapping:{},expectedResponseTypes:["response","error","nack"]},acknowledgementRequests:{includes:[]},declaredAcks:[]}],targets:[{address:"topic/key",topics:["_/_/things/twin/events","_/_/things/live/messages"],authorizationContext:["ditto:outbound-auth-subject"]}]}};var te={buttonConnectionTemplates:null,ulConnectionTemplates:null,inputConnectionTemplate:null,crudConnection:null,editorValidationConnection:null},je,qo,Qo,Qe,ka;function du(){ya(xa),mt(te),wo(te.ulConnectionTemplates,Object.keys(fl)),je=zt("connectionEditor","ace/mode/json",!0),qo=zt("connectionIncomingScript","ace/mode/javascript",!0),Qo=zt("connectionOutgoingScript","ace/mode/javascript",!0),te.ulConnectionTemplates.addEventListener("click",g0),qo.on("blur",lu(qo,"incomingScript")),Qo.on("blur",lu(Qo,"outgoingScript")),je.on("input",d0),je.getSession().on("changeAnnotation",c0),te.crudConnection.addEventListener("onEditToggle",h0),te.crudConnection.addEventListener("onCreateClick",m0),te.crudConnection.addEventListener("onUpdateClick",p0),te.crudConnection.addEventListener("onDeleteClick",u0)}function lu(e,t){return()=>{if(!te.crudConnection.isEditing||ka)return;let n=JSON.parse(je.getValue());r(n),n.mappingDefinitions.javascript.options[t]=e.getValue(),je.setValue(St(n),-1)};function r(n){n.mappingDefinitions||(n.mappingDefinitions={javascript:{mappingEngine:"JavaScript",options:{incomingScript:"",outgoingScript:""}}})}}function d0(){je.session.getUndoManager().isClean()||(te.inputConnectionTemplate.value=null,te.editorValidationConnection.classList.remove("is-invalid"))}function c0(){ka=je.getSession().getAnnotations().filter(e=>e.type==="error").length>0}function p0(){at(!ka,"Errors in connection json",te.editorValidationConnection),Qe=JSON.parse(je.getValue()),Me("modifyConnection",()=>{Li(),te.crudConnection.toggleEdit()},te.crudConnection.idValue,Qe)}function u0(){Ke(`Are you sure you want to delete connection<br>'${Qe.name}'?`,"Delete",()=>{Me("deleteConnection",()=>{Jo(null),Li()},te.crudConnection.idValue)})}function m0(){at(je.getValue()!=="","Please enter a connection configuration (select a template as a basis)",te.editorValidationConnection),at(!ka,"Errors in connection json",te.editorValidationConnection);let e=JSON.parse(je.getValue());Ai()==="ditto_2"?e.id=Math.random().toString(36).replace("0.",""):delete e.id,Me("createConnection",t=>{Jo(t,!0),Li(),te.crudConnection.toggleEdit()},null,e)}function g0(e){te.inputConnectionTemplate.value=e.target.textContent;let t=JSON.parse(JSON.stringify(fl[te.inputConnectionTemplate.value]));xa(t),te.editorValidationConnection.classList.remove("is-invalid"),je.session.getUndoManager().markClean()}function xa(e){Qe=e,qo.setValue(""),Qo.setValue(""),Qe?(te.crudConnection.idValue=Qe.id?Qe.id:null,je.setValue(St(Qe),-1),Qe.mappingDefinitions&&Qe.mappingDefinitions.javascript&&(qo.setValue(Qe.mappingDefinitions.javascript.options.incomingScript,-1),Qo.setValue(Qe.mappingDefinitions.javascript.options.outgoingScript,-1))):(te.crudConnection.idValue=null,je.setValue(""))}function h0(e){let t=e.detail.isEditing;te.buttonConnectionTemplates.disabled=!t,je.setReadOnly(!t),je.renderer.setShowGutter(t),qo.setReadOnly(!t),qo.renderer.setShowGutter(t),Qo.setReadOnly(!t),Qo.renderer.setShowGutter(t),t||(te.crudConnection.idValue&&te.crudConnection.idValue!==""?xa(Qe):xa(null))}var gn=(r=>(r[r.PROP_LIKE=0]="PROP_LIKE",r[r.PROP_EQ=1]="PROP_EQ",r))(gn||{}),Ie=class e{constructor(t,r,n="@",p){console.assert(!(n==="@"&&t!==0)),this.type=t,this.key=n,this.values=[r],this.keyDisplay=p}add(t){this.values=[...new Set([...t,...this.values])]}toJsonPath(){switch(this.type){case 1:return this.values.map(t=>`@.${this.key}=="${t}"`).join("||");case 0:return this.key==="@"?`/${this.values[0].toString().replace(/\//g,"\\/")}/.test(JSON.stringify(@))`:this.values.map(t=>`/${t.replace(/\//g,"\\/")}/.test(@.${this.key})`).join("||")}}static fromString(t){let r=/^([^:~]+)(:|~)?(.*)/gm.exec(t.replace(/\s/g,""));return r[2]===":"?new e(1,r[3],r[1]):r[2]==="~"?new e(0,r[3],r[1]):new e(0,r[1])}static fromJSON(t){return console.assert(t.values.length===1),new e(t.type,t.values[0],t.key,t.keyDisplay)}toString(){switch(this.type){case 1:return`${this.keyDisplay??this.key}:${this.values.toString().replace(/\\/g,"")}`;case 0:return this.key==="@"?this.values[0]:`${this.keyDisplay??this.key}~${this.values.toString().replace(/\\/g,"")}`}}},hn=class{constructor(){this.terms=[];this.addPropEq=(t,r)=>(this.addOrUpdate(new Ie(1,r,t)),this);this.addPropLike=(t,r)=>(this.addOrUpdate(new Ie(0,r,t)),this);this.addFromString=t=>{let r=Ie.fromString(t);return this.addOrUpdate(r),this};this.addOrUpdate=t=>{let r=this.terms.find(n=>n.type===t.type&&n.key===t.key);return r?r.add(t.values):this.terms.push(t),this};this.getAllUIs=()=>this.terms.map(t=>this.createChipUIForTerm(t));this.deleteFilterCallback=t=>{let r=t.target.getAttribute("data-key"),n=gn[t.target.getAttribute("data-type")];this.terms=this.terms.filter(p=>p.key!==r||p.type!==n),this.onFilterChange&&this.onFilterChange.filterChanged()}}setAllLike(t){return this.addOrUpdate(new Ie(0,t)),this}clear(){this.terms=[]}createChipUIForTerm(t){let r=document.createElement("span");r.classList.add("badge","rounded-pill","bg-info","mb-1","me-1"),r.innerText=t.toString();let n=document.createElement("button");return n.type="button",n.classList.add("btn-close"),n.style.fontSize="0.75em",n.setAttribute("data-key",t.key),n.setAttribute("data-type",gn[t.type]),n.onclick=this.deleteFilterCallback,r.appendChild(n),r}createJsonPath(){let t=this.terms.map(r=>r.toJsonPath());return t.length>1?`$[?(${t.map(r=>`(${r})`).join("&&")})]`:t.length>0?`$[?(${t})]`:null}};var jt={tbodyConnectionLogs:null,tbodyConnectionMetrics:null,buttonRetrieveConnectionStatus:null,buttonRetrieveConnectionLogs:null,buttonEnableConnectionLogs:null,buttonResetConnectionLogs:null,buttonRetrieveConnectionMetrics:null,buttonResetConnectionMetrics:null,tableValidationConnections:null,tableFilterConnectionLogs:null,badgeConnectionLogsCount:null},vl=[],Ea,$i,_a,Ze;async function pu(){ya(E0),mt(jt),$i=zt("connectionLogDetail","ace/mode/json",!0),$i.session.setUseWrapMode(!0),_a=zt("connectionStatusDetail","ace/mode/json",!0),jt.buttonRetrieveConnectionStatus.onclick=cu,document.querySelector('a[data-bs-target="#tabConnectionStatus"]').onclick=cu,jt.buttonEnableConnectionLogs.onclick=x0,jt.buttonResetConnectionLogs.onclick=y0,jt.buttonRetrieveConnectionLogs.onclick=Sa,jt.tbodyConnectionLogs.addEventListener("click",v0),jt.tableFilterConnectionLogs.addEventListener("filterChange",_0),jt.tableFilterConnectionLogs.filterOptions=S0(),jt.buttonRetrieveConnectionMetrics.onclick=wl,document.querySelector('a[data-bs-target="#tabConnectionMetrics"]').onclick=wl,jt.buttonResetConnectionMetrics.onclick=f0,jt.tbodyConnectionMetrics.addEventListener("click",w0)}function f0(){at(Ze,"Please select a connection",jt.tableValidationConnections),Me("connectionCommand",wl,Ze,null,"connectivity.commands:resetConnectionMetrics")}function v0(e){$i.setValue(St(Ea[e.target.parentNode.rowIndex-1]),-1),$i.session.getUndoManager().reset()}function w0(e){}function y0(){at(Ze,"Please select a connection",jt.tableValidationConnections),Me("connectionCommand",Sa,Ze,null,"connectivity.commands:resetConnectionLogs")}function x0(){at(Ze,"Please select a connection",jt.tableValidationConnections),Me("connectionCommand",Sa,Ze,null,"connectivity.commands:enableConnectionLogs")}function wl(){at(Ze,"Please select a connection",jt.tableValidationConnections),jt.tbodyConnectionMetrics.textContent="",Me("retrieveConnectionMetrics",e=>{e.connectionMetrics&&Object.keys(e.connectionMetrics).forEach(t=>{e.connectionMetrics[t]&&Object.keys(e.connectionMetrics[t]).forEach(r=>{let n=e.connectionMetrics[t][r];Wt(jt.tbodyConnectionMetrics,t,!1,null,r,"success",n.success.PT1M,n.success.PT1H,n.success.PT24H);let g=Wt(jt.tbodyConnectionMetrics,t,!1,null,r,"failure",n.failure.PT1M,n.failure.PT1H,n.failure.PT24H).lastElementChild;for(let s=0;s<3;s++)g.innerHTML!=="0"&&g.classList.add("text-danger"),g=g.previousElementSibling})})},Ze)}function cu(){at(Ze,"Please select a connection",jt.tableValidationConnections),Me("retrieveStatus",e=>{_a.setValue(St(e),-1),_a.session.getUndoManager().reset()},Ze)}function Sa(){at(Ze,"Please select a connection",jt.tableValidationConnections),Me("retrieveConnectionLogs",e=>{vl=e.connectionLogs,k0(e),uu()},Ze)}function uu(){jt.tbodyConnectionLogs.textContent="",$i.setValue(""),Ea=jt.tableFilterConnectionLogs.filterItems(vl),Ea.forEach(e=>{Wt(jt.tbodyConnectionLogs,ln(e.timestamp,!0),!1,null,e.category,e.type,e.level)}),dn(jt.badgeConnectionLogsCount,vl,Ea),jt.tbodyConnectionLogs.scrollTop=jt.tbodyConnectionLogs.scrollHeight-jt.tbodyConnectionLogs.clientHeight}function k0(e){e.enabledUntil?(jt.buttonEnableConnectionLogs.querySelector("i").classList.replace("bi-toggle-off","bi-toggle-on"),jt.buttonEnableConnectionLogs.setAttribute("title",`Enabled until ${ln(e.enabledUntil)}`)):(jt.buttonEnableConnectionLogs.querySelector("i").classList.replace("bi-toggle-on","bi-toggle-off"),jt.buttonEnableConnectionLogs.setAttribute("title","Click to enable connection logs for the selected connection"))}function E0(e,t=!0){Ze=e?e.id:null,_a.setValue(""),$i.setValue(""),jt.tbodyConnectionMetrics.textContent="",jt.tbodyConnectionLogs.textContent="",!t&&e&&e.id&&Sa()}function _0(e){uu()}function S0(){let e=[];return["consumed","mapped","dropped","enforced","acknowledged","throttled","dispatched","filtered","published"].forEach(t=>e.push(new Ie(1,t,"type"))),["source","target","response"].forEach(t=>e.push(new Ie(1,t,"category"))),["success","failure"].forEach(t=>e.push(new Ie(1,t,"level"))),["thing"].forEach(t=>e.push(new Ie(1,t,"entityType"))),e}var mu=`<!--
  ~ Copyright (c) 2023 Contributors to the Eclipse Foundation
  ~
  ~ See the NOTICE file(s) distributed with this work for additional
  ~ information regarding copyright ownership.
  ~
  ~ This program and the accompanying materials are made available under the
  ~ terms of the Eclipse Public License 2.0 which is available at
  ~ http://www.eclipse.org/legal/epl-2.0
  ~
  ~ SPDX-License-Identifier: EPL-2.0
  -->
<h5 data-bs-toggle="collapse" data-bs-target="#piggyBackCommands">
    Piggyback Commands
</h5>
<hr />
<div class="collapse show" id="piggyBackCommands">
    <div class="row-cols-md-auto" style="height: 80vh;">
        <div class="col-md-auto resizable_flex_column">
            <div class="row mb-1" style="flex-grow: 1;">
                <div class="col-md-6 resizable_flex_column">
                    <div class="col-md-auto resizable_flex_column">
                        <div class="row mb-1">
                            <div class="col-md-6 resizable_flex_column">
                                <div class="col-md-auto">
                                    <button id="showTemplates" class="btn btn-outline-primary btn-sm button_round_right"
                                        data-bs-toggle="modal" data-bs-target="#templatesModal">
                                        Insert Template
                                    </button>
                                </div>
                            </div>
                            <div class="col-md-6 resizable_flex_column">
                                <div class="col-md-auto">
                                    <button class="btn btn-outline-primary btn-sm button_round_right"
                                        style="float: right;" id="buttonSubmit">
                                        Submit
                                    </button>
                                    <button hidden class="btn btn-outline-secondary btn-sm button_round_right"
                                        style="float: right;" id="buttonCancel">
                                        Cancel
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="input-group input-group-sm mb-1 has-validation">
                            <label class="input-group-text">Service</label>
                            <select class="form-select-sm" id="serviceSelector"></select>
                            <button class="btn btn-outline-primary btn-sm button_round_right"
                                id="buttonLoadServiceInstances">
                                <i class="bi bi-arrow-clockwise"></i>
                            </button>
                            <div class="invalid-feedback"></div>
                        </div>

                        <div class="input-group input-group-sm mb-1" hidden id="instanceContainer">
                            <a class="input-group-text">Instance:</a>
                            <select class="form-select-sm" id="instanceSelector"></select>
                        </div>

                        <div class="input-group input-group-sm mb-1 has-validation" style="width: 20%;">
                            <label class="input-group-text">Timeout in sec</label>
                            <input type="text" class="form-control form-control-sm" id="timeout"></input>
                            <div class="invalid-feedback"></div>
                        </div>
                        <div class="input-group input-group-sm mb-1 has-validation">
                            <label class="input-group-text">Actor path</label>
                            <input type="text" class="form-control form-control-sm" id="targetActorSelection"></input>
                            <div class="invalid-feedback"></div>
                        </div>
                        <div class="has-validation">
                            <h6 id="headerValidationElement">Header</h6>
                            <div class="invalid-feedback"></div>
                        </div>
                        <div class="ace_container" style="flex-grow: 0.2;">
                            <div class="script_editor" id="aceHeaders"></div>
                        </div>
                        <div class="has-validation">
                            <h6 id="commandValidationElement">Command</h6>
                            <div class="invalid-feedback"></div>
                        </div>
                        <div class="ace_container" style="flex-grow: 1;">
                            <div class="script_editor" id="aceCommand"></div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 resizable_flex_column">
                    <div class="row mb-1">
                        <div class="col-md-auto resizable_flex_column">
                            <h6>Request status:</h6>
                        </div>
                        <div class="col-md-auto resizable_flex_column">
                            <div id="responseStatus">no request made</div>
                        </div>
                    </div>
                    <h6>Result</h6>
                    <div class="ace_container" style="flex-grow: 1;">
                        <div class="script_editor" id="acePiggybackResponse"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
`;var Ca={targetActorSelection:"/user/gateway/proxy",headers:{aggregate:!1,"is-group-topic":!1},command:{type:"things.commands:retrieveThing",thingID:"com.acme:foobar1"}};var gu={Overall:{"Modify SBR enabled":{service:"Overall",timeout:5,targetActorSelection:"/system/cluster/core/daemon/downingProvider",headers:{aggregate:!0,"ditto-sudo":!0},command:{type:"ditto.sbr:modify",enabled:!0}}},connectivity:{"sudo: retrieve connection":{service:"connectivity",timeout:5,targetActorSelection:"/system/sharding/connection",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"connectivity.commands:retrieveConnection",connectionId:"{{connection.id}}"}},"sudo: retrieve all connection IDs":{service:"connectivity",timeout:5,targetActorSelection:"/user/connectivityRoot/connectionIdsRetrieval",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"connectivity.commands:retrieveAllConnectionIds"}},"sudo: retrieve all connection IDs by tag":{service:"connectivity",timeout:5,targetActorSelection:"/user/connectivityRoot/connectionIdsRetrieval",headers:{aggregate:!1,"is-group-topic":!1},command:{type:"connectivity.sudo.commands:sudoRetrieveConnectionIdsByTag",tag:"{{tag}}"}},"sudo: retrieve connection tags":{service:"connectivity",timeout:5,targetActorSelection:"/system/sharding/connection",headers:{aggregate:!1,"is-group-topic":!1},command:{type:"connectivity.sudo.commands:sudoRetrieveConnectionTags",connectionId:"{{connection.id}}"}},"sudo: retrieve connection metrics":{service:"connectivity",timeout:5,targetActorSelection:"/system/sharding/connection",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"connectivity.commands:retrieveConnectionMetrics",connectionId:"{{connection.id}}"}},"sudo: retrieve connection logs":{service:"connectivity",timeout:5,targetActorSelection:"/system/sharding/connection",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"connectivity.commands:retrieveConnectionLogs",connectionId:"{{connection.id}}"}},"sudo: enable connection logs":{service:"connectivity",timeout:5,targetActorSelection:"/system/sharding/connection",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"connectivity.commands:enableConnectionLogs",connectionId:"{{connection.id}}"}},"sudo: close connection":{service:"connectivity",timeout:5,targetActorSelection:"/system/sharding/connection",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"connectivity.commands:closeConnection",connectionId:"{{connection.id}}"}},"sudo: open connection":{service:"connectivity",timeout:5,targetActorSelection:"/system/sharding/connection",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"connectivity.commands:openConnection",connectionId:"{{connection.id}}"}},"create connection":{service:"connectivity",timeout:5,targetActorSelection:"/system/sharding/connection",headers:{aggregate:!1,"is-group-topic":!1,"ditto-auth-context":{type:"{{auth.type}}",subjects:["{{subject}}"]}},command:{type:"connectivity.commands:modifyConnection",connection:"{{full.connection.json}}"}},"sudo: modify connection":{service:"connectivity",timeout:5,targetActorSelection:"/system/sharding/connection",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"connectivity.commands:modifyConnection",connection:"{{full.connection.json}}"}},"connectivity: retrieve cleanup progress":{service:"connectivity",timeout:5,targetActorSelection:"/user/connectivityRoot/persistenceCleanup",headers:{"ditto-sudo":!0},command:{type:"status.commands:retrieveHealth"}},"connectivity: retrieve cleanup config":{service:"connectivity",timeout:5,targetActorSelection:"/user/connectivityRoot/persistenceCleanup",headers:{"ditto-sudo":!0},command:{type:"common.commands:retrieveConfig"}},"connectivity: modify cleanup config":{service:"connectivity",timeout:5,targetActorSelection:"/user/connectivityRoot/persistenceCleanup",headers:{"ditto-sudo":!0},command:{type:"common.commands:modifyConfig",config:{enabled:!1,"last-pid":""}}}},gateway:{},policies:{"retrieve policy":{service:"policies",timeout:5,targetActorSelection:"/system/sharding/policy",headers:{aggregate:!1,"is-group-topic":!1,"ditto-auth-context":{type:"{{auth.type}}",subjects:["{{subject}}"]}},command:{type:"policies.commands:retrievePolicy",policyId:"{{policy.id}}"}},"modify policy":{service:"policies",timeout:5,targetActorSelection:"/system/sharding/policy",headers:{aggregate:!1,"is-group-topic":!1,"ditto-auth-context":{type:"{{auth.type}}",subjects:["{{subject}}"]}},command:{type:"policies.commands:modifyPolicy",policyId:"{{policy.id}}",policy:{entries:{}}}},"sudo: retrieve policy":{service:"policies",timeout:5,targetActorSelection:"/system/sharding/policy",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"policies.commands:retrievePolicy",policyId:"{{policy.id}}"}},"sudo: modify policy":{service:"policies",timeout:5,targetActorSelection:"/system/sharding/policy",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"policies.commands:modifyPolicy",policyId:"{{policy.id}}",policy:{entries:{}}}},"sudo: delete policy":{service:"policies",timeout:5,targetActorSelection:"/system/sharding/policy",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"policies.commands:deletePolicy",policyId:"{{policy.id}}"}},"unblock namespace":{service:"policies",timeout:5,targetActorSelection:"/user/blockedNamespacesUpdater/singleton",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"namespaces.commands:unblockNamespace",namespace:"{{namespace}}"}},"policies: retrieve cleanup progress":{service:"policies",timeout:5,targetActorSelection:"/user/policiesRoot/persistenceCleanup",headers:{"ditto-sudo":!0},command:{type:"status.commands:retrieveHealth"}},"policies: retrieve cleanup config":{service:"policies",timeout:5,targetActorSelection:"/user/policiesRoot/persistenceCleanup",headers:{"ditto-sudo":!0},command:{type:"common.commands:retrieveConfig"}},"policies: modify cleanup config":{service:"policies",timeout:5,targetActorSelection:"/user/policiesRoot/persistenceCleanup",headers:{"ditto-sudo":!0},command:{type:"common.commands:modifyConfig",config:{enabled:!1,"last-pid":""}}}},things:{"retrieve thing":{service:"things",timeout:5,targetActorSelection:"/system/sharding/thing",headers:{aggregate:!1,"is-group-topic":!1,"ditto-auth-context":{type:"{{auth.type}}",subjects:["{{subject}}"]}},command:{type:"things.commands:retrieveThing",thingId:"{{thing.id}}"}},"create thing":{service:"things",timeout:5,targetActorSelection:"/system/sharding/thing",headers:{aggregate:!1,"is-group-topic":!1,"ditto-auth-context":{type:"{{auth.type}}",subjects:["{{subject}}"]}},command:{type:"things.commands:createThing",thing:{thingId:"{{thing.id}}",policyId:"{{policy.id}}",attributes:{foo:"bar"}}}},"modify thing":{service:"things",timeout:5,targetActorSelection:"/system/sharding/thing",headers:{aggregate:!1,"is-group-topic":!1,"ditto-auth-context":{type:"{{auth.type}}",subjects:["{{subject}}"]}},command:{type:"things.commands:modifyThing",thing:{thingId:"{{thing.id}}",policyId:"{{policy.id}}",attributes:{foo:"bar"}}}},"sudo: retrieve thing":{service:"things",timeout:5,targetActorSelection:"/system/sharding/thing",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"things.commands:retrieveThing",thingId:"{{thing.id}}"}},"sudo: create thing":{service:"things",timeout:5,targetActorSelection:"/system/sharding/thing",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"things.commands:createThing",thing:{thingId:"{{thing.id}}",policyId:"{{thing.id}}",attributes:{foo:"bar"}}}},"sudo: modify thing":{service:"things",timeout:5,targetActorSelection:"/system/sharding/thing",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"things.commands:modifyThing",thing:{thingId:"{{thing.id}}",policyId:"{{thing.id}}",attributes:{foo:"bar"}}}},"sudo: delete thing":{service:"things",timeout:5,targetActorSelection:"/system/sharding/thing",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"things.commands:deleteThing",thingId:"{{thing.id}}"}},"thing: retrieve cleanup progress":{service:"things",timeout:5,targetActorSelection:"/user/thingsRoot/persistenceCleanup",headers:{"ditto-sudo":!0},command:{type:"status.commands:retrieveHealth"}},"thing: retrieve cleanup config":{service:"things",timeout:5,targetActorSelection:"/user/thingsRoot/persistenceCleanup",headers:{"ditto-sudo":!0},command:{type:"common.commands:retrieveConfig"}},"thing: modify cleanup config":{service:"things",timeout:5,targetActorSelection:"/user/thingsRoot/persistenceCleanup",headers:{"ditto-sudo":!0},command:{type:"common.commands:modifyConfig",config:{enabled:!1,"last-pid":""}}}},search:{"retrieve sync progress":{service:"search",timeout:5,targetActorSelection:"/user/thingsWildcardSearchRoot/searchUpdaterRoot/backgroundSync/singleton",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"status.commands:retrieveHealth"}},"reset sync events":{service:"search",timeout:5,targetActorSelection:"/user/thingsWildcardSearchRoot/searchUpdaterRoot/backgroundSync/singleton",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"status.commands:resetHealthEvents"}},"retrieve sync config":{service:"search",timeout:5,targetActorSelection:"/user/thingsWildcardSearchRoot/searchUpdaterRoot/backgroundSync/singleton",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"common.commands:retrieveConfig"}},"modify sync config":{service:"search",timeout:5,targetActorSelection:"/user/thingsWildcardSearchRoot/searchUpdaterRoot/backgroundSync/singleton",headers:{aggregate:!1,"is-group-topic":!1,"ditto-sudo":!0},command:{type:"common.commands:modifyConfig",config:{enabled:!0,"idle-timeout":"5m",keep:{events:"2"},"max-backoff":"2m","max-restarts":180,"min-backoff":"1s","policy-ask-timeout":"10s","quiet-period":"8m",recovery:"5m",throttle:{period:"10s",throughput:100},"tolerance-window":"20m"}}},"force update thing in index":{service:"search",timeout:5,targetActorSelection:"/user/thingsWildcardSearchRoot/searchUpdaterRoot/thingsUpdater",headers:{aggregate:!1,"is-group-topic":!1,"force-update":!0},command:{type:"thing-search.sudo.commands:sudoUpdateThing",thingId:"<THING-ID>",invalidateThing:!1,invalidatePolicy:!1,updateReason:"UNKNOWN"}},"force update for complete namespaces":{service:"search",timeout:5,targetActorSelection:"/user/thingsWildcardSearchRoot/searchUpdaterRoot/backgroundSyncProxy",headers:{aggregate:!1,"is-group-topic":!1,"force-update":!0,namespaces:["namespace1","namespace2"]},command:{type:"common.commands:shutdown"}}}};var hu=`<!--
  ~ Copyright (c) 2023 Contributors to the Eclipse Foundation
  ~
  ~ See the NOTICE file(s) distributed with this work for additional
  ~ information regarding copyright ownership.
  ~
  ~ This program and the accompanying materials are made available under the
  ~ terms of the Eclipse Public License 2.0 which is available at
  ~ http://www.eclipse.org/legal/epl-2.0
  ~
  ~ SPDX-License-Identifier: EPL-2.0
  -->
<div id="templatesModal" class="modal fade" tabindex="-1">
    <div class="modal-dialog modal-dialog-scrollable modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                Templates
                <button type="button" class="btn-close btn-sm" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <div class="input-group input-group-sm mb-1">
                    <a class="nav-link active">Service: </a>
                    <select class="form-select-sm" id="templateServiceSelector"></select>
                </div>

                <div class="input-group input-group-sm mb-1">
                    <a class="nav-link active">Template:</a>
                    <select class="form-select-sm" id="templateSelector"></select>
                </div>

                <pre class="ace_container" id="commandPreview"></pre>

                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-secondary btn-sm"
                        data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-outline-primary btn-sm" id="insertTemplate"
                        data-bs-toggle="tooltip" data-bs-dismiss="modal">Insert</button>
                </div>
            </div>
        </div>
    </div>
</div>`;var Je={templateServiceSelector:null,templateSelector:null,commandPreview:null,insertTemplate:null,templatesModal:null},yl="Overall",xl,kl=new Map,bn=new Map;document.getElementById("templatesHTML").innerHTML=hu;async function bu(){mt(Je),R0(),Je.templateServiceSelector.onchange=vu,Je.templateSelector.onchange=wu,Je.insertTemplate.onclick=M0}function fu(e){Je.templateServiceSelector.value=e,vu()}function El(e,t,r){return{targetActorSelection:e,headers:t,piggybackCommand:r}}function R0(){let e=[];for(let[t,r]of Object.entries(gu).sort()){e.push(t),bn.set(t,[]);for(let[n,p]of Object.entries(r))bn.get(t).push(n),kl.set(n,p),p.service!==yl&&bn.get(yl).push(n)}Ge(Je.templateServiceSelector,e),Ge(Je.templateSelector,bn.get(yl))}function vu(){if(Je.templateServiceSelector.value!==xl){xl=Je.templateServiceSelector.value;let e=bn.get(xl);Ge(Je.templateSelector,e),wu()}}function wu(){let e=kl.get(Je.templateSelector.value);if(e){let t=El(e.targetActorSelection,e.headers,e.command);Je.commandPreview.textContent=St(t)}else Je.commandPreview.textContent=""}async function M0(){let e=kl.get(Je.templateSelector.value);e&&xu(e)}var _l="Invalid json!",I0="Headers field is required!",O0="Command field is required!",Cu="Timeout field is required!",Tu="Actor path field is required!",Au="No services available!",Tl="Loading...",P0="request in progress",Eu="error",to,Ta="Overall",Ri={},Er,Lu="All",Zo,eo,ro,ti,Sl=new Map,dt={showTemplates:null,serviceSelector:null,instanceContainer:null,instanceSelector:null,timeout:null,buttonLoadServiceInstances:null,targetActorSelection:null,buttonSubmit:null,buttonCancel:null,responseStatus:null,commandValidationElement:null,headerValidationElement:null,tabOperations:null,collapseOperations:null};document.getElementById("piggybackHTML").innerHTML=mu;async function $u(){mt(dt),dt.showTemplates.onclick=function(){let e=dt.serviceSelector.value;e===Tl&&(e=Ta),fu(e)},Nr(dt.tabOperations,dt.collapseOperations,_u,"disableOperations"),D0(),dt.targetActorSelection.placeholder=Ca.targetActorSelection,dt.buttonLoadServiceInstances.onclick=_u,dt.buttonSubmit.onclick=N0,dt.serviceSelector.onchange=Al,dt.instanceSelector.onchange=F0,dt.timeout.onchange=z0,dt.targetActorSelection.onchange=B0}function xu(e){to=e,dt.serviceSelector.value=to.service,Zo=void 0,Al(),dt.timeout.value=to.timeout,dt.targetActorSelection.value=to.targetActorSelection,eo.setValue(St(to.headers),-1),ro.setValue(St(to.command),-1)}async function _u(){Ri[Ta]=[],Ge(dt.serviceSelector,[Tl]),await yt("GET","/devops/logging",null,null,!1,!0).then(t=>{let r=Object.entries(t).sort();r.length>0?r.forEach(n=>{let g=Object.values(n[1]).map(s=>s.instance).sort();g.unshift(Lu),Ri[n[0]]=g}):Ri=[]}).catch(t=>{Ri=[]}),e(Ri);function e(t){let r=Object.keys(t);Er?r.indexOf(Er)==-1&&(Er=void 0):to&&r.indexOf(to.service)!==-1?Er=to.service:r.length>0&&(Er=r[0]),Ge(dt.serviceSelector,r),dt.serviceSelector.value=Er,Al()}}function Al(){!dt.serviceSelector.value!==Er&&(kr(dt.serviceSelector.value!=="",Au,dt.serviceSelector),Er=dt.serviceSelector.value,Er&&Er!==Ta?(dt.instanceContainer.removeAttribute("hidden",""),e(Ri[Er])):dt.instanceContainer.setAttribute("hidden",""));function e(t){Zo?t.indexOf(Zo)==-1&&(Zo=void 0):t.length>0&&(Zo=t[0]),Ge(dt.instanceSelector,t),dt.instanceSelector.value=Zo}}function D0(){eo=zt("aceHeaders","ace/mode/json"),eo.setOption("wrap",!0),Sl.set(eo.getSession(),dt.headerValidationElement),ro=zt("aceCommand","ace/mode/json"),ro.setOption("wrap",!0),Sl.set(ro.getSession(),dt.commandValidationElement),ti=zt("acePiggybackResponse","ace/mode/json"),ti.setReadOnly(!0),ti.setOption("wrap",!0),eo.setOption("placeholder",St(Ca.headers)),ro.setOption("placeholder",St(Ca.command)),eo.getSession().on("changeAnnotation",Su),ro.getSession().on("changeAnnotation",Su)}function Su(e,t){kr(!Cl(t),_l,Sl.get(t))}function Cl(e){return e.getAnnotations().filter(t=>t.type==="error").length>0}async function N0(){if(e()){dt.responseStatus.textContent=P0,ti.setValue("",-1);let p=t(dt.serviceSelector.value,dt.instanceSelector.value,dt.timeout.value),g=El(dt.targetActorSelection.value,JSON.parse(eo.getValue()),JSON.parse(ro.getValue()));new Promise((u,o)=>{r(o);try{yt("POST",p,g,null,!0,!0).then(i=>u(i)).catch(i=>o(i))}catch(i){n(),ti.setValue(i.message,-1),dt.responseStatus.textContent=Eu}}).then(u=>{n(),u.json().then(o=>{ti.setValue(St(o),-1),dt.responseStatus.textContent=u.status})}).catch(u=>{n(),ti.setValue(u.message,-1),dt.responseStatus.textContent=Eu})}function e(){let p=kr(dt.timeout.value.trim()!=="",Cu,dt.timeout),g=kr(dt.serviceSelector.value!==""&&dt.serviceSelector.value!==Tl,Au,dt.serviceSelector),s=kr(dt.targetActorSelection.value.trim()!=="",Tu,dt.targetActorSelection),u=kr(eo.getValue().trim()!=="",I0,dt.headerValidationElement);u&&=kr(!Cl(eo.getSession()),_l,dt.headerValidationElement);let o=kr(ro.getValue().trim()!=="",O0,dt.commandValidationElement);return o&&=kr(!Cl(ro.getSession()),_l,dt.commandValidationElement),p&&g&&s&&u&&o}function t(p,g,s){let u="";return p&&p!==Ta&&(u=`/${p}`,g&&g!=Lu&&(u+=`/${g}`)),`/devops/piggyback${u}?timeout=${s}`}function r(p){dt.buttonCancel.onclick=function(){p({message:"Cancelled"})},dt.buttonCancel.removeAttribute("hidden",""),dt.buttonSubmit.setAttribute("hidden","")}function n(){dt.buttonCancel.setAttribute("hidden",""),dt.buttonSubmit.removeAttribute("hidden",""),dt.buttonCancel.onclick=void 0}}function F0(){Zo=dt.instanceSelector.value}function z0(){kr(dt.timeout.value.trim()!=="",Cu,dt.timeout)}function B0(){kr(dt.targetActorSelection.value.trim()!=="",Tu,dt.targetActorSelection)}function kr(e,t,r){try{at(e,t,r)}catch{return!1}return!0}var Ru=`<!--
  ~ Copyright (c) 2023 Contributors to the Eclipse Foundation
  ~
  ~ See the NOTICE file(s) distributed with this work for additional
  ~ information regarding copyright ownership.
  ~
  ~ This program and the accompanying materials are made available under the
  ~ terms of the Eclipse Public License 2.0 which is available at
  ~ http://www.eclipse.org/legal/epl-2.0
  ~
  ~ SPDX-License-Identifier: EPL-2.0
-->

<h5 data-bs-toggle="collapse" data-bs-target="#servicesLogging">Ditto Services Logging</h5>
<hr />
<div class="collapse show" id="servicesLogging">
    <div class="input-group input-group-sm mt-1 mb-1" role="group">
        <div style="flex-grow: 1;"></div>
        <button class="btn btn-outline-primary btn-sm button_round_left" id="buttonLoadAllLogLevels">
            <i class="bi bi-arrow-clockwise"></i>
            Refresh
        </button>
    </div>
    <div class="row resizable_pane" style="height: 80vh">
        <div class="col-md-12 resizable_flex_column">
            <div id="divLoggers"></div>
            <template id="templateLogger">
                <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
                      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
                <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css"
                    rel="stylesheet"
                    integrity="sha512-dPXYcDub/aeb08c63jRq/k6GaKccl256JQy/AnOq7CAnEZ9FzSL9wSbcZkMp4R26vBsMLFYH4kQ67/bbV8XaCQ=="
                    crossorigin="anonymous" referrerpolicy="no-referrer" />
                <link href="./dist/main.css" rel="stylesheet" />

                <div class="input-group input-group-sm mb-1 has-validation">
                    <input class="form-control me-1" type="text" disabled id="inputLogger" spellcheck="false"></input>
                    <div class="btn-group" role="group">
                        <input type="radio" class="btn-check" name="btnLevel" id="debug" autocomplete="off">
                        <label class="btn btn-sm btn-outline-secondary" for="debug">DEBUG</label>
                        <input type="radio" class="btn-check" name="btnLevel" id="info" autocomplete="off">
                        <label class="btn btn-sm btn-outline-success" for="info">INFO</label>
                        <input type="radio" class="btn-check" name="btnLevel" id="warn" autocomplete="off">
                        <label class="btn btn-sm btn-outline-warning" for="warn">WARN</label>
                        <input type="radio" class="btn-check" name="btnLevel" id="error" autocomplete="off">
                        <label class="btn btn-sm btn-outline-danger" for="error">ERROR</label>
                    </div>
                    <div class="invalid-feedback"></div>
                </div>
            </template>
        </div>
    </div>
</div>
`;var _r={buttonLoadAllLogLevels:null,divLoggers:null,templateLogger:null,tabOperations:null,collapseOperations:null};document.getElementById("servicesLoggingHTML").innerHTML=Ru;async function Iu(){mt(_r),Nr(_r.tabOperations,_r.collapseOperations,Ll,"disableOperations"),_r.buttonLoadAllLogLevels.onclick=Ll}function Mu(e,t){yt("PUT","/devops/logging/"+e,t,null,!1,!0).then(()=>{Ll()})}function Ll(){yt("GET","/devops/logging",null,null,!1,!0).then(e=>H0(e)).catch(e=>{_r.divLoggers.textContent=""})}function H0(e){_r.divLoggers.textContent="",Object.keys(e).sort().forEach((p,g)=>{t(p,g),Object.values(e[p])[0].loggerConfigs.forEach(s=>{r(p,s)}),n(p)});function t(p,g){let s=document.createElement("h6");s.innerText=p,g>0&&s.classList.add("mt-3"),_r.divLoggers.append(s)}function r(p,g){let s=document.createElement("div");s.attachShadow({mode:"open"}),s.shadowRoot.append(_r.templateLogger.content.cloneNode(!0)),s.shadowRoot.getElementById("inputLogger").value=g.logger,s.shadowRoot.getElementById(g.level).setAttribute("checked",""),Array.from(s.shadowRoot.querySelectorAll(".btn-check")).forEach(u=>{u.addEventListener("click",o=>Mu(p,{logger:g.logger,level:o.target.id}))}),_r.divLoggers.append(s)}function n(p){let g=document.createElement("div");g.attachShadow({mode:"open"}),g.shadowRoot.append(_r.templateLogger.content.cloneNode(!0));let s=g.shadowRoot.getElementById("inputLogger");s.disabled=!1,s.placeholder="Add new logger name and choose log level",s.addEventListener("change",u=>{u.target.classList.remove("is-invalid")}),Array.from(g.shadowRoot.querySelectorAll(".btn-check")).forEach(u=>{u.addEventListener("click",o=>{at(s.value&&s.value.trim()!=="","Logger name must not be empty",s),Mu(p,{logger:s.value,level:o.target.id})})}),_r.divLoggers.append(g)}}var Ou=`<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css" rel="stylesheet"
  integrity="sha512-dPXYcDub/aeb08c63jRq/k6GaKccl256JQy/AnOq7CAnEZ9FzSL9wSbcZkMp4R26vBsMLFYH4kQ67/bbV8XaCQ=="
  crossorigin="anonymous" referrerpolicy="no-referrer" />
<link href="./dist/main.css" rel="stylesheet" />
<div class="resizable_flex_column px-1" id="divRoot">
  <div class="input-group input-group-sm mb-1 mt-1 has-validation">
    <label class="input-group-text" id="label">Default</label>
    <input type="text" class="form-control" spellcheck="false" disabled id="inputIdValue">
    <button class="btn btn-outline-primary btn-sm" id="buttonEdit" data-bs-toggle="tooltip" title="Edit">
      Create
    </button>
    <button class="btn btn-outline-primary btn-sm" hidden id="buttonCreate" data-bs-toggle="tooltip" title="Create">
      Create
    </button>
    <button class="btn btn-outline-primary btn-sm" hidden id="buttonUpdate" data-bs-toggle="tooltip" title="Update">
      Update
    </button>
    <button class="btn btn-outline-secondary btn-sm" hidden id="buttonDelete" data-bs-toggle="tooltip" title="Delete">
      Delete
    </button>
    <button class="btn btn-outline-secondary btn-sm" hidden id="buttonCancel" data-bs-toggle="tooltip" title="Cancel">
      Cancel
    </button>
    <button type="button" id="buttonFullscreen" hidden class="btn btn-outline-secondary btn-sm button_round_both ms-1" title="Toggle fullscreen">
        <i class="bi bi-arrows-fullscreen"></i>
    </button>
    <div class="invalid-feedback"></div>
  </div>
  <slot></slot>
</div>`;var V0="editBackground",Aa="editForground",$l="editForgroundBig",G0="bi-arrows-fullscreen",K0="bi-fullscreen-exit",La="fullscreen";var Rl=class extends HTMLElement{constructor(){super();this.isEditing=!1;this.isEditDisabled=!1;this.isCreateDisabled=!1;this.isDeleteDisabled=!1;this.dom={label:null,inputIdValue:null,buttonEdit:null,buttonCreate:null,buttonUpdate:null,buttonDelete:null,buttonCancel:null,buttonFullscreen:null,divRoot:null};this.attachShadow({mode:"open"})}get idValue(){return this.dom.inputIdValue.value}set idValue(r){let n=this.shadowRoot.getElementById("inputIdValue");n.value=r,n.classList.remove("is-invalid");let p=this.shadowRoot.getElementById("buttonEdit");r&&r!==""?p.innerText="Edit":p.innerText="Create";let g=this.shadowRoot.getElementById("buttonDelete");!this.isEditing&&!this.isDeleteDisabled&&r&&r!==""?g.removeAttribute("hidden"):g.setAttribute("hidden","")}get editDisabled(){return this.isEditDisabled}set createDisabled(r){this.isCreateDisabled=r,this.lazyInit(this.dom.buttonCreate),this.setButtonState(this.dom.buttonCreate,r)}set deleteDisabled(r){this.isDeleteDisabled=r,this.lazyInit(this.dom.buttonDelete),this.setButtonState(this.dom.buttonDelete,r)}set editDisabled(r){this.isEditDisabled=r,this.isEditing||(this.lazyInit(this.dom.buttonEdit),this.setButtonState(this.dom.buttonEdit,r))}lazyInit(r){r||mt(this.dom,this.shadowRoot)}setButtonState(r,n){n?r.setAttribute("hidden",""):r.removeAttribute("hidden")}get validationElement(){return this.dom.inputIdValue}connectedCallback(){this.shadowRoot.innerHTML=Ou,setTimeout(()=>{mt(this.dom,this.shadowRoot),this.dom.buttonEdit.onclick=()=>this.toggleEdit(!1),this.dom.buttonCancel.onclick=()=>this.toggleEdit(!0),this.dom.label.innerText=this.getAttribute("label")||"Label",this.dom.buttonCreate.onclick=this.eventDispatcher("onCreateClick"),this.dom.buttonUpdate.onclick=this.eventDispatcher("onUpdateClick"),this.dom.buttonDelete.onclick=this.eventDispatcher("onDeleteClick"),this.dom.buttonFullscreen.onclick=()=>this.toggleFullscreen(),this.dom.inputIdValue.addEventListener("change",r=>{r.target.classList.remove("is-invalid"),this.dispatchEvent(new CustomEvent("onIdValueChange",{composed:!0}))})})}eventDispatcher(r){return()=>{this.dispatchEvent(new CustomEvent(r,{composed:!0}))}}toggleEdit(r){this.isEditing=!this.isEditing,document.getElementById("modalCrudEdit").classList.toggle(V0),document.body.classList.toggle("modal-open"),document.body.style.overflow=this.isEditing&&this.hasAttribute(La)?"hidden":"",this.dom.divRoot.classList.toggle(this.hasAttribute(La)?$l:Aa),this.setButtonState(this.dom.buttonEdit,this.isEditing||this.isEditDisabled),this.setButtonState(this.dom.buttonFullscreen,!this.isEditing),this.dom.buttonCancel.toggleAttribute("hidden"),this.isEditing?this.dom.inputIdValue.value?this.dom.buttonUpdate.toggleAttribute("hidden"):this.isCreateDisabled||this.dom.buttonCreate.toggleAttribute("hidden"):(this.dom.buttonCreate.setAttribute("hidden",""),this.dom.buttonUpdate.setAttribute("hidden","")),(this.isEditing||!this.dom.inputIdValue.value)&&this.dom.buttonDelete.setAttribute("hidden","");let n=this.isEditing&&(!this.dom.inputIdValue.value||this.hasAttribute("allowIdChange"));this.dom.inputIdValue.disabled=!n,this.dispatchEvent(new CustomEvent("onEditToggle",{composed:!0,detail:{isEditing:this.isEditing,isCancel:r}}))}toggleFullscreen(){this.toggleAttribute(La),this.dom.buttonFullscreen.querySelector(".bi").classList.toggle(G0),this.dom.buttonFullscreen.querySelector(".bi").classList.toggle(K0),document.body.style.overflow=this.isEditing&&this.hasAttribute(La)?"hidden":"",this.dom.divRoot.classList.contains(Aa)?this.dom.divRoot.classList.replace(Aa,$l):this.dom.divRoot.classList.replace($l,Aa)}};customElements.define("crud-toolbar",Rl);function $a(){let e=[];return{addChangeListener:t,notifyAll:r};function t(n){e.push(n)}function r(n){e.forEach(p=>p.call(null,n))}}var Pu=`<div>
    <h5>Policies</h5>
    <hr />
    <div class="row">
        <div class="col-md-4">
            <h6>Load a policy</h6>
            <form class="input-group input-group-sm mb-1 mt-1 has-validation" role="group" autocomplete="off">
                <label class="input-group-text">Policy Id</label>
                <input autocomplete="false" name="hidden" type="text" style="display:none;">
                <input type="search" class="form-control form-control-sm" id="inputPolicyId"></input>
                <button id="buttonLoadPolicy" class="btn btn-outline-primary btn-sm"
                    title="Load policy with the given ID">
                    Load
                </button>
                <div class="invalid-feedback"></div>
            </form>
            <h6>Recent policies</h6>
            <div class="table-wrap" style="height: 35vh;">
                <table class="table table-striped table-hover table-sm">
                    <tbody id="tbodyRecentPolicies"></tbody>
                </table>
            </div>
            <h6>Who am I</h6>
            <div class="table-wrap" style="height: 35vh;">
                <table class="table table-striped table-hover table-sm">
                    <tbody id="tbodyWhoami"></tbody>
                </table>
            </div>
        </div>
        <div class="col-md-8">
            <div class="resizable_flex_column">
                <ul class="nav nav-tabs nav-fill">
                    <li class="nav-item">
                        <a class="nav-link active" data-bs-toggle="tab" data-bs-target="#tabPolicyEntries">Entries</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-bs-toggle="tab" data-bs-target="#tabPolicyImports">Imports</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-bs-toggle="tab" data-bs-target="#tabPolicyJson">JSON</a>
                    </li>
                </ul>
                <div class="tab-content" style="flex-grow: 1; overflow: hidden;">
                    <div class="tab-pane container active no-margin" id="tabPolicyEntries">
                        <h5>Policy Entries</h5>
                        <hr />
                        <div class="row resizable_pane" style="height: 22vh;">
                            <div class="col-md-6 resizable_flex_column">
                                <div class="input-group has-validation">
                                    <input class="form-control" id="tableValidationEntries" hidden="true"></input>
                                    <div class="invalid-feedback"></div>
                                </div>
                                <div class="table-wrap">
                                    <table class="table table-striped table-hover table-sm">
                                        <tbody id="tbodyPolicyEntries"></tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="col-md-6 resizable_flex_column">
                                <crud-toolbar label="Entry" id="crudEntry">
                                    <div class="input-group input-group-sm mb-1">
                                        <label class="input-group-text">Importable</label>
                                        <select class="form-select form-select-sm" id="selectImportable" disabled>
                                            <option selected value="implicit">implicit</option>
                                            <option value="explicit">explicit</option>
                                            <option value="never">never</option>
                                        </select>
                                    </div>    
                                </crud-toolbar>
                            </div>
                        </div>                
                        <h6>Subjects</h6>
                        <div class="row resizable_pane" style="height: 22vh;">
                            <div class="col-md-6 resizable_flex_column">
                                <div class="input-group has-validation">
                                    <input class="form-control" id="tableValidationSubjects" hidden="true"></input>
                                    <div class="invalid-feedback"></div>
                                </div>
                                <div class="table-wrap">
                                    <table class="table table-striped table-hover table-sm">
                                        <tbody id="tbodyPolicySubjects"></tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="col-md-6 resizable_flex_column">
                                <crud-toolbar label="Subject" id="crudSubject" style="flex-grow: 1;">
                                    <div class="ace_container" style="flex-grow: 1;">
                                        <div class="script_editor" id="subjectEditor"></div>
                                    </div>        
                                </crud-toolbar>
                            </div>
                            <!-- <div class="row flex_column_part">
                            </div> -->
                        </div>
                        <h6>Resources</h6>
                        <div class="row resizable_pane" style="height: 22vh;">
                            <div class="col-md-6 resizable_flex_column">
                                <div class="input-group has-validation">
                                    <input class="form-control" id="tableValidationResources" hidden="true"></input>
                                    <div class="invalid-feedback"></div>
                                </div>
                                <div class="table-wrap">
                                    <table class="table table-striped table-hover table-sm">
                                        <tbody id="tbodyPolicyResources"></tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="col-md-6 resizable_flex_column">
                                <crud-toolbar label="Resource" id="crudResource" style="flex-grow: 1;">
                                    <div class="input-group input-group-sm mb-1">
                                        <label class="input-group-text">Template</label>
                                        <select class="form-select form-select-sm" id="selectResourceTemplates" disabled></select>
                                    </div>
                                    <div class="ace_container" style="flex-grow: 1;">
                                        <div class="script_editor" id="resourceEditor"></div>
                                    </div>        
                                </crud-toolbar>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="tab-content" style="flex-grow: 1; overflow: hidden;">
                    <div class="tab-pane container no-margin" id="tabPolicyImports">
                        <h5>Policy Imports</h5>
                        <hr />
                        <div class="row resizable_pane" style="height: 75vh;">
                            <div class="col-md-6 resizable_flex_column">
                                <div class="table-wrap">
                                    <table class="table table-striped table-hover table-sm">
                                        <tbody id="tbodyPolicyImports"></tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="col-md-6 resizable_flex_column">
                                <crud-toolbar label="Imported Policy Id" id="crudImport" style="flex-grow: 1;">
                                    <div class="table-wrap">
                                        <table class="table table-striped table-hover table-sm">
                                            <tbody id="tbodyPolicyImportEntries"></tbody>
                                        </table>
                                    </div>
                                </crud-toolbar>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="tab-content" style="flex-grow: 1; overflow: hidden; height: 80vh;">
                    <div class="tab-pane container no-margin" id="tabPolicyJson">
                        <crud-toolbar label="PolicyId" id="crudPolicyJson">
                            <div class="input-group input-group-sm mb-1">
                                <label class="input-group-text">Template</label>
                                <select class="form-select form-select-sm" id="selectPolicyJSONTemplate" disabled></select>
                            </div>    
                            <div class="ace_container" style="flex-grow: 1;">
                                <div>
                                    <div class="script_editor" id="policyEditor"></div>
                                </div>
                            </div>
                        </crud-toolbar>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>`;var ei=$a(),At,Du,_e={inputPolicyId:null,tbodyRecentPolicies:null,tbodyWhoami:null,buttonLoadPolicy:null,collapsePolicies:null,tabPolicies:null};document.getElementById("policyHTML").innerHTML=Pu;function Nu(){Ye(Z0),mt(_e),Du=Nr(_e.tabPolicies,_e.collapsePolicies,q0,"disablePolicies"),_e.tbodyRecentPolicies.addEventListener("click",ty),_e.buttonLoadPolicy.onclick=e=>{e.preventDefault(),at(_e.inputPolicyId.value,"Please enter a policyId",_e.inputPolicyId),Mi(_e.inputPolicyId.value)},_e.tbodyWhoami.onclick=e=>{},Ee(X0)}function X0(e){_e.inputPolicyId.value=e&&e.policyId,Du.viewDirty=!0}function J0(){_e.tbodyWhoami.textContent="",yt("GET","/whoami").then(e=>{e.subjects.forEach(t=>{Wt(_e.tbodyWhoami,t,!1,t,t===e.defaultSubject?"default":"")})}).catch(e=>{})}function Mi(e){yt("GET","/policies/"+e).then(t=>_o(t)).catch(()=>_o(null))}async function _o(e){At=e,At?await Q0(At.policyId):_e.inputPolicyId.value=null,ei.notifyAll(At)}async function q0(e){J0(),e&&await _o(null),_e.inputPolicyId.value&&Mi(_e.inputPolicyId.value)}async function Q0(e){let t=q().recentPolicyIds.indexOf(e);t>=0&&q().recentPolicyIds.splice(t,1),q().recentPolicyIds.unshift(e),q().recentPolicyIds.length>=10&&q().recentPolicyIds.pop(),await ne(!1,"recentPolicyIds")}function Z0(e){q().recentPolicyIds=q().recentPolicyIds||[],_e.tbodyRecentPolicies.textContent="",q().recentPolicyIds.forEach(t=>{Wt(_e.tbodyRecentPolicies,t,At&&At.policyId===t,t)})}function ty(e){if(e.target&&e.target.nodeName==="TD"){let t=e.target.parentNode;At&&At.policyId===t.id?_o(null):(_e.inputPolicyId.value=t.id,Mi(t.id))}}function Se(e,t){return()=>{t in[0,1]&&e.toggleEdit(!1),Mi(At.policyId)}}var vn=$a(),Jt,Vt={tbodyPolicyEntries:null,tableValidationEntries:null,selectImportable:null,crudEntry:null};function Fu(){mt(Vt),ei.addChangeListener(ay),pr(Vt.tbodyPolicyEntries,Vt.tableValidationEntries),Vt.crudEntry.editDisabled=!0,Vt.crudEntry.addEventListener("onCreateClick",oy),Vt.crudEntry.addEventListener("onDeleteClick",ny),Vt.crudEntry.addEventListener("onUpdateClick",iy),Vt.crudEntry.addEventListener("onEditToggle",ey),Vt.tbodyPolicyEntries.onclick=ry}function ey(e){Vt.selectImportable.disabled=!e.detail.isEditing,e.detail.isCancel&&zu(Jt)}function ry(e){Jt===e.target.textContent?Jt=null:Jt=e.target.textContent,Ra(Jt)}function oy(){at(Vt.crudEntry.idValue,"Please enter a label for the entry",Vt.crudEntry.validationElement),at(!Object.keys(At.entries).includes(Vt.crudEntry.idValue),`Entry with label ${Vt.crudEntry.idValue} already exists`,Vt.crudEntry.validationElement),Jt=Vt.crudEntry.idValue,Ml(Vt.crudEntry.idValue,{subjects:{},resources:{},importable:Vt.selectImportable.value},Se(Vt.crudEntry,0))}function iy(){At.entries[Jt].importable=Vt.selectImportable.value,Ml(Jt,At.entries[Jt],Se(Vt.crudEntry,1))}function ny(){oo(),Ke(`Are you sure you want to delete policy entry<br>'${Vt.crudEntry.idValue}'?`,"Delete",()=>{Ml(Jt,null,Se(Vt.crudEntry,2))})}function Ml(e,t,r){yt(t?"PUT":"DELETE",`/policies/${At.policyId}/entries/${e}`,t).then(r)}function ay(e){if(Vt.tbodyPolicyEntries.textContent="",Vt.crudEntry.idValue=null,Vt.crudEntry.editDisabled=e===null,e){let t=!1;Object.keys(e.entries).forEach(r=>{Wt(Vt.tbodyPolicyEntries,r,r===Jt),r===Jt&&(Ra(r),t=!0)}),t||(Jt=null,Ra(null))}else Ra(null)}function Ra(e){zu(e),vn.notifyAll(Jt)}function zu(e){Vt.crudEntry.idValue=e,Vt.selectImportable.value=e&&At.entries[e].importable}function oo(){at(Jt,"Please select an entry",Vt.tableValidationEntries)}var gr,ge={tbodyPolicyImports:null,tbodyPolicyImportEntries:null,crudImport:null};function Bu(){mt(ge),ei.addChangeListener(my),ge.tbodyPolicyImports.onclick=ly,ge.crudImport.editDisabled=!0,ge.crudImport.addEventListener("onCreateClick",dy),ge.crudImport.addEventListener("onUpdateClick",cy),ge.crudImport.addEventListener("onDeleteClick",py),ge.crudImport.addEventListener("onEditToggle",uy),ge.crudImport.addEventListener("onIdValueChange",sy)}async function sy(){await Oi(ge.crudImport.idValue),Hu(!1)}function ly(e){let t=e.target;gr===t.parentElement.id?gr=null:gr=t.parentElement.id,Oi(gr)}function Ol(e,t,r){yt(t?"PUT":"DELETE",`/policies/${At.policyId}/imports/${e}`,t).then(r)}function dy(){gr=ge.crudImport.idValue,Ol(gr,Uu(),Se(ge.crudImport,0))}function cy(){Ol(gr,Uu(),Se(ge.crudImport,1))}function py(){Ke(`Are you sure you want to delete policy import<br>'${ge.crudImport.idValue}'?`,"Delete",()=>{Ol(gr,null,Se(ge.crudImport,2))})}function Uu(){let e={},t=document.querySelectorAll('#tbodyPolicyImportEntries input:checked[data-importable="explicit"]');return t.length>0&&(e.entries=Array.from(t).map(r=>r.id)),e}function uy(e){Hu(!e.detail.isEditing),e.detail.isCancel&&Oi(gr)}function Hu(e){document.querySelectorAll('#tbodyPolicyImportEntries input[data-importable="explicit"]').forEach(t=>t.disabled=e)}async function my(e){if(ge.tbodyPolicyImports.textContent="",ge.crudImport.idValue=null,ge.crudImport.editDisabled=e===null,e){let r=!1;for(let n of Object.keys(e.imports)){let p=Wt(ge.tbodyPolicyImports,n,n===gr);Ws(p,"bi-arrow-up-right-square",t(n),"Open policy"),n===gr&&(await Oi(n),r=!0)}r||(gr=null,await Oi(null))}else await Oi(null);function t(r){return n=>{yt("GET","/policies/"+r).then(async p=>{await _o(p)})}}}async function Oi(e){if(ge.crudImport.idValue=e,ge.tbodyPolicyImportEntries.textContent="",e){let r=await yt("GET","/policies/"+e);Object.keys(r.entries).forEach(n=>{let p=ge.tbodyPolicyImportEntries.insertRow(),g=ki(p,n,t(n,r),!0);g.dataset.importable=r.entries[n].importable,vo(p,n,JSON.stringify(r.entries[n],null,4)),vo(p,r.entries[n].importable)})}function t(r,n){let p=At.imports[e],g=p&&p.entries&&p.entries.includes(r),s=n.entries[r].importable==="implicit";return g||s}}var Pl={"Standard Example":{entries:{DEFAULT:{subjects:{"{{ request:subjectId }}":{type:"the creator"}},resources:{"policy:/":{grant:["READ","WRITE"],revoke:[]},"thing:/":{grant:["READ","WRITE"],revoke:[]},"message:/":{grant:["READ","WRITE"],revoke:[]}}}}},"Imports Importing Example":{entries:{DEFAULT:{subjects:{"{{ request:subjectId }}":{type:"the creator"}},resources:{"policy:/":{grant:["READ","WRITE"],revoke:[]}}}},imports:{"ditto:imported-policy":{entries:["EXPLICIT"]},"ditto:another-imported-policy":{}}},"Imports Exporting Example":{entries:{DEFAULT:{subjects:{"{{ request:subjectId }}":{type:"the creator"}},resources:{"policy:/":{grant:["READ","WRITE"],revoke:[]}},importable:"never"},IMPLICIT:{subjects:{"nginx:ditto":{type:"the creator"}},resources:{"things:/":{grant:["READ","WRITE"],revoke:[]}},importable:"implicit"},EXPLICIT:{subjects:{"nginx:ditto":{type:"the creator"}},resources:{"things:/":{grant:["READ","WRITE"],revoke:[]}},importable:"explicit"},NEVER:{subjects:{"nginx:ditto":{type:"the creator"}},resources:{"things:/":{grant:["READ","WRITE"],revoke:[]}},importable:"never"}}}};var ve={crudPolicyJson:null,selectPolicyJSONTemplate:null},io;function ju(){mt(ve),ei.addChangeListener(Wu),io=zt("policyEditor","ace/mode/json",!0),ve.crudPolicyJson.addEventListener("onCreateClick",vy),ve.crudPolicyJson.addEventListener("onDeleteClick",yy),ve.crudPolicyJson.addEventListener("onUpdateClick",wy),ve.crudPolicyJson.addEventListener("onEditToggle",fy),Ge(ve.selectPolicyJSONTemplate,["Select an example",...Object.keys(Pl)]),ve.selectPolicyJSONTemplate.addEventListener("change",by),document.querySelector('a[data-bs-target="#tabPolicyJson"]').addEventListener("shown.bs.tab",e=>{io.renderer.updateFull()})}function by(e){io.setValue(JSON.stringify(Pl[e.target.value],null,2),-1)}function fy(e){io.setReadOnly(!e.detail.isEditing),io.renderer.setShowGutter(e.detail.isEditing),ve.selectPolicyJSONTemplate.disabled=!e.detail.isEditing,ve.selectPolicyJSONTemplate.selectedIndex=0,e.detail.isCancel&&Wu(At)}function vy(){at(ve.crudPolicyJson.idValue,"PolicyId must not be empty",ve.crudPolicyJson.validationElement),Dl(ve.crudPolicyJson.idValue,JSON.parse(io.getValue()),()=>{ve.crudPolicyJson.toggleEdit(!1),Mi(ve.crudPolicyJson.idValue)})}function wy(){Dl(ve.crudPolicyJson.idValue,JSON.parse(io.getValue()),Se(ve.crudPolicyJson,1))}async function yy(){Ke(`Are you sure you want to delete policy<br>'${ve.crudPolicyJson.idValue}'?`,"Delete",()=>{Dl(ve.crudPolicyJson.idValue,null,()=>{e(ve.crudPolicyJson.idValue),_o(null)})});async function e(t){let r=q().recentPolicyIds.indexOf(t);r>=0&&q().recentPolicyIds.splice(r,1),await ne(!1,"recentPolicyIds")}}function Dl(e,t,r){yt(t?"PUT":"DELETE",`/policies/${e}`,t).then(r)}function Wu(e){ve.crudPolicyJson.idValue=e&&e.policyId,e?io.setValue(JSON.stringify(e,null,2),-1):io.setValue("")}var Nl={resources:{"thing:/":{grant:["READ","WRITE"],revoke:[]},"message:/":{grant:["READ","WRITE"],revoke:[]},"policy:/":{grant:["READ","WRITE"],revoke:[]}}};var Le,Ht={tbodyPolicyResources:null,selectResourceTemplates:null,tableValidationResources:null,crudResource:null},tr;function Vu(){mt(Ht),vn.addChangeListener(Ly),pr(Ht.tbodyPolicyResources,Ht.tableValidationResources),tr=zt("resourceEditor","ace/mode/json",!0),Ht.tbodyPolicyResources.onclick=_y,Ht.crudResource.editDisabled=!0,Ht.crudResource.addEventListener("onCreateClick",Sy),Ht.crudResource.addEventListener("onUpdateClick",Cy),Ht.crudResource.addEventListener("onDeleteClick",Ty),Ht.crudResource.addEventListener("onEditToggle",Ay),Ge(Ht.selectResourceTemplates,["Select a resource template",...Object.keys(Nl.resources)]),Ht.selectResourceTemplates.addEventListener("change",Ey)}function Ey(e){Ht.crudResource.idValue=e.target.value,tr.setValue(JSON.stringify(Nl.resources[e.target.value],null,2),-1)}function _y(e){Le===e.target.parentNode.id?(Le=null,Ht.crudResource.idValue=null,tr.setValue("")):(Le=e.target.parentNode.id,Ht.crudResource.idValue=Le,tr.setValue(JSON.stringify(At.entries[Jt].resources[Le],null,2),-1)),Ht.crudResource.idValue=Le}function Sy(){oo(),at(Ht.crudResource.idValue,"Please enter a resource",Ht.crudResource.validationElement),at(!Object.keys(At.entries[Jt].resources).includes(Ht.crudResource.idValue),"Resource already exists",Ht.crudResource.validationElement),Le=Ht.crudResource.idValue,Fl(Ht.crudResource.idValue,tr.getValue()!==""?JSON.parse(tr.getValue()):{grant:["READ","WRITE"],revoke:[]},Se(Ht.crudResource,0))}function Cy(){oo(),at(Le,"Please select a resource",Ht.tableValidationResources),Fl(Le,JSON.parse(tr.getValue()),Se(Ht.crudResource,1))}function Ty(){oo(),at(Le,"Please select a resource",Ht.tableValidationResources),Fl(Le,null,Se(Ht.crudResource,2))}function Fl(e,t,r){yt(t?"PUT":"DELETE",`/policies/${At.policyId}/entries/${Jt}/resources/${e}`,t).then(r)}function Ay(e){Ht.selectResourceTemplates.disabled=!e.detail.isEditing,Ht.selectResourceTemplates.selectedIndex=0,tr.setReadOnly(!e.detail.isEditing),tr.renderer.setShowGutter(e.detail.isEditing),e.detail.isCancel&&(Ht.crudResource.idValue=Le,At&&Jt&&Le?tr.setValue(JSON.stringify(At.entries[Jt].resources[Le],null,2),-1):tr.setValue(""))}function Ly(e){Le=null,Ht.tbodyPolicyResources.textContent="",Ht.crudResource.idValue=null,tr.setValue(""),Ht.crudResource.editDisabled=e===null,At&&e&&Object.keys(At.entries[e].resources).forEach(t=>{Wt(Ht.tbodyPolicyResources,t,t===Le,null,JSON.stringify(At.entries[e].resources[t])),t===Le&&(Ht.crudResource.idValue=t,tr.setValue(JSON.stringify(At.entries[e].resources[t],null,2),-1))})}var Oe,qt={tbodyPolicySubjects:null,tableValidationSubjects:null,crudSubject:null},hr;function Gu(){mt(qt),vn.addChangeListener(Dy),pr(qt.tbodyPolicySubjects,qt.tableValidationSubjects),hr=zt("subjectEditor","ace/mode/json",!0),qt.tbodyPolicySubjects.onclick=Ry,qt.crudSubject.editDisabled=!0,qt.crudSubject.addEventListener("onCreateClick",My),qt.crudSubject.addEventListener("onUpdateClick",Iy),qt.crudSubject.addEventListener("onDeleteClick",Oy),qt.crudSubject.addEventListener("onEditToggle",Py)}function Ry(e){let t=e.target;Oe===t.parentElement.id?(Oe=null,hr.setValue("")):(Oe=t.parentElement.id,hr.setValue(JSON.stringify(At.entries[Jt].subjects[Oe],null,2),-1)),qt.crudSubject.idValue=Oe}function My(){oo(),at(qt.crudSubject.idValue,"Please enter a subject or select one above",qt.crudSubject.validationElement),at(!Object.keys(At.entries[Jt].subjects).includes(qt.crudSubject.idValue),"Subject already exists",qt.crudSubject.validationElement),Oe=qt.crudSubject.idValue,zl(qt.crudSubject.idValue,hr.getValue()!==""?JSON.parse(hr.getValue()):{type:"generated"},Se(qt.crudSubject,0))}function zl(e,t,r){yt(t?"PUT":"DELETE",`/policies/${At.policyId}/entries/${Jt}/subjects/${e}`,t).then(r)}function Iy(){oo(),at(Oe,"Please select a subject",qt.tableValidationSubjects),zl(Oe,JSON.parse(hr.getValue()),Se(qt.crudSubject,1))}function Oy(){oo(),at(Oe,"Please select a subject",qt.tableValidationSubjects),zl(Oe,null,Se(qt.crudSubject,2))}function Py(e){hr.setReadOnly(!e.detail.isEditing),hr.renderer.setShowGutter(e.detail.isEditing),e.detail.isCancel&&(qt.crudSubject.idValue=Oe,At&&Jt&&Oe?hr.setValue(JSON.stringify(At.entries[Jt].subjects[Oe],null,2),-1):hr.setValue(""))}function Dy(e){Oe=null,qt.tbodyPolicySubjects.textContent="",qt.crudSubject.idValue=null,qt.crudSubject.editDisabled=e===null,hr.setValue(""),At&&e&&Object.keys(At.entries[e].subjects).forEach(t=>{Wt(qt.tbodyPolicySubjects,t,t===Oe,null,JSON.stringify(At.entries[e].subjects[t])),t===Oe&&(qt.crudSubject.idValue=t,hr.setValue(JSON.stringify(At.entries[e].subjects[t],null,2),-1))})}var Kt={tbodyAttributes:null,crudAttribute:null,badgeAttributeCount:null},Ku,no;function Yu(){Ee(Hy),mt(Kt),Kt.tbodyAttributes.onclick=Uy,Kt.crudAttribute.addEventListener("onCreateClick",Fy),Kt.crudAttribute.addEventListener("onUpdateClick",zy),Kt.crudAttribute.addEventListener("onDeleteClick",By),Kt.crudAttribute.addEventListener("onEditToggle",Wy),no=zt("attributeEditor","ace/mode/json",!0),document.querySelector('a[data-bs-target="#tabCrudAttribute"]').addEventListener("shown.bs.tab",e=>{no.renderer.updateFull()})}function Fy(){at(Kt.crudAttribute.idValue,"Attribute path must not be empty",Kt.crudAttribute.validationElement),at(!kt.attributes||!Object.keys(kt.attributes).includes(Kt.crudAttribute.idValue),`Attribute path ${Kt.crudAttribute.idValue} already exists in Thing`,Kt.crudAttribute.validationElement),Bl("PUT",!0)}function zy(){Bl("PUT")}function By(){Ke(`Are you sure you want to delete attribute<br>'${Kt.crudAttribute.idValue}'?`,"Delete",()=>{Bl("DELETE")})}function Uy(e){if(e.target&&e.target.nodeName==="TD"){let t=e.target.parentNode.children[0].innerText;Kt.crudAttribute.idValue===t?wn(null):wn(kt,t)}}function Bl(e,t=!1){let r=JSON.parse(no.getValue());yt(e,`/things/${kt.thingId}/attributes/${Kt.crudAttribute.idValue}`,e==="PUT"?r:null,t?{"If-None-Match":"*"}:{"If-Match":e==="PUT"?Ku:"*"}).then(()=>{e==="PUT"&&Kt.crudAttribute.toggleEdit(),yr(kt.thingId)})}function wn(e,t=null){Kt.crudAttribute.isEditing||(e?(Kt.crudAttribute.idValue=t,e.attributes&&no.setValue(St(e.attributes[t]),-1)):(Kt.crudAttribute.idValue=null,no.setValue("")))}function Hy(e){Kt.crudAttribute.editDisabled=e===null,Kt.tbodyAttributes.textContent="";let t=0,r=!1;e&&e.attributes&&Object.keys(kt.attributes).forEach(n=>{n===Kt.crudAttribute.idValue&&(wn(kt,n),r=!0),Wt(Kt.tbodyAttributes,n,n===Kt.crudAttribute.idValue,null,jy(kt.attributes[n])),t++}),Kt.badgeAttributeCount.innerText=t>0?t:"",r||wn(null)}function jy(e){return typeof e=="object"?JSON.stringify(e):e.toString()}function Wy(e){let t=e.detail.isEditing;t&&Kt.crudAttribute.idValue&&Kt.crudAttribute.idValue!==""?yt("GET",`/things/${kt.thingId}/attributes/${Kt.crudAttribute.idValue}`,null,null,!0).then(n=>(Ku=n.headers.get("ETag").replace("W/",""),n.json())).then(n=>{r(),no.setValue(St(n),-1)}):(r(),wn(kt,Kt.crudAttribute.idValue),kt.attributes&&no.setValue(St(kt.attributes[Kt.crudAttribute.idValue]),-1));function r(){no.setReadOnly(!t),no.renderer.setShowGutter(t)}}var Xu=`<!--
  ~ Copyright (c) 2022 Contributors to the Eclipse Foundation
  ~
  ~ See the NOTICE file(s) distributed with this work for additional
  ~ information regarding copyright ownership.
  ~
  ~ This program and the accompanying materials are made available under the
  ~ terms of the Eclipse Public License 2.0 which is available at
  ~ http://www.eclipse.org/legal/epl-2.0
  ~
  ~ SPDX-License-Identifier: EPL-2.0
  -->
<div class="tab-pane container fade no-margin">
    <div class="resizable_flex_column">
        <div class="input-group input-group-sm mb-1 mt-1 has-validation">
            <label class="input-group-text">Subject and Timeout</label>
            <input type="text" class="form-control" id="inputMessageSubject"></input>
            <input type="number" class="form-control form-control-sm" id="inputMessageTimeout" value="10"></input>
            <button class="btn btn-outline-primary btn-sm" id="buttonMessageSend" disabled>
                <i class="bi bi-send"></i>
                Send
                <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
            </button>
            <div class="invalid-feedback"></div>
        </div>
        <div class="input-group input-group-sm mb-1 has-validation">
            <label class="input-group-text">Template</label>
            <div class="btn-group dropend">
                <button id="buttonMessageFavorite" class="btn btn-outline-secondary btn-sm" data-bs-toggle="tooltip"
                    title="Save favorite for message on this feature">
                    <i id="favIconMessage" class="bi bi-star"></i>
                </button>
                <button class="btn btn-outline-secondary btn-sm dropdown-toggle dropdown-toggle-split"
                    data-bs-toggle="dropdown"></button>
                <ul id="ulMessageTemplates" class="dropdown-menu" style="position: fixed; top: auto;">
                </ul>
            </div>
            <input type="text" class="form-control" id="inputMessageTemplate">
            <div class="invalid-feedback"></div>
        </div>
        <div class="input-group input-group-sm" style="flex-grow: 1; display: flex;">
            <label class="input-group-text">Payload<br>and<br>Response</label>
            <div class="ace_container" style="flex-grow: 1;">
                <div class="script_editor" id="acePayload"></div>
            </div>
            <div class="ace_container" style="flex-grow: 1;">
                <div class="script_editor" id="aceResponse"></div>
            </div>
        </div>

    </div>
</div>`;var Ju=`<!--
  ~ Copyright (c) 2022 Contributors to the Eclipse Foundation
  ~
  ~ See the NOTICE file(s) distributed with this work for additional
  ~ information regarding copyright ownership.
  ~
  ~ This program and the accompanying materials are made available under the
  ~ terms of the Eclipse Public License 2.0 which is available at
  ~ http://www.eclipse.org/legal/epl-2.0
  ~
  ~ SPDX-License-Identifier: EPL-2.0
  -->
<h5 data-bs-toggle="collapse" data-bs-target="#collapseFeatures">
    Features <span class="badge rounded-pill bg-info" id="badgeFeatureCount"></span></h5>
<hr />
<div class="collapse show" id="collapseFeatures">
    <div class="row resizable_pane" style="height: 45vh;">
        <div class="col-md-4 resizable_flex_column">
            <div class="input-group has-validation">
                <input class="form-control" id="tableValidationFeature" hidden="true"></input>
                <div class="invalid-feedback"></div>
            </div>
            <div class="table-wrap">
                <table class="table table-striped table-hover table-sm">
                    <tbody id="tbodyFeatures"></tbody>
                </table>
            </div>
        </div>
        <div class="col-md-8 resizable_flex_column">
            <ul class="nav nav-tabs nav-fill" id="tabItemsFeatures">
                <li class="nav-item">
                    <a class="nav-link active" data-bs-toggle="tab" data-bs-target="#tabCrudFeature">Manage</a>
                </li>
            </ul>
            <div class="tab-content" style="flex-grow: 1;" id="tabContentFeatures">
                <div class="tab-pane container active no-margin" id="tabCrudFeature">
                    <crud-toolbar id="crudFeature" label="Feature ID">
                        <div class="input-group input-group-sm mb-1">
                            <label class="input-group-text">Definition</label>
                            <input type="text" class="form-control" id="inputFeatureDefinition" disabled></input>
                        </div>
                        <div class="input-group input-group-sm mb-1" style="flex-grow: 1; display: flex;">
                            <label class="input-group-text">Properties<br>and<br>Desired<br>Properties</label>
                            <div class="ace_container" style="flex-grow: 1;">
                                <div class="script_editor" id="featurePropertiesEditor"></div>
                            </div>
                            <div class="ace_container" style="flex-grow: 1;">
                                <div class="script_editor" id="featureDesiredPropertiesEditor"></div>
                            </div>
                        </div>
                    </crud-toolbar>
                </div>
            </div>
        </div>
    </div>
</div>`;var qu=[];document.getElementById("featuresHTML").innerHTML=Ju;function Ma(e){qu.push(e)}function Yy(){qu.forEach(e=>e.call(null,Ct.crudFeature.idValue))}var br,ao,Qu,Ct={crudFeature:null,inputFeatureDefinition:null,badgeFeatureCount:null,tbodyFeatures:null,tableValidationFeature:null};function Zu(){Ee(tx),mt(Ct),pr(Ct.tbodyFeatures,Ct.tableValidationFeature),Ct.tbodyFeatures.onclick=Zy,Ct.crudFeature.editDisabled=!0,Ct.crudFeature.addEventListener("onCreateClick",Qy),Ct.crudFeature.addEventListener("onUpdateClick",Xy),Ct.crudFeature.addEventListener("onDeleteClick",Jy),Ct.crudFeature.addEventListener("onEditToggle",ex),br=zt("featurePropertiesEditor","ace/mode/json",!0),ao=zt("featureDesiredPropertiesEditor","ace/mode/json",!0),br.on("dblclick",qy),document.querySelector('a[data-bs-target="#tabCrudFeature"]').addEventListener("shown.bs.tab",e=>{br.renderer.updateFull(),ao.renderer.updateFull()})}function Xy(){Hl("PUT")}function Jy(){Ke(`Are you sure you want to delete feature<br>'${Ct.crudFeature.idValue}'?`,"Delete",()=>{Hl("DELETE")})}function qy(e){e.domEvent.shiftKey&&setTimeout(()=>{let t=br.getSelectedText();if(t){let r="$.."+t.replace(/['"]+/g,"").trim(),n=Mt({json:JSON.parse(br.getValue()),path:r,resultType:"pointer"});Ap("features/"+Ct.crudFeature.idValue+"/properties"+n)}},10)}function Qy(){at(Ct.crudFeature.idValue,"Feature ID must not be empty",Ct.crudFeature.validationElement),at(!kt.features||!Object.keys(kt.features).includes(Ct.crudFeature.idValue),`Feature ID ${Ct.crudFeature.idValue} already exists in Thing`,Ct.crudFeature.validationElement),Hl("PUT",!0)}function Zy(e){e.target&&e.target.nodeName==="TD"&&(Ct.crudFeature.idValue===e.target.textContent?Pi(null):Pi(kt,e.target.textContent))}function Hl(e,t=!1){at(kt,"No Thing selected"),at(Ct.crudFeature.idValue,"No Feature selected");let r={},n=br.getValue(),p=ao.getValue();Ct.inputFeatureDefinition.value&&(r.definition=Ct.inputFeatureDefinition.value.split(",")),n&&(r.properties=JSON.parse(n)),p&&(r.desiredProperties=JSON.parse(p)),yt(e,"/things/"+kt.thingId+"/features/"+Ct.crudFeature.idValue,e==="PUT"?r:null,t?{"If-None-Match":"*"}:{"If-Match":e==="PUT"?Qu:"*"}).then(()=>{e==="PUT"&&Ct.crudFeature.toggleEdit(),yr(kt.thingId)}).catch()}function Ul(e){e?(Ct.inputFeatureDefinition.value=e.definition?e.definition:null,e.properties?br.setValue(St(e.properties),-1):br.setValue(""),e.desiredProperties?ao.setValue(St(e.desiredProperties),-1):ao.setValue("")):(Ct.inputFeatureDefinition.value=null,br.setValue(""),ao.setValue("")),br.session.getUndoManager().reset(),ao.session.getUndoManager().reset()}function Pi(e,t=null){Ct.crudFeature.isEditing||(e&&e.features&&t?(Ct.crudFeature.idValue=t,Ul(e.features[t])):(Ct.crudFeature.idValue=null,Ul(null)),Yy())}function tx(e){Ct.crudFeature.editDisabled=e===null,Ct.tbodyFeatures.textContent="";let t=0,r=!1;if(e&&e.features)for(let n of Object.keys(e.features))n===Ct.crudFeature.idValue&&(Pi(e,n),r=!0),Wt(Ct.tbodyFeatures,n,n===Ct.crudFeature.idValue),t++;Ct.badgeFeatureCount.textContent=t>0?t:"",r||Pi(e,null)}function ex(e){let t=e.detail.isEditing;t&&Ct.crudFeature.idValue&&Ct.crudFeature.idValue!==""?yt("GET",`/things/${kt.thingId}/features/${Ct.crudFeature.idValue}`,null,null,!0).then(p=>(Qu=p.headers.get("ETag").replace("W/",""),p.json())).then(p=>{r(),Ul(p)}):(r(),n(),Ct.crudFeature.validationElement.classList.remove("is-invalid"));function r(){Ct.inputFeatureDefinition.disabled=!t,br.setReadOnly(!t),br.renderer.setShowGutter(t),ao.setReadOnly(!t),ao.renderer.setShowGutter(t)}function n(){Ct.crudFeature.idValue?Pi(kt,Ct.crudFeature.idValue):Pi(null)}}var Cr,xt={inputMessageSubject:null,inputMessageTimeout:null,inputMessageTemplate:null,buttonMessageSend:null,buttonMessageFavorite:null,ulMessageTemplates:null,favIconMessage:null,tableValidationFeature:null},Sr,yn;async function em(){Ye(ox),Ma(ix),Ei(document.getElementById("tabItemsFeatures"),document.getElementById("tabContentFeatures"),"Send Message",Xu),mt(xt),Sr=zt("acePayload","ace/mode/json"),yn=zt("aceResponse","ace/mode/json",!0),xt.buttonMessageSend.onclick=()=>{at(Cr,"Please select a Feature",xt.tableValidationFeature),at(xt.inputMessageSubject.value,"Please give a Subject",xt.inputMessageSubject),at(xt.inputMessageTimeout.value,"Please give a timeout",xt.inputMessageTimeout),xt.buttonMessageSend.classList.add("busy"),xt.buttonMessageSend.disabled=!0,rx()},xt.buttonMessageFavorite.onclick=async()=>{let e=xt.inputMessageTemplate.value,t=Cr,r=Sr.getValue();at(t,"Please select a Feature",xt.tableValidationFeature),at(e,"Please give a name for the template",xt.inputMessageTemplate),q().messageTemplates[t]=q().messageTemplates[t]||{},Object.keys(q().messageTemplates[t]).includes(e)&&xt.favIconMessage.classList.contains("bi-star-fill")?(xt.favIconMessage.classList.replace("bi-star-fill","bi-star"),delete q().messageTemplates[t][e]):(xt.favIconMessage.classList.replace("bi-star","bi-star-fill"),q().messageTemplates[t][e]={subject:xt.inputMessageSubject.value,timeout:xt.inputMessageTimeout.value,...r&&{payload:JSON.parse(r)}},Sr.session.getUndoManager().markClean()),await ne(!1,"messageTemplates")},xt.ulMessageTemplates.addEventListener("click",e=>{if(e.target&&e.target.classList.contains("dropdown-item")){xt.favIconMessage.classList.replace("bi-star","bi-star-fill");let t=q().messageTemplates[Cr][e.target.textContent];xt.inputMessageTemplate.value=e.target.textContent,xt.inputMessageSubject.value=t.subject,xt.inputMessageTimeout.value=t.timeout,Sr.setValue(St(t.payload),-1),Sr.session.getUndoManager().markClean()}}),[xt.inputMessageTemplate,xt.inputMessageSubject,xt.inputMessageTimeout].forEach(e=>{e.addEventListener("change",()=>{xt.favIconMessage.classList.replace("bi-star-fill","bi-star")})}),Sr.on("input",()=>{Sr.session.getUndoManager().isClean()||xt.favIconMessage.classList.replace("bi-star-fill","bi-star")})}function rx(){let e;Sr&&Sr.getValue().length>0?e=JSON.parse(Sr.getValue()):e=null,yn.setValue(""),yt("POST","/things/"+kt.thingId+"/features/"+Cr+"/inbox/messages/"+xt.inputMessageSubject.value+"?timeout="+xt.inputMessageTimeout.value,e,null,!1,!1,!0).then(t=>{xt.buttonMessageSend.classList.remove("busy"),xt.buttonMessageSend.disabled=!1,xt.inputMessageTimeout.value>0&&yn.setValue(St(t),-1)}).catch(t=>{xt.buttonMessageSend.classList.remove("busy"),xt.buttonMessageSend.disabled=!1,yn.setValue(`Error: ${t}`)})}function ox(e){q().messageTemplates=q().messageTemplates||{},e||rm(),e==="messageTemplates"&&om()}function rm(){xt.favIconMessage.classList.replace("bi-star-fill","bi-star"),xt.inputMessageTemplate.value=null,xt.inputMessageSubject.value=null,xt.inputMessageTimeout.value="10",Sr.setValue(""),yn.setValue(""),xt.ulMessageTemplates.textContent="",xt.buttonMessageSend.disabled=!Cr||Cr===""}function om(){xt.ulMessageTemplates.textContent="",Go(xt.ulMessageTemplates,"Saved message templates",!0),Cr&&q().messageTemplates[Cr]&&wo(xt.ulMessageTemplates,Object.keys(q().messageTemplates[Cr]))}function ix(e){e!==Cr&&(Cr=e,rm(),om())}var im=`<!--
  ~ Copyright (c) 2022 Contributors to the Eclipse Foundation
  ~
  ~ See the NOTICE file(s) distributed with this work for additional
  ~ information regarding copyright ownership.
  ~
  ~ This program and the accompanying materials are made available under the
  ~ terms of the Eclipse Public License 2.0 which is available at
  ~ http://www.eclipse.org/legal/epl-2.0
  ~
  ~ SPDX-License-Identifier: EPL-2.0
  -->
<h5 data-bs-toggle="collapse" data-bs-target="#collapseMessages">
    Incoming Thing Updates <span class="badge rounded-pill bg-info" id="badgeMessageIncomingCount"></span></h5>
<hr />
<div class="collapse" id="collapseMessages">
    <div class="row resizable_pane" style="height: 45vh;">
        <div class="col-md-7 resizable_flex_column">
            <div class="input-group input-group-sm mb-1">
                <button class="btn btn-outline-secondary btn-sm button_round_right" id="buttonResetMessagesIncoming"
                    data-bs-toggle="tooltip" title="Reset connection logs for the selected connection">
                    <i class="bi bi-x-circle"></i>
                    Reset
                </button>
            </div>
            <table-filter id="tableFilterMessagesIncoming"></table-filter>
            <div class="table-wrap">
                <table class="table table-striped table-hover table-sm">
                    <thead>
                        <tr>
                            <th>Revision</th>
                            <th>Action</th>
                            <th>Path</th>
                            <th>Field(s)</th>
                            <th>Modified</th>
                        </tr>
                    </thead>
                    <tbody id="tbodyMessagesIncoming"></tbody>
                </table>
            </div>
        </div>
        <div class="col-md-5 resizable_flex_column">
            <h6>Thing Update Detail</h6>
            <div class="input-group input-group-sm mb-1 mt-1">
                <label class="input-group-text" for="selectThingUpdateMessageContent">Show</label>
                <select class="form-select form-select-sm" id="selectThingUpdateMessageContent">
                    <option value="ONLY_CONTEXT" selected>Only context</option>
                    <option value="ONLY_CONTEXT_WITH_METADATA">Only context with metadata</option>
                    <option value="FULL_THING">Only full Thing JSON</option>
                    <option value="FULL_THING_WITH_CONTEXT">Full Thing JSON with context and metadata</option>
                </select>
            </div>
            <div class="ace_container" style="flex-grow: 1;">
                <div class="script_editor" id="messageIncomingDetail"></div>
            </div>
        </div>
    </div>
</div>`;var Pe={badgeMessageIncomingCount:null,buttonResetMessagesIncoming:null,selectThingUpdateMessageContent:null,tbodyMessagesIncoming:null,tableFilterMessagesIncoming:null},xn=[],Tr=[],Di,So,nm,am="ONLY_CONTEXT";document.getElementById("messagesIncomingHTML").innerHTML=im;function sm(){ga(dx),Ee(cx),mt(Pe),So=zt("messageIncomingDetail","ace/mode/json",!0),Pe.buttonResetMessagesIncoming.onclick=dm,Pe.selectThingUpdateMessageContent.onchange=lx,Pe.tbodyMessagesIncoming.addEventListener("click",sx),Pe.tableFilterMessagesIncoming.addEventListener("filterChange",px),Pe.tableFilterMessagesIncoming.filterOptions=pm()}function sx(e){Di=e.target.parentNode.rowIndex-1,lm(),So.session.getUndoManager().reset()}function lm(){switch(am){case"FULL_THING_WITH_CONTEXT":{So.setValue(St(Tr[Di]),-1);break}case"FULL_THING":{let t=Object.entries(Tr[Di]).filter(([n,p])=>!n.startsWith("_")),r=Object.fromEntries(t);So.setValue(St(r),-1);break}case"ONLY_CONTEXT_WITH_METADATA":{let t=Object.entries(Tr[Di]).filter(([n,p])=>n.startsWith("_")),r=Object.fromEntries(t);So.setValue(St(r),-1);break}case"ONLY_CONTEXT":{let t=Object.entries(Tr[Di]).filter(([n,p])=>n.startsWith("_")).filter(([n,p])=>n!=="_metadata"),r=Object.fromEntries(t);So.setValue(St(r),-1);break}default:So.setValue(St(Tr[Di]),-1)}}function dm(){xn=[],Tr=[],Pe.badgeMessageIncomingCount.textContent="",Pe.tbodyMessagesIncoming.textContent="",So.setValue("")}function lx(){am=Pe.selectThingUpdateMessageContent.value,lm()}function dx(e){xn.push(e);let t=Pe.tableFilterMessagesIncoming.filterItems([e]);t.length>0&&(Tr.push(t[0]),cm(t[0])),dn(Pe.badgeMessageIncomingCount,xn,Tr)}function cm(e){let t=e._context.topic.substring(e._context.topic.lastIndexOf("/")+1);Wt(Pe.tbodyMessagesIncoming,e._revision,!1,null,t,e._context.path,r(t).join(`
`),ln(e._modified,!0));function r(n){return n==="deleted"?[]:e._context?.value?[...e._context.value.features?Object.keys(e._context.value.features):[],...e._context.value.attributes?Object.keys(e._context.value.attributes):[]]:[...e.features?Object.keys(e.features):[],...e.attributes?Object.keys(e.attributes):[]]}}function cx(e){(!e||e.thingId!==nm)&&(nm=e?e.thingId:null,dm(),Pe.tableFilterMessagesIncoming.filterOptions=pm(e))}function pm(e){let t=[];return["created","modified","merged","deleted"].forEach(r=>t.push(new Ie(0,`/${r}`,"_context.topic","Action"))),e&&["features","attributes"].forEach(r=>{e[r]&&Object.keys(e[r]).forEach(n=>{t.push(new Ie(0,`/${r}/${n}`,"_context.path","Path"))})}),t}function px(e){Pe.tbodyMessagesIncoming.textContent="",Tr=Pe.tableFilterMessagesIncoming.filterItems(xn),Tr.forEach(t=>cm(t)),dn(Pe.badgeMessageIncomingCount,xn,Tr)}var um=`<!--
  ~ Copyright (c) 2023 Contributors to the Eclipse Foundation
  ~
  ~ See the NOTICE file(s) distributed with this work for additional
  ~ information regarding copyright ownership.
  ~
  ~ This program and the accompanying materials are made available under the
  ~ terms of the Eclipse Public License 2.0 which is available at
  ~ http://www.eclipse.org/legal/epl-2.0
  ~
  ~ SPDX-License-Identifier: EPL-2.0
  -->
<div class="tab-pane container fade no-margin">
    <div class="resizable_flex_column">
        <div class="input-group input-group-sm mb-1 mt-1 has-validation">
            <label class="input-group-text">Subject and Timeout</label>
            <input type="text" class="form-control" id="inputThingMessageSubject"></input>
            <input type="number" class="form-control form-control-sm" id="inputThingMessageTimeout" value="10"></input>
            <button class="btn btn-outline-primary btn-sm" id="buttonThingMessageSend">
                <i class="bi bi-send"></i>
                Send
                <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
            </button>
            <div class="invalid-feedback"></div>
        </div>
        <div class="input-group input-group-sm mb-1 has-validation">
            <label class="input-group-text">Template</label>
            <div class="btn-group dropend">
                <button id="buttonThingMessageFavorite" class="btn btn-outline-secondary btn-sm" data-bs-toggle="tooltip"
                    title="Save favorite for message on this feature">
                    <i id="favIconThingMessage" class="bi bi-star"></i>
                </button>
                <button class="btn btn-outline-secondary btn-sm dropdown-toggle dropdown-toggle-split"
                    data-bs-toggle="dropdown"></button>
                <ul id="ulThingMessageTemplates" class="dropdown-menu" style="position: fixed; top: auto;">
                </ul>
            </div>
            <input type="text" class="form-control" id="inputThingMessageTemplate">
            <div class="invalid-feedback"></div>
        </div>
        <div class="input-group input-group-sm" style="flex-grow: 1; display: flex;">
            <label class="input-group-text">Payload<br>and<br>Response</label>
            <div class="ace_container" style="flex-grow: 1;">
                <div class="script_editor" id="acePayloadThingMessage"></div>
            </div>
            <div class="ace_container" style="flex-grow: 1;">
                <div class="script_editor" id="aceResponseThingMessage"></div>
            </div>
        </div>

    </div>
</div>`;var Et={inputThingMessageSubject:null,inputThingMessageTimeout:null,inputThingMessageTemplate:null,buttonThingMessageSend:null,buttonThingMessageFavorite:null,ulThingMessageTemplates:null,favIconThingMessage:null},Ar,kn;async function mm(){Ye(hx),Ee(fx),Ei(document.getElementById("tabItemsThing"),document.getElementById("tabContentThing"),"Send Message",um),mt(Et),Ar=zt("acePayloadThingMessage","ace/mode/json"),kn=zt("aceResponseThingMessage","ace/mode/json",!0),Et.buttonThingMessageSend.onclick=()=>{at(Et.inputThingMessageSubject.value,"Please give a Subject",Et.inputThingMessageSubject),at(Et.inputThingMessageTimeout.value,"Please give a timeout",Et.inputThingMessageTimeout),Et.buttonThingMessageSend.classList.add("busy"),Et.buttonThingMessageSend.disabled=!0,gx()},Et.buttonThingMessageFavorite.onclick=async()=>{let e=Et.inputThingMessageTemplate.value,t=Ar.getValue();at(e,"Please give a name for the template",Et.inputThingMessageTemplate),q().messageTemplates["/"]=q().messageTemplates["/"]||{},Object.keys(q().messageTemplates["/"]).includes(e)&&Et.favIconThingMessage.classList.contains("bi-star-fill")?(Et.favIconThingMessage.classList.replace("bi-star-fill","bi-star"),delete q().messageTemplates["/"][e]):(Et.favIconThingMessage.classList.replace("bi-star","bi-star-fill"),q().messageTemplates["/"][e]={subject:Et.inputThingMessageSubject.value,timeout:Et.inputThingMessageTimeout.value,...t&&{payload:JSON.parse(t)}},Ar.session.getUndoManager().markClean()),await ne(!1,"messageTemplates")},Et.ulThingMessageTemplates.addEventListener("click",e=>{if(e.target&&e.target.classList.contains("dropdown-item")){Et.favIconThingMessage.classList.replace("bi-star","bi-star-fill");let t=q().messageTemplates["/"][e.target.textContent];Et.inputThingMessageTemplate.value=e.target.textContent,Et.inputThingMessageSubject.value=t.subject,Et.inputThingMessageTimeout.value=t.timeout,Ar.setValue(St(t.payload),-1),Ar.session.getUndoManager().markClean()}}),[Et.inputThingMessageTemplate,Et.inputThingMessageSubject,Et.inputThingMessageTimeout].forEach(e=>{e.addEventListener("change",()=>{Et.favIconThingMessage.classList.replace("bi-star-fill","bi-star")})}),Ar.on("input",()=>{Ar.session.getUndoManager().isClean()||Et.favIconThingMessage.classList.replace("bi-star-fill","bi-star")})}function gx(){let e;Ar&&Ar.getValue().length>0?e=JSON.parse(Ar.getValue()):e=null,kn.setValue(""),yt("POST","/things/"+kt.thingId+"/inbox/messages/"+Et.inputThingMessageSubject.value+"?timeout="+Et.inputThingMessageTimeout.value,e,null,!1,!1,!0).then(t=>{Et.buttonThingMessageSend.classList.remove("busy"),Et.buttonThingMessageSend.disabled=!1,Et.inputThingMessageTimeout.value>0&&kn.setValue(St(t),-1)}).catch(t=>{Et.buttonThingMessageSend.classList.remove("busy"),Et.buttonThingMessageSend.disabled=!1,kn.setValue(`Error: ${t}`)})}function hx(e){q().messageTemplates=q().messageTemplates||{},e||gm(),bx()}function gm(){Et.favIconThingMessage.classList.replace("bi-star-fill","bi-star"),Et.inputThingMessageTemplate.value=null,Et.inputThingMessageSubject.value=null,Et.inputThingMessageTimeout.value="10",Ar.setValue(""),kn.setValue(""),Et.ulThingMessageTemplates.textContent="",Et.buttonThingMessageSend.disabled=kt===null}function bx(){Et.ulThingMessageTemplates.textContent="",Go(Et.ulThingMessageTemplates,"Saved message templates",!0),q().messageTemplates["/"]&&wo(Et.ulThingMessageTemplates,Object.keys(q().messageTemplates["/"]))}function fx(e,t){(!e||t)&&gm()}var jl={"(empty thing)":{},"WoT ThingModel 'floor-lamp' 1.0.0":{definition:"https://eclipse-ditto.github.io/ditto-examples/wot/models/floor-lamp-1.0.0.tm.jsonld"},"com.acme:coffeebrewer:0.1.0":{definition:"com.acme:coffeebrewer:0.1.0",attributes:{manufacturer:"ACME demo corp.",location:"Berlin, main floor",serialno:"42",model:"Speaking coffee machine"},features:{"coffee-brewer":{definition:["com.acme:coffeebrewer:0.1.0"],properties:{"brewed-coffees":0}},"water-tank":{properties:{configuration:{smartMode:!0,brewingTemp:87,tempToHold:44,timeoutSeconds:6e3},status:{waterAmount:731,temperature:44}}}}}};var er,hm,Nt={tbodyThingDetails:null,crudThings:null,buttonThingDefinitions:null,inputThingDefinition:null,ulThingDefinitions:null};async function bm(){Ee(_x),mt(Nt),er=zt("thingJsonEditor","ace/mode/json",!0),wo(Nt.ulThingDefinitions,Object.keys(jl)),Nt.ulThingDefinitions.addEventListener("click",Ex),Nt.crudThings.addEventListener("onCreateClick",kx),Nt.crudThings.addEventListener("onUpdateClick",xx),Nt.crudThings.addEventListener("onDeleteClick",yx),Nt.crudThings.addEventListener("onEditToggle",Sx),document.querySelector('a[data-bs-target="#tabModifyThing"]').addEventListener("shown.bs.tab",e=>{er.renderer.updateFull()})}function yx(){Ke(`Are you sure you want to delete thing<br>'${Nt.crudThings.idValue}'?`,"Delete",()=>{yt("DELETE",`/things/${Nt.crudThings.idValue}`,null,{"if-match":"*"}).then(()=>{pa()})})}function xx(){yt("PATCH",`/things/${Nt.crudThings.idValue}`,JSON.parse(er.getValue()),{"if-match":hm||"*","if-equal":"skip-minimizing-merge"}).then(()=>{Nt.crudThings.toggleEdit(),yr(Nt.crudThings.idValue,null)})}async function kx(){let e=er.getValue();Nt.crudThings.idValue!==void 0&&Nt.crudThings.idValue!==""?yt("PUT","/things/"+Nt.crudThings.idValue,e===""?{}:JSON.parse(e),{"if-none-match":"*"}).then(t=>{Nt.crudThings.toggleEdit(),yr(t.thingId,()=>{mn([t.thingId])})}):yt("POST","/things",e===""?{}:JSON.parse(e)).then(t=>{Nt.crudThings.toggleEdit(),yr(t.thingId,()=>{mn([t.thingId])})})}function Ex(e){Fr(null),Nt.inputThingDefinition.value=e.target.textContent,er.setValue(St(jl[e.target.textContent]),-1)}function _x(e){if(Nt.crudThings.isEditing)return;t(),r();function t(){Nt.tbodyThingDetails.textContent="",e&&(Wt(Nt.tbodyThingDetails,"thingId",!1,e.thingId,e.thingId),Wt(Nt.tbodyThingDetails,"policyId",!1,e.policyId,e.policyId),Wt(Nt.tbodyThingDetails,"definition",!1,e.definition??" ",e.definition??""),Wt(Nt.tbodyThingDetails,"revision",!1,e._revision,e._revision),Wt(Nt.tbodyThingDetails,"created",!1,e._created,e._created),Wt(Nt.tbodyThingDetails,"modified",!1,e._modified,e._modified))}function r(){if(e){Nt.crudThings.idValue=e.thingId,Nt.inputThingDefinition.value=e.definition??"";let n=JSON.parse(JSON.stringify(e));delete n._revision,delete n._created,delete n._modified,delete n._context,er.setValue(St(n),-1),er.session.getUndoManager().reset()}else Nt.crudThings.idValue=null,Nt.inputThingDefinition.value=null,er.setValue(""),er.session.getUndoManager().reset()}}function Sx(e){let t=e.detail.isEditing;t&&kt?yt("GET",`/things/${kt.thingId}`,null,null,!0).then(g=>(hm=g.headers.get("ETag").replace("W/",""),g.json())).then(g=>{r(),n(g)}):(r(),p());function r(){Nt.buttonThingDefinitions.disabled=!t,Nt.inputThingDefinition.disabled=!t,er.setReadOnly(!t),er.renderer.setShowGutter(t)}function n(g){Nt.inputThingDefinition.value=g.definition??"",er.setValue(St(g),-1)}function p(){Nt.crudThings.idValue&&Nt.crudThings.idValue!==""?yr(Nt.crudThings.idValue,null):(Nt.inputThingDefinition.value=null,er.setValue(""))}}var fm=`<!--
  ~ Copyright (c) 2022 Contributors to the Eclipse Foundation
  ~
  ~ See the NOTICE file(s) distributed with this work for additional
  ~ information regarding copyright ownership.
  ~
  ~ This program and the accompanying materials are made available under the
  ~ terms of the Eclipse Public License 2.0 which is available at
  ~ http://www.eclipse.org/legal/epl-2.0
  ~
  ~ SPDX-License-Identifier: EPL-2.0
  -->
<div class="tab-pane container fade no-margin">
    <div class="resizable_flex_column">
        <div class="ace_container" style="flex-grow: 1;">
            <div class="script_editor" id="aceDescription"></div>
        </div>
    </div>
</div>`;function Wl(e,t){let r,n,p=!1,g=t,s;return{ready:async()=>{let l=Ei(document.getElementById(e.itemsId),document.getElementById(e.contentId),"WoT TD",fm,"Generated WoT Thing Description. This requires a valid reference to a WoT Thing Model in the "+(t?"Feature":"Thing")+" definition. The Ditto environment must have WoT support enabled.");r=document.querySelector(`a[data-bs-target="#${l}"]`),r.onclick=i;let d=Math.random().toString(36).replace("0.","");document.getElementById("aceDescription").id=d,n=zt(d,"ace/mode/json",!0)},onReferenceChanged:l=>{g&&(s=l),r&&r.classList.contains("active")?a():p=!0}};function i(){p&&(a(),p=!1)}function a(){let l=g?"/features/"+s:"";n.setValue(""),kt&&(!g||s)&&yt("GET","/things/"+kt.thingId+l,null,{accept:"application/td+json"}).then(d=>{n.setValue(St(d),-1)}).catch()}}var vm=`<!--
  ~ Copyright (c) 2024 Contributors to the Eclipse Foundation
  ~
  ~ See the NOTICE file(s) distributed with this work for additional
  ~ information regarding copyright ownership.
  ~
  ~ This program and the accompanying materials are made available under the
  ~ terms of the Eclipse Public License 2.0 which is available at
  ~ http://www.eclipse.org/legal/epl-2.0
  ~
  ~ SPDX-License-Identifier: EPL-2.0
  -->
<form class="input-group input-group-sm has-validation mb-1" autocomplete="off">
  <label class="input-group-text" hidden>Filter</label>
  <div class="btn-group dropend">
      <button type="button" class="btn btn-outline-secondary btn-sm dropdown-toggle"
          data-bs-toggle="dropdown" aria-expanded="false"></button>
      <ul id="ulFilterOptions" class="dropdown-menu">
          <input type="text" name="dropdown" class="form-control form-control-sm" placeholder="Filter entries..." spellcheck="false" autocomplete="off">
      </ul>                                    
  </div>
  <input autocomplete="false" name="hidden" type="text" style="display:none;">
  <input type="search" name="main" class="form-control form-control-sm me-1"
    placeholder="Add basic filter..." autocomplete="off" spellcheck="false"></input>
  <div class="form-check form-switch">
    <input class="form-check-input mt-2" type="checkbox" role="switch"
        data-bs-toggle="tooltip" title="Toggle advanced search">
  </div>
  <div class="invalid-feedback"></div>
</form>
<div data-bs-theme="dark">
</div>

`;var Vl=class extends HTMLElement{constructor(){super();this.basicFilters=new hn;this.mode=0;this.basicFilters.onFilterChange=this}connectedCallback(){this.innerHTML=vm,this.mainInput=this.querySelector('input[name="main"]'),this.mainInput.addEventListener("keyup",this.mainInputChangedCallback(this)),this.mainInput.addEventListener("search",this.mainInputChangedCallback(this)),this.dropDownInput=this.querySelector('input[name="dropdown"]'),this.dropDownInput.addEventListener("keyup",this.filterDropdown(this)),this.dropDownInput.addEventListener("search",this.filterDropdown(this)),this.querySelector("button").addEventListener("click",this.onDropDownToggle(this)),this.querySelector("ul").addEventListener("click",this.filterSelectedCallback(this)),this.querySelector('input[role="switch"').addEventListener("click",this.toggleModeCallback(this))}set filterOptions(r){let n=this.querySelector("ul"),p=n.firstElementChild;n.replaceChildren(p),r.forEach(g=>{Go(n,g.toString(),!1,JSON.stringify(g))})}get filter(){return this.validatedFilter}filterItems(r){let n=r;if(this.validatedFilter)try{n=Mt({path:this.validatedFilter,json:r})}catch(p){console.log(p.message)}return n}fillUIChips(){let r=this.querySelector('[data-bs-theme="dark"]');r.textContent="",this.basicFilters.getAllUIs().forEach(n=>r.appendChild(n))}toggleModeCallback(r){return n=>{switch(r.mode){case 0:r.mainInput.value=r.filter,r.mainInput.placeholder="Enter JSONPath to filter...",r.querySelector('[data-bs-theme="dark"]').hidden=!0,r.mode=1;break;case 1:r.mainInput.value="",r.mainInput.placeholder="Add basic filter...",r.querySelector('[data-bs-theme="dark"]').hidden=!1,r.mode=0,this.basicFilters.clear(),this.filterChanged()}}}filterSelectedCallback(r){return n=>{let p=n.target;if(p&&p.classList.contains("dropdown-item")){let g=Ie.fromJSON(JSON.parse(p.dataset.value));r.mode===0?r.basicFilters.addOrUpdate(g):r.mainInput.value=new hn().addOrUpdate(g).createJsonPath()}r.filterChanged()}}mainInputChangedCallback(r){return n=>{if(n.type==="search"||n.key==="Enter"||n.code==="Enter")switch(r.mode){case 0:r.basicFilters.addFromString(r.mainInput.value),r.filterChanged(),r.mainInput.value="";break;case 1:try{let p=Mt({path:r.mainInput.value,json:[{_context:{topic:"test",path:"test"}}]});r.filterChanged()}catch(p){at(!1,p.message,r.mainInput)}}}}filterDropdown(r){return n=>{r.querySelectorAll(".dropdown-menu li").forEach(p=>{let g=n.target.value.toLowerCase();p.hidden=p.textContent.toLowerCase().indexOf(g)<0})}}filterChanged(){switch(this.mode){case 0:this.validatedFilter=this.basicFilters.createJsonPath(),this.fillUIChips();break;case 1:this.validatedFilter=this.mainInput.value}this.dispatchEvent(new CustomEvent("filterChange",{composed:!0,detail:{filter:this.validatedFilter}}))}onDropDownToggle(r){return()=>{r.dropDownInput.value="",r.dropDownInput.dispatchEvent(new Event("keyup")),r.dropDownInput.focus()}}};customElements.define("table-filter",Vl);var Gl=!1,Kl;document.addEventListener("DOMContentLoaded",async function(){dp(),await Ip(),await Fp(),await bm(),await mm(),await Op(),sm(),Yu(),await Lp(),await Wp(),Zu(),await em(),Nu(),ju(),Bu(),Fu(),Gu(),Vu(),su(),du(),await pu(),await Iu(),eu(),await kp(),await $u(),await bu();let e=Wl({itemsId:"tabItemsThing",contentId:"tabContentThing"},!1);Ee(e.onReferenceChanged),await e.ready();let t=Wl({itemsId:"tabItemsFeatures",contentId:"tabContentFeatures"},!0);Ma(t.onReferenceChanged),await t.ready(),new Mr(document.querySelector(".dropdown-toggle"),{popperConfig:{strategy:"fixed"}}),Kl=document.getElementById("mainNavbar"),Kl.querySelectorAll(".nav-link").forEach(g=>{g.addEventListener("click",s=>{Kl.querySelectorAll(".nav-link,.active").forEach(u=>u.classList.remove("active")),s.currentTarget.classList.add("active")})}),document.querySelectorAll(".table").forEach(g=>{g.addEventListener("click",s=>{let u=s.target;u&&u.tagName==="TD"&&(Array.from(u.parentNode.parentNode.children).forEach(o=>{o!==u.parentNode&&o.classList.remove("table-active")}),u.parentElement.classList.toggle("table-active"))})});let r=new ResizeObserver(()=>{Gl=!0});document.querySelectorAll(".resizable_pane").forEach(g=>{r.observe(g),g.addEventListener("mouseup",()=>{Gl&&(window.dispatchEvent(new Event("resize")),Gl=!1)})});let{get:n,set:p}=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value");document.querySelectorAll("input").forEach(g=>{g.addEventListener("change",s=>{s.target.classList.remove("is-invalid")}),Object.defineProperty(g,"value",{get(){return n.call(this)},set(s){return g.classList.remove("is-invalid"),p.call(this,s)}})})});})();
/*! Bundled license information:

event-source-polyfill/src/eventsource.js:
  (** @license
   * eventsource.js
   * Available under MIT License (MIT)
   * https://github.com/Yaffle/EventSource/
   *)

ace-builds/src-noconflict/ace.js:
  (*
  * based on code from:
  *
  * @license RequireJS text 0.25.0 Copyright (c) 2010-2011, The Dojo Foundation All Rights Reserved.
  * Available via the MIT or new BSD license.
  * see: http://github.com/jrburke/requirejs for details
  *)

bootstrap/dist/js/bootstrap.esm.js:
  (*!
    * Bootstrap v5.3.3 (https://getbootstrap.com/)
    * Copyright 2011-2024 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
    * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
    *)

dompurify/dist/purify.es.mjs:
  (*! @license DOMPurify 3.2.4 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.4/LICENSE *)
*/
